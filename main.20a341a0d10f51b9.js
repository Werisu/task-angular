"use strict";(self.webpackChunktask_angular=self.webpackChunktask_angular||[]).push([[179],{2313:(rn,tt,G)=>{G.d(tt,{nm:()=>Cr});var v=G(4976),Ce=(G(4650),G(3692),G(259),G(5861)),Fe=G(6881),$e=G(4859),ye=G(2090),qe=G(1877);const ce=new Map,ge={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function at(Ge){return ce.get(Ge)||Object.assign({},ge)}function Pt(){return Ne}const jt="https://content-firebaseappcheck.googleapis.com/v1",Et="exchangeDebugToken",_t={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Oe{constructor(Ue,Ve,wt,kt,Mn){if(this.operation=Ue,this.retryPolicy=Ve,this.getWaitDuration=wt,this.lowerBound=kt,this.upperBound=Mn,this.pending=null,this.nextErrorWaitInterval=kt,kt>Mn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ue){var Ve=this;return(0,Ce.Z)(function*(){Ve.stop();try{Ve.pending=new ye.BH,yield function rt(Ge){return new Promise(Ue=>{setTimeout(Ue,Ge)})}(Ve.getNextRun(Ue)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new ye.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(wt){Ve.retryPolicy(wt)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(Ue){if(Ue)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const lt=new ye.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Bt(Ge){if(!at(Ge).activated)throw lt.create("use-before-activation",{appName:Ge.name})}function Lt(Ge,Ue){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,Ce.Z)(function*({url:Ge,body:Ue},Ve){const wt={"Content-Type":"application/json"},kt=Ve.getImmediate({optional:!0});if(kt){const Yi=yield kt.getHeartbeatsHeader();Yi&&(wt["X-Firebase-Client"]=Yi)}const Mn={method:"POST",body:JSON.stringify(Ue),headers:wt};let Bn,Tn;try{Bn=yield fetch(Ge,Mn)}catch(Yi){throw lt.create("fetch-network-error",{originalErrorMessage:Yi?.message})}if(200!==Bn.status)throw lt.create("fetch-status-error",{httpStatus:Bn.status});try{Tn=yield Bn.json()}catch(Yi){throw lt.create("fetch-parse-error",{originalErrorMessage:Yi?.message})}const mr=Tn.ttl.match(/^([\d.]+)(s)$/);if(!mr||!mr[2]||isNaN(Number(mr[1])))throw lt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Tn.ttl}`});const ns=1e3*Number(mr[1]),xi=Date.now();return{token:Tn.token,expireTimeMillis:xi+ns,issuedAtTimeMillis:xi}})).apply(this,arguments)}function Sn(Ge,Ue){const{projectId:Ve,appId:wt,apiKey:kt}=Ge.options;return{url:`${jt}/projects/${Ve}/apps/${wt}:${Et}?key=${kt}`,body:{debug_token:Ue}}}const bn="firebase-app-check-database",Be=1,je="firebase-app-check-store";let ke=null;function yn(Ge,Ue){return zn.apply(this,arguments)}function zn(){return(zn=(0,Ce.Z)(function*(Ge,Ue){const wt=(yield function dt(){return ke||(ke=new Promise((Ge,Ue)=>{try{const Ve=indexedDB.open(bn,Be);Ve.onsuccess=wt=>{Ge(wt.target.result)},Ve.onerror=wt=>{var kt;Ue(lt.create("storage-open",{originalErrorMessage:null===(kt=wt.target.error)||void 0===kt?void 0:kt.message}))},Ve.onupgradeneeded=wt=>{0===wt.oldVersion&&wt.target.result.createObjectStore(je,{keyPath:"compositeKey"})}}catch(Ve){Ue(lt.create("storage-open",{originalErrorMessage:Ve?.message}))}}),ke)}()).transaction(je,"readwrite"),Mn=wt.objectStore(je).put({compositeKey:Ge,value:Ue});return new Promise((Bn,Tn)=>{Mn.onsuccess=mr=>{Bn()},wt.onerror=mr=>{var ns;Tn(lt.create("storage-set",{originalErrorMessage:null===(ns=mr.target.error)||void 0===ns?void 0:ns.message}))}})})).apply(this,arguments)}const Gt=new qe.Yd("@firebase/app-check");function br(Ge,Ue){return(0,ye.hl)()?function $t(Ge,Ue){return yn(function Sr(Ge){return`${Ge.options.appId}-${Ge.name}`}(Ge),Ue)}(Ge,Ue).catch(Ve=>{Gt.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function In(){return Pt().enabled}function gi(){return qr.apply(this,arguments)}function qr(){return(qr=(0,Ce.Z)(function*(){const Ge=Pt();if(Ge.enabled&&Ge.token)return Ge.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ki={error:"UNKNOWN_ERROR"};function Ln(Ge){return ye.US.encodeString(JSON.stringify(Ge),!1)}function xn(Ge){return sn.apply(this,arguments)}function sn(){return(sn=(0,Ce.Z)(function*(Ge,Ue=!1){const Ve=Ge.app;Bt(Ve);const wt=at(Ve);let Mn,kt=wt.token;if(kt&&!Xn(kt)&&(wt.token=void 0,kt=void 0),!kt){const mr=yield wt.cachedTokenPromise;mr&&(Xn(mr)?kt=mr:yield br(Ve,void 0))}if(!Ue&&kt&&Xn(kt))return{token:kt.token};let Tn,Bn=!1;if(In()){wt.exchangeTokenPromise||(wt.exchangeTokenPromise=Lt(Sn(Ve,yield gi()),Ge.heartbeatServiceProvider).finally(()=>{wt.exchangeTokenPromise=void 0}),Bn=!0);const mr=yield wt.exchangeTokenPromise;return yield br(Ve,mr),wt.token=mr,{token:mr.token}}try{wt.exchangeTokenPromise||(wt.exchangeTokenPromise=wt.provider.getToken().finally(()=>{wt.exchangeTokenPromise=void 0}),Bn=!0),kt=yield at(Ve).exchangeTokenPromise}catch(mr){"appCheck/throttled"===mr.code?Gt.warn(mr.message):Gt.error(mr),Mn=mr}return kt?Mn?Tn=Xn(kt)?{token:kt.token,internalError:Mn}:Nr(Mn):(Tn={token:kt.token},wt.token=kt,yield br(Ve,kt)):Tn=Nr(Mn),Bn&&function ci(Ge,Ue){const Ve=at(Ge).tokenObservers;for(const wt of Ve)try{"EXTERNAL"===wt.type&&null!=Ue.error?wt.error(Ue.error):wt.next(Ue)}catch{}}(Ve,Tn),Tn})).apply(this,arguments)}function Rn(Ge){return li.apply(this,arguments)}function li(){return(li=(0,Ce.Z)(function*(Ge){const Ue=Ge.app;Bt(Ue);const{provider:Ve}=at(Ue);if(In()){const wt=yield gi(),{token:kt}=yield Lt(Sn(Ue,wt),Ge.heartbeatServiceProvider);return{token:kt}}{const{token:wt}=yield Ve.getToken();return{token:wt}}})).apply(this,arguments)}function Br(Ge,Ue){const Ve=at(Ge),wt=Ve.tokenObservers.filter(kt=>kt.next!==Ue);0===wt.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),Ve.tokenObservers=wt}function ui(Ge){const{app:Ue}=Ge,Ve=at(Ue);let wt=Ve.tokenRefresher;wt||(wt=function Lr(Ge){const{app:Ue}=Ge;return new Oe((0,Ce.Z)(function*(){let wt;if(wt=at(Ue).token?yield xn(Ge,!0):yield xn(Ge),wt.error)throw wt.error;if(wt.internalError)throw wt.internalError}),()=>!0,()=>{const Ve=at(Ue);if(Ve.token){let wt=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return wt=Math.min(wt,Ve.token.expireTimeMillis-3e5),Math.max(0,wt-Date.now())}return 0},_t.RETRIAL_MIN_WAIT,_t.RETRIAL_MAX_WAIT)}(Ge),Ve.tokenRefresher=wt),!wt.isRunning()&&Ve.isTokenAutoRefreshEnabled&&wt.start()}function Xn(Ge){return Ge.expireTimeMillis-Date.now()>0}function Nr(Ge){return{token:Ln(Ki),error:Ge}}class Cn{constructor(Ue,Ve){this.app=Ue,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:Ue}=at(this.app);for(const Ve of Ue)Br(this.app,Ve.next);return Promise.resolve()}}const pn="app-check-internal";!function Pn(){(0,Fe._registerComponent)(new $e.wA("app-check",Ge=>function Qt(Ge,Ue){return new Cn(Ge,Ue)}(Ge.getProvider("app").getImmediate(),Ge.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ge,Ue,Ve)=>{Ge.getProvider(pn).initialize()})),(0,Fe._registerComponent)(new $e.wA(pn,Ge=>function qt(Ge){return{getToken:Ue=>xn(Ge,Ue),getLimitedUseToken:()=>Rn(Ge),addTokenListener:Ue=>function wi(Ge,Ue,Ve,wt){const{app:kt}=Ge,Mn=at(kt);if(Mn.tokenObservers=[...Mn.tokenObservers,{next:Ve,error:wt,type:Ue}],Mn.token&&Xn(Mn.token)){const Tn=Mn.token;Promise.resolve().then(()=>{Ve({token:Tn.token}),ui(Ge)}).catch(()=>{})}Mn.cachedTokenPromise.then(()=>ui(Ge))}(Ge,"INTERNAL",Ue),removeTokenListener:Ue=>Br(Ge.app,Ue)}}(Ge.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)("@firebase/app-check","0.8.0")}();class Cr{constructor(){return(0,v.vb)("app-check")}}typeof window<"u"&&window},3692:(rn,tt,G)=>{G.d(tt,{Ot:()=>Pe,ZF:()=>ot,hX:()=>at,z6:()=>Ce});var v=G(259),te=G(4650),j=G(4976);class Pe{constructor(Oe){return Oe}}class Ce{constructor(){return(0,v.C6)()}}const ye=new te.OlP("angularfire2._apps"),qe={provide:Pe,useFactory:function $e(Ze){return Ze&&1===Ze.length?Ze[0]:new Pe((0,v.Mq)())},deps:[[new te.FiY,ye]]},ce={provide:Ce,deps:[[new te.FiY,ye]]};function ge(Ze){return(Oe,rt)=>{const Dt=Oe.runOutsideAngular(()=>Ze(rt));return new Pe(Dt)}}let Ne=(()=>{class Ze{constructor(rt){(0,v.KN)("angularfire",j.q4.full,"core"),(0,v.KN)("angularfire",j.q4.full,"app"),(0,v.KN)("angular",te.q4F.full,rt.toString())}}return Ze.\u0275fac=function(rt){return new(rt||Ze)(te.LFG(te.Lbi))},Ze.\u0275mod=te.oAB({type:Ze}),Ze.\u0275inj=te.cJS({providers:[qe,ce]}),Ze})();function at(Ze,...Oe){return{ngModule:Ne,providers:[{provide:ye,useFactory:ge(Ze),multi:!0,deps:[te.R0b,te.zs3,j.HU,...Oe]}]}}const ot=(0,j.u3)(v.ZF,!0)},7158:(rn,tt,G)=>{G.d(tt,{AR:()=>ot,ck:()=>ui,dh:()=>qe,e5:()=>gi,gx:()=>ye,rh:()=>Ki,v0:()=>Lt});var v=G(4976),te=G(4650),j=G(3692),Pe=G(259),Ce=G(2313),Fe=G(4322);class ye{constructor(Cn){return Cn}}class qe{constructor(){return(0,v.vb)("auth")}}const ge=new te.OlP("angularfire2.auth-instances");function at(Nr){return(Cn,Qt)=>{const qt=Cn.runOutsideAngular(()=>Nr(Qt));return new ye(qt)}}const gt={provide:qe,deps:[[new te.FiY,ge]]},Pt={provide:ye,useFactory:function Ne(Nr,Cn){const Qt=(0,v.JM)("auth",Nr,Cn);return Qt&&new ye(Qt)},deps:[[new te.FiY,ge],j.Ot]};let jt=(()=>{class Nr{constructor(){(0,Pe.KN)("angularfire",v.q4.full,"auth")}}return Nr.\u0275fac=function(Qt){return new(Qt||Nr)},Nr.\u0275mod=te.oAB({type:Nr}),Nr.\u0275inj=te.cJS({providers:[Pt,gt]}),Nr})();function ot(Nr,...Cn){return{ngModule:jt,providers:[{provide:ge,useFactory:at(Nr),multi:!0,deps:[te.R0b,te.zs3,v.HU,j.z6,[new te.FiY,Ce.nm],...Cn]}]}}const Lt=(0,v.u3)(Fe.v0,!0),gi=(0,v.u3)(Fe.e5,!0),Ki=(0,v.u3)(Fe.rh,!0),ui=(0,v.u3)(Fe.ck,!0)},1205:(rn,tt,G)=>{G.d(tt,{zQ:()=>ai,ww:()=>Er,rT:()=>fn,f7:()=>Lt,L6:()=>q,_Q:()=>Bt,lh:()=>Ut,Qv:()=>lt,nw:()=>Vt});var v=G(4650),te=G(7579),j=G(9646),Pe=G(9751),Ce=G(8996),Fe=G(6451),$e=G(5363),ye=G(3900),qe=G(4004),ce=G(6063);class ge extends te.x{constructor(bn=1/0,Be=1/0,je=ce.l){super(),this._bufferSize=bn,this._windowTime=Be,this._timestampProvider=je,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Be===1/0,this._bufferSize=Math.max(1,bn),this._windowTime=Math.max(1,Be)}next(bn){const{isStopped:Be,_buffer:je,_infiniteTimeWindow:Ye,_timestampProvider:ke,_windowTime:dt}=this;Be||(je.push(bn),!Ye&&je.push(ke.now()+dt)),this._trimBuffer(),super.next(bn)}_subscribe(bn){this._throwIfClosed(),this._trimBuffer();const Be=this._innerSubscribe(bn),{_infiniteTimeWindow:je,_buffer:Ye}=this,ke=Ye.slice();for(let dt=0;dt<ke.length&&!bn.closed;dt+=je?1:2)bn.next(ke[dt]);return this._checkFinalizedStatuses(bn),Be}_trimBuffer(){const{_bufferSize:bn,_timestampProvider:Be,_buffer:je,_infiniteTimeWindow:Ye}=this,ke=(Ye?1:2)*bn;if(bn<1/0&&ke<je.length&&je.splice(0,je.length-ke),!Ye){const dt=Be.now();let Tt=0;for(let $t=1;$t<je.length&&je[$t]<=dt;$t+=2)Tt=$t;Tt&&je.splice(0,Tt+1)}}}var Ne=G(3099);function at(Sn,bn,Be){let je,Ye=!1;return Sn&&"object"==typeof Sn?({bufferSize:je=1/0,windowTime:bn=1/0,refCount:Ye=!1,scheduler:Be}=Sn):je=Sn??1/0,(0,Ne.B)({connector:()=>new ge(je,bn,Be),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ye})}var gt=G(590),Pt=G(576);function jt(Sn,bn){return(0,Pt.m)(bn)?(0,ye.w)(()=>Sn,bn):(0,ye.w)(()=>Sn)}var ot=G(9468),mt=G(9300),Et=G(4976),_t=G(2011),Ze=G(6895),Oe=G(2313),rt=G(9260);const lt=new v.OlP("angularfire2.auth.use-emulator"),q=new v.OlP("angularfire2.auth.settings"),Bt=new v.OlP("angularfire2.auth.tenant-id"),fn=new v.OlP("angularfire2.auth.langugage-code"),Ut=new v.OlP("angularfire2.auth.use-device-language"),Lt=new v.OlP("angularfire.auth.persistence"),Vt=(Sn,bn,Be,je,Ye,ke,dt,Tt)=>(0,_t.cc)(`${Sn.name}.auth`,"AngularFireAuth",Sn.name,()=>{const $t=bn.runOutsideAngular(()=>Sn.auth());if(Be&&$t.useEmulator(...Be),je&&($t.tenantId=je),$t.languageCode=Ye,ke&&$t.useDeviceLanguage(),dt)for(const[Zt,cn]of Object.entries(dt))$t.settings[Zt]=cn;return Tt&&$t.setPersistence(Tt),$t},[Be,je,Ye,ke,dt,Tt]);let ai=(()=>{class Sn{constructor(Be,je,Ye,ke,dt,Tt,$t,Zt,cn,yn,zn,nr){const Fn=new te.x,Sr=(0,j.of)(void 0).pipe((0,$e.Q)(dt.outsideAngular),(0,ye.w)(()=>ke.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,9568)))),(0,qe.U)(()=>(0,_t.on)(Be,ke,je)),(0,qe.U)(Gt=>Vt(Gt,ke,Tt,Zt,cn,yn,$t,zn)),at({bufferSize:1,refCount:!1}));if((0,Ze.PM)(Ye))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,j.of)(null);else{Sr.pipe((0,gt.P)()).subscribe();const Ar=Sr.pipe((0,ye.w)(Wn=>Wn.getRedirectResult().then(Yt=>Yt,()=>null)),Et.iC,at({bufferSize:1,refCount:!1})),fr=Sr.pipe((0,ye.w)(Wn=>new Pe.y(Yt=>({unsubscribe:ke.runOutsideAngular(()=>Wn.onAuthStateChanged(In=>Yt.next(In),In=>Yt.error(In),()=>Yt.complete()))})))),br=Sr.pipe((0,ye.w)(Wn=>new Pe.y(Yt=>({unsubscribe:ke.runOutsideAngular(()=>Wn.onIdTokenChanged(In=>Yt.next(In),In=>Yt.error(In),()=>Yt.complete()))}))));this.authState=Ar.pipe(jt(fr),(0,ot.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular)),this.user=Ar.pipe(jt(br),(0,ot.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular)),this.idToken=this.user.pipe((0,ye.w)(Wn=>Wn?(0,Ce.D)(Wn.getIdToken()):(0,j.of)(null))),this.idTokenResult=this.user.pipe((0,ye.w)(Wn=>Wn?(0,Ce.D)(Wn.getIdTokenResult()):(0,j.of)(null))),this.credential=(0,Fe.T)(Ar,Fn,this.authState.pipe((0,mt.h)(Wn=>!Wn))).pipe((0,qe.U)(Wn=>Wn?.user?Wn:null),(0,ot.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular))}return(0,_t.pX)(this,Sr,ke,{spy:{apply:(Gt,Ar,fr)=>{(Gt.startsWith("signIn")||Gt.startsWith("createUser"))&&fr.then(br=>Fn.next(br))}}})}}return Sn.\u0275fac=function(Be){return new(Be||Sn)(v.LFG(_t.Dh),v.LFG(_t.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Et.HU),v.LFG(lt,8),v.LFG(q,8),v.LFG(Bt,8),v.LFG(fn,8),v.LFG(Ut,8),v.LFG(Lt,8),v.LFG(Oe.nm,8))},Sn.\u0275prov=v.Yz7({token:Sn,factory:Sn.\u0275fac,providedIn:"any"}),Sn})(),Er=(()=>{class Sn{constructor(){rt.Z.registerVersion("angularfire",Et.q4.full,"auth-compat")}}return Sn.\u0275fac=function(Be){return new(Be||Sn)},Sn.\u0275mod=v.oAB({type:Sn}),Sn.\u0275inj=v.cJS({providers:[ai]}),Sn})()},5197:(rn,tt,G)=>{G.d(tt,{KQ:()=>Od,JS:()=>kd});var v=G(4650),te=G(4986),j=G(9751),Pe=G(9646),Ce=G(6451),Fe=G(4004),$e=G(3099),ye=G(3900),qe=G(2940),ce=G(1884),ge=G(4482),Ne=G(5403),at=G(8421),gt=G(4671),Pt=G(5032),jt=G(7669),Et=G(4976),_t=G(2011),Oe=(G(9568),G(3942)),rt=G(4859),Dt=G(5861),lt=G(6881),q=G(2090),Bt=G(1877);const fn="@firebase/database";let Lt="";function Vt(p){Lt=p}class ai{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,q.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,q.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Er{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,q.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Sn=function(p){try{if(typeof window<"u"&&typeof window[p]<"u"){const c=window[p];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new ai(c)}}catch{}return new Er},bn=Sn("localStorage"),Be=Sn("sessionStorage"),je=new Bt.Yd("@firebase/database"),Ye=function(){let p=1;return function(){return p++}}(),ke=function(p){const c=(0,q.dS)(p),d=new q.gQ;d.update(c);const _=d.digest();return q.US.encodeByteArray(_)},dt=function(...p){let c="";for(let d=0;d<p.length;d++){const _=p[d];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?c+=dt.apply(null,_):c+="object"==typeof _?(0,q.Wl)(_):_,c+=" "}return c};let Tt=null,$t=!0;const Zt=function(p,c){(0,q.hu)(!c||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(je.logLevel=Bt.in.VERBOSE,Tt=je.log.bind(je),c&&Be.set("logging_enabled",!0)):"function"==typeof p?Tt=p:(Tt=null,Be.remove("logging_enabled"))},cn=function(...p){if(!0===$t&&($t=!1,null===Tt&&!0===Be.get("logging_enabled")&&Zt(!0)),Tt){const c=dt.apply(null,p);Tt(c)}},yn=function(p){return function(...c){cn(p,...c)}},zn=function(...p){const c="FIREBASE INTERNAL ERROR: "+dt(...p);je.error(c)},nr=function(...p){const c=`FIREBASE FATAL ERROR: ${dt(...p)}`;throw je.error(c),new Error(c)},Fn=function(...p){const c="FIREBASE WARNING: "+dt(...p);je.warn(c)},Gt=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},fr="[MIN_NAME]",br="[MAX_NAME]",Wn=function(p,c){if(p===c)return 0;if(p===fr||c===br)return-1;if(c===fr||p===br)return 1;{const d=Br(p),_=Br(c);return null!==d?null!==_?d-_==0?p.length-c.length:d-_:-1:null!==_?1:p<c?-1:1}},Yt=function(p,c){return p===c?0:p<c?-1:1},In=function(p,c){if(c&&p in c)return c[p];throw new Error("Missing required key ("+p+") in object: "+(0,q.Wl)(c))},gi=function(p){if("object"!=typeof p||null===p)return(0,q.Wl)(p);const c=[];for(const _ in p)c.push(_);c.sort();let d="{";for(let _=0;_<c.length;_++)0!==_&&(d+=","),d+=(0,q.Wl)(c[_]),d+=":",d+=gi(p[c[_]]);return d+="}",d},qr=function(p,c){const d=p.length;if(d<=c)return[p];const _=[];for(let T=0;T<d;T+=c)_.push(p.substring(T,T+c>d?d:T+c));return _};function Qn(p,c){for(const d in p)p.hasOwnProperty(d)&&c(d,p[d])}const Ki=function(p){(0,q.hu)(!Gt(p),"Invalid JSON number");const _=1023;let T,O,z,se,_e;0===p?(O=0,z=0,T=1/p==-1/0?1:0):(T=p<0,(p=Math.abs(p))>=Math.pow(2,1-_)?(se=Math.min(Math.floor(Math.log(p)/Math.LN2),_),O=se+_,z=Math.round(p*Math.pow(2,52-se)-Math.pow(2,52))):(O=0,z=Math.round(p/Math.pow(2,-1074))));const xe=[];for(_e=52;_e;_e-=1)xe.push(z%2?1:0),z=Math.floor(z/2);for(_e=11;_e;_e-=1)xe.push(O%2?1:0),O=Math.floor(O/2);xe.push(T?1:0),xe.reverse();const It=xe.join("");let Ct="";for(_e=0;_e<64;_e+=8){let Ft=parseInt(It.substr(_e,8),2).toString(16);1===Ft.length&&(Ft="0"+Ft),Ct+=Ft}return Ct.toLowerCase()},Rn=new RegExp("^-?(0*)\\d{1,10}$"),Br=function(p){if(Rn.test(p)){const c=Number(p);if(c>=-2147483648&&c<=2147483647)return c}return null},ui=function(p){try{p()}catch(c){setTimeout(()=>{throw Fn("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},Lr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ci=function(p,c){const d=setTimeout(p,c);return"number"==typeof d&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class Xn{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=d?.getImmediate({optional:!0}),this.appCheck||d?.get().then(_=>this.appCheck=_)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,_)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,_):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(_=>_.addTokenListener(c))}notifyForInvalidToken(){Fn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nr{constructor(c,d,_){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=_,this.auth_=null,this.auth_=_.getImmediate({optional:!0}),this.auth_||_.onInit(T=>this.auth_=T)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,_)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,_):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fn(c)}}let Cn=(()=>{class p{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return p.OWNER="owner",p})();const mi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,be="websocket",we="long_polling";class oe{constructor(c,d,_,T,O=!1,z="",se=!1,_e=!1){this.secure=d,this.namespace=_,this.webSocketOnly=T,this.nodeAdmin=O,this.persistenceKey=z,this.includeNamespaceInQueryParams=se,this.isUsingEmulator=_e,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bn.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&bn.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ne(p,c,d){let _;if((0,q.hu)("string"==typeof c,"typeof type must == string"),(0,q.hu)("object"==typeof d,"typeof params must == object"),c===be)_=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(c!==we)throw new Error("Unknown connection type: "+c);_=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function he(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(d.ns=p.namespace);const T=[];return Qn(d,(O,z)=>{T.push(O+"="+z)}),_+T.join("&")}class Se{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,q.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,q.p$)(this.counters_)}}const me={},ve={};function pe(p){const c=p.toString();return me[c]||(me[c]=new Se),me[c]}class nt{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const _=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<_.length;++T)_[T]&&ui(()=>{this.onMessage_(_[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gr{constructor(c,d,_,T,O,z,se){this.connId=c,this.repoInfo=d,this.applicationId=_,this.appCheckToken=T,this.authToken=O,this.transportSessionId=z,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yn(c),this.stats_=pe(d),this.urlFn=_e=>(this.appCheckToken&&(_e.ac=this.appCheckToken),ne(d,we,_e))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new nt(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,q.Yr)()||"complete"===document.readyState)p();else{let c=!1;const d=function(){document.body?c||(c=!0,p()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rs((...O)=>{const[z,se,_e,xe,It]=O;if(this.incrementIncomingBytes_(O),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===z)this.id=se,this.password=_e;else{if("close"!==z)throw new Error("Unrecognized command received: "+z);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...O)=>{const[z,se]=O;this.incrementIncomingBytes_(O),this.myPacketOrderer.handleResponse(z,se)},()=>{this.onClosed_()},this.urlFn);const _={start:"t"};_.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=this.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",this.transportSessionId&&(_.s=this.transportSessionId),this.lastSessionId&&(_.ls=this.lastSessionId),this.applicationId&&(_.p=this.applicationId),this.appCheckToken&&(_.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mi.test(location.hostname)&&(_.r="f");const T=this.urlFn(_);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gr.forceAllow_=!0}static forceDisallow(){gr.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!gr.forceAllow_&&(gr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,q.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const _=(0,q.h$)(d),T=qr(_,1840);for(let O=0;O<T.length;O++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[O]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const _={dframe:"t"};_.id=c,_.pw=d,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,q.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class Rs{constructor(c,d,_,T){if(this.onDisconnect=_,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=Ye(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=Rs.createIFrame_();let O="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(O='<script>document.domain="'+document.domain+'";<\/script>');const z="<html><body>"+O+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(z),this.myIFrame.doc.close()}catch(se){cn("frame writing exception"),se.stack&&cn(se.stack),cn(se)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||cn("No IE domain setting required")}catch{const _=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),_="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){const z=this.pendingSegs.shift();_=_+"&seg"+T+"="+z.seg+"&ts"+T+"="+z.ts+"&d"+T+"="+z.d,T++}return d+=_,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,_){this.pendingSegs.push({seg:c,ts:d,d:_}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const _=()=>{this.outstandingRequests.delete(d),this.newRequest_()},T=setTimeout(_,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(T),_()})}addTag(c,d){(0,q.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const _=this.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=c,_.onload=_.onreadystatechange=function(){const T=_.readyState;(!T||"loaded"===T||"complete"===T)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),d())},_.onerror=()=>{cn("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_)}catch{}},Math.floor(1))}}let jn=null;typeof MozWebSocket<"u"?jn=MozWebSocket:typeof WebSocket<"u"&&(jn=WebSocket);let Zr=(()=>{class p{constructor(d,_,T,O,z,se,_e){this.connId=d,this.applicationId=T,this.appCheckToken=O,this.authToken=z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yn(this.connId),this.stats_=pe(_),this.connURL=p.connectionURL_(_,se,_e,O,T),this.nodeAdmin=_.nodeAdmin}static connectionURL_(d,_,T,O,z){const se={v:"5"};return!(0,q.Yr)()&&typeof location<"u"&&location.hostname&&mi.test(location.hostname)&&(se.r="f"),_&&(se.s=_),T&&(se.ls=T),O&&(se.ac=O),z&&(se.p=z),ne(d,be,se)}open(d,_){this.onDisconnect=_,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bn.set("previous_websocket_failure",!0);try{let T;if((0,q.Yr)()){T={headers:{"User-Agent":`Firebase/5/${Lt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(T.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);const z=process.env,se=0===this.connURL.indexOf("wss://")?z.HTTPS_PROXY||z.https_proxy:z.HTTP_PROXY||z.http_proxy;se&&(T.proxy={origin:se})}this.mySock=new jn(this.connURL,[],T)}catch(T){this.log_("Error instantiating WebSocket.");const O=T.message||T.data;return O&&this.log_(O),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const O=T.message||T.data;O&&this.log_(O),this.onClosed_()}}start(){}static forceDisallow(){p.forceDisallow_=!0}static isAvailable(){let d=!1;if(typeof navigator<"u"&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(d=!0)}return!d&&null!==jn&&!p.forceDisallow_}static previouslyFailed(){return bn.isInMemoryStorage||!0===bn.get("previous_websocket_failure")}markConnectionHealthy(){bn.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const _=this.frames.join("");this.frames=null;const T=(0,q.cI)(_);this.onMessage(T)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const _=Number(d);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const _=d.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{const T=this.extractFrameCount_(_);null!==T&&this.appendFrame_(T)}}send(d){this.resetKeepAlive();const _=(0,q.Wl)(d);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);const T=qr(_,16384);T.length>1&&this.sendString_(String(T.length));for(let O=0;O<T.length;O++)this.sendString_(T[O])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p})(),$r=(()=>{class p{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[gr,Zr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const _=Zr&&Zr.isAvailable();let T=_&&!Zr.previouslyFailed();if(d.webSocketOnly&&(_||Fn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[Zr];else{const O=this.transports_=[];for(const z of p.ALL_TRANSPORTS)z&&z.isAvailable()&&O.push(z);p.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return p.globalTransportInitialized_=!1,p})();class xi{constructor(c,d,_,T,O,z,se,_e,xe,It){this.id=c,this.repoInfo_=d,this.applicationId_=_,this.appCheckToken_=T,this.authToken_=O,this.onMessage_=z,this.onReady_=se,this.onDisconnect_=_e,this.onKill_=xe,this.lastSessionId=It,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yn("c:"+this.id+":"),this.transportManager_=new $r(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,_)},Math.floor(0));const T=c.healthyTimeout||0;T>0&&(this.healthyTimeout_=ci(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=In("t",c),_=In("d",c);if("c"===d)this.onSecondaryControl_(_);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(_)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=In("t",c),_=In("d",c);"c"===d?this.onControl_(_):"d"===d&&this.onDataMessage_(_)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=In("t",c);if("d"in c){const _=c.d;if("h"===d){const T=Object.assign({},_);this.repoInfo_.isUsingEmulator&&(T.h=this.repoInfo_.host),this.onHandshake_(T)}else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(_):"r"===d?this.onReset_(_):"e"===d?zn("Server Error: "+_):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zn("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,_=c.v,T=c.h;this.sessionId=c.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==_&&Fn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,_),ci(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ci(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Yi{put(c,d,_,T){}merge(c,d,_,T){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,_){}onDisconnectMerge(c,d,_){}onDisconnectCancel(c,d){}reportStats(c){}}class Qr{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,q.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const _=[...this.listeners_[c]];for(let T=0;T<_.length;T++)_[T].callback.apply(_[T].context,d)}}on(c,d,_){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:_});const T=this.getInitialEvent(c);T&&d.apply(_,T)}off(c,d,_){this.validateEventType_(c);const T=this.listeners_[c]||[];for(let O=0;O<T.length;O++)if(T[O].callback===d&&(!_||_===T[O].context))return void T.splice(O,1)}validateEventType_(c){(0,q.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class ii extends Qr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ii}getInitialEvent(c){return(0,q.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}const ms=32,ho=768;class yr{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let _=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[_]=this.pieces_[T],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function wr(){return new yr("")}function cr(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function cs(p){return p.pieces_.length-p.pieceNum_}function Jn(p){let c=p.pieceNum_;return c<p.pieces_.length&&c++,new yr(p.pieces_,c)}function Fo(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Hi(p,c=0){return p.pieces_.slice(p.pieceNum_+c)}function Cs(p){if(p.pieceNum_>=p.pieces_.length)return null;const c=[];for(let d=p.pieceNum_;d<p.pieces_.length-1;d++)c.push(p.pieces_[d]);return new yr(c,0)}function jr(p,c){const d=[];for(let _=p.pieceNum_;_<p.pieces_.length;_++)d.push(p.pieces_[_]);if(c instanceof yr)for(let _=c.pieceNum_;_<c.pieces_.length;_++)d.push(c.pieces_[_]);else{const _=c.split("/");for(let T=0;T<_.length;T++)_[T].length>0&&d.push(_[T])}return new yr(d,0)}function sr(p){return p.pieceNum_>=p.pieces_.length}function vi(p,c){const d=cr(p),_=cr(c);if(null===d)return c;if(d===_)return vi(Jn(p),Jn(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+p+")")}function Xr(p,c){const d=Hi(p,0),_=Hi(c,0);for(let T=0;T<d.length&&T<_.length;T++){const O=Wn(d[T],_[T]);if(0!==O)return O}return d.length===_.length?0:d.length<_.length?-1:1}function Bs(p,c){if(cs(p)!==cs(c))return!1;for(let d=p.pieceNum_,_=c.pieceNum_;d<=p.pieces_.length;d++,_++)if(p.pieces_[d]!==c.pieces_[_])return!1;return!0}function os(p,c){let d=p.pieceNum_,_=c.pieceNum_;if(cs(p)>cs(c))return!1;for(;d<p.pieces_.length;){if(p.pieces_[d]!==c.pieces_[_])return!1;++d,++_}return!0}class ys{constructor(c,d){this.errorPrefix_=d,this.parts_=Hi(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _=0;_<this.parts_.length;_++)this.byteLength_+=(0,q.ug)(this.parts_[_]);po(this)}}function po(p){if(p.byteLength_>ho)throw new Error(p.errorPrefix_+"has a key path longer than "+ho+" bytes ("+p.byteLength_+").");if(p.parts_.length>ms)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ms+") or object contains a cycle "+zs(p))}function zs(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}class Lo extends Qr{constructor(){let c,d;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(d="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(d="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(d="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const _=!document[c];_!==this.visible_&&(this.visible_=_,this.trigger("visible",_))},!1)}static getInstance(){return new Lo}getInitialEvent(c){return(0,q.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const Gs=1e3;let Ee,Ms=(()=>{class p extends Yi{constructor(d,_,T,O,z,se,_e,xe){if(super(),this.repoInfo_=d,this.applicationId_=_,this.onDataUpdate_=T,this.onConnectStatus_=O,this.onServerInfoUpdate_=z,this.authTokenProvider_=se,this.appCheckTokenProvider_=_e,this.authOverride_=xe,this.id=p.nextPersistentConnectionId_++,this.log_=yn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,xe&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Lo.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&ii.getInstance().on("online",this.onOnline_,this)}sendRequest(d,_,T){const O=++this.requestNumber_,z={r:O,a:d,b:_};this.log_((0,q.Wl)(z)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(z),T&&(this.requestCBHash_[O]=T)}get(d){this.initConnection_();const _=new q.BH,O={action:"g",request:{p:d._path.toString(),q:d._queryObject},onComplete:se=>{const _e=se.d;"ok"===se.s?_.resolve(_e):_.reject(_e)}};return this.outstandingGets_.push(O),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),_.promise}listen(d,_,T,O){this.initConnection_();const z=d._queryIdentifier,se=d._path.toString();this.log_("Listen called for "+se+" "+z),this.listens.has(se)||this.listens.set(se,new Map),(0,q.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(se).has(z),"listen() called twice for same path/queryId.");const _e={onComplete:O,hashFn:_,query:d,tag:T};this.listens.get(se).set(z,_e),this.connected_&&this.sendListen_(_e)}sendGet_(d){const _=this.outstandingGets_[d];this.sendRequest("g",_.request,T=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),_.onComplete&&_.onComplete(T)})}sendListen_(d){const _=d.query,T=_._path.toString(),O=_._queryIdentifier;this.log_("Listen on "+T+" for "+O);const z={p:T};d.tag&&(z.q=_._queryObject,z.t=d.tag),z.h=d.hashFn(),this.sendRequest("q",z,_e=>{const xe=_e.d,It=_e.s;p.warnOnListenWarnings_(xe,_),(this.listens.get(T)&&this.listens.get(T).get(O))===d&&(this.log_("listen response",_e),"ok"!==It&&this.removeListen_(T,O),d.onComplete&&d.onComplete(It,xe))})}static warnOnListenWarnings_(d,_){if(d&&"object"==typeof d&&(0,q.r3)(d,"w")){const T=(0,q.DV)(d,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const O='".indexOn": "'+_._queryParams.getIndex().toString()+'"',z=_._path.toString();Fn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${O} at ${z} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,q.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,_=(0,q.w9)(d)?"auth":"gauth",T={cred:d};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(_,T,O=>{const z=O.s,se=O.d||"error";this.authToken_===d&&("ok"===z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(z,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const _=d.s,T=d.d||"error";"ok"===_?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(_,T)})}unlisten(d,_){const T=d._path.toString(),O=d._queryIdentifier;this.log_("Unlisten called for "+T+" "+O),(0,q.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,O)&&this.connected_&&this.sendUnlisten_(T,O,d._queryObject,_)}sendUnlisten_(d,_,T,O){this.log_("Unlisten on "+d+" for "+_);const z={p:d};O&&(z.q=T,z.t=O),this.sendRequest("n",z)}onDisconnectPut(d,_,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,_,T):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:_,onComplete:T})}onDisconnectMerge(d,_,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,_,T):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:_,onComplete:T})}onDisconnectCancel(d,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,_):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:_})}sendOnDisconnect_(d,_,T,O){const z={p:_,d:T};this.log_("onDisconnect "+d,z),this.sendRequest(d,z,se=>{O&&setTimeout(()=>{O(se.s,se.d)},Math.floor(0))})}put(d,_,T,O){this.putInternal("p",d,_,T,O)}merge(d,_,T,O){this.putInternal("m",d,_,T,O)}putInternal(d,_,T,O,z){this.initConnection_();const se={p:_,d:T};void 0!==z&&(se.h=z),this.outstandingPuts_.push({action:d,request:se,onComplete:O}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)}sendPut_(d){const _=this.outstandingPuts_[d].action,T=this.outstandingPuts_[d].request,O=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(_,T,z=>{this.log_(_+" response",z),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),O&&O(z.s,z.d)})}reportStats(d){if(this.connected_){const _={c:d};this.log_("reportStats",_),this.sendRequest("s",_,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,q.Wl)(d));const _=d.r,T=this.requestCBHash_[_];T&&(delete this.requestCBHash_[_],T(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,_){this.log_("handleServerMessage",d,_),"d"===d?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===d?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===d?this.onListenRevoked_(_.p,_.q):"ac"===d?this.onAuthRevoked_(_.s,_.d):"apc"===d?this.onAppCheckRevoked_(_.s,_.d):"sd"===d?this.onSecurityDebugPacket_(_):zn("Unrecognized action received from server: "+(0,q.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let _=Math.max(0,this.reconnectDelay_-d);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,Dt.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const _=d.onDataMessage_.bind(d),T=d.onReady_.bind(d),O=d.onRealtimeDisconnect_.bind(d),z=d.id+":"+p.nextConnectionId_++,se=d.lastSessionId;let _e=!1,xe=null;const It=function(){xe?xe.close():(_e=!0,O())};d.realtime_={close:It,sendRequest:function(En){(0,q.hu)(xe,"sendRequest call when we're not connected not allowed."),xe.sendRequest(En)}};const Ft=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[En,Zn]=yield Promise.all([d.authTokenProvider_.getToken(Ft),d.appCheckTokenProvider_.getToken(Ft)]);_e?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),d.authToken_=En&&En.accessToken,d.appCheckToken_=Zn&&Zn.token,xe=new xi(z,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,_,T,O,Mi=>{Fn(Mi+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},se))}catch(En){d.log_("Failed to get token: "+En),_e||(d.repoInfo_.nodeAdmin&&Fn(En),It())}}})()}interrupt(d){cn("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){cn("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const _=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const _=this.outstandingPuts_[d];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,_){let T;T=_?_.map(z=>gi(z)).join("$"):"default";const O=this.removeListen_(d,T);O&&O.onComplete&&O.onComplete("permission_denied")}removeListen_(d,_){const T=new yr(d).toString();let O;if(this.listens.has(T)){const z=this.listens.get(T);O=z.get(_),z.delete(_),0===z.size&&this.listens.delete(T)}else O=void 0;return O}onAuthRevoked_(d,_){cn("Auth token revoked: "+d+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,_){cn("App check token revoked: "+d+"/"+_),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const _ of d.values())this.sendListen_(_);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let _="js";(0,q.Yr)()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+_+"."+Lt.replace(/\./g,"-")]=1,(0,q.uI)()?d["framework.cordova"]=1:(0,q.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=ii.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&d}}return p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p})();class Z{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new Z(c,d)}}class ee{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const _=new Z(fr,c),T=new Z(fr,d);return 0!==this.compare(_,T)}minPost(){return Z.MIN}}class Me extends ee{static get __EMPTY_NODE(){return Ee}static set __EMPTY_NODE(c){Ee=c}compare(c,d){return Wn(c.name,d.name)}isDefinedOn(c){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return Z.MIN}maxPost(){return new Z(br,Ee)}makePost(c,d){return(0,q.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new Z(c,Ee)}toString(){return".key"}}const He=new Me;class pt{constructor(c,d,_,T,O=null){this.isReverse_=T,this.resultGenerator_=O,this.nodeStack_=[];let z=1;for(;!c.isEmpty();)if(z=d?_(c.key,d):1,T&&(z*=-1),z<0)c=this.isReverse_?c.left:c.right;else{if(0===z){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Hr,Ot=(()=>{class p{constructor(d,_,T,O,z){this.key=d,this.value=_,this.color=T??p.RED,this.left=O??tn.EMPTY_NODE,this.right=z??tn.EMPTY_NODE}copy(d,_,T,O,z){return new p(d??this.key,_??this.value,T??this.color,O??this.left,z??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,_,T){let O=this;const z=T(d,O.key);return O=z<0?O.copy(null,null,null,O.left.insert(d,_,T),null):0===z?O.copy(null,_,null,null,null):O.copy(null,null,null,null,O.right.insert(d,_,T)),O.fixUp_()}removeMin_(){if(this.left.isEmpty())return tn.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,_){let T,O;if(T=this,_(d,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(d,_),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===_(d,T.key)){if(T.right.isEmpty())return tn.EMPTY_NODE;O=T.right.min_(),T=T.copy(O.key,O.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(d,_))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,_)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return p.RED=!0,p.BLACK=!1,p})();class tn{constructor(c,d=tn.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new tn(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,Ot.BLACK,null,null))}remove(c){return new tn(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Ot.BLACK,null,null))}get(c){let d,_=this.root_;for(;!_.isEmpty();){if(d=this.comparator_(c,_.key),0===d)return _.value;d<0?_=_.left:d>0&&(_=_.right)}return null}getPredecessorKey(c){let d,_=this.root_,T=null;for(;!_.isEmpty();){if(d=this.comparator_(c,_.key),0===d){if(_.left.isEmpty())return T?T.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}d<0?_=_.left:d>0&&(T=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new pt(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new pt(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new pt(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new pt(this.root_,null,this.comparator_,!0,c)}}function er(p,c){return Wn(p.name,c.name)}function _r(p,c){return Wn(p,c)}tn.EMPTY_NODE=new class vn{copy(c,d,_,T,O){return this}insert(c,d,_){return new Ot(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const di=function(p){return"number"==typeof p?"number:"+Ki(p):"string:"+p},Jr=function(p){if(p.isLeafNode()){const c=p.val();(0,q.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,q.r3)(c,".sv"),"Priority must be a string or number.")}else(0,q.hu)(p===Hr||p.isEmpty(),"priority of unexpected type.");(0,q.hu)(p===Hr||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Rr,ds,pr,zr=(()=>{class p{constructor(d,_=p.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=_,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Jr(this.priorityNode_)}static set __childrenNodeConstructor(d){Rr=d}static get __childrenNodeConstructor(){return Rr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new p(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return sr(d)?this:".priority"===cr(d)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,_){return null}updateImmediateChild(d,_){return".priority"===d?this.updatePriority(_):_.isEmpty()&&".priority"!==d?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,_).updatePriority(this.priorityNode_)}updateChild(d,_){const T=cr(d);return null===T?_:_.isEmpty()&&".priority"!==T?this:((0,q.hu)(".priority"!==T||1===cs(d),".priority must be the last token in a path"),this.updateImmediateChild(T,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(d),_)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,_){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+di(this.priorityNode_.val())+":");const _=typeof this.value_;d+=_+":",d+="number"===_?Ki(this.value_):this.value_,this.lazyHash_=ke(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===p.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof p.__childrenNodeConstructor?-1:((0,q.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const _=typeof d.value_,T=typeof this.value_,O=p.VALUE_TYPE_ORDER.indexOf(_),z=p.VALUE_TYPE_ORDER.indexOf(T);return(0,q.hu)(O>=0,"Unknown leaf type: "+_),(0,q.hu)(z>=0,"Unknown leaf type: "+T),O===z?"object"===T?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:z-O}withIndex(){return this}isIndexed(){return!0}equals(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))}}return p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p})();const Fr=new class hr extends ee{compare(c,d){const _=c.node.getPriority(),T=d.node.getPriority(),O=_.compareTo(T);return 0===O?Wn(c.name,d.name):O}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(br,new zr("[PRIORITY-POST]",pr))}makePost(c,d){const _=ds(c);return new Z(d,new zr("[PRIORITY-POST]",_))}toString(){return".priority"}},Yo=Math.log(2);class rs{constructor(c){this.count=parseInt(Math.log(c+1)/Yo,10),this.current_=this.count-1;const T=(O=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&T}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Qi=function(p,c,d,_){p.sort(c);const T=function(_e,xe){const It=xe-_e;let Ct,Ft;if(0===It)return null;if(1===It)return Ct=p[_e],Ft=d?d(Ct):Ct,new Ot(Ft,Ct.node,Ot.BLACK,null,null);{const En=parseInt(It/2,10)+_e,Zn=T(_e,En),Mi=T(En+1,xe);return Ct=p[En],Ft=d?d(Ct):Ct,new Ot(Ft,Ct.node,Ot.BLACK,Zn,Mi)}},se=function(_e){let xe=null,It=null,Ct=p.length;const Ft=function(Zn,Mi){const sa=Ct-Zn,hu=Ct;Ct-=Zn;const fu=T(sa+1,hu),Ac=p[sa],Fd=d?d(Ac):Ac;En(new Ot(Fd,Ac.node,Mi,null,fu))},En=function(Zn){xe?(xe.left=Zn,xe=Zn):(It=Zn,xe=Zn)};for(let Zn=0;Zn<_e.count;++Zn){const Mi=_e.nextBitIsOne(),sa=Math.pow(2,_e.count-(Zn+1));Mi?Ft(sa,Ot.BLACK):(Ft(sa,Ot.BLACK),Ft(sa,Ot.RED))}return It}(new rs(p.length));return new tn(_||c,se)};let Mo;const Oi={};class go{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,q.hu)(Oi&&Fr,"ChildrenNode.ts has not been loaded"),Mo=Mo||new go({".priority":Oi},{".priority":Fr}),Mo}get(c){const d=(0,q.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof tn?d:null}hasIndex(c){return(0,q.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,q.hu)(c!==He,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _=[];let T=!1;const O=d.getIterator(Z.Wrap);let se,z=O.getNext();for(;z;)T=T||c.isDefinedOn(z.node),_.push(z),z=O.getNext();se=T?Qi(_,c.getCompare()):Oi;const _e=c.toString(),xe=Object.assign({},this.indexSet_);xe[_e]=c;const It=Object.assign({},this.indexes_);return It[_e]=se,new go(It,xe)}addToIndexes(c,d){const _=(0,q.UI)(this.indexes_,(T,O)=>{const z=(0,q.DV)(this.indexSet_,O);if((0,q.hu)(z,"Missing index implementation for "+O),T===Oi){if(z.isDefinedOn(c.node)){const se=[],_e=d.getIterator(Z.Wrap);let xe=_e.getNext();for(;xe;)xe.name!==c.name&&se.push(xe),xe=_e.getNext();return se.push(c),Qi(se,z.getCompare())}return Oi}{const se=d.get(c.name);let _e=T;return se&&(_e=_e.remove(new Z(c.name,se))),_e.insert(c,c.node)}});return new go(_,this.indexSet_)}removeFromIndexes(c,d){const _=(0,q.UI)(this.indexes_,T=>{if(T===Oi)return T;{const O=d.get(c.name);return O?T.remove(new Z(c.name,O)):T}});return new go(_,this.indexSet_)}}let _s,ar=(()=>{class p{constructor(d,_,T){this.children_=d,this.priorityNode_=_,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&Jr(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _s||(_s=new p(new tn(_r),null,go.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_s}updatePriority(d){return this.children_.isEmpty()?this:new p(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const _=this.children_.get(d);return null===_?_s:_}}getChild(d){const _=cr(d);return null===_?this:this.getImmediateChild(_).getChild(Jn(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,_){if((0,q.hu)(_,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(_);{const T=new Z(d,_);let O,z;_.isEmpty()?(O=this.children_.remove(d),z=this.indexMap_.removeFromIndexes(T,this.children_)):(O=this.children_.insert(d,_),z=this.indexMap_.addToIndexes(T,this.children_));const se=O.isEmpty()?_s:this.priorityNode_;return new p(O,se,z)}}updateChild(d,_){const T=cr(d);if(null===T)return _;{(0,q.hu)(".priority"!==cr(d)||1===cs(d),".priority must be the last token in a path");const O=this.getImmediateChild(T).updateChild(Jn(d),_);return this.updateImmediateChild(T,O)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const _={};let T=0,O=0,z=!0;if(this.forEachChild(Fr,(se,_e)=>{_[se]=_e.val(d),T++,z&&p.INTEGER_REGEXP_.test(se)?O=Math.max(O,Number(se)):z=!1}),!d&&z&&O<2*T){const se=[];for(const _e in _)se[_e]=_[_e];return se}return d&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+di(this.getPriority().val())+":"),this.forEachChild(Fr,(_,T)=>{const O=T.hash();""!==O&&(d+=":"+_+":"+O)}),this.lazyHash_=""===d?"":ke(d)}return this.lazyHash_}getPredecessorChildName(d,_,T){const O=this.resolveIndex_(T);if(O){const z=O.getPredecessorKey(new Z(d,_));return z?z.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const _=this.resolveIndex_(d);if(_){const T=_.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(d){const _=this.getFirstChildName(d);return _?new Z(_,this.children_.get(_)):null}getLastChildName(d){const _=this.resolveIndex_(d);if(_){const T=_.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(d){const _=this.getLastChildName(d);return _?new Z(_,this.children_.get(_)):null}forEachChild(d,_){const T=this.resolveIndex_(d);return T?T.inorderTraversal(O=>_(O.name,O.node)):this.children_.inorderTraversal(_)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,_){const T=this.resolveIndex_(_);if(T)return T.getIteratorFrom(d,O=>O);{const O=this.children_.getIteratorFrom(d.name,Z.Wrap);let z=O.peek();for(;null!=z&&_.compare(z,d)<0;)O.getNext(),z=O.peek();return O}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,_){const T=this.resolveIndex_(_);if(T)return T.getReverseIteratorFrom(d,O=>O);{const O=this.children_.getReverseIteratorFrom(d.name,Z.Wrap);let z=O.peek();for(;null!=z&&_.compare(z,d)>0;)O.getNext(),z=O.peek();return O}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===Kn?-1:0}withIndex(d){if(d===He||this.indexMap_.hasIndex(d))return this;{const _=this.indexMap_.addIndex(d,this.children_);return new p(this.children_,this.priorityNode_,_)}}isIndexed(d){return d===He||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const _=d;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){const T=this.getIterator(Fr),O=_.getIterator(Fr);let z=T.getNext(),se=O.getNext();for(;z&&se;){if(z.name!==se.name||!z.node.equals(se.node))return!1;z=T.getNext(),se=O.getNext()}return null===z&&null===se}return!1}return!1}}resolveIndex_(d){return d===He?null:this.indexMap_.get(d.toString())}}return p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p})();const Kn=new class vs extends ar{constructor(){super(new tn(_r),ar.EMPTY_NODE,go.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return ar.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Z,{MIN:{value:new Z(fr,ar.EMPTY_NODE)},MAX:{value:new Z(br,Kn)}}),Me.__EMPTY_NODE=ar.EMPTY_NODE,zr.__childrenNodeConstructor=ar,function Ti(p){Hr=p}(Kn),function bi(p){pr=p}(Kn);const aa=!0;function Ui(p,c=null){if(null===p)return ar.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(c=p[".priority"]),(0,q.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new zr(p,Ui(c));if(p instanceof Array||!aa){let d=ar.EMPTY_NODE;return Qn(p,(_,T)=>{if((0,q.r3)(p,_)&&"."!==_.substring(0,1)){const O=Ui(T);(O.isLeafNode()||!O.isEmpty())&&(d=d.updateImmediateChild(_,O))}}),d.updatePriority(Ui(c))}{const d=[];let _=!1;if(Qn(p,(z,se)=>{if("."!==z.substring(0,1)){const _e=Ui(se);_e.isEmpty()||(_=_||!_e.getPriority().isEmpty(),d.push(new Z(z,_e)))}}),0===d.length)return ar.EMPTY_NODE;const O=Qi(d,er,z=>z.name,_r);if(_){const z=Qi(d,Fr.getCompare());return new ar(O,Ui(c),new go({".priority":z},{".priority":Fr}))}return new ar(O,Ui(c),go.Default)}}!function Si(p){ds=p}(Ui);class la extends ee{constructor(c){super(),this.indexPath_=c,(0,q.hu)(!sr(c)&&".priority"!==cr(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const _=this.extractChild(c.node),T=this.extractChild(d.node),O=_.compareTo(T);return 0===O?Wn(c.name,d.name):O}makePost(c,d){const _=Ui(c),T=ar.EMPTY_NODE.updateChild(this.indexPath_,_);return new Z(d,T)}maxPost(){const c=ar.EMPTY_NODE.updateChild(this.indexPath_,Kn);return new Z(br,c)}toString(){return Hi(this.indexPath_,0).join("/")}}const Po=new class to extends ee{compare(c,d){const _=c.node.compareTo(d.node);return 0===_?Wn(c.name,d.name):_}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(c,d){const _=Ui(c);return new Z(d,_)}toString(){return".value"}};function La(p){return{type:"value",snapshotNode:p}}function No(p,c){return{type:"child_added",snapshotNode:c,childName:p}}function Vo(p,c){return{type:"child_removed",snapshotNode:c,childName:p}}function x(p,c,d){return{type:"child_changed",snapshotNode:c,childName:p,oldSnap:d}}class L{constructor(c){this.index_=c}updateChild(c,d,_,T,O,z){(0,q.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=c.getImmediateChild(d);return se.getChild(T).equals(_.getChild(T))&&se.isEmpty()===_.isEmpty()||(null!=z&&(_.isEmpty()?c.hasChild(d)?z.trackChildChange(Vo(d,se)):(0,q.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?z.trackChildChange(No(d,_)):z.trackChildChange(x(d,_,se))),c.isLeafNode()&&_.isEmpty())?c:c.updateImmediateChild(d,_).withIndex(this.index_)}updateFullNode(c,d,_){return null!=_&&(c.isLeafNode()||c.forEachChild(Fr,(T,O)=>{d.hasChild(T)||_.trackChildChange(Vo(T,O))}),d.isLeafNode()||d.forEachChild(Fr,(T,O)=>{if(c.hasChild(T)){const z=c.getImmediateChild(T);z.equals(O)||_.trackChildChange(x(T,O,z))}else _.trackChildChange(No(T,O))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?ar.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class re{constructor(c){this.indexedFilter_=new L(c.getIndex()),this.index_=c.getIndex(),this.startPost_=re.getStartPost_(c),this.endPost_=re.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,_=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&_}updateChild(c,d,_,T,O,z){return this.matches(new Z(d,_))||(_=ar.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,_,T,O,z)}updateFullNode(c,d,_){d.isLeafNode()&&(d=ar.EMPTY_NODE);let T=d.withIndex(this.index_);T=T.updatePriority(ar.EMPTY_NODE);const O=this;return d.forEachChild(Fr,(z,se)=>{O.matches(new Z(z,se))||(T=T.updateImmediateChild(z,ar.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,T,_)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class Xe{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const _=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?_<=0:_<0},this.withinEndPost=d=>{const _=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?_<=0:_<0},this.rangedFilter_=new re(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,_,T,O,z){return this.rangedFilter_.matches(new Z(d,_))||(_=ar.EMPTY_NODE),c.getImmediateChild(d).equals(_)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,_,T,O,z):this.fullLimitUpdateChild_(c,d,_,O,z)}updateFullNode(c,d,_){let T;if(d.isLeafNode()||d.isEmpty())T=ar.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let O;T=ar.EMPTY_NODE.withIndex(this.index_),O=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let z=0;for(;O.hasNext()&&z<this.limit_;){const se=O.getNext();if(this.withinDirectionalStart(se)){if(!this.withinDirectionalEnd(se))break;T=T.updateImmediateChild(se.name,se.node),z++}}}else{let O;T=d.withIndex(this.index_),T=T.updatePriority(ar.EMPTY_NODE),O=this.reverse_?T.getReverseIterator(this.index_):T.getIterator(this.index_);let z=0;for(;O.hasNext();){const se=O.getNext();z<this.limit_&&this.withinDirectionalStart(se)&&this.withinDirectionalEnd(se)?z++:T=T.updateImmediateChild(se.name,ar.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,T,_)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,_,T,O){let z;if(this.reverse_){const Ct=this.index_.getCompare();z=(Ft,En)=>Ct(En,Ft)}else z=this.index_.getCompare();const se=c;(0,q.hu)(se.numChildren()===this.limit_,"");const _e=new Z(d,_),xe=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),It=this.rangedFilter_.matches(_e);if(se.hasChild(d)){const Ct=se.getImmediateChild(d);let Ft=T.getChildAfterChild(this.index_,xe,this.reverse_);for(;null!=Ft&&(Ft.name===d||se.hasChild(Ft.name));)Ft=T.getChildAfterChild(this.index_,Ft,this.reverse_);const En=null==Ft?1:z(Ft,_e);if(It&&!_.isEmpty()&&En>=0)return O?.trackChildChange(x(d,_,Ct)),se.updateImmediateChild(d,_);{O?.trackChildChange(Vo(d,Ct));const Mi=se.updateImmediateChild(d,ar.EMPTY_NODE);return null!=Ft&&this.rangedFilter_.matches(Ft)?(O?.trackChildChange(No(Ft.name,Ft.node)),Mi.updateImmediateChild(Ft.name,Ft.node)):Mi}}return _.isEmpty()?c:It&&z(xe,_e)>=0?(null!=O&&(O.trackChildChange(Vo(xe.name,xe.node)),O.trackChildChange(No(d,_))),se.updateImmediateChild(d,_).updateImmediateChild(xe.name,ar.EMPTY_NODE)):c}}class dn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:br}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fr}copy(){const c=new dn;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Ws(p,c,d){const _=p.copy();return _.startSet_=!0,void 0===c&&(c=null),_.indexStartValue_=c,null!=d?(_.startNameSet_=!0,_.indexStartName_=d):(_.startNameSet_=!1,_.indexStartName_=""),_}function Ds(p,c,d){const _=p.copy();return _.endSet_=!0,void 0===c&&(c=null),_.indexEndValue_=c,void 0!==d?(_.endNameSet_=!0,_.indexEndName_=d):(_.endNameSet_=!1,_.indexEndName_=""),_}function Es(p,c){const d=p.copy();return d.index_=c,d}function Ps(p){const c={};if(p.isDefault())return c;let d;if(p.index_===Fr?d="$priority":p.index_===Po?d="$value":p.index_===He?d="$key":((0,q.hu)(p.index_ instanceof la,"Unrecognized index type!"),d=p.index_.toString()),c.orderBy=(0,q.Wl)(d),p.startSet_){const _=p.startAfterSet_?"startAfter":"startAt";c[_]=(0,q.Wl)(p.indexStartValue_),p.startNameSet_&&(c[_]+=","+(0,q.Wl)(p.indexStartName_))}if(p.endSet_){const _=p.endBeforeSet_?"endBefore":"endAt";c[_]=(0,q.Wl)(p.indexEndValue_),p.endNameSet_&&(c[_]+=","+(0,q.Wl)(p.indexEndName_))}return p.limitSet_&&(p.isViewFromLeft()?c.limitToFirst=p.limit_:c.limitToLast=p.limit_),c}function xo(p){const c={};if(p.startSet_&&(c.sp=p.indexStartValue_,p.startNameSet_&&(c.sn=p.indexStartName_),c.sin=!p.startAfterSet_),p.endSet_&&(c.ep=p.indexEndValue_,p.endNameSet_&&(c.en=p.indexEndName_),c.ein=!p.endBeforeSet_),p.limitSet_){c.l=p.limit_;let d=p.viewFrom_;""===d&&(d=p.isViewFromLeft()?"l":"r"),c.vf=d}return p.index_!==Fr&&(c.i=p.index_.toString()),c}class qs extends Yi{constructor(c,d,_,T){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=_,this.appCheckTokenProvider_=T,this.log_=yn("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,q.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,_,T){const O=c._path.toString();this.log_("Listen called for "+O+" "+c._queryIdentifier);const z=qs.getListenId_(c,_),se={};this.listens_[z]=se;const _e=Ps(c._queryParams);this.restRequest_(O+".json",_e,(xe,It)=>{let Ct=It;if(404===xe&&(Ct=null,xe=null),null===xe&&this.onDataUpdate_(O,Ct,!1,_),(0,q.DV)(this.listens_,z)===se){let Ft;Ft=xe?401===xe?"permission_denied":"rest_error:"+xe:"ok",T(Ft,null)}})}unlisten(c,d){const _=qs.getListenId_(c,d);delete this.listens_[_]}get(c){const d=Ps(c._queryParams),_=c._path.toString(),T=new q.BH;return this.restRequest_(_+".json",d,(O,z)=>{let se=z;404===O&&(se=null,O=null),null===O?(this.onDataUpdate_(_,se,!1,null),T.resolve(se)):T.reject(new Error(se))}),T.promise}refreshAuthToken(c){}restRequest_(c,d={},_){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,O])=>{T&&T.accessToken&&(d.auth=T.accessToken),O&&O.token&&(d.ac=O.token);const z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,q.xO)(d);this.log_("Sending REST request for "+z);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(_&&4===se.readyState){this.log_("REST Response for "+z+" received. status:",se.status,"response:",se.responseText);let _e=null;if(se.status>=200&&se.status<300){try{_e=(0,q.cI)(se.responseText)}catch{Fn("Failed to parse JSON response for "+z+": "+se.responseText)}_(null,_e)}else 401!==se.status&&404!==se.status&&Fn("Got unsuccessful REST response for "+z+" Status: "+se.status),_(se.status);_=null}},se.open("GET",z,!0),se.send()})}}class yo{constructor(){this.rootNode_=ar.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function Os(){return{value:null,children:new Map}}function _o(p,c,d){if(sr(c))p.value=d,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(c,d);else{const _=cr(c);p.children.has(_)||p.children.set(_,Os()),_o(p.children.get(_),c=Jn(c),d)}}function ul(p,c){if(sr(c))return p.value=null,p.children.clear(),!0;if(null!==p.value){if(p.value.isLeafNode())return!1;{const d=p.value;return p.value=null,d.forEachChild(Fr,(_,T)=>{_o(p,new yr(_),T)}),ul(p,c)}}if(p.children.size>0){const d=cr(c);return c=Jn(c),p.children.has(d)&&ul(p.children.get(d),c)&&p.children.delete(d),0===p.children.size}return!0}function Qo(p,c,d){null!==p.value?d(c,p.value):function Ts(p,c){p.children.forEach((d,_)=>{c(_,d)})}(p,(_,T)=>{Qo(T,new yr(c.toString()+"/"+_),d)})}class Zs{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&Qn(this.last_,(_,T)=>{d[_]=d[_]-T}),this.last_=c,d}}class Qa{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new Zs(c);const _=1e4+2e4*Math.random();ci(this.reportStats_.bind(this),Math.floor(_))}reportStats_(){const c=this.statsListener_.get(),d={};let _=!1;Qn(c,(T,O)=>{O>0&&(0,q.r3)(this.statsToReport_,T)&&(d[T]=O,_=!0)}),_&&this.server_.reportStats(d),ci(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ji=(()=>{return(p=Ji||(Ji={}))[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ji;var p})();function vo(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}class Xo{constructor(c,d,_){this.path=c,this.affectedTree=d,this.revert=_,this.type=Ji.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(sr(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new yr(c));return new Xo(wr(),d,this.revert)}}return(0,q.hu)(cr(this.path)===c,"operationForChild called for unrelated child."),new Xo(Jn(this.path),this.affectedTree,this.revert)}}class Ea{constructor(c,d){this.source=c,this.path=d,this.type=Ji.LISTEN_COMPLETE}operationForChild(c){return sr(this.path)?new Ea(this.source,wr()):new Ea(this.source,Jn(this.path))}}class Ss{constructor(c,d,_){this.source=c,this.path=d,this.snap=_,this.type=Ji.OVERWRITE}operationForChild(c){return sr(this.path)?new Ss(this.source,wr(),this.snap.getImmediateChild(c)):new Ss(this.source,Jn(this.path),this.snap)}}class hs{constructor(c,d,_){this.source=c,this.path=d,this.children=_,this.type=Ji.MERGE}operationForChild(c){if(sr(this.path)){const d=this.children.subtree(new yr(c));return d.isEmpty()?null:d.value?new Ss(this.source,wr(),d.value):new hs(this.source,wr(),d)}return(0,q.hu)(cr(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new hs(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Or{constructor(c,d,_){this.node_=c,this.fullyInitialized_=d,this.filtered_=_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(sr(c))return this.isFullyInitialized()&&!this.filtered_;const d=cr(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class js{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function Bo(p,c,d,_,T,O){const z=_.filter(se=>se.type===d);z.sort((se,_e)=>function Xa(p,c,d){if(null==c.childName||null==d.childName)throw(0,q.g5)("Should only compare child_ events.");const _=new Z(c.childName,c.snapshotNode),T=new Z(d.childName,d.snapshotNode);return p.index_.compare(_,T)}(p,se,_e)),z.forEach(se=>{const _e=function $o(p,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,p.index_)),c}(p,se,O);T.forEach(xe=>{xe.respondsTo(se.type)&&c.push(xe.createEvent(_e,p.query_))})})}function wa(p,c){return{eventCache:p,serverCache:c}}function Ua(p,c,d,_){return wa(new Or(c,d,_),p.serverCache)}function Ol(p,c,d,_){return wa(p.eventCache,new Or(c,d,_))}function Jo(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function ha(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}let no;class K{constructor(c,d=(()=>(no||(no=new tn(Yt)),no))()){this.value=c,this.children=d}static fromObject(c){let d=new K(null);return Qn(c,(_,T)=>{d=d.set(new yr(_),T)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:wr(),value:this.value};if(sr(c))return null;{const _=cr(c),T=this.children.get(_);if(null!==T){const O=T.findRootMostMatchingPathAndValue(Jn(c),d);return null!=O?{path:jr(new yr(_),O.path),value:O.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(sr(c))return this;{const d=cr(c),_=this.children.get(d);return null!==_?_.subtree(Jn(c)):new K(null)}}set(c,d){if(sr(c))return new K(d,this.children);{const _=cr(c),O=(this.children.get(_)||new K(null)).set(Jn(c),d),z=this.children.insert(_,O);return new K(this.value,z)}}remove(c){if(sr(c))return this.children.isEmpty()?new K(null):new K(null,this.children);{const d=cr(c),_=this.children.get(d);if(_){const T=_.remove(Jn(c));let O;return O=T.isEmpty()?this.children.remove(d):this.children.insert(d,T),null===this.value&&O.isEmpty()?new K(null):new K(this.value,O)}return this}}get(c){if(sr(c))return this.value;{const d=cr(c),_=this.children.get(d);return _?_.get(Jn(c)):null}}setTree(c,d){if(sr(c))return d;{const _=cr(c),O=(this.children.get(_)||new K(null)).setTree(Jn(c),d);let z;return z=O.isEmpty()?this.children.remove(_):this.children.insert(_,O),new K(this.value,z)}}fold(c){return this.fold_(wr(),c)}fold_(c,d){const _={};return this.children.inorderTraversal((T,O)=>{_[T]=O.fold_(jr(c,T),d)}),d(c,this.value,_)}findOnPath(c,d){return this.findOnPath_(c,wr(),d)}findOnPath_(c,d,_){const T=!!this.value&&_(d,this.value);if(T)return T;if(sr(c))return null;{const O=cr(c),z=this.children.get(O);return z?z.findOnPath_(Jn(c),jr(d,O),_):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,wr(),d)}foreachOnPath_(c,d,_){if(sr(c))return this;{this.value&&_(d,this.value);const T=cr(c),O=this.children.get(T);return O?O.foreachOnPath_(Jn(c),jr(d,T),_):new K(null)}}foreach(c){this.foreach_(wr(),c)}foreach_(c,d){this.children.inorderTraversal((_,T)=>{T.foreach_(jr(c,_),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,_)=>{_.value&&c(d,_.value)})}}class V{constructor(c){this.writeTree_=c}static empty(){return new V(new K(null))}}function ie(p,c,d){if(sr(c))return new V(new K(d));{const _=p.writeTree_.findRootMostValueAndPath(c);if(null!=_){const T=_.path;let O=_.value;const z=vi(T,c);return O=O.updateChild(z,d),new V(p.writeTree_.set(T,O))}{const T=new K(d),O=p.writeTree_.setTree(c,T);return new V(O)}}}function Te(p,c,d){let _=p;return Qn(d,(T,O)=>{_=ie(_,jr(c,T),O)}),_}function ut(p,c){if(sr(c))return V.empty();{const d=p.writeTree_.setTree(c,new K(null));return new V(d)}}function bt(p,c){return null!=Wt(p,c)}function Wt(p,c){const d=p.writeTree_.findRootMostValueAndPath(c);return null!=d?p.writeTree_.get(d.path).getChild(vi(d.path,c)):null}function ei(p){const c=[],d=p.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Fr,(_,T)=>{c.push(new Z(_,T))}):p.writeTree_.children.inorderTraversal((_,T)=>{null!=T.value&&c.push(new Z(_,T.value))}),c}function dr(p,c){if(sr(c))return p;{const d=Wt(p,c);return new V(null!=d?new K(d):p.writeTree_.subtree(c))}}function Ur(p){return p.writeTree_.isEmpty()}function Ir(p,c){return At(wr(),p.writeTree_,c)}function At(p,c,d){if(null!=c.value)return d.updateChild(p,c.value);{let _=null;return c.children.inorderTraversal((T,O)=>{".priority"===T?((0,q.hu)(null!==O.value,"Priority writes must always be leaf nodes"),_=O.value):d=At(jr(p,T),O,d)}),!d.getChild(p).isEmpty()&&null!==_&&(d=d.updateChild(jr(p,".priority"),_)),d}}function On(p,c){return cl(c,p)}function ks(p,c){if(p.snap)return os(p.path,c);for(const d in p.children)if(p.children.hasOwnProperty(d)&&os(jr(p.path,d),c))return!0;return!1}function et(p){return p.visible}function Mt(p,c,d){let _=V.empty();for(let T=0;T<p.length;++T){const O=p[T];if(c(O)){const z=O.path;let se;if(O.snap)os(d,z)?(se=vi(d,z),_=ie(_,se,O.snap)):os(z,d)&&(se=vi(z,d),_=ie(_,wr(),O.snap.getChild(se)));else{if(!O.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(os(d,z))se=vi(d,z),_=Te(_,se,O.children);else if(os(z,d))if(se=vi(z,d),sr(se))_=Te(_,wr(),O.children);else{const _e=(0,q.DV)(O.children,cr(se));if(_e){const xe=_e.getChild(Jn(se));_=ie(_,wr(),xe)}}}}}return _}function bs(p,c,d,_,T){if(_||T){const O=dr(p.visibleWrites,c);return!T&&Ur(O)?d:T||null!=d||bt(O,wr())?Ir(Mt(p.allWrites,function(xe){return(xe.visible||T)&&(!_||!~_.indexOf(xe.writeId))&&(os(xe.path,c)||os(c,xe.path))},c),d||ar.EMPTY_NODE):null}{const O=Wt(p.visibleWrites,c);if(null!=O)return O;{const z=dr(p.visibleWrites,c);return Ur(z)?d:null!=d||bt(z,wr())?Ir(z,d||ar.EMPTY_NODE):null}}}function Vl(p,c,d,_){return bs(p.writeTree,p.treePath,c,d,_)}function El(p,c){return function Ba(p,c,d){let _=ar.EMPTY_NODE;const T=Wt(p.visibleWrites,c);if(T)return T.isLeafNode()||T.forEachChild(Fr,(O,z)=>{_=_.updateImmediateChild(O,z)}),_;if(d){const O=dr(p.visibleWrites,c);return d.forEachChild(Fr,(z,se)=>{const _e=Ir(dr(O,new yr(z)),se);_=_.updateImmediateChild(z,_e)}),ei(O).forEach(z=>{_=_.updateImmediateChild(z.name,z.node)}),_}return ei(dr(p.visibleWrites,c)).forEach(z=>{_=_.updateImmediateChild(z.name,z.node)}),_}(p.writeTree,p.treePath,c)}function Ia(p,c,d,_){return function kl(p,c,d,_,T){(0,q.hu)(_||T,"Either existingEventSnap or existingServerSnap must exist");const O=jr(c,d);if(bt(p.visibleWrites,O))return null;{const z=dr(p.visibleWrites,O);return Ur(z)?T.getChild(d):Ir(z,T.getChild(d))}}(p.writeTree,p.treePath,c,d,_)}function el(p,c){return function Fl(p,c){return Wt(p.visibleWrites,c)}(p.writeTree,jr(p.treePath,c))}function lr(p,c,d){return function Ja(p,c,d,_){const T=jr(c,d),O=Wt(p.visibleWrites,T);return null!=O?O:_.isCompleteForChild(d)?Ir(dr(p.visibleWrites,T),_.getNode().getImmediateChild(d)):null}(p.writeTree,p.treePath,c,d)}function Ca(p,c){return cl(jr(p.treePath,c),p.writeTree)}function cl(p,c){return{treePath:p,writeTree:c}}class es{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,_=c.childName;(0,q.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==_,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(_);if(T){const O=T.type;if("child_added"===d&&"child_removed"===O)this.changeMap.set(_,x(_,c.snapshotNode,T.snapshotNode));else if("child_removed"===d&&"child_added"===O)this.changeMap.delete(_);else if("child_removed"===d&&"child_changed"===O)this.changeMap.set(_,Vo(_,T.oldSnap));else if("child_changed"===d&&"child_added"===O)this.changeMap.set(_,No(_,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==O)throw(0,q.g5)("Illegal combination of changes: "+c+" occurred after "+T);this.changeMap.set(_,x(_,c.snapshotNode,T.oldSnap))}}else this.changeMap.set(_,c)}getChanges(){return Array.from(this.changeMap.values())}}const Pa=new class Gn{getCompleteChild(c){return null}getChildAfterChild(c,d,_){return null}};class or{constructor(c,d,_=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=_}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const _=null!=this.optCompleteServerCache_?new Or(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lr(this.writes_,c,_)}}getChildAfterChild(c,d,_){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ha(this.viewCache_),O=function is(p,c,d,_,T,O){return function Ll(p,c,d,_,T,O,z){let se;const _e=dr(p.visibleWrites,c),xe=Wt(_e,wr());if(null!=xe)se=xe;else{if(null==d)return[];se=Ir(_e,d)}if(se=se.withIndex(z),se.isEmpty()||se.isLeafNode())return[];{const It=[],Ct=z.getCompare(),Ft=O?se.getReverseIteratorFrom(_,z):se.getIteratorFrom(_,z);let En=Ft.getNext();for(;En&&It.length<T;)0!==Ct(En,_)&&It.push(En),En=Ft.getNext();return It}}(p.writeTree,p.treePath,c,d,_,T,O)}(this.writes_,T,d,1,_,c);return 0===O.length?null:O[0]}}function $a(p,c,d,_,T,O){const z=c.eventCache;if(null!=el(_,d))return c;{let se,_e;if(sr(d))if((0,q.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const xe=ha(c),Ct=El(_,xe instanceof ar?xe:ar.EMPTY_NODE);se=p.filter.updateFullNode(c.eventCache.getNode(),Ct,O)}else{const xe=Vl(_,ha(c));se=p.filter.updateFullNode(c.eventCache.getNode(),xe,O)}else{const xe=cr(d);if(".priority"===xe){(0,q.hu)(1===cs(d),"Can't have a priority with additional path components");const It=z.getNode();_e=c.serverCache.getNode();const Ct=Ia(_,d,It,_e);se=null!=Ct?p.filter.updatePriority(It,Ct):z.getNode()}else{const It=Jn(d);let Ct;if(z.isCompleteForChild(xe)){_e=c.serverCache.getNode();const Ft=Ia(_,d,z.getNode(),_e);Ct=null!=Ft?z.getNode().getImmediateChild(xe).updateChild(It,Ft):z.getNode().getImmediateChild(xe)}else Ct=lr(_,xe,c.serverCache);se=null!=Ct?p.filter.updateChild(z.getNode(),xe,Ct,It,T,O):z.getNode()}}return Ua(c,se,z.isFullyInitialized()||sr(d),p.filter.filtersNodes())}}function wo(p,c,d,_,T,O,z,se){const _e=c.serverCache;let xe;const It=z?p.filter:p.filter.getIndexedFilter();if(sr(d))xe=It.updateFullNode(_e.getNode(),_,null);else if(It.filtersNodes()&&!_e.isFiltered()){const En=_e.getNode().updateChild(d,_);xe=It.updateFullNode(_e.getNode(),En,null)}else{const En=cr(d);if(!_e.isCompleteForPath(d)&&cs(d)>1)return c;const Zn=Jn(d),sa=_e.getNode().getImmediateChild(En).updateChild(Zn,_);xe=".priority"===En?It.updatePriority(_e.getNode(),sa):It.updateChild(_e.getNode(),En,sa,Zn,Pa,null)}const Ct=Ol(c,xe,_e.isFullyInitialized()||sr(d),It.filtersNodes());return $a(p,Ct,d,T,new or(T,Ct,O),se)}function Yl(p,c,d,_,T,O,z){const se=c.eventCache;let _e,xe;const It=new or(T,c,O);if(sr(d))xe=p.filter.updateFullNode(c.eventCache.getNode(),_,z),_e=Ua(c,xe,!0,p.filter.filtersNodes());else{const Ct=cr(d);if(".priority"===Ct)xe=p.filter.updatePriority(c.eventCache.getNode(),_),_e=Ua(c,xe,se.isFullyInitialized(),se.isFiltered());else{const Ft=Jn(d),En=se.getNode().getImmediateChild(Ct);let Zn;if(sr(Ft))Zn=_;else{const Mi=It.getCompleteChild(Ct);Zn=null!=Mi?".priority"===Fo(Ft)&&Mi.getChild(Cs(Ft)).isEmpty()?Mi:Mi.updateChild(Ft,_):ar.EMPTY_NODE}_e=En.equals(Zn)?c:Ua(c,p.filter.updateChild(se.getNode(),Ct,Zn,Ft,It,z),se.isFullyInitialized(),p.filter.filtersNodes())}}return _e}function wl(p,c){return p.eventCache.isCompleteForChild(c)}function Ha(p,c,d){return d.foreach((_,T)=>{c=c.updateChild(_,T)}),c}function fa(p,c,d,_,T,O,z,se){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let xe,_e=c;xe=sr(d)?_:new K(null).setTree(d,_);const It=c.serverCache.getNode();return xe.children.inorderTraversal((Ct,Ft)=>{if(It.hasChild(Ct)){const Zn=Ha(0,c.serverCache.getNode().getImmediateChild(Ct),Ft);_e=wo(p,_e,new yr(Ct),Zn,T,O,z,se)}}),xe.children.inorderTraversal((Ct,Ft)=>{const En=!c.serverCache.isCompleteForChild(Ct)&&null===Ft.value;if(!It.hasChild(Ct)&&!En){const Mi=Ha(0,c.serverCache.getNode().getImmediateChild(Ct),Ft);_e=wo(p,_e,new yr(Ct),Mi,T,O,z,se)}}),_e}class Il{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const _=this.query_._queryParams,T=new L(_.getIndex()),O=function Gr(p){return p.loadsAllData()?new L(p.getIndex()):p.hasLimit()?new Xe(p):new re(p)}(_);this.processor_=function ro(p){return{filter:p}}(O);const z=d.serverCache,se=d.eventCache,_e=T.updateFullNode(ar.EMPTY_NODE,z.getNode(),null),xe=O.updateFullNode(ar.EMPTY_NODE,se.getNode(),null),It=new Or(_e,z.isFullyInitialized(),T.filtersNodes()),Ct=new Or(xe,se.isFullyInitialized(),O.filtersNodes());this.viewCache_=wa(Ct,It),this.eventGenerator_=new js(this.query_)}get query(){return this.query_}}function na(p,c){const d=ha(p.viewCache_);return d&&(p.query._queryParams.loadsAllData()||!sr(c)&&!d.getImmediateChild(cr(c)).isEmpty())?d.getChild(c):null}function it(p){return 0===p.eventRegistrations_.length}function ti(p,c,d){const _=[];if(d){(0,q.hu)(null==c,"A cancel should cancel all event registrations.");const T=p.query._path;p.eventRegistrations_.forEach(O=>{const z=O.createCancelEvent(d,T);z&&_.push(z)})}if(c){let T=[];for(let O=0;O<p.eventRegistrations_.length;++O){const z=p.eventRegistrations_[O];if(z.matches(c)){if(c.hasAnyCallback()){T=T.concat(p.eventRegistrations_.slice(O+1));break}}else T.push(z)}p.eventRegistrations_=T}else p.eventRegistrations_=[];return _}function za(p,c,d,_){c.type===Ji.MERGE&&null!==c.source.queryId&&((0,q.hu)(ha(p.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(Jo(p.viewCache_),"Missing event cache, even though we have a server cache"));const T=p.viewCache_,O=function Xt(p,c,d,_,T){const O=new es;let z,se;if(d.type===Ji.OVERWRITE){const xe=d;xe.source.fromUser?z=Yl(p,c,xe.path,xe.snap,_,T,O):((0,q.hu)(xe.source.fromServer,"Unknown source."),se=xe.source.tagged||c.serverCache.isFiltered()&&!sr(xe.path),z=wo(p,c,xe.path,xe.snap,_,T,se,O))}else if(d.type===Ji.MERGE){const xe=d;xe.source.fromUser?z=function ja(p,c,d,_,T,O,z){let se=c;return _.foreach((_e,xe)=>{const It=jr(d,_e);wl(c,cr(It))&&(se=Yl(p,se,It,xe,T,O,z))}),_.foreach((_e,xe)=>{const It=jr(d,_e);wl(c,cr(It))||(se=Yl(p,se,It,xe,T,O,z))}),se}(p,c,xe.path,xe.children,_,T,O):((0,q.hu)(xe.source.fromServer,"Unknown source."),se=xe.source.tagged||c.serverCache.isFiltered(),z=fa(p,c,xe.path,xe.children,_,T,se,O))}else if(d.type===Ji.ACK_USER_WRITE){const xe=d;z=xe.revert?function jo(p,c,d,_,T,O){let z;if(null!=el(_,d))return c;{const se=new or(_,c,T),_e=c.eventCache.getNode();let xe;if(sr(d)||".priority"===cr(d)){let It;if(c.serverCache.isFullyInitialized())It=Vl(_,ha(c));else{const Ct=c.serverCache.getNode();(0,q.hu)(Ct instanceof ar,"serverChildren would be complete if leaf node"),It=El(_,Ct)}xe=p.filter.updateFullNode(_e,It,O)}else{const It=cr(d);let Ct=lr(_,It,c.serverCache);null==Ct&&c.serverCache.isCompleteForChild(It)&&(Ct=_e.getImmediateChild(It)),xe=null!=Ct?p.filter.updateChild(_e,It,Ct,Jn(d),se,O):c.eventCache.getNode().hasChild(It)?p.filter.updateChild(_e,It,ar.EMPTY_NODE,Jn(d),se,O):_e,xe.isEmpty()&&c.serverCache.isFullyInitialized()&&(z=Vl(_,ha(c)),z.isLeafNode()&&(xe=p.filter.updateFullNode(xe,z,O)))}return z=c.serverCache.isFullyInitialized()||null!=el(_,wr()),Ua(c,xe,z,p.filter.filtersNodes())}}(p,c,xe.path,_,T,O):function Fs(p,c,d,_,T,O,z){if(null!=el(T,d))return c;const se=c.serverCache.isFiltered(),_e=c.serverCache;if(null!=_.value){if(sr(d)&&_e.isFullyInitialized()||_e.isCompleteForPath(d))return wo(p,c,d,_e.getNode().getChild(d),T,O,se,z);if(sr(d)){let xe=new K(null);return _e.getNode().forEachChild(He,(It,Ct)=>{xe=xe.set(new yr(It),Ct)}),fa(p,c,d,xe,T,O,se,z)}return c}{let xe=new K(null);return _.foreach((It,Ct)=>{const Ft=jr(d,It);_e.isCompleteForPath(Ft)&&(xe=xe.set(It,_e.getNode().getChild(Ft)))}),fa(p,c,d,xe,T,O,se,z)}}(p,c,xe.path,xe.affectedTree,_,T,O)}else{if(d.type!==Ji.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+d.type);z=function Ys(p,c,d,_,T){const O=c.serverCache;return $a(p,Ol(c,O.getNode(),O.isFullyInitialized()||sr(d),O.isFiltered()),d,_,Pa,T)}(p,c,d.path,_,O)}const _e=O.getChanges();return function ta(p,c,d){const _=c.eventCache;if(_.isFullyInitialized()){const T=_.getNode().isLeafNode()||_.getNode().isEmpty(),O=Jo(p);(d.length>0||!p.eventCache.isFullyInitialized()||T&&!_.getNode().equals(O)||!_.getNode().getPriority().equals(O.getPriority()))&&d.push(La(Jo(c)))}}(c,z,_e),{viewCache:z,changes:_e}}(p.processor_,T,c,d,_);return function Dr(p,c){(0,q.hu)(c.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(c.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,O.viewCache),(0,q.hu)(O.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=O.viewCache,ra(p,O.changes,O.viewCache.eventCache.getNode(),null)}function ra(p,c,d,_){return function ki(p,c,d,_){const T=[],O=[];return c.forEach(z=>{"child_changed"===z.type&&p.index_.indexedValueChanged(z.oldSnap,z.snapshotNode)&&O.push(function B(p,c){return{type:"child_moved",snapshotNode:c,childName:p}}(z.childName,z.snapshotNode))}),Bo(p,T,"child_removed",c,_,d),Bo(p,T,"child_added",c,_,d),Bo(p,T,"child_moved",O,_,d),Bo(p,T,"child_changed",c,_,d),Bo(p,T,"value",c,_,d),T}(p.eventGenerator_,c,d,_?[_]:p.eventRegistrations_)}let Ho,Go;class Da{constructor(){this.views=new Map}}function yu(p,c,d,_){const T=c.source.queryId;if(null!==T){const O=p.views.get(T);return(0,q.hu)(null!=O,"SyncTree gave us an op for an invalid query."),za(O,c,d,_)}{let O=[];for(const z of p.views.values())O=O.concat(za(z,c,d,_));return O}}function Oo(p,c,d,_,T){const z=p.views.get(c._queryIdentifier);if(!z){let se=Vl(d,T?_:null),_e=!1;se?_e=!0:_ instanceof ar?(se=El(d,_),_e=!1):(se=ar.EMPTY_NODE,_e=!1);const xe=wa(new Or(se,_e,!1),new Or(_,T,!1));return new Il(c,xe)}return z}function dl(p){const c=[];for(const d of p.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function ts(p,c){let d=null;for(const _ of p.views.values())d=d||na(_,c);return d}function Qs(p,c){return c._queryParams.loadsAllData()?Ta(p):p.views.get(c._queryIdentifier)}function pa(p,c){return null!=Qs(p,c)}function Ls(p){return null!=Ta(p)}function Ta(p){for(const c of p.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let Dl=1;class Tl{constructor(c){this.listenProvider_=c,this.syncPointTree_=new K(null),this.pendingWriteTree_=function ea(){return{visibleWrites:V.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Io(p,c,d,_,T){return function si(p,c,d,_,T){(0,q.hu)(_>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),p.allWrites.push({path:c,snap:d,writeId:_,visible:T}),T&&(p.visibleWrites=ie(p.visibleWrites,c,d)),p.lastWriteId=_}(p.pendingWriteTree_,c,d,_,T),T?ln(p,new Ss({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function u(p,c,d=!1){const _=function nn(p,c){for(let d=0;d<p.allWrites.length;d++){const _=p.allWrites[d];if(_.writeId===c)return _}return null}(p.pendingWriteTree_,c);if(function wn(p,c){const d=p.allWrites.findIndex(se=>se.writeId===c);(0,q.hu)(d>=0,"removeWrite called with nonexistent writeId.");const _=p.allWrites[d];p.allWrites.splice(d,1);let T=_.visible,O=!1,z=p.allWrites.length-1;for(;T&&z>=0;){const se=p.allWrites[z];se.visible&&(z>=d&&ks(se,_.path)?T=!1:os(_.path,se.path)&&(O=!0)),z--}return!!T&&(O?(function zt(p){p.visibleWrites=Mt(p.allWrites,et,wr()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(_.snap?p.visibleWrites=ut(p.visibleWrites,_.path):Qn(_.children,_e=>{p.visibleWrites=ut(p.visibleWrites,jr(_.path,_e))}),!0))}(p.pendingWriteTree_,c)){let O=new K(null);return null!=_.snap?O=O.set(wr(),!0):Qn(_.children,z=>{O=O.set(new yr(z),!0)}),ln(p,new Xo(_.path,O,d))}return[]}function h(p,c,d){return ln(p,new Ss({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function F(p,c,d,_,T=!1){const O=c._path,z=p.syncPointTree_.get(O);let se=[];if(z&&("default"===c._queryIdentifier||pa(z,c))){const _e=function zo(p,c,d,_){const T=c._queryIdentifier,O=[];let z=[];const se=Ls(p);if("default"===T)for(const[_e,xe]of p.views.entries())z=z.concat(ti(xe,d,_)),it(xe)&&(p.views.delete(_e),xe.query._queryParams.loadsAllData()||O.push(xe.query));else{const _e=p.views.get(T);_e&&(z=z.concat(ti(_e,d,_)),it(_e)&&(p.views.delete(T),_e.query._queryParams.loadsAllData()||O.push(_e.query)))}return se&&!Ls(p)&&O.push(new(function Ql(){return(0,q.hu)(Ho,"Reference.ts has not been loaded"),Ho}())(c._repo,c._path)),{removed:O,events:z}}(z,c,d,_);(function tl(p){return 0===p.views.size})(z)&&(p.syncPointTree_=p.syncPointTree_.remove(O));const xe=_e.removed;if(se=_e.events,!T){const It=-1!==xe.findIndex(Ft=>Ft._queryParams.loadsAllData()),Ct=p.syncPointTree_.findOnPath(O,(Ft,En)=>Ls(En));if(It&&!Ct){const Ft=p.syncPointTree_.subtree(O);if(!Ft.isEmpty()){const En=function Ii(p){return p.fold((c,d,_)=>{if(d&&Ls(d))return[Ta(d)];{let T=[];return d&&(T=dl(d)),Qn(_,(O,z)=>{T=T.concat(z)}),T}})}(Ft);for(let Zn=0;Zn<En.length;++Zn){const Mi=En[Zn],sa=Mi.query,hu=qn(p,Mi);p.listenProvider_.startListening(lo(sa),Pr(p,sa),hu.hashFn,hu.onComplete)}}}!Ct&&xe.length>0&&!_&&(It?p.listenProvider_.stopListening(lo(c),null):xe.forEach(Ft=>{const En=p.queryToTagMap.get(tr(Ft));p.listenProvider_.stopListening(lo(Ft),En)}))}!function fi(p,c){for(let d=0;d<c.length;++d){const _=c[d];if(!_._queryParams.loadsAllData()){const T=tr(_),O=p.queryToTagMap.get(T);p.queryToTagMap.delete(T),p.tagToQueryMap.delete(O)}}}(p,xe)}return se}function $(p,c,d,_){const T=Bi(p,_);if(null!=T){const O=Xi(T),z=O.path,se=O.queryId,_e=vi(z,c);return Vs(p,z,new Ss(vo(se),_e,d))}return[]}function De(p,c,d,_=!1){const T=c._path;let O=null,z=!1;p.syncPointTree_.foreachOnPath(T,(Ft,En)=>{const Zn=vi(Ft,T);O=O||ts(En,Zn),z=z||Ls(En)});let _e,se=p.syncPointTree_.get(T);se?(z=z||Ls(se),O=O||ts(se,wr())):(se=new Da,p.syncPointTree_=p.syncPointTree_.set(T,se)),null!=O?_e=!0:(_e=!1,O=ar.EMPTY_NODE,p.syncPointTree_.subtree(T).foreachChild((En,Zn)=>{const Mi=ts(Zn,wr());Mi&&(O=O.updateImmediateChild(En,Mi))}));const xe=pa(se,c);if(!xe&&!c._queryParams.loadsAllData()){const Ft=tr(c);(0,q.hu)(!p.queryToTagMap.has(Ft),"View does not exist, but we have a tag");const En=function Ei(){return Dl++}();p.queryToTagMap.set(Ft,En),p.tagToQueryMap.set(En,Ft)}let Ct=function ws(p,c,d,_,T,O){const z=Oo(p,c,_,T,O);return p.views.has(c._queryIdentifier)||p.views.set(c._queryIdentifier,z),function ls(p,c){p.eventRegistrations_.push(c)}(z,d),function Ga(p,c){const d=p.viewCache_.eventCache,_=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Fr,(O,z)=>{_.push(No(O,z))}),d.isFullyInitialized()&&_.push(La(d.getNode())),ra(p,_,d.getNode(),c)}(z,d)}(se,c,d,On(p.pendingWriteTree_,T),O,_e);if(!xe&&!z&&!_){const Ft=Qs(se,c);Ct=Ct.concat(function Wa(p,c,d){const _=c._path,T=Pr(p,c),O=qn(p,d),z=p.listenProvider_.startListening(lo(c),T,O.hashFn,O.onComplete),se=p.syncPointTree_.subtree(_);if(T)(0,q.hu)(!Ls(se.value),"If we're adding a query, it shouldn't be shadowed");else{const _e=se.fold((xe,It,Ct)=>{if(!sr(xe)&&It&&Ls(It))return[Ta(It).query];{let Ft=[];return It&&(Ft=Ft.concat(dl(It).map(En=>En.query))),Qn(Ct,(En,Zn)=>{Ft=Ft.concat(Zn)}),Ft}});for(let xe=0;xe<_e.length;++xe){const It=_e[xe];p.listenProvider_.stopListening(lo(It),Pr(p,It))}}return z}(p,c,Ft))}return Ct}function Je(p,c,d){const T=p.pendingWriteTree_,O=p.syncPointTree_.findOnPath(c,(z,se)=>{const xe=ts(se,vi(z,c));if(xe)return xe});return bs(T,c,O,d,!0)}function ln(p,c){return An(c,p.syncPointTree_,null,On(p.pendingWriteTree_,wr()))}function An(p,c,d,_){if(sr(p.path))return Un(p,c,d,_);{const T=c.get(wr());null==d&&null!=T&&(d=ts(T,wr()));let O=[];const z=cr(p.path),se=p.operationForChild(z),_e=c.children.get(z);if(_e&&se){const xe=d?d.getImmediateChild(z):null,It=Ca(_,z);O=O.concat(An(se,_e,xe,It))}return T&&(O=O.concat(yu(T,p,_,d))),O}}function Un(p,c,d,_){const T=c.get(wr());null==d&&null!=T&&(d=ts(T,wr()));let O=[];return c.children.inorderTraversal((z,se)=>{const _e=d?d.getImmediateChild(z):null,xe=Ca(_,z),It=p.operationForChild(z);It&&(O=O.concat(Un(It,se,_e,xe)))}),T&&(O=O.concat(yu(T,p,_,d))),O}function qn(p,c){const d=c.query,_=Pr(p,d);return{hashFn:()=>(function Cl(p){return p.viewCache_.serverCache.getNode()}(c)||ar.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return _?function S(p,c,d){const _=Bi(p,d);if(_){const T=Xi(_),O=T.path,z=T.queryId,se=vi(O,c);return Vs(p,O,new Ea(vo(z),se))}return[]}(p,d._path,_):function I(p,c){return ln(p,new Ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(p,d._path);{const O=function sn(p,c){let d="Unknown Error";"too_big"===p?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===p?d="Client doesn't have permission to access the desired data.":"unavailable"===p&&(d="The service is unavailable");const _=new Error(p+" at "+c._path.toString()+": "+d);return _.code=p.toUpperCase(),_}(T,d);return F(p,d,null,O)}}}}function Pr(p,c){const d=tr(c);return p.queryToTagMap.get(d)}function tr(p){return p._path.toString()+"$"+p._queryIdentifier}function Bi(p,c){return p.tagToQueryMap.get(c)}function Xi(p){const c=p.indexOf("$");return(0,q.hu)(-1!==c&&c<p.length-1,"Bad queryKey."),{queryId:p.substr(c+1),path:new yr(p.substr(0,c))}}function Vs(p,c,d){const _=p.syncPointTree_.get(c);return(0,q.hu)(_,"Missing sync point for query tag that we're tracking"),yu(_,d,On(p.pendingWriteTree_,c),null)}function lo(p){return p._queryParams.loadsAllData()&&!p._queryParams.isDefault()?new(function Xl(){return(0,q.hu)(Go,"Reference.ts has not been loaded"),Go}())(p._repo,p._path):p}class ko{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new ko(d)}node(){return this.node_}}class uo{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=jr(this.path_,c);return new uo(this.syncTree_,d)}node(){return Je(this.syncTree_,this.path_)}}const Sl=function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p},hl=function(p,c,d){return p&&"object"==typeof p?((0,q.hu)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?Us(p[".sv"],c,d):"object"==typeof p[".sv"]?Nu(p[".sv"],c):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},Us=function(p,c,d){if("timestamp"===p)return d.timestamp;(0,q.hu)(!1,"Unexpected server value: "+p)},Nu=function(p,c,d){p.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const _=p.increment;"number"!=typeof _&&(0,q.hu)(!1,"Unexpected increment value: "+_);const T=c.node();if((0,q.hu)(null!==T&&typeof T<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return _;const z=T.getValue();return"number"!=typeof z?_:z+_},Nn=function(p,c,d,_){return Yn(c,new uo(d,p),_)},hn=function(p,c,d){return Yn(p,new ko(c),d)};function Yn(p,c,d){const _=p.getPriority().val(),T=hl(_,c.getImmediateChild(".priority"),d);let O;if(p.isLeafNode()){const z=p,se=hl(z.getValue(),c,d);return se!==z.getValue()||T!==z.getPriority().val()?new zr(se,Ui(T)):p}{const z=p;return O=z,T!==z.getPriority().val()&&(O=O.updatePriority(new zr(T))),z.forEachChild(Fr,(se,_e)=>{const xe=Yn(_e,c.getImmediateChild(se),d);xe!==_e&&(O=O.updateImmediateChild(se,xe))}),O}}class oi{constructor(c="",d=null,_={children:{},childCount:0}){this.name=c,this.parent=d,this.node=_}}function fs(p,c){let d=c instanceof yr?c:new yr(c),_=p,T=cr(d);for(;null!==T;){const O=(0,q.DV)(_.node.children,T)||{children:{},childCount:0};_=new oi(T,_,O),d=Jn(d),T=cr(d)}return _}function so(p){return p.node.value}function oo(p,c){p.node.value=c,gs(p)}function Co(p){return p.node.childCount>0}function Ka(p,c){Qn(p.node.children,(d,_)=>{c(new oi(d,p,_))})}function ga(p,c,d,_){d&&!_&&c(p),Ka(p,T=>{ga(T,c,!0,_)}),d&&_&&c(p)}function Do(p){return new yr(null===p.parent?p.name:Do(p.parent)+"/"+p.name)}function gs(p){null!==p.parent&&function bl(p,c,d){const _=function Ai(p){return void 0===so(p)&&!Co(p)}(d),T=(0,q.r3)(p.node.children,c);_&&T?(delete p.node.children[c],p.node.childCount--,gs(p)):!_&&!T&&(p.node.children[c]=d.node,p.node.childCount++,gs(p))}(p.parent,p.name,p)}const nl=/[\[\].#$\/\u0000-\u001F\u007F]/,_u=/[\[\].#$\u0000-\u001F\u007F]/,Al=10485760,Bl=function(p){return"string"==typeof p&&0!==p.length&&!nl.test(p)},Hu=function(p){return"string"==typeof p&&0!==p.length&&!_u.test(p)},fl=function(p){return null===p||"string"==typeof p||"number"==typeof p&&!Gt(p)||p&&"object"==typeof p&&(0,q.r3)(p,".sv")},qa=function(p,c,d,_){_&&void 0===c||Sa((0,q.gK)(p,"value"),c,d)},Sa=function(p,c,d){const _=d instanceof yr?new ys(d,p):d;if(void 0===c)throw new Error(p+"contains undefined "+zs(_));if("function"==typeof c)throw new Error(p+"contains a function "+zs(_)+" with contents = "+c.toString());if(Gt(c))throw new Error(p+"contains "+c.toString()+" "+zs(_));if("string"==typeof c&&c.length>Al/3&&(0,q.ug)(c)>Al)throw new Error(p+"contains a string greater than "+Al+" utf8 bytes "+zs(_)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let T=!1,O=!1;if(Qn(c,(z,se)=>{if(".value"===z)T=!0;else if(".priority"!==z&&".sv"!==z&&(O=!0,!Bl(z)))throw new Error(p+" contains an invalid key ("+z+") "+zs(_)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fo(p,c){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(c),p.byteLength_+=(0,q.ug)(c),po(p)})(_,z),Sa(p,se,_),function ao(p){const c=p.parts_.pop();p.byteLength_-=(0,q.ug)(c),p.parts_.length>0&&(p.byteLength_-=1)}(_)}),T&&O)throw new Error(p+' contains ".value" child '+zs(_)+" in addition to actual children.")}},Za=function(p,c,d,_){if(_&&void 0===c)return;const T=(0,q.gK)(p,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(T+" must be an object containing the children to replace.");const O=[];Qn(c,(z,se)=>{const _e=new yr(z);if(Sa(T,se,jr(d,_e)),".priority"===Fo(_e)&&!fl(se))throw new Error(T+"contains an invalid value for '"+_e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");O.push(_e)}),function(p,c){let d,_;for(d=0;d<c.length;d++){_=c[d];const O=Hi(_);for(let z=0;z<O.length;z++)if((".priority"!==O[z]||z!==O.length-1)&&!Bl(O[z]))throw new Error(p+"contains an invalid key ("+O[z]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(Xr);let T=null;for(d=0;d<c.length;d++){if(_=c[d],null!==T&&os(T,_))throw new Error(p+"contains a path "+T.toString()+" that is ancestor of another path "+_.toString());T=_}}(T,O)},su=function(p,c,d){if(!d||void 0!==c){if(Gt(c))throw new Error((0,q.gK)(p,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fl(c))throw new Error((0,q.gK)(p,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rl=function(p,c,d,_){if(!(_&&void 0===d||Bl(d)))throw new Error((0,q.gK)(p,c)+'was an invalid key = "'+d+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ou=function(p,c,d,_){if(!(_&&void 0===d||Hu(d)))throw new Error((0,q.gK)(p,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rl=function(p,c,d,_){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ou(p,c,d,_)},ss=function(p,c){if(".info"===cr(c))throw new Error(p+" failed = Can't modify data under /.info/")},dc=function(p,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!Bl(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),Hu(p)}(d))throw new Error((0,q.gK)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class As{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function il(p,c){let d=null;for(let _=0;_<c.length;_++){const T=c[_],O=T.getPath();null!==d&&!Bs(O,d.path)&&(p.eventLists_.push(d),d=null),null===d&&(d={events:[],path:O}),d.events.push(T)}d&&p.eventLists_.push(d)}function xu(p,c,d){il(p,d),A(p,_=>Bs(_,c))}function ia(p,c,d){il(p,d),A(p,_=>os(_,c)||os(c,_))}function A(p,c){p.recursionDepth_++;let d=!0;for(let _=0;_<p.eventLists_.length;_++){const T=p.eventLists_[_];T&&(c(T.path)?(k(p.eventLists_[_]),p.eventLists_[_]=null):d=!1)}d&&(p.eventLists_=[]),p.recursionDepth_--}function k(p){for(let c=0;c<p.events.length;c++){const d=p.events[c];if(null!==d){p.events[c]=null;const _=d.getEventRunner();Tt&&cn("event: "+d.toString()),ui(_)}}}const X="repo_interrupt",fe=25;class Re{constructor(c,d,_,T){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=_,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new As,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Os(),this.transactionQueueTree_=new oi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vt(p){const d=p.infoData_.getNode(new yr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function an(p){return Sl({timestamp:vt(p)})}function on(p,c,d,_,T){p.dataUpdateCount++;const O=new yr(c);d=p.interceptServerDataCallback_?p.interceptServerDataCallback_(c,d):d;let z=[];if(T)if(_){const _e=(0,q.UI)(d,xe=>Ui(xe));z=function le(p,c,d,_){const T=Bi(p,_);if(T){const O=Xi(T),z=O.path,se=O.queryId,_e=vi(z,c),xe=K.fromObject(d);return Vs(p,z,new hs(vo(se),_e,xe))}return[]}(p.serverSyncTree_,O,_e,T)}else{const _e=Ui(d);z=$(p.serverSyncTree_,O,_e,T)}else if(_){const _e=(0,q.UI)(d,xe=>Ui(xe));z=function f(p,c,d){const _=K.fromObject(d);return ln(p,new hs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,_))}(p.serverSyncTree_,O,_e)}else{const _e=Ui(d);z=h(p.serverSyncTree_,O,_e)}let se=O;z.length>0&&(se=gl(p,O)),ia(p.eventQueue_,se,z)}function Hn(p,c){Tr(p,"connected",c),!1===c&&function Jl(p){Pl(p,"onDisconnectEvents");const c=an(p),d=Os();Qo(p.onDisconnect_,wr(),(T,O)=>{const z=Nn(T,O,p.serverSyncTree_,c);_o(d,T,z)});let _=[];Qo(d,wr(),(T,O)=>{_=_.concat(h(p.serverSyncTree_,T,O));const z=R(p,T);gl(p,z)}),p.onDisconnect_=Os(),ia(p.eventQueue_,wr(),_)}(p)}function Tr(p,c,d){const _=new yr("/.info/"+c),T=Ui(d);p.infoData_.updateSnapshot(_,T);const O=h(p.infoSyncTree_,_,T);ia(p.eventQueue_,_,O)}function To(p){return p.nextWriteId_++}function Ml(p,c,d,_,T){Pl(p,"set",{path:c.toString(),value:d,priority:_});const O=an(p),z=Ui(d,_),se=Je(p.serverSyncTree_,c),_e=hn(z,se,O),xe=To(p),It=Io(p.serverSyncTree_,c,_e,xe,!0);il(p.eventQueue_,It),p.server_.put(c.toString(),z.val(!0),(Ft,En)=>{const Zn="ok"===Ft;Zn||Fn("set at "+c+" failed: "+Ft);const Mi=u(p.serverSyncTree_,xe,!Zn);ia(p.eventQueue_,c,Mi),Aa(0,T,Ft,En)});const Ct=R(p,c);gl(p,Ct),ia(p.eventQueue_,Ct,[])}function Na(p,c,d){p.server_.onDisconnectCancel(c.toString(),(_,T)=>{"ok"===_&&ul(p.onDisconnect_,c),Aa(0,d,_,T)})}function ba(p,c,d,_){const T=Ui(d);p.server_.onDisconnectPut(c.toString(),T.val(!0),(O,z)=>{"ok"===O&&_o(p.onDisconnect_,c,T),Aa(0,_,O,z)})}function Ou(p,c,d){let _;_=".info"===cr(c._path)?F(p.infoSyncTree_,c,d):F(p.serverSyncTree_,c,d),xu(p.eventQueue_,c._path,_)}function sl(p){p.persistentConnection_&&p.persistentConnection_.interrupt(X)}function Pl(p,...c){let d="";p.persistentConnection_&&(d=p.persistentConnection_.id+":"),cn(d,...c)}function Aa(p,c,d,_){c&&ui(()=>{if("ok"===d)c(null);else{const T=(d||"error").toUpperCase();let O=T;_&&(O+=": "+_);const z=new Error(O);z.code=T,c(z)}})}function Gu(p,c,d){return Je(p.serverSyncTree_,c,d)||ar.EMPTY_NODE}function pl(p,c=p.transactionQueueTree_){if(c||C(p,c),so(c)){const d=b(p,c);(0,q.hu)(d.length>0,"Sending zero length transaction queue"),d.every(T=>0===T.status)&&function gc(p,c,d){const _=d.map(xe=>xe.currentWriteId),T=Gu(p,c,_);let O=T;const z=T.hash();for(let xe=0;xe<d.length;xe++){const It=d[xe];(0,q.hu)(0===It.status,"tryToSendTransactionQueue_: items in queue should all be run."),It.status=1,It.retryCount++;const Ct=vi(c,It.path);O=O.updateChild(Ct,It.currentOutputSnapshotRaw)}const se=O.val(!0),_e=c;p.server_.put(_e.toString(),se,xe=>{Pl(p,"transaction put response",{path:_e.toString(),status:xe});let It=[];if("ok"===xe){const Ct=[];for(let Ft=0;Ft<d.length;Ft++)d[Ft].status=2,It=It.concat(u(p.serverSyncTree_,d[Ft].currentWriteId)),d[Ft].onComplete&&Ct.push(()=>d[Ft].onComplete(null,!0,d[Ft].currentOutputSnapshotResolved)),d[Ft].unwatcher();C(p,fs(p.transactionQueueTree_,c)),pl(p,p.transactionQueueTree_),ia(p.eventQueue_,c,It);for(let Ft=0;Ft<Ct.length;Ft++)ui(Ct[Ft])}else{if("datastale"===xe)for(let Ct=0;Ct<d.length;Ct++)d[Ct].status=3===d[Ct].status?4:0;else{Fn("transaction at "+_e.toString()+" failed: "+xe);for(let Ct=0;Ct<d.length;Ct++)d[Ct].status=4,d[Ct].abortReason=xe}gl(p,c)}},z)}(p,Do(c),d)}else Co(c)&&Ka(c,d=>{pl(p,d)})}function gl(p,c){const d=mc(p,c),_=Do(d);return function gd(p,c,d){if(0===c.length)return;const _=[];let T=[];const z=c.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<c.length;se++){const _e=c[se],xe=vi(d,_e.path);let Ct,It=!1;if((0,q.hu)(null!==xe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_e.status)It=!0,Ct=_e.abortReason,T=T.concat(u(p.serverSyncTree_,_e.currentWriteId,!0));else if(0===_e.status)if(_e.retryCount>=fe)It=!0,Ct="maxretry",T=T.concat(u(p.serverSyncTree_,_e.currentWriteId,!0));else{const Ft=Gu(p,_e.path,z);_e.currentInputSnapshot=Ft;const En=c[se].update(Ft.val());if(void 0!==En){Sa("transaction failed: Data returned ",En,_e.path);let Zn=Ui(En);"object"==typeof En&&null!=En&&(0,q.r3)(En,".priority")||(Zn=Zn.updatePriority(Ft.getPriority()));const sa=_e.currentWriteId,hu=an(p),fu=hn(Zn,Ft,hu);_e.currentOutputSnapshotRaw=Zn,_e.currentOutputSnapshotResolved=fu,_e.currentWriteId=To(p),z.splice(z.indexOf(sa),1),T=T.concat(Io(p.serverSyncTree_,_e.path,fu,_e.currentWriteId,_e.applyLocally)),T=T.concat(u(p.serverSyncTree_,sa,!0))}else It=!0,Ct="nodata",T=T.concat(u(p.serverSyncTree_,_e.currentWriteId,!0))}ia(p.eventQueue_,d,T),T=[],It&&(c[se].status=2,setTimeout(c[se].unwatcher,Math.floor(0)),c[se].onComplete&&_.push("nodata"===Ct?()=>c[se].onComplete(null,!1,c[se].currentInputSnapshot):()=>c[se].onComplete(new Error(Ct),!1,null)))}C(p,p.transactionQueueTree_);for(let se=0;se<_.length;se++)ui(_[se]);pl(p,p.transactionQueueTree_)}(p,b(p,d),_),_}function mc(p,c){let d,_=p.transactionQueueTree_;for(d=cr(c);null!==d&&void 0===so(_);)_=fs(_,d),d=cr(c=Jn(c));return _}function b(p,c){const d=[];return y(p,c,d),d.sort((_,T)=>_.order-T.order),d}function y(p,c,d){const _=so(c);if(_)for(let T=0;T<_.length;T++)d.push(_[T]);Ka(c,T=>{y(p,T,d)})}function C(p,c){const d=so(c);if(d){let _=0;for(let T=0;T<d.length;T++)2!==d[T].status&&(d[_]=d[T],_++);d.length=_,oo(c,d.length>0?d:void 0)}Ka(c,_=>{C(p,_)})}function R(p,c){const d=Do(mc(p,c)),_=fs(p.transactionQueueTree_,c);return function ps(p,c,d){let _=d?p:p.parent;for(;null!==_;){if(c(_))return!0;_=_.parent}}(_,T=>{J(p,T)}),J(p,_),ga(_,T=>{J(p,T)}),d}function J(p,c){const d=so(c);if(d){const _=[];let T=[],O=-1;for(let z=0;z<d.length;z++)3===d[z].status||(1===d[z].status?((0,q.hu)(O===z-1,"All SENT items should be at beginning of queue."),O=z,d[z].status=3,d[z].abortReason="set"):((0,q.hu)(0===d[z].status,"Unexpected transaction status in abort"),d[z].unwatcher(),T=T.concat(u(p.serverSyncTree_,d[z].currentWriteId,!0)),d[z].onComplete&&_.push(d[z].onComplete.bind(null,new Error("set"),!1,null))));-1===O?oo(c,void 0):d.length=O+1,ia(p.eventQueue_,Do(c),T);for(let z=0;z<_.length;z++)ui(_[z])}}const yt=function(p,c){const d=Jt(p),_=d.namespace;return"firebase.com"===d.domain&&nr(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==d.domain&&nr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oe(d.host,d.secure,_,"ws"===d.scheme||"wss"===d.scheme,c,"",_!==d.subdomain),path:new yr(d.pathString)}},Jt=function(p){let c="",d="",_="",T="",O="",z=!0,se="https",_e=443;if("string"==typeof p){let xe=p.indexOf("//");xe>=0&&(se=p.substring(0,xe-1),p=p.substring(xe+2));let It=p.indexOf("/");-1===It&&(It=p.length);let Ct=p.indexOf("?");-1===Ct&&(Ct=p.length),c=p.substring(0,Math.min(It,Ct)),It<Ct&&(T=function de(p){let c="";const d=p.split("/");for(let _=0;_<d.length;_++)if(d[_].length>0){let T=d[_];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch{}c+="/"+T}return c}(p.substring(It,Ct)));const Ft=function We(p){const c={};"?"===p.charAt(0)&&(p=p.substring(1));for(const d of p.split("&")){if(0===d.length)continue;const _=d.split("=");2===_.length?c[decodeURIComponent(_[0])]=decodeURIComponent(_[1]):Fn(`Invalid query segment '${d}' in query '${p}'`)}return c}(p.substring(Math.min(p.length,Ct)));xe=c.indexOf(":"),xe>=0?(z="https"===se||"wss"===se,_e=parseInt(c.substring(xe+1),10)):xe=c.length;const En=c.slice(0,xe);if("localhost"===En.toLowerCase())d="localhost";else if(En.split(".").length<=2)d=En;else{const Zn=c.indexOf(".");_=c.substring(0,Zn).toLowerCase(),d=c.substring(Zn+1),O=_}"ns"in Ft&&(O=Ft.ns)}return{host:c,port:_e,domain:d,subdomain:_,secure:z,scheme:se,pathString:T,namespace:O}},_n="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rr=function(){let p=0;const c=[];return function(d){const _=d===p;let T;p=d;const O=new Array(8);for(T=7;T>=0;T--)O[T]=_n.charAt(d%64),d=Math.floor(d/64);(0,q.hu)(0===d,"Cannot push at time == 0");let z=O.join("");if(_){for(T=11;T>=0&&63===c[T];T--)c[T]=0;c[T]++}else for(T=0;T<12;T++)c[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)z+=_n.charAt(c[T]);return(0,q.hu)(20===z.length,"nextPushId: Length should be 20."),z}}();class Wr{constructor(c,d,_,T){this.eventType=c,this.eventRegistration=d,this.snapshot=_,this.prevName=T}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Wl)(this.snapshot.exportVal())}}class Ra{constructor(c,d,_){this.eventRegistration=c,this.error=d,this.path=_}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ko{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Wu{constructor(c,d){this._repo=c,this._path=d}cancel(){const c=new q.BH;return Na(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){ss("OnDisconnect.remove",this._path);const c=new q.BH;return ba(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){ss("OnDisconnect.set",this._path),qa("OnDisconnect.set",c,this._path,!1);const d=new q.BH;return ba(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}setWithPriority(c,d){ss("OnDisconnect.setWithPriority",this._path),qa("OnDisconnect.setWithPriority",c,this._path,!1),su("OnDisconnect.setWithPriority",d,!1);const _=new q.BH;return function hc(p,c,d,_,T){const O=Ui(d,_);p.server_.onDisconnectPut(c.toString(),O.val(!0),(z,se)=>{"ok"===z&&_o(p.onDisconnect_,c,O),Aa(0,T,z,se)})}(this._repo,this._path,c,d,_.wrapCallback(()=>{})),_.promise}update(c){ss("OnDisconnect.update",this._path),Za("OnDisconnect.update",c,this._path,!1);const d=new q.BH;return function fc(p,c,d,_){if((0,q.xb)(d))return cn("onDisconnect().update() called with empty data.  Don't do anything."),void Aa(0,_,"ok",void 0);p.server_.onDisconnectMerge(c.toString(),d,(T,O)=>{"ok"===T&&Qn(d,(z,se)=>{const _e=Ui(se);_o(p.onDisconnect_,jr(c,z),_e)}),Aa(0,_,T,O)})}(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}}class Ns{constructor(c,d,_,T){this._repo=c,this._path=d,this._queryParams=_,this._orderByCalled=T}get key(){return sr(this._path)?null:Fo(this._path)}get ref(){return new Xs(this._repo,this._path)}get _queryIdentifier(){const c=xo(this._queryParams),d=gi(c);return"{}"===d?"default":d}get _queryObject(){return xo(this._queryParams)}isEqual(c){if(!((c=(0,q.m9)(c))instanceof Ns))return!1;const d=this._repo===c._repo,_=Bs(this._path,c._path);return d&&_&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Is(p){let c="";for(let d=p.pieceNum_;d<p.pieces_.length;d++)""!==p.pieces_[d]&&(c+="/"+encodeURIComponent(String(p.pieces_[d])));return c||"/"}(this._path)}}function jl(p,c){if(!0===p._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function ol(p){let c=null,d=null;if(p.hasStart()&&(c=p.getIndexStartValue()),p.hasEnd()&&(d=p.getIndexEndValue()),p.getIndex()===He){const _="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(p.hasStart()){if(p.getIndexStartName()!==fr)throw new Error(_);if("string"!=typeof c)throw new Error(T)}if(p.hasEnd()){if(p.getIndexEndName()!==br)throw new Error(_);if("string"!=typeof d)throw new Error(T)}}else if(p.getIndex()===Fr){if(null!=c&&!fl(c)||null!=d&&!fl(d))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(p.getIndex()instanceof la||p.getIndex()===Po,"unknown index type."),null!=c&&"object"==typeof c||null!=d&&"object"==typeof d)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Eu(p){if(p.hasStart()&&p.hasEnd()&&p.hasLimit()&&!p.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xs extends Ns{constructor(c,d){super(c,d,new dn,!1)}get parent(){const c=Cs(this._path);return null===c?null:new Xs(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class Hl{constructor(c,d,_){this._node=c,this.ref=d,this._index=_}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new yr(c),_=Nl(this.ref,c);return new Hl(this._node.getChild(d),_,Fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(_,T)=>c(new Hl(T,Nl(this.ref,_),Fr)))}hasChild(c){const d=new yr(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eu(p,c){return(p=(0,q.m9)(p))._checkNotDeleted("ref"),void 0!==c?Nl(p._root,c):p._root}function Ku(p,c){(p=(0,q.m9)(p))._checkNotDeleted("refFromURL");const d=yt(c,p._repo.repoInfo_.nodeAdmin);dc("refFromURL",d);const _=d.repoInfo;return!p._repo.repoInfo_.isCustomHost()&&_.host!==p._repo.repoInfo_.host&&nr("refFromURL: Host name does not match the current database: (found "+_.host+" but expected "+p._repo.repoInfo_.host+")"),eu(p,d.path.toString())}function Nl(p,c){return null===cr((p=(0,q.m9)(p))._path)?Rl("child","path",c,!1):ou("child","path",c,!1),new Xs(p._repo,jr(p._path,c))}function _c(p,c){p=(0,q.m9)(p),ss("set",p._path),qa("set",c,p._path,!1);const d=new q.BH;return Ml(p._repo,p._path,c,null,d.wrapCallback(()=>{})),d.promise}function yd(p,c){Za("update",c,p._path,!1);const d=new q.BH;return function zu(p,c,d,_){Pl(p,"update",{path:c.toString(),value:d});let T=!0;const O=an(p),z={};if(Qn(d,(se,_e)=>{T=!1,z[se]=Nn(jr(c,se),Ui(_e),p.serverSyncTree_,O)}),T)cn("update() called with empty data.  Don't do anything."),Aa(0,_,"ok",void 0);else{const se=To(p),_e=function W(p,c,d,_){!function Eo(p,c,d,_){(0,q.hu)(_>p.lastWriteId,"Stacking an older merge on top of newer ones"),p.allWrites.push({path:c,children:d,writeId:_,visible:!0}),p.visibleWrites=Te(p.visibleWrites,c,d),p.lastWriteId=_}(p.pendingWriteTree_,c,d,_);const T=K.fromObject(d);return ln(p,new hs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,T))}(p.serverSyncTree_,c,z,se);il(p.eventQueue_,_e),p.server_.merge(c.toString(),d,(xe,It)=>{const Ct="ok"===xe;Ct||Fn("update at "+c+" failed: "+xe);const Ft=u(p.serverSyncTree_,se,!Ct),En=Ft.length>0?gl(p,c):c;ia(p.eventQueue_,En,Ft),Aa(0,_,xe,It)}),Qn(d,xe=>{const It=R(p,jr(c,xe));gl(p,It)}),ia(p.eventQueue_,c,[])}}(p._repo,p._path,c,d.wrapCallback(()=>{})),d.promise}function pf(p){p=(0,q.m9)(p);const c=new Ko(()=>{}),d=new Kc(c);return function Wo(p,c,d){const _=function ft(p,c){const d=c._path;let _=null;p.syncPointTree_.foreachOnPath(d,(xe,It)=>{const Ct=vi(xe,d);_=_||ts(It,Ct)});let T=p.syncPointTree_.get(d);T?_=_||ts(T,wr()):(T=new Da,p.syncPointTree_=p.syncPointTree_.set(d,T));const O=null!=_,z=O?new Or(_,!0,!1):null;return function io(p){return Jo(p.viewCache_)}(Oo(T,c,On(p.pendingWriteTree_,c._path),O?z.getNode():ar.EMPTY_NODE,O))}(p.serverSyncTree_,c);return null!=_?Promise.resolve(_):p.server_.get(c).then(T=>{const O=Ui(T).withIndex(c._queryParams.getIndex());let z;if(De(p.serverSyncTree_,c,d,!0),c._queryParams.loadsAllData())z=h(p.serverSyncTree_,c._path,O);else{const se=Pr(p.serverSyncTree_,c);z=$(p.serverSyncTree_,c._path,O,se)}return ia(p.eventQueue_,c._path,z),F(p.serverSyncTree_,c,d,null,!0),O},T=>(Pl(p,"get for query "+(0,q.Wl)(c)+" failed: "+T),Promise.reject(new Error(T))))}(p._repo,p,d).then(_=>new Hl(_,new Xs(p._repo,p._path),p._queryParams.getIndex()))}class Kc{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const _=d._queryParams.getIndex();return new Wr("value",this,new Hl(c.snapshotNode,new Xs(d._repo,d._path),_))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new Ra(this,c,d):null}matches(c){return c instanceof Kc&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class qc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new Ra(this,c,d):null}createEvent(c,d){(0,q.hu)(null!=c.childName,"Child events should have a childName.");const _=Nl(new Xs(d._repo,d._path),c.childName),T=d._queryParams.getIndex();return new Wr(c.type,this,new Hl(c.snapshotNode,_,T),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof qc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lu(p,c,d,_,T){let O;if("object"==typeof _&&(O=void 0,T=_),"function"==typeof _&&(O=_),T&&T.onlyOnce){const _e=d,xe=(It,Ct)=>{Ou(p._repo,p,se),_e(It,Ct)};xe.userCallback=d.userCallback,xe.context=d.context,d=xe}const z=new Ko(d,O||void 0),se="value"===c?new Kc(z):new qc(c,z);return function Wc(p,c,d){let _;_=".info"===cr(c._path)?De(p.infoSyncTree_,c,d):De(p.serverSyncTree_,c,d),xu(p.eventQueue_,c._path,_)}(p._repo,p,se),()=>Ou(p._repo,p,se)}function uu(p,c,d,_){return lu(p,"value",c,d,_)}function _d(p,c,d,_){return lu(p,"child_added",c,d,_)}function tu(p,c,d,_){return lu(p,"child_changed",c,d,_)}function Zc(p,c,d,_){return lu(p,"child_moved",c,d,_)}function zl(p,c,d,_){return lu(p,"child_removed",c,d,_)}function uh(p,c,d){let _=null;const T=d?new Ko(d):null;"value"===c?_=new Kc(T):c&&(_=new qc(c,T)),Ou(p._repo,p,_)}class Gl{}class Yc extends Gl{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){qa("endAt",this._value,c._path,!0);const d=Ds(c._queryParams,this._value,this._key);if(Eu(d),ol(d),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ns(c._repo,c._path,d,c._orderByCalled)}}class ch extends Gl{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){qa("endBefore",this._value,c._path,!1);const d=function Ks(p,c,d){let _;return _=Ds(p,c,p.index_===He||d?d:fr),_.endBeforeSet_=!0,_}(c._queryParams,this._value,this._key);if(Eu(d),ol(d),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ns(c._repo,c._path,d,c._orderByCalled)}}class Ec extends Gl{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){qa("startAt",this._value,c._path,!0);const d=Ws(c._queryParams,this._value,this._key);if(Eu(d),ol(d),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ns(c._repo,c._path,d,c._orderByCalled)}}class vd extends Gl{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){qa("startAfter",this._value,c._path,!1);const d=function Uo(p,c,d){let _;return _=Ws(p,c,p.index_===He||d?d:br),_.startAfterSet_=!0,_}(c._queryParams,this._value,this._key);if(Eu(d),ol(d),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ns(c._repo,c._path,d,c._orderByCalled)}}class wc extends Gl{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ns(c._repo,c._path,function zi(p,c){const d=p.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="l",d}(c._queryParams,this._limit),c._orderByCalled)}}class dh extends Gl{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ns(c._repo,c._path,function mo(p,c){const d=p.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="r",d}(c._queryParams,this._limit),c._orderByCalled)}}class wu extends Gl{constructor(c){super(),this._path=c}_apply(c){jl(c,"orderByChild");const d=new yr(this._path);if(sr(d))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const _=new la(d),T=Es(c._queryParams,_);return ol(T),new Ns(c._repo,c._path,T,!0)}}class _f extends Gl{_apply(c){jl(c,"orderByKey");const d=Es(c._queryParams,He);return ol(d),new Ns(c._repo,c._path,d,!0)}}class xl extends Gl{_apply(c){jl(c,"orderByPriority");const d=Es(c._queryParams,Fr);return ol(d),new Ns(c._repo,c._path,d,!0)}}class hh extends Gl{_apply(c){jl(c,"orderByValue");const d=Es(c._queryParams,Po);return ol(d),new Ns(c._repo,c._path,d,!0)}}class wf extends Gl{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){if(qa("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yc(this._value,this._key)._apply(new Ec(this._value,this._key)._apply(c))}}function cu(p,...c){let d=(0,q.m9)(p);for(const _ of c)d=_._apply(d);return d}(function iu(p){(0,q.hu)(!Ho,"__referenceConstructor has already been defined"),Ho=p})(Xs),function Ul(p){(0,q.hu)(!Go,"__referenceConstructor has already been defined"),Go=p}(Xs);const ma="FIREBASE_DATABASE_EMULATOR_HOST",Gi={};let fh=!1;function Ed(p,c,d,_,T){let O=_||p.options.databaseURL;void 0===O&&(p.options.projectId||nr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",p.options.projectId),O=`${p.options.projectId}-default-rtdb.firebaseio.com`);let _e,xe,z=yt(O,T),se=z.repoInfo;typeof process<"u"&&process.env&&(xe=process.env[ma]),xe?(_e=!0,O=`http://${xe}?ns=${se.namespace}`,z=yt(O,T),se=z.repoInfo):_e=!z.repoInfo.secure;const It=T&&_e?new Cn(Cn.OWNER):new Nr(p.name,p.options,c);dc("Invalid Firebase Database URL",z),sr(z.path)||nr("Database URL must point to the root of a Firebase Database (not including a child path).");const Ct=function Id(p,c,d,_){let T=Gi[c.name];T||(T={},Gi[c.name]=T);let O=T[p.toURLString()];return O&&nr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),O=new Re(p,fh,d,_),T[p.toURLString()]=O,O}(se,p,It,new Xn(p.name,d));return new Cc(Ct,p)}class Cc{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ze(p,c,d){if(p.stats_=pe(p.repoInfo_),p.forceRestClient_||Lr())p.server_=new qs(p.repoInfo_,(_,T,O,z)=>{on(p,_,T,O,z)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>Hn(p,!0),0);else{if(typeof d<"u"&&null!==d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Wl)(d)}catch(_){throw new Error("Invalid authOverride provided: "+_)}}p.persistentConnection_=new Ms(p.repoInfo_,c,(_,T,O,z)=>{on(p,_,T,O,z)},_=>{Hn(p,_)},_=>{!function Mr(p,c){Qn(c,(d,_)=>{Tr(p,d,_)})}(p,_)},p.authTokenProvider_,p.appCheckProvider_,d),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(_=>{p.server_.refreshAuthToken(_)}),p.appCheckProvider_.addTokenChangeListener(_=>{p.server_.refreshAppCheckToken(_.token)}),p.statsReporter_=function Le(p,c){const d=p.toString();return ve[d]||(ve[d]=c()),ve[d]}(p.repoInfo_,()=>new Qa(p.stats_,p.server_)),p.infoData_=new yo,p.infoSyncTree_=new Tl({startListening:(_,T,O,z)=>{let se=[];const _e=p.infoData_.getNode(_._path);return _e.isEmpty()||(se=h(p.infoSyncTree_,_._path,_e),setTimeout(()=>{z("ok")},0)),se},stopListening:()=>{}}),Tr(p,"connected",!1),p.serverSyncTree_=new Tl({startListening:(_,T,O,z)=>(p.server_.listen(_,O,T,(se,_e)=>{const xe=z(se,_e);ia(p.eventQueue_,_._path,xe)}),[]),stopListening:(_,T)=>{p.server_.unlisten(_,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xs(this._repo,wr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wd(p,c){const d=Gi[c];(!d||d[p.key]!==p)&&nr(`Database ${c}(${p.repoInfo_}) has already been deleted.`),sl(p),delete d[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&nr("Cannot call "+c+" on a deleted database.")}}function Cd(){$r.IS_TRANSPORT_INITIALIZED&&Fn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Dd(){Cd(),gr.forceDisallow()}function Dc(){Cd(),Zr.forceDisallow(),gr.forceAllow()}function Sd(p,c){Zt(p,c)}const em={".sv":"timestamp"};class xp{constructor(c,d){this.committed=c,this.snapshot=d}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ms.prototype.simpleListen=function(p,c){this.sendRequest("q",{p},c)},Ms.prototype.echo=function(p,c){this.sendRequest("echo",{d:p},c)},function Np(p){Vt(lt.SDK_VERSION),(0,lt._registerComponent)(new rt.wA("database",(c,{instanceIdentifier:d})=>Ed(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(fn,"0.14.4",p),(0,lt.registerVersion)(fn,"0.14.4","esm2017")}();const bd=new Bt.Yd("@firebase/database-compat"),Df=function(p){bd.warn("FIREBASE WARNING: "+p)};class Tf{constructor(c){this._delegate=c}cancel(c){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",c,!0);const d=this._delegate.cancel();return c&&d.then(()=>c(null),_=>c(_)),d}remove(c){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",c,!0);const d=this._delegate.remove();return c&&d.then(()=>c(null),_=>c(_)),d}set(c,d){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",d,!0);const _=this._delegate.set(c);return d&&_.then(()=>d(null),T=>d(T)),_}setWithPriority(c,d,_){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",_,!0);const T=this._delegate.setWithPriority(c,d);return _&&T.then(()=>_(null),O=>_(O)),T}update(c,d){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(c)){const T={};for(let O=0;O<c.length;++O)T[""+O]=c[O];c=T,Df("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",d,!0);const _=this._delegate.update(c);return d&&_.then(()=>d(null),T=>d(T)),_}}class Qu{constructor(c,d){this.committed=c,this.snapshot=d}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ma{constructor(c,d){this._database=c,this._delegate=d}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(c){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),c=String(c),ou("DataSnapshot.child","path",c,!1),new Ma(this._database,this._delegate.child(c))}hasChild(c){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ou("DataSnapshot.hasChild","path",c,!1),this._delegate.hasChild(c)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(c){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",c,!1),this._delegate.forEach(d=>c(new Ma(this._database,d)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new ml(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ya{constructor(c,d){this.database=c,this._delegate=d}on(c,d,_,T){var O;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",d,!1);const z=ya.getCancelAndContextArgs_("Query.on",_,T),se=(xe,It)=>{d.call(z.context,new Ma(this.database,xe),It)};se.userCallback=d,se.context=z.context;const _e=null===(O=z.cancel)||void 0===O?void 0:O.bind(z.context);switch(c){case"value":return uu(this._delegate,se,_e),d;case"child_added":return _d(this._delegate,se,_e),d;case"child_removed":return zl(this._delegate,se,_e),d;case"child_changed":return tu(this._delegate,se,_e),d;case"child_moved":return Zc(this._delegate,se,_e),d;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(c,d,_){if((0,q.Dv)("Query.off",0,3,arguments.length),function(p,c,d){if(void 0!==c)switch(c){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,c),(0,q.Wj)("Query.off","callback",d,!0),(0,q.lb)("Query.off","context",_,!0),d){const T=()=>{};T.userCallback=d,T.context=_,uh(this._delegate,c,T)}else uh(this._delegate,c)}get(){return pf(this._delegate).then(c=>new Ma(this.database,c))}once(c,d,_,T){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",d,!0);const O=ya.getCancelAndContextArgs_("Query.once",_,T),z=new q.BH,se=(xe,It)=>{const Ct=new Ma(this.database,xe);d&&d.call(O.context,Ct,It),z.resolve(Ct)};se.userCallback=d,se.context=O.context;const _e=xe=>{O.cancel&&O.cancel.call(O.context,xe),z.reject(xe)};switch(c){case"value":uu(this._delegate,se,_e,{onlyOnce:!0});break;case"child_added":_d(this._delegate,se,_e,{onlyOnce:!0});break;case"child_removed":zl(this._delegate,se,_e,{onlyOnce:!0});break;case"child_changed":tu(this._delegate,se,_e,{onlyOnce:!0});break;case"child_moved":Zc(this._delegate,se,_e,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return z.promise}limitToFirst(c){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new ya(this.database,cu(this._delegate,function mf(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wc(p)}(c)))}limitToLast(c){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new ya(this.database,cu(this._delegate,function Ic(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dh(p)}(c)))}orderByChild(c){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new ya(this.database,cu(this._delegate,function yf(p){if("$key"===p)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===p)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===p)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ou("orderByChild","path",p,!1),new wu(p)}(c)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new ya(this.database,cu(this._delegate,function vf(){return new _f}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new ya(this.database,cu(this._delegate,function Yu(){return new xl}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new ya(this.database,cu(this._delegate,function Ef(){return new hh}()))}startAt(c=null,d){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new ya(this.database,cu(this._delegate,function Zu(p=null,c){return rl("startAt","key",c,!0),new Ec(p,c)}(c,d)))}startAfter(c=null,d){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new ya(this.database,cu(this._delegate,function gf(p,c){return rl("startAfter","key",c,!0),new vd(p,c)}(c,d)))}endAt(c=null,d){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new ya(this.database,cu(this._delegate,function Pp(p,c){return rl("endAt","key",c,!0),new Yc(p,c)}(c,d)))}endBefore(c=null,d){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new ya(this.database,cu(this._delegate,function co(p,c){return rl("endBefore","key",c,!0),new ch(p,c)}(c,d)))}equalTo(c,d){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new ya(this.database,cu(this._delegate,function Jg(p,c){return rl("equalTo","key",c,!0),new wf(p,c)}(c,d)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(c){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(c instanceof ya))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(c._delegate)}static getCancelAndContextArgs_(c,d,_){const T={cancel:void 0,context:void 0};if(d&&_)T.cancel=d,(0,q.Wj)(c,"cancel",T.cancel,!0),T.context=_,(0,q.lb)(c,"context",T.context,!0);else if(d)if("object"==typeof d&&null!==d)T.context=d;else{if("function"!=typeof d)throw new Error((0,q.gK)(c,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=d}return T}get ref(){return new ml(this.database,new Xs(this._delegate._repo,this._delegate._path))}}class ml extends ya{constructor(c,d){super(c,new Ns(d._repo,d._path,new dn,!1)),this.database=c,this._delegate=d}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(c){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof c&&(c=String(c)),new ml(this.database,Nl(this._delegate,c))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const c=this._delegate.parent;return c?new ml(this.database,c):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new ml(this.database,this._delegate.root)}set(c,d){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",d,!0);const _=_c(this._delegate,c);return d&&_.then(()=>d(null),T=>d(T)),_}update(c,d){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(c)){const T={};for(let O=0;O<c.length;++O)T[""+O]=c[O];c=T,Df("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ss("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",d,!0);const _=yd(this._delegate,c);return d&&_.then(()=>d(null),T=>d(T)),_}setWithPriority(c,d,_){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",_,!0);const T=function vc(p,c,d){if(ss("setWithPriority",p._path),qa("setWithPriority",c,p._path,!1),su("setWithPriority",d,!1),".length"===p.key||".keys"===p.key)throw"setWithPriority failed: "+p.key+" is a read-only object.";const _=new q.BH;return Ml(p._repo,p._path,c,d,_.wrapCallback(()=>{})),_.promise}(this._delegate,c,d);return _&&T.then(()=>_(null),O=>_(O)),T}remove(c){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",c,!0);const d=function qu(p){return ss("remove",p._path),_c(p,null)}(this._delegate);return c&&d.then(()=>c(null),_=>c(_)),d}transaction(c,d,_){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",c,!1),(0,q.Wj)("Reference.transaction","onComplete",d,!0),function(p,c,d,_){if(void 0!==d&&"boolean"!=typeof d)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,_);const T=function Op(p,c,d){var _;if(p=(0,q.m9)(p),ss("Reference.transaction",p._path),".length"===p.key||".keys"===p.key)throw"Reference.transaction failed: "+p.key+" is a read-only object.";const T=null===(_=d?.applyLocally)||void 0===_||_,O=new q.BH,se=uu(p,()=>{});return function pc(p,c,d,_,T,O){Pl(p,"transaction on "+c);const z={path:c,update:d,onComplete:_,status:null,order:Ye(),applyLocally:O,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=Gu(p,c,void 0);z.currentInputSnapshot=se;const _e=z.update(se.val());if(void 0===_e)z.unwatcher(),z.currentOutputSnapshotRaw=null,z.currentOutputSnapshotResolved=null,z.onComplete&&z.onComplete(null,!1,z.currentInputSnapshot);else{Sa("transaction failed: Data returned ",_e,z.path),z.status=0;const xe=fs(p.transactionQueueTree_,c),It=so(xe)||[];let Ct;It.push(z),oo(xe,It),"object"==typeof _e&&null!==_e&&(0,q.r3)(_e,".priority")?(Ct=(0,q.DV)(_e,".priority"),(0,q.hu)(fl(Ct),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ct=(Je(p.serverSyncTree_,c)||ar.EMPTY_NODE).getPriority().val();const Ft=an(p),En=Ui(_e,Ct),Zn=hn(En,se,Ft);z.currentOutputSnapshotRaw=En,z.currentOutputSnapshotResolved=Zn,z.currentWriteId=To(p);const Mi=Io(p.serverSyncTree_,c,Zn,z.currentWriteId,z.applyLocally);ia(p.eventQueue_,c,Mi),pl(p,p.transactionQueueTree_)}}(p._repo,p._path,c,(_e,xe,It)=>{let Ct=null;_e?O.reject(_e):(Ct=new Hl(It,new Xs(p._repo,p._path),Fr),O.resolve(new xp(xe,Ct)))},se,T),O.promise}(this._delegate,c,{applyLocally:_}).then(O=>new Qu(O.committed,new Ma(this.database,O.snapshot)));return d&&T.then(O=>d(null,O.committed,O.snapshot),O=>d(O,!1,null)),T}setPriority(c,d){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",d,!0);const _=function md(p,c){p=(0,q.m9)(p),ss("setPriority",p._path),su("setPriority",c,!1);const d=new q.BH;return Ml(p._repo,jr(p._path,".priority"),c,null,d.wrapCallback(()=>{})),d.promise}(this._delegate,c);return d&&_.then(()=>d(null),T=>d(T)),_}push(c,d){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",d,!0);const _=function yc(p,c){p=(0,q.m9)(p),ss("push",p._path),qa("push",c,p._path,!0);const d=vt(p._repo),_=rr(d),T=Nl(p,_),O=Nl(p,_);let z;return z=null!=c?_c(O,c).then(()=>O):Promise.resolve(O),T.then=z.then.bind(z),T.catch=z.then.bind(z,void 0),T}(this._delegate,c),T=_.then(z=>new ml(this.database,z));d&&T.then(()=>d(null),z=>d(z));const O=new ml(this.database,_);return O.then=T.then.bind(T),O.catch=T.catch.bind(T,void 0),O}onDisconnect(){return ss("Reference.onDisconnect",this._delegate._path),new Tf(new Wu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Cu{constructor(c,d){this._delegate=c,this.app=d,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Dd,forceLongPolling:Dc}}useEmulator(c,d,_={}){!function Qc(p,c,d,_={}){(p=(0,q.m9)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&nr("Cannot call useEmulator() after instance has already been initialized.");const T=p._repoInternal;let O;if(T.repoInfo_.nodeAdmin)_.mockUserToken&&nr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),O=new Cn(Cn.OWNER);else if(_.mockUserToken){const z="string"==typeof _.mockUserToken?_.mockUserToken:(0,q.Sg)(_.mockUserToken,p.app.options.projectId);O=new Cn(z)}!function If(p,c,d,_){p.repoInfo_=new oe(`${c}:${d}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams,!0),_&&(p.authTokenProvider_=_)}(T,c,d,O)}(this._delegate,c,d,_)}ref(c){if((0,q.Dv)("database.ref",0,1,arguments.length),c instanceof ml){const d=Ku(this._delegate,c.toString());return new ml(this,d)}{const d=eu(this._delegate,c);return new ml(this,d)}}refFromURL(c){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const _=Ku(this._delegate,c);return new ml(this,_)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function gh(p){(p=(0,q.m9)(p))._checkNotDeleted("goOffline"),sl(p._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function Td(p){(p=(0,q.m9)(p))._checkNotDeleted("goOnline"),function au(p){p.persistentConnection_&&p.persistentConnection_.resume(X)}(p._repo)}(this._delegate)}}Cu.ServerValue={TIMESTAMP:function mh(){return em}(),increment:p=>function Cf(p){return{".sv":{increment:p}}}(p)};var _h=Object.freeze({__proto__:null,initStandalone:function Sf({app:p,url:c,version:d,customAuthImpl:_,namespace:T,nodeAdmin:O=!1}){Vt(d);const z=new rt.zt("auth-internal",new rt.H0("database-standalone"));return z.setComponent(new rt.wA("auth-internal",()=>_,"PRIVATE")),{instance:new Cu(Ed(p,z,void 0,c,O),p),namespace:T}}});const Fp=Cu.ServerValue;!function nm(p){p.INTERNAL.registerComponent(new rt.wA("database-compat",(c,{instanceIdentifier:d})=>{const _=c.getProvider("app-compat").getImmediate(),T=c.getProvider("database").getImmediate({identifier:d});return new Cu(T,_)},"PUBLIC").setServiceProps({Reference:ml,Query:ya,Database:Cu,DataSnapshot:Ma,enableLogging:Sd,INTERNAL:_h,ServerValue:Fp}).setMultipleInstances(!0)),p.registerVersion("@firebase/database-compat","0.3.4")}(Oe.Z);var Wl=G(1205),Xu=G(2313),Ad=G(9260);function Eh(p){return null==p}function wh(p){return"function"==typeof p.set}function Ih(p,c){return wh(c)?c:p.ref(c)}function Rd(p,c){if(function bf(p){return"string"==typeof p}(p))return c.stringCase();if(wh(p))return c.firebaseCase();if(function vh(p){return"function"==typeof p.exportVal}(p))return c.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof p)}function Ju(p,c,d="on",_=te.z){return new j.y(T=>{let O=null;return O=p[d](c,(z,se)=>{_.schedule(()=>{T.next({snapshot:z,prevKey:se})}),"once"===d&&_.schedule(()=>T.complete())},z=>{_.schedule(()=>T.error(z))}),"on"===d?{unsubscribe(){null!=O&&p.off(c,O)}}:{unsubscribe(){}}}).pipe((0,Fe.U)(T=>{const{snapshot:O,prevKey:z}=T;let se=null;return O.exists()&&(se=O.key),{type:c,payload:O,prevKey:z,key:se}}),(0,$e.B)())}function Md(p,c){const d=p.length;for(let _=0;_<d;_++)if(p[_].payload.key===c)return _;return-1}function Fu(p,c){const{payload:d,prevKey:_,key:T}=c,O=Md(p,T),z=function ku(p,c){if(Eh(c))return 0;{const d=Md(p,c);return-1===d?p.length:d+1}}(p,_);switch(c.type){case"value":if(c.payload&&c.payload.exists()){let se=null;c.payload.forEach(_e=>{const xe={payload:_e,type:"value",prevKey:se,key:_e.key};return se=_e.key,p=[...p,xe],!1})}return p;case"child_added":if(O>-1){const se=p[O-1];(se&&se.key||null)!==_&&(p=p.filter(_e=>_e.payload.key!==d.key)).splice(z,0,c)}else{if(null==_)return[c,...p];(p=p.slice()).splice(z,0,c)}return p;case"child_removed":return p.filter(se=>se.payload.key!==d.key);case"child_changed":return p.map(se=>se.payload.key===T?c:se);case"child_moved":if(O>-1){const se=p.splice(O,1)[0];return(p=p.slice()).splice(z,0,se),p}return p;default:return p}}function Pd(p){return(Eh(p)||0===p.length)&&(p=["child_added","child_removed","child_changed","child_moved"]),p}function Ch(p,c,d){return function rm(p,c,d){return Ju(p,"value","once",d).pipe((0,ye.w)(_=>{const T=[(0,Pe.of)(_)];return c.forEach(O=>T.push(Ju(p,O,"on",d))),(0,Ce.T)(...T).pipe((0,qe.R)(Fu,[]))}),(0,ce.x)())}(p,c=Pd(c),d)}function Du(p,c,d){const _=(c=Pd(c)).map(T=>Ju(p,T,"on",d));return(0,Ce.T)(..._)}function Dh(p,c){return function(_,T){return Rd(_,{stringCase:()=>p.child(_)[c](T),firebaseCase:()=>_[c](T),snapshotCase:()=>_.ref[c](T)})}}function bc(p){return function(d){return d?Rd(d,{stringCase:()=>p.child(d).remove(),firebaseCase:()=>d.remove(),snapshotCase:()=>d.ref.remove()}):p.remove()}}function yl(p,c){return function(){return Ju(p,"value","on",c)}}const ec=new v.OlP("angularfire2.realtimeDatabaseURL"),Af=new v.OlP("angularfire2.database.use-emulator");let Od=(()=>{class p{constructor(d,_,T,O,z,se,_e,xe,It,Ct,Ft,En,Zn,Mi,sa){this.schedulers=se;const hu=_e,fu=(0,_t.on)(d,z,_);xe&&(0,Wl.nw)(fu,z,It,Ft,En,Zn,Ct,Mi),this.database=(0,_t.cc)(`${fu.name}.database.${T}`,"AngularFireDatabase",fu.name,()=>{const Ac=z.runOutsideAngular(()=>fu.database(T||void 0));return hu&&Ac.useEmulator(...hu),Ac},[hu])}list(d,_){const T=this.schedulers.ngZone.runOutsideAngular(()=>Ih(this.database,d));let O=T;return _&&(O=_(T)),function du(p,c){const d=c.schedulers.outsideAngular,_=c.schedulers.ngZone.run(()=>p.ref);return{query:p,update:Dh(_,"update"),set:Dh(_,"set"),push:T=>_.push(T),remove:bc(_),snapshotChanges:T=>Ch(p,T,d).pipe(Et.iC),stateChanges:T=>Du(p,T,d).pipe(Et.iC),auditTrail:T=>function Tu(p,c,d){return function xd(p,c,d){return function Nd(p,c){return Ju(p,"value","on",c).pipe((0,Fe.U)(d=>{let _;return d.payload.forEach(T=>(_=T.key,!1)),{data:d,lastKeyToLoad:_}}))}(p,d).pipe(function ot(...p){const c=(0,jt.jO)(p);return(0,ge.e)((d,_)=>{const T=p.length,O=new Array(T);let z=p.map(()=>!1),se=!1;for(let _e=0;_e<T;_e++)(0,at.Xf)(p[_e]).subscribe((0,Ne.x)(_,xe=>{O[_e]=xe,!se&&!z[_e]&&(z[_e]=!0,(se=z.every(gt.y))&&(z=null))},Pt.Z));d.subscribe((0,Ne.x)(_,_e=>{if(se){const xe=[_e,...O];_.next(c?c(...xe):xe)}}))})}(c),(0,Fe.U)(([T,O])=>{const z=T.lastKeyToLoad,se=O.map(_e=>_e.key);return{actions:O,lastKeyToLoad:z,loadedKeys:se}}),function mt(p){return(0,ge.e)((c,d)=>{let _=!1,T=0;c.subscribe((0,Ne.x)(d,O=>(_||(_=!p(O,T++)))&&d.next(O)))})}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,Fe.U)(T=>T.actions))}(p,Du(p,c).pipe((0,qe.R)((T,O)=>[...T,O],[])),d)}(p,T,d).pipe(Et.iC),valueChanges:(T,O)=>Ch(p,T,d).pipe((0,Fe.U)(se=>se.map(_e=>O&&O.idField?Object.assign(Object.assign({},_e.payload.val()),{[O.idField]:_e.key}):_e.payload.val())),Et.iC)}}(O,this)}object(d){return function Lu(p,c){return{query:p,snapshotChanges:()=>yl(p,c.schedulers.outsideAngular)().pipe(Et.iC),update:d=>p.ref.update(d),set:d=>p.ref.set(d),remove:()=>p.ref.remove(),valueChanges:()=>yl(p,c.schedulers.outsideAngular)().pipe(Et.iC,(0,Fe.U)(_=>_.payload.exists()?_.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ih(this.database,d)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return p.\u0275fac=function(d){return new(d||p)(v.LFG(_t.Dh),v.LFG(_t.xv,8),v.LFG(ec,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Et.HU),v.LFG(Af,8),v.LFG(Wl.zQ,8),v.LFG(Wl.Qv,8),v.LFG(Wl.L6,8),v.LFG(Wl._Q,8),v.LFG(Wl.rT,8),v.LFG(Wl.lh,8),v.LFG(Wl.f7,8),v.LFG(Xu.nm,8))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"any"}),p})(),kd=(()=>{class p{constructor(){Ad.Z.registerVersion("angularfire",Et.q4.full,"rtdb-compat")}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275mod=v.oAB({type:p}),p.\u0275inj=v.cJS({providers:[Od]}),p})()},2011:(rn,tt,G)=>{G.d(tt,{Dh:()=>ye,GT:()=>Fe,cc:()=>gt,hO:()=>at,on:()=>ce,pX:()=>Ce,xv:()=>qe});var v=G(4650),te=G(9260),j=G(4976);rn=G.hmd(rn);const Pe=["ngOnDestroy"],Ce=(mt,Et,_t,Ze={})=>new Proxy(mt,{get:(Oe,rt)=>_t.runOutsideAngular(()=>{var Dt;if(mt[rt])return!(null===(Dt=Ze?.spy)||void 0===Dt)&&Dt.get&&Ze.spy.get(rt,mt[rt]),mt[rt];if(Pe.indexOf(rt)>-1)return()=>{};const lt=Et.toPromise().then(q=>{const Bt=q&&q[rt];return"function"==typeof Bt?Bt.bind(q):Bt&&Bt.then?Bt.then(fn=>_t.run(()=>fn)):_t.run(()=>Bt)});return new Proxy(()=>{},{get:(q,Bt)=>lt[Bt],apply:(q,Bt,fn)=>lt.then(Ut=>{var Lt;const Vt=Ut&&Ut(...fn);return!(null===(Lt=Ze?.spy)||void 0===Lt)&&Lt.apply&&Ze.spy.apply(rt,fn,Vt),Vt})})})}),Fe=(mt,Et)=>{Et.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Ze=>{Object.defineProperty(mt.prototype,Ze,Object.getOwnPropertyDescriptor(_t.prototype||_t,Ze))})})};class $e{constructor(Et){return Et}}const ye=new v.OlP("angularfire2.app.options"),qe=new v.OlP("angularfire2.app.name");function ce(mt,Et,_t){const Oe="object"==typeof _t&&_t||{};Oe.name=Oe.name||"string"==typeof _t&&_t||"[DEFAULT]";const Dt=te.Z.apps.filter(lt=>lt&&lt.name===Oe.name)[0]||Et.runOutsideAngular(()=>te.Z.initializeApp(mt,Oe));try{JSON.stringify(mt)!==JSON.stringify(Dt.options)&&ge("error",`${Dt.name} Firebase App already initialized with different options${rn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new $e(Dt)}const ge=(mt,...Et)=>{(0,v.X6Q)()&&typeof console<"u"&&console[mt](...Et)},Ne={provide:$e,useFactory:ce,deps:[ye,v.R0b,[new v.FiY,qe]]};let at=(()=>{class mt{constructor(_t){te.Z.registerVersion("angularfire",j.q4.full,"core"),te.Z.registerVersion("angularfire",j.q4.full,"app-compat"),te.Z.registerVersion("angular",v.q4F.full,_t.toString())}static initializeApp(_t,Ze){return{ngModule:mt,providers:[{provide:ye,useValue:_t},{provide:qe,useValue:Ze}]}}}return mt.\u0275fac=function(_t){return new(_t||mt)(v.LFG(v.Lbi))},mt.\u0275mod=v.oAB({type:mt}),mt.\u0275inj=v.cJS({providers:[Ne]}),mt})();function gt(mt,Et,_t,Ze,Oe){const[,rt,Dt]=globalThis.\u0275AngularfireInstanceCache.find(lt=>lt[0]===mt)||[];if(rt)return function Pt(mt,Et){try{return mt.toString()===Et.toString()}catch{return mt===Et}}(Oe,Dt)||(ot("error",`${Et} was already initialized on the ${_t} Firebase App with different settings.${jt?" You may need to reload as Firebase is not HMR aware.":""}`),ot("warn",{is:Oe,was:Dt})),rt;{const lt=Ze();return globalThis.\u0275AngularfireInstanceCache.push([mt,lt,Oe]),lt}}const jt=!!rn.hot,ot=(mt,...Et)=>{(0,v.X6Q)()&&typeof console<"u"&&console[mt](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7512:(rn,tt,G)=>{G.d(tt,{Ke:()=>ye,Jt:()=>lt,cF:()=>Bt,Vq:()=>mt,iH:()=>Vt,B0:()=>Sn});var v=G(4976),te=G(4650),j=G(3692),Pe=G(7158),Ce=G(259),Fe=G(2313),$e=G(6961);class ye{constructor(je){return je}}const qe="storage",Ne=new te.OlP("angularfire2.storage-instances");function gt(Be){return(je,Ye)=>{const ke=je.runOutsideAngular(()=>Be(Ye));return new ye(ke)}}const Pt={provide:class ce{constructor(){return(0,v.vb)(qe)}},deps:[[new te.FiY,Ne]]},jt={provide:ye,useFactory:function at(Be,je){const Ye=(0,v.JM)(qe,Be,je);return Ye&&new ye(Ye)},deps:[[new te.FiY,Ne],j.Ot]};let ot=(()=>{class Be{constructor(){(0,Ce.KN)("angularfire",v.q4.full,"gcs")}}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275mod=te.oAB({type:Be}),Be.\u0275inj=te.cJS({providers:[jt,Pt]}),Be})();function mt(Be,...je){return{ngModule:ot,providers:[{provide:Ne,useFactory:gt(Be),multi:!0,deps:[te.R0b,te.zs3,v.HU,j.z6,[new te.FiY,Pe.dh],[new te.FiY,Fe.nm],...je]}]}}const lt=(0,v.u3)($e.Jt,!0),Bt=(0,v.u3)($e.cF,!0),Vt=(0,v.u3)($e.iH,!0),Sn=(0,v.u3)($e.B0,!0)},4976:(rn,tt,G)=>{G.d(tt,{q4:()=>ga,iC:()=>As,fc:()=>ss,HU:()=>su,vb:()=>qa,JM:()=>fl,u3:()=>ia});var v=G(4650),te=G(259),j=G(5861),Pe=G(6881),Ce=G(2090),Fe=G(4859),$e=G(1877);const ye=(A,k)=>k.some(X=>A instanceof X);let qe,ce;const at=new WeakMap,gt=new WeakMap,Pt=new WeakMap,jt=new WeakMap,ot=new WeakMap;let _t={get(A,k,X){if(A instanceof IDBTransaction){if("done"===k)return gt.get(A);if("objectStoreNames"===k)return A.objectStoreNames||Pt.get(A);if("store"===k)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Dt(A[k])},set:(A,k,X)=>(A[k]=X,!0),has:(A,k)=>A instanceof IDBTransaction&&("done"===k||"store"===k)||k in A};function rt(A){return"function"==typeof A?function Oe(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...k){return A.apply(lt(this),k),Dt(at.get(this))}:function(...k){return Dt(A.apply(lt(this),k))}:function(k,...X){const fe=A.call(lt(this),k,...X);return Pt.set(fe,k.sort?k.sort():[k]),Dt(fe)}}(A):(A instanceof IDBTransaction&&function Et(A){if(gt.has(A))return;const k=new Promise((X,fe)=>{const Re=()=>{A.removeEventListener("complete",ze),A.removeEventListener("error",vt),A.removeEventListener("abort",vt)},ze=()=>{X(),Re()},vt=()=>{fe(A.error||new DOMException("AbortError","AbortError")),Re()};A.addEventListener("complete",ze),A.addEventListener("error",vt),A.addEventListener("abort",vt)});gt.set(A,k)}(A),ye(A,function ge(){return qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,_t):A)}function Dt(A){if(A instanceof IDBRequest)return function mt(A){const k=new Promise((X,fe)=>{const Re=()=>{A.removeEventListener("success",ze),A.removeEventListener("error",vt)},ze=()=>{X(Dt(A.result)),Re()},vt=()=>{fe(A.error),Re()};A.addEventListener("success",ze),A.addEventListener("error",vt)});return k.then(X=>{X instanceof IDBCursor&&at.set(X,A)}).catch(()=>{}),ot.set(k,A),k}(A);if(jt.has(A))return jt.get(A);const k=rt(A);return k!==A&&(jt.set(A,k),ot.set(k,A)),k}const lt=A=>ot.get(A),fn=["get","getKey","getAll","getAllKeys","count"],Ut=["put","add","delete","clear"],Lt=new Map;function Vt(A,k){if(!(A instanceof IDBDatabase)||k in A||"string"!=typeof k)return;if(Lt.get(k))return Lt.get(k);const X=k.replace(/FromIndex$/,""),fe=k!==X,Re=Ut.includes(X);if(!(X in(fe?IDBIndex:IDBObjectStore).prototype)||!Re&&!fn.includes(X))return;const ze=function(){var vt=(0,j.Z)(function*(an,...on){const Hn=this.transaction(an,Re?"readwrite":"readonly");let Mr=Hn.store;return fe&&(Mr=Mr.index(on.shift())),(yield Promise.all([Mr[X](...on),Re&&Hn.done]))[0]});return function(on){return vt.apply(this,arguments)}}();return Lt.set(k,ze),ze}!function Ze(A){_t=A(_t)}(A=>({...A,get:(k,X,fe)=>Vt(k,X)||A.get(k,X,fe),has:(k,X)=>!!Vt(k,X)||A.has(k,X)}));const ai="@firebase/installations",Er="0.6.4",Sn=1e4,bn=`w:${Er}`,Be="FIS_v2",je="https://firebaseinstallations.googleapis.com/v1",Ye=36e5,$t=new Ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Zt(A){return A instanceof Ce.ZR&&A.code.includes("request-failed")}function cn({projectId:A}){return`${je}/projects/${A}/installations`}function yn(A){return{token:A.token,requestStatus:2,expiresIn:fr(A.expiresIn),creationTime:Date.now()}}function zn(A,k){return nr.apply(this,arguments)}function nr(){return(nr=(0,j.Z)(function*(A,k){const fe=(yield k.json()).error;return $t.create("request-failed",{requestName:A,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Fn({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Gt(A){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,j.Z)(function*(A){const k=yield A();return k.status>=500&&k.status<600?A():k})).apply(this,arguments)}function fr(A){return Number(A.replace("s","000"))}function Yt(){return(Yt=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:k},{fid:X}){const fe=cn(A),Re=Fn(A),ze=k.getImmediate({optional:!0});if(ze){const Hn=yield ze.getHeartbeatsHeader();Hn&&Re.append("x-firebase-client",Hn)}const an={method:"POST",headers:Re,body:JSON.stringify({fid:X,authVersion:Be,appId:A.appId,sdkVersion:bn})},on=yield Gt(()=>fetch(fe,an));if(on.ok){const Hn=yield on.json();return{fid:Hn.fid||X,registrationStatus:2,refreshToken:Hn.refreshToken,authToken:yn(Hn.authToken)}}throw yield zn("Create Installation",on)})).apply(this,arguments)}function In(A){return new Promise(k=>{setTimeout(k,A)})}const qr=/^[cdef][\w-]{21}$/,Qn="";function Ki(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const X=function Ln(A){return function gi(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return qr.test(X)?X:Qn}catch{return Qn}}function xn(A){return`${A.appName}!${A.appId}`}const sn=new Map;function Rn(A,k){const X=xn(A);Br(X,k),function ui(A,k){const X=function ci(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=A=>{Br(A.data.key,A.data.fid)}),Lr}();X&&X.postMessage({key:A,fid:k}),function Xn(){0===sn.size&&Lr&&(Lr.close(),Lr=null)}()}(X,k)}function Br(A,k){const X=sn.get(A);if(X)for(const fe of X)fe(k)}let Lr=null;const Nr="firebase-installations-database",Cn=1,Qt="firebase-installations-store";let qt=null;function ri(){return qt||(qt=function q(A,k,{blocked:X,upgrade:fe,blocking:Re,terminated:ze}={}){const vt=indexedDB.open(A,k),an=Dt(vt);return fe&&vt.addEventListener("upgradeneeded",on=>{fe(Dt(vt.result),on.oldVersion,on.newVersion,Dt(vt.transaction))}),X&&vt.addEventListener("blocked",()=>X()),an.then(on=>{ze&&on.addEventListener("close",()=>ze()),Re&&on.addEventListener("versionchange",()=>Re())}).catch(()=>{}),an}(Nr,Cn,{upgrade:(A,k)=>{0===k&&A.createObjectStore(Qt)}})),qt}function Vr(A,k){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,j.Z)(function*(A,k){const X=xn(A),Re=(yield ri()).transaction(Qt,"readwrite"),ze=Re.objectStore(Qt),vt=yield ze.get(X);return yield ze.put(k,X),yield Re.done,(!vt||vt.fid!==k.fid)&&Rn(A,k.fid),k})).apply(this,arguments)}function mi(A){return qi.apply(this,arguments)}function qi(){return(qi=(0,j.Z)(function*(A){const k=xn(A),fe=(yield ri()).transaction(Qt,"readwrite");yield fe.objectStore(Qt).delete(k),yield fe.done})).apply(this,arguments)}function Ni(A,k){return yi.apply(this,arguments)}function yi(){return(yi=(0,j.Z)(function*(A,k){const X=xn(A),Re=(yield ri()).transaction(Qt,"readwrite"),ze=Re.objectStore(Qt),vt=yield ze.get(X),an=k(vt);return void 0===an?yield ze.delete(X):yield ze.put(an,X),yield Re.done,an&&(!vt||vt.fid!==an.fid)&&Rn(A,an.fid),an})).apply(this,arguments)}function be(A){return we.apply(this,arguments)}function we(){return we=(0,j.Z)(function*(A){let k;const X=yield Ni(A.appConfig,fe=>{const Re=function oe(A){return Le(A||{fid:Ki(),registrationStatus:0})}(fe),ze=function he(A,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject($t.create("app-offline"))};const X={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},fe=function ne(A,k){return Se.apply(this,arguments)}(A,X);return{installationEntry:X,registrationPromise:fe}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:me(A)}:{installationEntry:k}}(A,Re);return k=ze.registrationPromise,ze.installationEntry});return X.fid===Qn?{installationEntry:yield k}:{installationEntry:X,registrationPromise:k}}),we.apply(this,arguments)}function Se(){return Se=(0,j.Z)(function*(A,k){try{const X=yield function Wn(A,k){return Yt.apply(this,arguments)}(A,k);return Vr(A.appConfig,X)}catch(X){throw Zt(X)&&409===X.customData.serverCode?yield mi(A.appConfig):yield Vr(A.appConfig,{fid:k.fid,registrationStatus:0}),X}}),Se.apply(this,arguments)}function me(A){return ve.apply(this,arguments)}function ve(){return(ve=(0,j.Z)(function*(A){let k=yield pe(A.appConfig);for(;1===k.registrationStatus;)yield In(100),k=yield pe(A.appConfig);if(0===k.registrationStatus){const{installationEntry:X,registrationPromise:fe}=yield be(A);return fe||X}return k})).apply(this,arguments)}function pe(A){return Ni(A,k=>{if(!k)throw $t.create("installation-not-found");return Le(k)})}function Le(A){return function nt(A){return 1===A.registrationStatus&&A.registrationTime+Sn<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function mn(){return(mn=(0,j.Z)(function*({appConfig:A,heartbeatServiceProvider:k},X){const fe=function Dn(A,{fid:k}){return`${cn(A)}/${k}/authTokens:generate`}(A,X),Re=function Sr(A,{refreshToken:k}){const X=Fn(A);return X.append("Authorization",function br(A){return`${Be} ${A}`}(k)),X}(A,X),ze=k.getImmediate({optional:!0});if(ze){const Hn=yield ze.getHeartbeatsHeader();Hn&&Re.append("x-firebase-client",Hn)}const an={method:"POST",headers:Re,body:JSON.stringify({installation:{sdkVersion:bn,appId:A.appId}})},on=yield Gt(()=>fetch(fe,an));if(on.ok)return yn(yield on.json());throw yield zn("Generate Auth Token",on)})).apply(this,arguments)}function xr(A){return Li.apply(this,arguments)}function Li(){return Li=(0,j.Z)(function*(A,k=!1){let X;const fe=yield Ni(A.appConfig,ze=>{if(!ir(ze))throw $t.create("not-registered");const vt=ze.authToken;if(!k&&function gn(A){return 2===A.requestStatus&&!function Cr(A){const k=Date.now();return k<A.creationTime||A.creationTime+A.expiresIn<k+Ye}(A)}(vt))return ze;if(1===vt.requestStatus)return X=function ht(A,k){return Qe.apply(this,arguments)}(A,k),ze;{if(!navigator.onLine)throw $t.create("app-offline");const an=function vr(A){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:k})}(ze);return X=function pn(A,k){return Pn.apply(this,arguments)}(A,an),an}});return X?yield X:fe.authToken}),Li.apply(this,arguments)}function Qe(){return(Qe=(0,j.Z)(function*(A,k){let X=yield xt(A.appConfig);for(;1===X.authToken.requestStatus;)yield In(100),X=yield xt(A.appConfig);const fe=X.authToken;return 0===fe.requestStatus?xr(A,k):fe})).apply(this,arguments)}function xt(A){return Ni(A,k=>{if(!ir(k))throw $t.create("not-registered");return function Zi(A){return 1===A.requestStatus&&A.requestTime+Sn<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function Pn(){return Pn=(0,j.Z)(function*(A,k){try{const X=yield function St(A,k){return mn.apply(this,arguments)}(A,k),fe=Object.assign(Object.assign({},k),{authToken:X});return yield Vr(A.appConfig,fe),X}catch(X){if(!Zt(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const fe=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Vr(A.appConfig,fe)}else yield mi(A.appConfig);throw X}}),Pn.apply(this,arguments)}function ir(A){return void 0!==A&&2===A.registrationStatus}function Js(){return(Js=(0,j.Z)(function*(A){const k=A,{installationEntry:X,registrationPromise:fe}=yield be(k);return fe?fe.catch(console.error):xr(k).catch(console.error),X.fid})).apply(this,arguments)}function Rs(){return Rs=(0,j.Z)(function*(A,k=!1){const X=A;return yield function Vi(A){return Kt.apply(this,arguments)}(X),(yield xr(X,k)).token}),Rs.apply(this,arguments)}function Kt(){return(Kt=(0,j.Z)(function*(A){const{registrationPromise:k}=yield be(A);k&&(yield k)})).apply(this,arguments)}function Ue(A){return $t.create("missing-app-config-values",{valueName:A})}const Ve="installations",kt=A=>{const k=A.getProvider("app").getImmediate(),X=function Ge(A){if(!A||!A.options)throw Ue("App Configuration");if(!A.name)throw Ue("App Name");const k=["projectId","apiKey","appId"];for(const X of k)if(!A.options[X])throw Ue(X);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(k);return{app:k,appConfig:X,heartbeatServiceProvider:(0,Pe._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},Mn=A=>{const k=A.getProvider("app").getImmediate(),X=(0,Pe._getProvider)(k,Ve).getImmediate();return{getId:()=>function _i(A){return Js.apply(this,arguments)}(X),getToken:Re=>function gr(A){return Rs.apply(this,arguments)}(X,Re)}};(function Bn(){(0,Pe._registerComponent)(new Fe.wA(Ve,kt,"PUBLIC")),(0,Pe._registerComponent)(new Fe.wA("installations-internal",Mn,"PRIVATE"))})(),(0,Pe.registerVersion)(ai,Er),(0,Pe.registerVersion)(ai,Er,"esm2017");const Tn="@firebase/remote-config",Qr=new Ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fo{constructor(k,X,fe,Re){this.client=k,this.storage=X,this.storageCache=fe,this.logger=Re}isCachedDataFresh(k,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-X,Re=fe<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Re}.`),Re}fetch(k){var X=this;return(0,j.Z)(function*(){const[fe,Re]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Re&&X.isCachedDataFresh(k.cacheMaxAgeMillis,fe))return Re;k.eTag=Re&&Re.eTag;const ze=yield X.client.fetch(k),vt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&vt.push(X.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(vt),ze})()}}function ao(A=navigator){return A.languages&&A.languages[0]||A.language}class po{constructor(k,X,fe,Re,ze,vt){this.firebaseInstallations=k,this.sdkVersion=X,this.namespace=fe,this.projectId=Re,this.apiKey=ze,this.appId=vt}fetch(k){var X=this;return(0,j.Z)(function*(){const[fe,Re]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,an={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},on={sdk_version:X.sdkVersion,app_instance_id:fe,app_instance_id_token:Re,app_id:X.appId,language_code:ao()},Hn={method:"POST",headers:an,body:JSON.stringify(on)},Mr=fetch(vt,Hn),Tr=new Promise((Na,ba)=>{k.signal.addEventListener(()=>{const hc=new Error("The operation was aborted.");hc.name="AbortError",ba(hc)})});let To;try{yield Promise.race([Mr,Tr]),To=yield Mr}catch(Na){let ba="fetch-client-network";throw"AbortError"===Na?.name&&(ba="fetch-timeout"),Qr.create(ba,{originalErrorMessage:Na?.message})}let Wo=To.status;const Ml=To.headers.get("ETag")||void 0;let zu,Jl;if(200===To.status){let Na;try{Na=yield To.json()}catch(ba){throw Qr.create("fetch-client-parse",{originalErrorMessage:ba?.message})}zu=Na.entries,Jl=Na.state}if("INSTANCE_STATE_UNSPECIFIED"===Jl?Wo=500:"NO_CHANGE"===Jl?Wo=304:("NO_TEMPLATE"===Jl||"EMPTY_CONFIG"===Jl)&&(zu={}),304!==Wo&&200!==Wo)throw Qr.create("fetch-status",{httpStatus:Wo});return{status:Wo,eTag:Ml,config:zu}})()}}class Gs{constructor(k,X){this.client=k,this.storage=X}fetch(k){var X=this;return(0,j.Z)(function*(){const fe=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(k,fe)})()}attemptFetch(k,{throttleEndTimeMillis:X,backoffCount:fe}){var Re=this;return(0,j.Z)(function*(){yield function zs(A,k){return new Promise((X,fe)=>{const Re=Math.max(k-Date.now(),0),ze=setTimeout(X,Re);A.addEventListener(()=>{clearTimeout(ze),fe(Qr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,X);try{const ze=yield Re.client.fetch(k);return yield Re.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Lo(A){if(!(A instanceof Ce.ZR&&A.customData))return!1;const k=Number(A.customData.httpStatus);return 429===k||500===k||503===k||504===k}(ze))throw ze;const vt={throttleEndTimeMillis:Date.now()+(0,Ce.$s)(fe),backoffCount:fe+1};return yield Re.storage.setThrottleMetadata(vt),Re.attemptFetch(k,vt)}})()}}class Ao{constructor(k,X,fe,Re,ze){this.app=k,this._client=X,this._storageCache=fe,this._storage=Re,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xs(A,k){const X=A.target.error||void 0;return Qr.create(k,{originalErrorMessage:X&&X?.message})}const Ro="app_namespace_store";class ee{constructor(k,X,fe,Re=function Z(){return new Promise((A,k)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=fe=>{k(xs(fe,"storage-open"))},X.onsuccess=fe=>{A(fe.target.result)},X.onupgradeneeded=fe=>{0===fe.oldVersion&&fe.target.result.createObjectStore(Ro,{keyPath:"compositeKey"})}}catch(X){k(Qr.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=k,this.appName=X,this.namespace=fe,this.openDbPromise=Re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var X=this;return(0,j.Z)(function*(){const fe=yield X.openDbPromise;return new Promise((Re,ze)=>{const an=fe.transaction([Ro],"readonly").objectStore(Ro),on=X.createCompositeKey(k);try{const Hn=an.get(on);Hn.onerror=Mr=>{ze(xs(Mr,"storage-get"))},Hn.onsuccess=Mr=>{const Tr=Mr.target.result;Re(Tr?Tr.value:void 0)}}catch(Hn){ze(Qr.create("storage-get",{originalErrorMessage:Hn?.message}))}})})()}set(k,X){var fe=this;return(0,j.Z)(function*(){const Re=yield fe.openDbPromise;return new Promise((ze,vt)=>{const on=Re.transaction([Ro],"readwrite").objectStore(Ro),Hn=fe.createCompositeKey(k);try{const Mr=on.put({compositeKey:Hn,value:X});Mr.onerror=Tr=>{vt(xs(Tr,"storage-set"))},Mr.onsuccess=()=>{ze()}}catch(Mr){vt(Qr.create("storage-set",{originalErrorMessage:Mr?.message}))}})})()}delete(k){var X=this;return(0,j.Z)(function*(){const fe=yield X.openDbPromise;return new Promise((Re,ze)=>{const an=fe.transaction([Ro],"readwrite").objectStore(Ro),on=X.createCompositeKey(k);try{const Hn=an.delete(on);Hn.onerror=Mr=>{ze(xs(Mr,"storage-delete"))},Hn.onsuccess=()=>{Re()}}catch(Hn){ze(Qr.create("storage-delete",{originalErrorMessage:Hn?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Ee{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,j.Z)(function*(){const X=k.storage.getLastFetchStatus(),fe=k.storage.getLastSuccessfulFetchTimestampMillis(),Re=k.storage.getActiveConfig(),ze=yield X;ze&&(k.lastFetchStatus=ze);const vt=yield fe;vt&&(k.lastSuccessfulFetchTimestampMillis=vt);const an=yield Re;an&&(k.activeConfig=an)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function Ot(){return vn.apply(this,arguments)}function vn(){return(vn=(0,j.Z)(function*(){if(!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Me(){(0,Pe._registerComponent)(new Fe.wA("remote-config",function A(k,{instanceIdentifier:X}){const fe=k.getProvider("app").getImmediate(),Re=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Qr.create("registration-window");if(!(0,Ce.hl)())throw Qr.create("indexed-db-unavailable");const{projectId:ze,apiKey:vt,appId:an}=fe.options;if(!ze)throw Qr.create("registration-project-id");if(!vt)throw Qr.create("registration-api-key");if(!an)throw Qr.create("registration-app-id");const on=new ee(an,fe.name,X=X||"firebase"),Hn=new Ee(on),Mr=new $e.Yd(Tn);Mr.logLevel=$e.in.ERROR;const Tr=new po(Re,Pe.SDK_VERSION,X,ze,vt,an),To=new Gs(Tr,on),Wo=new fo(To,on,Hn,Mr),Ml=new Ao(fe,Wo,Hn,on,Mr);return function Is(A){const k=(0,Ce.m9)(A);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(Ml),Ml},"PUBLIC").setMultipleInstances(!0)),(0,Pe.registerVersion)(Tn,"0.4.4"),(0,Pe.registerVersion)(Tn,"0.4.4","esm2017")}();const tn=(A,k)=>k.some(X=>A instanceof X);let er,_r;const di=new WeakMap,Jr=new WeakMap,Rr=new WeakMap,zr=new WeakMap,ds=new WeakMap;let bi={get(A,k,X){if(A instanceof IDBTransaction){if("done"===k)return Jr.get(A);if("objectStoreNames"===k)return A.objectStoreNames||Rr.get(A);if("store"===k)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return rs(A[k])},set:(A,k,X)=>(A[k]=X,!0),has:(A,k)=>A instanceof IDBTransaction&&("done"===k||"store"===k)||k in A};function Yo(A){return"function"==typeof A?function Fr(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ti(){return _r||(_r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...k){return A.apply(Qi(this),k),rs(di.get(this))}:function(...k){return rs(A.apply(Qi(this),k))}:function(k,...X){const fe=A.call(Qi(this),k,...X);return Rr.set(fe,k.sort?k.sort():[k]),rs(fe)}}(A):(A instanceof IDBTransaction&&function Si(A){if(Jr.has(A))return;const k=new Promise((X,fe)=>{const Re=()=>{A.removeEventListener("complete",ze),A.removeEventListener("error",vt),A.removeEventListener("abort",vt)},ze=()=>{X(),Re()},vt=()=>{fe(A.error||new DOMException("AbortError","AbortError")),Re()};A.addEventListener("complete",ze),A.addEventListener("error",vt),A.addEventListener("abort",vt)});Jr.set(A,k)}(A),tn(A,function Hr(){return er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,bi):A)}function rs(A){if(A instanceof IDBRequest)return function pr(A){const k=new Promise((X,fe)=>{const Re=()=>{A.removeEventListener("success",ze),A.removeEventListener("error",vt)},ze=()=>{X(rs(A.result)),Re()},vt=()=>{fe(A.error),Re()};A.addEventListener("success",ze),A.addEventListener("error",vt)});return k.then(X=>{X instanceof IDBCursor&&di.set(X,A)}).catch(()=>{}),ds.set(k,A),k}(A);if(zr.has(A))return zr.get(A);const k=Yo(A);return k!==A&&(zr.set(A,k),ds.set(k,A)),k}const Qi=A=>ds.get(A);function Mo(A,k,{blocked:X,upgrade:fe,blocking:Re,terminated:ze}={}){const vt=indexedDB.open(A,k),an=rs(vt);return fe&&vt.addEventListener("upgradeneeded",on=>{fe(rs(vt.result),on.oldVersion,on.newVersion,rs(vt.transaction))}),X&&vt.addEventListener("blocked",()=>X()),an.then(on=>{ze&&on.addEventListener("close",()=>ze()),Re&&on.addEventListener("versionchange",()=>Re())}).catch(()=>{}),an}function Oi(A,{blocked:k}={}){const X=indexedDB.deleteDatabase(A);return k&&X.addEventListener("blocked",()=>k()),rs(X).then(()=>{})}const go=["get","getKey","getAll","getAllKeys","count"],_s=["put","add","delete","clear"],ar=new Map;function vs(A,k){if(!(A instanceof IDBDatabase)||k in A||"string"!=typeof k)return;if(ar.get(k))return ar.get(k);const X=k.replace(/FromIndex$/,""),fe=k!==X,Re=_s.includes(X);if(!(X in(fe?IDBIndex:IDBObjectStore).prototype)||!Re&&!go.includes(X))return;const ze=function(){var vt=(0,j.Z)(function*(an,...on){const Hn=this.transaction(an,Re?"readwrite":"readonly");let Mr=Hn.store;return fe&&(Mr=Mr.index(on.shift())),(yield Promise.all([Mr[X](...on),Re&&Hn.done]))[0]});return function(on){return vt.apply(this,arguments)}}();return ar.set(k,ze),ze}!function hr(A){bi=A(bi)}(A=>({...A,get:(k,X,fe)=>vs(k,X)||A.get(k,X,fe),has:(k,X)=>!!vs(k,X)||A.has(k,X)}));const Kn="/firebase-messaging-sw.js",aa="/firebase-cloud-messaging-push-scope",Ui="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",la="https://fcmregistrations.googleapis.com/v1",to="google.c.a.c_id",Po="google.c.a.c_l",La="google.c.a.ts",No="google.c.a.e";var x=(()=>{return(A=x||(x={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",x;var A})();function B(A){const k=new Uint8Array(A);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function L(A){const X=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(X),Re=new Uint8Array(fe.length);for(let ze=0;ze<fe.length;++ze)Re[ze]=fe.charCodeAt(ze);return Re}const re="fcm_token_details_db",Xe=5,dn="fcm_token_object_Store";function zi(){return zi=(0,j.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(re))return null;let k=null;return(yield Mo(re,Xe,{upgrade:(fe=(0,j.Z)(function*(Re,ze,vt,an){var on;if(ze<2||!Re.objectStoreNames.contains(dn))return;const Hn=an.objectStore(dn),Mr=yield Hn.index("fcmSenderId").get(A);if(yield Hn.clear(),Mr)if(2===ze){const Tr=Mr;if(!Tr.auth||!Tr.p256dh||!Tr.endpoint)return;k={token:Tr.fcmToken,createTime:null!==(on=Tr.createTime)&&void 0!==on?on:Date.now(),subscriptionOptions:{auth:Tr.auth,p256dh:Tr.p256dh,endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:"string"==typeof Tr.vapidKey?Tr.vapidKey:B(Tr.vapidKey)}}}else if(3===ze){const Tr=Mr;k={token:Tr.fcmToken,createTime:Tr.createTime,subscriptionOptions:{auth:B(Tr.auth),p256dh:B(Tr.p256dh),endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:B(Tr.vapidKey)}}}else if(4===ze){const Tr=Mr;k={token:Tr.fcmToken,createTime:Tr.createTime,subscriptionOptions:{auth:B(Tr.auth),p256dh:B(Tr.p256dh),endpoint:Tr.endpoint,swScope:Tr.swScope,vapidKey:B(Tr.vapidKey)}}}}),function(ze,vt,an,on){return fe.apply(this,arguments)})})).close(),yield Oi(re),yield Oi("fcm_vapid_details_db"),yield Oi("undefined"),function mo(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:k}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}(k)?k:null;var fe}),zi.apply(this,arguments)}const Ws="firebase-messaging-database",Uo=1,Ds="firebase-messaging-store";let Ks=null;function Es(){return Ks||(Ks=Mo(Ws,Uo,{upgrade:(A,k)=>{0===k&&A.createObjectStore(Ds)}})),Ks}function Ps(A){return xo.apply(this,arguments)}function xo(){return xo=(0,j.Z)(function*(A){const k=ul(A),fe=yield(yield Es()).transaction(Ds).objectStore(Ds).get(k);if(fe)return fe;{const Re=yield function Gr(A){return zi.apply(this,arguments)}(A.appConfig.senderId);if(Re)return yield qs(A,Re),Re}}),xo.apply(this,arguments)}function qs(A,k){return yo.apply(this,arguments)}function yo(){return(yo=(0,j.Z)(function*(A,k){const X=ul(A),Re=(yield Es()).transaction(Ds,"readwrite");return yield Re.objectStore(Ds).put(k,X),yield Re.done,k})).apply(this,arguments)}function _o(){return(_o=(0,j.Z)(function*(A){const k=ul(A),fe=(yield Es()).transaction(Ds,"readwrite");yield fe.objectStore(Ds).delete(k),yield fe.done})).apply(this,arguments)}function ul({appConfig:A}){return A.appId}const Ts=new Ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Zs(A,k){return ua.apply(this,arguments)}function ua(){return(ua=(0,j.Z)(function*(A,k){const X=yield da(A),fe=Xo(k),Re={method:"POST",headers:X,body:JSON.stringify(fe)};let ze;try{ze=yield(yield fetch(Va(A.appConfig),Re)).json()}catch(vt){throw Ts.create("token-subscribe-failed",{errorInfo:vt?.toString()})}if(ze.error)throw Ts.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw Ts.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function ca(){return(ca=(0,j.Z)(function*(A,k){const X=yield da(A),fe=Xo(k.subscriptionOptions),Re={method:"PATCH",headers:X,body:JSON.stringify(fe)};let ze;try{ze=yield(yield fetch(`${Va(A.appConfig)}/${k.token}`,Re)).json()}catch(vt){throw Ts.create("token-update-failed",{errorInfo:vt?.toString()})}if(ze.error)throw Ts.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw Ts.create("token-update-no-token");return ze.token})).apply(this,arguments)}function Qa(A,k){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,j.Z)(function*(A,k){const fe={method:"DELETE",headers:yield da(A)};try{const ze=yield(yield fetch(`${Va(A.appConfig)}/${k}`,fe)).json();if(ze.error)throw Ts.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(Re){throw Ts.create("token-unsubscribe-failed",{errorInfo:Re?.toString()})}})).apply(this,arguments)}function Va({projectId:A}){return`${la}/projects/${A}/registrations`}function da(A){return vo.apply(this,arguments)}function vo(){return(vo=(0,j.Z)(function*({appConfig:A,installations:k}){const X=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function Xo({p256dh:A,auth:k,endpoint:X,vapidKey:fe}){const Re={web:{endpoint:X,auth:k,p256dh:A}};return fe!==Ui&&(Re.web.applicationPubKey=fe),Re}const Ea=6048e5;function hs(){return hs=(0,j.Z)(function*(A){const k=yield function wa(A,k){return Ua.apply(this,arguments)}(A.swRegistration,A.vapidKey),X={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:k.endpoint,auth:B(k.getKey("auth")),p256dh:B(k.getKey("p256dh"))},fe=yield Ps(A.firebaseDependencies);if(fe){if(function Ol(A,k){return k.vapidKey===A.vapidKey&&k.endpoint===A.endpoint&&k.auth===A.auth&&k.p256dh===A.p256dh}(fe.subscriptionOptions,X))return Date.now()>=fe.createTime+Ea?function ki(A,k){return Bo.apply(this,arguments)}(A,{token:fe.token,createTime:Date.now(),subscriptionOptions:X}):fe.token;try{yield Qa(A.firebaseDependencies,fe.token)}catch(Re){console.warn(Re)}return $o(A.firebaseDependencies,X)}return $o(A.firebaseDependencies,X)}),hs.apply(this,arguments)}function js(){return js=(0,j.Z)(function*(A){const k=yield Ps(A.firebaseDependencies);k&&(yield Qa(A.firebaseDependencies,k.token),yield function Os(A){return _o.apply(this,arguments)}(A.firebaseDependencies));const X=yield A.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()}),js.apply(this,arguments)}function Bo(){return Bo=(0,j.Z)(function*(A,k){try{const X=yield function hi(A,k){return ca.apply(this,arguments)}(A.firebaseDependencies,k),fe=Object.assign(Object.assign({},k),{token:X,createTime:Date.now()});return yield qs(A.firebaseDependencies,fe),X}catch(X){throw yield function Or(A){return js.apply(this,arguments)}(A),X}}),Bo.apply(this,arguments)}function $o(A,k){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,j.Z)(function*(A,k){const fe={token:yield Zs(A,k),createTime:Date.now(),subscriptionOptions:k};return yield qs(A,fe),fe.token})).apply(this,arguments)}function Ua(){return(Ua=(0,j.Z)(function*(A,k){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:L(k)})})).apply(this,arguments)}function Jo(A){const k={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function ha(A,k){if(!k.notification)return;A.notification={};const X=k.notification.title;X&&(A.notification.title=X);const fe=k.notification.body;fe&&(A.notification.body=fe);const Re=k.notification.image;Re&&(A.notification.image=Re);const ze=k.notification.icon;ze&&(A.notification.icon=ze)}(k,A),function no(A,k){k.data&&(A.data=k.data)}(k,A),function N(A,k){var X,fe,Re,ze,vt;if(!(k.fcmOptions||null!==(X=k.notification)&&void 0!==X&&X.click_action))return;A.fcmOptions={};const an=null!==(Re=null===(fe=k.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==Re?Re:null===(ze=k.notification)||void 0===ze?void 0:ze.click_action;an&&(A.fcmOptions.link=an);const on=null===(vt=k.fcmOptions)||void 0===vt?void 0:vt.analytics_label;on&&(A.fcmOptions.analyticsLabel=on)}(k,A),k}function V(A,k){const X=[];for(let fe=0;fe<A.length;fe++)X.push(A.charAt(fe)),fe<k.length&&X.push(k.charAt(fe));return X.join("")}function Te(A){return Ts.create("missing-app-config-values",{valueName:A})}V("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),V("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ut{constructor(k,X,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Re=function ie(A){if(!A||!A.options)throw Te("App Configuration Object");if(!A.name)throw Te("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:X}=A;for(const fe of k)if(!X[fe])throw Te(fe);return{appName:A.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Re,installations:X,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function bt(A){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,j.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Kn,{scope:aa}),A.swRegistration.update().catch(()=>{})}catch(k){throw Ts.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function dr(){return(dr=(0,j.Z)(function*(A,k){if(!k&&!A.swRegistration&&(yield bt(A)),k||!A.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw Ts.create("invalid-sw-registration");A.swRegistration=k}})).apply(this,arguments)}function Ir(){return(Ir=(0,j.Z)(function*(A,k){k?A.vapidKey=k:A.vapidKey||(A.vapidKey=Ui)})).apply(this,arguments)}function On(){return On=(0,j.Z)(function*(A,k){if(!navigator)throw Ts.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ts.create("permission-blocked");return yield function Ur(A,k){return Ir.apply(this,arguments)}(A,k?.vapidKey),yield function ei(A,k){return dr.apply(this,arguments)}(A,k?.serviceWorkerRegistration),function Ss(A){return hs.apply(this,arguments)}(A)}),On.apply(this,arguments)}function Eo(){return(Eo=(0,j.Z)(function*(A,k,X){const fe=function nn(A){switch(A){case x.NOTIFICATION_CLICKED:return"notification_open";case x.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(k);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:X[to],message_name:X[Po],message_time:X[La],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ks(){return ks=(0,j.Z)(function*(A,k){const X=k.data;if(!X.isFirebaseMessaging)return;A.onMessageHandler&&X.messageType===x.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Jo(X)):A.onMessageHandler.next(Jo(X)));const fe=X.data;(function K(A){return"object"==typeof A&&!!A&&to in A})(fe)&&"1"===fe[No]&&(yield function si(A,k,X){return Eo.apply(this,arguments)}(A,X.messageType,fe))}),ks.apply(this,arguments)}const zt="@firebase/messaging",Mt=A=>{const k=new ut(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function wn(A,k){return ks.apply(this,arguments)}(k,X)),k},bs=A=>{const k=A.getProvider("messaging").getImmediate();return{getToken:fe=>function At(A,k){return On.apply(this,arguments)}(k,fe)}};function kl(){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,j.Z)(function*(){try{yield(0,Ce.eu)()}catch{return!1}return typeof window<"u"&&(0,Ce.hl)()&&(0,Ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ba(){(0,Pe._registerComponent)(new Fe.wA("messaging",Mt,"PUBLIC")),(0,Pe._registerComponent)(new Fe.wA("messaging-internal",bs,"PRIVATE")),(0,Pe.registerVersion)(zt,"0.12.4"),(0,Pe.registerVersion)(zt,"0.12.4","esm2017")}();const lr="analytics",Ca="firebase_id",cl="origin",es=6e4,Gn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pa="https://www.googletagmanager.com/gtag/js",or=new $e.Yd("@firebase/analytics"),Dr=new Ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Xt(A){if(!A.startsWith(Pa)){const k=Dr.create("invalid-gtag-resource",{gtagURL:A});return or.warn(k.message),""}return A}function ta(A){return Promise.all(A.map(k=>k.catch(X=>X)))}function ja(){return(ja=(0,j.Z)(function*(A,k,X,fe,Re,ze){const vt=fe[Re];try{if(vt)yield k[vt];else{const on=(yield ta(X)).find(Hn=>Hn.measurementId===Re);on&&(yield k[on.appId])}}catch(an){or.error(an)}A("config",Re,ze)})).apply(this,arguments)}function fa(){return(fa=(0,j.Z)(function*(A,k,X,fe,Re){try{let ze=[];if(Re&&Re.send_to){let vt=Re.send_to;Array.isArray(vt)||(vt=[vt]);const an=yield ta(X);for(const on of vt){const Hn=an.find(Tr=>Tr.measurementId===on),Mr=Hn&&k[Hn.appId];if(!Mr){ze=[];break}ze.push(Mr)}}0===ze.length&&(ze=Object.values(k)),yield Promise.all(ze),A("event",fe,Re||{})}catch(ze){or.error(ze)}})).apply(this,arguments)}const Il=30,na=new class io{constructor(k={},X=1e3){this.throttleMetadata=k,this.intervalMillis=X}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,X){this.throttleMetadata[k]=X}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function it(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function ti(){return(ti=(0,j.Z)(function*(A){var k;const{appId:X,apiKey:fe}=A,Re={method:"GET",headers:it(fe)},ze=Gn.replace("{app-id}",X),vt=yield fetch(ze,Re);if(200!==vt.status&&304!==vt.status){let an="";try{const on=yield vt.json();null!==(k=on.error)&&void 0!==k&&k.message&&(an=on.error.message)}catch{}throw Dr.create("config-fetch-failed",{httpStatus:vt.status,responseMessage:an})}return vt.json()})).apply(this,arguments)}function Ga(){return(Ga=(0,j.Z)(function*(A,k=na,X){const{appId:fe,apiKey:Re,measurementId:ze}=A.options;if(!fe)throw Dr.create("no-app-id");if(!Re){if(ze)return{measurementId:ze,appId:fe};throw Dr.create("no-api-key")}const vt=k.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},an=new Ql;return setTimeout((0,j.Z)(function*(){an.abort()}),void 0!==X?X:es),ra({appId:fe,apiKey:Re,measurementId:ze},vt,an,k)})).apply(this,arguments)}function ra(A,k,X){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,j.Z)(function*(A,{throttleEndTimeMillis:k,backoffCount:X},fe,Re=na){var ze;const{appId:vt,measurementId:an}=A;try{yield function Da(A,k){return new Promise((X,fe)=>{const Re=Math.max(k-Date.now(),0),ze=setTimeout(X,Re);A.addEventListener(()=>{clearTimeout(ze),fe(Dr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(fe,k)}catch(on){if(an)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${an} provided in the "measurementId" field in the local Firebase config. [${on?.message}]`),{appId:vt,measurementId:an};throw on}try{const on=yield function ls(A){return ti.apply(this,arguments)}(A);return Re.deleteThrottleMetadata(vt),on}catch(on){const Hn=on;if(!function iu(A){if(!(A instanceof Ce.ZR&&A.customData))return!1;const k=Number(A.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Hn)){if(Re.deleteThrottleMetadata(vt),an)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${an} provided in the "measurementId" field in the local Firebase config. [${Hn?.message}]`),{appId:vt,measurementId:an};throw on}const Mr=503===Number(null===(ze=Hn?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,Ce.$s)(X,Re.intervalMillis,Il):(0,Ce.$s)(X,Re.intervalMillis),Tr={throttleEndTimeMillis:Date.now()+Mr,backoffCount:X+1};return Re.setThrottleMetadata(vt,Tr),or.debug(`Calling attemptFetch again in ${Mr} millis`),ra(A,Tr,fe,Re)}}),Ho.apply(this,arguments)}class Ql{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let tl,Xl;function Oo(){return(Oo=(0,j.Z)(function*(A,k,X,fe,Re){if(Re&&Re.global)A("event",X,fe);else{const ze=yield k;A("event",X,Object.assign(Object.assign({},fe),{send_to:ze}))}})).apply(this,arguments)}function W(){return(W=(0,j.Z)(function*(){if(!(0,Ce.hl)())return or.warn(Dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ce.eu)()}catch(A){return or.warn(Dr.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function h(){return h=(0,j.Z)(function*(A,k,X,fe,Re,ze,vt){var an;const on=function za(A){return Ga.apply(this,arguments)}(A);on.then(Wo=>{X[Wo.measurementId]=Wo.appId,A.options.measurementId&&Wo.measurementId!==A.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${Wo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wo=>or.error(Wo)),k.push(on);const Hn=function Io(){return W.apply(this,arguments)}().then(Wo=>{if(Wo)return fe.getId()}),[Mr,Tr]=yield Promise.all([on,Hn]);(function jo(A){const k=window.document.getElementsByTagName("script");for(const X of Object.values(k))if(X.src&&X.src.includes(Pa)&&X.src.includes(A))return X;return null})(ze)||function wo(A,k){const X=function $a(A,k){let X;return window.trustedTypes&&(X=window.trustedTypes.createPolicy(A,k)),X}("firebase-js-sdk-policy",{createScriptURL:Xt}),fe=document.createElement("script"),Re=`${Pa}?l=${A}&id=${k}`;fe.src=X?X?.createScriptURL(Re):Re,fe.async=!0,document.head.appendChild(fe)}(ze,Mr.measurementId),Xl&&(Re("consent","default",Xl),function Dl(A){Xl=A}(void 0)),Re("js",new Date);const To=null!==(an=vt?.config)&&void 0!==an?an:{};return To[cl]="firebase",To.update=!0,null!=Tr&&(To[Ca]=Tr),Re("config",Mr.measurementId,To),tl&&(Re("set",tl),function Tl(A){tl=A}(void 0)),Mr.measurementId}),h.apply(this,arguments)}class f{constructor(k){this.app=k}_delete(){return delete I[this.app.options.appId],Promise.resolve()}}let I={},S=[];const F={};let De,Je,$="dataLayer",le="gtag",ft=!1;function Un(A,k,X){!function An(){const A=[];if((0,Ce.ru)()&&A.push("This is a browser extension environment."),(0,Ce.zI)()||A.push("Cookies are not available."),A.length>0){const k=A.map((fe,Re)=>`(${Re+1}) ${fe}`).join(" "),X=Dr.create("invalid-analytics-context",{errorInfo:k});or.warn(X.message)}}();const fe=A.options.appId;if(!fe)throw Dr.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw Dr.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=I[fe])throw Dr.create("already-exists",{id:fe});if(!ft){!function Yl(A){let k=[];Array.isArray(window[A])?k=window[A]:window[A]=k}($);const{wrappedGtag:ze,gtagCore:vt}=function Ys(A,k,X,fe,Re){let ze=function(...vt){window[fe].push(arguments)};return window[Re]&&"function"==typeof window[Re]&&(ze=window[Re]),window[Re]=function Fs(A,k,X,fe){function ze(){return ze=(0,j.Z)(function*(vt,...an){try{if("event"===vt){const[on,Hn]=an;yield function Ha(A,k,X,fe,Re){return fa.apply(this,arguments)}(A,k,X,on,Hn)}else if("config"===vt){const[on,Hn]=an;yield function wl(A,k,X,fe,Re,ze){return ja.apply(this,arguments)}(A,k,X,fe,on,Hn)}else if("consent"===vt){const[on]=an;A("consent","update",on)}else if("get"===vt){const[on,Hn,Mr]=an;A("get",on,Hn,Mr)}else if("set"===vt){const[on]=an;A("set",on)}else A(vt,...an)}catch(on){or.error(on)}}),ze.apply(this,arguments)}return function Re(vt){return ze.apply(this,arguments)}}(ze,A,k,X),{gtagCore:ze,wrappedGtag:window[Re]}}(I,S,F,$,le);Je=ze,De=vt,ft=!0}return I[fe]=function u(A,k,X,fe,Re,ze,vt){return h.apply(this,arguments)}(A,S,F,k,De,$,X),new f(A)}function tr(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,j.Z)(function*(){if((0,Ce.ru)()||!(0,Ce.zI)()||!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}const Sl="@firebase/analytics";!function Us(){(0,Pe._registerComponent)(new Fe.wA(lr,(k,{options:X})=>Un(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,Pe._registerComponent)(new Fe.wA("analytics-internal",function A(k){try{const X=k.getProvider(lr).getImmediate();return{logEvent:(fe,Re,ze)=>function ko(A,k,X,fe){A=(0,Ce.m9)(A),function yu(A,k,X,fe,Re){return Oo.apply(this,arguments)}(Je,I[A.app.options.appId],k,X,fe).catch(Re=>or.error(Re))}(X,fe,Re,ze)}}catch(X){throw Dr.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,Pe.registerVersion)(Sl,"0.10.0"),(0,Pe.registerVersion)(Sl,"0.10.0","esm2017")}();var Nu=G(4408),hn=G(7565);const oi=new class Yn extends hn.v{}(class Nn extends Nu.o{constructor(k,X){super(k,X),this.scheduler=k,this.work=X}schedule(k,X=0){return X>0?super.schedule(k,X):(this.delay=X,this.state=k,this.scheduler.flush(this),this)}execute(k,X){return X>0||this.closed?super.execute(k,X):this._execute(k,X)}requestAsyncId(k,X,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(k,X,fe):(k.flush(this),0)}});var so=G(4986),oo=G(9751),Co=G(8505),Ai=G(5363),Ka=G(9468);const ga=new v.GfV("7.6.1"),ps="__angularfire_symbol__analyticsIsSupportedValue",Do="__angularfire_symbol__analyticsIsSupported",gs="__angularfire_symbol__remoteConfigIsSupportedValue",bl="__angularfire_symbol__remoteConfigIsSupported",nl="__angularfire_symbol__messagingIsSupportedValue",_u="__angularfire_symbol__messagingIsSupported";function fl(A,k,X){if(k){if(1===k.length)return k[0];const ze=k.filter(vt=>vt.app===X);if(1===ze.length)return ze[0]}return X.container.getProvider(A).getImmediate({optional:!0})}globalThis[Do]||(globalThis[Do]=tr().then(A=>globalThis[ps]=A).catch(()=>globalThis[ps]=!1)),globalThis[_u]||(globalThis[_u]=kl().then(A=>globalThis[nl]=A).catch(()=>globalThis[nl]=!1)),globalThis[bl]||(globalThis[bl]=Ot().then(A=>globalThis[gs]=A).catch(()=>globalThis[gs]=!1));const qa=(A,k)=>{const X=k?[k]:(0,te.C6)(),fe=[];return X.forEach(Re=>{Re.container.getProvider(A).instances.forEach(vt=>{fe.includes(vt)||fe.push(vt)})}),fe};function Sa(){}class $l{constructor(k,X=oi){this.zone=k,this.delegate=X}now(){return this.delegate.now()}schedule(k,X,fe){const Re=this.zone;return this.delegate.schedule(function(vt){Re.runGuarded(()=>{k.apply(this,[vt])})},X,fe)}}class Za{constructor(k){this.zone=k,this.task=null}call(k,X){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)),X.pipe((0,Co.b)({next:fe,complete:fe,error:fe})).subscribe(k).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let su=(()=>{class A{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new $l(Zone.current)),this.insideAngular=X.run(()=>new $l(Zone.current,so.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(X){return new(X||A)(v.LFG(v.R0b))},A.\u0275prov=v.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function rl(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Rl(A){return rl().ngZone.run(()=>A())}function ss(A){return A.pipe((0,Ai.Q)(rl().outsideAngular))}function As(A){return rl(),function il(A){return function(X){return(X=X.lift(new Za(A.ngZone))).pipe((0,Ka.R)(A.outsideAngular),(0,Ai.Q)(A.insideAngular))}}(rl())(A)}const xu=(A,k)=>function(){const fe=arguments;return k&&setTimeout(()=>{"scheduled"===k.state&&k.invoke()},10),Rl(()=>A.apply(void 0,fe))},ia=(A,k)=>function(){let X;const fe=arguments;for(let ze=0;ze<arguments.length;ze++)"function"==typeof fe[ze]&&(k&&(X||(X=Rl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sa,{},Sa,Sa)))),fe[ze]=xu(fe[ze],X));const Re=function ou(A){return rl().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,fe));if(!k){if(Re instanceof oo.y){const ze=rl();return Re.pipe((0,Ka.R)(ze.outsideAngular),(0,Ai.Q)(ze.insideAngular))}return Rl(()=>Re)}return Re instanceof oo.y?Re.pipe(As):Re instanceof Promise?Rl(()=>new Promise((ze,vt)=>Re.then(an=>Rl(()=>ze(an)),an=>Rl(()=>vt(an))))):"function"==typeof Re&&X?function(){return setTimeout(()=>{X&&"scheduled"===X.state&&X.invoke()},10),Re.apply(this,arguments)}:Rl(()=>Re)}},1389:(rn,tt,G)=>{G.d(tt,{$:()=>Kn,A:()=>ge,D:()=>gt,I:()=>Yr,J:()=>kt,L:()=>ys,N:()=>Ni,P:()=>u,Q:()=>ee,R:()=>dl,U:()=>pt,V:()=>Ot,W:()=>vn,X:()=>He,Y:()=>Hr,Z:()=>Ti,_:()=>ds,a:()=>ea,a0:()=>Ui,a1:()=>to,a2:()=>Vo,a3:()=>dn,a4:()=>zi,a5:()=>Ws,a6:()=>Ds,a7:()=>Es,a8:()=>xo,a9:()=>yo,aA:()=>q,aB:()=>Do,aC:()=>mi,aD:()=>yi,aE:()=>Co,aF:()=>Wa,aG:()=>Ei,aH:()=>$r,aL:()=>Ia,aO:()=>er,aa:()=>Os,ab:()=>ul,ac:()=>Qo,ad:()=>hi,ae:()=>Qa,af:()=>Va,ai:()=>Ea,aj:()=>hs,ak:()=>Or,an:()=>Fr,ao:()=>ha,aq:()=>Ir,ar:()=>zt,as:()=>fn,at:()=>Le,au:()=>me,av:()=>Ze,aw:()=>Tr,ax:()=>_u,ay:()=>nt,az:()=>Oe,b:()=>Fl,c:()=>Je,d:()=>Un,e:()=>ln,f:()=>Sl,g:()=>Yn,h:()=>Nu,i:()=>Cl,j:()=>so,k:()=>Jl,l:()=>Ta,m:()=>hc,o:()=>mc,p:()=>ye,r:()=>Ul,s:()=>pa,u:()=>Io});var v=G(5861),te=G(2090),j=G(6881),Pe=G(7582),Ce=G(1877),Fe=G(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ge={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gt=function Ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pt=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},jt=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new Ce.Yd("@firebase/auth");function _t(b,...y){mt.logLevel<=Ce.in.ERROR&&mt.error(`Auth (${j.SDK_VERSION}): ${b}`,...y)}function Ze(b,...y){throw lt(b,...y)}function Oe(b,...y){return lt(b,...y)}function rt(b,y,C){const R=Object.assign(Object.assign({},Pt()),{[y]:C});return new te.LL("auth","Firebase",R).create(y,{appName:b.name})}function Dt(b,y,C){if(!(y instanceof C))throw C.name!==y.constructor.name&&Ze(b,"argument-error"),rt(b,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lt(b,...y){if("string"!=typeof b){const C=y[0],R=[...y.slice(1)];return R[0]&&(R[0].appName=b.name),b._errorFactory.create(C,...R)}return jt.create(b,...y)}function q(b,y,...C){if(!b)throw lt(y,...C)}function Bt(b){const y="INTERNAL ASSERTION FAILED: "+b;throw _t(y),new Error(y)}function fn(b,y){b||Bt(y)}function Ut(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Lt(){return"http:"===Vt()||"https:"===Vt()}function Vt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Sn{constructor(y,C){this.shortDelay=y,this.longDelay=C,fn(C>y,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return function ai(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lt()||(0,te.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(b,y){fn(b.emulator,"Emulator should always be set here");const{url:C}=b.emulator;return y?`${C}${y.startsWith("/")?y.slice(1):y}`:C}class Be{static initialize(y,C,R){this.fetchImpl=y,C&&(this.headersImpl=C),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ye=new Sn(3e4,6e4);function ke(b,y){return b.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:b.tenantId}):y}function dt(b,y,C,R){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,v.Z)(function*(b,y,C,R,J={}){return $t(b,J,(0,v.Z)(function*(){let de={},We={};R&&("GET"===y?We=R:de={body:JSON.stringify(R)});const yt=(0,te.xO)(Object.assign({key:b.config.apiKey},We)).slice(1),Jt=yield b._getAdditionalHeaders();return Jt["Content-Type"]="application/json",b.languageCode&&(Jt["X-Firebase-Locale"]=b.languageCode),Be.fetch()(zn(b,b.config.apiHost,C,yt),Object.assign({method:y,headers:Jt,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function $t(b,y,C){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,v.Z)(function*(b,y,C){b._canInitEmulator=!1;const R=Object.assign(Object.assign({},je),y);try{const J=new nr(b),de=yield Promise.race([C(),J.promise]);J.clearNetworkTimeout();const We=yield de.json();if("needConfirmation"in We)throw Fn(b,"account-exists-with-different-credential",We);if(de.ok&&!("errorMessage"in We))return We;{const yt=de.ok?We.errorMessage:We.error.message,[Jt,_n]=yt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Jt)throw Fn(b,"credential-already-in-use",We);if("EMAIL_EXISTS"===Jt)throw Fn(b,"email-already-in-use",We);if("USER_DISABLED"===Jt)throw Fn(b,"user-disabled",We);const rr=R[Jt]||Jt.toLowerCase().replace(/[_\s]+/g,"-");if(_n)throw rt(b,rr,_n);Ze(b,rr)}}catch(J){if(J instanceof te.ZR)throw J;Ze(b,"network-request-failed",{message:String(J)})}})).apply(this,arguments)}function cn(b,y,C,R){return yn.apply(this,arguments)}function yn(){return(yn=(0,v.Z)(function*(b,y,C,R,J={}){const de=yield dt(b,y,C,R,J);return"mfaPendingCredential"in de&&Ze(b,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function zn(b,y,C,R){const J=`${y}${C}?${R}`;return b.config.emulator?bn(b.config,J):`${b.config.apiScheme}://${J}`}class nr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((C,R)=>{this.timer=setTimeout(()=>R(Oe(this.auth,"network-request-failed")),Ye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(b,y,C){const R={appName:b.name};C.email&&(R.email=C.email),C.phoneNumber&&(R.phoneNumber=C.phoneNumber);const J=Oe(b,y,R);return J.customData._tokenResponse=C,J}function Gt(){return(Gt=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function fr(){return(fr=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Wn(){return(Wn=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Yt(b){if(b)try{const y=new Date(Number(b));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function qr(){return(qr=(0,v.Z)(function*(b,y=!1){const C=(0,te.m9)(b),R=yield C.getIdToken(y),J=Ki(R);q(J&&J.exp&&J.auth_time&&J.iat,C.auth,"internal-error");const de="object"==typeof J.firebase?J.firebase:void 0,We=de?.sign_in_provider;return{claims:J,token:R,authTime:Yt(Qn(J.auth_time)),issuedAtTime:Yt(Qn(J.iat)),expirationTime:Yt(Qn(J.exp)),signInProvider:We||null,signInSecondFactor:de?.sign_in_second_factor||null}})).apply(this,arguments)}function Qn(b){return 1e3*Number(b)}function Ki(b){const[y,C,R]=b.split(".");if(void 0===y||void 0===C||void 0===R)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const J=(0,te.tV)(C);return J?JSON.parse(J):(_t("Failed to decode base64 JWT payload"),null)}catch(J){return _t("Caught error parsing JWT payload as JSON",J?.toString()),null}}function xn(b,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,v.Z)(function*(b,y,C=!1){if(C)return y;try{return yield y}catch(R){throw R instanceof te.ZR&&function Rn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(R)&&b.auth.currentUser===b&&(yield b.auth.signOut()),R}})).apply(this,arguments)}class li{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var C;if(y){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const J=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,J)}}schedule(y=!1){var C=this;if(!this.isRunning)return;const R=this.getInterval(y);this.timerId=setTimeout((0,v.Z)(function*(){yield C.iteration()}),R)}iteration(){var y=this;return(0,v.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C?.code&&y.schedule(!0))}y.schedule()})()}}class wi{constructor(y,C){this.createdAt=y,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yt(this.lastLoginAt),this.creationTime=Yt(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Br(b){return ui.apply(this,arguments)}function ui(){return ui=(0,v.Z)(function*(b){var y;const C=b.auth,R=yield b.getIdToken(),J=yield xn(b,function br(b,y){return Wn.apply(this,arguments)}(C,{idToken:R}));q(J?.users.length,C,"internal-error");const de=J.users[0];b._notifyReloadListener(de);const We=null!==(y=de.providerUserInfo)&&void 0!==y&&y.length?function Nr(b){return b.map(y=>{var{providerId:C}=y,R=(0,Pe._T)(y,["providerId"]);return{providerId:C,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}(de.providerUserInfo):[],yt=function Xn(b,y){return[...b.filter(R=>!y.some(J=>J.providerId===R.providerId)),...y]}(b.providerData,We),rr=!!b.isAnonymous&&!(b.email&&de.passwordHash||yt?.length),Wr={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:yt,metadata:new wi(de.createdAt,de.lastLoginAt),isAnonymous:rr};Object.assign(b,Wr)}),ui.apply(this,arguments)}function ci(){return(ci=(0,v.Z)(function*(b){const y=(0,te.m9)(b);yield Br(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Qt(){return(Qt=(0,v.Z)(function*(b,y){const C=yield $t(b,{},(0,v.Z)(function*(){const R=(0,te.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:J,apiKey:de}=b.config,We=zn(b,J,"/v1/token",`key=${de}`),yt=yield b._getAdditionalHeaders();return yt["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(We,{method:"POST",headers:yt,body:R})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){q(y.idToken,"internal-error"),q(typeof y.idToken<"u","internal-error"),q(typeof y.refreshToken<"u","internal-error");const C="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Ln(b){const y=Ki(b);return q(y,"internal-error"),q(typeof y.exp<"u","internal-error"),q(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,C)}getToken(y,C=!1){var R=this;return(0,v.Z)(function*(){return q(!R.accessToken||R.refreshToken,y,"user-token-expired"),C||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(y,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,C){var R=this;return(0,v.Z)(function*(){const{accessToken:J,refreshToken:de,expiresIn:We}=yield function Cn(b,y){return Qt.apply(this,arguments)}(y,C);R.updateTokensAndExpiration(J,de,Number(We))})()}updateTokensAndExpiration(y,C,R){this.refreshToken=C||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(y,C){const{refreshToken:R,accessToken:J,expirationTime:de}=C,We=new qt;return R&&(q("string"==typeof R,"internal-error",{appName:y}),We.refreshToken=R),J&&(q("string"==typeof J,"internal-error",{appName:y}),We.accessToken=J),de&&(q("number"==typeof de,"internal-error",{appName:y}),We.expirationTime=de),We}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function ri(b,y){q("string"==typeof b||typeof b>"u","internal-error",{appName:y})}class Vr{constructor(y){var{uid:C,auth:R,stsTokenManager:J}=y,de=(0,Pe._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=R,this.stsTokenManager=J,this.accessToken=J.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new wi(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(y){var C=this;return(0,v.Z)(function*(){const R=yield xn(C,C.stsTokenManager.getToken(C.auth,y));return q(R,C.auth,"internal-error"),C.accessToken!==R&&(C.accessToken=R,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),R})()}getIdTokenResult(y){return function gi(b){return qr.apply(this,arguments)}(this,y)}reload(){return function Lr(b){return ci.apply(this,arguments)}(this)}_assign(y){this!==y&&(q(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(C=>Object.assign({},C)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const C=new Vr(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return C.metadata._copy(this.metadata),C}_onReload(y){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,C=!1){var R=this;return(0,v.Z)(function*(){let J=!1;y.idToken&&y.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(y),J=!0),C&&(yield Br(R)),yield R.auth._persistUserIfCurrent(R),J&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var y=this;return(0,v.Z)(function*(){const C=yield y.getIdToken();return yield xn(y,function Sr(b,y){return Gt.apply(this,arguments)}(y.auth,{idToken:C})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,C){var R,J,de,We,yt,Jt,_n,rr;const Wr=null!==(R=C.displayName)&&void 0!==R?R:void 0,Ra=null!==(J=C.email)&&void 0!==J?J:void 0,Ko=null!==(de=C.phoneNumber)&&void 0!==de?de:void 0,Wu=null!==(We=C.photoURL)&&void 0!==We?We:void 0,Ns=null!==(yt=C.tenantId)&&void 0!==yt?yt:void 0,jl=null!==(Jt=C._redirectEventId)&&void 0!==Jt?Jt:void 0,ol=null!==(_n=C.createdAt)&&void 0!==_n?_n:void 0,Eu=null!==(rr=C.lastLoginAt)&&void 0!==rr?rr:void 0,{uid:Xs,emailVerified:Hl,isAnonymous:eu,providerData:Ku,stsTokenManager:Nl}=C;q(Xs&&Nl,y,"internal-error");const ni=qt.fromJSON(this.name,Nl);q("string"==typeof Xs,y,"internal-error"),ri(Wr,y.name),ri(Ra,y.name),q("boolean"==typeof Hl,y,"internal-error"),q("boolean"==typeof eu,y,"internal-error"),ri(Ko,y.name),ri(Wu,y.name),ri(Ns,y.name),ri(jl,y.name),ri(ol,y.name),ri(Eu,y.name);const yc=new Vr({uid:Xs,auth:y,email:Ra,emailVerified:Hl,displayName:Wr,isAnonymous:eu,photoURL:Wu,phoneNumber:Ko,tenantId:Ns,stsTokenManager:ni,createdAt:ol,lastLoginAt:Eu});return Ku&&Array.isArray(Ku)&&(yc.providerData=Ku.map(qu=>Object.assign({},qu))),jl&&(yc._redirectEventId=jl),yc}static _fromIdTokenResponse(y,C,R=!1){return(0,v.Z)(function*(){const J=new qt;J.updateFromServerResponse(C);const de=new Vr({uid:C.localId,auth:y,stsTokenManager:J,isAnonymous:R});return yield Br(de),de})()}}const Pi=new Map;function mi(b){fn(b instanceof Function,"Expected a class definition");let y=Pi.get(b);return y?(fn(y instanceof b,"Instance stored in cache mismatched with class"),y):(y=new b,Pi.set(b,y),y)}const Ni=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(C,R){var J=this;return(0,v.Z)(function*(){J.storage[C]=R})()}_get(C){var R=this;return(0,v.Z)(function*(){const J=R.storage[C];return void 0===J?null:J})()}_remove(C){var R=this;return(0,v.Z)(function*(){delete R.storage[C]})()}_addListener(C,R){}_removeListener(C,R){}}return b.type="NONE",b})();function yi(b,y,C){return`firebase:${b}:${y}:${C}`}class be{constructor(y,C,R){this.persistence=y,this.auth=C,this.userKey=R;const{config:J,name:de}=this.auth;this.fullUserKey=yi(this.userKey,J.apiKey,de),this.fullPersistenceKey=yi("persistence",J.apiKey,de),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,v.Z)(function*(){const C=yield y.persistence._get(y.fullUserKey);return C?Vr._fromJSON(y.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var C=this;return(0,v.Z)(function*(){if(C.persistence===y)return;const R=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=y,R?C.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,C,R="authUser"){return(0,v.Z)(function*(){if(!C.length)return new be(mi(Ni),y,R);const J=(yield Promise.all(C.map(function(){var _n=(0,v.Z)(function*(rr){if(yield rr._isAvailable())return rr});return function(rr){return _n.apply(this,arguments)}}()))).filter(_n=>_n);let de=J[0]||mi(Ni);const We=yi(R,y.config.apiKey,y.name);let yt=null;for(const _n of C)try{const rr=yield _n._get(We);if(rr){const Wr=Vr._fromJSON(y,rr);_n!==de&&(yt=Wr),de=_n;break}}catch{}const Jt=J.filter(_n=>_n._shouldAllowMigration);return de._shouldAllowMigration&&Jt.length?(de=Jt[0],yt&&(yield de._set(We,yt.toJSON())),yield Promise.all(C.map(function(){var _n=(0,v.Z)(function*(rr){if(rr!==de)try{yield rr._remove(We)}catch{}});return function(rr){return _n.apply(this,arguments)}}())),new be(de,y,R)):new be(de,y,R)})()}}function we(b){const y=b.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Se(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(oe(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(ve(y))return"Blackberry";if(pe(y))return"Webos";if(he(y))return"Safari";if((y.includes("chrome/")||ne(y))&&!y.includes("edge/"))return"Chrome";if(me(y))return"Android";{const R=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===R?.length)return R[1]}return"Other"}function oe(b=(0,te.z$)()){return/firefox\//i.test(b)}function he(b=(0,te.z$)()){const y=b.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function ne(b=(0,te.z$)()){return/crios\//i.test(b)}function Se(b=(0,te.z$)()){return/iemobile/i.test(b)}function me(b=(0,te.z$)()){return/android/i.test(b)}function ve(b=(0,te.z$)()){return/blackberry/i.test(b)}function pe(b=(0,te.z$)()){return/webos/i.test(b)}function Le(b=(0,te.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function nt(b=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Dn(b=(0,te.z$)()){return Le(b)||me(b)||pe(b)||ve(b)||/windows phone/i.test(b)||Se(b)}function Li(b,y=[]){let C;switch(b){case"Browser":C=we((0,te.z$)());break;case"Worker":C=`${we((0,te.z$)())}-${b}`;break;default:C=b}const R=y.length?y.join(","):"FirebaseCore-web";return`${C}/JsCore/${j.SDK_VERSION}/${R}`}function Qe(){return(Qe=(0,v.Z)(function*(b){return(yield dt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xt(b,y){return pn.apply(this,arguments)}function pn(){return(pn=(0,v.Z)(function*(b,y){return dt(b,"GET","/v2/recaptchaConfig",ke(b,y))})).apply(this,arguments)}function Pn(b){return void 0!==b&&void 0!==b.getResponse}function ir(b){return void 0!==b&&void 0!==b.enterprise}class gn{constructor(y){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===y.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=y.recaptchaKey.split("/")[3],this.emailPasswordEnabled=y.recaptchaEnforcementState.some(C=>"EMAIL_PASSWORD_PROVIDER"===C.provider&&"OFF"!==C.enforcementState)}}function vr(b){return new Promise((y,C)=>{const R=document.createElement("script");R.setAttribute("src",b),R.onload=y,R.onerror=J=>{const de=Oe("internal-error");de.customData=J,C(de)},R.type="text/javascript",R.charset="UTF-8",function Cr(){var b,y;return null!==(y=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==y?y:document}().appendChild(R)})}function Zi(b){return`__${b}${Math.floor(1e6*Math.random())}`}const gr="NO_RECAPTCHA";class Rs{constructor(y){this.type="recaptcha-enterprise",this.auth=$r(y)}verify(y="verify",C=!1){var R=this;return(0,v.Z)(function*(){function de(){return de=(0,v.Z)(function*(yt){if(!C){if(null==yt.tenantId&&null!=yt._agentRecaptchaConfig)return yt._agentRecaptchaConfig.siteKey;if(null!=yt.tenantId&&void 0!==yt._tenantRecaptchaConfigs[yt.tenantId])return yt._tenantRecaptchaConfigs[yt.tenantId].siteKey}return new Promise(function(){var Jt=(0,v.Z)(function*(_n,rr){xt(yt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wr=>{if(void 0!==Wr.recaptchaKey){const Ra=new gn(Wr);return null==yt.tenantId?yt._agentRecaptchaConfig=Ra:yt._tenantRecaptchaConfigs[yt.tenantId]=Ra,_n(Ra.siteKey)}rr(new Error("recaptcha Enterprise site key undefined"))}).catch(Wr=>{rr(Wr)})});return function(_n,rr){return Jt.apply(this,arguments)}}())}),de.apply(this,arguments)}function We(yt,Jt,_n){const rr=window.grecaptcha;ir(rr)?rr.enterprise.ready(()=>{rr.enterprise.execute(yt,{action:y}).then(Wr=>{Jt(Wr)}).catch(()=>{Jt(gr)})}):_n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((yt,Jt)=>{(function J(yt){return de.apply(this,arguments)})(R.auth).then(_n=>{if(!C&&ir(window.grecaptcha))We(_n,yt,Jt);else{if(typeof window>"u")return void Jt(new Error("RecaptchaVerifier is only supported in browser"));vr("https://www.google.com/recaptcha/enterprise.js?render="+_n).then(()=>{We(_n,yt,Jt)}).catch(rr=>{Jt(rr)})}}).catch(_n=>{Jt(_n)})})})()}}function Vi(b,y,C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,v.Z)(function*(b,y,C,R=!1){const J=new Rs(b);let de;try{de=yield J.verify(C)}catch{de=yield J.verify(C,!0)}const We=Object.assign({},y);return Object.assign(We,R?{captchaResp:de}:{captchaResponse:de}),Object.assign(We,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(We,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),We})).apply(this,arguments)}class jn{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,C){const R=de=>new Promise((We,yt)=>{try{We(y(de))}catch(Jt){yt(Jt)}});R.onAbort=C,this.queue.push(R);const J=this.queue.length-1;return()=>{this.queue[J]=()=>Promise.resolve()}}runMiddleware(y){var C=this;return(0,v.Z)(function*(){if(C.auth.currentUser===y)return;const R=[];try{for(const J of C.queue)yield J(y),J.onAbort&&R.push(J.onAbort)}catch(J){R.reverse();for(const de of R)try{de()}catch{}throw C.auth._errorFactory.create("login-blocked",{originalMessage:J?.message})}})()}}class Zr{constructor(y,C,R,J){this.app=y,this.heartbeatServiceProvider=C,this.appCheckServiceProvider=R,this.config=J,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.beforeStateQueue=new jn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=J.sdkClientVersion}_initializeWithPersistence(y,C){var R=this;return C&&(this._popupRedirectResolver=mi(C)),this._initializationPromise=this.queue((0,v.Z)(function*(){var J,de;if(!R._deleted&&(R.persistenceManager=yield be.create(R,y),!R._deleted)){if(null!==(J=R._popupRedirectResolver)&&void 0!==J&&J._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch{}yield R.initializeCurrentUser(C),R.lastNotifiedUid=(null===(de=R.currentUser)||void 0===de?void 0:de.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,v.Z)(function*(){if(y._deleted)return;const C=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||C){if(y.currentUser&&C&&y.currentUser.uid===C.uid)return y._currentUser._assign(C),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(C,!0)}})()}initializeCurrentUser(y){var C=this;return(0,v.Z)(function*(){var R;const J=yield C.assertedPersistence.getCurrentUser();let de=J,We=!1;if(y&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const yt=null===(R=C.redirectUser)||void 0===R?void 0:R._redirectEventId,Jt=de?._redirectEventId,_n=yield C.tryRedirectSignIn(y);(!yt||yt===Jt)&&_n?.user&&(de=_n.user,We=!0)}if(!de)return C.directlySetCurrentUser(null);if(!de._redirectEventId){if(We)try{yield C.beforeStateQueue.runMiddleware(de)}catch(yt){de=J,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(yt))}return de?C.reloadAndSetCurrentUserOrClear(de):C.directlySetCurrentUser(null)}return q(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===de._redirectEventId?C.directlySetCurrentUser(de):C.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(y){var C=this;return(0,v.Z)(function*(){let R=null;try{R=yield C._popupRedirectResolver._completeRedirectFn(C,y,!0)}catch{yield C._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(y){var C=this;return(0,v.Z)(function*(){try{yield Br(y)}catch(R){if("auth/network-request-failed"!==R?.code)return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function Er(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var y=this;return(0,v.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var C=this;return(0,v.Z)(function*(){const R=y?(0,te.m9)(y):null;return R&&q(R.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(R&&R._clone(C))})()}_updateCurrentUser(y,C=!1){var R=this;return(0,v.Z)(function*(){if(!R._deleted)return y&&q(R.tenantId===y.tenantId,R,"tenant-id-mismatch"),C||(yield R.beforeStateQueue.runMiddleware(y)),R.queue((0,v.Z)(function*(){yield R.directlySetCurrentUser(y),R.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,v.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var C=this;return this.queue((0,v.Z)(function*(){yield C.assertedPersistence.setPersistence(mi(y))}))}initializeRecaptchaConfig(){var y=this;return(0,v.Z)(function*(){const C=yield xt(y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),R=new gn(C);null==y.tenantId?y._agentRecaptchaConfig=R:y._tenantRecaptchaConfigs[y.tenantId]=R,R.emailPasswordEnabled&&new Rs(y).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new te.LL("auth","Firebase",y())}onAuthStateChanged(y,C,R){return this.registerStateListener(this.authStateSubscription,y,C,R)}beforeAuthStateChanged(y,C){return this.beforeStateQueue.pushCallback(y,C)}onIdTokenChanged(y,C,R){return this.registerStateListener(this.idTokenSubscription,y,C,R)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,C){var R=this;return(0,v.Z)(function*(){const J=yield R.getOrInitRedirectPersistenceManager(C);return null===y?J.removeCurrentUser():J.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var C=this;return(0,v.Z)(function*(){if(!C.redirectPersistenceManager){const R=y&&mi(y)||C._popupRedirectResolver;q(R,C,"argument-error"),C.redirectPersistenceManager=yield be.create(C,[mi(R._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(y){var C=this;return(0,v.Z)(function*(){var R,J;return C._isInitialized&&(yield C.queue((0,v.Z)(function*(){}))),(null===(R=C._currentUser)||void 0===R?void 0:R._redirectEventId)===y?C._currentUser:(null===(J=C.redirectUser)||void 0===J?void 0:J._redirectEventId)===y?C.redirectUser:null})()}_persistUserIfCurrent(y){var C=this;return(0,v.Z)(function*(){if(y===C.currentUser)return C.queue((0,v.Z)(function*(){return C.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(C=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,C,R,J){if(this._deleted)return()=>{};const de="function"==typeof C?C:C.next.bind(C),We=this._isInitialized?Promise.resolve():this._initializationPromise;return q(We,this,"internal-error"),We.then(()=>de(this.currentUser)),"function"==typeof C?y.addObserver(C,R,J):y.addObserver(C)}directlySetCurrentUser(y){var C=this;return(0,v.Z)(function*(){C.currentUser&&C.currentUser!==y&&C._currentUser._stopProactiveRefresh(),y&&C.isProactiveRefreshEnabled&&y._startProactiveRefresh(),C.currentUser=y,y?yield C.assertedPersistence.setCurrentUser(y):yield C.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Li(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,v.Z)(function*(){var C;const R={"X-Client-Version":y.clientVersion};y.app.options.appId&&(R["X-Firebase-gmpid"]=y.app.options.appId);const J=yield null===(C=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();J&&(R["X-Firebase-Client"]=J);const de=yield y._getAppCheckToken();return de&&(R["X-Firebase-AppCheck"]=de),R})()}_getAppCheckToken(){var y=this;return(0,v.Z)(function*(){var C;const R=yield null===(C=y.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getToken();return R?.error&&function Et(b,...y){mt.logLevel<=Ce.in.WARN&&mt.warn(`Auth (${j.SDK_VERSION}): ${b}`,...y)}(`Error while retrieving App Check token: ${R.error}`),R?.token})()}}function $r(b){return(0,te.m9)(b)}class $i{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,te.ne)(C=>this.observer=C)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yr(b,y,C){const R=$r(b);q(R._canInitEmulator,R,"emulator-config-failed"),q(/^https?:\/\//.test(y),R,"invalid-emulator-scheme");const J=!!C?.disableWarnings,de=Ge(y),{host:We,port:yt}=function Ue(b){const y=Ge(b),C=/(\/\/)?([^?#/]+)/.exec(b.substr(y.length));if(!C)return{host:"",port:null};const R=C[2].split("@").pop()||"",J=/^(\[[^\]]+\])(:|$)/.exec(R);if(J){const de=J[1];return{host:de,port:Ve(R.substr(de.length+1))}}{const[de,We]=R.split(":");return{host:de,port:Ve(We)}}}(y);R.config.emulator={url:`${de}//${We}${null===yt?"":`:${yt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:We,port:yt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:J})}),J||function wt(){function b(){const y=document.createElement("p"),C=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Ge(b){const y=b.indexOf(":");return y<0?"":b.substr(0,y+1)}function Ve(b){if(!b)return null;const y=Number(b);return isNaN(y)?null:y}class kt{constructor(y,C){this.providerId=y,this.signInMethod=C}toJSON(){return Bt("not implemented")}_getIdTokenResponse(y){return Bt("not implemented")}_linkToIdToken(y,C){return Bt("not implemented")}_getReauthenticationResolver(y){return Bt("not implemented")}}function Mn(b,y){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:resetPassword",ke(b,y))})).apply(this,arguments)}function Tn(b,y){return mr.apply(this,arguments)}function mr(){return(mr=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function xi(){return(xi=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:update",ke(b,y))})).apply(this,arguments)}function Yi(b,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithPassword",ke(b,y))})).apply(this,arguments)}function ii(b,y){return ms.apply(this,arguments)}function ms(){return(ms=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:sendOobCode",ke(b,y))})).apply(this,arguments)}function yr(){return(yr=(0,v.Z)(function*(b,y){return ii(b,y)})).apply(this,arguments)}function wr(b,y){return cr.apply(this,arguments)}function cr(){return(cr=(0,v.Z)(function*(b,y){return ii(b,y)})).apply(this,arguments)}function cs(b,y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,v.Z)(function*(b,y){return ii(b,y)})).apply(this,arguments)}function Is(){return(Is=(0,v.Z)(function*(b,y){return ii(b,y)})).apply(this,arguments)}function Cs(){return(Cs=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithEmailLink",ke(b,y))})).apply(this,arguments)}function sr(){return(sr=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithEmailLink",ke(b,y))})).apply(this,arguments)}class vi extends kt{constructor(y,C,R,J=null){super("password",R),this._email=y,this._password=C,this._tenantId=J}static _fromEmailAndPassword(y,C){return new vi(y,C,"password")}static _fromEmailAndCode(y,C,R=null){return new vi(y,C,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y;if(C?.email&&C?.password){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(y){var C=this;return(0,v.Z)(function*(){var R;switch(C.signInMethod){case"password":const J={returnSecureToken:!0,email:C._email,password:C._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(R=y._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const de=yield Vi(y,J,"signInWithPassword");return Yi(y,de)}return Yi(y,J).catch(function(){var de=(0,v.Z)(function*(We){if("auth/missing-recaptcha-token"===We.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const yt=yield Vi(y,J,"signInWithPassword");return Yi(y,yt)}return Promise.reject(We)});return function(We){return de.apply(this,arguments)}}());case"emailLink":return function Hi(b,y){return Cs.apply(this,arguments)}(y,{email:C._email,oobCode:C._password});default:Ze(y,"internal-error")}})()}_linkToIdToken(y,C){var R=this;return(0,v.Z)(function*(){switch(R.signInMethod){case"password":return Tn(y,{idToken:C,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function jr(b,y){return sr.apply(this,arguments)}(y,{idToken:C,email:R._email,oobCode:R._password});default:Ze(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Xr(b,y){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithIdp",ke(b,y))})).apply(this,arguments)}class ys extends kt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const C=new ys(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(C.idToken=y.idToken),y.accessToken&&(C.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(C.nonce=y.nonce),y.pendingToken&&(C.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(C.accessToken=y.oauthToken,C.secret=y.oauthTokenSecret):Ze("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:R,signInMethod:J}=C,de=(0,Pe._T)(C,["providerId","signInMethod"]);if(!R||!J)return null;const We=new ys(R,J);return We.idToken=de.idToken||void 0,We.accessToken=de.accessToken||void 0,We.secret=de.secret,We.nonce=de.nonce,We.pendingToken=de.pendingToken||null,We}_getIdTokenResponse(y){return Xr(y,this.buildRequest())}_linkToIdToken(y,C){const R=this.buildRequest();return R.idToken=C,Xr(y,R)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,Xr(y,C)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),y.postBody=(0,te.xO)(C)}return y}}function ao(){return(ao=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:sendVerificationCode",ke(b,y))})).apply(this,arguments)}function zs(){return(zs=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithPhoneNumber",ke(b,y))})).apply(this,arguments)}function Gs(){return(Gs=(0,v.Z)(function*(b,y){const C=yield cn(b,"POST","/v1/accounts:signInWithPhoneNumber",ke(b,y));if(C.temporaryProof)throw Fn(b,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const eo={USER_NOT_FOUND:"user-not-found"};function Ao(){return(Ao=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithPhoneNumber",ke(b,Object.assign(Object.assign({},y),{operation:"REAUTH"})),eo)})).apply(this,arguments)}class xs extends kt{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,C){return new xs({verificationId:y,verificationCode:C})}static _fromTokenResponse(y,C){return new xs({phoneNumber:y,temporaryProof:C})}_getIdTokenResponse(y){return function po(b,y){return zs.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,C){return function Lo(b,y){return Gs.apply(this,arguments)}(y,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function as(b,y){return Ao.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:C,verificationId:R,verificationCode:J}=this.params;return y&&C?{temporaryProof:y,phoneNumber:C}:{sessionInfo:R,code:J}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:C,verificationCode:R,phoneNumber:J,temporaryProof:de}=y;return R||C||J||de?new xs({verificationId:C,verificationCode:R,phoneNumber:J,temporaryProof:de}):null}}class Ms{constructor(y){var C,R,J,de,We,yt;const Jt=(0,te.zd)((0,te.pd)(y)),_n=null!==(C=Jt.apiKey)&&void 0!==C?C:null,rr=null!==(R=Jt.oobCode)&&void 0!==R?R:null,Wr=function Ro(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(J=Jt.mode)&&void 0!==J?J:null);q(_n&&rr&&Wr,"argument-error"),this.apiKey=_n,this.operation=Wr,this.code=rr,this.continueUrl=null!==(de=Jt.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(We=Jt.languageCode)&&void 0!==We?We:null,this.tenantId=null!==(yt=Jt.tenantId)&&void 0!==yt?yt:null}static parseLink(y){const C=function $s(b){const y=(0,te.zd)((0,te.pd)(b)).link,C=y?(0,te.zd)((0,te.pd)(y)).deep_link_id:null,R=(0,te.zd)((0,te.pd)(b)).deep_link_id;return(R?(0,te.zd)((0,te.pd)(R)).link:null)||R||C||y||b}(y);try{return new Ms(C)}catch{return null}}}let ee=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(C,R){return vi._fromEmailAndPassword(C,R)}static credentialWithLink(C,R){const J=Ms.parseLink(R);return q(J,"argument-error"),vi._fromEmailAndCode(C,J.code,J.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ee{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Me extends Ee{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class He extends Me{static credentialFromJSON(y){const C="string"==typeof y?JSON.parse(y):y;return q("providerId"in C&&"signInMethod"in C,"argument-error"),ys._fromParams(C)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return q(y.idToken||y.accessToken,"argument-error"),ys._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return He.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return He.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:R,oauthTokenSecret:J,pendingToken:de,nonce:We,providerId:yt}=y;if(!R&&!J&&!C&&!de||!yt)return null;try{return new He(yt)._credential({idToken:C,accessToken:R,nonce:We,pendingToken:de})}catch{return null}}}let pt=(()=>{class b extends Me{constructor(){super("facebook.com")}static credential(C){return ys._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return b.credentialFromTaggedObject(C)}static credentialFromError(C){return b.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return b.credential(C.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ot=(()=>{class b extends Me{constructor(){super("google.com"),this.addScope("profile")}static credential(C,R){return ys._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:R})}static credentialFromResult(C){return b.credentialFromTaggedObject(C)}static credentialFromError(C){return b.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:R,oauthAccessToken:J}=C;if(!R&&!J)return null;try{return b.credential(R,J)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),vn=(()=>{class b extends Me{constructor(){super("github.com")}static credential(C){return ys._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return b.credentialFromTaggedObject(C)}static credentialFromError(C){return b.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return b.credential(C.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class er extends kt{constructor(y,C){super(y,y),this.pendingToken=C}_getIdTokenResponse(y){return Xr(y,this.buildRequest())}_linkToIdToken(y,C){const R=this.buildRequest();return R.idToken=C,Xr(y,R)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,Xr(y,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:R,signInMethod:J,pendingToken:de}=C;return R&&J&&de&&R===J?new er(R,de):null}static _create(y,C){return new er(y,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Hr extends Ee{constructor(y){q(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Hr.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Hr.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const C=er.fromJSON(y);return q(C,"argument-error"),C}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:C,providerId:R}=y;if(!C||!R)return null;try{return er._create(R,C)}catch{return null}}}let Ti=(()=>{class b extends Me{constructor(){super("twitter.com")}static credential(C,R){return ys._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:R})}static credentialFromResult(C){return b.credentialFromTaggedObject(C)}static credentialFromError(C){return b.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:R,oauthTokenSecret:J}=C;if(!R||!J)return null;try{return b.credential(R,J)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function di(b,y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signUp",ke(b,y))})).apply(this,arguments)}class Rr{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,C,R,J=!1){return(0,v.Z)(function*(){const de=yield Vr._fromIdTokenResponse(y,R,J),We=zr(R);return new Rr({user:de,providerId:We,_tokenResponse:R,operationType:C})})()}static _forOperation(y,C,R){return(0,v.Z)(function*(){yield y._updateTokensIfNecessary(R,!0);const J=zr(R);return new Rr({user:y,providerId:J,_tokenResponse:R,operationType:C})})()}}function zr(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ds(b){return pr.apply(this,arguments)}function pr(){return(pr=(0,v.Z)(function*(b){var y;const C=$r(b);if(yield C._initializationPromise,null!==(y=C.currentUser)&&void 0!==y&&y.isAnonymous)return new Rr({user:C.currentUser,providerId:null,operationType:"signIn"});const R=yield di(C,{returnSecureToken:!0}),J=yield Rr._fromIdTokenResponse(C,"signIn",R,!0);return yield C._updateCurrentUser(J.user),J})).apply(this,arguments)}class Si extends te.ZR{constructor(y,C,R,J){var de;super(C.code,C.message),this.operationType=R,this.user=J,Object.setPrototypeOf(this,Si.prototype),this.customData={appName:y.name,tenantId:null!==(de=y.tenantId)&&void 0!==de?de:void 0,_serverResponse:C.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(y,C,R,J){return new Si(y,C,R,J)}}function bi(b,y,C,R){return("reauthenticate"===y?C._getReauthenticationResolver(b):C._getIdTokenResponse(b)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?Si._fromErrorAndOperation(b,de,y,R):de})}function hr(b){return new Set(b.map(({providerId:y})=>y).filter(y=>!!y))}function Fr(b,y){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,v.Z)(function*(b,y){const C=(0,te.m9)(b);yield Mo(!0,C,y);const{providerUserInfo:R}=yield function Ar(b,y){return fr.apply(this,arguments)}(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[y]}),J=hr(R||[]);return C.providerData=C.providerData.filter(de=>J.has(de.providerId)),J.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C}),Yo.apply(this,arguments)}function rs(b,y){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,v.Z)(function*(b,y,C=!1){const R=yield xn(b,y._linkToIdToken(b.auth,yield b.getIdToken()),C);return Rr._forOperation(b,"link",R)})).apply(this,arguments)}function Mo(b,y,C){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,v.Z)(function*(b,y,C){yield Br(y);const J=!1===b?"provider-already-linked":"no-such-provider";q(hr(y.providerData).has(C)===b,y.auth,J)})).apply(this,arguments)}function go(b,y){return _s.apply(this,arguments)}function _s(){return(_s=(0,v.Z)(function*(b,y,C=!1){const{auth:R}=b,J="reauthenticate";try{const de=yield xn(b,bi(R,J,y,b),C);q(de.idToken,R,"internal-error");const We=Ki(de.idToken);q(We,R,"internal-error");const{sub:yt}=We;return q(b.uid===yt,R,"user-mismatch"),Rr._forOperation(b,J,de)}catch(de){throw"auth/user-not-found"===de?.code&&Ze(R,"user-mismatch"),de}})).apply(this,arguments)}function ar(b,y){return vs.apply(this,arguments)}function vs(){return(vs=(0,v.Z)(function*(b,y,C=!1){const R="signIn",J=yield bi(b,R,y),de=yield Rr._fromIdTokenResponse(b,R,J);return C||(yield b._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Kn(b,y){return aa.apply(this,arguments)}function aa(){return(aa=(0,v.Z)(function*(b,y){return ar($r(b),y)})).apply(this,arguments)}function Ui(b,y){return la.apply(this,arguments)}function la(){return(la=(0,v.Z)(function*(b,y){const C=(0,te.m9)(b);return yield Mo(!1,C,y.providerId),rs(C,y)})).apply(this,arguments)}function to(b,y){return Po.apply(this,arguments)}function Po(){return(Po=(0,v.Z)(function*(b,y){return go((0,te.m9)(b),y)})).apply(this,arguments)}function No(){return(No=(0,v.Z)(function*(b,y){return cn(b,"POST","/v1/accounts:signInWithCustomToken",ke(b,y))})).apply(this,arguments)}function Vo(b,y){return x.apply(this,arguments)}function x(){return x=(0,v.Z)(function*(b,y){const C=$r(b),R=yield function La(b,y){return No.apply(this,arguments)}(C,{token:y,returnSecureToken:!0}),J=yield Rr._fromIdTokenResponse(C,"signIn",R);return yield C._updateCurrentUser(J.user),J}),x.apply(this,arguments)}class B{constructor(y,C){this.factorId=y,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(y,C){return"phoneInfo"in C?L._fromServerResponse(y,C):"totpInfo"in C?re._fromServerResponse(y,C):Ze(y,"internal-error")}}class L extends B{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,C){return new L(C)}}class re extends B{constructor(y){super("totp",y)}static _fromServerResponse(y,C){return new re(C)}}function Xe(b,y,C){var R;q((null===(R=C.url)||void 0===R?void 0:R.length)>0,b,"invalid-continue-uri"),q(typeof C.dynamicLinkDomain>"u"||C.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),y.continueUrl=C.url,y.dynamicLinkDomain=C.dynamicLinkDomain,y.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(q(C.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),y.iOSBundleId=C.iOS.bundleId),C.android&&(q(C.android.packageName.length>0,b,"missing-android-pkg-name"),y.androidInstallApp=C.android.installApp,y.androidMinimumVersionCode=C.android.minimumVersion,y.androidPackageName=C.android.packageName)}function dn(b,y,C){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,v.Z)(function*(b,y,C){var R;const J=$r(b),de={requestType:"PASSWORD_RESET",email:y,clientType:"CLIENT_TYPE_WEB"};if(null!==(R=J._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const We=yield Vi(J,de,"getOobCode",!0);C&&Xe(J,We,C),yield wr(J,We)}else C&&Xe(J,de,C),yield wr(J,de).catch(function(){var We=(0,v.Z)(function*(yt){if("auth/missing-recaptcha-token"!==yt.code)return Promise.reject(yt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Jt=yield Vi(J,de,"getOobCode",!0);C&&Xe(J,Jt,C),yield wr(J,Jt)}});return function(yt){return We.apply(this,arguments)}}())}),Gr.apply(this,arguments)}function zi(b,y,C){return mo.apply(this,arguments)}function mo(){return(mo=(0,v.Z)(function*(b,y,C){yield Mn((0,te.m9)(b),{oobCode:y,newPassword:C})})).apply(this,arguments)}function Ws(b,y){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,v.Z)(function*(b,y){yield function ns(b,y){return xi.apply(this,arguments)}((0,te.m9)(b),{oobCode:y})}),Uo.apply(this,arguments)}function Ds(b,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,v.Z)(function*(b,y){const C=(0,te.m9)(b),R=yield Mn(C,{oobCode:y}),J=R.requestType;switch(q(J,C,"internal-error"),J){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(R.newEmail,C,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(R.mfaInfo,C,"internal-error");default:q(R.email,C,"internal-error")}let de=null;return R.mfaInfo&&(de=B._fromServerResponse($r(C),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:de},operation:J}})).apply(this,arguments)}function Es(b,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,v.Z)(function*(b,y){const{data:C}=yield Ds((0,te.m9)(b),y);return C.email})).apply(this,arguments)}function xo(b,y,C){return qs.apply(this,arguments)}function qs(){return qs=(0,v.Z)(function*(b,y,C){var R;const J=$r(b),de={returnSecureToken:!0,email:y,password:C,clientType:"CLIENT_TYPE_WEB"};let We;if(null!==(R=J._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const _n=yield Vi(J,de,"signUpPassword");We=di(J,_n)}else We=di(J,de).catch(function(){var _n=(0,v.Z)(function*(rr){if("auth/missing-recaptcha-token"===rr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Wr=yield Vi(J,de,"signUpPassword");return di(J,Wr)}return Promise.reject(rr)});return function(rr){return _n.apply(this,arguments)}}());const yt=yield We.catch(_n=>Promise.reject(_n)),Jt=yield Rr._fromIdTokenResponse(J,"signIn",yt);return yield J._updateCurrentUser(Jt.user),Jt}),qs.apply(this,arguments)}function yo(b,y,C){return Kn((0,te.m9)(b),ee.credential(y,C))}function Os(b,y,C){return _o.apply(this,arguments)}function _o(){return _o=(0,v.Z)(function*(b,y,C){var R;const J=$r(b),de={requestType:"EMAIL_SIGNIN",email:y,clientType:"CLIENT_TYPE_WEB"};function We(yt,Jt){q(Jt.handleCodeInApp,J,"argument-error"),Jt&&Xe(J,yt,Jt)}if(null!==(R=J._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const yt=yield Vi(J,de,"getOobCode",!0);We(yt,C),yield cs(J,yt)}else We(de,C),yield cs(J,de).catch(function(){var yt=(0,v.Z)(function*(Jt){if("auth/missing-recaptcha-token"!==Jt.code)return Promise.reject(Jt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const _n=yield Vi(J,de,"getOobCode",!0);We(_n,C),yield cs(J,_n)}});return function(Jt){return yt.apply(this,arguments)}}())}),_o.apply(this,arguments)}function ul(b,y){return"EMAIL_SIGNIN"===Ms.parseLink(y)?.operation}function Qo(b,y,C){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b),J=ee.credentialWithLink(y,C||Ut());return q(J._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),Kn(R,J)})).apply(this,arguments)}function ua(){return(ua=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:createAuthUri",ke(b,y))})).apply(this,arguments)}function hi(b,y){return ca.apply(this,arguments)}function ca(){return ca=(0,v.Z)(function*(b,y){const R={identifier:y,continueUri:Lt()?Ut():"http://localhost"},{signinMethods:J}=yield function Zs(b,y){return ua.apply(this,arguments)}((0,te.m9)(b),R);return J||[]}),ca.apply(this,arguments)}function Qa(b,y){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,v.Z)(function*(b,y){const C=(0,te.m9)(b),J={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};y&&Xe(C.auth,J,y);const{email:de}=yield function ho(b,y){return yr.apply(this,arguments)}(C.auth,J);de!==b.email&&(yield b.reload())}),Ji.apply(this,arguments)}function Va(b,y,C){return da.apply(this,arguments)}function da(){return da=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:y};C&&Xe(R.auth,de,C);const{email:We}=yield function Fo(b,y){return Is.apply(this,arguments)}(R.auth,de);We!==b.email&&(yield b.reload())}),da.apply(this,arguments)}function Xo(){return(Xo=(0,v.Z)(function*(b,y){return dt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ea(b,y){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,v.Z)(function*(b,{displayName:y,photoURL:C}){if(void 0===y&&void 0===C)return;const R=(0,te.m9)(b),de={idToken:yield R.getIdToken(),displayName:y,photoUrl:C,returnSecureToken:!0},We=yield xn(R,function vo(b,y){return Xo.apply(this,arguments)}(R.auth,de));R.displayName=We.displayName||null,R.photoURL=We.photoUrl||null;const yt=R.providerData.find(({providerId:Jt})=>"password"===Jt);yt&&(yt.displayName=R.displayName,yt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(We)}),Ss.apply(this,arguments)}function hs(b,y){return js((0,te.m9)(b),y,null)}function Or(b,y){return js((0,te.m9)(b),null,y)}function js(b,y,C){return ki.apply(this,arguments)}function ki(){return(ki=(0,v.Z)(function*(b,y,C){const{auth:R}=b,de={idToken:yield b.getIdToken(),returnSecureToken:!0};y&&(de.email=y),C&&(de.password=C);const We=yield xn(b,Tn(R,de));yield b._updateTokensIfNecessary(We,!0)})).apply(this,arguments)}class $o{constructor(y,C,R={}){this.isNewUser=y,this.providerId=C,this.profile=R}}class Xa extends $o{constructor(y,C,R,J){super(y,C,R),this.username=J}}class wa extends $o{constructor(y,C){super(y,"facebook.com",C)}}class Ua extends Xa{constructor(y,C){super(y,"github.com",C,"string"==typeof C?.login?C?.login:null)}}class Ol extends $o{constructor(y,C){super(y,"google.com",C)}}class Jo extends Xa{constructor(y,C,R){super(y,"twitter.com",C,R)}}function ha(b){const{user:y,_tokenResponse:C}=b;return y.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function Bo(b){var y,C;if(!b)return null;const{providerId:R}=b,J=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},de=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!R&&b?.idToken){const We=null===(C=null===(y=Ki(b.idToken))||void 0===y?void 0:y.firebase)||void 0===C?void 0:C.sign_in_provider;if(We)return new $o(de,"anonymous"!==We&&"custom"!==We?We:null)}if(!R)return null;switch(R){case"facebook.com":return new wa(de,J);case"github.com":return new Ua(de,J);case"google.com":return new Ol(de,J);case"twitter.com":return new Jo(de,J,b.screenName||null);case"custom":case"anonymous":return new $o(de,null);default:return new $o(de,R,J)}}(C)}class dr{constructor(y,C,R){this.type=y,this.credential=C,this.auth=R}static _fromIdtoken(y,C){return new dr("enroll",y,C)}static _fromMfaPendingCredential(y){return new dr("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var C,R;if(y?.multiFactorSession){if(null!==(C=y.multiFactorSession)&&void 0!==C&&C.pendingCredential)return dr._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(R=y.multiFactorSession)&&void 0!==R&&R.idToken)return dr._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Ur{constructor(y,C,R){this.session=y,this.hints=C,this.signInResolver=R}static _fromError(y,C){const R=$r(y),J=C.customData._serverResponse,de=(J.mfaInfo||[]).map(yt=>B._fromServerResponse(R,yt));q(J.mfaPendingCredential,R,"internal-error");const We=dr._fromMfaPendingCredential(J.mfaPendingCredential);return new Ur(We,de,function(){var yt=(0,v.Z)(function*(Jt){const _n=yield Jt._process(R,We);delete J.mfaInfo,delete J.mfaPendingCredential;const rr=Object.assign(Object.assign({},J),{idToken:_n.idToken,refreshToken:_n.refreshToken});switch(C.operationType){case"signIn":const Wr=yield Rr._fromIdTokenResponse(R,C.operationType,rr);return yield R._updateCurrentUser(Wr.user),Wr;case"reauthenticate":return q(C.user,R,"internal-error"),Rr._forOperation(C.user,C.operationType,rr);default:Ze(R,"internal-error")}});return function(Jt){return yt.apply(this,arguments)}}())}resolveSignIn(y){var C=this;return(0,v.Z)(function*(){return C.signInResolver(y)})()}}function Ir(b,y){var C;const R=(0,te.m9)(b),J=y;return q(y.customData.operationType,R,"argument-error"),q(null===(C=J.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,R,"argument-error"),Ur._fromError(R,J)}class wn{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(R=>B._fromServerResponse(y.auth,R)))})}static _fromUser(y){return new wn(y)}getSession(){var y=this;return(0,v.Z)(function*(){return dr._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,C){var R=this;return(0,v.Z)(function*(){const J=y,de=yield R.getSession(),We=yield xn(R.user,J._process(R.user.auth,de,C));return yield R.user._updateTokensIfNecessary(We),R.user.reload()})()}unenroll(y){var C=this;return(0,v.Z)(function*(){const R="string"==typeof y?y:y.uid,J=yield C.user.getIdToken();try{const de=yield xn(C.user,function nn(b,y){return dt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",ke(b,y))}(C.user.auth,{idToken:J,mfaEnrollmentId:R}));C.enrolledFactors=C.enrolledFactors.filter(({uid:We})=>We!==R),yield C.user._updateTokensIfNecessary(de),yield C.user.reload()}catch(de){throw de}})()}}const ks=new WeakMap;function zt(b){const y=(0,te.m9)(b);return ks.has(y)||ks.set(y,wn._fromUser(y)),ks.get(y)}const et="__sak";class Mt{constructor(y,C){this.storageRetriever=y,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(et,"1"),this.storage.removeItem(et),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,C){return this.storage.setItem(y,JSON.stringify(C)),Promise.resolve()}_get(y){const C=this.storage.getItem(y);return Promise.resolve(C?JSON.parse(C):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fl=(()=>{class b extends Mt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,R)=>this.onStorageEvent(C,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bs(){const b=(0,te.z$)();return he(b)||Le(b)}()&&function xr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Dn(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const R of Object.keys(this.listeners)){const J=this.storage.getItem(R),de=this.localCache[R];J!==de&&C(R,de,J)}}onStorageEvent(C,R=!1){if(!C.key)return void this.forAllChangedKeys((yt,Jt,_n)=>{this.notifyListeners(yt,_n)});const J=C.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const yt=this.storage.getItem(J);if(C.newValue!==yt)null!==C.newValue?this.storage.setItem(J,C.newValue):this.storage.removeItem(J);else if(this.localCache[J]===C.newValue&&!R)return}const de=()=>{const yt=this.storage.getItem(J);!R&&this.localCache[J]===yt||this.notifyListeners(J,yt)},We=this.storage.getItem(J);!function mn(){return(0,te.w1)()&&10===document.documentMode}()||We===C.newValue||C.newValue===C.oldValue?de():setTimeout(de,10)}notifyListeners(C,R){this.localCache[C]=R;const J=this.listeners[C];if(J)for(const de of Array.from(J))de(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,R,J)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:R,newValue:J}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(R)}_removeListener(C,R){this.listeners[C]&&(this.listeners[C].delete(R),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,R){var J=()=>super._set,de=this;return(0,v.Z)(function*(){yield J().call(de,C,R),de.localCache[C]=JSON.stringify(R)})()}_get(C){var R=()=>super._get,J=this;return(0,v.Z)(function*(){const de=yield R().call(J,C);return J.localCache[C]=JSON.stringify(de),de})()}_remove(C){var R=()=>super._remove,J=this;return(0,v.Z)(function*(){yield R().call(J,C),delete J.localCache[C]})()}}return b.type="LOCAL",b})(),ea=(()=>{class b extends Mt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,R){}_removeListener(C,R){}}return b.type="SESSION",b})();let El=(()=>{class b{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const R=this.receivers.find(de=>de.isListeningto(C));if(R)return R;const J=new b(C);return this.receivers.push(J),J}isListeningto(C){return this.eventTarget===C}handleEvent(C){var R=this;return(0,v.Z)(function*(){const J=C,{eventId:de,eventType:We,data:yt}=J.data,Jt=R.handlersMap[We];if(!Jt?.size)return;J.ports[0].postMessage({status:"ack",eventId:de,eventType:We});const _n=Array.from(Jt).map(function(){var Wr=(0,v.Z)(function*(Ra){return Ra(J.origin,yt)});return function(Ra){return Wr.apply(this,arguments)}}()),rr=yield function Vl(b){return Promise.all(b.map(function(){var y=(0,v.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(R){return{fulfilled:!1,reason:R}}});return function(C){return y.apply(this,arguments)}}()))}(_n);J.ports[0].postMessage({status:"done",eventId:de,eventType:We,response:rr})})()}_subscribe(C,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(R)}_unsubscribe(C,R){this.handlersMap[C]&&R&&this.handlersMap[C].delete(R),(!R||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Ia(b="",y=10){let C="";for(let R=0;R<y;R++)C+=Math.floor(10*Math.random());return b+C}class el{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,C,R=50){var J=this;return(0,v.Z)(function*(){const de=typeof MessageChannel<"u"?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let We,yt;return new Promise((Jt,_n)=>{const rr=Ia("",20);de.port1.start();const Wr=setTimeout(()=>{_n(new Error("unsupported_event"))},R);yt={messageChannel:de,onMessage(Ra){const Ko=Ra;if(Ko.data.eventId===rr)switch(Ko.data.status){case"ack":clearTimeout(Wr),We=setTimeout(()=>{_n(new Error("timeout"))},3e3);break;case"done":clearTimeout(We),Jt(Ko.data.response);break;default:clearTimeout(Wr),clearTimeout(We),_n(new Error("invalid_response"))}}},J.handlers.add(yt),de.port1.addEventListener("message",yt.onMessage),J.target.postMessage({eventType:y,eventId:rr,data:C},[de.port2])}).finally(()=>{yt&&J.removeMessageHandler(yt)})})()}}function is(){return window}function Ca(){return typeof is().WorkerGlobalScope<"u"&&"function"==typeof is().importScripts}function es(){return(es=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const or="firebaseLocalStorageDb",ro=1,Dr="firebaseLocalStorage",Xt="fbase_key";class ta{constructor(y){this.request=y}toPromise(){return new Promise((y,C)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function $a(b,y){return b.transaction([Dr],y?"readwrite":"readonly").objectStore(Dr)}function Yl(){const b=indexedDB.open(or,ro);return new Promise((y,C)=>{b.addEventListener("error",()=>{C(b.error)}),b.addEventListener("upgradeneeded",()=>{const R=b.result;try{R.createObjectStore(Dr,{keyPath:Xt})}catch(J){C(J)}}),b.addEventListener("success",(0,v.Z)(function*(){const R=b.result;R.objectStoreNames.contains(Dr)?y(R):(R.close(),yield function wo(){const b=indexedDB.deleteDatabase(or);return new ta(b).toPromise()}(),y(yield Yl()))}))})}function wl(b,y,C){return ja.apply(this,arguments)}function ja(){return(ja=(0,v.Z)(function*(b,y,C){const R=$a(b,!0).put({[Xt]:y,value:C});return new ta(R).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,v.Z)(function*(b,y){const C=$a(b,!1).get(y),R=yield new ta(C).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function Fs(b,y){const C=$a(b,!0).delete(y);return new ta(C).toPromise()}const Cl=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,v.Z)(function*(){return C.db||(C.db=yield Yl()),C.db})()}_withRetries(C){var R=this;return(0,v.Z)(function*(){let J=0;for(;;)try{const de=yield R._openDb();return yield C(de)}catch(de){if(J++>3)throw de;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,v.Z)(function*(){return Ca()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,v.Z)(function*(){C.receiver=El._getInstance(function Pa(){return Ca()?self:null}()),C.receiver._subscribe("keyChanged",function(){var R=(0,v.Z)(function*(J,de){return{keyProcessed:(yield C._poll()).includes(de.key)}});return function(J,de){return R.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var R=(0,v.Z)(function*(J,de){return["keyChanged"]});return function(J,de){return R.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,v.Z)(function*(){var R,J;if(C.activeServiceWorker=yield function cl(){return es.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new el(C.activeServiceWorker);const de=yield C.sender._send("ping",{},800);de&&null!==(R=de[0])&&void 0!==R&&R.fulfilled&&null!==(J=de[0])&&void 0!==J&&J.value.includes("keyChanged")&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var R=this;return(0,v.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function Gn(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:C},R.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const C=yield Yl();return yield wl(C,et,"1"),yield Fs(C,et),!0}catch{}return!1})()}_withPendingWrite(C){var R=this;return(0,v.Z)(function*(){R.pendingWrites++;try{yield C()}finally{R.pendingWrites--}})()}_set(C,R){var J=this;return(0,v.Z)(function*(){return J._withPendingWrite((0,v.Z)(function*(){return yield J._withRetries(de=>wl(de,C,R)),J.localCache[C]=R,J.notifyServiceWorker(C)}))})()}_get(C){var R=this;return(0,v.Z)(function*(){const J=yield R._withRetries(de=>function Ha(b,y){return fa.apply(this,arguments)}(de,C));return R.localCache[C]=J,J})()}_remove(C){var R=this;return(0,v.Z)(function*(){return R._withPendingWrite((0,v.Z)(function*(){return yield R._withRetries(J=>Fs(J,C)),delete R.localCache[C],R.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,v.Z)(function*(){const R=yield C._withRetries(We=>{const yt=$a(We,!1).getAll();return new ta(yt).toPromise()});if(!R)return[];if(0!==C.pendingWrites)return[];const J=[],de=new Set;for(const{fbase_key:We,value:yt}of R)de.add(We),JSON.stringify(C.localCache[We])!==JSON.stringify(yt)&&(C.notifyListeners(We,yt),J.push(We));for(const We of Object.keys(C.localCache))C.localCache[We]&&!de.has(We)&&(C.notifyListeners(We,null),J.push(We));return J})()}notifyListeners(C,R){this.localCache[C]=R;const J=this.listeners[C];if(J)for(const de of Array.from(J))de(R)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(R)}_removeListener(C,R){this.listeners[C]&&(this.listeners[C].delete(R),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),za=1e12;class Ga{constructor(y){this.auth=y,this.counter=za,this._widgets=new Map}render(y,C){const R=this.counter;return this._widgets.set(R,new ra(y,this.auth.name,C||{})),this.counter++,R}reset(y){var C;const R=y||za;null===(C=this._widgets.get(R))||void 0===C||C.delete(),this._widgets.delete(R)}getResponse(y){var C;return(null===(C=this._widgets.get(y||za))||void 0===C?void 0:C.getResponse())||""}execute(y){var C=this;return(0,v.Z)(function*(){var R;return null===(R=C._widgets.get(y||za))||void 0===R||R.execute(),""})()}}class ra{constructor(y,C,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const J="string"==typeof y?document.getElementById(y):y;q(J,"argument-error",{appName:C}),this.container=J,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ho(b){const y=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<b;R++)y.push(C.charAt(Math.floor(Math.random()*C.length)));return y.join("")}(50);const{callback:y,"expired-callback":C}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,C)try{C()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Da=Zi("rcb"),iu=new Sn(3e4,6e4);class tl{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=is().grecaptcha)||void 0===y||!y.render)}load(y,C=""){return q(function yu(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(C),y,"argument-error"),this.shouldResolveImmediately(C)&&Pn(is().grecaptcha)?Promise.resolve(is().grecaptcha):new Promise((R,J)=>{const de=is().setTimeout(()=>{J(Oe(y,"network-request-failed"))},iu.get());is()[Da]=()=>{is().clearTimeout(de),delete is()[Da];const yt=is().grecaptcha;if(!yt||!Pn(yt))return void J(Oe(y,"internal-error"));const Jt=yt.render;yt.render=(_n,rr)=>{const Wr=Jt(_n,rr);return this.counter++,Wr},this.hostLanguage=C,R(yt)},vr(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:Da,render:"explicit",hl:C})}`).catch(()=>{clearTimeout(de),J(Oe(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var C;return!(null===(C=is().grecaptcha)||void 0===C||!C.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oo{load(y){return(0,v.Z)(function*(){return new Ga(y)})()}clearedOneInstance(){}}const ws="recaptcha",zo={theme:"light",type:"image"};class dl{constructor(y,C=Object.assign({},zo),R){this.parameters=C,this.type=ws,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$r(R),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const J="string"==typeof y?document.getElementById(y):y;q(J,this.auth,"argument-error"),this.container=J,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oo:new tl,this.validateStartingState()}verify(){var y=this;return(0,v.Z)(function*(){y.assertNotDestroyed();const C=yield y.render(),R=y.getAssertedRecaptcha();return R.getResponse(C)||new Promise(de=>{const We=yt=>{yt&&(y.tokenChangeListeners.delete(We),de(yt))};y.tokenChangeListeners.add(We),y.isInvisible&&R.execute(C)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return C=>{if(this.tokenChangeListeners.forEach(R=>R(C)),"function"==typeof y)y(C);else if("string"==typeof y){const R=is()[y];"function"==typeof R&&R(C)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,v.Z)(function*(){if(yield y.init(),!y.widgetId){let C=y.container;if(!y.isInvisible){const R=document.createElement("div");C.appendChild(R),C=R}y.widgetId=y.getAssertedRecaptcha().render(C,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,v.Z)(function*(){q(Lt()&&!Ca(),y.auth,"internal-error"),yield function ts(){let b=null;return new Promise(y=>{"complete"!==document.readyState?(b=()=>y(),window.addEventListener("load",b)):y()}).catch(y=>{throw b&&window.removeEventListener("load",b),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const C=yield function ht(b){return Qe.apply(this,arguments)}(y.auth);q(C,y.auth,"internal-error"),y.parameters.sitekey=C})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qs{constructor(y,C){this.verificationId=y,this.onConfirmation=C}confirm(y){const C=xs._fromVerification(this.verificationId,y);return this.onConfirmation(C)}}function pa(b,y,C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,v.Z)(function*(b,y,C){const R=$r(b),J=yield Dl(R,y,(0,te.m9)(C));return new Qs(J,de=>Kn(R,de))})).apply(this,arguments)}function Ta(b,y,C){return Go.apply(this,arguments)}function Go(){return(Go=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b);yield Mo(!1,R,"phone");const J=yield Dl(R.auth,y,(0,te.m9)(C));return new Qs(J,de=>Ui(R,de))})).apply(this,arguments)}function Ul(b,y,C){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b),J=yield Dl(R.auth,y,(0,te.m9)(C));return new Qs(J,de=>to(R,de))})).apply(this,arguments)}function Dl(b,y,C){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,v.Z)(function*(b,y,C){var R;const J=yield C.verify();try{let de;if(q("string"==typeof J,b,"argument-error"),q(C.type===ws,b,"argument-error"),de="string"==typeof y?{phoneNumber:y}:y,"session"in de){const We=de.session;if("phoneNumber"in de)return q("enroll"===We.type,b,"internal-error"),(yield function At(b,y){return dt(b,"POST","/v2/accounts/mfaEnrollment:start",ke(b,y))}(b,{idToken:We.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:J}})).phoneSessionInfo.sessionInfo;{q("signin"===We.type,b,"internal-error");const yt=(null===(R=de.multiFactorHint)||void 0===R?void 0:R.uid)||de.multiFactorUid;return q(yt,b,"missing-multi-factor-info"),(yield function io(b,y){return dt(b,"POST","/v2/accounts/mfaSignIn:start",ke(b,y))}(b,{mfaPendingCredential:We.credential,mfaEnrollmentId:yt,phoneSignInInfo:{recaptchaToken:J}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:We}=yield function fo(b,y){return ao.apply(this,arguments)}(b,{phoneNumber:de.phoneNumber,recaptchaToken:J});return We}}finally{C._reset()}}),Tl.apply(this,arguments)}function Io(b,y){return W.apply(this,arguments)}function W(){return(W=(0,v.Z)(function*(b,y){yield rs((0,te.m9)(b),y)})).apply(this,arguments)}let u=(()=>{class b{constructor(C){this.providerId=b.PROVIDER_ID,this.auth=$r(C)}verifyPhoneNumber(C,R){return Dl(this.auth,C,(0,te.m9)(R))}static credential(C,R){return xs._fromVerification(C,R)}static credentialFromResult(C){return b.credentialFromTaggedObject(C)}static credentialFromError(C){return b.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:R,temporaryProof:J}=C;return R&&J?xs._fromTokenResponse(R,J):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function h(b,y){return y?mi(y):(q(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class f extends kt{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Xr(y,this._buildIdpRequest())}_linkToIdToken(y,C){return Xr(y,this._buildIdpRequest(C))}_getReauthenticationResolver(y){return Xr(y,this._buildIdpRequest())}_buildIdpRequest(y){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(C.idToken=y),C}}function I(b){return ar(b.auth,new f(b),b.bypassAuthState)}function S(b){const{auth:y,user:C}=b;return q(C,y,"internal-error"),go(C,new f(b),b.bypassAuthState)}function F(b){return $.apply(this,arguments)}function $(){return($=(0,v.Z)(function*(b){const{auth:y,user:C}=b;return q(C,y,"internal-error"),rs(C,new f(b),b.bypassAuthState)})).apply(this,arguments)}class le{constructor(y,C,R,J,de=!1){this.auth=y,this.resolver=R,this.user=J,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var y=this;return new Promise(function(){var C=(0,v.Z)(function*(R,J){y.pendingPromise={resolve:R,reject:J};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(de){y.reject(de)}});return function(R,J){return C.apply(this,arguments)}}())}onAuthEvent(y){var C=this;return(0,v.Z)(function*(){const{urlResponse:R,sessionId:J,postBody:de,tenantId:We,error:yt,type:Jt}=y;if(yt)return void C.reject(yt);const _n={auth:C.auth,requestUri:R,sessionId:J,tenantId:We||void 0,postBody:de||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(Jt)(_n))}catch(rr){C.reject(rr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return I;case"linkViaPopup":case"linkViaRedirect":return F;case"reauthViaPopup":case"reauthViaRedirect":return S;default:Ze(this.auth,"internal-error")}}resolve(y){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const De=new Sn(2e3,1e4);function Je(b,y,C){return ft.apply(this,arguments)}function ft(){return(ft=(0,v.Z)(function*(b,y,C){const R=$r(b);Dt(b,y,Ee);const J=h(R,C);return new Pr(R,"signInViaPopup",y,J).executeNotNull()})).apply(this,arguments)}function ln(b,y,C){return An.apply(this,arguments)}function An(){return(An=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b);Dt(R.auth,y,Ee);const J=h(R.auth,C);return new Pr(R.auth,"reauthViaPopup",y,J,R).executeNotNull()})).apply(this,arguments)}function Un(b,y,C){return qn.apply(this,arguments)}function qn(){return(qn=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b);Dt(R.auth,y,Ee);const J=h(R.auth,C);return new Pr(R.auth,"linkViaPopup",y,J,R).executeNotNull()})).apply(this,arguments)}let Pr=(()=>{class b extends le{constructor(C,R,J,de,We){super(C,R,de,We),this.provider=J,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var C=this;return(0,v.Z)(function*(){const R=yield C.execute();return q(R,C.auth,"internal-error"),R})()}onExecution(){var C=this;return(0,v.Z)(function*(){fn(1===C.filter.length,"Popup operations only handle one event");const R=Ia();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],R),C.authWindow.associatedEvent=R,C.resolver._originValidation(C.auth).catch(J=>{C.reject(J)}),C.resolver._isIframeWebStorageSupported(C.auth,J=>{J||C.reject(Oe(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const C=()=>{var R,J;this.pollId=null!==(J=null===(R=this.authWindow)||void 0===R?void 0:R.window)&&void 0!==J&&J.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(C,De.get())};C()}}return b.currentPopupAction=null,b})();const tr="pendingRedirect",Bi=new Map;class Xi extends le{constructor(y,C,R=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,R),this.eventId=null}execute(){var y=()=>super.execute,C=this;return(0,v.Z)(function*(){let R=Bi.get(C.auth._key());if(!R){try{const de=(yield function Vs(b,y){return Ii.apply(this,arguments)}(C.resolver,C.auth))?yield y().call(C):null;R=()=>Promise.resolve(de)}catch(J){R=()=>Promise.reject(J)}Bi.set(C.auth._key(),R)}return C.bypassAuthState||Bi.set(C.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(y){var C=()=>super.onAuthEvent,R=this;return(0,v.Z)(function*(){if("signInViaRedirect"===y.type)return C().call(R,y);if("unknown"!==y.type){if(y.eventId){const J=yield R.auth._redirectUserForId(y.eventId);if(J)return R.user=J,C().call(R,y);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function Ii(){return(Ii=(0,v.Z)(function*(b,y){const C=uo(y),R=ko(b);if(!(yield R._isAvailable()))return!1;const J="true"===(yield R._get(C));return yield R._remove(C),J})).apply(this,arguments)}function lo(b,y){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(b,y){return ko(b)._set(uo(y),"true")})).apply(this,arguments)}function Ei(){Bi.clear()}function Wa(b,y){Bi.set(b._key(),y)}function ko(b){return mi(b._redirectPersistence)}function uo(b){return yi(tr,b.config.apiKey,b.name)}function Sl(b,y,C){return function hl(b,y,C){return Us.apply(this,arguments)}(b,y,C)}function Us(){return(Us=(0,v.Z)(function*(b,y,C){const R=$r(b);Dt(b,y,Ee),yield R._initializationPromise;const J=h(R,C);return yield lo(J,R),J._openRedirect(R,y,"signInViaRedirect")})).apply(this,arguments)}function Nu(b,y,C){return function Nn(b,y,C){return hn.apply(this,arguments)}(b,y,C)}function hn(){return(hn=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b);Dt(R.auth,y,Ee),yield R.auth._initializationPromise;const J=h(R.auth,C);yield lo(J,R.auth);const de=yield Ka(R);return J._openRedirect(R.auth,y,"reauthViaRedirect",de)})).apply(this,arguments)}function Yn(b,y,C){return function oi(b,y,C){return fs.apply(this,arguments)}(b,y,C)}function fs(){return(fs=(0,v.Z)(function*(b,y,C){const R=(0,te.m9)(b);Dt(R.auth,y,Ee),yield R.auth._initializationPromise;const J=h(R.auth,C);yield Mo(!1,R,y.providerId),yield lo(J,R.auth);const de=yield Ka(R);return J._openRedirect(R.auth,y,"linkViaRedirect",de)})).apply(this,arguments)}function so(b,y){return oo.apply(this,arguments)}function oo(){return(oo=(0,v.Z)(function*(b,y){return yield $r(b)._initializationPromise,Co(b,y,!1)})).apply(this,arguments)}function Co(b,y){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,v.Z)(function*(b,y,C=!1){const R=$r(b),J=h(R,y),We=yield new Xi(R,J,C).execute();return We&&!C&&(delete We.user._redirectEventId,yield R._persistUserIfCurrent(We.user),yield R._setRedirectUser(null,y)),We})).apply(this,arguments)}function Ka(b){return ga.apply(this,arguments)}function ga(){return(ga=(0,v.Z)(function*(b){const y=Ia(`${b.uid}:::`);return b._redirectEventId=y,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),y})).apply(this,arguments)}class Do{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let C=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(y,R)&&(C=!0,this.sendToConsumer(y,R),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function nl(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bl(b);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=y,C=!0)),C}sendToConsumer(y,C){var R;if(y.error&&!bl(y)){const J=(null===(R=y.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";C.onError(Oe(this.auth,J))}else C.onAuthEvent(y)}isEventForConsumer(y,C){const R=null===C.eventId||!!y.eventId&&y.eventId===C.eventId;return C.filter.includes(y.type)&&R}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gs(y))}saveEventToCache(y){this.cachedEventUids.add(gs(y)),this.lastProcessedEventTime=Date.now()}}function gs(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(y=>y).join("-")}function bl({type:b,error:y}){return"unknown"===b&&"auth/no-auth-event"===y?.code}function _u(b){return Al.apply(this,arguments)}function Al(){return(Al=(0,v.Z)(function*(b,y={}){return dt(b,"GET","/v1/projects",y)})).apply(this,arguments)}const Bl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hu=/^https?/;function fl(){return(fl=(0,v.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:y}=yield _u(b);for(const C of y)try{if(qa(C))return}catch{}Ze(b,"unauthorized-domain")})).apply(this,arguments)}function qa(b){const y=Ut(),{protocol:C,hostname:R}=new URL(y);if(b.startsWith("chrome-extension://")){const We=new URL(b);return""===We.hostname&&""===R?"chrome-extension:"===C&&b.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===C&&We.hostname===R}if(!Hu.test(C))return!1;if(Bl.test(b))return R===b;const J=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+J+"|"+J+")$","i").test(R)}const Sa=new Sn(3e4,6e4);function $l(){const b=is().___jsl;if(b?.H)for(const y of Object.keys(b.H))if(b.H[y].r=b.H[y].r||[],b.H[y].L=b.H[y].L||[],b.H[y].r=[...b.H[y].L],b.CP)for(let C=0;C<b.CP.length;C++)b.CP[C]=null}let su=null;const ou=new Sn(5e3,15e3),Rl="__/auth/iframe",ss="emulator/auth/iframe",dc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},As=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function il(b){const y=b.config;q(y.authDomain,b,"auth-domain-config-required");const C=y.emulator?bn(y,ss):`https://${b.config.authDomain}/${Rl}`,R={apiKey:y.apiKey,appName:b.name,v:j.SDK_VERSION},J=As.get(b.config.apiHost);J&&(R.eid=J);const de=b._getFrameworks();return de.length&&(R.fw=de.join(",")),`${C}?${(0,te.xO)(R).slice(1)}`}function ia(){return ia=(0,v.Z)(function*(b){const y=yield function rl(b){return su=su||function Za(b){return new Promise((y,C)=>{var R,J,de;function We(){$l(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{$l(),C(Oe(b,"network-request-failed"))},timeout:Sa.get()})}if(null!==(J=null===(R=is().gapi)||void 0===R?void 0:R.iframes)&&void 0!==J&&J.Iframe)y(gapi.iframes.getContext());else{if(null===(de=is().gapi)||void 0===de||!de.load){const yt=Zi("iframefcb");return is()[yt]=()=>{gapi.load?We():C(Oe(b,"network-request-failed"))},vr(`https://apis.google.com/js/api.js?onload=${yt}`).catch(Jt=>C(Jt))}We()}}).catch(y=>{throw su=null,y})}(b),su}(b),C=is().gapi;return q(C,b,"internal-error"),y.open({where:document.body,url:il(b),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dc,dontclear:!0},R=>new Promise(function(){var J=(0,v.Z)(function*(de,We){yield R.restyle({setHideOnLeave:!1});const yt=Oe(b,"network-request-failed"),Jt=is().setTimeout(()=>{We(yt)},ou.get());function _n(){is().clearTimeout(Jt),de(R)}R.ping(_n).then(_n,()=>{We(yt)})});return function(de,We){return J.apply(this,arguments)}}()))}),ia.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k=500,X=600,fe="_blank",Re="http://localhost";class ze{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const on="__/auth/handler",Hn="emulator/auth/handler",Mr=encodeURIComponent("fac");function Tr(b,y,C,R,J,de){return To.apply(this,arguments)}function To(){return(To=(0,v.Z)(function*(b,y,C,R,J,de){q(b.config.authDomain,b,"auth-domain-config-required"),q(b.config.apiKey,b,"invalid-api-key");const We={apiKey:b.config.apiKey,appName:b.name,authType:C,redirectUrl:R,v:j.SDK_VERSION,eventId:J};if(y instanceof Ee){y.setDefaultLanguage(b.languageCode),We.providerId=y.providerId||"",(0,te.xb)(y.getCustomParameters())||(We.customParameters=JSON.stringify(y.getCustomParameters()));for(const[rr,Wr]of Object.entries(de||{}))We[rr]=Wr}if(y instanceof Me){const rr=y.getScopes().filter(Wr=>""!==Wr);rr.length>0&&(We.scopes=rr.join(","))}b.tenantId&&(We.tid=b.tenantId);const yt=We;for(const rr of Object.keys(yt))void 0===yt[rr]&&delete yt[rr];const Jt=yield b._getAppCheckToken(),_n=Jt?`#${Mr}=${encodeURIComponent(Jt)}`:"";return`${function Wo({config:b}){return b.emulator?bn(b,Hn):`https://${b.authDomain}/${on}`}(b)}?${(0,te.xO)(yt).slice(1)}${_n}`})).apply(this,arguments)}const Ml="webStorageSupport",Jl=class zu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ea,this._completeRedirectFn=Co,this._overrideRedirectResult=Wa}_openPopup(y,C,R,J){var de=this;return(0,v.Z)(function*(){var We;fn(null===(We=de.eventManagers[y._key()])||void 0===We?void 0:We.manager,"_initialize() not called before _openPopup()");const yt=yield Tr(y,C,R,Ut(),J);return function vt(b,y,C,R=k,J=X){const de=Math.max((window.screen.availHeight-J)/2,0).toString(),We=Math.max((window.screen.availWidth-R)/2,0).toString();let yt="";const Jt=Object.assign(Object.assign({},A),{width:R.toString(),height:J.toString(),top:de,left:We}),_n=(0,te.z$)().toLowerCase();C&&(yt=ne(_n)?fe:C),oe(_n)&&(y=y||Re,Jt.scrollbars="yes");const rr=Object.entries(Jt).reduce((Ra,[Ko,Wu])=>`${Ra}${Ko}=${Wu},`,"");if(function St(b=(0,te.z$)()){var y;return Le(b)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(_n)&&"_self"!==yt)return function an(b,y){const C=document.createElement("a");C.href=b,C.target=y;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(R)}(y||"",yt),new ze(null);const Wr=window.open(y||"",yt,rr);q(Wr,b,"popup-blocked");try{Wr.focus()}catch{}return new ze(Wr)}(y,yt,Ia())})()}_openRedirect(y,C,R,J){var de=this;return(0,v.Z)(function*(){return yield de._originValidation(y),function lr(b){is().location.href=b}(yield Tr(y,C,R,Ut(),J)),new Promise(()=>{})})()}_initialize(y){const C=y._key();if(this.eventManagers[C]){const{manager:J,promise:de}=this.eventManagers[C];return J?Promise.resolve(J):(fn(de,"If manager is not set, promise should be"),de)}const R=this.initAndGetManager(y);return this.eventManagers[C]={promise:R},R.catch(()=>{delete this.eventManagers[C]}),R}initAndGetManager(y){var C=this;return(0,v.Z)(function*(){const R=yield function xu(b){return ia.apply(this,arguments)}(y),J=new Do(y);return R.register("authEvent",de=>(q(de?.authEvent,y,"invalid-auth-event"),{status:J.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[y._key()]={manager:J},C.iframes[y._key()]=R,J})()}_isIframeWebStorageSupported(y,C){this.iframes[y._key()].send(Ml,{type:Ml},J=>{var de;const We=null===(de=J?.[0])||void 0===de?void 0:de[Ml];void 0!==We&&C(!!We),Ze(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const C=y._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function vu(b){return fl.apply(this,arguments)}(y)),this.originValidationPromises[C]}get _shouldInitProactively(){return Dn()||he()||Le()}};class Na{constructor(y){this.factorId=y}_process(y,C,R){switch(C.type){case"enroll":return this._finalizeEnroll(y,C.credential,R);case"signin":return this._finalizeSignIn(y,C.credential);default:return Bt("unexpected MultiFactorSessionType")}}}class ba extends Na{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ba(y)}_finalizeEnroll(y,C,R){return function On(b,y){return dt(b,"POST","/v2/accounts/mfaEnrollment:finalize",ke(b,y))}(y,{idToken:C,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,C){return function na(b,y){return dt(b,"POST","/v2/accounts/mfaSignIn:finalize",ke(b,y))}(y,{mfaPendingCredential:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hc=(()=>{class b{constructor(){}static assertion(C){return ba._fromCredential(C)}}return b.FACTOR_ID="phone",b})();var au="@firebase/auth";class Aa{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var C=this;return(0,v.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const C=this.auth.onIdTokenChanged(R=>{y(R?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,C),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const C=this.internalListeners.get(y);C&&(this.internalListeners.delete(y),C(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const gc=(0,te.Pz)("authIdTokenMaxAge")||300;let gl=null;const gd=b=>function(){var y=(0,v.Z)(function*(C){const R=C&&(yield C.getIdTokenResult()),J=R&&((new Date).getTime()-Date.parse(R.issuedAtTime))/1e3;if(J&&J>gc)return;const de=R?.token;gl!==de&&(gl=de,yield fetch(b,{method:de?"POST":"DELETE",headers:de?{Authorization:`Bearer ${de}`}:{}}))});return function(C){return y.apply(this,arguments)}}();function mc(b=(0,j.getApp)()){const y=(0,j._getProvider)(b,"auth");if(y.isInitialized())return y.getImmediate();const C=function ji(b,y){const C=(0,j._getProvider)(b,"auth");if(C.isInitialized()){const J=C.getImmediate(),de=C.getOptions();if((0,te.vZ)(de,y??{}))return J;Ze(J,"already-initialized")}return C.initialize({options:y})}(b,{popupRedirectResolver:Jl,persistence:[Cl,Fl,ea]}),R=(0,te.Pz)("authTokenSyncURL");if(R){const de=gd(R);(function V(b,y,C){(0,te.m9)(b).beforeAuthStateChanged(y,C)})(C,de,()=>de(C.currentUser)),function K(b,y,C,R){(0,te.m9)(b).onIdTokenChanged(y,C,R)}(C,We=>de(We))}const J=(0,te.q4)("auth");return J&&Yr(C,`http://${J}`),C}!function Gu(b){(0,j._registerComponent)(new Fe.wA("auth",(y,{options:C})=>{const R=y.getProvider("app").getImmediate(),J=y.getProvider("heartbeat"),de=y.getProvider("app-check-internal"),{apiKey:We,authDomain:yt}=R.options;q(We&&!We.includes(":"),"invalid-api-key",{appName:R.name});const Jt={apiKey:We,authDomain:yt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Li(b)},_n=new Zr(R,J,de,Jt);return function Hs(b,y){const C=y?.persistence||[],R=(Array.isArray(C)?C:[C]).map(mi);y?.errorMap&&b._updateErrorMap(y.errorMap),b._initializeWithPersistence(R,y?.popupRedirectResolver)}(_n,C),_n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,C,R)=>{y.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new Fe.wA("auth-internal",y=>{const C=$r(y.getProvider("auth").getImmediate());return new Aa(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)(au,"0.23.2",function pc(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,j.registerVersion)(au,"0.23.2","esm2017")}("Browser")},2810:(rn,tt,G)=>{G.d(tt,{u7:()=>Ip,Jj:()=>ac,IX:()=>Jm,my:()=>qo,xU:()=>hd,Lz:()=>lc,WA:()=>Mt,F8:()=>Xh,$q:()=>uf,W:()=>$u,EK:()=>es,PU:()=>qg,l7:()=>Co,Ky:()=>Xt,Xb:()=>Dr,Cf:()=>Fi,K9:()=>ks,Me:()=>hl,yq:()=>si,Wi:()=>xg,ET:()=>X_,Ab:()=>by,vr:()=>lv,Fc:()=>O_,hJ:()=>kg,B$:()=>Ru,at:()=>Ym,oe:()=>Iy,AK:()=>av,TF:()=>ty,JU:()=>Qm,ST:()=>Qh,fH:()=>x_,Ix:()=>ey,Wu:()=>wp,Lx:()=>G_,qY:()=>_a,GL:()=>ah,QT:()=>vy,kl:()=>cf,Xk:()=>df,PL:()=>Z_,UQ:()=>Y_,zN:()=>Q_,ad:()=>N_,nP:()=>uv,b9:()=>Zv,vh:()=>kr,Pb:()=>F_,L$:()=>ny,cf:()=>Cy,sc:()=>J_,Xo:()=>py,IO:()=>cd,iE:()=>mu,Eo:()=>P_,i3:()=>hf,Bt:()=>Sy,pl:()=>Ey,Ub:()=>Ir,qK:()=>_y,TQ:()=>z_,e0:()=>H_,r7:()=>wy,Mx:()=>k_,ar:()=>j_});var ye,v=G(5861),te=G(6881),j=G(4859),Pe=G(1877),Ce=G(2090),Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e={},qe=qe||{},ce=Fe||self;function ge(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Ne(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var gt="closure_uid_"+(1e9*Math.random()>>>0),Pt=0;function jt(r,e,t){return r.call.apply(r.bind,arguments)}function ot(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function mt(r,e,t){return(mt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jt:ot).apply(null,arguments)}function Et(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function _t(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,m){for(var w=Array(arguments.length-2),M=2;M<arguments.length;M++)w[M-2]=arguments[M];return e.prototype[a].apply(s,w)}}function Ze(){this.s=this.s,this.o=this.o}Ze.prototype.s=!1,Ze.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function at(r){Object.prototype.hasOwnProperty.call(r,gt)&&r[gt]||(r[gt]=++Pt)}(this)},Ze.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rt=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Dt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function lt(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ge(s)){const a=r.length||0,m=s.length||0;r.length=a+m;for(let w=0;w<m;w++)r[a+w]=s[w]}else r.push(s)}}function q(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Bt=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{ce.addEventListener("test",()=>{},e),ce.removeEventListener("test",()=>{},e)}catch{}return r}();function fn(r){return/^[\s\xa0]*$/.test(r)}function Ut(){var r=ce.navigator;return r&&(r=r.userAgent)?r:""}function Lt(r){return-1!=Ut().indexOf(r)}function Vt(r){return Vt[" "](r),r}Vt[" "]=function(){};var dt,r,Er=Lt("Opera"),Sn=Lt("Trident")||Lt("MSIE"),bn=Lt("Edge"),Be=bn||Sn,je=Lt("Gecko")&&!(-1!=Ut().toLowerCase().indexOf("webkit")&&!Lt("Edge"))&&!(Lt("Trident")||Lt("MSIE"))&&!Lt("Edge"),Ye=-1!=Ut().toLowerCase().indexOf("webkit")&&!Lt("Edge");function ke(){var r=ce.document;return r?r.documentMode:void 0}e:{var Tt="",$t=(r=Ut(),je?/rv:([^\);]+)(\)|;)/.exec(r):bn?/Edge\/([\d\.]+)/.exec(r):Sn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Ye?/WebKit\/(\S+)/.exec(r):Er?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if($t&&(Tt=$t?$t[1]:""),Sn){var Zt=ke();if(null!=Zt&&Zt>parseFloat(Tt)){dt=String(Zt);break e}}dt=Tt}var zn=ce.document&&Sn&&(ke()||parseInt(dt,10))||void 0;function nr(r,e){if(q.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(je){e:{try{Vt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Fn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&nr.$.h.call(this)}}_t(nr,q);var Fn={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Sr="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function Ar(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Gt,this.fa=this.ia=!1}function fr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function br(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Yt(r){const e={};for(const t in r)e[t]=r[t];return e}const In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gi(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let m=0;m<In.length;m++)t=In[m],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function qr(r){this.src=r,this.g={},this.h=0}function Qn(r,e){var t=e.type;if(t in r.g){var m,s=r.g[t],a=rt(s,e);(m=0<=a)&&Array.prototype.splice.call(s,a,1),m&&(fr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Ki(r,e,t,s){for(var a=0;a<r.length;++a){var m=r[a];if(!m.fa&&m.listener==e&&m.capture==!!t&&m.la==s)return a}return-1}qr.prototype.add=function(r,e,t,s,a){var m=r.toString();(r=this.g[m])||(r=this.g[m]=[],this.h++);var w=Ki(r,e,s,a);return-1<w?(e=r[w],t||(e.ia=!1)):((e=new Ar(e,this.src,m,!!s,a)).ia=t,r.push(e)),e};var Ln="closure_lm_"+(1e6*Math.random()|0),xn={};function sn(r,e,t,s,a){if(s&&s.once)return wi(r,e,t,s,a);if(Array.isArray(e)){for(var m=0;m<e.length;m++)sn(r,e[m],t,s,a);return null}return t=Cn(t),r&&r[Sr]?r.O(e,t,Ne(s)?!!s.capture:!!s,a):Rn(r,e,t,!1,s,a)}function Rn(r,e,t,s,a,m){if(!e)throw Error("Invalid event type");var w=Ne(a)?!!a.capture:!!a,M=Xn(r);if(M||(r[Ln]=M=new qr(r)),(t=M.add(e,t,s,w,m)).proxy)return t;if(s=function li(){const e=ci;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Bt||(a=w),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(Lr(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function wi(r,e,t,s,a){if(Array.isArray(e)){for(var m=0;m<e.length;m++)wi(r,e[m],t,s,a);return null}return t=Cn(t),r&&r[Sr]?r.P(e,t,Ne(s)?!!s.capture:!!s,a):Rn(r,e,t,!0,s,a)}function Br(r,e,t,s,a){if(Array.isArray(e))for(var m=0;m<e.length;m++)Br(r,e[m],t,s,a);else s=Ne(s)?!!s.capture:!!s,t=Cn(t),r&&r[Sr]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Ki(m=r.g[e],t,s,a))&&(fr(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete r.g[e],r.h--))):r&&(r=Xn(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Ki(e,t,s,a)),(t=-1<r?e[r]:null)&&ui(t))}function ui(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[Sr])Qn(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(Lr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Xn(e))?(Qn(t,r),0==t.h&&(t.src=null,e[Ln]=null)):fr(r)}}}function Lr(r){return r in xn?xn[r]:xn[r]="on"+r}function ci(r,e){if(r.fa)r=!0;else{e=new nr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&ui(r),r=t.call(s,e)}return r}function Xn(r){return(r=r[Ln])instanceof qr?r:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(r){return"function"==typeof r?r:(r[Nr]||(r[Nr]=function(e){return r.handleEvent(e)}),r[Nr])}function Qt(){Ze.call(this),this.i=new qr(this),this.S=this,this.J=null}function qt(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new q(e,r);else if(e instanceof q)e.target=e.target||r;else{var a=e;gi(e=new q(s,r),a)}if(a=!0,t)for(var m=t.length-1;0<=m;m--){var w=e.g=t[m];a=ri(w,s,!0,e)&&a}if(a=ri(w=e.g=r,s,!0,e)&&a,a=ri(w,s,!1,e)&&a,t)for(m=0;m<t.length;m++)a=ri(w=e.g=t[m],s,!1,e)&&a}function ri(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,m=0;m<e.length;++m){var w=e[m];if(w&&!w.fa&&w.capture==t){var M=w.listener,H=w.la||w.src;w.ia&&Qn(r.i,w),a=!1!==M.call(H,s)&&a}}return a&&!s.defaultPrevented}_t(Qt,Ze),Qt.prototype[Sr]=!0,Qt.prototype.removeEventListener=function(r,e,t,s){Br(this,r,e,t,s)},Qt.prototype.N=function(){if(Qt.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)fr(t[s]);delete r.g[e],r.h--}}this.J=null},Qt.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Qt.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Vr=ce.JSON.stringify;function mi(){var r=ne;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Ni=new class Pi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new yi,r=>r.reset());class yi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function be(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function we(r){ce.setTimeout(()=>{throw r},0)}let oe,he=!1,ne=new class qi{constructor(){this.h=this.g=null}add(e,t){const s=Ni.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Se=()=>{const r=ce.Promise.resolve(void 0);oe=()=>{r.then(me)}};var me=()=>{for(var r;r=mi();){try{r.h.call(r.g)}catch(t){we(t)}var e=Ni;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}he=!1};function ve(r,e){Qt.call(this),this.h=r||1,this.g=e||ce,this.j=mt(this.qb,this),this.l=Date.now()}function pe(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function Le(r,e,t){if("function"==typeof r)t&&(r=mt(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=mt(r.handleEvent,r)}return 2147483647<Number(e)?-1:ce.setTimeout(r,e||0)}function nt(r){r.g=Le(()=>{r.g=null,r.i&&(r.i=!1,nt(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}_t(ve,Qt),(ye=ve.prototype).ga=!1,ye.T=null,ye.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qt(this,"tick"),this.ga&&(pe(this),this.start()))}},ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ye.N=function(){ve.$.N.call(this),pe(this),delete this.g};class St extends Ze{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mn(r){Ze.call(this),this.h=r,this.g={}}_t(mn,Ze);var Dn=[];function xr(r,e,t,s){Array.isArray(t)||(t&&(Dn[0]=t.toString()),t=Dn);for(var a=0;a<t.length;a++){var m=sn(e,t[a],s||r.handleEvent,!1,r.h||r);if(!m)break;r.g[m.key]=m}}function Li(r){br(r.g,function(e,t){this.g.hasOwnProperty(t)&&ui(e)},r),r.g={}}function ht(){this.g=!0}function pn(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ir(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var m=a[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var w=1;w<a.length;w++)a[w]=""}}}return Vr(t)}catch{return e}}(r,t)+(s?" "+s:"")})}mn.prototype.N=function(){mn.$.N.call(this),Li(this)},mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ht.prototype.Ea=function(){this.g=!1},ht.prototype.info=function(){};var gn={},Cr=null;function vr(){return Cr=Cr||new Qt}function Zi(r){q.call(this,gn.Ta,r)}function _i(r){const e=vr();qt(e,new Zi(e))}function Js(r,e){q.call(this,gn.STAT_EVENT,r),this.stat=e}function gr(r){const e=vr();qt(e,new Js(e,r))}function Rs(r,e){q.call(this,gn.Ua,r),this.size=e}function Vi(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){r()},e)}gn.Ta="serverreachability",_t(Zi,q),gn.STAT_EVENT="statevent",_t(Js,q),gn.Ua="timingevent",_t(Rs,q);var Kt={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zr(){}function $i(){}Zr.prototype.h=null;var Ge,ji={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hs(){q.call(this,"d")}function Yr(){q.call(this,"c")}function Ue(){}function Ve(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new mn(this),this.P=kt,this.V=new ve(r=Be?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}_t(Hs,q),_t(Yr,q),_t(Ue,Zr),Ue.prototype.g=function(){return new XMLHttpRequest},Ue.prototype.i=function(){return{}},Ge=new Ue;var kt=45e3,Mn={},Bn={};function Tn(r,e,t){r.L=1,r.v=Bs(Cs(e)),r.s=t,r.S=!0,mr(r,null)}function mr(r,e){r.G=Date.now(),Qr(r),r.A=Cs(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Ro(t.i,"t",s),r.C=0,t=r.l.J,r.h=new wt,r.g=xo(r.l,t?e:null,!r.s),0<r.O&&(r.M=new St(mt(r.Pa,r,r.g),r.O)),xr(r.U,r.g,"readystatechange",r.nb),e=r.I?Yt(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),_i(),function Qe(r,e,t,s,a,m){r.info(function(){if(r.g)if(m)for(var w="",M=m.split("&"),H=0;H<M.length;H++){var Y=M[H].split("=");if(1<Y.length){var ue=Y[0];Y=Y[1];var Ae=ue.split("_");w=2<=Ae.length&&"type"==Ae[1]?w+(ue+"=")+Y+"&":w+(ue+"=redacted&")}}else w=null;else w=m;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+w})}(r.j,r.u,r.A,r.m,r.W,r.s)}function ns(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function xi(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=Yi(r,t),a==Bn){4==e&&(r.o=4,gr(14),s=!1),pn(r.j,r.m,null,"[Incomplete Response]");break}if(a==Mn){r.o=4,gr(15),pn(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}pn(r.j,r.m,a,null),wr(r,a)}ns(r)&&a!=Bn&&a!=Mn&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,gr(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),zi(e),e.M=!0,gr(11))):(pn(r.j,r.m,t,"[Invalid Chunked Response]"),yr(r),ho(r))}function Yi(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Bn:(t=Number(e.substring(t,s)),isNaN(t)?Mn:(s+=1)+t>e.length?Bn:(e=e.slice(s,s+t),r.C=s+t,e))}function Qr(r){r.Y=Date.now()+r.P,ii(r,r.P)}function ii(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Vi(mt(r.lb,r),e)}function ms(r){r.B&&(ce.clearTimeout(r.B),r.B=null)}function ho(r){0==r.l.H||r.J||Uo(r.l,r)}function yr(r){ms(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,pe(r.V),Li(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function wr(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||pt(t.i,r)))if(!r.K&&pt(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Ws(t),No(t)}Gr(t),gr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Vi(mt(t.ib,t),6e3));if(1>=He(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ks(t,11)}else if((r.K||t.g==r)&&Ws(t),!fn(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let Y=a[e];if(t.V=Y[0],Y=Y[1],2==t.H)if("c"==Y[0]){t.K=Y[1],t.pa=Y[2];const ue=Y[3];null!=ue&&(t.ra=ue,t.l.info("VER="+t.ra));const Ae=Y[4];null!=Ae&&(t.Ga=Ae,t.l.info("SVER="+t.Ga));const st=Y[5];null!=st&&"number"==typeof st&&0<st&&(t.L=s=1.5*st,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const Rt=r.g;if(Rt){const en=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(en){var m=s.i;m.g||-1==en.indexOf("spdy")&&-1==en.indexOf("quic")&&-1==en.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Ot(m,m.h),m.h=null))}if(s.F){const kn=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;kn&&(s.Da=kn,Xr(s.I,s.F,kn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var w=r;if((s=t).wa=Ps(s,s.J?s.pa:null,s.Y),w.K){vn(s.i,w);var M=w,H=s.L;H&&M.setTimeout(H),M.B&&(ms(M),Qr(M)),s.g=w}else dn(s);0<t.j.length&&x(t)}else"stop"!=Y[0]&&"close"!=Y[0]||Ks(t,7);else 3==t.H&&("stop"==Y[0]||"close"==Y[0]?"stop"==Y[0]?Ks(t,7):La(t):"noop"!=Y[0]&&t.h&&t.h.Aa(Y),t.A=0)}_i()}catch{}}function Jn(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(ge(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function cs(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(ge(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function cr(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(ge(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,m=0;m<a;m++)e.call(void 0,s[m],t&&t[m],r)}(ye=Ve.prototype).setTimeout=function(r){this.P=r},ye.nb=function(r){r=r.target;const e=this.M;e&&3==vs(r)?e.l():this.Pa(r)},ye.Pa=function(r){try{if(r==this.g)e:{const ue=vs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ue)&&(3!=ue||Be||this.g&&(this.h.h||this.g.ja()||Kn(this.g)))){this.J||4!=ue||7==e||_i(),ms(this);var t=this.g.da();this.ca=t;t:if(ns(this)){var s=Kn(this.g);r="";var a=s.length,m=4==vs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yr(this),ho(this);var w="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:m&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,w=this.h.g}else w=this.g.ja();if(this.i=200==t,function xt(r,e,t,s,a,m,w){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+m+" "+w})}(this.j,this.u,this.A,this.m,this.W,ue,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,H=this.g;if((M=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fn(M)){var Y=M;break t}}Y=null}if(!(t=Y)){this.i=!1,this.o=3,gr(12),yr(this),ho(this);break e}pn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wr(this,t)}this.S?(xi(this,ue,w),Be&&this.i&&3==ue&&(xr(this.U,this.V,"tick",this.mb),this.V.start())):(pn(this.j,this.m,w,null),wr(this,w)),4==ue&&yr(this),this.i&&!this.J&&(4==ue?Uo(this.l,this):(this.i=!1,Qr(this)))}else(function aa(r){const e={};r=(r.g&&2<=vs(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(fn(r[s]))continue;var t=be(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const m=e[a]||[];e[a]=m,m.push(t)}!function Wn(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<w.indexOf("Unknown SID")?(this.o=3,gr(12)):(this.o=0,gr(13)),yr(this),ho(this)}}}catch{}},ye.mb=function(){if(this.g){var r=vs(this.g),e=this.g.ja();this.C<e.length&&(ms(this),xi(this,r,e),this.i&&4!=r&&Qr(this))}},ye.cancel=function(){this.J=!0,yr(this)},ye.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Pn(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(_i(),gr(17)),yr(this),this.o=2,ho(this)):ii(this,this.Y-r)};var Fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hi(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Hi){this.h=r.h,jr(this,r.j),this.s=r.s,this.g=r.g,sr(this,r.m),this.l=r.l;var e=r.i,t=new eo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vi(this,t),this.o=r.o}else r&&(e=String(r).match(Fo))?(this.h=!1,jr(this,e[1]||"",!0),this.s=os(e[2]||""),this.g=os(e[3]||"",!0),sr(this,e[4]),this.l=os(e[5]||"",!0),vi(this,e[6]||"",!0),this.o=os(e[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}function Cs(r){return new Hi(r)}function jr(r,e,t){r.j=t?os(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function sr(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function vi(r,e,t){e instanceof eo?(r.i=e,function Ms(r,e){e&&!r.j&&(as(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Ao(this,s),Ro(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=ys(e,Lo)),r.i=new eo(e,r.h))}function Xr(r,e,t){r.i.set(e,t)}function Bs(r){return Xr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function os(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function ys(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,fo),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function fo(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Hi.prototype.toString=function(){var r=[],e=this.j;e&&r.push(ys(e,ao,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(ys(e,ao,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(ys(t,"/"==t.charAt(0)?zs:po,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",ys(t,Gs)),r.join("")};var ao=/[#\/\?@]/g,po=/[#\?:]/g,zs=/[#\?]/g,Lo=/[#\?@]/g,Gs=/#/g;function eo(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function as(r){r.g||(r.g=new Map,r.h=0,r.i&&function Is(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var m=r[t].substring(0,s);a=r[t].substring(s+1)}else m=r[t];e(m,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ao(r,e){as(r),e=$s(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function xs(r,e){return as(r),e=$s(r,e),r.g.has(e)}function Ro(r,e,t){Ao(r,e),0<t.length&&(r.i=null,r.g.set($s(r,e),Dt(t)),r.h+=t.length)}function $s(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ee(r){this.l=r||Ee,r=ce.PerformanceNavigationTiming?0<(r=ce.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(ce.g&&ce.g.Ka&&ce.g.Ka()&&ce.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ye=eo.prototype).add=function(r,e){as(this),this.i=null,r=$s(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},ye.forEach=function(r,e){as(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},ye.ta=function(){as(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let m=0;m<a.length;m++)t.push(e[s])}return t},ye.Z=function(r){as(this);let e=[];if("string"==typeof r)xs(this,r)&&(e=e.concat(this.g.get($s(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},ye.set=function(r,e){return as(this),this.i=null,xs(this,r=$s(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},ye.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const m=encodeURIComponent(String(s)),w=this.Z(s);for(s=0;s<w.length;s++){var a=m;""!==w[s]&&(a+="="+encodeURIComponent(String(w[s]))),r.push(a)}}return this.i=r.join("&")};var Ee=10;function Me(r){return!!r.h||!!r.g&&r.g.size>=r.j}function He(r){return r.h?1:r.g?r.g.size:0}function pt(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Ot(r,e){r.g?r.g.add(e):r.h=e}function vn(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function tn(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Dt(r.i)}ee.prototype.cancel=function(){if(this.i=tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}};var er=class{stringify(r){return ce.JSON.stringify(r,void 0)}parse(r){return ce.JSON.parse(r,void 0)}};function _r(){this.g=new er}function Hr(r,e,t){const s=t||"";try{Jn(r,function(a,m){let w=a;Ne(a)&&(w=Vr(a)),e.push(s+m+"="+encodeURIComponent(w))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function di(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Jr(r){this.l=r.fc||null,this.j=r.ob||!1}function Rr(r,e){Qt.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=zr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(Jr,Zr),Jr.prototype.g=function(){return new Rr(this.l,this.j)},Jr.prototype.i=function(r){return function(){return r}}({}),_t(Rr,Qt);var zr=0;function ds(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function pr(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Si(r)}function Si(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(ye=Rr.prototype).open=function(r,e){if(this.readyState!=zr)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Si(this)},ye.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||ce).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pr(this)),this.readyState=zr},ye.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ds(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},ye.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?pr(this):Si(this),3==this.readyState&&ds(this)}},ye.Za=function(r){this.g&&(this.response=this.responseText=r,pr(this))},ye.Ya=function(r){this.g&&(this.response=r,pr(this))},ye.ka=function(){this.g&&pr(this)},ye.setRequestHeader=function(r,e){this.v.append(r,e)},ye.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},ye.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Rr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var bi=ce.JSON.parse;function hr(r){Qt.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fr,this.L=this.M=!1}_t(hr,Qt);var Fr="",Yo=/^https?$/i,rs=["POST","PUT"];function Mo(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Oi(r),_s(r)}function Oi(r){r.F||(r.F=!0,qt(r,"complete"),qt(r,"error"))}function go(r){if(r.h&&typeof qe<"u"&&(!r.C[1]||4!=vs(r)||2!=r.da()))if(r.v&&4==vs(r))Le(r.La,0,r);else if(qt(r,"readystatechange"),4==vs(r)){r.h=!1;try{const w=r.da();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===w){var a=String(r.I).match(Fo)[1]||null;!a&&ce.self&&ce.self.location&&(a=ce.self.location.protocol.slice(0,-1)),s=!Yo.test(a?a.toLowerCase():"")}t=s}if(t)qt(r,"complete"),qt(r,"success");else{r.m=6;try{var m=2<vs(r)?r.g.statusText:""}catch{m=""}r.j=m+" ["+r.da()+"]",Oi(r)}}finally{_s(r)}}}function _s(r,e){if(r.g){ar(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||qt(r,"ready");try{t.onreadystatechange=s}catch{}}}function ar(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(ce.clearTimeout(r.A),r.A=null)}function vs(r){return r.g?r.g.readyState:0}function Kn(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case Fr:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Ui(r){let e="";return br(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function la(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Ui(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Xr(r,e,t))}function to(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Po(r){this.Ga=0,this.j=[],this.l=new ht,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=to("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=to("baseRetryDelayMs",5e3,r),this.hb=to("retryDelaySeedMs",1e4,r),this.eb=to("forwardChannelMaxRetries",2,r),this.xa=to("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new ee(r&&r.concurrentRequestLimit),this.Ja=new _r,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function La(r){if(Vo(r),3==r.H){var e=r.W++,t=Cs(r.I);if(Xr(t,"SID",r.K),Xr(t,"RID",e),Xr(t,"TYPE","terminate"),re(r,t),(e=new Ve(r,r.l,e)).L=2,e.v=Bs(Cs(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon)try{t=ce.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=xo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Qr(e)}Es(r)}function No(r){r.g&&(zi(r),r.g.cancel(),r.g=null)}function Vo(r){No(r),r.u&&(ce.clearTimeout(r.u),r.u=null),Ws(r),r.i.cancel(),r.m&&("number"==typeof r.m&&ce.clearTimeout(r.m),r.m=null)}function x(r){if(!Me(r.i)&&!r.m){r.m=!0;var e=r.Na;oe||Se(),he||(oe(),he=!0),ne.add(e,r),r.C=0}}function L(r,e){var t;t=e?e.m:r.W++;const s=Cs(r.I);Xr(s,"SID",r.K),Xr(s,"RID",t),Xr(s,"AID",r.V),re(r,s),r.o&&r.s&&la(s,r.o,r.s),t=new Ve(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=Xe(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Ot(r.i,t),Tn(t,s,e)}function re(r,e){r.na&&br(r.na,function(t,s){Xr(e,s,t)}),r.h&&Jn({},function(t,s){Xr(e,s,t)})}function Xe(r,e,t){t=Math.min(r.j.length,t);var s=r.h?mt(r.h.Va,r.h,r):null;e:{var a=r.j;let m=-1;for(;;){const w=["count="+t];-1==m?0<t?(m=a[0].g,w.push("ofs="+m)):m=0:w.push("ofs="+m);let M=!0;for(let H=0;H<t;H++){let Y=a[H].g;const ue=a[H].map;if(Y-=m,0>Y)m=Math.max(0,a[H].g-100),M=!1;else try{Hr(ue,w,"req"+Y+"_")}catch{s&&s(ue)}}if(M){s=w.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function dn(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;oe||Se(),he||(oe(),he=!0),ne.add(e,r),r.A=0}}function Gr(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Vi(mt(r.Ma,r),Ds(r,r.A)),r.A++,0))}function zi(r){null!=r.B&&(ce.clearTimeout(r.B),r.B=null)}function mo(r){r.g=new Ve(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Cs(r.wa);Xr(e,"RID","rpc"),Xr(e,"SID",r.K),Xr(e,"AID",r.V),Xr(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&Xr(e,"TO",r.qa),Xr(e,"TYPE","xmlhttp"),re(r,e),r.o&&r.s&&la(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=Bs(Cs(e)),t.s=null,t.S=!0,mr(t,r)}function Ws(r){null!=r.v&&(ce.clearTimeout(r.v),r.v=null)}function Uo(r,e){var t=null;if(r.g==e){Ws(r),zi(r),r.g=null;var s=2}else{if(!pt(r.i,e))return;t=e.F,vn(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;qt(s=vr(),new Rs(s,t)),x(r)}else dn(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function B(r,e){return!(He(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Vi(mt(r.Na,r,e),Ds(r,r.C)),r.C++,0)))}(r,e)||2==s&&Gr(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:Ks(r,5);break;case 4:Ks(r,10);break;case 3:Ks(r,6);break;default:Ks(r,2)}}function Ds(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function Ks(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=mt(r.pb,r);t||(t=new Hi("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||jr(t,"https"),Bs(t)),function Ti(r,e){const t=new ht;if(ce.Image){const s=new Image;s.onload=Et(di,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Et(di,t,s,"TestLoadImage: error",!1,e),s.onabort=Et(di,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Et(di,t,s,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else gr(2);r.H=0,r.h&&r.h.za(e),Es(r),Vo(r)}function Es(r){if(r.H=0,r.ma=[],r.h){const e=tn(r.i);(0!=e.length||0!=r.j.length)&&(lt(r.ma,e),lt(r.ma,r.j),r.i.i.length=0,Dt(r.j),r.j.length=0),r.h.ya()}}function Ps(r,e,t){var s=t instanceof Hi?Cs(t):new Hi(t);if(""!=s.g)e&&(s.g=e+"."+s.g),sr(s,s.m);else{var a=ce.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var m=new Hi(null);s&&jr(m,s),e&&(m.g=e),a&&sr(m,a),t&&(m.l=t),s=m}return e=r.Da,(t=r.F)&&e&&Xr(s,t,e),Xr(s,"VER",r.ra),re(r,s),s}function xo(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&r.Ha&&!r.va?new Jr({ob:!0}):r.va)).Oa(r.J),e}function qs(){}function yo(){if(Sn&&!(10<=Number(zn)))throw Error("Environmental error: no available transport.")}function Os(r,e){Qt.call(this),this.g=new Po(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!fn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Qo(this)}function _o(r){Hs.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ul(){Yr.call(this),this.status=1}function Qo(r){this.g=r}function Zs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ua(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var m=r.g[3],w=(e=r.g[0])+(m^(t=r.g[1])&((a=r.g[2])^m))+s[0]+3614090360&4294967295;w=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=(t=(a=(m=(e=t+(w<<7&4294967295|w>>>25))+((w=m+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|w>>>20))+((w=a+(t^m&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^a&(m^e))+s[3]+3250441966&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(a^m))+s[4]+4118548399&4294967295)<<7&4294967295|w>>>25))+((w=m+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|w>>>20))+((w=a+(t^m&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^a&(m^e))+s[7]+4249261313&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(a^m))+s[8]+1770035416&4294967295)<<7&4294967295|w>>>25))+((w=m+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|w>>>20))+((w=a+(t^m&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^a&(m^e))+s[11]+2304563134&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(a^m))+s[12]+1804603682&4294967295)<<7&4294967295|w>>>25))+((w=m+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|w>>>20))+((w=a+(t^m&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^a&(m^e))+s[15]+1236535329&4294967295)<<22&4294967295|w>>>10))+((w=e+(a^m&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|w>>>23))+((w=a+(e^t&(m^e))+s[11]+643717713&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(a^m))+s[0]+3921069994&4294967295)<<20&4294967295|w>>>12))+((w=e+(a^m&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|w>>>23))+((w=a+(e^t&(m^e))+s[15]+3634488961&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(a^m))+s[4]+3889429448&4294967295)<<20&4294967295|w>>>12))+((w=e+(a^m&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|w>>>23))+((w=a+(e^t&(m^e))+s[3]+4107603335&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(a^m))+s[8]+1163531501&4294967295)<<20&4294967295|w>>>12))+((w=e+(a^m&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|w>>>23))+((w=a+(e^t&(m^e))+s[7]+1735328473&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(a^m))+s[12]+2368359562&4294967295)<<20&4294967295|w>>>12))+((w=e+(t^a^m)+s[5]+4294588738&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|w>>>21))+((w=a+(m^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|w>>>16))+((w=t+(a^m^e)+s[14]+4259657740&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^a^m)+s[1]+2763975236&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|w>>>21))+((w=a+(m^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|w>>>16))+((w=t+(a^m^e)+s[10]+3200236656&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^a^m)+s[13]+681279174&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|w>>>21))+((w=a+(m^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|w>>>16))+((w=t+(a^m^e)+s[6]+76029189&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^a^m)+s[9]+3654602809&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|w>>>21))+((w=a+(m^e^t)+s[15]+530742520&4294967295)<<16&4294967295|w>>>16))+((w=t+(a^m^e)+s[2]+3299628645&4294967295)<<23&4294967295|w>>>9))+((w=e+(a^(t|~m))+s[0]+4096336452&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|w>>>22))+((w=a+(e^(m|~t))+s[14]+2878612391&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|w>>>11))+((w=e+(a^(t|~m))+s[12]+1700485571&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|w>>>22))+((w=a+(e^(m|~t))+s[10]+4293915773&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|w>>>11))+((w=e+(a^(t|~m))+s[8]+1873313359&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|w>>>22))+((w=a+(e^(m|~t))+s[6]+2734768916&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|w>>>11))+((m=(e=t+((w=e+(a^(t|~m))+s[4]+4149444226&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|w>>>22))^((a=m+((w=a+(e^(m|~t))+s[2]+718787259&4294967295)<<15&4294967295|w>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(w<<21&4294967295|w>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+m&4294967295}function hi(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var m=0|r[a];s&&m==e||(t[a]=m,s=!1)}this.g=t}(ye=hr.prototype).Oa=function(r){this.M=r},ye.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ge.g(),this.C=function $r(r){return r.h||(r.h=r.i())}(this.u?this.u:Ge),this.g.onreadystatechange=mt(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(m){return void Mo(this,m)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const m of s.keys())t.set(m,s.get(m))}s=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),a=ce.FormData&&r instanceof ce.FormData,!(0<=rt(rs,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,w]of t)this.g.setRequestHeader(m,w);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ar(this),0<this.B&&((this.L=function Qi(r){return Sn&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mt(this.ua,this)):this.A=Le(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(m){Mo(this,m)}},ye.ua=function(){typeof qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qt(this,"timeout"),this.abort(8))},ye.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,qt(this,"complete"),qt(this,"abort"),_s(this))},ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_s(this,!0)),hr.$.N.call(this)},ye.La=function(){this.s||(this.G||this.v||this.l?go(this):this.kb())},ye.kb=function(){go(this)},ye.isActive=function(){return!!this.g},ye.da=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ye.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),bi(e)}},ye.Ia=function(){return this.m},ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ye=Po.prototype).ra=8,ye.H=1,ye.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new Ve(this,this.l,r);let m=this.s;if(this.U&&(m?(m=Yt(m),gi(m,this.U)):m=this.U),null!==this.o||this.O||(a.I=m,m=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xe(this,a,e),Xr(t=Cs(this.I),"RID",r),Xr(t,"CVER",22),this.F&&Xr(t,"X-HTTP-Session-Id",this.F),re(this,t),m&&(this.O?e="headers="+encodeURIComponent(String(Ui(m)))+"&"+e:this.o&&la(t,this.o,m)),Ot(this.i,a),this.bb&&Xr(t,"TYPE","init"),this.P?(Xr(t,"$req",e),Xr(t,"SID","null"),a.aa=!0,Tn(a,t,null)):Tn(a,t,e),this.H=2}}else 3==this.H&&(r?L(this,r):0==this.j.length||Me(this.i)||L(this))},ye.Ma=function(){if(this.u=null,mo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Vi(mt(this.jb,this),r)}},ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gr(10),No(this),mo(this))},ye.ib=function(){null!=this.v&&(this.v=null,No(this),Gr(this),gr(19))},ye.pb=function(r){r?(this.l.info("Successfully pinged google.com"),gr(2)):(this.l.info("Failed to ping google.com"),gr(1))},ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(ye=qs.prototype).Ba=function(){},ye.Aa=function(){},ye.za=function(){},ye.ya=function(){},ye.isActive=function(){return!0},ye.Va=function(){},yo.prototype.g=function(r,e){return new Os(r,e)},_t(Os,Qt),Os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;gr(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=Ps(r,null,r.Y),x(r)},Os.prototype.close=function(){La(this.g)},Os.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Vr(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&x(e)},Os.prototype.N=function(){this.g.h=null,delete this.j,La(this.g),delete this.g,Os.$.N.call(this)},_t(_o,Hs),_t(ul,Yr),_t(Qo,qs),Qo.prototype.Ba=function(){qt(this.g,"a")},Qo.prototype.Aa=function(r){qt(this.g,new _o(r))},Qo.prototype.za=function(r){qt(this.g,new ul)},Qo.prototype.ya=function(){qt(this.g,"b")},_t(Zs,function Ts(){this.blockSize=-1}),Zs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zs.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,m=0;m<e;){if(0==a)for(;m<=t;)ua(this,r,m),m+=this.blockSize;if("string"==typeof r){for(;m<e;)if(s[a++]=r.charCodeAt(m++),a==this.blockSize){ua(this,s),a=0;break}}else for(;m<e;)if(s[a++]=r[m++],a==this.blockSize){ua(this,s),a=0;break}}this.h=a,this.i+=e},Zs.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var ca={};function Qa(r){return-128<=r&&128>r?function ai(r,e){var t=ca;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new hi([0|e],0>e?-1:0)}):new hi([0|r],0>r?-1:0)}function Ji(r){if(isNaN(r)||!isFinite(r))return vo;if(0>r)return Or(Ji(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=da;return new hi(e,0)}var da=4294967296,vo=Qa(0),Xo=Qa(1),Ea=Qa(16777216);function Ss(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function hs(r){return-1==r.h}function Or(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new hi(t,~r.h).add(Xo)}function js(r,e){return r.add(Or(e))}function ki(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Bo(r,e){this.g=r,this.h=e}function $o(r,e){if(Ss(e))throw Error("division by zero");if(Ss(r))return new Bo(vo,vo);if(hs(r))return e=$o(Or(r),e),new Bo(Or(e.g),Or(e.h));if(hs(e))return e=$o(r,Or(e)),new Bo(Or(e.g),e.h);if(30<r.g.length){if(hs(r)||hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Xo,s=e;0>=s.X(r);)t=Xa(t),s=Xa(s);var a=wa(t,1),m=wa(s,1);for(s=wa(s,2),t=wa(t,2);!Ss(s);){var w=m.add(s);0>=w.X(r)&&(a=a.add(t),m=w),s=wa(s,1),t=wa(t,1)}return e=js(r,a.R(e)),new Bo(a,e)}for(a=vo;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),w=(m=Ji(t)).R(e);hs(w)||0<w.X(r);)w=(m=Ji(t-=s)).R(e);Ss(m)&&(m=Xo),a=a.add(m),r=js(r,w)}return new Bo(a,r)}function Xa(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new hi(t,r.h)}function wa(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],m=0;m<s;m++)a[m]=0<e?r.D(m+t)>>>e|r.D(m+t+1)<<32-e:r.D(m+t);return new hi(a,r.h)}(ye=hi.prototype).ea=function(){if(hs(this))return-Or(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:da+s)*e,e*=da}return r},ye.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Ss(this))return"0";if(hs(this))return"-"+Or(this).toString(r);for(var e=Ji(Math.pow(r,6)),t=this,s="";;){var a=$o(t,e).g,m=((0<(t=js(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Ss(t=a))return m+s;for(;6>m.length;)m="0"+m;s=m+s}},ye.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},ye.X=function(r){return hs(r=js(this,r))?-1:Ss(r)?0:1},ye.abs=function(){return hs(this)?Or(this):this},ye.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var m=s+(65535&this.D(a))+(65535&r.D(a)),w=(m>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=w>>>16,t[a]=(w&=65535)<<16|(m&=65535)}return new hi(t,-2147483648&t[t.length-1]?-1:0)},ye.R=function(r){if(Ss(this)||Ss(r))return vo;if(hs(this))return hs(r)?Or(this).R(Or(r)):Or(Or(this).R(r));if(hs(r))return Or(this.R(Or(r)));if(0>this.X(Ea)&&0>r.X(Ea))return Ji(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var m=this.D(s)>>>16,w=65535&this.D(s),M=r.D(a)>>>16,H=65535&r.D(a);t[2*s+2*a]+=w*H,ki(t,2*s+2*a),t[2*s+2*a+1]+=m*H,ki(t,2*s+2*a+1),t[2*s+2*a+1]+=w*M,ki(t,2*s+2*a+1),t[2*s+2*a+2]+=m*M,ki(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new hi(t,0)},ye.gb=function(r){return $o(this,r).h},ye.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new hi(t,this.h&r.h)},ye.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new hi(t,this.h|r.h)},ye.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new hi(t,this.h^r.h)},yo.prototype.createWebChannel=yo.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,Kt.NO_ERROR=0,Kt.TIMEOUT=8,Kt.HTTP_ERROR=6,jn.COMPLETE="complete",$i.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",Qt.prototype.listen=Qt.prototype.O,hr.prototype.listenOnce=hr.prototype.P,hr.prototype.getLastError=hr.prototype.Sa,hr.prototype.getLastErrorCode=hr.prototype.Ia,hr.prototype.getStatus=hr.prototype.da,hr.prototype.getResponseJson=hr.prototype.Wa,hr.prototype.getResponseText=hr.prototype.ja,hr.prototype.send=hr.prototype.ha,hr.prototype.setWithCredentials=hr.prototype.Oa,Zs.prototype.digest=Zs.prototype.l,Zs.prototype.reset=Zs.prototype.reset,Zs.prototype.update=Zs.prototype.j,hi.prototype.add=hi.prototype.add,hi.prototype.multiply=hi.prototype.R,hi.prototype.modulo=hi.prototype.gb,hi.prototype.compare=hi.prototype.X,hi.prototype.toNumber=hi.prototype.ea,hi.prototype.toString=hi.prototype.toString,hi.prototype.getBits=hi.prototype.D,hi.fromNumber=Ji,hi.fromString=function Va(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Or(Va(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ji(Math.pow(e,8)),s=vo,a=0;a<r.length;a+=8){var m=Math.min(8,r.length-a),w=parseInt(r.substring(a,a+m),e);8>m?(m=Ji(Math.pow(e,m)),s=s.R(m).add(Ji(w))):s=(s=s.R(t)).add(Ji(w))}return s};var Ua=$e.createWebChannelTransport=function(){return new yo},Ol=$e.getStatEventTarget=function(){return vr()},Jo=$e.ErrorCode=Kt,ha=$e.EventType=jn,no=$e.Event=gn,N=$e.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},K=$e.FetchXmlHttpFactory=Jr,V=$e.WebChannel=$i,ie=$e.XhrIo=hr,Te=$e.Md5=Zs,ut=$e.Integer=hi;const bt="@firebase/firestore";class Wt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let ei="9.23.0";const dr=new Pe.Yd("@firebase/firestore");function Ur(){return dr.logLevel}function Ir(r){dr.setLogLevel(r)}function At(r,...e){if(dr.logLevel<=Pe.in.DEBUG){const t=e.map(Eo);dr.debug(`Firestore (${ei}): ${r}`,...t)}}function On(r,...e){if(dr.logLevel<=Pe.in.ERROR){const t=e.map(Eo);dr.error(`Firestore (${ei}): ${r}`,...t)}}function si(r,...e){if(dr.logLevel<=Pe.in.WARN){const t=e.map(Eo);dr.warn(`Firestore (${ei}): ${r}`,...t)}}function Eo(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function nn(r="Unexpected state"){const e=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: `+r;throw On(e),new Error(e)}function wn(r,e){r||nn()}function ks(r,e){r||nn()}function zt(r,e){return r}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends Ce.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ba{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wt.UNAUTHENTICATED))}shutdown(){}}class Ja{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fl{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const m=Y=>this.i!==a?(a=this.i,t(Y)):Promise.resolve();let w=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new bs,e.enqueueRetryable(()=>m(this.currentUser))};const M=()=>{const Y=w;e.enqueueRetryable((0,v.Z)(function*(){yield Y.promise,yield m(s.currentUser)}))},H=Y=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Y,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(Y=>H(Y)),setTimeout(()=>{if(!this.auth){const Y=this.t.getImmediate({optional:!0});Y?H(Y):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new bs)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wn("string"==typeof s.accessToken),new Ba(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new Wt(e)}}class Ll{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ea{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ll(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class El{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=m=>{null!=m.error&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const w=m.token!==this.T;return this.T=m.token,At("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const a=m=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.I.onInit(m=>a(m)),setTimeout(()=>{if(!this.appCheck){const m=this.I.getImmediate({optional:!0});m?a(m):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wn("string"==typeof t.token),this.T=t.token,new Vl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function el(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class is{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=el(40);for(let m=0;m<a.length;++m)s.length<20&&a[m]<t&&(s+=e.charAt(a[m]%e.length))}return s}}function lr(r,e){return r<e?-1:r>e?1:0}function Ca(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function cl(r){return r+"\0"}class es{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Mt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return es.fromMillis(Date.now())}static fromDate(e){return es.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new es(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new es(0,0))}static max(){return new Gn(new es(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pa{constructor(e,t,s){void 0===t?t=0:t>e.length&&nn(),void 0===s?s=e.length-t:s>e.length-t&&nn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Pa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const m=e.get(a),w=t.get(a);if(m<w)return-1;if(m>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class or extends Pa{construct(e,t,s){return new or(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Mt(et.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new or(t)}static emptyPath(){return new or([])}}const ro=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends Pa{construct(e,t,s){return new Dr(e,t,s)}static isValidIdentifier(e){return ro.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const m=()=>{if(0===s.length)throw new Mt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let w=!1;for(;a<e.length;){const M=e[a];if("\\"===M){if(a+1===e.length)throw new Mt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[a+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Mt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=H,a+=2}else"`"===M?(w=!w,a++):"."!==M||w?(s+=M,a++):(m(),a++)}if(m(),w)throw new Mt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Xt{constructor(e){this.path=e}static fromPath(e){return new Xt(or.fromString(e))}static fromName(e){return new Xt(or.fromString(e).popFirst(5))}static empty(){return new Xt(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xt(new or(e.slice()))}}class ta{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function $a(r){return r.fields.find(e=>2===e.kind)}function wo(r){return r.fields.filter(e=>2!==e.kind)}ta.UNKNOWN_ID=-1;class wl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ha{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ha(0,Ys.min())}}function fa(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Gn.fromTimestamp(1e9===s?new es(t+1,0):new es(t,s));return new Ys(a,Xt.empty(),e)}function Fs(r){return new Ys(r.readTime,r.key,-1)}class Ys{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ys(Gn.min(),Xt.empty(),-1)}static max(){return new Ys(Gn.max(),Xt.empty(),-1)}}function jo(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xt.comparator(r.documentKey,e.documentKey),0!==t?t:lr(r.largestBatchId,e.largestBatchId))}const Il="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function io(r){return na.apply(this,arguments)}function na(){return na=(0,v.Z)(function*(r){if(r.code!==et.FAILED_PRECONDITION||r.message!==Il)throw r;At("LocalStore","Unexpectedly lost primary lease")}),na.apply(this,arguments)}class it{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new it((s,a)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,a)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof it?t:it.resolve(t)}catch(t){return it.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):it.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):it.reject(t)}static resolve(e){return new it((t,s)=>{t(e)})}static reject(e){return new it((t,s)=>{s(e)})}static waitFor(e){return new it((t,s)=>{let a=0,m=0,w=!1;e.forEach(M=>{++a,M.next(()=>{++m,w&&m===a&&t()},H=>s(H))}),w=!0,m===a&&t()})}static or(e){let t=it.resolve(!1);for(const s of e)t=t.next(a=>a?it.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,m)=>{s.push(t.call(this,a,m))}),this.waitFor(s)}static mapArray(e,t){return new it((s,a)=>{const m=e.length,w=new Array(m);let M=0;for(let H=0;H<m;H++){const Y=H;t(e[Y]).next(ue=>{w[Y]=ue,++M,M===m&&s(w)},ue=>a(ue))}})}static doWhile(e,t){return new it((s,a)=>{const m=()=>{!0===e()?t().next(()=>{m()},a):s()};m()})}}class ls{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new bs,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ga(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=Ql(s.target.error);this.v.reject(new Ga(e,a))}}static open(e,t,s,a){try{return new ls(t,e.transaction(a,s))}catch(m){throw new Ga(t,m)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(At("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ho(t)}}class ti{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===ti.S((0,Ce.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return At("SimpleDb","Removing database:",e),Da(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ce.hl)())return!1;if(ti.C())return!0;const e=(0,Ce.z$)(),t=ti.S(e),s=0<t&&t<10,a=ti.N(e),m=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,v.Z)(function*(){return t.db||(At("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=w=>{s(w.target.result)},m.onblocked=()=>{a(new Ga(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=w=>{const M=w.target.error;a("VersionError"===M.name?new Mt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new Mt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Ga(e,M))},m.onupgradeneeded=w=>{At("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.O(w.target.result,m.transaction,w.oldVersion,t.version).next(()=>{At("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var m=this;return(0,v.Z)(function*(){const w="readonly"===t;let M=0;for(;;){++M;try{m.db=yield m.$(e);const H=ls.open(m.db,e,w?"readonly":"readwrite",s),Y=a(H).next(ue=>(H.P(),ue)).catch(ue=>(H.abort(ue),it.reject(ue))).toPromise();return Y.catch(()=>{}),yield H.R,Y}catch(H){const Y=H,ue="FirebaseError"!==Y.name&&M<3;if(At("SimpleDb","Transaction failed with error:",Y.message,"Retrying:",ue),m.close(),!ue)return Promise.reject(Y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class za{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Da(this.L.delete())}}class Ga extends Mt{constructor(e,t){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ra(r){return"IndexedDbTransactionError"===r.name}class Ho{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(At("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(At("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Da(s)}add(e){return At("SimpleDb","ADD",this.store.name,e,e),Da(this.store.add(e))}get(e){return Da(this.store.get(e)).next(t=>(void 0===t&&(t=null),At("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return At("SimpleDb","DELETE",this.store.name,e),Da(this.store.delete(e))}count(){return At("SimpleDb","COUNT",this.store.name),Da(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),m=[];return this.W(a,(w,M)=>{m.push(M)}).next(()=>m)}{const a=this.store.getAll(s.range);return new it((m,w)=>{a.onerror=M=>{w(M.target.error)},a.onsuccess=M=>{m(M.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new it((a,m)=>{s.onerror=w=>{m(w.target.error)},s.onsuccess=w=>{a(w.target.result)}})}J(e,t){At("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(m,w,M)=>M.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new it((s,a)=>{t.onerror=m=>{const w=Ql(m.target.error);a(w)},t.onsuccess=m=>{const w=m.target.result;w?e(w.primaryKey,w.value).next(M=>{M?w.continue():s()}):s()}})}W(e,t){const s=[];return new it((a,m)=>{e.onerror=w=>{m(w.target.error)},e.onsuccess=w=>{const M=w.target.result;if(!M)return void a();const H=new za(M),Y=t(M.primaryKey,M.value,H);if(Y instanceof it){const ue=Y.catch(Ae=>(H.done(),it.reject(Ae)));s.push(ue)}H.isDone?a():null===H.K?M.continue():M.continue(H.K)}}).next(()=>it.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Da(r){return new it((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=Ql(s.target.error);t(a)}})}let iu=!1;function Ql(r){const e=ti.S((0,Ce.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new Mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iu||(iu=!0,setTimeout(()=>{throw s},0)),s}}return r}class tl{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;At("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,v.Z)(function*(){t.task=null;try{At("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){ra(s)?At("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield io(s)}yield t.et(6e4)}))}}class yu{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,v.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,m=!0;return it.doWhile(()=>!0===m&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!s.has(w))return At("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,a).next(M=>{a-=M,s.add(w)});m=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(m=>{const w=m.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(a,m)).next(M=>(At("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>w.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,m)=>{const w=Fs(m);jo(w,s)>0&&(s=w)}),new Ys(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Oo=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function ws(r){return null==r}function zo(r){return 0===r&&1/r==-1/0}function dl(r){return"number"==typeof r&&Number.isInteger(r)&&!zo(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function ts(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=pa(e)),e=Qs(r.get(t),e);return pa(e)}function Qs(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const m=r.charAt(a);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function pa(r){return r+"\x01\x01"}function Ls(r){const e=r.length;if(wn(e>=2),2===e)return wn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),or.emptyPath();const t=e-2,s=[];let a="";for(let m=0;m<e;){const w=r.indexOf("\x01",m);switch((w<0||w>t)&&nn(),r.charAt(w+1)){case"\x01":const M=r.substring(m,w);let H;0===a.length?H=M:(a+=M,H=a,a=""),s.push(H);break;case"\x10":a+=r.substring(m,w),a+="\0";break;case"\x11":a+=r.substring(m,w+1);break;default:nn()}m=w+2}return new or(s)}const Ta=["userId","batchId"];function Go(r,e){return[r,ts(e)]}function Ul(r,e,t){return[r,ts(e),t]}const Xl={},Dl=["prefixPath","collectionGroup","readTime","documentId"],Tl=["prefixPath","collectionGroup","documentId"],Io=["collectionGroup","readTime","prefixPath","documentId"],W=["canonicalId","targetId"],u=["targetId","path"],h=["path","targetId"],f=["collectionId","parent"],I=["indexId","uid"],S=["uid","sequenceNumber"],F=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$=["indexId","uid","orderedDocumentKey"],le=["userId","collectionPath","documentId"],De=["userId","collectionPath","largestBatchId"],Je=["userId","collectionGroup","largestBatchId"],ft=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ln=[...ft,"documentOverlays"],An=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Un=An,qn=[...Un,"indexConfiguration","indexState","indexEntries"];class Pr extends Cl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function tr(r,e){const t=zt(r);return ti.M(t.ht,e)}function Bi(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Vs(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Ii{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new Ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new Ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lo(this.root,e,this.comparator,!0)}}class lo{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&a&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,s,a,m){this.key=e,this.value=t,this.color=s??fi.RED,this.left=a??fi.EMPTY,this.right=m??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,m){return new fi(e??this.key,t??this.value,s??this.color,a??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const m=s(e,a.key);return a=m<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===m?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return fi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nn();const e=this.left.check();if(e!==this.right.check())throw nn();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1,fi.EMPTY=new class{constructor(){this.size=0}get key(){throw nn()}get value(){throw nn()}get color(){throw nn()}get left(){throw nn()}get right(){throw nn()}copy(r,e,t,s,a){return this}insert(r,e,t){return new fi(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ei{constructor(e){this.comparator=e,this.data=new Ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wa(this.data.getIterator())}getIteratorFrom(e){return new Wa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(a,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ei(this.comparator);return t.data=e,t}}class Wa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ko(r){return r.hasNext()?r.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new uo([])}unionWith(e){let t=new Ei(Dr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Sl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function hl(){return typeof atob<"u"}class Us{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Sl("Invalid base64 string: "+a):a}}(e);return new Us(t)}static fromUint8Array(e){const t=function(s){let a="";for(let m=0;m<s.length;++m)a+=String.fromCharCode(s[m]);return a}(e);return new Us(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const Nu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nn(r){if(wn(!!r),"string"==typeof r){let e=0;const t=Nu.exec(r);if(wn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:hn(r.seconds),nanos:hn(r.nanos)}}function hn(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Yn(r){return"string"==typeof r?Us.fromBase64String(r):Us.fromUint8Array(r)}function oi(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fs(r){const e=r.mapValue.fields.__previous_value__;return oi(e)?fs(e):e}function so(r){const e=Nn(r.mapValue.fields.__local_write_time__.timestampValue);return new es(e.seconds,e.nanos)}class oo{constructor(e,t,s,a,m,w,M,H,Y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=m,this.forceLongPolling=w,this.autoDetectLongPolling=M,this.longPollingOptions=H,this.useFetchStreams=Y}}class Co{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}const Ai={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ka={nullValue:"NULL_VALUE"};function ga(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?oi(r)?4:Za(r)?9007199254740991:10:nn()}function ps(r,e){if(r===e)return!0;const t=ga(r);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return so(r).isEqual(so(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const m=Nn(s.timestampValue),w=Nn(a.timestampValue);return m.seconds===w.seconds&&m.nanos===w.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,Yn(r.bytesValue).isEqual(Yn(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return hn(s.geoPointValue.latitude)===hn(a.geoPointValue.latitude)&&hn(s.geoPointValue.longitude)===hn(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return hn(s.integerValue)===hn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const m=hn(s.doubleValue),w=hn(a.doubleValue);return m===w?zo(m)===zo(w):isNaN(m)&&isNaN(w)}return!1}(r,e);case 9:return Ca(r.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:return function(s,a){const m=s.mapValue.fields||{},w=a.mapValue.fields||{};if(Bi(m)!==Bi(w))return!1;for(const M in m)if(m.hasOwnProperty(M)&&(void 0===w[M]||!ps(m[M],w[M])))return!1;return!0}(r,e);default:return nn()}var a}function Do(r,e){return void 0!==(r.values||[]).find(t=>ps(t,e))}function gs(r,e){if(r===e)return 0;const t=ga(r),s=ga(e);if(t!==s)return lr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return lr(r.booleanValue,e.booleanValue);case 2:return function(a,m){const w=hn(a.integerValue||a.doubleValue),M=hn(m.integerValue||m.doubleValue);return w<M?-1:w>M?1:w===M?0:isNaN(w)?isNaN(M)?0:-1:1}(r,e);case 3:return bl(r.timestampValue,e.timestampValue);case 4:return bl(so(r),so(e));case 5:return lr(r.stringValue,e.stringValue);case 6:return function(a,m){const w=Yn(a),M=Yn(m);return w.compareTo(M)}(r.bytesValue,e.bytesValue);case 7:return function(a,m){const w=a.split("/"),M=m.split("/");for(let H=0;H<w.length&&H<M.length;H++){const Y=lr(w[H],M[H]);if(0!==Y)return Y}return lr(w.length,M.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,m){const w=lr(hn(a.latitude),hn(m.latitude));return 0!==w?w:lr(hn(a.longitude),hn(m.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,m){const w=a.values||[],M=m.values||[];for(let H=0;H<w.length&&H<M.length;++H){const Y=gs(w[H],M[H]);if(Y)return Y}return lr(w.length,M.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,m){if(a===Ai.mapValue&&m===Ai.mapValue)return 0;if(a===Ai.mapValue)return 1;if(m===Ai.mapValue)return-1;const w=a.fields||{},M=Object.keys(w),H=m.fields||{},Y=Object.keys(H);M.sort(),Y.sort();for(let ue=0;ue<M.length&&ue<Y.length;++ue){const Ae=lr(M[ue],Y[ue]);if(0!==Ae)return Ae;const st=gs(w[M[ue]],H[Y[ue]]);if(0!==st)return st}return lr(M.length,Y.length)}(r.mapValue,e.mapValue);default:throw nn()}}function bl(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return lr(r,e);const t=Nn(r),s=Nn(e),a=lr(t.seconds,s.seconds);return 0!==a?a:lr(t.nanos,s.nanos)}function nl(r){return _u(r)}function _u(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Nn(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Yn(r.bytesValue).toBase64():"referenceValue"in r?Xt.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",m=!0;for(const w of s.values||[])m?m=!1:a+=",",a+=_u(w);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let m="{",w=!0;for(const M of a)w?w=!1:m+=",",m+=`${M}:${_u(s.fields[M])}`;return m+"}"}(r.mapValue):nn();var e}function Bl(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Hu(r){return!!r&&"integerValue"in r}function vu(r){return!!r&&"arrayValue"in r}function fl(r){return!!r&&"nullValue"in r}function qa(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sa(r){return!!r&&"mapValue"in r}function $l(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xi(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=$l(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Za(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function su(r){return"nullValue"in r?Ka:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Bl(Co.empty(),Xt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:nn()}function rl(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Bl(Co.empty(),Xt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Ai:nn()}function ou(r,e){const t=gs(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Rl(r,e){const t=gs(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=Dr.emptyPath(),s={},a=[];e.forEach((w,M)=>{if(!t.isImmediateParentOf(M)){const H=this.getFieldsMap(t);this.applyChanges(H,s,a),s={},a=[],t=M.popLast()}w?s[M.lastSegment()]=$l(w):a.push(M.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,a)}delete(e){const t=this.field(e.popLast());Sa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Sa(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Xi(t,(a,m)=>e[a]=m);for(const a of s)delete e[a]}clone(){return new ss($l(this.value))}}function dc(r){const e=[];return Xi(r.fields,(t,s)=>{const a=new Dr([t]);if(Sa(s)){const m=dc(s.mapValue).fields;if(0===m.length)e.push(a);else for(const w of m)e.push(a.child(w))}else e.push(a)}),new uo(e)}class As{constructor(e,t,s,a,m,w,M){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=m,this.data=w,this.documentState=M}static newInvalidDocument(e){return new As(e,0,Gn.min(),Gn.min(),Gn.min(),ss.empty(),0)}static newFoundDocument(e,t,s,a){return new As(e,1,t,Gn.min(),s,a,0)}static newNoDocument(e,t){return new As(e,2,t,Gn.min(),Gn.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new As(e,3,t,Gn.min(),Gn.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class il{constructor(e,t){this.position=e,this.inclusive=t}}function xu(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const m=e[a],w=r.position[a];if(s=m.field.isKeyField()?Xt.comparator(Xt.fromName(w.referenceValue),t.key):gs(w,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function ia(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ps(r.position[t],e.position[t]))return!1;return!0}class A{constructor(e,t="asc"){this.field=e,this.dir=t}}function k(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class X{}class fe extends X{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Wo(e,t,s):"array-contains"===t?new Na(e,s):"in"===t?new ba(e,s):"not-in"===t?new hc(e,s):"array-contains-any"===t?new fc(e,s):new fe(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Ml(e,s):new zu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gs(t,this.value)):null!==t&&ga(this.value)===ga(t)&&this.matchesComparison(gs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Re extends X{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Re(e,t)}matches(e){return ze(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ze(r){return"and"===r.op}function vt(r){return"or"===r.op}function an(r){return on(r)&&ze(r)}function on(r){for(const e of r.filters)if(e instanceof Re)return!1;return!0}function Hn(r){if(r instanceof fe)return r.field.canonicalString()+r.op.toString()+nl(r.value);if(an(r))return r.filters.map(e=>Hn(e)).join(",");{const e=r.filters.map(t=>Hn(t)).join(",");return`${r.op}(${e})`}}function Mr(r,e){return r instanceof fe?(t=r,(s=e)instanceof fe&&t.op===s.op&&t.field.isEqual(s.field)&&ps(t.value,s.value)):r instanceof Re?function(t,s){return s instanceof Re&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,m,w)=>a&&Mr(m,s.filters[w]),!0)}(r,e):void nn();var t,s}function Tr(r,e){const t=r.filters.concat(e);return Re.create(t,r.op)}function To(r){return r instanceof fe?`${(e=r).field.canonicalString()} ${e.op} ${nl(e.value)}`:r instanceof Re?function(e){return e.op.toString()+" {"+e.getFilters().map(To).join(" ,")+"}"}(r):"Filter";var e}class Wo extends fe{constructor(e,t,s){super(e,t,s),this.key=Xt.fromName(s.referenceValue)}matches(e){const t=Xt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ml extends fe{constructor(e,t){super(e,"in",t),this.keys=Jl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zu extends fe{constructor(e,t){super(e,"not-in",t),this.keys=Jl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jl(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Xt.fromName(s.referenceValue))}class Na extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vu(t)&&Do(t.arrayValue,this.value)}}class ba extends fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Do(this.value.arrayValue,t)}}class hc extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Do(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Do(this.value.arrayValue,t)}}class fc extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Do(this.value.arrayValue,s))}}class Wc{constructor(e,t=null,s=[],a=[],m=null,w=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=m,this.startAt=w,this.endAt=M,this.dt=null}}function Ou(r,e=null,t=[],s=[],a=null,m=null,w=null){return new Wc(r,e,t,s,a,m,w)}function sl(r){const e=zt(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Hn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),ws(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>nl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>nl(s)).join(",")),e.dt=t}return e.dt}function au(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!k(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Mr(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ia(r.startAt,e.startAt)&&ia(r.endAt,e.endAt)}function Pl(r){return Xt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Aa(r,e){return r.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function pc(r,e,t){let s=Ka,a=!0;for(const m of Aa(r,e)){let w=Ka,M=!0;switch(m.op){case"<":case"<=":w=su(m.value);break;case"==":case"in":case">=":w=m.value;break;case">":w=m.value,M=!1;break;case"!=":case"not-in":w=Ka}ou({value:s,inclusive:a},{value:w,inclusive:M})<0&&(s=w,a=M)}if(null!==t)for(let m=0;m<r.orderBy.length;++m)if(r.orderBy[m].field.isEqual(e)){const w=t.position[m];ou({value:s,inclusive:a},{value:w,inclusive:t.inclusive})<0&&(s=w,a=t.inclusive);break}return{value:s,inclusive:a}}function Gu(r,e,t){let s=Ai,a=!0;for(const m of Aa(r,e)){let w=Ai,M=!0;switch(m.op){case">=":case">":w=rl(m.value),M=!1;break;case"==":case"in":case"<=":w=m.value;break;case"<":w=m.value,M=!1;break;case"!=":case"not-in":w=Ai}Rl({value:s,inclusive:a},{value:w,inclusive:M})>0&&(s=w,a=M)}if(null!==t)for(let m=0;m<r.orderBy.length;++m)if(r.orderBy[m].field.isEqual(e)){const w=t.position[m];Rl({value:s,inclusive:a},{value:w,inclusive:t.inclusive})>0&&(s=w,a=t.inclusive);break}return{value:s,inclusive:a}}class pl{constructor(e,t=null,s=[],a=[],m=null,w="F",M=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=m,this.limitType=w,this.startAt=M,this.endAt=H,this.wt=null,this._t=null}}function gc(r,e,t,s,a,m,w,M){return new pl(r,e,t,s,a,m,w,M)}function gl(r){return new pl(r)}function gd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function mc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function b(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function y(r){return null!==r.collectionGroup}function C(r){const e=zt(r);if(null===e.wt){e.wt=[];const t=b(e),s=mc(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new A(t)),e.wt.push(new A(Dr.keyField(),"asc"));else{let a=!1;for(const m of e.explicitOrderBy)e.wt.push(m),m.field.isKeyField()&&(a=!0);if(!a){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new A(Dr.keyField(),m))}}}return e.wt}function R(r){const e=zt(r);if(!e._t)if("F"===e.limitType)e._t=Ou(e.path,e.collectionGroup,C(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of C(e))t.push(new A(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new il(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new il(e.startAt.position,e.startAt.inclusive):null;e._t=Ou(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function J(r,e){e.getFirstInequalityField(),b(r);const t=r.filters.concat([e]);return new pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function de(r,e,t){return new pl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function We(r,e){return au(R(r),R(e))&&r.limitType===e.limitType}function yt(r){return`${sl(R(r))}|lt:${r.limitType}`}function Jt(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>To(s)).join(", ")}]`),ws(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>nl(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>nl(s)).join(",")),`Target(${t})`}(R(r))}; limitType=${r.limitType})`}function _n(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Xt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of C(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,m,w){const M=xu(a,m,w);return a.inclusive?M<=0:M<0}(t.startAt,C(t),s)||t.endAt&&!function(a,m,w){const M=xu(a,m,w);return a.inclusive?M>=0:M>0}(t.endAt,C(t),s)));var t,s}function rr(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Wr(r){return(e,t)=>{let s=!1;for(const a of C(r)){const m=Ra(a,e,t);if(0!==m)return m;s=s||a.field.isKeyField()}return 0}}function Ra(r,e,t){const s=r.field.isKeyField()?Xt.comparator(e.key,t.key):function(a,m,w){const M=m.data.field(a),H=w.data.field(a);return null!==M&&null!==H?gs(M,H):nn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return nn()}}class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,m]of s)if(this.equalsFn(a,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<a.length;m++)if(this.equalsFn(a[m][0],e))return void(a[m]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(t,s)=>{for(const[a,m]of s)e(a,m)})}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}const Wu=new Ii(Xt.comparator);function Ns(){return Wu}const jl=new Ii(Xt.comparator);function ol(...r){let e=jl;for(const t of r)e=e.insert(t.key,t);return e}function Eu(r){let e=jl;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xs(){return eu()}function Hl(){return eu()}function eu(){return new Ko(r=>r.toString(),(r,e)=>r.isEqual(e))}const Ku=new Ii(Xt.comparator),Nl=new Ei(Xt.comparator);function ni(...r){let e=Nl;for(const t of r)e=e.add(t);return e}const yc=new Ei(lr);function qu(){return yc}function _c(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zo(e)?"-0":e}}function md(r){return{integerValue:""+r}}function vc(r,e){return dl(e)?md(e):_c(r,e)}class yd{constructor(){this._=void 0}}function pf(r,e,t){return r instanceof lu?function(s,a){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&oi(a)&&(a=fs(a)),a&&(m.fields.__previous_value__=a),{mapValue:m}}(t,e):r instanceof uu?_d(r,e):r instanceof tu?Zc(r,e):function(s,a){const m=qc(s,a),w=uh(m)+uh(s.gt);return Hu(m)&&Hu(s.gt)?md(w):_c(s.serializer,w)}(r,e)}function Kc(r,e,t){return r instanceof uu?_d(r,e):r instanceof tu?Zc(r,e):t}function qc(r,e){return r instanceof zl?Hu(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class lu extends yd{}class uu extends yd{constructor(e){super(),this.elements=e}}function _d(r,e){const t=Gl(e);for(const s of r.elements)t.some(a=>ps(a,s))||t.push(s);return{arrayValue:{values:t}}}class tu extends yd{constructor(e){super(),this.elements=e}}function Zc(r,e){let t=Gl(e);for(const s of r.elements)t=t.filter(a=>!ps(a,s));return{arrayValue:{values:t}}}class zl extends yd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function uh(r){return hn(r.integerValue||r.doubleValue)}function Gl(r){return vu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Yc{constructor(e,t){this.field=e,this.transform=t}}class ch{constructor(e,t){this.version=e,this.transformResults=t}}class co{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new co}static exists(e){return new co(void 0,e)}static updateTime(e){return new co(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Zu{}function vd(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new xl(r.key,co.none()):new Ic(r.key,r.data,co.none());{const t=r.data,s=ss.empty();let a=new Ei(Dr.comparator);for(let m of e.fields)if(!a.has(m)){let w=t.field(m);null===w&&m.length>1&&(m=m.popLast(),w=t.field(m)),null===w?s.delete(m):s.set(m,w),a=a.add(m)}return new wu(r.key,s,new uo(a.toArray()),co.none())}}function gf(r,e,t){r instanceof Ic?function(s,a,m){const w=s.value.clone(),M=_f(s.fieldTransforms,a,m.transformResults);w.setAll(M),a.convertToFoundDocument(m.version,w).setHasCommittedMutations()}(r,e,t):r instanceof wu?function(s,a,m){if(!Ec(s.precondition,a))return void a.convertToUnknownDocument(m.version);const w=_f(s.fieldTransforms,a,m.transformResults),M=a.data;M.setAll(yf(s)),M.setAll(w),a.convertToFoundDocument(m.version,M).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wc(r,e,t,s){return r instanceof Ic?function(a,m,w,M){if(!Ec(a.precondition,m))return w;const H=a.value.clone(),Y=vf(a.fieldTransforms,M,m);return H.setAll(Y),m.convertToFoundDocument(m.version,H).setHasLocalMutations(),null}(r,e,t,s):r instanceof wu?function(a,m,w,M){if(!Ec(a.precondition,m))return w;const H=vf(a.fieldTransforms,M,m),Y=m.data;return Y.setAll(yf(a)),Y.setAll(H),m.convertToFoundDocument(m.version,Y).setHasLocalMutations(),null===w?null:w.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ue=>ue.field))}(r,e,t,s):(w=t,Ec(r.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):w);var m,w}function mf(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),m=qc(s.transform,a||null);null!=m&&(null===t&&(t=ss.empty()),t.set(s.field,m))}return t||null}function dh(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Ca(t,s,(a,m)=>function Pp(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof uu&&s instanceof uu||t instanceof tu&&s instanceof tu?Ca(t.elements,s.elements,ps):t instanceof zl&&s instanceof zl?ps(t.gt,s.gt):t instanceof lu&&s instanceof lu);var t,s}(a,m))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class Ic extends Zu{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class wu extends Zu{constructor(e,t,s,a,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function yf(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function _f(r,e,t){const s=new Map;wn(r.length===t.length);for(let a=0;a<t.length;a++){const m=r[a],w=m.transform,M=e.data.field(m.field);s.set(m.field,Kc(w,M,t[a]))}return s}function vf(r,e,t){const s=new Map;for(const a of r){const m=a.transform,w=t.data.field(a.field);s.set(a.field,pf(m,w,e))}return s}class xl extends Zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yu extends Zu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const m=this.mutations[a];m.key.isEqual(e.key)&&gf(m,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=wc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=wc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Hl();return this.mutations.forEach(a=>{const m=e.get(a.key),w=m.overlayedDocument;let M=this.applyToLocalView(w,m.mutatedFields);M=t.has(a.key)?null:M;const H=vd(w,M);null!==H&&s.set(a.key,H),w.isValidDocument()||w.convertToNoDocument(Gn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ni())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(t,s)=>dh(t,s))&&Ca(this.baseMutations,e.baseMutations,(t,s)=>dh(t,s))}}class Ef{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){wn(e.mutations.length===s.length);let a=Ku;const m=e.mutations;for(let w=0;w<m.length;w++)a=a.insert(m[w].key,s[w].version);return new Ef(e,t,s,a)}}class wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cu{constructor(e,t){this.count=e,this.unchangedNames=t}}var ma,Gi;function fh(r){switch(r){default:return nn();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function If(r){if(void 0===r)return On("GRPC error has no .code"),et.UNKNOWN;switch(r){case ma.OK:return et.OK;case ma.CANCELLED:return et.CANCELLED;case ma.UNKNOWN:return et.UNKNOWN;case ma.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case ma.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case ma.INTERNAL:return et.INTERNAL;case ma.UNAVAILABLE:return et.UNAVAILABLE;case ma.UNAUTHENTICATED:return et.UNAUTHENTICATED;case ma.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case ma.NOT_FOUND:return et.NOT_FOUND;case ma.ALREADY_EXISTS:return et.ALREADY_EXISTS;case ma.PERMISSION_DENIED:return et.PERMISSION_DENIED;case ma.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case ma.ABORTED:return et.ABORTED;case ma.OUT_OF_RANGE:return et.OUT_OF_RANGE;case ma.UNIMPLEMENTED:return et.UNIMPLEMENTED;case ma.DATA_LOSS:return et.DATA_LOSS;default:return nn()}}(Gi=ma||(ma={}))[Gi.OK=0]="OK",Gi[Gi.CANCELLED=1]="CANCELLED",Gi[Gi.UNKNOWN=2]="UNKNOWN",Gi[Gi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gi[Gi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gi[Gi.NOT_FOUND=5]="NOT_FOUND",Gi[Gi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gi[Gi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gi[Gi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gi[Gi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gi[Gi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gi[Gi.ABORTED=10]="ABORTED",Gi[Gi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gi[Gi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gi[Gi.INTERNAL=13]="INTERNAL",Gi[Gi.UNAVAILABLE=14]="UNAVAILABLE",Gi[Gi.DATA_LOSS=15]="DATA_LOSS";class Ed{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return wd}static getOrCreateInstance(){return null===wd&&(wd=new Ed),wd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let wd=null;function Id(){return new TextEncoder}const Iu=new ut([4294967295,4294967295],0);function Cc(r){const e=Id().encode(r),t=new Te;return t.update(e),new Uint8Array(t.digest())}function Cd(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new ut([t,s],0),new ut([a,m],0)]}class Dd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(s<0)throw new Dc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Dc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ut.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(ut.fromNumber(s)));return 1===a.compare(Iu)&&(a=new ut([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Cc(e),[s,a]=Cd(t);for(let m=0;m<this.hashCount;m++){const w=this.Et(s,a,m);if(!this.At(w))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),w=new Dd(m,a,t);return s.forEach(M=>w.insert(M)),w}insert(e){if(0===this.It)return;const t=Cc(e),[s,a]=Cd(t);for(let m=0;m<this.hashCount;m++){const w=this.Et(s,a,m);this.Rt(w)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ph{constructor(e,t,s,a,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Qc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ph(Gn.min(),a,new Ii(lr),Ns(),ni())}}class Qc{constructor(e,t,s,a,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Qc(s,t,ni(),ni(),ni())}}class gh{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class Td{constructor(e,t){this.targetId=e,this.Vt=t}}class Sd{constructor(e,t,s=Us.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Np{constructor(){this.St=0,this.Dt=Cf(),this.Ct=Us.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ni(),t=ni(),s=ni();return this.Dt.forEach((a,m)=>{switch(m){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:nn()}}),new Qc(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Cf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class em{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ns(),this.zt=mh(),this.Wt=new Ii(lr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:nn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,m=this.se(s);if(m){const w=m.target;if(Pl(w))if(0===a){const M=new Xt(w.path);this.Yt(s,M,As.newNoDocument(M,Gn.min()))}else wn(1===a);else{const M=this.ie(s);if(M!==a){const H=this.re(e,M);0!==H&&(this.ee(s),this.Wt=this.Wt.insert(s,2===H?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Ed.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Y,ue,Ae){var st,Rt,en,kn,$n,Ci;const us={localCacheCount:ue,existenceFilterCount:Ae.count},Wi=Ae.unchangedNames;return Wi&&(us.bloomFilter={applied:0===Y,hashCount:null!==(st=Wi?.hashCount)&&void 0!==st?st:0,bitmapLength:null!==(kn=null===(en=null===(Rt=Wi?.bits)||void 0===Rt?void 0:Rt.bitmap)||void 0===en?void 0:en.length)&&void 0!==kn?kn:0,padding:null!==(Ci=null===($n=Wi?.bits)||void 0===$n?void 0:$n.padding)&&void 0!==Ci?Ci:0}),us}(H,M,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:m="",padding:w=0},hashCount:M=0}=s;let H,Y;try{H=Yn(m).toUint8Array()}catch(ue){if(ue instanceof Sl)return si("Decoding the base64 bloom filter in existence filter failed ("+ue.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ue}try{Y=new Dd(H,w,M)}catch(ue){return si(ue instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",ue),1}return 0===Y.It?1:a!==t-this.oe(e.targetId,Y)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(m=>{const w=this.Gt.ue(),M=`projects/${w.projectId}/databases/${w.database}/documents/${m.path.canonicalString()}`;t.vt(M)||(this.Yt(e,m,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((m,w)=>{const M=this.se(w);if(M){if(m.current&&Pl(M.target)){const H=new Xt(M.target.path);null!==this.jt.get(H)||this.ae(w,H)||this.Yt(w,H,As.newNoDocument(H,e))}m.Mt&&(t.set(w,m.Ot()),m.Ft())}});let s=ni();this.zt.forEach((m,w)=>{let M=!0;w.forEachWhile(H=>{const Y=this.se(H);return!Y||"TargetPurposeLimboResolution"===Y.purpose||(M=!1,!1)}),M&&(s=s.add(m))}),this.jt.forEach((m,w)=>w.setReadTime(e));const a=new ph(e,t,this.Wt,this.jt,s);return this.jt=Ns(),this.zt=mh(),this.Wt=new Ii(lr),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Np,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ei(lr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||At("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Np),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function mh(){return new Ii(Xt.comparator)}function Cf(){return new Ii(Xt.comparator)}const xp={asc:"ASCENDING",desc:"DESCENDING"},Op={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tm={and:"AND",or:"OR"};class kp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tc(r,e){return r.useProto3Json||ws(e)?e:{value:e}}function Sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bd(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Df(r,e){return Sc(r,e.toTimestamp())}function Ri(r){return wn(!!r),Gn.fromTimestamp(function(e){const t=Nn(e);return new es(t.seconds,t.nanos)}(r))}function yh(r,e){return(t=r,new or(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tf(r){const e=or.fromString(r);return wn(Du(e)),e}function Qu(r,e){return yh(r.databaseId,e.path)}function Ma(r,e){const t=Tf(e);if(t.get(1)!==r.databaseId.projectId)throw new Mt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Mt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Xt(Sf(t))}function ya(r,e){return yh(r.databaseId,e)}function ml(r){const e=Tf(r);return 4===e.length?or.emptyPath():Sf(e)}function Cu(r){return new or(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Sf(r){return wn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function _h(r,e,t){return{name:Qu(r,e),fields:t.value.mapValue.fields}}function Fp(r,e,t){const s=Ma(r,e.name),a=Ri(e.updateTime),m=e.createTime?Ri(e.createTime):Gn.min(),w=new ss({mapValue:{fields:e.fields}}),M=As.newFoundDocument(s,a,m,w);return t&&M.setHasCommittedMutations(),t?M.setHasCommittedMutations():M}function Xu(r,e){let t;if(e instanceof Ic)t={update:_h(r,e.key,e.value)};else if(e instanceof xl)t={delete:Qu(r,e.key)};else if(e instanceof wu)t={update:_h(r,e.key,e.data),updateMask:Ch(e.fieldMask)};else{if(!(e instanceof Yu))return nn();t={verify:Qu(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,m){const w=m.transform;if(w instanceof lu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof uu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof tu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof zl)return{fieldPath:m.field.canonicalString(),increment:w.gt};throw nn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:Df(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:nn()),t;var a}function Ad(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?co.updateTime(Ri(a.updateTime)):void 0!==a.exists?co.exists(a.exists):co.none():co.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(m,w){let M=null;"setToServerValue"in w?(wn("REQUEST_TIME"===w.setToServerValue),M=new lu):"appendMissingElements"in w?M=new uu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?M=new tu(w.removeAllFromArray.values||[]):"increment"in w?M=new zl(m,w.increment):nn();const H=Dr.fromServerFormat(w.fieldPath);return new Yc(H,M)}(r,a)):[];var a;if(e.update){const a=Ma(r,e.update.name),m=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new uo((e.updateMask.fieldPaths||[]).map(Y=>Dr.fromServerFormat(Y)));return new wu(a,m,w,t,s)}return new Ic(a,m,t,s)}if(e.delete){const a=Ma(r,e.delete);return new xl(a,t)}if(e.verify){const a=Ma(r,e.verify);return new Yu(a,t)}return nn()}function vh(r,e){return{documents:[ya(r,e.path)]}}function Eh(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=ya(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ya(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(H){if(0!==H.length)return Pd(Re.create(H,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const m=function(H){if(0!==H.length)return H.map(Y=>{return{field:ku((ue=Y).field),direction:Ju(ue.dir)};var ue})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const w=Tc(r,e.limit);var M,H;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function wh(r){let e=ml(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){wn(1===s);const ue=t.from[0];ue.allDescendants?a=ue.collectionId:e=e.child(ue.collectionId)}let m=[];t.where&&(m=function(ue){const Ae=Rd(ue);return Ae instanceof Re&&an(Ae)?Ae.getFilters():[Ae]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ue=>{return new A(Fu((Ae=ue).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ae.direction));var Ae}));let M=null;t.limit&&(M=function(ue){let Ae;return Ae="object"==typeof ue?ue.value:ue,ws(Ae)?null:Ae}(t.limit));let H=null;var ue;t.startAt&&(H=new il((ue=t.startAt).values||[],!!ue.before));let Y=null;return t.endAt&&(Y=function(ue){return new il(ue.values||[],!ue.before)}(t.endAt)),gc(e,a,w,m,M,"F",H,Y)}function Rd(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fu(e.unaryFilter.field);return fe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Fu(e.unaryFilter.field);return fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fu(e.unaryFilter.field);return fe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Fu(e.unaryFilter.field);return fe.create(m,"!=",{nullValue:"NULL_VALUE"});default:return nn()}}(r):void 0!==r.fieldFilter?fe.create(Fu((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Re.create(e.compositeFilter.filters.map(t=>Rd(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nn()}}(e.compositeFilter.op))}(r):nn();var e}function Ju(r){return xp[r]}function rm(r){return Op[r]}function Md(r){return tm[r]}function ku(r){return{fieldPath:r.canonicalString()}}function Fu(r){return Dr.fromServerFormat(r.fieldPath)}function Pd(r){return r instanceof fe?function(e){if("=="===e.op){if(qa(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NAN"}};if(fl(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qa(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NAN"}};if(fl(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(e.field),op:rm(e.op),value:e.value}}}(r):r instanceof Re?function(e){const t=e.getFilters().map(s=>Pd(s));return 1===t.length?t[0]:{compositeFilter:{op:Md(e.op),filters:t}}}(r):nn()}function Ch(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Du(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Tu{constructor(e,t,s,a,m=Gn.min(),w=Gn.min(),M=Us.EMPTY_BYTE_STRING,H=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=M,this.expectedCount=H}withSequenceNumber(e){return new Tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Nd{constructor(e){this.fe=e}}function Dh(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Qu(a=r.fe,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Sc(a,m.version.toTimestamp()),createTime:Sc(a,m.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:du(e.version)};else{if(!e.isUnknownDocument())return nn();s.unknownDocument={path:t.path.toArray(),version:du(e.version)}}var a,m;return s}function bc(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function du(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yl(r){const e=new es(r.seconds,r.nanoseconds);return Gn.fromTimestamp(e)}function Lu(r,e){const t=(e.baseMutations||[]).map(m=>Ad(r.fe,m));for(let m=0;m<e.mutations.length-1;++m)m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(e.mutations[m].updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m);const s=e.mutations.map(m=>Ad(r.fe,m)),a=es.fromMillis(e.localWriteTimeMs);return new hh(e.batchId,a,t,s)}function ec(r){const e=yl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?yl(r.lastLimboFreeSnapshotVersion):Gn.min();let s;var a;return void 0!==r.query.documents?(wn(1===(a=r.query).documents.length),s=R(gl(ml(a.documents[0])))):s=R(wh(r.query)),new Tu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Us.fromBase64String(r.resumeToken))}function Af(r,e){const t=du(e.snapshotVersion),s=du(e.lastLimboFreeSnapshotVersion);let a;a=Pl(e.target)?vh(r.fe,e.target):Eh(r.fe,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Od(r){const e=wh({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?de(e,e.limit,"L"):e}function kd(r,e){return new wf(e.largestBatchId,Ad(r.fe,e.overlayMutation))}function p(r,e){const t=e.path.lastSegment();return[r,ts(e.path.popLast()),t]}function c(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:du(s.readTime),documentKey:ts(s.documentKey.path),largestBatchId:s.largestBatchId}}class d{getBundleMetadata(e,t){return _(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:yl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return _(e).put({bundleId:(s=t).id,createTime:du(Ri(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return T(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Od(a.bundledQuery),readTime:yl(a.readTime)};var a})}saveNamedQuery(e,t){return T(e).put({name:(s=t).name,readTime:du(Ri(s.readTime)),bundledQuery:s.bundledQuery});var s}}function _(r){return tr(r,"bundles")}function T(r){return tr(r,"namedQueries")}class O{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new O(e,t.uid||"")}getOverlay(e,t){return z(e).get(p(this.userId,t)).next(s=>s?kd(this.serializer,s):null)}getOverlays(e,t){const s=Xs();return it.forEach(t,a=>this.getOverlay(e,a).next(m=>{null!==m&&s.set(a,m)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((m,w)=>{const M=new wf(t,w);a.push(this.we(e,M))}),it.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(w=>a.add(ts(w.getCollectionPath())));const m=[];return a.forEach(w=>{const M=IDBKeyRange.bound([this.userId,w,s],[this.userId,w,s+1],!1,!0);m.push(z(e).J("collectionPathOverlayIndex",M))}),it.waitFor(m)}getOverlaysForCollection(e,t,s){const a=Xs(),m=ts(t),w=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return z(e).j("collectionPathOverlayIndex",w).next(M=>{for(const H of M){const Y=kd(this.serializer,H);a.set(Y.getKey(),Y)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const m=Xs();let w;const M=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return z(e).X({index:"collectionGroupOverlayIndex",range:M},(H,Y,ue)=>{const Ae=kd(this.serializer,Y);m.size()<a||Ae.largestBatchId===w?(m.set(Ae.getKey(),Ae),w=Ae.largestBatchId):ue.done()}).next(()=>m)}we(e,t){return z(e).put(function(s,a,m){const[w,M,H]=p(a,m.mutation.key);return{userId:a,collectionPath:M,documentId:H,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Xu(s.fe,m.mutation)}}(this.serializer,this.userId,t))}}function z(r){return tr(r,"documentOverlays")}class se{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(hn(e.integerValue));else if("doubleValue"in e){const s=hn(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),zo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Yn(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Za(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):nn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Xt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function _e(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function xe(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const m=_e(255&t[a]);if(s+=m,8!==m)break}return s}(r);return Math.ceil(e/8)}se.Ve=new se;class It{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=xe(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=xe(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,a,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Ct{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ft{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class En{constructor(){this.je=new It,this.ze=new Ct(this.je),this.We=new Ft(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Zn{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Zn(this.indexId,this.documentKey,this.arrayValue,s)}}function Mi(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=sa(r.arrayValue,e.arrayValue),0!==t?t:(t=sa(r.directionalValue,e.directionalValue),0!==t?t:Xt.comparator(r.documentKey,e.documentKey)))}function sa(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class hu{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){wn(e.collectionGroup===this.collectionId);const t=$a(e);if(void 0!==t&&!this.en(t))return!1;const s=wo(e);let a=new Set,m=0,w=0;for(;m<s.length&&this.en(s[m]);++m)a=a.add(s[m].fieldPath.canonicalString());if(m===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const M=s[m];if(!this.nn(this.Ze,M)||!this.sn(this.Ye[w++],M))return!1}++m}for(;m<s.length;++m)if(w>=this.Ye.length||!this.sn(this.Ye[w++],s[m]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fu(r){var e,t;if(wn(r instanceof fe||r instanceof Re),r instanceof fe){if(r instanceof ba){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>fe.create(r.field,"==",m)))||[];return Re.create(a,"or")}return r}const s=r.filters.map(a=>fu(a));return Re.create(s,r.op)}function Ac(r){if(0===r.getFilters().length)return[];const e=Th(fu(r));return wn(Mf(e)),Fd(e)||Rf(e)?[e]:e.getFilters()}function Fd(r){return r instanceof fe}function Rf(r){return r instanceof Re&&an(r)}function Mf(r){return Fd(r)||Rf(r)||function(e){if(e instanceof Re&&vt(e)){for(const t of e.getFilters())if(!Fd(t)&&!Rf(t))return!1;return!0}return!1}(r)}function Th(r){if(wn(r instanceof fe||r instanceof Re),r instanceof fe)return r;if(1===r.filters.length)return Th(r.filters[0]);const e=r.filters.map(s=>Th(s));let t=Re.create(e,r.op);return t=Rc(t),Mf(t)?t:(wn(t instanceof Re),wn(ze(t)),wn(t.filters.length>1),t.filters.reduce((s,a)=>Lp(s,a)))}function Lp(r,e){let t;return wn(r instanceof fe||r instanceof Re),wn(e instanceof fe||e instanceof Re),t=r instanceof fe?e instanceof fe?Re.create([r,e],"and"):Pf(r,e):e instanceof fe?Pf(e,r):function(s,a){if(wn(s.filters.length>0&&a.filters.length>0),ze(s)&&ze(a))return Tr(s,a.getFilters());const m=vt(s)?s:a,w=vt(s)?a:s,M=m.filters.map(H=>Lp(H,w));return Re.create(M,"or")}(r,e),Rc(t)}function Pf(r,e){if(ze(e))return Tr(e,r.getFilters());{const t=e.filters.map(s=>Lp(r,s));return Re.create(t,"or")}}function Rc(r){if(wn(r instanceof fe||r instanceof Re),r instanceof fe)return r;const e=r.getFilters();if(1===e.length)return Rc(e[0]);if(on(r))return r;const t=e.map(a=>Rc(a)),s=[];return t.forEach(a=>{a instanceof fe?s.push(a):a instanceof Re&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Re.create(s,r.op)}class Vy{constructor(){this.rn=new Vp}addToCollectionParentIndex(e,t){return this.rn.add(t),it.resolve()}getCollectionParents(e,t){return it.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return it.resolve()}deleteFieldIndex(e,t){return it.resolve()}getDocumentsMatchingTarget(e,t){return it.resolve(null)}getIndexType(e,t){return it.resolve(0)}getFieldIndexes(e,t){return it.resolve([])}getNextCollectionGroupToUpdate(e){return it.resolve(null)}getMinOffset(e,t){return it.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return it.resolve(Ys.min())}updateCollectionGroup(e,t,s){return it.resolve()}updateIndexEntries(e,t){return it.resolve()}}class Vp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Ei(or.comparator),m=!a.has(s);return this.index[t]=a.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Ei(or.comparator)).toArray()}}const Nf=new Uint8Array(0);class Uy{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Vp,this.un=new Ko(s=>sl(s),(s,a)=>au(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const m={collectionId:s,parent:ts(a)};return im(e).put(m)}return it.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[cl(t),""],!1,!0);return im(e).j(a).next(m=>{for(const w of m){if(w.collectionId!==t)break;s.push(Ls(w.parent))}return s})}addFieldIndex(e,t){const s=xf(e),a={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var w;delete a.indexId;const m=s.add(a);if(t.indexState){const w=Vu(e);return m.next(M=>{w.put(c(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=xf(e),a=Vu(e),m=Sh(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Sh(e);let a=!0;const m=new Map;return it.forEach(this.cn(t),w=>this.an(e,w).next(M=>{a&&(a=!!M),m.set(w,M)})).next(()=>{if(a){let w=ni();const M=[];return it.forEach(m,(H,Y)=>{var ue;At("IndexedDbIndexManager",`Using index ${ue=H,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(Wi=>`${Wi.fieldPath}:${Wi.kind}`).join(",")}`} to execute ${sl(t)}`);const Ae=function(Wi,ka){const va=$a(ka);if(void 0===va)return null;for(const bo of Aa(Wi,va.fieldPath))switch(bo.op){case"array-contains-any":return bo.value.arrayValue.values||[];case"array-contains":return[bo.value]}return null}(Y,H),st=function(Wi,ka){const va=new Map;for(const bo of wo(ka))for(const Zl of Aa(Wi,bo.fieldPath))switch(Zl.op){case"==":case"in":va.set(bo.fieldPath.canonicalString(),Zl.value);break;case"not-in":case"!=":return va.set(bo.fieldPath.canonicalString(),Zl.value),Array.from(va.values())}return null}(Y,H),Rt=function(Wi,ka){const va=[];let bo=!0;for(const Zl of wo(ka)){const fd=0===Zl.kind?pc(Wi,Zl.fieldPath,Wi.startAt):Gu(Wi,Zl.fieldPath,Wi.startAt);va.push(fd.value),bo&&(bo=fd.inclusive)}return new il(va,bo)}(Y,H),en=function(Wi,ka){const va=[];let bo=!0;for(const Zl of wo(ka)){const fd=0===Zl.kind?Gu(Wi,Zl.fieldPath,Wi.endAt):pc(Wi,Zl.fieldPath,Wi.endAt);va.push(fd.value),bo&&(bo=fd.inclusive)}return new il(va,bo)}(Y,H),kn=this.hn(H,Y,Rt),$n=this.hn(H,Y,en),Ci=this.ln(H,Y,st),us=this.fn(H.indexId,Ae,kn,Rt.inclusive,$n,en.inclusive,Ci);return it.forEach(us,Wi=>s.H(Wi,t.limit).next(ka=>{ka.forEach(va=>{const bo=Xt.fromSegments(va.documentKey);w.has(bo)||(w=w.add(bo),M.push(bo))})}))}).next(()=>M)}return it.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ac(Re.create(e.filters,"and")).map(s=>Ou(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,m,w,M){const H=(null!=t?t.length:1)*Math.max(s.length,m.length),Y=H/(null!=t?t.length:1),ue=[];for(let Ae=0;Ae<H;++Ae){const st=t?this.dn(t[Ae/Y]):Nf,Rt=this.wn(e,st,s[Ae%Y],a),en=this._n(e,st,m[Ae%Y],w),kn=M.map($n=>this.wn(e,st,$n,!0));ue.push(...this.createRange(Rt,en,kn))}return ue}wn(e,t,s,a){const m=new Zn(e,Xt.empty(),t,s);return a?m:m.Je()}_n(e,t,s,a){const m=new Zn(e,Xt.empty(),t,s);return a?m.Je():m}an(e,t){const s=new hu(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(m=>{let w=null;for(const M of m)s.tn(M)&&(!w||M.fields.length>w.fields.length)&&(w=M);return w})}getIndexType(e,t){let s=2;const a=this.cn(t);return it.forEach(a,m=>this.an(e,m).next(w=>{w?0!==s&&w.fields.length<function(M){let H=new Ei(Dr.comparator),Y=!1;for(const ue of M.filters)for(const Ae of ue.getFlattenedFilters())Ae.field.isKeyField()||("array-contains"===Ae.op||"array-contains-any"===Ae.op?Y=!0:H=H.add(Ae.field));for(const ue of M.orderBy)ue.field.isKeyField()||(H=H.add(ue.field));return H.size+(Y?1:0)}(m)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new En;for(const a of wo(e)){const m=t.data.field(a.fieldPath);if(null==m)return null;const w=s.He(a.kind);se.Ve._e(m,w)}return s.Qe()}dn(e){const t=new En;return se.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new En;return se.Ve._e(Bl(this.databaseId,t),s.He(function(a){const m=wo(a);return 0===m.length?0:m[m.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new En);let m=0;for(const w of wo(e)){const M=s[m++];for(const H of a)if(this.yn(t,w.fieldPath)&&vu(M))a=this.pn(a,w,M);else{const Y=H.He(w.kind);se.Ve._e(M,Y)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],m=[];for(const w of s.arrayValue.values||[])for(const M of a){const H=new En;H.seed(M.Qe()),se.Ve._e(w,H.He(t.kind)),m.push(H)}return m}yn(e,t){return!!e.filters.find(s=>s instanceof fe&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=xf(e),a=Vu(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(m=>{const w=[];return it.forEach(m,M=>a.get([M.indexId,this.uid]).next(H=>{w.push(function(Y,ue){const Ae=ue?new Ha(ue.sequenceNumber,new Ys(yl(ue.readTime),new Xt(Ls(ue.documentKey)),ue.largestBatchId)):Ha.empty(),st=Y.fields.map(([Rt,en])=>new wl(Dr.fromServerFormat(Rt),en));return new ta(Y.indexId,Y.collectionGroup,st,Ae)}(M,H))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const m=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==m?m:lr(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=xf(e),m=Vu(e);return this.Tn(e).next(w=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>it.forEach(M,H=>m.put(c(H.indexId,this.user,w,s)))))}updateIndexEntries(e,t){const s=new Map;return it.forEach(t,(a,m)=>{const w=s.get(a.collectionGroup);return(w?it.resolve(w):this.getFieldIndexes(e,a.collectionGroup)).next(M=>(s.set(a.collectionGroup,M),it.forEach(M,H=>this.En(e,a,H).next(Y=>{const ue=this.An(m,H);return Y.isEqual(ue)?it.resolve():this.vn(e,m,H,Y,ue)}))))})}Rn(e,t,s,a){return Sh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Sh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Sh(e);let m=new Ei(Mi);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(w,M)=>{m=m.add(new Zn(s.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>m)}An(e,t){let s=new Ei(Mi);const a=this.mn(t,e);if(null==a)return s;const m=$a(t);if(null!=m){const w=e.data.field(m.fieldPath);if(vu(w))for(const M of w.arrayValue.values||[])s=s.add(new Zn(t.indexId,e.key,this.dn(M),a))}else s=s.add(new Zn(t.indexId,e.key,Nf,a));return s}vn(e,t,s,a,m){At("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(M,H,Y,ue,Ae){const st=M.getIterator(),Rt=H.getIterator();let en=ko(st),kn=ko(Rt);for(;en||kn;){let $n=!1,Ci=!1;if(en&&kn){const us=Y(en,kn);us<0?Ci=!0:us>0&&($n=!0)}else null!=en?Ci=!0:$n=!0;$n?(ue(kn),kn=ko(Rt)):Ci?(Ae(en),en=ko(st)):(en=ko(st),kn=ko(Rt))}}(a,m,Mi,M=>{w.push(this.Rn(e,t,s,M))},M=>{w.push(this.Pn(e,t,s,M))}),it.waitFor(w)}Tn(e){let t=1;return Vu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,m)=>{m.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((w,M)=>Mi(w,M)).filter((w,M,H)=>!M||0!==Mi(w,H[M-1]));const a=[];a.push(e);for(const w of s){const M=Mi(w,e),H=Mi(w,t);if(0===M)a[0]=e.Je();else if(M>0&&H<0)a.push(w),a.push(w.Je());else if(H>0)break}a.push(t);const m=[];for(let w=0;w<a.length;w+=2){if(this.bn(a[w],a[w+1]))return[];m.push(IDBKeyRange.bound([a[w].indexId,this.uid,a[w].arrayValue,a[w].directionalValue,Nf,[]],[a[w+1].indexId,this.uid,a[w+1].arrayValue,a[w+1].directionalValue,Nf,[]]))}return m}bn(e,t){return Mi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Uu)}getMinOffset(e,t){return it.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||nn())).next(Uu)}}function im(r){return tr(r,"collectionParents")}function Sh(r){return tr(r,"indexEntries")}function xf(r){return tr(r,"indexConfiguration")}function Vu(r){return tr(r,"indexState")}function Uu(r){wn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;jo(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ys(e.readTime,e.documentKey,t)}const sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _l{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new _l(e,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function By(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),m=[],w=IDBKeyRange.only(t.batchId);let M=0;const H=s.X({range:w},(ue,Ae,st)=>(M++,st.delete()));m.push(H.next(()=>{wn(1===M)}));const Y=[];for(const ue of t.mutations){const Ae=Ul(e,ue.key.path,t.batchId);m.push(a.delete(Ae)),Y.push(ue.key)}return it.waitFor(m).next(()=>Y)}function Up(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw nn();e=r.noDocument}return JSON.stringify(e).length}_l.DEFAULT_COLLECTION_PERCENTILE=10,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_l.DEFAULT=new _l(41943040,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_l.DISABLED=new _l(-1,0,0);class bh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){wn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new bh(m,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tc(e).X({index:"userMutationsIndex",range:s},(a,m,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const m=Xc(e),w=tc(e);return w.add({}).next(M=>{wn("number"==typeof M);const H=new hh(M,t,s,a),Y=function(st,Rt,en){const kn=en.baseMutations.map(Ci=>Xu(st.fe,Ci)),$n=en.mutations.map(Ci=>Xu(st.fe,Ci));return{userId:Rt,batchId:en.batchId,localWriteTimeMs:en.localWriteTime.toMillis(),baseMutations:kn,mutations:$n}}(this.serializer,this.userId,H),ue=[];let Ae=new Ei((st,Rt)=>lr(st.canonicalString(),Rt.canonicalString()));for(const st of a){const Rt=Ul(this.userId,st.key.path,M);Ae=Ae.add(st.key.path.popLast()),ue.push(w.put(Y)),ue.push(m.put(Rt,Xl))}return Ae.forEach(st=>{ue.push(this.indexManager.addToCollectionParentIndex(e,st))}),e.addOnCommittedListener(()=>{this.Vn[M]=H.keys()}),it.waitFor(ue).next(()=>H)})}lookupMutationBatch(e,t){return tc(e).get(t).next(s=>s?(wn(s.userId===this.userId),Lu(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?it.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return tc(e).X({index:"userMutationsIndex",range:a},(w,M,H)=>{M.userId===this.userId&&(wn(M.batchId>=s),m=Lu(this.serializer,M)),H.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return tc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,m,w)=>{s=m.batchId,w.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tc(e).j("userMutationsIndex",t).next(s=>s.map(a=>Lu(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Go(this.userId,t.path),a=IDBKeyRange.lowerBound(s),m=[];return Xc(e).X({range:a},(w,M,H)=>{const[Y,ue,Ae]=w,st=Ls(ue);if(Y===this.userId&&t.path.isEqual(st))return tc(e).get(Ae).next(Rt=>{if(!Rt)throw nn();wn(Rt.userId===this.userId),m.push(Lu(this.serializer,Rt))});H.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ei(lr);const a=[];return t.forEach(m=>{const w=Go(this.userId,m.path),M=IDBKeyRange.lowerBound(w),H=Xc(e).X({range:M},(Y,ue,Ae)=>{const[st,Rt,en]=Y,kn=Ls(Rt);st===this.userId&&m.path.isEqual(kn)?s=s.add(en):Ae.done()});a.push(H)}),it.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,m=Go(this.userId,s),w=IDBKeyRange.lowerBound(m);let M=new Ei(lr);return Xc(e).X({range:w},(H,Y,ue)=>{const[Ae,st,Rt]=H,en=Ls(st);Ae===this.userId&&s.isPrefixOf(en)?en.length===a&&(M=M.add(Rt)):ue.done()}).next(()=>this.Dn(e,M))}Dn(e,t){const s=[],a=[];return t.forEach(m=>{a.push(tc(e).get(m).next(w=>{if(null===w)throw nn();wn(w.userId===this.userId),s.push(Lu(this.serializer,w))}))}),it.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return By(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),it.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return it.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Xc(e).X({range:s},(m,w,M)=>{if(m[0]===this.userId){const H=Ls(m[1]);a.push(H)}else M.done()}).next(()=>{wn(0===a.length)})})}containsKey(e,t){return $y(e,this.userId,t)}xn(e){return om(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $y(r,e,t){const s=Go(e,t.path),a=s[1],m=IDBKeyRange.lowerBound(s);let w=!1;return Xc(r).X({range:m,Y:!0},(M,H,Y)=>{const[ue,Ae,st]=M;ue===e&&Ae===a&&(w=!0),Y.done()}).next(()=>w)}function tc(r){return tr(r,"mutations")}function Xc(r){return tr(r,"documentMutations")}function om(r){return tr(r,"mutationQueues")}class Mc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Mc(0)}static Mn(){return new Mc(-1)}}class jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Mc(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Gn.fromTimestamp(new es(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ld(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(wn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const m=[];return Ld(e).X((w,M)=>{const H=ec(M);H.sequenceNumber<=t&&null===s.get(H.targetId)&&(a++,m.push(this.removeTargetData(e,H)))}).next(()=>it.waitFor(m)).next(()=>a)}forEachTarget(e,t){return Ld(e).X((s,a)=>{const m=ec(a);t(m)})}$n(e){return pu(e).get("targetGlobalKey").next(t=>(wn(null!==t),t))}On(e,t){return pu(e).put("targetGlobalKey",t)}Fn(e,t){return Ld(e).put(Af(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=sl(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return Ld(e).X({range:a,index:"queryTargetsIndex"},(w,M,H)=>{const Y=ec(M);au(t,Y.target)&&(m=Y,H.done())}).next(()=>m)}addMatchingKeys(e,t,s){const a=[],m=Pc(e);return t.forEach(w=>{const M=ts(w.path);a.push(m.put({targetId:s,path:M})),a.push(this.referenceDelegate.addReference(e,s,w))}),it.waitFor(a)}removeMatchingKeys(e,t,s){const a=Pc(e);return it.forEach(t,m=>{const w=ts(m.path);return it.waitFor([a.delete([s,w]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=Pc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Pc(e);let m=ni();return a.X({range:s,Y:!0},(w,M,H)=>{const Y=Ls(w[1]),ue=new Xt(Y);m=m.add(ue)}).next(()=>m)}containsKey(e,t){const s=ts(t.path),a=IDBKeyRange.bound([s],[cl(s)],!1,!0);let m=0;return Pc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([w,M],H,Y)=>{0!==w&&(m++,Y.done())}).next(()=>m>0)}le(e,t){return Ld(e).get(t).next(s=>s?ec(s):null)}}function Ld(r){return tr(r,"targets")}function pu(r){return tr(r,"targetGlobal")}function Pc(r){return tr(r,"targetDocuments")}function Bp([r,e],[t,s]){const a=lr(r,t);return 0===a?lr(e,s):a}class Hy{constructor(e){this.Ln=e,this.buffer=new Ei(Bp),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Bp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class am{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;At("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,v.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ra(s)?At("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield io(s)}yield t.Qn(3e5)}))}}class zy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return it.resolve(Oo.ct);const s=new Hy(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(sm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,m,w,M,H,Y;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ae=>(Ae>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ae}`),a=this.params.maximumSequenceNumbersToCollect):a=Ae,w=Date.now(),this.nthSequenceNumber(e,a))).next(Ae=>(s=Ae,M=Date.now(),this.removeTargets(e,s,t))).next(Ae=>(m=Ae,H=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ae=>(Y=Date.now(),Ur()<=Pe.in.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ue}ms\n\tDetermined least recently used ${a} in `+(M-w)+`ms\n\tRemoved ${m} targets in `+(H-M)+`ms\n\tRemoved ${Ae} documents in `+(Y-H)+`ms\nTotal Duration: ${Y-ue}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:m,documentsRemoved:Ae})))}}class um{constructor(e,t){this.db=e,this.garbageCollector=function lm(r,e){return new zy(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Of(e,s)}removeReference(e,t,s){return Of(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Of(e,t)}Xn(e,t){return function(s,a){let m=!1;return om(s).Z(w=>$y(s,w,a).next(M=>(M&&(m=!0),it.resolve(!M)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let m=0;return this.Yn(e,(w,M)=>{if(M<=t){const H=this.Xn(e,w).next(Y=>{if(!Y)return m++,s.getEntry(e,w).next(()=>(s.removeEntry(w,Gn.min()),Pc(e).delete([0,ts(w.path)])))});a.push(H)}}).next(()=>it.waitFor(a)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Of(e,t)}Yn(e,t){const s=Pc(e);let a,m=Oo.ct;return s.X({index:"documentTargetsIndex"},([w,M],{path:H,sequenceNumber:Y})=>{0===w?(m!==Oo.ct&&t(new Xt(Ls(a)),m),m=Y,a=H):m=Oo.ct}).next(()=>{m!==Oo.ct&&t(new Xt(Ls(a)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Of(r,e){return Pc(r).put((s=r.currentSequenceNumber,{targetId:0,path:ts(e.path),sequenceNumber:s}));var s}class cm{constructor(){this.changes=new Ko(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?it.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Nc(e).put(s)}removeEntry(e,t,s){return Nc(e).delete(function(a,m){const w=a.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],bc(m),w[w.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=As.newInvalidDocument(t);return Nc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ah(t))},(a,m)=>{s=this.ts(t,m)}).next(()=>s)}es(e,t){let s={size:0,document:As.newInvalidDocument(t)};return Nc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ah(t))},(a,m)=>{s={document:this.ts(t,m),size:Up(m)}}).next(()=>s)}getEntries(e,t){let s=Ns();return this.ns(e,t,(a,m)=>{const w=this.ts(a,m);s=s.insert(a,w)}).next(()=>s)}ss(e,t){let s=Ns(),a=new Ii(Xt.comparator);return this.ns(e,t,(m,w)=>{const M=this.ts(m,w);s=s.insert(m,M),a=a.insert(m,Up(w))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return it.resolve();let a=new Ei(jp);t.forEach(H=>a=a.add(H));const m=IDBKeyRange.bound(Ah(a.first()),Ah(a.last())),w=a.getIterator();let M=w.getNext();return Nc(e).X({index:"documentKeyIndex",range:m},(H,Y,ue)=>{const Ae=Xt.fromSegments([...Y.prefixPath,Y.collectionGroup,Y.documentId]);for(;M&&jp(M,Ae)<0;)s(M,null),M=w.getNext();M&&M.isEqual(Ae)&&(s(M,Y),M=w.hasNext()?w.getNext():null),M?ue.G(Ah(M)):ue.done()}).next(()=>{for(;M;)s(M,null),M=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const m=t.path,w=[m.popLast().toArray(),m.lastSegment(),bc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],M=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nc(e).j(IDBKeyRange.bound(w,M,!0)).next(H=>{let Y=Ns();for(const ue of H){const Ae=this.ts(Xt.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);Ae.isFoundDocument()&&(_n(t,Ae)||a.has(Ae.key))&&(Y=Y.insert(Ae.key,Ae))}return Y})}getAllFromCollectionGroup(e,t,s,a){let m=Ns();const w=hm(t,s),M=hm(t,Ys.max());return Nc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,M,!0)},(H,Y,ue)=>{const Ae=this.ts(Xt.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);m=m.insert(Ae.key,Ae),m.size===a&&ue.done()}).next(()=>m)}newChangeBuffer(e){return new dm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $p(e).get("remoteDocumentGlobalKey").next(t=>(wn(!!t),t))}Zn(e,t){return $p(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function xd(r,e){let t;if(e.document)t=Fp(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Xt.fromSegments(e.noDocument.path),a=yl(e.noDocument.readTime);t=As.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nn();{const s=Xt.fromSegments(e.unknownDocument.path),a=yl(e.unknownDocument.version);t=As.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new es(s[0],s[1]);return Gn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Gn.min()))return s}return As.newInvalidDocument(e)}}function pi(r){return new Gy(r)}class dm extends cm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ko(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Ei((m,w)=>lr(m.canonicalString(),w.canonicalString()));return this.changes.forEach((m,w)=>{const M=this.us.get(m);if(t.push(this.os.removeEntry(e,m,M.readTime)),w.isValidDocument()){const H=Dh(this.os.serializer,w);a=a.add(m.path.popLast());const Y=Up(H);s+=Y-M.size,t.push(this.os.addEntry(e,m,H))}else if(s-=M.size,this.trackRemovals){const H=Dh(this.os.serializer,w.convertToNoDocument(Gn.min()));t.push(this.os.addEntry(e,m,H))}}),a.forEach(m=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.os.updateMetadata(e,s)),it.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((m,w)=>{this.us.set(m,{size:w,readTime:s.get(m).readTime})}),s))}}function $p(r){return tr(r,"remoteDocumentGlobal")}function Nc(r){return tr(r,"remoteDocumentsV14")}function Ah(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hm(r,e){const t=e.documentKey.path.toArray();return[r,bc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jp(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(a=lr(t[m],s[m]),a)return a;return a=lr(t.length,s.length),a||(a=lr(t[t.length-2],s[s.length-2]),a||lr(t[t.length-1],s[s.length-1]))}class Wy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hp{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&wc(s.mutation,a,uo.empty(),es.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ni()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ni()){const a=Xs();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(m=>{let w=ol();return m.forEach((M,H)=>{w=w.insert(M,H.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const s=Xs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ni()))}populateOverlays(e,t,s){const a=[];return s.forEach(m=>{t.has(m)||a.push(m)}),this.documentOverlayCache.getOverlays(e,a).next(m=>{m.forEach((w,M)=>{t.set(w,M)})})}computeViews(e,t,s,a){let m=Ns();const w=eu(),M=eu();return t.forEach((H,Y)=>{const ue=s.get(Y.key);a.has(Y.key)&&(void 0===ue||ue.mutation instanceof wu)?m=m.insert(Y.key,Y):void 0!==ue?(w.set(Y.key,ue.mutation.getFieldMask()),wc(ue.mutation,Y,ue.mutation.getFieldMask(),es.now())):w.set(Y.key,uo.empty())}),this.recalculateAndSaveOverlays(e,m).next(H=>(H.forEach((Y,ue)=>w.set(Y,ue)),t.forEach((Y,ue)=>{var Ae;return M.set(Y,new Wy(ue,null!==(Ae=w.get(Y))&&void 0!==Ae?Ae:null))}),M))}recalculateAndSaveOverlays(e,t){const s=eu();let a=new Ii((w,M)=>w-M),m=ni();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const M of w)M.keys().forEach(H=>{const Y=t.get(H);if(null===Y)return;let ue=s.get(H)||uo.empty();ue=M.applyToLocalView(Y,ue),s.set(H,ue);const Ae=(a.get(M.batchId)||ni()).add(H);a=a.insert(M.batchId,Ae)})}).next(()=>{const w=[],M=a.getReverseIterator();for(;M.hasNext();){const H=M.getNext(),Y=H.key,ue=H.value,Ae=Hl();ue.forEach(st=>{if(!m.has(st)){const Rt=vd(t.get(st),s.get(st));null!==Rt&&Ae.set(st,Rt),m=m.add(st)}}),w.push(this.documentOverlayCache.saveOverlays(e,Y,Ae))}return it.waitFor(w)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Xt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):y(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(m=>{const w=a-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-m.size):it.resolve(Xs());let M=-1,H=m;return w.next(Y=>it.forEach(Y,(ue,Ae)=>(M<Ae.largestBatchId&&(M=Ae.largestBatchId),m.get(ue)?it.resolve():this.remoteDocumentCache.getEntry(e,ue).next(st=>{H=H.insert(ue,st)}))).next(()=>this.populateOverlays(e,Y,m)).next(()=>this.computeViews(e,H,Y,ni())).next(ue=>({batchId:M,changes:Eu(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xt(t)).next(s=>{let a=ol();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let m=ol();return this.indexManager.getCollectionParents(e,a).next(w=>it.forEach(w,M=>{const H=(Y=t,ue=M.child(a),new pl(ue,null,Y.explicitOrderBy.slice(),Y.filters.slice(),Y.limit,Y.limitType,Y.startAt,Y.endAt));var Y,ue;return this.getDocumentsMatchingCollectionQuery(e,H,s).next(Y=>{Y.forEach((ue,Ae)=>{m=m.insert(ue,Ae)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(m=>(a=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(m=>{a.forEach((M,H)=>{const Y=H.getKey();null===m.get(Y)&&(m=m.insert(Y,As.newInvalidDocument(Y)))});let w=ol();return m.forEach((M,H)=>{const Y=a.get(M);void 0!==Y&&wc(Y.mutation,H,uo.empty(),es.now()),_n(t,H)&&(w=w.insert(M,H))}),w})}}class Ky{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return it.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Ri(s.createTime)}),it.resolve()}getNamedQuery(e,t){return it.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Od(s.bundledQuery),readTime:Ri(s.readTime)}),it.resolve();var s}}class qy{constructor(){this.overlays=new Ii(Xt.comparator),this.ls=new Map}getOverlay(e,t){return it.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xs();return it.forEach(t,a=>this.getOverlay(e,a).next(m=>{null!==m&&s.set(a,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,m)=>{this.we(e,t,m)}),it.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(m=>this.overlays=this.overlays.remove(m)),this.ls.delete(s)),it.resolve()}getOverlaysForCollection(e,t,s){const a=Xs(),m=t.length+1,w=new Xt(t.child("")),M=this.overlays.getIteratorFrom(w);for(;M.hasNext();){const H=M.getNext().value,Y=H.getKey();if(!t.isPrefixOf(Y.path))break;Y.path.length===m&&H.largestBatchId>s&&a.set(H.getKey(),H)}return it.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let m=new Ii((Y,ue)=>Y-ue);const w=this.overlays.getIterator();for(;w.hasNext();){const Y=w.getNext().value;if(Y.getKey().getCollectionGroup()===t&&Y.largestBatchId>s){let ue=m.get(Y.largestBatchId);null===ue&&(ue=Xs(),m=m.insert(Y.largestBatchId,ue)),ue.set(Y.getKey(),Y)}}const M=Xs(),H=m.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Y,ue)=>M.set(Y,ue)),!(M.size()>=a)););return it.resolve(M)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const w=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,w)}this.overlays=this.overlays.insert(s.key,new wf(t,s));let m=this.ls.get(t);void 0===m&&(m=ni(),this.ls.set(t,m)),this.ls.set(t,m.add(s.key))}}class fm{constructor(){this.fs=new Ei(xa.ds),this.ws=new Ei(xa._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new xa(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new xa(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Xt(new or([])),s=new xa(t,e),a=new xa(t,e+1),m=[];return this.ws.forEachInRange([s,a],w=>{this.ys(w),m.push(w.key)}),m}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xt(new or([])),s=new xa(t,e),a=new xa(t,e+1);let m=ni();return this.ws.forEachInRange([s,a],w=>{m=m.add(w.key)}),m}containsKey(e){const t=new xa(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xa{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xt.comparator(e.key,t.key)||lr(e.As,t.As)}static _s(e,t){return lr(e.As,t.As)||Xt.comparator(e.key,t.key)}}class pm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ei(xa.ds)}checkEmpty(e){return it.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const m=this.vs;this.vs++;const w=new hh(m,t,s,a);this.mutationQueue.push(w);for(const M of a)this.Rs=this.Rs.add(new xa(M.key,m)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return it.resolve(w)}lookupMutationBatch(e,t){return it.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),m=a<0?0:a;return it.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xa(t,0),a=new xa(t,Number.POSITIVE_INFINITY),m=[];return this.Rs.forEachInRange([s,a],w=>{const M=this.Ps(w.As);m.push(M)}),it.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ei(lr);return t.forEach(a=>{const m=new xa(a,0),w=new xa(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([m,w],M=>{s=s.add(M.As)})}),it.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let m=s;Xt.isDocumentKey(m)||(m=m.child(""));const w=new xa(new Xt(m),0);let M=new Ei(lr);return this.Rs.forEachWhile(H=>{const Y=H.key.path;return!!s.isPrefixOf(Y)&&(Y.length===a&&(M=M.add(H.As)),!0)},w),it.resolve(this.Vs(M))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){wn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return it.forEach(t.mutations,a=>{const m=new xa(a.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new xa(t,0),a=this.Rs.firstAfterOrEqual(s);return it.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return it.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jc{constructor(e){this.Ds=e,this.docs=new Ii(Xt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),m=a?a.size:0,w=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:w}),this.size+=w-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return it.resolve(s?s.document.mutableCopy():As.newInvalidDocument(t))}getEntries(e,t){let s=Ns();return t.forEach(a=>{const m=this.docs.get(a);s=s.insert(a,m?m.document.mutableCopy():As.newInvalidDocument(a))}),it.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let m=Ns();const w=t.path,M=new Xt(w.child("")),H=this.docs.getIteratorFrom(M);for(;H.hasNext();){const{key:Y,value:{document:ue}}=H.getNext();if(!w.isPrefixOf(Y.path))break;Y.path.length>w.length+1||jo(Fs(ue),s)<=0||(a.has(ue.key)||_n(t,ue))&&(m=m.insert(ue.key,ue.mutableCopy()))}return it.resolve(m)}getAllFromCollectionGroup(e,t,s,a){nn()}Cs(e,t){return it.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Zy(this)}getSize(e){return it.resolve(this.size)}}class Zy extends cm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),it.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class zp{constructor(e){this.persistence=e,this.xs=new Ko(t=>sl(t),au),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new fm,this.targetCount=0,this.Ms=Mc.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),it.resolve()}getLastRemoteSnapshotVersion(e){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return it.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),it.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Mc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,it.resolve()}updateTargetData(e,t){return this.Fn(t),it.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,it.resolve()}removeTargets(e,t,s){let a=0;const m=[];return this.xs.forEach((w,M)=>{M.sequenceNumber<=t&&null===s.get(M.targetId)&&(this.xs.delete(w),m.push(this.removeMatchingKeysForTargetId(e,M.targetId)),a++)}),it.waitFor(m).next(()=>a)}getTargetCount(e){return it.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return it.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),it.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,m=[];return a&&t.forEach(w=>{m.push(a.markPotentiallyOrphaned(e,w))}),it.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),it.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return it.resolve(s)}containsKey(e,t){return it.resolve(this.ks.containsKey(t))}}class Rh{constructor(e,t){this.$s={},this.overlays={},this.Os=new Oo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new zp(this),this.indexManager=new Vy,this.remoteDocumentCache=new Jc(s=>this.referenceDelegate.Ls(s)),this.serializer=new Nd(t),this.qs=new Ky(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new pm(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){At("MemoryPersistence","Starting transaction:",e);const a=new Yy(this.Os.next());return this.referenceDelegate.Us(),s(a).next(m=>this.referenceDelegate.Ks(a).next(()=>m)).toPromise().then(m=>(a.raiseOnCommittedEvent(),m))}Gs(e,t){return it.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class Yy extends Cl{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Qs=new fm,this.js=null}static zs(e){return new Gp(e)}get Ws(){if(this.js)return this.js;throw nn()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),it.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),it.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),it.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(m=>this.Ws.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.Ws,s=>{const a=Xt.fromPath(s);return this.Hs(e,a).next(m=>{m||t.removeEntry(a,Gn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return it.or([()=>it.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Hv{constructor(e){this.serializer=e}O(e,t,s,a){const m=new ls("createOrUpgrade",t);var M;s<1&&a>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ta,{unique:!0}),M.createObjectStore("documentMutations"),gm(e),function(M){M.createObjectStore("remoteDocuments")}(e));let w=it.resolve();return s<3&&a>=3&&(0!==s&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),gm(e)),w=w.next(()=>function(M){const H=M.store("targetGlobal"),Y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Y)}(m))),s<4&&a>=4&&(0!==s&&(w=w.next(()=>function(M,H){return H.store("mutations").j().next(Y=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ta,{unique:!0});const ue=H.store("mutations"),Ae=Y.map(st=>ue.put(st));return it.waitFor(Ae)})}(e,m))),w=w.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(w=w.next(()=>this.Ys(m))),s<6&&a>=6&&(w=w.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(m)))),s<7&&a>=7&&(w=w.next(()=>this.Zs(m))),s<8&&a>=8&&(w=w.next(()=>this.ti(e,m))),s<9&&a>=9&&(w=w.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(w=w.next(()=>this.ei(m))),s<11&&a>=11&&(w=w.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(w=w.next(()=>{!function(M){const H=M.createObjectStore("documentOverlays",{keyPath:le});H.createIndex("collectionPathOverlayIndex",De,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Je,{unique:!1})}(e)})),s<13&&a>=13&&(w=w.next(()=>function(M){const H=M.createObjectStore("remoteDocumentsV14",{keyPath:Dl});H.createIndex("documentKeyIndex",Tl),H.createIndex("collectionGroupIndex",Io)}(e)).next(()=>this.ni(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(w=w.next(()=>this.si(e,m))),s<15&&a>=15&&(w=w.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:I}).createIndex("sequenceNumberIndex",S,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:F}).createIndex("documentKeyIndex",$,{unique:!1})}(e))),w}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Up(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>it.forEach(a,m=>{const w=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",w).next(M=>it.forEach(M,H=>{wn(H.userId===m.userId);const Y=Lu(this.serializer,H);return By(e,m.userId,Y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const m=[];return s.X((w,M)=>{const H=new or(w),Y=[0,ts(H)];m.push(t.get(Y).next(ue=>ue?it.resolve():t.put({targetId:0,path:ts(H),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>it.waitFor(m))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:f});const s=t.store("collectionParents"),a=new Vp,m=w=>{if(a.add(w)){const M=w.lastSegment(),H=w.popLast();return s.put({collectionId:M,parent:ts(H)})}};return t.store("remoteDocuments").X({Y:!0},(w,M)=>{const H=new or(w);return m(H.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([w,M,H],Y)=>{const ue=Ls(M);return m(ue.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const m=ec(a),w=Af(this.serializer,m);return t.put(w)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((m,w)=>{const M=t.store("remoteDocumentsV14"),H=(Y=w,Y.document?new Xt(or.fromString(Y.document.name).popFirst(5)):Y.noDocument?Xt.fromSegments(Y.noDocument.path):Y.unknownDocument?Xt.fromSegments(Y.unknownDocument.path):nn()).path.toArray();var Y;const ue={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};a.push(M.put(ue))}).next(()=>it.waitFor(a))}si(e,t){const s=t.store("mutations"),a=pi(this.serializer),m=new Rh(Gp.zs,this.serializer.fe);return s.j().next(w=>{const M=new Map;return w.forEach(H=>{var Y;let ue=null!==(Y=M.get(H.userId))&&void 0!==Y?Y:ni();Lu(this.serializer,H).keys().forEach(Ae=>ue=ue.add(Ae)),M.set(H.userId,ue)}),it.forEach(M,(H,Y)=>{const ue=new Wt(Y),Ae=O.de(this.serializer,ue),st=m.getIndexManager(ue),Rt=bh.de(ue,this.serializer,st,m.referenceDelegate);return new Hp(a,Rt,Ae,st).recalculateAndSaveOverlaysForDocumentKeys(new Pr(t,Oo.ct),H).next()})})}}function gm(r){r.createObjectStore("targetDocuments",{keyPath:u}).createIndex("documentTargetsIndex",h,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W,{unique:!0}),r.createObjectStore("targetGlobal")}const kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mm{constructor(e,t,s,a,m,w,M,H,Y,ue,Ae=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=m,this.window=w,this.document=M,this.ri=Y,this.oi=ue,this.ui=Ae,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=st=>Promise.resolve(),!mm.D())throw new Mt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new um(this,a),this.di=t+"main",this.serializer=new Nd(H),this.wi=new ti(this.di,this.ui,new Hv(this.serializer)),this.Bs=new jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pi(this.serializer),this.qs=new d,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ue&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mt(et.FAILED_PRECONDITION,kf);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Oo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,v.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,v.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,v.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ra(e))return At("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return At("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Mh(e).get("owner").next(t=>it.resolve(this.Ri(t)))}Pi(e){return nc(e).delete(this.clientId)}bi(){var e=this;return(0,v.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=tr(s,"clientMetadata");return a.j().next(m=>{const w=e.Si(m,18e5),M=m.filter(H=>-1===w.indexOf(H));return it.forEach(M,H=>a.delete(H.clientId)).next(()=>M)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?it.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Mt(et.FAILED_PRECONDITION,kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||nc(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&At("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,v.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Pr(t,Oo.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>nc(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return bh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uy(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return O.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){At("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",m=15===(w=this.ui)?qn:14===w?Un:13===w?An:12===w?ln:11===w?ft:void nn();var w;let M;return this.wi.runTransaction(e,a,m,H=>(M=new Pr(H,this.Os?this.Os.next():Oo.ct),"readwrite-primary"===t?this.Ti(M).next(Y=>!!Y||this.Ei(M)).next(Y=>{if(!Y)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Mt(et.FAILED_PRECONDITION,Il);return s(M)}).next(Y=>this.vi(M).next(()=>Y)):this.Oi(M).next(()=>s(M)))).then(H=>(M.raiseOnCommittedEvent(),H))}Oi(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Mt(et.FAILED_PRECONDITION,kf)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static D(){return ti.D()}Ai(e){const t=Mh(e);return t.get("owner").next(s=>this.Ri(s)?(At("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):it.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(On(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ce.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return At("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return On("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(r){return tr(r,"owner")}function nc(r){return tr(r,"clientMetadata")}function Kp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Ff{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=ni(),a=ni();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:a=a.add(m.doc.key)}return new Ff(e,t.fromCache,s,a)}}class Ph{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(m=>m||this.Gi(e,t,a,s)).next(m=>m||this.Qi(e,t))}Ki(e,t){if(gd(t))return it.resolve(null);let s=R(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=de(t,null,"F"),s=R(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(m=>{const w=ni(...m);return this.Ui.getDocuments(e,w).next(M=>this.indexManager.getMinOffset(e,s).next(H=>{const Y=this.ji(t,M);return this.zi(t,Y,w,H.readTime)?this.Ki(e,de(t,null,"F")):this.Wi(e,Y,t,H)}))})))}Gi(e,t,s,a){return gd(t)||a.isEqual(Gn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(m=>{const w=this.ji(t,m);return this.zi(t,w,s,a)?this.Qi(e,t):(Ur()<=Pe.in.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Jt(t)),this.Wi(e,w,t,fa(a,-1)))})}ji(e,t){let s=new Ei(Wr(e));return t.forEach((a,m)=>{_n(e,m)&&(s=s.add(m))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(a)>0)}Qi(e,t){return Ur()<=Pe.in.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",Jt(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ys.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(m=>(t.forEach(w=>{m=m.insert(w.key,w)}),m))}}class Qy{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Ii(lr),this.Yi=new Ko(m=>sl(m),au),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function qp(r,e,t,s){return new Qy(r,e,t,s)}function ym(r,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,v.Z)(function*(r,e){const t=zt(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(m=>(a=m,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const w=[],M=[];let H=ni();for(const Y of a){w.push(Y.batchId);for(const ue of Y.mutations)H=H.add(ue.key)}for(const Y of m){M.push(Y.batchId);for(const ue of Y.mutations)H=H.add(ue.key)}return t.localDocuments.getDocuments(s,H).next(Y=>({er:Y,removedBatchIds:w,addedBatchIds:M}))})})}),Zp.apply(this,arguments)}function _m(r){const e=zt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Yp(r,e,t){let s=ni(),a=ni();return t.forEach(m=>s=s.add(m)),e.getEntries(r,s).next(m=>{let w=Ns();return t.forEach((M,H)=>{const Y=m.get(M);H.isFoundDocument()!==Y.isFoundDocument()&&(a=a.add(M)),H.isNoDocument()&&H.version.isEqual(Gn.min())?(e.removeEntry(M,H.readTime),w=w.insert(M,H)):!Y.isValidDocument()||H.version.compareTo(Y.version)>0||0===H.version.compareTo(Y.version)&&Y.hasPendingWrites?(e.addEntry(H),w=w.insert(M,H)):At("LocalStore","Ignoring outdated watch update for ",M,". Current version:",Y.version," Watch version:",H.version)}),{nr:w,sr:a}})}function e_(r,e){const t=zt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ed(r,e){const t=zt(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(m=>m?(a=m,it.resolve(a)):t.Bs.allocateTargetId(s).next(w=>(a=new Tu(e,w,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function td(r,e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,v.Z)(function*(r,e,t){const s=zt(r),a=s.Ji.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,w=>s.persistence.referenceDelegate.removeTarget(w,a)))}catch(w){if(!ra(w))throw w;At("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),Nh.apply(this,arguments)}function Qp(r,e,t){const s=zt(r);let a=Gn.min(),m=ni();return s.persistence.runTransaction("Execute query","readonly",w=>function(M,H,Y){const ue=zt(M),Ae=ue.Yi.get(Y);return void 0!==Ae?it.resolve(ue.Ji.get(Ae)):ue.Bs.getTargetData(H,Y)}(s,w,R(e)).next(M=>{if(M)return a=M.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(w,M.targetId).next(H=>{m=H})}).next(()=>s.Hi.getDocumentsMatchingQuery(w,e,t?a:Gn.min(),t?m:ni())).next(M=>(t_(s,rr(e),M),{documents:M,ir:m})))}function Lf(r,e){const t=zt(r),s=zt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",m=>s.le(m,e).next(w=>w?w.target:null))}function vm(r,e){const t=zt(r),s=t.Xi.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,fa(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(t_(t,e,a),a))}function t_(r,e,t){let s=r.Xi.get(e)||Gn.min();t.forEach((a,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),r.Xi.set(e,s)}function Vf(){return Vf=(0,v.Z)(function*(r,e,t,s){const a=zt(r);let m=ni(),w=Ns();for(const Y of t){const ue=e.rr(Y.metadata.name);Y.document&&(m=m.add(ue));const Ae=e.ur(Y);Ae.setReadTime(e.cr(Y.metadata.readTime)),w=w.insert(ue,Ae)}const M=a.Zi.newChangeBuffer({trackRemovals:!0}),H=yield ed(a,(Y=s,R(gl(or.fromString(`__bundle__/docs/${Y}`)))));var Y;return a.persistence.runTransaction("Apply bundle documents","readwrite",Y=>Yp(Y,M,w).next(ue=>(M.apply(Y),ue)).next(ue=>a.Bs.removeMatchingKeysForTargetId(Y,H.targetId).next(()=>a.Bs.addMatchingKeys(Y,m,H.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(Y,ue.nr,ue.sr)).next(()=>ue.nr)))}),Vf.apply(this,arguments)}function n_(r,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,v.Z)(function*(r,e,t=ni()){const s=yield ed(r,R(Od(e.bundledQuery))),a=zt(r);return a.persistence.runTransaction("Save named query","readwrite",m=>{const w=Ri(e.readTime);if(s.snapshotVersion.compareTo(w)>=0)return a.qs.saveNamedQuery(m,e);const M=s.withResumeToken(Us.EMPTY_BYTE_STRING,w);return a.Ji=a.Ji.insert(M.targetId,M),a.Bs.updateTargetData(m,M).next(()=>a.Bs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>a.Bs.addMatchingKeys(m,t,s.targetId)).next(()=>a.qs.saveNamedQuery(m,e))})}),Uf.apply(this,arguments)}function Em(r,e){return`firestore_clients_${r}_${e}`}function wm(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ud(r,e){return`firestore_targets_${r}_${e}`}class rc{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let m,w="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return w&&a.error&&(w="string"==typeof a.error.message&&"string"==typeof a.error.code,w&&(m=new Mt(a.error.code,a.error.message))),w?new rc(e,t,a.state,m):(On("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(a=new Mt(s.error.code,s.error.message))),m?new nd(e,s.state,a):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,m=qu();for(let w=0;a&&w<s.activeTargetIds.length;++w)a=dl(s.activeTargetIds[w]),m=m.add(s.activeTargetIds[w]);return a?new xc(e,m):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xh{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xh(t.clientId,t.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bd{constructor(){this.activeTargetIds=qu()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bf{constructor(e,t,s,a,m){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ii(lr),this.started=!1,this.yr=[];const w=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.pr=Em(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Bd),this.Tr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,v.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const m=e.getItem(Em(e.persistenceKey,a));if(m){const w=xc.ar(a,m);w&&(e.gr=e.gr.insert(w.clientId,w))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ud(this.persistenceKey,e));if(s){const a=nd.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ud(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return At("SharedClientState","READ",e,t),t}setItem(e,t){At("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){At("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(At("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,v.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(m){let w=Oo.ct;if(null!=m)try{const M=JSON.parse(m);wn("number"==typeof M),w=M}catch(M){On("SharedClientState","Failed to read sequence number from WebStorage",M)}return w}(s.newValue);a!==Oo.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(m=>t.syncEngine.Qr(m)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new rc(this.currentUser,e,t,s),m=wm(this.persistenceKey,this.currentUser,e);this.setItem(m,a.hr())}Cr(e){const t=wm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Ud(this.persistenceKey,e),m=new nd(e,t,s);this.setItem(a,m.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return xc.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return rc.ar(new Wt(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return nd.ar(a,t)}br(e){return xh.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,v.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);At("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),m=this.Sr(s),w=[],M=[];return m.forEach(H=>{a.has(H)||w.push(H)}),a.forEach(H=>{m.has(H)||M.push(H)}),this.syncEngine.Wr(w,M).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=qu();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class $f{constructor(){this.Hr=new Bd,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Bd,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xp{Yr(e){}shutdown(){}}class jf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){At("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){At("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Oh=null;function kh(){return null===Oh?Oh=268435456+Math.round(2147483648*Math.random()):Oh++,"0x"+Oh.toString(16)}const r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i_{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const al="WebChannelConnection";class s_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,m){const w=kh(),M=this.To(e,t);At("RestConnection",`Sending RPC '${e}' ${w}:`,M,s);const H={};return this.Eo(H,a,m),this.Ao(e,M,H,s).then(Y=>(At("RestConnection",`Received RPC '${e}' ${w}: `,Y),Y),Y=>{throw si("RestConnection",`RPC '${e}' ${w} failed with error: `,Y,"url: ",M,"request:",s),Y})}vo(e,t,s,a,m,w){return this.Io(e,t,s,a,m)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ei,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,m)=>e[m]=a),s&&s.headers.forEach((a,m)=>e[m]=a)}To(e,t){return`${this.mo}/v1/${t}:${r_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const m=kh();return new Promise((w,M)=>{const H=new ie;H.setWithCredentials(!0),H.listenOnce(ha.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case Jo.NO_ERROR:const ue=H.getResponseJson();At(al,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(ue)),w(ue);break;case Jo.TIMEOUT:At(al,`RPC '${e}' ${m} timed out`),M(new Mt(et.DEADLINE_EXCEEDED,"Request time out"));break;case Jo.HTTP_ERROR:const Ae=H.getStatus();if(At(al,`RPC '${e}' ${m} failed with status:`,Ae,"response text:",H.getResponseText()),Ae>0){let st=H.getResponseJson();Array.isArray(st)&&(st=st[0]);const Rt=st?.error;if(Rt&&Rt.status&&Rt.message){const en=function(kn){const $n=kn.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf($n)>=0?$n:et.UNKNOWN}(Rt.status);M(new Mt(en,Rt.message))}else M(new Mt(et.UNKNOWN,"Server responded with status "+H.getStatus()))}else M(new Mt(et.UNAVAILABLE,"Connection failed."));break;default:nn()}}finally{At(al,`RPC '${e}' ${m} completed.`)}});const Y=JSON.stringify(a);At(al,`RPC '${e}' ${m} sending request:`,a),H.send(t,"POST",Y,s,15)})}Ro(e,t,s){const a=kh(),m=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=Ua(),M=Ol(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Y=this.longPollingOptions.timeoutSeconds;void 0!==Y&&(H.longPollingTimeout=Math.round(1e3*Y)),this.useFetchStreams&&(H.xmlHttpFactory=new K({})),this.Eo(H.initMessageHeaders,t,s),H.encodeInitMessageHeaders=!0;const ue=m.join("");At(al,`Creating RPC '${e}' stream ${a}: ${ue}`,H);const Ae=w.createWebChannel(ue,H);let st=!1,Rt=!1;const en=new i_({ro:$n=>{Rt?At(al,`Not sending because RPC '${e}' stream ${a} is closed:`,$n):(st||(At(al,`Opening RPC '${e}' stream ${a} transport.`),Ae.open(),st=!0),At(al,`RPC '${e}' stream ${a} sending:`,$n),Ae.send($n))},oo:()=>Ae.close()}),kn=($n,Ci,us)=>{$n.listen(Ci,Wi=>{try{us(Wi)}catch(ka){setTimeout(()=>{throw ka},0)}})};return kn(Ae,V.EventType.OPEN,()=>{Rt||At(al,`RPC '${e}' stream ${a} transport opened.`)}),kn(Ae,V.EventType.CLOSE,()=>{Rt||(Rt=!0,At(al,`RPC '${e}' stream ${a} transport closed`),en.wo())}),kn(Ae,V.EventType.ERROR,$n=>{Rt||(Rt=!0,si(al,`RPC '${e}' stream ${a} transport errored:`,$n),en.wo(new Mt(et.UNAVAILABLE,"The operation could not be completed")))}),kn(Ae,V.EventType.MESSAGE,$n=>{var Ci;if(!Rt){const us=$n.data[0];wn(!!us);const ka=us.error||(null===(Ci=us[0])||void 0===Ci?void 0:Ci.error);if(ka){At(al,`RPC '${e}' stream ${a} received error:`,ka);const va=ka.status;let bo=function(fd){const bp=ma[fd];if(void 0!==bp)return If(bp)}(va),Zl=ka.message;void 0===bo&&(bo=et.INTERNAL,Zl="Unknown error status: "+va+" with message "+ka.message),Rt=!0,en.wo(new Mt(bo,Zl)),Ae.close()}else At(al,`RPC '${e}' stream ${a} received:`,us),en._o(us)}}),kn(M,no.STAT_EVENT,$n=>{$n.stat===N.PROXY?At(al,`RPC '${e}' stream ${a} detected buffering proxy`):$n.stat===N.NOPROXY&&At(al,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{en.fo()},0),en}}function Jp(){return typeof window<"u"?window:null}function Fh(){return typeof document<"u"?document:null}function Lh(r){return new kp(r,!0)}class eg{constructor(e,t,s=1e3,a=1.5,m=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=m,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&At("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Kl{constructor(e,t,s,a,m,w,M,H){this.ii=e,this.$o=s,this.Oo=a,this.connection=m,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=M,this.listener=H,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new eg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,v.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,v.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,v.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===et.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Mt(et.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,v.Z)(function*(){e.state=0,e.start()}))}tu(e){return At("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(At("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o_ extends Kl{constructor(e,t,s,a,m,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,w),this.serializer=m}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Wl(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:nn(),a=e.targetChange.targetIds||[],m=function(H,Y){return H.useProto3Json?(wn(void 0===Y||"string"==typeof Y),Us.fromBase64String(Y||"")):(wn(void 0===Y||Y instanceof Uint8Array),Us.fromUint8Array(Y||new Uint8Array))}(r,e.targetChange.resumeToken),w=e.targetChange.cause,M=w&&function(H){const Y=void 0===H.code?et.UNKNOWN:If(H.code);return new Mt(Y,H.message||"")}(w);t=new Sd(s,a,m,M||null)}else if("documentChange"in e){const s=e.documentChange,a=Ma(r,s.document.name),m=Ri(s.document.updateTime),w=s.document.createTime?Ri(s.document.createTime):Gn.min(),M=new ss({mapValue:{fields:s.document.fields}}),H=As.newFoundDocument(a,m,w,M);t=new gh(s.targetIds||[],s.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const s=e.documentDelete,a=Ma(r,s.document),m=s.readTime?Ri(s.readTime):Gn.min(),w=As.newNoDocument(a,m);t=new gh([],s.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const s=e.documentRemove,a=Ma(r,s.document);t=new gh([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return nn();{const s=e.filter,{count:a=0,unchangedNames:m}=s,w=new cu(a,m);t=new Td(s.targetId,w)}}var H;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Gn.min();const m=a.targetChange;return m.targetIds&&m.targetIds.length?Gn.min():m.readTime?Ri(m.readTime):Gn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=Cu(this.serializer),t.addTarget=function(a,m){let w;const M=m.target;if(w=Pl(M)?{documents:vh(a,M)}:{query:Eh(a,M)},w.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){w.resumeToken=bd(a,m.resumeToken);const H=Tc(a,m.expectedCount);null!==H&&(w.expectedCount=H)}else if(m.snapshotVersion.compareTo(Gn.min())>0){w.readTime=Sc(a,m.snapshotVersion.toTimestamp());const H=Tc(a,m.expectedCount);null!==H&&(w.expectedCount=H)}return w}(this.serializer,e);const s=function Ih(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=Cu(this.serializer),t.removeTarget=e,this.Wo(t)}}class a_ extends Kl{constructor(e,t,s,a,m,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,w),this.serializer=m,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function bf(r,e){return r&&r.length>0?(wn(void 0!==e),r.map(t=>function(s,a){let m=Ri(s.updateTime?s.updateTime:a);return m.isEqual(Gn.min())&&(m=Ri(a)),new ch(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ri(e.commitTime);return this.listener.cu(s,t)}return wn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Cu(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Xu(this.serializer,s))};this.Wo(t)}}class zv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Mt(et.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,m])=>this.connection.Io(e,t,s,a,m)).catch(a=>{throw"FirebaseError"===a.name?(a.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Mt(et.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,w])=>this.connection.vo(e,t,s,m,w,a)).catch(m=>{throw"FirebaseError"===m.name?(m.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Mt(et.UNKNOWN,m.toString())})}terminate(){this.lu=!0}}class l_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(On(t),this.mu=!1):At("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class u_{constructor(e,t,s,a,m){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=m,this.Pu.Yr(M=>{s.enqueueAndForget((0,v.Z)(function*(){var H;ll(w)&&(At("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,v.Z)(function*(Y){const ue=zt(Y);ue.vu.add(4),yield $d(ue),ue.bu.set("Unknown"),ue.vu.delete(4),yield Vh(ue)}),function(Y){return H.apply(this,arguments)})(w))}))}),this.bu=new l_(s,a)}}function Vh(r){return zf.apply(this,arguments)}function zf(){return zf=(0,v.Z)(function*(r){if(ll(r))for(const e of r.Ru)yield e(!0)}),zf.apply(this,arguments)}function $d(r){return ng.apply(this,arguments)}function ng(){return ng=(0,v.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),ng.apply(this,arguments)}function jd(r,e){const t=zt(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),sg(t)?ig(t):Kd(t).Ko()&&rg(t,e))}function Uh(r,e){const t=zt(r),s=Kd(t);t.Au.delete(e),s.Ko()&&Im(t,e),0===t.Au.size&&(s.Ko()?s.jo():ll(t)&&t.bu.set("Unknown"))}function rg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kd(r).su(e)}function Im(r,e){r.Vu.qt(e),Kd(r).iu(e)}function ig(r){r.Vu=new em({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),Kd(r).start(),r.bu.gu()}function sg(r){return ll(r)&&!Kd(r).Uo()&&r.Au.size>0}function ll(r){return 0===zt(r).vu.size}function Gf(r){r.Vu=void 0}function c_(r){return og.apply(this,arguments)}function og(){return og=(0,v.Z)(function*(r){r.Au.forEach((e,t)=>{rg(r,e)})}),og.apply(this,arguments)}function Cm(r,e){return ag.apply(this,arguments)}function ag(){return ag=(0,v.Z)(function*(r,e){Gf(r),sg(r)?(r.bu.Iu(e),ig(r)):r.bu.set("Unknown")}),ag.apply(this,arguments)}function d_(r,e,t){return lg.apply(this,arguments)}function lg(){return lg=(0,v.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof Sd&&2===e.state&&e.cause)try{yield(s=(0,v.Z)(function*(a,m){const w=m.cause;for(const M of m.targetIds)a.Au.has(M)&&(yield a.remoteSyncer.rejectListen(M,w),a.Au.delete(M),a.Vu.removeTarget(M))}),function(a,m){return s.apply(this,arguments)})(r,e)}catch(s){At("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Hd(r,s)}else if(e instanceof gh?r.Vu.Ht(e):e instanceof Td?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Gn.min()))try{const s=yield _m(r.localStore);t.compareTo(s)>=0&&(yield function(a,m){const w=a.Vu.ce(m);return w.targetChanges.forEach((M,H)=>{if(M.resumeToken.approximateByteSize()>0){const Y=a.Au.get(H);Y&&a.Au.set(H,Y.withResumeToken(M.resumeToken,m))}}),w.targetMismatches.forEach((M,H)=>{const Y=a.Au.get(M);if(!Y)return;a.Au.set(M,Y.withResumeToken(Us.EMPTY_BYTE_STRING,Y.snapshotVersion)),Im(a,M);const ue=new Tu(Y.target,M,H,Y.sequenceNumber);rg(a,ue)}),a.remoteSyncer.applyRemoteEvent(w)}(r,t))}catch(s){At("RemoteStore","Failed to raise snapshot:",s),yield Hd(r,s)}var s}),lg.apply(this,arguments)}function Hd(r,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,v.Z)(function*(r,e,t){if(!ra(e))throw e;r.vu.add(1),yield $d(r),r.bu.set("Offline"),t||(t=()=>_m(r.localStore)),r.asyncQueue.enqueueRetryable((0,v.Z)(function*(){At("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Vh(r)}))}),ug.apply(this,arguments)}function Dm(r,e){return e().catch(t=>Hd(r,t,e))}function ic(r){return zd.apply(this,arguments)}function zd(){return zd=(0,v.Z)(function*(r){const e=zt(r),t=Oc(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Wf(e);)try{const a=yield e_(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Gv(e,a)}catch(a){yield Hd(e,a)}Kf(e)&&h_(e)}),zd.apply(this,arguments)}function Wf(r){return ll(r)&&r.Eu.length<10}function Gv(r,e){r.Eu.push(e);const t=Oc(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function Kf(r){return ll(r)&&!Oc(r).Uo()&&r.Eu.length>0}function h_(r){Oc(r).start()}function Tm(r){return qf.apply(this,arguments)}function qf(){return qf=(0,v.Z)(function*(r){Oc(r).hu()}),qf.apply(this,arguments)}function Sm(r){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,v.Z)(function*(r){const e=Oc(r);for(const t of r.Eu)e.uu(t.mutations)}),Zf.apply(this,arguments)}function cg(r,e,t){return Su.apply(this,arguments)}function Su(){return Su=(0,v.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Ef.from(s,e,t);yield Dm(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield ic(r)}),Su.apply(this,arguments)}function Yf(r,e){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,v.Z)(function*(r,e){var t;e&&Oc(r).ou&&(yield(t=(0,v.Z)(function*(s,a){if(fh(m=a.code)&&m!==et.ABORTED){const w=s.Eu.shift();Oc(s).Qo(),yield Dm(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,a)),yield ic(s)}var m}),function(s,a){return t.apply(this,arguments)})(r,e)),Kf(r)&&h_(r)}),Gd.apply(this,arguments)}function Wd(r,e){return dg.apply(this,arguments)}function dg(){return dg=(0,v.Z)(function*(r,e){const t=zt(r);t.asyncQueue.verifyOperationInProgress(),At("RemoteStore","RemoteStore received new credentials");const s=ll(t);t.vu.add(3),yield $d(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Vh(t)}),dg.apply(this,arguments)}function Qf(r,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,v.Z)(function*(r,e){const t=zt(r);e?(t.vu.delete(2),yield Vh(t)):e||(t.vu.add(2),yield $d(t),t.bu.set("Unknown"))}),Xf.apply(this,arguments)}function Kd(r){return r.Su||(r.Su=function(e,t,s){const a=zt(e);return a.fu(),new o_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:c_.bind(null,r),ao:Cm.bind(null,r),nu:d_.bind(null,r)}),r.Ru.push(function(){var e=(0,v.Z)(function*(t){t?(r.Su.Qo(),sg(r)?ig(r):r.bu.set("Unknown")):(yield r.Su.stop(),Gf(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function Oc(r){return r.Du||(r.Du=function(e,t,s){const a=zt(e);return a.fu(),new a_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:Tm.bind(null,r),ao:Yf.bind(null,r),au:Sm.bind(null,r),cu:cg.bind(null,r)}),r.Ru.push(function(){var e=(0,v.Z)(function*(t){t?(r.Du.Qo(),yield ic(r)):(yield r.Du.stop(),r.Eu.length>0&&(At("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class rd{constructor(e,t,s,a,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=m,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,s,a,m){const w=Date.now()+s,M=new rd(e,t,w,a,m);return M.start(s),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(r,e){if(On("AsyncQueue",`${e}: ${r}`),ra(r))return new Mt(et.UNAVAILABLE,`${e}: ${r}`);throw r}class Bh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Xt.comparator(t.key,s.key):(t,s)=>Xt.comparator(t.key,s.key),this.keyedMap=ol(),this.sortedSet=new Ii(this.comparator)}static emptySet(e){return new Bh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,m=s.getNext().key;if(!a.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Bh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class bm{constructor(){this.Cu=new Ii(Xt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):nn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Zd{constructor(e,t,s,a,m,w,M,H,Y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=m,this.fromCache=w,this.syncStateChanged=M,this.excludesMetadataChanges=H,this.hasCachedResults=Y}static fromInitialDocuments(e,t,s,a,m){const w=[];return t.forEach(M=>{w.push({type:0,doc:M})}),new Zd(e,t,Bh.emptySet(t),w,s,a,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&We(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class f_{constructor(){this.Nu=void 0,this.listeners=[]}}class p_{constructor(){this.queries=new Ko(e=>yt(e),We),this.onlineState="Unknown",this.ku=new Set}}function hg(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,v.Z)(function*(r,e){const t=zt(r),s=e.query;let a=!1,m=t.queries.get(s);if(m||(a=!0,m=new f_),a)try{m.Nu=yield t.onListen(s)}catch(w){const M=qd(w,`Initialization of query '${Jt(e.query)}' failed`);return void e.onError(M)}t.queries.set(s,m),m.listeners.push(e),e.Mu(t.onlineState),m.Nu&&e.$u(m.Nu)&&$h(t)}),fg.apply(this,arguments)}function pg(r,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,v.Z)(function*(r,e){const t=zt(r),s=e.query;let a=!1;const m=t.queries.get(s);if(m){const w=m.listeners.indexOf(e);w>=0&&(m.listeners.splice(w,1),a=0===m.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Jf.apply(this,arguments)}function gg(r,e){const t=zt(r);let s=!1;for(const a of e){const w=t.queries.get(a.query);if(w){for(const M of w.listeners)M.$u(a)&&(s=!0);w.Nu=a}}s&&$h(t)}function g_(r,e,t){const s=zt(r),a=s.queries.get(e);if(a)for(const m of a.listeners)m.onError(t);s.queries.delete(e)}function $h(r){r.ku.forEach(e=>{e.next()})}class mg{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Zd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class m_{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Am{constructor(e){this.serializer=e}rr(e){return Ma(this.serializer,e)}ur(e){return e.metadata.exists?Fp(this.serializer,e.document,!1):As.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ri(e)}}class y_{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=or.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new Am(this.serializer);for(const a of e)if(a.metadata.queries){const m=s.rr(a.metadata.name);for(const w of a.metadata.queries){const M=(t.get(w)||ni()).add(m);t.set(w,M)}}return t}complete(){var e=this;return(0,v.Z)(function*(){const t=yield function Vd(r,e,t,s){return Vf.apply(this,arguments)}(e.localStore,new Am(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield n_(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Rm(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Mm{constructor(e){this.key=e}}class Pm{constructor(e){this.key=e}}class yg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ni(),this.mutatedKeys=ni(),this.tc=Wr(e),this.ec=new Bh(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new bm,a=t?t.ec:this.ec;let m=t?t.mutatedKeys:this.mutatedKeys,w=a,M=!1;const H="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,Y="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ue,Ae)=>{const st=a.get(ue),Rt=_n(this.query,Ae)?Ae:null,en=!!st&&this.mutatedKeys.has(st.key),kn=!!Rt&&(Rt.hasLocalMutations||this.mutatedKeys.has(Rt.key)&&Rt.hasCommittedMutations);let $n=!1;st&&Rt?st.data.isEqual(Rt.data)?en!==kn&&(s.track({type:3,doc:Rt}),$n=!0):this.rc(st,Rt)||(s.track({type:2,doc:Rt}),$n=!0,(H&&this.tc(Rt,H)>0||Y&&this.tc(Rt,Y)<0)&&(M=!0)):!st&&Rt?(s.track({type:0,doc:Rt}),$n=!0):st&&!Rt&&(s.track({type:1,doc:st}),$n=!0,(H||Y)&&(M=!0)),$n&&(Rt?(w=w.add(Rt),m=kn?m.add(ue):m.delete(ue)):(w=w.delete(ue),m=m.delete(ue)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ue="F"===this.query.limitType?w.last():w.first();w=w.delete(ue.key),m=m.delete(ue.key),s.track({type:1,doc:ue})}return{ec:w,ic:s,zi:M,mutatedKeys:m}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const m=e.ic.xu();m.sort((Y,ue)=>function(Ae,st){const Rt=en=>{switch(en){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nn()}};return Rt(Ae)-Rt(st)}(Y.type,ue.type)||this.tc(Y.doc,ue.doc)),this.oc(s);const w=t?this.uc():[],M=0===this.Zu.size&&this.current?1:0,H=M!==this.Xu;return this.Xu=M,0!==m.length||H?{snapshot:new Zd(this.query,e.ec,a,m,e.mutatedKeys,0===M,H,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:w}:{cc:w}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new bm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ni(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Pm(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Mm(s))}),t}hc(e){this.Yu=e.ir,this.Zu=ni();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Zd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Nm{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class __{constructor(e){this.key=e,this.fc=!1}}class Wv{constructor(e,t,s,a,m,w){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=m,this.maxConcurrentLimboResolutions=w,this.dc={},this.wc=new Ko(M=>yt(M),We),this._c=new Map,this.mc=new Set,this.gc=new Ii(Xt.comparator),this.yc=new Map,this.Ic=new fm,this.Tc={},this.Ec=new Map,this.Ac=Mc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function xm(r,e){return Om.apply(this,arguments)}function Om(){return Om=(0,v.Z)(function*(r,e){const t=lp(r);let s,a;const m=t.wc.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),a=m.view.lc();else{const w=yield ed(t.localStore,R(e)),M=t.sharedClientState.addLocalQueryTarget(w.targetId);s=w.targetId,a=yield Yd(t,e,s,"current"===M,w.resumeToken),t.isPrimaryClient&&jd(t.remoteStore,w)}return a}),Om.apply(this,arguments)}function Yd(r,e,t,s,a){return _g.apply(this,arguments)}function _g(){return _g=(0,v.Z)(function*(r,e,t,s,a){r.Rc=(Ae,st,Rt)=>{return(en=(0,v.Z)(function*(kn,$n,Ci,us){let Wi=$n.view.sc(Ci);Wi.zi&&(Wi=yield Qp(kn.localStore,$n.query,!1).then(({documents:bo})=>$n.view.sc(bo,Wi)));const ka=us&&us.targetChanges.get($n.targetId),va=$n.view.applyChanges(Wi,kn.isPrimaryClient,ka);return tp(kn,$n.targetId,va.cc),va.snapshot}),function(kn,$n,Ci,us){return en.apply(this,arguments)})(r,Ae,st,Rt);var en};const m=yield Qp(r.localStore,e,!0),w=new yg(e,m.ir),M=w.sc(m.documents),H=Qc.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),Y=w.applyChanges(M,r.isPrimaryClient,H);tp(r,t,Y.cc);const ue=new Nm(e,t,w);return r.wc.set(e,ue),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),Y.snapshot}),_g.apply(this,arguments)}function v_(r,e){return jh.apply(this,arguments)}function jh(){return jh=(0,v.Z)(function*(r,e){const t=zt(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(m=>!We(m,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield td(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Uh(t.remoteStore,s.targetId),bu(t,s.targetId)}).catch(io))):(bu(t,s.targetId),yield td(t.localStore,s.targetId,!0))}),jh.apply(this,arguments)}function gu(){return gu=(0,v.Z)(function*(r,e,t){const s=Gh(r);try{const a=yield function(m,w){const M=zt(m),H=es.now(),Y=w.reduce((st,Rt)=>st.add(Rt.key),ni());let ue,Ae;return M.persistence.runTransaction("Locally write mutations","readwrite",st=>{let Rt=Ns(),en=ni();return M.Zi.getEntries(st,Y).next(kn=>{Rt=kn,Rt.forEach(($n,Ci)=>{Ci.isValidDocument()||(en=en.add($n))})}).next(()=>M.localDocuments.getOverlayedDocuments(st,Rt)).next(kn=>{ue=kn;const $n=[];for(const Ci of w){const us=mf(Ci,ue.get(Ci.key).overlayedDocument);null!=us&&$n.push(new wu(Ci.key,us,dc(us.value.mapValue),co.exists(!0)))}return M.mutationQueue.addMutationBatch(st,H,$n,w)}).next(kn=>{Ae=kn;const $n=kn.applyToLocalDocumentSet(ue,en);return M.documentOverlayCache.saveOverlays(st,kn.batchId,$n)})}).then(()=>({batchId:Ae.batchId,changes:Eu(ue)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(m,w,M){let H=m.Tc[m.currentUser.toKey()];H||(H=new Ii(lr)),H=H.insert(w,M),m.Tc[m.currentUser.toKey()]=H}(s,a.batchId,t),yield Bu(s,a.changes),yield ic(s.remoteStore)}catch(a){const m=qd(a,"Failed to persist write");t.reject(m)}}),gu.apply(this,arguments)}function Qd(r,e){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,v.Z)(function*(r,e){const t=zt(r);try{const s=yield function Jy(r,e){const t=zt(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const w=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const M=[];e.targetChanges.forEach((ue,Ae)=>{const st=a.get(Ae);if(!st)return;M.push(t.Bs.removeMatchingKeys(m,ue.removedDocuments,Ae).next(()=>t.Bs.addMatchingKeys(m,ue.addedDocuments,Ae)));let Rt=st.withSequenceNumber(m.currentSequenceNumber);var en,kn,$n;null!==e.targetMismatches.get(Ae)?Rt=Rt.withResumeToken(Us.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):ue.resumeToken.approximateByteSize()>0&&(Rt=Rt.withResumeToken(ue.resumeToken,s)),a=a.insert(Ae,Rt),kn=Rt,$n=ue,(0===(en=st).resumeToken.approximateByteSize()||kn.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||$n.addedDocuments.size+$n.modifiedDocuments.size+$n.removedDocuments.size>0)&&M.push(t.Bs.updateTargetData(m,Rt))});let H=Ns(),Y=ni();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(m,ue))}),M.push(Yp(m,w,e.documentUpdates).next(ue=>{H=ue.nr,Y=ue.sr})),!s.isEqual(Gn.min())){const ue=t.Bs.getLastRemoteSnapshotVersion(m).next(Ae=>t.Bs.setTargetsMetadata(m,m.currentSequenceNumber,s));M.push(ue)}return it.waitFor(M).next(()=>w.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,H,Y)).next(()=>H)}).then(m=>(t.Ji=a,m))}(t.localStore,e);e.targetChanges.forEach((a,m)=>{const w=t.yc.get(m);w&&(wn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?w.fc=!0:a.modifiedDocuments.size>0?wn(w.fc):a.removedDocuments.size>0&&(wn(w.fc),w.fc=!1))}),yield Bu(t,s,e)}catch(s){yield io(s)}}),Ya.apply(this,arguments)}function kc(r,e,t){const s=zt(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((m,w)=>{const M=w.view.Mu(e);M.snapshot&&a.push(M.snapshot)}),function(m,w){const M=zt(m);M.onlineState=w;let H=!1;M.queries.forEach((Y,ue)=>{for(const Ae of ue.listeners)Ae.Mu(w)&&(H=!0)}),H&&$h(M)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ep(r,e,t){return ql.apply(this,arguments)}function ql(){return ql=(0,v.Z)(function*(r,e,t){const s=zt(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),m=a&&a.key;if(m){let w=new Ii(Xt.comparator);w=w.insert(m,As.newNoDocument(m,Gn.min()));const M=ni().add(m),H=new ph(Gn.min(),new Map,new Ii(lr),w,M);yield Qd(s,H),s.gc=s.gc.remove(m),s.yc.delete(e),np(s)}else yield td(s.localStore,e,!1).then(()=>bu(s,e,t)).catch(io)}),ql.apply(this,arguments)}function vg(r,e){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,v.Z)(function*(r,e){const t=zt(r),s=e.batch.batchId;try{const a=yield function Xy(r,e){const t=zt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),m=t.Zi.newChangeBuffer({trackRemovals:!0});return function(w,M,H,Y){const ue=H.batch,Ae=ue.keys();let st=it.resolve();return Ae.forEach(Rt=>{st=st.next(()=>Y.getEntry(M,Rt)).next(en=>{const kn=H.docVersions.get(Rt);wn(null!==kn),en.version.compareTo(kn)<0&&(ue.applyToRemoteDocument(en,H),en.isValidDocument()&&(en.setReadTime(H.commitVersion),Y.addEntry(en)))})}),st.next(()=>w.mutationQueue.removeMutationBatch(M,ue))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let M=ni();for(let H=0;H<w.mutationResults.length;++H)w.mutationResults[H].transformResults.length>0&&(M=M.add(w.batch.mutations[H].key));return M}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);Bc(t,s,null),Uc(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Bu(t,a)}catch(a){yield io(a)}}),Fc.apply(this,arguments)}function Xd(r,e,t){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,v.Z)(function*(r,e,t){const s=zt(r);try{const a=yield function(m,w){const M=zt(m);return M.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Y;return M.mutationQueue.lookupMutationBatch(H,w).next(ue=>(wn(null!==ue),Y=ue.keys(),M.mutationQueue.removeMutationBatch(H,ue))).next(()=>M.mutationQueue.performConsistencyCheck(H)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(H,Y,w)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Y)).next(()=>M.localDocuments.getDocuments(H,Y))})}(s.localStore,e);Bc(s,e,t),Uc(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Bu(s,a)}catch(a){yield io(a)}}),Lc.apply(this,arguments)}function Vc(){return Vc=(0,v.Z)(function*(r,e){const t=zt(r);ll(t.remoteStore)||At("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const w=zt(m);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>w.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=qd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Vc.apply(this,arguments)}function Uc(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Bc(r,e,t){const s=zt(r);let a=s.Tc[s.currentUser.toKey()];if(a){const m=a.get(e);m&&(t?m.reject(t):m.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function bu(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||id(r,s)})}function id(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(Uh(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),np(r))}function tp(r,e,t){for(const s of t)s instanceof Mm?(r.Ic.addReference(s.key,e),km(r,s)):s instanceof Pm?(At("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||id(r,s.key)):nn()}function km(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(At("SyncEngine","New document in limbo: "+t),r.mc.add(s),np(r))}function np(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Xt(or.fromString(e)),s=r.Ac.next();r.yc.set(s,new __(t)),r.gc=r.gc.insert(t,s),jd(r.remoteStore,new Tu(R(gl(t.path)),s,"TargetPurposeLimboResolution",Oo.ct))}}function Bu(r,e,t){return rp.apply(this,arguments)}function rp(){return rp=(0,v.Z)(function*(r,e,t){const s=zt(r),a=[],m=[],w=[];var M;s.wc.isEmpty()||(s.wc.forEach((M,H)=>{w.push(s.Rc(H,e,t).then(Y=>{if((Y||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(H.targetId,Y?.fromCache?"not-current":"current"),Y){a.push(Y);const ue=Ff.Li(H.targetId,Y);m.push(ue)}}))}),yield Promise.all(w),s.dc.nu(a),yield(M=(0,v.Z)(function*(H,Y){const ue=zt(H);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ae=>it.forEach(Y,st=>it.forEach(st.Fi,Rt=>ue.persistence.referenceDelegate.addReference(Ae,st.targetId,Rt)).next(()=>it.forEach(st.Bi,Rt=>ue.persistence.referenceDelegate.removeReference(Ae,st.targetId,Rt)))))}catch(Ae){if(!ra(Ae))throw Ae;At("LocalStore","Failed to update sequence numbers: "+Ae)}for(const Ae of Y){const st=Ae.targetId;if(!Ae.fromCache){const Rt=ue.Ji.get(st),kn=Rt.withLastLimboFreeSnapshotVersion(Rt.snapshotVersion);ue.Ji=ue.Ji.insert(st,kn)}}}),function(H,Y){return M.apply(this,arguments)})(s.localStore,m))}),rp.apply(this,arguments)}function Fm(r,e){return ip.apply(this,arguments)}function ip(){return ip=(0,v.Z)(function*(r,e){const t=zt(r);if(!t.currentUser.isEqual(e)){At("SyncEngine","User change. New user:",e.toKey());const s=yield ym(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(w=>{w.forEach(M=>{M.reject(new Mt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Bu(t,s.er)}var a}),ip.apply(this,arguments)}function Lm(r,e){const t=zt(r),s=t.yc.get(e);if(s&&s.fc)return ni().add(s.key);{let a=ni();const m=t._c.get(e);if(!m)return a;for(const w of m){const M=t.wc.get(w);a=a.unionWith(M.view.nc)}return a}}function Vm(r,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,v.Z)(function*(r,e){const t=zt(r),s=yield Qp(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&tp(t,e.targetId,a.cc),a}),Eg.apply(this,arguments)}function w_(r,e){return sp.apply(this,arguments)}function sp(){return sp=(0,v.Z)(function*(r,e){const t=zt(r);return vm(t.localStore,e).then(s=>Bu(t,s))}),sp.apply(this,arguments)}function I_(r,e,t,s){return wg.apply(this,arguments)}function wg(){return wg=(0,v.Z)(function*(r,e,t,s){const a=zt(r),m=yield function(w,M){const H=zt(w),Y=zt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ue=>Y.Sn(ue,M).next(Ae=>Ae?H.localDocuments.getDocuments(ue,Ae):it.resolve(null)))}(a.localStore,e);var M;null!==m?("pending"===t?yield ic(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bc(a,e,s||null),Uc(a,e),M=e,zt(zt(a.localStore).mutationQueue).Cn(M)):nn(),yield Bu(a,m)):At("SyncEngine","Cannot apply mutation batch with id: "+e)}),wg.apply(this,arguments)}function Hh(){return Hh=(0,v.Z)(function*(r,e){const t=zt(r);if(lp(t),Gh(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Um(t,s.toArray());t.vc=!0,yield Qf(t.remoteStore,!0);for(const m of a)jd(t.remoteStore,m)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((m,w)=>{t.sharedClientState.isLocalQueryTarget(w)?s.push(w):a=a.then(()=>(bu(t,w),td(t.localStore,w,!0))),Uh(t.remoteStore,w)}),yield a,yield Um(t,s),function(m){const w=zt(m);w.yc.forEach((M,H)=>{Uh(w.remoteStore,H)}),w.Ic.Ts(),w.yc=new Map,w.gc=new Ii(Xt.comparator)}(t),t.vc=!1,yield Qf(t.remoteStore,!1)}}),Hh.apply(this,arguments)}function Um(r,e,t){return eh.apply(this,arguments)}function eh(){return eh=(0,v.Z)(function*(r,e,t){const s=zt(r),a=[],m=[];for(const w of e){let M;const H=s._c.get(w);if(H&&0!==H.length){M=yield ed(s.localStore,R(H[0]));for(const Y of H){const ue=s.wc.get(Y),Ae=yield Vm(s,ue);Ae.snapshot&&m.push(Ae.snapshot)}}else{const Y=yield Lf(s.localStore,w);M=yield ed(s.localStore,Y),yield Yd(s,zh(Y),w,!1,M.resumeToken)}a.push(M)}return s.dc.nu(m),a}),eh.apply(this,arguments)}function zh(r){return gc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Cg(r){const e=zt(r);return zt(zt(e.localStore).persistence).$i()}function C_(r,e,t,s){return th.apply(this,arguments)}function th(){return th=(0,v.Z)(function*(r,e,t,s){const a=zt(r);if(a.vc)return void At("SyncEngine","Ignoring unexpected query state notification.");const m=a._c.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const w=yield vm(a.localStore,rr(m[0])),M=ph.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Us.EMPTY_BYTE_STRING);yield Bu(a,w,M);break}case"rejected":yield td(a.localStore,e,!0),bu(a,e,s);break;default:nn()}}),th.apply(this,arguments)}function op(r,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,v.Z)(function*(r,e,t){const s=lp(r);if(s.vc){for(const a of e){if(s._c.has(a)){At("SyncEngine","Adding an already active target "+a);continue}const m=yield Lf(s.localStore,a),w=yield ed(s.localStore,m);yield Yd(s,zh(m),w.targetId,!1,w.resumeToken),jd(s.remoteStore,w)}for(const a of t)s._c.has(a)&&(yield td(s.localStore,a,!1).then(()=>{Uh(s.remoteStore,a),bu(s,a)}).catch(io))}}),ap.apply(this,arguments)}function lp(r){const e=zt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ep.bind(null,e),e.dc.nu=gg.bind(null,e.eventManager),e.dc.Pc=g_.bind(null,e.eventManager),e}function Gh(r){const e=zt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xd.bind(null,e),e}class nh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,v.Z)(function*(){t.serializer=Lh(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return qp(this.persistence,new Ph,e.initialUser,this.serializer)}createPersistence(e){return new Rh(Gp.zs,this.serializer)}createSharedClientState(e){return new $f}terminate(){var e=this;return(0,v.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class up extends nh{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,v.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gh(s.Vc.syncEngine),yield ic(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return qp(this.persistence,new Ph,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new am(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new yu(t,this.persistence);return new tl(e.asyncQueue,s)}createPersistence(e){const t=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?_l.withCacheSize(this.cacheSizeBytes):_l.DEFAULT;return new mm(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Jp(),Fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $f}}class $m extends up{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,v.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Bf&&(s.sharedClientState.syncEngine={jr:I_.bind(null,a),zr:C_.bind(null,a),Wr:op.bind(null,a),$i:Cg.bind(null,a),Qr:w_.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var m=(0,v.Z)(function*(w){yield function Ig(r,e){return Hh.apply(this,arguments)}(s.Vc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())});return function(w){return m.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Jp();if(!Bf.D(t))throw new Mt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Kp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class sd{initialize(e,t){var s=this;return(0,v.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>kc(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Fm.bind(null,s.syncEngine),yield Qf(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new p_}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),s=new s_(e.databaseInfo);return new zv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,m=M=>kc(this.syncEngine,M,0),w=jf.D()?new jf:new Xp,new u_(t,s,a,m,w);var t,s,a,m,w}createSyncEngine(e,t){return function(s,a,m,w,M,H,Y){const ue=new Wv(s,a,m,w,M,H);return Y&&(ue.vc=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,v.Z)(function*(t){const s=zt(t);At("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield $d(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Tg(r,e=10240){let t=0;return{read:()=>(0,v.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,v.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Wh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jm{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new bs,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,v.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,v.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,v.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const m=yield e.$c(a);return new m_(JSON.parse(m),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,v.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,v.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,v.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class D_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,v.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Mt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,v.Z)(function*(m,w){const M=zt(m),H=Cu(M.serializer)+"/documents",Y={documents:w.map(Rt=>Qu(M.serializer,Rt))},ue=yield M.vo("BatchGetDocuments",H,Y,w.length),Ae=new Map;ue.forEach(Rt=>{const en=function nm(r,e){return"found"in e?function(t,s){wn(!!s.found);const a=Ma(t,s.found.name),m=Ri(s.found.updateTime),w=s.found.createTime?Ri(s.found.createTime):Gn.min(),M=new ss({mapValue:{fields:s.found.fields}});return As.newFoundDocument(a,m,w,M)}(r,e):"missing"in e?function(t,s){wn(!!s.missing),wn(!!s.readTime);const a=Ma(t,s.missing),m=Ri(s.readTime);return As.newNoDocument(a,m)}(r,e):nn()}(M.serializer,Rt);Ae.set(en.key.toString(),en)});const st=[];return w.forEach(Rt=>{const en=Ae.get(Rt.toString());wn(!!en),st.push(en)}),st}),function(m,w){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new xl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,v.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const m=Xt.fromPath(a);e.mutations.push(new Yu(m,e.precondition(m)))}),yield(s=(0,v.Z)(function*(a,m){const w=zt(a),M=Cu(w.serializer)+"/documents",H={writes:m.map(Y=>Xu(w.serializer,Y))};yield w.Io("Commit",M,H)}),function(a,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nn();t=Gn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Mt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?co.exists(!1):co.updateTime(t):co.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new Mt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return co.updateTime(t)}return co.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class T_{constructor(e,t,s,a,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=m,this.Bc=s.maxAttempts,this.qo=new eg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,v.Z)(function*(){const t=new D_(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(m=>{e.Uc(m)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!ws(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fh(t)}return!1}}class S_{constructor(e,t,s,a){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Wt.UNAUTHENTICATED,this.clientId=is.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var w=(0,v.Z)(function*(M){At("FirestoreClient","Received user=",M.uid),yield m.authCredentialListener(M),m.user=M});return function(M){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(At("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,v.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=qd(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Kh(r,e){return qh.apply(this,arguments)}function qh(){return qh=(0,v.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),At("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,v.Z)(function*(m){s.isEqual(m)||(yield ym(e.localStore,m),s=m)});return function(m){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),qh.apply(this,arguments)}function cp(r,e){return dp.apply(this,arguments)}function dp(){return dp=(0,v.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield hp(r);At("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Wd(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,m)=>Wd(e.remoteStore,m)),r._onlineComponents=e}),dp.apply(this,arguments)}function Sg(r){return"FirebaseError"===r.name?r.code===et.FAILED_PRECONDITION||r.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function hp(r){return fp.apply(this,arguments)}function fp(){return fp=(0,v.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){At("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Sg(t))throw t;si("Error using user provided cache. Falling back to memory cache: "+t),yield Kh(r,new nh)}}else At("FirestoreClient","Using default OfflineComponentProvider"),yield Kh(r,new nh);return r._offlineComponents}),fp.apply(this,arguments)}function Zh(r){return pp.apply(this,arguments)}function pp(){return pp=(0,v.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(At("FirestoreClient","Using user provided OnlineComponentProvider"),yield cp(r,r._uninitializedComponentsProvider._online)):(At("FirestoreClient","Using default OnlineComponentProvider"),yield cp(r,new sd))),r._onlineComponents}),pp.apply(this,arguments)}function bg(r){return hp(r).then(e=>e.persistence)}function od(r){return hp(r).then(e=>e.localStore)}function sc(r){return Zh(r).then(e=>e.remoteStore)}function Ag(r){return Zh(r).then(e=>e.syncEngine)}function $c(r){return oc.apply(this,arguments)}function oc(){return oc=(0,v.Z)(function*(r){const e=yield Zh(r),t=e.eventManager;return t.onListen=xm.bind(null,e.syncEngine),t.onUnlisten=v_.bind(null,e.syncEngine),t}),oc.apply(this,arguments)}function A_(r,e,t={}){const s=new bs;return r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(a,m,w,M,H){const Y=new Wh({next:Ae=>{m.enqueueAndForget(()=>pg(a,ue));const st=Ae.docs.has(w);!st&&Ae.fromCache?H.reject(new Mt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Ae.fromCache&&M&&"server"===M.source?H.reject(new Mt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Ae)},error:Ae=>H.reject(Ae)}),ue=new mg(gl(w.path),Y,{includeMetadataChanges:!0,Ku:!0});return hg(a,ue)}(yield $c(r),r.asyncQueue,e,t,s)})),s.promise}function zm(r,e,t={}){const s=new bs;return r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(a,m,w,M,H){const Y=new Wh({next:Ae=>{m.enqueueAndForget(()=>pg(a,ue)),Ae.fromCache&&"server"===M.source?H.reject(new Mt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Ae)},error:Ae=>H.reject(Ae)}),ue=new mg(w,Y,{includeMetadataChanges:!0,Ku:!0});return hg(a,ue)}(yield $c(r),r.asyncQueue,e,t,s)})),s.promise}function Pg(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Wm=new Map;function Ng(r,e,t){if(!t)throw new Mt(et.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function xg(r,e,t,s){if(!0===e&&!0===s)throw new Mt(et.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Km(r){if(!Xt.isDocumentKey(r))throw new Mt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Og(r){if(Xt.isDocumentKey(r))throw new Mt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Yh(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":nn()}function Fi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Mt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yh(r);throw new Mt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function qm(r,e){if(e<=0)throw new Mt(et.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Zm{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Mt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Mt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pg(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Mt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Mt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Mt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Mt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kl;switch(t.type){case"firstParty":return new ea(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Mt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wm.get(e);t&&(At("ComponentProvider","Removing Datastore"),Wm.delete(e),t.terminate())}(this),Promise.resolve()}}function Ym(r,e,t,s={}){var a;const m=(r=Fi(r,rh))._getSettings(),w=`${e}:${t}`;if("firestore.googleapis.com"!==m.host&&m.host!==w&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},m),{host:w,ssl:!1})),s.mockUserToken){let M,H;if("string"==typeof s.mockUserToken)M=s.mockUserToken,H=Wt.MOCK_USER;else{M=(0,Ce.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const Y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!Y)throw new Mt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");H=new Wt(Y)}r._authCredentials=new Ja(new Ba(M,H))}}class qo{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qo(this.firestore,e,this._key)}}class vl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new vl(this.firestore,e,this._query)}}class Au extends vl{constructor(e,t,s){super(e,t,gl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qo(this.firestore,null,new Xt(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function kg(r,e,...t){if(r=(0,Ce.m9)(r),Ng("collection","path",e),r instanceof rh){const s=or.fromString(e,...t);return Og(s),new Au(r,null,s)}{if(!(r instanceof qo||r instanceof Au))throw new Mt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(or.fromString(e,...t));return Og(s),new Au(r.firestore,null,s)}}function Ru(r,e){if(r=Fi(r,rh),Ng("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vl(r,null,(t=e,new pl(or.emptyPath(),t)));var t}function Qm(r,e,...t){if(r=(0,Ce.m9)(r),1===arguments.length&&(e=is.A()),Ng("doc","path",e),r instanceof rh){const s=or.fromString(e,...t);return Km(s),new qo(r,null,new Xt(s))}{if(!(r instanceof qo||r instanceof Au))throw new Mt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(or.fromString(e,...t));return Km(s),new qo(r.firestore,r instanceof Au?r.converter:null,new Xt(s))}}function P_(r,e){return r=(0,Ce.m9)(r),e=(0,Ce.m9)(e),(r instanceof qo||r instanceof Au)&&(e instanceof qo||e instanceof Au)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function mu(r,e){return r=(0,Ce.m9)(r),e=(0,Ce.m9)(e),r instanceof vl&&e instanceof vl&&r.firestore===e.firestore&&We(r._query,e._query)&&r.converter===e.converter}class Mu{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new eg(this,"async_queue_retry"),this.Xc=()=>{const t=Fh();t&&At("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new bs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,v.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ra(t))throw t;At("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,On("INTERNAL UNHANDLED ERROR: ",function(m){let w=m.message||"";return m.stack&&(w=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),w}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=rd.createAndSchedule(this,e,t,s,m=>this.na(m));return this.zc.push(a),a}Zc(){this.Wc&&nn()}verifyOperationInProgress(){}sa(){var e=this;return(0,v.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function nu(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class Xm{constructor(){this._progressObserver={},this._taskCompletionResolver=new bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Jm=-1;class So extends rh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Mu,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gp(this),this._firestoreClient.terminate()}}function N_(r,e){const t="object"==typeof r?r:(0,te.getApp)(),s="string"==typeof r?r:e||"(default)",a=(0,te._getProvider)(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const m=(0,Ce.P0)("firestore");m&&Ym(a,...m)}return a}function _a(r){return r._firestoreClient||gp(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function gp(r){var e,t,s;const a=r._freezeSettings(),m=(M=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new oo(r._databaseId,M,r._persistenceKey,(Y=a).host,Y.ssl,Y.experimentalForceLongPolling,Y.experimentalAutoDetectLongPolling,Pg(Y.experimentalLongPollingOptions),Y.useFetchStreams));var M,Y;r._firestoreClient=new S_(r._authCredentials,r._appCheckCredentials,r._queue,m),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Qh(r,e){Vg(r=Fi(r,So));const t=_a(r);if(t._uninitializedComponentsProvider)throw new Mt(et.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new sd;return Fg(t,a,new up(a,s.cacheSizeBytes,e?.forceOwnership))}function x_(r){Vg(r=Fi(r,So));const e=_a(r);if(e._uninitializedComponentsProvider)throw new Mt(et.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new sd;return Fg(e,s,new $m(s,t.cacheSizeBytes))}function Fg(r,e,t){const s=new bs;return r.asyncQueue.enqueue((0,v.Z)(function*(){try{yield Kh(r,t),yield cp(r,e),s.resolve()}catch(a){const m=a;if(!Sg(m))throw m;si("Error enabling indexeddb cache. Falling back to memory cache: "+m),s.reject(m)}})).then(()=>s.promise)}function O_(r){if(r._initialized&&!r._terminated)throw new Mt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bs;return r._queue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{yield(t=(0,v.Z)(function*(s){if(!ti.D())return Promise.resolve();const a=s+"main";yield ti.delete(a)}),function(s){return t.apply(this,arguments)})(Kp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function k_(r){return function(e){const t=new bs;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function Jd(r,e){return Vc.apply(this,arguments)}(yield Ag(e),t)})),t.promise}(_a(r=Fi(r,So)))}function ey(r){return function Rg(r){return r.asyncQueue.enqueue((0,v.Z)(function*(){const e=yield bg(r),t=yield sc(r);return e.setNetworkEnabled(!0),function(s){const a=zt(s);return a.vu.delete(0),Vh(a)}(t)}))}(_a(r=Fi(r,So)))}function ty(r){return function b_(r){return r.asyncQueue.enqueue((0,v.Z)(function*(){const e=yield bg(r),t=yield sc(r);return e.setNetworkEnabled(!1),(s=(0,v.Z)(function*(a){const m=zt(a);m.vu.add(0),yield $d(m),m.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(_a(r=Fi(r,So)))}function F_(r,e){const t=_a(r=Fi(r,So)),s=new Xm;return function Gm(r,e,t,s){const a=function(m,w){let M;return M="string"==typeof m?Id().encode(m):m,H=function(H,Y){if(H instanceof Uint8Array)return Tg(H,Y);if(H instanceof ArrayBuffer)return Tg(new Uint8Array(H),Y);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new jm(H,w);var H}(t,Lh(e));r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){!function Bm(r,e,t){const s=zt(r);var a;(a=(0,v.Z)(function*(m,w,M){try{const H=yield w.getMetadata();if(yield function(st,Rt){const en=zt(st),kn=Ri(Rt.createTime);return en.persistence.runTransaction("hasNewerBundle","readonly",$n=>en.qs.getBundleMetadata($n,Rt.id)).then($n=>!!$n&&$n.createTime.compareTo(kn)>=0)}(m.localStore,H))return yield w.close(),M._completeWith({taskState:"Success",documentsLoaded:(st=H).totalDocuments,bytesLoaded:st.totalBytes,totalDocuments:st.totalDocuments,totalBytes:st.totalBytes}),Promise.resolve(new Set);M._updateProgress(Rm(H));const Y=new y_(H,m.localStore,w.serializer);let ue=yield w.bc();for(;ue;){const st=yield Y.zu(ue);st&&M._updateProgress(st),ue=yield w.bc()}const Ae=yield Y.complete();return yield Bu(m,Ae.Ju,void 0),yield function(st,Rt){const en=zt(st);return en.persistence.runTransaction("Save bundle","readwrite",kn=>en.qs.saveBundleMetadata(kn,Rt))}(m.localStore,H),M._completeWith(Ae.progress),Promise.resolve(Ae.Hu)}catch(H){return si("SyncEngine",`Loading bundle failed with ${H}`),M._failWith(H),Promise.resolve(new Set)}var st}),function(m,w,M){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Ag(r),a,s)}))}(t,r._databaseId,e,s),s}function ny(r,e){return function M_(r,e){return r.asyncQueue.enqueue((0,v.Z)(function*(){return function(t,s){const a=zt(t);return a.persistence.runTransaction("Get named query","readonly",m=>a.qs.getNamedQuery(m,s))}(yield od(r),e)}))}(_a(r=Fi(r,So)),e).then(t=>t?new vl(r,null,t.query):null)}function Vg(r){if(r._initialized||r._terminated)throw new Mt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(Us.fromBase64String(e))}catch(t){throw new Mt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(Us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Mt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jc{constructor(e){this._methodName=e}}class Xh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}const ry=/^__.*__$/;class iy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}}class Ug{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sy(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nn()}}class yp{constructor(e,t,s,a,m,w){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===m&&this.ua(),this.fieldTransforms=m||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return tf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(sy(this.ca)&&ry.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class V_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Lh(e)}ya(e,t,s,a=!1){return new yp({ca:e,methodName:t,ga:s,path:Dr.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(r){const e=r._freezeSettings(),t=Lh(r._databaseId);return new V_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function _p(r,e,t,s,a,m={}){const w=r.ya(m.merge||m.mergeFields?2:0,e,t,a);Hg("Data must be an object, but it was:",w,s);const M=ly(s,w);let H,Y;if(m.merge)H=new uo(w.fieldMask),Y=w.fieldTransforms;else if(m.mergeFields){const ue=[];for(const Ae of m.mergeFields){const st=ih(e,Ae,t);if(!w.contains(st))throw new Mt(et.INVALID_ARGUMENT,`Field '${st}' is specified in your field mask but missing from your input data.`);zg(ue,st)||ue.push(st)}H=new uo(ue),Y=w.fieldTransforms.filter(Ae=>H.covers(Ae.field))}else H=null,Y=w.fieldTransforms;return new iy(new ss(M),H,Y)}class Jh extends jc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function oy(r,e,t){return new yp({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bg extends jc{_toFieldTransform(e){return new Yc(e.path,new lu)}isEqual(e){return e instanceof Bg}}class U_ extends jc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oy(this,e,!0),s=this.pa.map(m=>ud(m,t)),a=new uu(s);return new Yc(e.path,a)}isEqual(e){return this===e}}class B_ extends jc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oy(this,e,!0),s=this.pa.map(m=>ud(m,t)),a=new tu(s);return new Yc(e.path,a)}isEqual(e){return this===e}}class $_ extends jc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new zl(e.serializer,vc(e.serializer,this.Ia));return new Yc(e.path,t)}isEqual(e){return this===e}}function $g(r,e,t,s){const a=r.ya(1,e,t);Hg("Data must be an object, but it was:",a,s);const m=[],w=ss.empty();Xi(s,(H,Y)=>{const ue=ef(e,H,t);Y=(0,Ce.m9)(Y);const Ae=a.da(ue);if(Y instanceof Jh)m.push(ue);else{const st=ud(Y,Ae);null!=st&&(m.push(ue),w.set(ue,st))}});const M=new uo(m);return new Ug(w,M,a.fieldTransforms)}function jg(r,e,t,s,a,m){const w=r.ya(1,e,t),M=[ih(e,s,t)],H=[a];if(m.length%2!=0)throw new Mt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let st=0;st<m.length;st+=2)M.push(ih(e,m[st])),H.push(m[st+1]);const Y=[],ue=ss.empty();for(let st=M.length-1;st>=0;--st)if(!zg(Y,M[st])){const Rt=M[st];let en=H[st];en=(0,Ce.m9)(en);const kn=w.da(Rt);if(en instanceof Jh)Y.push(Rt);else{const $n=ud(en,kn);null!=$n&&(Y.push(Rt),ue.set(Rt,$n))}}const Ae=new uo(Y);return new Ug(ue,Ae,w.fieldTransforms)}function ay(r,e,t,s=!1){return ud(t,r.ya(s?4:3,e))}function ud(r,e){if(uy(r=(0,Ce.m9)(r)))return Hg("Unsupported field value:",e,r),ly(r,e);if(r instanceof jc)return function(t,s){if(!sy(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let m=0;for(const w of t){let M=ud(w,s.wa(m));null==M&&(M={nullValue:"NULL_VALUE"}),a.push(M),m++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Ce.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vc(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=es.fromDate(t);return{timestampValue:Sc(s.serializer,a)}}if(t instanceof es){const a=new es(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sc(s.serializer,a)}}if(t instanceof Xh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:bd(s.serializer,t._byteString)};if(t instanceof qo){const a=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(a))throw s._a(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Yh(t)}`)}(r,e)}function ly(r,e){const t={};return Vs(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(r,(s,a)=>{const m=ud(a,e.ha(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function uy(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof es||r instanceof Xh||r instanceof ac||r instanceof qo||r instanceof jc)}function Hg(r,e,t){if(!uy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Yh(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function ih(r,e,t){if((e=(0,Ce.m9)(e))instanceof lc)return e._internalPath;if("string"==typeof e)return ef(r,e);throw tf("Field path arguments must be of type string or ",r,!1,void 0,t)}const cy=new RegExp("[~\\*/\\[\\]]");function ef(r,e,t){if(e.search(cy)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new lc(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function tf(r,e,t,s,a){const m=s&&!s.isEmpty(),w=void 0!==a;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let H="";return(m||w)&&(H+=" (found",m&&(H+=` in field ${s}`),w&&(H+=` in document ${a}`),H+=")"),new Mt(et.INVALID_ARGUMENT,M+r+H)}function zg(r,e){return r.some(t=>t.isEqual(e))}class sh{constructor(e,t,s,a,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new qo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dy extends sh{data(){return super.data()}}function nf(r,e){return"string"==typeof e?ef(r,e):e instanceof lc?e._internalPath:e._delegate._internalPath}function Gg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Mt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class oh extends vp{}function cd(r,e,...t){let s=[];e instanceof vp&&s.push(e),s=s.concat(t),function(a){const m=a.filter(M=>M instanceof Pu).length,w=a.filter(M=>M instanceof rf).length;if(m>1||m>0&&w>0)throw new Mt(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class rf extends oh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new rf(e,t,s)}_apply(e){const t=this._parse(e);return Wg(e._query,t),new vl(e.firestore,e.converter,J(e._query,t))}_parse(e){const t=ld(e.firestore);return function(a,m,w,M,H,Y,ue){let Ae;if(H.isKeyField()){if("array-contains"===Y||"array-contains-any"===Y)throw new Mt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Y}' queries on documentId().`);if("in"===Y||"not-in"===Y){W_(ue,Y);const st=[];for(const Rt of ue)st.push(Zo(M,a,Rt));Ae={arrayValue:{values:st}}}else Ae=Zo(M,a,ue)}else"in"!==Y&&"not-in"!==Y&&"array-contains-any"!==Y||W_(ue,Y),Ae=ay(w,"where",ue,"in"===Y||"not-in"===Y);return fe.create(H,Y,Ae)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function j_(r,e,t){const s=e,a=nf("where",r);return rf._create(a,s,t)}class Pu extends vp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pu(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Re.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let m=s;const w=a.getFlattenedFilters();for(const M of w)Wg(m,M),m=J(m,M)}(e._query,t),new vl(e.firestore,e.converter,J(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fy extends oh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fy(e,t)}_apply(e){const t=function(s,a,m){if(null!==s.startAt)throw new Mt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Mt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new A(a,m);return function(M,H){if(null===mc(M)){const Y=b(M);null!==Y&&Kg(0,Y,H.field)}}(s,w),w}(e._query,this._field,this._direction);return new vl(e.firestore,e.converter,function(s,a){const m=s.explicitOrderBy.concat([a]);return new pl(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function py(r,e="asc"){const t=e,s=nf("orderBy",r);return fy._create(s,t)}class sf extends oh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new sf(e,t,s)}_apply(e){return new vl(e.firestore,e.converter,de(e._query,this._limit,this._limitType))}}function Zv(r){return qm("limit",r),sf._create("limit",r,"F")}function kr(r){return qm("limitToLast",r),sf._create("limitToLast",r,"L")}class Ep extends oh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Ep(e,t,s)}_apply(e){const t=af(e,this.type,this._docOrFields,this._inclusive);return new vl(e.firestore,e.converter,(a=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function H_(...r){return Ep._create("startAt",r,!0)}function z_(...r){return Ep._create("startAfter",r,!1)}class uc extends oh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new uc(e,t,s)}_apply(e){const t=af(e,this.type,this._docOrFields,this._inclusive);return new vl(e.firestore,e.converter,(a=t,new pl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function G_(...r){return uc._create("endBefore",r,!1)}function wp(...r){return uc._create("endAt",r,!0)}function af(r,e,t,s){if(t[0]=(0,Ce.m9)(t[0]),t[0]instanceof sh)return function(a,m,w,M,H){if(!M)throw new Mt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const Y=[];for(const ue of C(a))if(ue.field.isKeyField())Y.push(Bl(m,M.key));else{const Ae=M.data.field(ue.field);if(oi(Ae))throw new Mt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ae){const st=ue.field.canonicalString();throw new Mt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}Y.push(Ae)}return new il(Y,H)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=ld(r.firestore);return function(m,w,M,H,Y,ue){const Ae=m.explicitOrderBy;if(Y.length>Ae.length)throw new Mt(et.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let Rt=0;Rt<Y.length;Rt++){const en=Y[Rt];if(Ae[Rt].field.isKeyField()){if("string"!=typeof en)throw new Mt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof en}`);if(!y(m)&&-1!==en.indexOf("/"))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${en}' contains a slash.`);const kn=m.path.child(or.fromString(en));if(!Xt.isDocumentKey(kn))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${kn}' is not because it contains an odd number of segments.`);const $n=new Xt(kn);st.push(Bl(w,$n))}else{const kn=ay(M,H,en);st.push(kn)}}return new il(st,ue)}(r._query,r.firestore._databaseId,a,e,t,s)}}function Zo(r,e,t){if("string"==typeof(t=(0,Ce.m9)(t))){if(""===t)throw new Mt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y(e)&&-1!==t.indexOf("/"))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(or.fromString(t));if(!Xt.isDocumentKey(s))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Bl(r,new Xt(s))}if(t instanceof qo)return Bl(r,t._key);throw new Mt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(t)}.`)}function W_(r,e){if(!Array.isArray(r)||0===r.length)throw new Mt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wg(r,e){if(e.isInequality()){const s=b(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const m=mc(r);null!==m&&Kg(0,a,m)}const t=function(s,a){for(const m of s)for(const w of m.getFlattenedFilters())if(a.indexOf(w.op)>=0)return w.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Mt(et.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Kg(r,e,t){if(!t.isEqual(e))throw new Mt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ip{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xi(e,(a,m)=>{s[a]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Xh(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=fs(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const t=Nn(e);return new es(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=or.fromString(e);wn(Du(s));const a=new Co(s.get(1),s.get(3)),m=new Xt(s.popFirst(5));return a.isEqual(t)||On(`Document ${m} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function lf(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class my extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qo(this.firestore,null,t)}}class dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends sh{constructor(e,t,s,a,m,w){super(e,t,s,a,w),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(nf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class uf extends hd{data(e={}){return super.data(e)}}class $u{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new dd(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new uf(this._firestore,this._userDataWriter,s.key,s,new dd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Mt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(w=>({type:"added",doc:new uf(s._firestore,s._userDataWriter,w.doc.key,w.doc,new dd(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(w=>a||3!==w.type).map(w=>{const M=new uf(s._firestore,s._userDataWriter,w.doc.key,w.doc,new dd(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter);let H=-1,Y=-1;return 0!==w.type&&(H=m.indexOf(w.doc.key),m=m.delete(w.doc.key)),1!==w.type&&(m=m.add(w.doc),Y=m.indexOf(w.doc.key)),{type:yy(w.type),doc:M,oldIndex:H,newIndex:Y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yy(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nn()}}function _y(r,e){return r instanceof hd&&e instanceof hd?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof $u&&e instanceof $u&&r._firestore===e._firestore&&mu(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function vy(r){r=Fi(r,qo);const e=Fi(r.firestore,So);return A_(_a(e),r._key).then(t=>Dy(e,r,t))}class Hc extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qo(this.firestore,null,t)}}function cf(r){r=Fi(r,qo);const e=Fi(r.firestore,So),t=_a(e),s=new Hc(e);return function Mg(r,e){const t=new bs;return r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(s=(0,v.Z)(function*(a,m,w){try{const M=yield function(H,Y){const ue=zt(H);return ue.persistence.runTransaction("read document","readonly",Ae=>ue.localDocuments.getDocument(Ae,Y))}(a,m);M.isFoundDocument()?w.resolve(M):M.isNoDocument()?w.resolve(null):w.reject(new Mt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const H=qd(M,`Failed to get document '${m} from cache`);w.reject(H)}}),function(a,m,w){return s.apply(this,arguments)})(yield od(r),e,t);var s})),t.promise}(t,r._key).then(a=>new hd(e,s,r._key,a,new dd(null!==a&&a.hasLocalMutations,!0),r.converter))}function df(r){r=Fi(r,qo);const e=Fi(r.firestore,So);return A_(_a(e),r._key,{source:"server"}).then(t=>Dy(e,r,t))}function Z_(r){r=Fi(r,vl);const e=Fi(r.firestore,So),t=_a(e),s=new Hc(e);return Gg(r._query),zm(t,r._query).then(a=>new $u(e,s,r,a))}function Y_(r){r=Fi(r,vl);const e=Fi(r.firestore,So),t=_a(e),s=new Hc(e);return function Kv(r,e){const t=new bs;return r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(s=(0,v.Z)(function*(a,m,w){try{const M=yield Qp(a,m,!0),H=new yg(m,M.ir),Y=H.sc(M.documents),ue=H.applyChanges(Y,!1);w.resolve(ue.snapshot)}catch(M){const H=qd(M,`Failed to execute query '${m} against cache`);w.reject(H)}}),function(a,m,w){return s.apply(this,arguments)})(yield od(r),e,t);var s})),t.promise}(t,r._query).then(a=>new $u(e,s,r,a))}function Q_(r){r=Fi(r,vl);const e=Fi(r.firestore,So),t=_a(e),s=new Hc(e);return zm(t,r._query,{source:"server"}).then(a=>new $u(e,s,r,a))}function Ey(r,e,t){r=Fi(r,qo);const s=Fi(r.firestore,So),a=lf(r.converter,e,t);return ah(s,[_p(ld(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,co.none())])}function wy(r,e,t,...s){r=Fi(r,qo);const a=Fi(r.firestore,So),m=ld(a);let w;return w="string"==typeof(e=(0,Ce.m9)(e))||e instanceof lc?jg(m,"updateDoc",r._key,e,t,s):$g(m,"updateDoc",r._key,e),ah(a,[w.toMutation(r._key,co.exists(!0))])}function Iy(r){return ah(Fi(r.firestore,So),[new xl(r._key,co.none())])}function X_(r,e){const t=Fi(r.firestore,So),s=Qm(r),a=lf(r.converter,e);return ah(t,[_p(ld(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,co.exists(!1))]).then(()=>s)}function Cy(r,...e){var t,s,a;r=(0,Ce.m9)(r);let m={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||nu(e[w])||(m=e[w],w++);const M={includeMetadataChanges:m.includeMetadataChanges};if(nu(e[w])){const Ae=e[w];e[w]=null===(t=Ae.next)||void 0===t?void 0:t.bind(Ae),e[w+1]=null===(s=Ae.error)||void 0===s?void 0:s.bind(Ae),e[w+2]=null===(a=Ae.complete)||void 0===a?void 0:a.bind(Ae)}let H,Y,ue;if(r instanceof qo)Y=Fi(r.firestore,So),ue=gl(r._key.path),H={next:Ae=>{e[w]&&e[w](Dy(Y,r,Ae))},error:e[w+1],complete:e[w+2]};else{const Ae=Fi(r,vl);Y=Fi(Ae.firestore,So),ue=Ae._query;const st=new Hc(Y);H={next:Rt=>{e[w]&&e[w](new $u(Y,st,Ae,Rt))},error:e[w+1],complete:e[w+2]},Gg(r._query)}return function(Ae,st,Rt,en){const kn=new Wh(en),$n=new mg(st,kn,Rt);return Ae.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return hg(yield $c(Ae),$n)})),()=>{kn.Dc(),Ae.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return pg(yield $c(Ae),$n)}))}}(_a(Y),ue,M,H)}function J_(r,e){return function R_(r,e){const t=new Wh(e);return r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return s=yield $c(r),a=t,zt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return s=yield $c(r),a=t,void zt(s).ku.delete(a);var s,a}))}}(_a(r=Fi(r,So)),nu(e)?e:{next:e})}function ah(r,e){return function(t,s){const a=new bs;return t.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function E_(r,e,t){return gu.apply(this,arguments)}(yield Ag(t),s,a)})),a.promise}(_a(r),e)}function Dy(r,e,t){const s=t.docs.get(e._key),a=new Hc(r);return new hd(r,a,e._key,s,new dd(t.hasPendingWrites,t.fromCache),e.converter)}const sv={maxAttempts:5};class qg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,t,s){this._verifyNotCommitted();const a=zc(e,this._firestore),m=lf(a.converter,t,s),w=_p(this._dataReader,"WriteBatch.set",a._key,m,null!==a.converter,s);return this._mutations.push(w.toMutation(a._key,co.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const m=zc(e,this._firestore);let w;return w="string"==typeof(t=(0,Ce.m9)(t))||t instanceof lc?jg(this._dataReader,"WriteBatch.update",m._key,t,s,a):$g(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(w.toMutation(m._key,co.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zc(e,this._firestore);return this._mutations=this._mutations.concat(new xl(t._key,co.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zc(r,e){if((r=(0,Ce.m9)(r)).firestore!==e)throw new Mt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class ov extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ld(e)}get(e){const t=zc(e,this._firestore),s=new my(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return nn();const m=a[0];if(m.isFoundDocument())return new sh(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new sh(this._firestore,s,t._key,null,t.converter);throw nn()})}set(e,t,s){const a=zc(e,this._firestore),m=lf(a.converter,t,s),w=_p(this._dataReader,"Transaction.set",a._key,m,null!==a.converter,s);return this._transaction.set(a._key,w),this}update(e,t,s,...a){const m=zc(e,this._firestore);let w;return w="string"==typeof(t=(0,Ce.m9)(t))||t instanceof lc?jg(this._dataReader,"Transaction.update",m._key,t,s,a):$g(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,w),this}delete(e){const t=zc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zc(e,this._firestore),s=new Hc(this._firestore);return super.get(e).then(a=>new hd(this._firestore,s,t._key,a._document,new dd(!1,!1),t.converter))}}function hf(r,e,t){r=Fi(r,So);const s=Object.assign(Object.assign({},sv),t);return function(a){if(a.maxAttempts<1)throw new Mt(et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,m,w){const M=new bs;return a.asyncQueue.enqueueAndForget((0,v.Z)(function*(){const H=yield function Hm(r){return Zh(r).then(e=>e.datastore)}(a);new T_(a.asyncQueue,H,w,m,M).run()})),M.promise}(_a(r),a=>e(new ov(r,a)),s)}function av(){return new Jh("deleteField")}function Sy(){return new Bg("serverTimestamp")}function lv(...r){return new U_("arrayUnion",r)}function by(...r){return new B_("arrayRemove",r)}function uv(r){return new $_("increment",r)}!function(r,e=!0){ei=te.SDK_VERSION,(0,te._registerComponent)(new j.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const m=t.getProvider("app").getImmediate(),w=new So(new Fl(t.getProvider("auth-internal")),new El(t.getProvider("app-check-internal")),function(M,H){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new Mt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(M.options.projectId,H)}(m,s),m);return a=Object.assign({useFetchStreams:e},a),w._setSettings(a),w},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(bt,"3.13.0",r),(0,te.registerVersion)(bt,"3.13.0","esm2017")}()},6961:(rn,tt,G)=>{G.d(tt,{$Y:()=>gr,B0:()=>os,FN:()=>Js,IX:()=>Ue,Jt:()=>zs,UJ:()=>Lr,Ym:()=>fo,a1:()=>Ao,aF:()=>po,bm:()=>Qn,cF:()=>as,g6:()=>eo,gE:()=>Er,gH:()=>fn,iH:()=>Gs,oq:()=>Lo,pb:()=>ao,qm:()=>Ln,sd:()=>ys,y4:()=>Lt});var v=G(5861),te=G(6881),j=G(2090),Pe=G(4859);const Ce="firebasestorage.googleapis.com",Fe="storageBucket";class ce extends j.ZR{constructor(ee,Ee,Me=0){super(Ne(ee),`Firebase Storage: ${Ee} (${Ne(ee)})`),this.status_=Me,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ce.prototype)}get status(){return this.status_}set status(ee){this.status_=ee}_codeEquals(ee){return Ne(ee)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(ee){this.customData.serverResponse=ee,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ge=(()=>{return(Z=ge||(ge={})).UNKNOWN="unknown",Z.OBJECT_NOT_FOUND="object-not-found",Z.BUCKET_NOT_FOUND="bucket-not-found",Z.PROJECT_NOT_FOUND="project-not-found",Z.QUOTA_EXCEEDED="quota-exceeded",Z.UNAUTHENTICATED="unauthenticated",Z.UNAUTHORIZED="unauthorized",Z.UNAUTHORIZED_APP="unauthorized-app",Z.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Z.INVALID_CHECKSUM="invalid-checksum",Z.CANCELED="canceled",Z.INVALID_EVENT_NAME="invalid-event-name",Z.INVALID_URL="invalid-url",Z.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Z.NO_DEFAULT_BUCKET="no-default-bucket",Z.CANNOT_SLICE_BLOB="cannot-slice-blob",Z.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Z.NO_DOWNLOAD_URL="no-download-url",Z.INVALID_ARGUMENT="invalid-argument",Z.INVALID_ARGUMENT_COUNT="invalid-argument-count",Z.APP_DELETED="app-deleted",Z.INVALID_ROOT_OPERATION="invalid-root-operation",Z.INVALID_FORMAT="invalid-format",Z.INTERNAL_ERROR="internal-error",Z.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ge;var Z})();function Ne(Z){return"storage/"+Z}function at(){return new ce(ge.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Et(){return new ce(ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _t(){return new ce(ge.CANCELED,"User canceled the upload/download.")}function Dt(){return new ce(ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fn(Z){return new ce(ge.INVALID_ARGUMENT,Z)}function Ut(){return new ce(ge.APP_DELETED,"The Firebase app was deleted.")}function Lt(Z){return new ce(ge.INVALID_ROOT_OPERATION,"The operation '"+Z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vt(Z,ee){return new ce(ge.INVALID_FORMAT,"String does not match format '"+Z+"': "+ee)}function ai(Z){throw new ce(ge.INTERNAL_ERROR,"Internal error: "+Z)}class Er{constructor(ee,Ee){this.bucket=ee,this.path_=Ee}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const ee=encodeURIComponent;return"/b/"+ee(this.bucket)+"/o/"+ee(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(ee,Ee){let Me;try{Me=Er.makeFromUrl(ee,Ee)}catch{return new Er(ee,"")}if(""===Me.path)return Me;throw function Oe(Z){return new ce(ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+Z+"'.")}(ee)}static makeFromUrl(ee,Ee){let Me=null;const He="([A-Za-z0-9.\\-_]+)",vn=new RegExp("^gs://"+He+"(/(.*))?$","i");function er(bi){bi.path_=decodeURIComponent(bi.path)}const Hr=Ee.replace(/[.]/g,"\\."),Si=[{regex:vn,indices:{bucket:1,path:3},postModify:function pt(bi){"/"===bi.path.charAt(bi.path.length-1)&&(bi.path_=bi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Hr}/v[A-Za-z0-9_]+/b/${He}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:er},{regex:new RegExp(`^https?://${Ee===Ce?"(?:storage.googleapis.com|storage.cloud.google.com)":Ee}/${He}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:er}];for(let bi=0;bi<Si.length;bi++){const hr=Si[bi],Fr=hr.regex.exec(ee);if(Fr){let rs=Fr[hr.indices.path];rs||(rs=""),Me=new Er(Fr[hr.indices.bucket],rs),hr.postModify(Me);break}}if(null==Me)throw function Ze(Z){return new ce(ge.INVALID_URL,"Invalid URL '"+Z+"'.")}(ee);return Me}}class Sn{constructor(ee){this.promise_=Promise.reject(ee)}getPromise(){return this.promise_}cancel(ee=!1){}}function dt(Z){return"string"==typeof Z||Z instanceof String}function Tt(Z){return $t()&&Z instanceof Blob}function $t(){return typeof Blob<"u"&&!(0,j.UG)()}function Zt(Z,ee,Ee,Me){if(Me<ee)throw fn(`Invalid value for '${Z}'. Expected ${ee} or greater.`);if(Me>Ee)throw fn(`Invalid value for '${Z}'. Expected ${Ee} or less.`)}function cn(Z,ee,Ee){let Me=ee;return null==Ee&&(Me=`https://${ee}`),`${Ee}://${Me}/v0${Z}`}function yn(Z){const ee=encodeURIComponent;let Ee="?";for(const Me in Z)Z.hasOwnProperty(Me)&&(Ee=Ee+(ee(Me)+"=")+ee(Z[Me])+"&");return Ee=Ee.slice(0,-1),Ee}var zn=(()=>{return(Z=zn||(zn={}))[Z.NO_ERROR=0]="NO_ERROR",Z[Z.NETWORK_ERROR=1]="NETWORK_ERROR",Z[Z.ABORT=2]="ABORT",zn;var Z})();function nr(Z,ee){const Ee=Z>=500&&Z<600,He=-1!==[408,429].indexOf(Z),pt=-1!==ee.indexOf(Z);return Ee||He||pt}class Fn{constructor(ee,Ee,Me,He,pt,Ot,vn,tn,er,_r,Hr,Ti=!0){this.url_=ee,this.method_=Ee,this.headers_=Me,this.body_=He,this.successCodes_=pt,this.additionalRetryCodes_=Ot,this.callback_=vn,this.errorCallback_=tn,this.timeout_=er,this.progressCallback_=_r,this.connectionFactory_=Hr,this.retry=Ti,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((di,Jr)=>{this.resolve_=di,this.reject_=Jr,this.start_()})}start_(){const Ee=(Me,He)=>{const pt=this.resolve_,Ot=this.reject_,vn=He.connection;if(He.wasSuccessCode)try{const tn=this.callback_(vn,vn.getResponse());!function je(Z){return void 0!==Z}(tn)?pt():pt(tn)}catch(tn){Ot(tn)}else if(null!==vn){const tn=at();tn.serverResponse=vn.getErrorText(),Ot(this.errorCallback_?this.errorCallback_(vn,tn):tn)}else Ot(He.canceled?this.appDelete_?Ut():_t():Et())};this.canceled_?Ee(0,new Sr(!1,null,!0)):this.backoffId_=function bn(Z,ee,Ee){let Me=1,He=null,pt=null,Ot=!1,vn=0;function tn(){return 2===vn}let er=!1;function _r(...zr){er||(er=!0,ee.apply(null,zr))}function Hr(zr){He=setTimeout(()=>{He=null,Z(di,tn())},zr)}function Ti(){pt&&clearTimeout(pt)}function di(zr,...ds){if(er)return void Ti();if(zr)return Ti(),void _r.call(null,zr,...ds);if(tn()||Ot)return Ti(),void _r.call(null,zr,...ds);let Si;Me<64&&(Me*=2),1===vn?(vn=2,Si=0):Si=1e3*(Me+Math.random()),Hr(Si)}let Jr=!1;function Rr(zr){Jr||(Jr=!0,Ti(),!er&&(null!==He?(zr||(vn=2),clearTimeout(He),Hr(0)):zr||(vn=1)))}return Hr(0),pt=setTimeout(()=>{Ot=!0,Rr(!0)},Ee),Rr}((Me,He)=>{if(He)return void Me(!1,new Sr(!1,null,!0));const pt=this.connectionFactory_();this.pendingConnection_=pt;const Ot=vn=>{null!==this.progressCallback_&&this.progressCallback_(vn.loaded,vn.lengthComputable?vn.total:-1)};null!==this.progressCallback_&&pt.addUploadProgressListener(Ot),pt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&pt.removeUploadProgressListener(Ot),this.pendingConnection_=null;const vn=pt.getErrorCode()===zn.NO_ERROR,tn=pt.getStatus();if(!vn||nr(tn,this.additionalRetryCodes_)&&this.retry){const _r=pt.getErrorCode()===zn.ABORT;return void Me(!1,new Sr(!1,null,_r))}const er=-1!==this.successCodes_.indexOf(tn);Me(!0,new Sr(er,pt))})},Ee,this.timeout_)}getPromise(){return this.promise_}cancel(ee){this.canceled_=!0,this.appDelete_=ee||!1,null!==this.backoffId_&&function Be(Z){Z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Sr{constructor(ee,Ee,Me){this.wasSuccessCode=ee,this.connection=Ee,this.canceled=!!Me}}function In(...Z){const ee=function Yt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==ee){const Ee=new ee;for(let Me=0;Me<Z.length;Me++)Ee.append(Z[Me]);return Ee.getBlob()}if($t())return new Blob(Z);throw new ce(ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ki{constructor(ee,Ee){this.data=ee,this.contentType=Ee||null}}function Ln(Z,ee){switch(Z){case Qn.RAW:return new Ki(xn(ee));case Qn.BASE64:case Qn.BASE64URL:return new Ki(Rn(Z,ee));case Qn.DATA_URL:return new Ki(function wi(Z){const ee=new li(Z);return ee.base64?Rn(Qn.BASE64,ee.rest):function sn(Z){let ee;try{ee=decodeURIComponent(Z)}catch{throw Vt(Qn.DATA_URL,"Malformed data URL.")}return xn(ee)}(ee.rest)}(ee),function Br(Z){return new li(Z).contentType}(ee))}throw at()}function xn(Z){const ee=[];for(let Ee=0;Ee<Z.length;Ee++){let Me=Z.charCodeAt(Ee);Me<=127?ee.push(Me):Me<=2047?ee.push(192|Me>>6,128|63&Me):55296==(64512&Me)?Ee<Z.length-1&&56320==(64512&Z.charCodeAt(Ee+1))?(Me=65536|(1023&Me)<<10|1023&Z.charCodeAt(++Ee),ee.push(240|Me>>18,128|Me>>12&63,128|Me>>6&63,128|63&Me)):ee.push(239,191,189):56320==(64512&Me)?ee.push(239,191,189):ee.push(224|Me>>12,128|Me>>6&63,128|63&Me)}return new Uint8Array(ee)}function Rn(Z,ee){switch(Z){case Qn.BASE64:{const He=-1!==ee.indexOf("-"),pt=-1!==ee.indexOf("_");if(He||pt)throw Vt(Z,"Invalid character '"+(He?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const He=-1!==ee.indexOf("+"),pt=-1!==ee.indexOf("/");if(He||pt)throw Vt(Z,"Invalid character '"+(He?"+":"/")+"' found: is it base64 encoded?");ee=ee.replace(/-/g,"+").replace(/_/g,"/");break}}let Ee;try{Ee=function qr(Z){if(typeof atob>"u")throw function Bt(Z){return new ce(ge.UNSUPPORTED_ENVIRONMENT,`${Z} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Z)}(ee)}catch(He){throw He.message.includes("polyfill")?He:Vt(Z,"Invalid character found")}const Me=new Uint8Array(Ee.length);for(let He=0;He<Ee.length;He++)Me[He]=Ee.charCodeAt(He);return Me}class li{constructor(ee){this.base64=!1,this.contentType=null;const Ee=ee.match(/^data:([^,]+)?,/);if(null===Ee)throw Vt(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Me=Ee[1]||null;null!=Me&&(this.base64=function ui(Z,ee){return Z.length>=ee.length&&Z.substring(Z.length-ee.length)===ee}(Me,";base64"),this.contentType=this.base64?Me.substring(0,Me.length-7):Me),this.rest=ee.substring(ee.indexOf(",")+1)}}class Lr{constructor(ee,Ee){let Me=0,He="";Tt(ee)?(this.data_=ee,Me=ee.size,He=ee.type):ee instanceof ArrayBuffer?(Ee?this.data_=new Uint8Array(ee):(this.data_=new Uint8Array(ee.byteLength),this.data_.set(new Uint8Array(ee))),Me=this.data_.length):ee instanceof Uint8Array&&(Ee?this.data_=ee:(this.data_=new Uint8Array(ee.length),this.data_.set(ee)),Me=ee.length),this.size_=Me,this.type_=He}size(){return this.size_}type(){return this.type_}slice(ee,Ee){if(Tt(this.data_)){const He=function gi(Z,ee,Ee){return Z.webkitSlice?Z.webkitSlice(ee,Ee):Z.mozSlice?Z.mozSlice(ee,Ee):Z.slice?Z.slice(ee,Ee):null}(this.data_,ee,Ee);return null===He?null:new Lr(He)}{const Me=new Uint8Array(this.data_.buffer,ee,Ee-ee);return new Lr(Me,!0)}}static getBlob(...ee){if($t()){const Ee=ee.map(Me=>Me instanceof Lr?Me.data_:Me);return new Lr(In.apply(null,Ee))}{const Ee=ee.map(Ot=>dt(Ot)?Ln(Qn.RAW,Ot).data:Ot.data_);let Me=0;Ee.forEach(Ot=>{Me+=Ot.byteLength});const He=new Uint8Array(Me);let pt=0;return Ee.forEach(Ot=>{for(let vn=0;vn<Ot.length;vn++)He[pt++]=Ot[vn]}),new Lr(He,!0)}}uploadData(){return this.data_}}function ci(Z){let ee;try{ee=JSON.parse(Z)}catch{return null}return function ke(Z){return"object"==typeof Z&&!Array.isArray(Z)}(ee)?ee:null}function Cn(Z){const ee=Z.lastIndexOf("/",Z.length-2);return-1===ee?Z:Z.slice(ee+1)}function Qt(Z,ee){return ee}class qt{constructor(ee,Ee,Me,He){this.server=ee,this.local=Ee||ee,this.writable=!!Me,this.xform=He||Qt}}let ri=null;function Pi(){if(ri)return ri;const Z=[];Z.push(new qt("bucket")),Z.push(new qt("generation")),Z.push(new qt("metageneration")),Z.push(new qt("name","fullPath",!0));const Ee=new qt("name");Ee.xform=function ee(pt,Ot){return function Vr(Z){return!dt(Z)||Z.length<2?Z:Cn(Z)}(Ot)},Z.push(Ee);const He=new qt("size");return He.xform=function Me(pt,Ot){return void 0!==Ot?Number(Ot):Ot},Z.push(He),Z.push(new qt("timeCreated")),Z.push(new qt("updated")),Z.push(new qt("md5Hash",null,!0)),Z.push(new qt("cacheControl",null,!0)),Z.push(new qt("contentDisposition",null,!0)),Z.push(new qt("contentEncoding",null,!0)),Z.push(new qt("contentLanguage",null,!0)),Z.push(new qt("contentType",null,!0)),Z.push(new qt("metadata","customMetadata",!0)),ri=Z,ri}function Ni(Z,ee,Ee){const Me=ci(ee);return null===Me?null:function qi(Z,ee,Ee){const Me={type:"file"},He=Ee.length;for(let pt=0;pt<He;pt++){const Ot=Ee[pt];Me[Ot.local]=Ot.xform(Me,ee[Ot.server])}return function mi(Z,ee){Object.defineProperty(Z,"ref",{get:function Ee(){const pt=new Er(Z.bucket,Z.fullPath);return ee._makeStorageReference(pt)}})}(Me,Z),Me}(Z,Me,Ee)}function be(Z,ee){const Ee={},Me=ee.length;for(let He=0;He<Me;He++){const pt=ee[He];pt.writable&&(Ee[pt.server]=Z[pt.local])}return JSON.stringify(Ee)}const we="prefixes",oe="items";class Se{constructor(ee,Ee,Me,He){this.url=ee,this.method=Ee,this.handler=Me,this.timeout=He,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function me(Z){if(!Z)throw at()}function ve(Z,ee){return function Ee(Me,He){const pt=Ni(Z,He,ee);return me(null!==pt),pt}}function nt(Z){return function ee(Ee,Me){let He;return He=401===Ee.getStatus()?Ee.getErrorText().includes("Firebase App Check token is invalid")?function ot(){return new ce(ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function jt(){return new ce(ge.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Ee.getStatus()?function Pt(Z){return new ce(ge.QUOTA_EXCEEDED,"Quota for bucket '"+Z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Z.bucket):403===Ee.getStatus()?function mt(Z){return new ce(ge.UNAUTHORIZED,"User does not have permission to access '"+Z+"'.")}(Z.path):Me,He.status=Ee.getStatus(),He.serverResponse=Me.serverResponse,He}}function St(Z){const ee=nt(Z);return function Ee(Me,He){let pt=ee(Me,He);return 404===Me.getStatus()&&(pt=function gt(Z){return new ce(ge.OBJECT_NOT_FOUND,"Object '"+Z+"' does not exist.")}(Z.path)),pt.serverResponse=He.serverResponse,pt}}function mn(Z,ee,Ee){const He=cn(ee.fullServerUrl(),Z.host,Z._protocol),Ot=Z.maxOperationRetryTime,vn=new Se(He,"GET",ve(Z,Ee),Ot);return vn.errorHandler=St(ee),vn}function Dn(Z,ee,Ee,Me,He){const pt={};pt.prefix=ee.isRoot?"":ee.path+"/",Ee&&Ee.length>0&&(pt.delimiter=Ee),Me&&(pt.pageToken=Me),He&&(pt.maxResults=He);const vn=cn(ee.bucketOnlyServerUrl(),Z.host,Z._protocol),er=Z.maxOperationRetryTime,_r=new Se(vn,"GET",function pe(Z,ee){return function Ee(Me,He){const pt=function ne(Z,ee,Ee){const Me=ci(Ee);return null===Me?null:function he(Z,ee,Ee){const Me={prefixes:[],items:[],nextPageToken:Ee.nextPageToken};if(Ee[we])for(const He of Ee[we]){const pt=He.replace(/\/$/,""),Ot=Z._makeStorageReference(new Er(ee,pt));Me.prefixes.push(Ot)}if(Ee[oe])for(const He of Ee[oe]){const pt=Z._makeStorageReference(new Er(ee,He.name));Me.items.push(pt)}return Me}(Z,ee,Me)}(Z,ee,He);return me(null!==pt),pt}}(Z,ee.bucket),er);return _r.urlParams=pt,_r.errorHandler=nt(ee),_r}function pn(Z,ee,Ee){const Me=Object.assign({},Ee);return Me.fullPath=Z.path,Me.size=ee.size(),Me.contentType||(Me.contentType=function xt(Z,ee){return Z&&Z.contentType||ee&&ee.type()||"application/octet-stream"}(null,ee)),Me}class ir{constructor(ee,Ee,Me,He){this.current=ee,this.total=Ee,this.finalized=!!Me,this.metadata=He||null}}function gn(Z,ee){let Ee=null;try{Ee=Z.getResponseHeader("X-Goog-Upload-Status")}catch{me(!1)}return me(!!Ee&&-1!==(ee||["active"]).indexOf(Ee)),Ee}const Js={STATE_CHANGED:"state_changed"},gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Rs(Z){switch(Z){case"running":case"pausing":case"canceling":return gr.RUNNING;case"paused":return gr.PAUSED;case"success":return gr.SUCCESS;case"canceled":return gr.CANCELED;default:return gr.ERROR}}class Vi{constructor(ee,Ee,Me){if(function Ye(Z){return"function"==typeof Z}(ee)||null!=Ee||null!=Me)this.next=ee,this.error=Ee??void 0,this.complete=Me??void 0;else{const pt=ee;this.next=pt.next,this.error=pt.error,this.complete=pt.complete}}}function Kt(Z){return(...ee)=>{Promise.resolve().then(()=>Z(...ee))}}let jn=null;class Zr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zn.NO_ERROR,this.sendPromise_=new Promise(ee=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zn.ABORT,ee()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zn.NETWORK_ERROR,ee()}),this.xhr_.addEventListener("load",()=>{ee()})})}send(ee,Ee,Me,He){if(this.sent_)throw ai("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ee,ee,!0),void 0!==He)for(const pt in He)He.hasOwnProperty(pt)&&this.xhr_.setRequestHeader(pt,He[pt].toString());return void 0!==Me?this.xhr_.send(Me):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ai("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ai("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ai("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ai("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(ee){return this.xhr_.getResponseHeader(ee)}addUploadProgressListener(ee){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",ee)}removeUploadProgressListener(ee){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",ee)}}class $r extends Zr{initXhr(){this.xhr_.responseType="text"}}function $i(){return jn?jn():new $r}class Ue{constructor(ee,Ee,Me=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=ee,this._blob=Ee,this._metadata=Me,this._mappings=Pi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=He=>{if(this._request=void 0,this._chunkMultiplier=1,He._codeEquals(ge.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const pt=this.isExponentialBackoffExpired();if(nr(He.status,[])){if(!pt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();He=Et()}this._error=He,this._transition("error")}},this._metadataErrorHandler=He=>{this._request=void 0,He._codeEquals(ge.CANCELED)?this.completeTransitions_():(this._error=He,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((He,pt)=>{this._resolve=He,this._reject=pt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const ee=this._transferred;return Ee=>this._updateProgress(ee+Ee)}_shouldDoResumable(ee){return ee.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(ee){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Ee,Me])=>{switch(this._state){case"running":ee(Ee,Me);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((ee,Ee)=>{const Me=function Cr(Z,ee,Ee,Me,He){const pt=ee.bucketOnlyServerUrl(),Ot=pn(ee,Me,He),vn={name:Ot.fullPath},tn=cn(pt,Z.host,Z._protocol),_r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Me.size()}`,"X-Goog-Upload-Header-Content-Type":Ot.contentType,"Content-Type":"application/json; charset=utf-8"},Hr=be(Ot,Ee),Jr=new Se(tn,"POST",function di(Rr){let zr;gn(Rr);try{zr=Rr.getResponseHeader("X-Goog-Upload-URL")}catch{me(!1)}return me(dt(zr)),zr},Z.maxUploadRetryTime);return Jr.urlParams=vn,Jr.headers=_r,Jr.body=Hr,Jr.errorHandler=nt(ee),Jr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),He=this._ref.storage._makeRequest(Me,$i,ee,Ee);this._request=He,He.getPromise().then(pt=>{this._request=void 0,this._uploadUrl=pt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const ee=this._uploadUrl;this._resolveToken((Ee,Me)=>{const He=function vr(Z,ee,Ee,Me){const tn=new Se(Ee,"POST",function pt(er){const _r=gn(er,["active","final"]);let Hr=null;try{Hr=er.getResponseHeader("X-Goog-Upload-Size-Received")}catch{me(!1)}Hr||me(!1);const Ti=Number(Hr);return me(!isNaN(Ti)),new ir(Ti,Me.size(),"final"===_r)},Z.maxUploadRetryTime);return tn.headers={"X-Goog-Upload-Command":"query"},tn.errorHandler=nt(ee),tn}(this._ref.storage,this._ref._location,ee,this._blob),pt=this._ref.storage._makeRequest(He,$i,Ee,Me);this._request=pt,pt.getPromise().then(Ot=>{this._request=void 0,this._updateProgress(Ot.current),this._needToFetchStatus=!1,Ot.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const ee=262144*this._chunkMultiplier,Ee=new ir(this._transferred,this._blob.size()),Me=this._uploadUrl;this._resolveToken((He,pt)=>{let Ot;try{Ot=function _i(Z,ee,Ee,Me,He,pt,Ot,vn){const tn=new ir(0,0);if(Ot?(tn.current=Ot.current,tn.total=Ot.total):(tn.current=0,tn.total=Me.size()),Me.size()!==tn.total)throw function lt(){return new ce(ge.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const er=tn.total-tn.current;let _r=er;He>0&&(_r=Math.min(_r,He));const Hr=tn.current;let di="";di=0===_r?"finalize":er===_r?"upload, finalize":"upload";const Jr={"X-Goog-Upload-Command":di,"X-Goog-Upload-Offset":`${tn.current}`},Rr=Me.slice(Hr,Hr+_r);if(null===Rr)throw Dt();const Si=new Se(Ee,"POST",function zr(bi,hr){const Fr=gn(bi,["active","final"]),Yo=tn.current+_r,rs=Me.size();let Qi;return Qi="final"===Fr?ve(ee,pt)(bi,hr):null,new ir(Yo,rs,"final"===Fr,Qi)},ee.maxUploadRetryTime);return Si.headers=Jr,Si.body=Rr.uploadData(),Si.progressCallback=vn||null,Si.errorHandler=nt(Z),Si}(this._ref._location,this._ref.storage,Me,this._blob,ee,this._mappings,Ee,this._makeProgressCallback())}catch(tn){return this._error=tn,void this._transition("error")}const vn=this._ref.storage._makeRequest(Ot,$i,He,pt,!1);this._request=vn,vn.getPromise().then(tn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(tn.current),tn.finalized?(this._metadata=tn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((ee,Ee)=>{const Me=mn(this._ref.storage,this._ref._location,this._mappings),He=this._ref.storage._makeRequest(Me,$i,ee,Ee);this._request=He,He.getPromise().then(pt=>{this._request=void 0,this._metadata=pt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((ee,Ee)=>{const Me=function Pn(Z,ee,Ee,Me,He){const pt=ee.bucketOnlyServerUrl(),Ot={"X-Goog-Upload-Protocol":"multipart"},tn=function vn(){let Si="";for(let bi=0;bi<2;bi++)Si+=Math.random().toString().slice(2);return Si}();Ot["Content-Type"]="multipart/related; boundary="+tn;const er=pn(ee,Me,He),_r=be(er,Ee),di=Lr.getBlob("--"+tn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_r+"\r\n--"+tn+"\r\nContent-Type: "+er.contentType+"\r\n\r\n",Me,"\r\n--"+tn+"--");if(null===di)throw Dt();const Jr={name:er.fullPath},Rr=cn(pt,Z.host,Z._protocol),ds=Z.maxUploadRetryTime,pr=new Se(Rr,"POST",ve(Z,Ee),ds);return pr.urlParams=Jr,pr.headers=Ot,pr.body=di.uploadData(),pr.errorHandler=nt(ee),pr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),He=this._ref.storage._makeRequest(Me,$i,ee,Ee);this._request=He,He.getPromise().then(pt=>{this._request=void 0,this._metadata=pt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(ee){const Ee=this._transferred;this._transferred=ee,this._transferred!==Ee&&this._notifyObservers()}_transition(ee){if(this._state!==ee)switch(ee){case"canceling":case"pausing":this._state=ee,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Ee="paused"===this._state;this._state=ee,Ee&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=ee,this._notifyObservers();break;case"canceled":this._error=_t(),this._state=ee,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const ee=Rs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:ee,metadata:this._metadata,task:this,ref:this._ref}}on(ee,Ee,Me,He){const pt=new Vi(Ee||void 0,Me||void 0,He||void 0);return this._addObserver(pt),()=>{this._removeObserver(pt)}}then(ee,Ee){return this._promise.then(ee,Ee)}catch(ee){return this.then(null,ee)}_addObserver(ee){this._observers.push(ee),this._notifyObserver(ee)}_removeObserver(ee){const Ee=this._observers.indexOf(ee);-1!==Ee&&this._observers.splice(Ee,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Ee=>{this._notifyObserver(Ee)})}_finishPromise(){if(void 0!==this._resolve){let ee=!0;switch(Rs(this._state)){case gr.SUCCESS:Kt(this._resolve.bind(null,this.snapshot))();break;case gr.CANCELED:case gr.ERROR:Kt(this._reject.bind(null,this._error))();break;default:ee=!1}ee&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(ee){switch(Rs(this._state)){case gr.RUNNING:case gr.PAUSED:ee.next&&Kt(ee.next.bind(ee,this.snapshot))();break;case gr.SUCCESS:ee.complete&&Kt(ee.complete.bind(ee))();break;default:ee.error&&Kt(ee.error.bind(ee,this._error))()}}resume(){const ee="paused"===this._state||"pausing"===this._state;return ee&&this._transition("running"),ee}pause(){const ee="running"===this._state;return ee&&this._transition("pausing"),ee}cancel(){const ee="running"===this._state||"pausing"===this._state;return ee&&this._transition("canceling"),ee}}class Ve{constructor(ee,Ee){this._service=ee,this._location=Ee instanceof Er?Ee:Er.makeFromUrl(Ee,ee.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(ee,Ee){return new Ve(ee,Ee)}get root(){const ee=new Er(this._location.bucket,"");return this._newRef(this._service,ee)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cn(this._location.path)}get storage(){return this._service}get parent(){const ee=function Xn(Z){if(0===Z.length)return null;const ee=Z.lastIndexOf("/");return-1===ee?"":Z.slice(0,ee)}(this._location.path);if(null===ee)return null;const Ee=new Er(this._location.bucket,ee);return new Ve(this._service,Ee)}_throwIfRoot(ee){if(""===this._location.path)throw Lt(ee)}}function ns(Z,ee,Ee){return xi.apply(this,arguments)}function xi(){return(xi=(0,v.Z)(function*(Z,ee,Ee){const He=yield Yi(Z,{pageToken:Ee});ee.prefixes.push(...He.prefixes),ee.items.push(...He.items),null!=He.nextPageToken&&(yield ns(Z,ee,He.nextPageToken))})).apply(this,arguments)}function Yi(Z,ee){null!=ee&&"number"==typeof ee.maxResults&&Zt("options.maxResults",1,1e3,ee.maxResults);const Ee=ee||{},Me=Dn(Z.storage,Z._location,"/",Ee.pageToken,Ee.maxResults);return Z.storage.makeRequestWithTokens(Me,$i)}function ms(Z){Z._throwIfRoot("getDownloadURL");const ee=function Li(Z,ee,Ee){const He=cn(ee.fullServerUrl(),Z.host,Z._protocol),Ot=Z.maxOperationRetryTime,vn=new Se(He,"GET",function Le(Z,ee){return function Ee(Me,He){const pt=Ni(Z,He,ee);return me(null!==pt),function yi(Z,ee,Ee,Me){const He=ci(ee);if(null===He||!dt(He.downloadTokens))return null;const pt=He.downloadTokens;if(0===pt.length)return null;const Ot=encodeURIComponent;return pt.split(",").map(er=>{const Hr=Z.fullPath;return cn("/b/"+Ot(Z.bucket)+"/o/"+Ot(Hr),Ee,Me)+yn({alt:"media",token:er})})[0]}(pt,He,Z.host,Z._protocol)}}(Z,Ee),Ot);return vn.errorHandler=St(ee),vn}(Z.storage,Z._location,Pi());return Z.storage.makeRequestWithTokens(ee,$i).then(Ee=>{if(null===Ee)throw function q(){return new ce(ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Ee})}function yr(Z,ee){const Ee=function Nr(Z,ee){const Ee=ee.split("/").filter(Me=>Me.length>0).join("/");return 0===Z.length?Ee:Z+"/"+Ee}(Z._location.path,ee),Me=new Er(Z._location.bucket,Ee);return new Ve(Z.storage,Me)}function cs(Z,ee){if(Z instanceof Hi){const Ee=Z;if(null==Ee._bucket)throw function rt(){return new ce(ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fe+"' property when initializing the app?")}();const Me=new Ve(Ee,Ee._bucket);return null!=ee?cs(Me,ee):Me}return void 0!==ee?yr(Z,ee):Z}function Jn(Z,ee){if(ee&&function wr(Z){return/^[A-Za-z]+:\/\//.test(Z)}(ee)){if(Z instanceof Hi)return function cr(Z,ee){return new Ve(Z,ee)}(Z,ee);throw fn("To use ref(service, url), the first argument must be a Storage instance.")}return cs(Z,ee)}function Fo(Z,ee){const Ee=ee?.[Fe];return null==Ee?null:Er.makeFromBucketSpec(Ee,Z)}class Hi{constructor(ee,Ee,Me,He,pt){this.app=ee,this._authProvider=Ee,this._appCheckProvider=Me,this._url=He,this._firebaseVersion=pt,this._bucket=null,this._host=Ce,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=He?Er.makeFromBucketSpec(He,this._host):Fo(this._host,this.app.options)}get host(){return this._host}set host(ee){this._host=ee,this._bucket=null!=this._url?Er.makeFromBucketSpec(this._url,ee):Fo(ee,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(ee){Zt("time",0,Number.POSITIVE_INFINITY,ee),this._maxUploadRetryTime=ee}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(ee){Zt("time",0,Number.POSITIVE_INFINITY,ee),this._maxOperationRetryTime=ee}_getAuthToken(){var ee=this;return(0,v.Z)(function*(){if(ee._overrideAuthToken)return ee._overrideAuthToken;const Ee=ee._authProvider.getImmediate({optional:!0});if(Ee){const Me=yield Ee.getToken();if(null!==Me)return Me.accessToken}return null})()}_getAppCheckToken(){var ee=this;return(0,v.Z)(function*(){const Ee=ee._appCheckProvider.getImmediate({optional:!0});return Ee?(yield Ee.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(ee=>ee.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(ee){return new Ve(this,ee)}_makeRequest(ee,Ee,Me,He,pt=!0){if(this._deleted)return new Sn(Ut());{const Ot=function Wn(Z,ee,Ee,Me,He,pt,Ot=!0){const vn=yn(Z.urlParams),tn=Z.url+vn,er=Object.assign({},Z.headers);return function fr(Z,ee){ee&&(Z["X-Firebase-GMPID"]=ee)}(er,ee),function Gt(Z,ee){null!==ee&&ee.length>0&&(Z.Authorization="Firebase "+ee)}(er,Ee),function Ar(Z,ee){Z["X-Firebase-Storage-Version"]="webjs/"+(ee??"AppManager")}(er,pt),function br(Z,ee){null!==ee&&(Z["X-Firebase-AppCheck"]=ee)}(er,Me),new Fn(tn,Z.method,er,Z.body,Z.successCodes,Z.additionalRetryCodes,Z.handler,Z.errorHandler,Z.timeout,Z.progressCallback,He,Ot)}(ee,this._appId,Me,He,Ee,this._firebaseVersion,pt);return this._requests.add(Ot),Ot.getPromise().then(()=>this._requests.delete(Ot),()=>this._requests.delete(Ot)),Ot}}makeRequestWithTokens(ee,Ee){var Me=this;return(0,v.Z)(function*(){const[He,pt]=yield Promise.all([Me._getAuthToken(),Me._getAppCheckToken()]);return Me._makeRequest(ee,Ee,He,pt).getPromise()})()}}const Cs="@firebase/storage",sr="storage";function os(Z,ee,Ee){return function Bn(Z,ee,Ee){return Z._throwIfRoot("uploadBytesResumable"),new Ue(Z,new Lr(ee),Ee)}(Z=(0,j.m9)(Z),ee,Ee)}function ys(Z){return function Qr(Z){Z._throwIfRoot("getMetadata");const ee=mn(Z.storage,Z._location,Pi());return Z.storage.makeRequestWithTokens(ee,$i)}(Z=(0,j.m9)(Z))}function fo(Z,ee){return function ii(Z,ee){Z._throwIfRoot("updateMetadata");const Ee=function ht(Z,ee,Ee,Me){const pt=cn(ee.fullServerUrl(),Z.host,Z._protocol),vn=be(Ee,Me),er=Z.maxOperationRetryTime,_r=new Se(pt,"PATCH",ve(Z,Me),er);return _r.headers={"Content-Type":"application/json; charset=utf-8"},_r.body=vn,_r.errorHandler=St(ee),_r}(Z.storage,Z._location,ee,Pi());return Z.storage.makeRequestWithTokens(Ee,$i)}(Z=(0,j.m9)(Z),ee)}function ao(Z,ee){return Yi(Z=(0,j.m9)(Z),ee)}function po(Z){return function mr(Z){const ee={prefixes:[],items:[]};return ns(Z,ee).then(()=>ee)}(Z=(0,j.m9)(Z))}function zs(Z){return ms(Z=(0,j.m9)(Z))}function Lo(Z){return function ho(Z){Z._throwIfRoot("deleteObject");const ee=function Qe(Z,ee){const Me=cn(ee.fullServerUrl(),Z.host,Z._protocol),vn=new Se(Me,"DELETE",function Ot(tn,er){},Z.maxOperationRetryTime);return vn.successCodes=[200,204],vn.errorHandler=St(ee),vn}(Z.storage,Z._location);return Z.storage.makeRequestWithTokens(ee,$i)}(Z=(0,j.m9)(Z))}function Gs(Z,ee){return Jn(Z=(0,j.m9)(Z),ee)}function eo(Z,ee){return yr(Z,ee)}function as(Z=(0,te.getApp)(),ee){Z=(0,j.m9)(Z);const Me=(0,te._getProvider)(Z,sr).getImmediate({identifier:ee}),He=(0,j.P0)("storage");return He&&Ao(Me,...He),Me}function Ao(Z,ee,Ee,Me={}){!function Is(Z,ee,Ee,Me={}){Z.host=`${ee}:${Ee}`,Z._protocol="http";const{mockUserToken:He}=Me;He&&(Z._overrideAuthToken="string"==typeof He?He:(0,j.Sg)(He,Z.app.options.projectId))}(Z,ee,Ee,Me)}function $s(Z,{instanceIdentifier:ee}){const Ee=Z.getProvider("app").getImmediate(),Me=Z.getProvider("auth-internal"),He=Z.getProvider("app-check-internal");return new Hi(Ee,Me,He,ee,te.SDK_VERSION)}!function Ms(){(0,te._registerComponent)(new Pe.wA(sr,$s,"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(Cs,"0.11.2",""),(0,te.registerVersion)(Cs,"0.11.2","esm2017")}()},2090:(rn,tt,G)=>{G.d(tt,{$s:()=>mi,BH:()=>rt,DV:()=>fr,Dv:()=>Br,G6:()=>bn,GJ:()=>Gt,L:()=>qe,LL:()=>Tt,P0:()=>_t,Pz:()=>Oe,Sg:()=>Dt,UG:()=>Bt,UI:()=>Wn,US:()=>Fe,Wj:()=>ci,Wl:()=>yn,Yr:()=>Sn,ZB:()=>Ne,ZR:()=>dt,aH:()=>Ze,b$:()=>Lt,cI:()=>cn,dS:()=>Nr,eu:()=>je,g5:()=>j,gK:()=>ui,gQ:()=>Ln,h$:()=>ye,hl:()=>Be,hu:()=>te,jU:()=>fn,lb:()=>Xn,m9:()=>yi,ne:()=>xn,p$:()=>ge,pd:()=>Ki,q4:()=>Et,r3:()=>Ar,ru:()=>Ut,tV:()=>ce,uI:()=>q,ug:()=>Cn,vZ:()=>Yt,w1:()=>ai,w9:()=>Sr,xO:()=>qr,xb:()=>br,z$:()=>lt,zI:()=>Ye,zd:()=>Qn});const v={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(be,we){if(!be)throw j(we)},j=function(be){return new Error("Firebase Database ("+v.SDK_VERSION+") INTERNAL ASSERT FAILED: "+be)},Pe=function(be){const we=[];let oe=0;for(let he=0;he<be.length;he++){let ne=be.charCodeAt(he);ne<128?we[oe++]=ne:ne<2048?(we[oe++]=ne>>6|192,we[oe++]=63&ne|128):55296==(64512&ne)&&he+1<be.length&&56320==(64512&be.charCodeAt(he+1))?(ne=65536+((1023&ne)<<10)+(1023&be.charCodeAt(++he)),we[oe++]=ne>>18|240,we[oe++]=ne>>12&63|128,we[oe++]=ne>>6&63|128,we[oe++]=63&ne|128):(we[oe++]=ne>>12|224,we[oe++]=ne>>6&63|128,we[oe++]=63&ne|128)}return we},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(be,we){if(!Array.isArray(be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=we?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let ne=0;ne<be.length;ne+=3){const Se=be[ne],me=ne+1<be.length,ve=me?be[ne+1]:0,pe=ne+2<be.length,Le=pe?be[ne+2]:0;let mn=(15&ve)<<2|Le>>6,Dn=63&Le;pe||(Dn=64,me||(mn=64)),he.push(oe[Se>>2],oe[(3&Se)<<4|ve>>4],oe[mn],oe[Dn])}return he.join("")},encodeString(be,we){return this.HAS_NATIVE_SUPPORT&&!we?btoa(be):this.encodeByteArray(Pe(be),we)},decodeString(be,we){return this.HAS_NATIVE_SUPPORT&&!we?atob(be):function(be){const we=[];let oe=0,he=0;for(;oe<be.length;){const ne=be[oe++];if(ne<128)we[he++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Se=be[oe++];we[he++]=String.fromCharCode((31&ne)<<6|63&Se)}else if(ne>239&&ne<365){const pe=((7&ne)<<18|(63&be[oe++])<<12|(63&be[oe++])<<6|63&be[oe++])-65536;we[he++]=String.fromCharCode(55296+(pe>>10)),we[he++]=String.fromCharCode(56320+(1023&pe))}else{const Se=be[oe++],me=be[oe++];we[he++]=String.fromCharCode((15&ne)<<12|(63&Se)<<6|63&me)}}return we.join("")}(this.decodeStringToByteArray(be,we))},decodeStringToByteArray(be,we){this.init_();const oe=we?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let ne=0;ne<be.length;){const Se=oe[be.charAt(ne++)],ve=ne<be.length?oe[be.charAt(ne)]:0;++ne;const Le=ne<be.length?oe[be.charAt(ne)]:64;++ne;const St=ne<be.length?oe[be.charAt(ne)]:64;if(++ne,null==Se||null==ve||null==Le||null==St)throw new $e;he.push(Se<<2|ve>>4),64!==Le&&(he.push(ve<<4&240|Le>>2),64!==St&&he.push(Le<<6&192|St))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let be=0;be<this.ENCODED_VALS.length;be++)this.byteToCharMap_[be]=this.ENCODED_VALS.charAt(be),this.charToByteMap_[this.byteToCharMap_[be]]=be,this.byteToCharMapWebSafe_[be]=this.ENCODED_VALS_WEBSAFE.charAt(be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[be]]=be,be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(be)]=be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(be)]=be)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(be){const we=Pe(be);return Fe.encodeByteArray(we,!0)},qe=function(be){return ye(be).replace(/\./g,"")},ce=function(be){try{return Fe.decodeString(be,!0)}catch(we){console.error("base64Decode failed: ",we)}return null};function ge(be){return Ne(void 0,be)}function Ne(be,we){if(!(we instanceof Object))return we;switch(we.constructor){case Date:return new Date(we.getTime());case Object:void 0===be&&(be={});break;case Array:be=[];break;default:return we}for(const oe in we)!we.hasOwnProperty(oe)||!at(oe)||(be[oe]=Ne(be[oe],we[oe]));return be}function at(be){return"__proto__"!==be}const mt=()=>{try{return function gt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const be=process.env.__FIREBASE_DEFAULTS__;return be?JSON.parse(be):void 0})()||(()=>{if(typeof document>"u")return;let be;try{be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const we=be&&ce(be[1]);return we&&JSON.parse(we)})()}catch(be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${be}`)}},Et=be=>{var we,oe;return null===(oe=null===(we=mt())||void 0===we?void 0:we.emulatorHosts)||void 0===oe?void 0:oe[be]},_t=be=>{const we=Et(be);if(!we)return;const oe=we.lastIndexOf(":");if(oe<=0||oe+1===we.length)throw new Error(`Invalid host ${we} with no separate hostname and port!`);const he=parseInt(we.substring(oe+1),10);return"["===we[0]?[we.substring(1,oe-1),he]:[we.substring(0,oe),he]},Ze=()=>{var be;return null===(be=mt())||void 0===be?void 0:be.config},Oe=be=>{var we;return null===(we=mt())||void 0===we?void 0:we[`_${be}`]};class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((we,oe)=>{this.resolve=we,this.reject=oe})}wrapCallback(we){return(oe,he)=>{oe?this.reject(oe):this.resolve(he),"function"==typeof we&&(this.promise.catch(()=>{}),1===we.length?we(oe):we(oe,he))}}}function Dt(be,we){if(be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=we||"demo-project",ne=be.iat||0,Se=be.sub||be.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:ne,exp:ne+3600,auth_time:ne,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},be);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(me)),""].join(".")}function lt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function Bt(){var be;const we=null===(be=mt())||void 0===be?void 0:be.forceEnvironment;if("node"===we)return!0;if("browser"===we)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fn(){return"object"==typeof self&&self.self===self}function Ut(){const be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof be&&void 0!==be.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ai(){const be=lt();return be.indexOf("MSIE ")>=0||be.indexOf("Trident/")>=0}function Sn(){return!0===v.NODE_CLIENT||!0===v.NODE_ADMIN}function bn(){return!Bt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((be,we)=>{try{let oe=!0;const he="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(he);ne.onsuccess=()=>{ne.result.close(),oe||self.indexedDB.deleteDatabase(he),be(!0)},ne.onupgradeneeded=()=>{oe=!1},ne.onerror=()=>{var Se;we((null===(Se=ne.error)||void 0===Se?void 0:Se.message)||"")}}catch(oe){we(oe)}})}function Ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class dt extends Error{constructor(we,oe,he){super(oe),this.code=we,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(we,oe,he){this.service=we,this.serviceName=oe,this.errors=he}create(we,...oe){const he=oe[0]||{},ne=`${this.service}/${we}`,Se=this.errors[we],me=Se?function $t(be,we){return be.replace(Zt,(oe,he)=>{const ne=we[he];return null!=ne?String(ne):`<${he}?>`})}(Se,he):"Error";return new dt(ne,`${this.serviceName}: ${me} (${ne}).`,he)}}const Zt=/\{\$([^}]+)}/g;function cn(be){return JSON.parse(be)}function yn(be){return JSON.stringify(be)}const zn=function(be){let we={},oe={},he={},ne="";try{const Se=be.split(".");we=cn(ce(Se[0])||""),oe=cn(ce(Se[1])||""),ne=Se[2],he=oe.d||{},delete oe.d}catch{}return{header:we,claims:oe,data:he,signature:ne}},Sr=function(be){const oe=zn(be).claims;return!!oe&&"object"==typeof oe&&oe.hasOwnProperty("iat")},Gt=function(be){const we=zn(be).claims;return"object"==typeof we&&!0===we.admin};function Ar(be,we){return Object.prototype.hasOwnProperty.call(be,we)}function fr(be,we){if(Object.prototype.hasOwnProperty.call(be,we))return be[we]}function br(be){for(const we in be)if(Object.prototype.hasOwnProperty.call(be,we))return!1;return!0}function Wn(be,we,oe){const he={};for(const ne in be)Object.prototype.hasOwnProperty.call(be,ne)&&(he[ne]=we.call(oe,be[ne],ne,be));return he}function Yt(be,we){if(be===we)return!0;const oe=Object.keys(be),he=Object.keys(we);for(const ne of oe){if(!he.includes(ne))return!1;const Se=be[ne],me=we[ne];if(In(Se)&&In(me)){if(!Yt(Se,me))return!1}else if(Se!==me)return!1}for(const ne of he)if(!oe.includes(ne))return!1;return!0}function In(be){return null!==be&&"object"==typeof be}function qr(be){const we=[];for(const[oe,he]of Object.entries(be))Array.isArray(he)?he.forEach(ne=>{we.push(encodeURIComponent(oe)+"="+encodeURIComponent(ne))}):we.push(encodeURIComponent(oe)+"="+encodeURIComponent(he));return we.length?"&"+we.join("&"):""}function Qn(be){const we={};return be.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[ne,Se]=he.split("=");we[decodeURIComponent(ne)]=decodeURIComponent(Se)}}),we}function Ki(be){const we=be.indexOf("?");if(!we)return"";const oe=be.indexOf("#",we);return be.substring(we,oe>0?oe:void 0)}class Ln{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let we=1;we<this.blockSize;++we)this.pad_[we]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(we,oe){oe||(oe=0);const he=this.W_;if("string"==typeof we)for(let St=0;St<16;St++)he[St]=we.charCodeAt(oe)<<24|we.charCodeAt(oe+1)<<16|we.charCodeAt(oe+2)<<8|we.charCodeAt(oe+3),oe+=4;else for(let St=0;St<16;St++)he[St]=we[oe]<<24|we[oe+1]<<16|we[oe+2]<<8|we[oe+3],oe+=4;for(let St=16;St<80;St++){const mn=he[St-3]^he[St-8]^he[St-14]^he[St-16];he[St]=4294967295&(mn<<1|mn>>>31)}let Le,nt,ne=this.chain_[0],Se=this.chain_[1],me=this.chain_[2],ve=this.chain_[3],pe=this.chain_[4];for(let St=0;St<80;St++){St<40?St<20?(Le=ve^Se&(me^ve),nt=1518500249):(Le=Se^me^ve,nt=1859775393):St<60?(Le=Se&me|ve&(Se|me),nt=2400959708):(Le=Se^me^ve,nt=3395469782);const mn=(ne<<5|ne>>>27)+Le+pe+nt+he[St]&4294967295;pe=ve,ve=me,me=4294967295&(Se<<30|Se>>>2),Se=ne,ne=mn}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Se&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+ve&4294967295,this.chain_[4]=this.chain_[4]+pe&4294967295}update(we,oe){if(null==we)return;void 0===oe&&(oe=we.length);const he=oe-this.blockSize;let ne=0;const Se=this.buf_;let me=this.inbuf_;for(;ne<oe;){if(0===me)for(;ne<=he;)this.compress_(we,ne),ne+=this.blockSize;if("string"==typeof we){for(;ne<oe;)if(Se[me]=we.charCodeAt(ne),++me,++ne,me===this.blockSize){this.compress_(Se),me=0;break}}else for(;ne<oe;)if(Se[me]=we[ne],++me,++ne,me===this.blockSize){this.compress_(Se),me=0;break}}this.inbuf_=me,this.total_+=oe}digest(){const we=[];let oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&oe,oe/=256;this.compress_(this.buf_);let he=0;for(let ne=0;ne<5;ne++)for(let Se=24;Se>=0;Se-=8)we[he]=this.chain_[ne]>>Se&255,++he;return we}}function xn(be,we){const oe=new sn(be,we);return oe.subscribe.bind(oe)}class sn{constructor(we,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{we(this)}).catch(he=>{this.error(he)})}next(we){this.forEachObserver(oe=>{oe.next(we)})}error(we){this.forEachObserver(oe=>{oe.error(we)}),this.close(we)}complete(){this.forEachObserver(we=>{we.complete()}),this.close()}subscribe(we,oe,he){let ne;if(void 0===we&&void 0===oe&&void 0===he)throw new Error("Missing Observer.");ne=function li(be,we){if("object"!=typeof be||null===be)return!1;for(const oe of we)if(oe in be&&"function"==typeof be[oe])return!0;return!1}(we,["next","error","complete"])?we:{next:we,error:oe,complete:he},void 0===ne.next&&(ne.next=wi),void 0===ne.error&&(ne.error=wi),void 0===ne.complete&&(ne.complete=wi);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Se}unsubscribeOne(we){void 0===this.observers||void 0===this.observers[we]||(delete this.observers[we],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(we){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,we)}sendOne(we,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[we])try{oe(this.observers[we])}catch(he){typeof console<"u"&&console.error&&console.error(he)}})}close(we){this.finalized||(this.finalized=!0,void 0!==we&&(this.finalError=we),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wi(){}const Br=function(be,we,oe,he){let ne;if(he<we?ne="at least "+we:he>oe&&(ne=0===oe?"none":"no more than "+oe),ne)throw new Error(be+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+ne+".")};function ui(be,we){return`${be} failed: ${we} argument `}function ci(be,we,oe,he){if((!he||oe)&&"function"!=typeof oe)throw new Error(ui(be,we)+"must be a valid function.")}function Xn(be,we,oe,he){if((!he||oe)&&("object"!=typeof oe||null===oe))throw new Error(ui(be,we)+"must be a valid context object.")}const Nr=function(be){const we=[];let oe=0;for(let he=0;he<be.length;he++){let ne=be.charCodeAt(he);if(ne>=55296&&ne<=56319){const Se=ne-55296;he++,te(he<be.length,"Surrogate pair missing trail surrogate."),ne=65536+(Se<<10)+(be.charCodeAt(he)-56320)}ne<128?we[oe++]=ne:ne<2048?(we[oe++]=ne>>6|192,we[oe++]=63&ne|128):ne<65536?(we[oe++]=ne>>12|224,we[oe++]=ne>>6&63|128,we[oe++]=63&ne|128):(we[oe++]=ne>>18|240,we[oe++]=ne>>12&63|128,we[oe++]=ne>>6&63|128,we[oe++]=63&ne|128)}return we},Cn=function(be){let we=0;for(let oe=0;oe<be.length;oe++){const he=be.charCodeAt(oe);he<128?we++:he<2048?we+=2:he>=55296&&he<=56319?(we+=4,oe++):we+=3}return we},qt=1e3,ri=2,Vr=144e5,Pi=.5;function mi(be,we=qt,oe=ri){const he=we*Math.pow(oe,be),ne=Math.round(Pi*he*(Math.random()-.5)*2);return Math.min(Vr,he+ne)}function yi(be){return be&&be._delegate?be._delegate:be}},3702:(rn,tt,G)=>{G.d(tt,{e:()=>$e});var v=G(5861),te=G(7158),j=G(4322),Pe=G(7579),Ce=G(4650),Fe=G(9051);let $e=(()=>{class ye{constructor(ce,ge){this.auth=ce,this.router=ge}emailSignIn(ce,ge){var Ne=this;return(0,v.Z)(function*(){(0,te.e5)(Ne.auth,ce,ge).then(at=>{Ne.user=at.user,Ne.gravarUsuario(Ne.user),Ne.router.navigate(["/todoapp"])}).catch(at=>{Ne.error=at})})()}googleSignIn(){var ce=this;return(0,v.Z)(function*(){(0,te.rh)(ce.auth,new j.hJ).then(ge=>{ce.user=ge.user,ce.gravarUsuario(ce.user),ce.router.navigate(["/todoapp"])}).catch(ge=>{ce.error=ge})})()}signOut(){var ce=this;return(0,v.Z)(function*(){yield ce.auth.signOut(),ce.router.navigate(["/"]),sessionStorage.clear(),ce.user=null})()}isLogged(){return!!sessionStorage.getItem("user")}gravarUsuario(ce){sessionStorage.setItem("user",JSON.stringify(ce))}getUser(){let ce=new Pe.x;return this.auth.onAuthStateChanged(ge=>{ge&&(this.user=ge,ce.next(ge))}),ce.asObservable()}get userLogged(){return this.user}}return ye.\u0275fac=function(ce){return new(ce||ye)(Ce.LFG(te.gx),Ce.LFG(Fe.F0))},ye.\u0275prov=Ce.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},5684:(rn,tt,G)=>{var v=G(1481),te=G(9051),j=G(4650),Pe=G(3702);let Ce=(()=>{class W{constructor(h,f){this.authService=h,this.router=f}canActivate(){let h=this.authService.isLogged();return h||this.router.navigate(["/"]),h}}return W.\u0275fac=function(h){return new(h||W)(j.LFG(Pe.e),j.LFG(te.F0))},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})();const Fe=[{path:"todoapp",loadChildren:()=>G.e(357).then(G.bind(G,2357)).then(W=>W.DashboadModule),canActivate:[Ce]},{path:"",loadChildren:()=>G.e(655).then(G.bind(G,2655)).then(W=>W.LoginModule)},{path:"**",redirectTo:"/"}];let $e=(()=>{class W{}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W}),W.\u0275inj=j.cJS({imports:[te.Bz.forRoot(Fe),te.Bz]}),W})(),ye=(()=>{class W{constructor(){this.title="task-angular"}}return W.\u0275fac=function(h){return new(h||W)},W.\u0275cmp=j.Xpm({type:W,selectors:[["app-root"]],decls:1,vars:0,template:function(h,f){1&h&&j._UZ(0,"router-outlet")},dependencies:[te.lC]}),W})();var qe=G(433),ce=G(3692),ge=G(4976),Ne=G(7158),at=G(259),gt=G(2313),Pt=G(2810);class jt{constructor(u){return u}}const ot="firestore",_t=new j.OlP("angularfire2.firestore-instances");function Oe(W){return(u,h)=>{const f=u.runOutsideAngular(()=>W(h));return new jt(f)}}const rt={provide:class mt{constructor(){return(0,ge.vb)(ot)}},deps:[[new j.FiY,_t]]},Dt={provide:jt,useFactory:function Ze(W,u){const h=(0,ge.JM)(ot,W,u);return h&&new jt(h)},deps:[[new j.FiY,_t],ce.Ot]};let lt=(()=>{class W{constructor(){(0,at.KN)("angularfire",ge.q4.full,"fst")}}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W}),W.\u0275inj=j.cJS({providers:[Dt,rt]}),W})();function q(W,...u){return{ngModule:lt,providers:[{provide:_t,useFactory:Oe(W),multi:!0,deps:[j.R0b,j.zs3,ge.HU,ce.z6,[new j.FiY,Ne.dh],[new j.FiY,gt.nm],...u]}]}}const Qn=(0,ge.u3)(Pt.ad,!0);var we=G(1205),oe=G(5197),he=G(2011);const ne={firebaseConfig:{apiKey:"AIzaSyB7SGEPnROILjRHEc3FXbFT_jndZCHeZ1E",authDomain:"angularmemorando.firebaseapp.com",databaseURL:"https://angularmemorando-default-rtdb.firebaseio.com",projectId:"angularmemorando",storageBucket:"angularmemorando.appspot.com",messagingSenderId:"988276496590",appId:"1:988276496590:web:b11d2ae472455bcf53d89f"},production:!1};var Se=G(7340);function ve(W){return new j.vHH(3e3,!1)}function Mn(){return typeof window<"u"&&typeof window.document<"u"}function Bn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Tn(W){switch(W.length){case 0:return new Se.ZN;case 1:return W[0];default:return new Se.ZE(W)}}function mr(W,u,h,f,I=new Map,S=new Map){const F=[],$=[];let le=-1,De=null;if(f.forEach(Je=>{const ft=Je.get("offset"),ln=ft==le,An=ln&&De||new Map;Je.forEach((Un,qn)=>{let Pr=qn,tr=Un;if("offset"!==qn)switch(Pr=u.normalizePropertyName(Pr,F),tr){case Se.k1:tr=I.get(qn);break;case Se.l3:tr=S.get(qn);break;default:tr=u.normalizeStyleValue(qn,Pr,tr,F)}An.set(Pr,tr)}),ln||$.push(An),De=An,le=ft}),F.length)throw function Kt(W){return new j.vHH(3502,!1)}();return $}function ns(W,u,h,f){switch(u){case"start":W.onStart(()=>f(h&&xi(h,"start",W)));break;case"done":W.onDone(()=>f(h&&xi(h,"done",W)));break;case"destroy":W.onDestroy(()=>f(h&&xi(h,"destroy",W)))}}function xi(W,u,h){const S=Yi(W.element,W.triggerName,W.fromState,W.toState,u||W.phaseName,h.totalTime??W.totalTime,!!h.disabled),F=W._data;return null!=F&&(S._data=F),S}function Yi(W,u,h,f,I="",S=0,F){return{element:W,triggerName:u,fromState:h,toState:f,phaseName:I,totalTime:S,disabled:!!F}}function Qr(W,u,h){let f=W.get(u);return f||W.set(u,f=h),f}function ii(W){const u=W.indexOf(":");return[W.substring(1,u),W.slice(u+1)]}let ms=(W,u)=>!1,ho=(W,u,h)=>[],yr=null;function wr(W){const u=W.parentNode||W.host;return u===yr?null:u}(Bn()||typeof Element<"u")&&(Mn()?(yr=(()=>document.documentElement)(),ms=(W,u)=>{for(;u;){if(u===W)return!0;u=wr(u)}return!1}):ms=(W,u)=>W.contains(u),ho=(W,u,h)=>{if(h)return Array.from(W.querySelectorAll(u));const f=W.querySelector(u);return f?[f]:[]});let Jn=null,Fo=!1;const jr=ms,sr=ho;let Xr=(()=>{class W{validateStyleProperty(h){return function Is(W){Jn||(Jn=function Cs(){return typeof document<"u"?document.body:null}()||{},Fo=!!Jn.style&&"WebkitAppearance"in Jn.style);let u=!0;return Jn.style&&!function cs(W){return"ebkit"==W.substring(1,6)}(W)&&(u=W in Jn.style,!u&&Fo&&(u="Webkit"+W.charAt(0).toUpperCase()+W.slice(1)in Jn.style)),u}(h)}matchesElement(h,f){return!1}containsElement(h,f){return jr(h,f)}getParentElement(h){return wr(h)}query(h,f,I){return sr(h,f,I)}computeStyle(h,f,I){return I||""}animate(h,f,I,S,F,$=[],le){return new Se.ZN(I,S)}}return W.\u0275fac=function(h){return new(h||W)},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac}),W})(),Bs=(()=>{class W{}return W.NOOP=new Xr,W})();const os=1e3,ao="ng-enter",po="ng-leave",zs="ng-trigger",Lo=".ng-trigger",Gs="ng-animating",eo=".ng-animating";function as(W){if("number"==typeof W)return W;const u=W.match(/^(-?[\.\d]+)(m?s)/);return!u||u.length<2?0:Ao(parseFloat(u[1]),u[2])}function Ao(W,u){return"s"===u?W*os:W}function xs(W,u,h){return W.hasOwnProperty("duration")?W:function Ro(W,u,h){let I,S=0,F="";if("string"==typeof W){const $=W.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===$)return u.push(ve()),{duration:0,delay:0,easing:""};I=Ao(parseFloat($[1]),$[2]);const le=$[3];null!=le&&(S=Ao(parseFloat(le),$[4]));const De=$[5];De&&(F=De)}else I=W;if(!h){let $=!1,le=u.length;I<0&&(u.push(function pe(){return new j.vHH(3100,!1)}()),$=!0),S<0&&(u.push(function Le(){return new j.vHH(3101,!1)}()),$=!0),$&&u.splice(le,0,ve())}return{duration:I,delay:S,easing:F}}(W,u,h)}function $s(W,u={}){return Object.keys(W).forEach(h=>{u[h]=W[h]}),u}function Ms(W){const u=new Map;return Object.keys(W).forEach(h=>{u.set(h,W[h])}),u}function Ee(W,u=new Map,h){if(h)for(let[f,I]of h)u.set(f,I);for(let[f,I]of W)u.set(f,I);return u}function Me(W,u,h){return h?u+":"+h+";":""}function He(W){let u="";for(let h=0;h<W.style.length;h++){const f=W.style.item(h);u+=Me(0,f,W.style.getPropertyValue(f))}for(const h in W.style)W.style.hasOwnProperty(h)&&!h.startsWith("_")&&(u+=Me(0,Rr(h),W.style[h]));W.setAttribute("style",u)}function pt(W,u,h){W.style&&(u.forEach((f,I)=>{const S=Jr(I);h&&!h.has(I)&&h.set(I,W.style[S]),W.style[S]=f}),Bn()&&He(W))}function Ot(W,u){W.style&&(u.forEach((h,f)=>{const I=Jr(f);W.style[I]=""}),Bn()&&He(W))}function vn(W){return Array.isArray(W)?1==W.length?W[0]:(0,Se.vP)(W):W}const er=new RegExp("{{\\s*(.+?)\\s*}}","g");function _r(W){let u=[];if("string"==typeof W){let h;for(;h=er.exec(W);)u.push(h[1]);er.lastIndex=0}return u}function Hr(W,u,h){const f=W.toString(),I=f.replace(er,(S,F)=>{let $=u[F];return null==$&&(h.push(function St(W){return new j.vHH(3003,!1)}()),$=""),$.toString()});return I==f?W:I}function Ti(W){const u=[];let h=W.next();for(;!h.done;)u.push(h.value),h=W.next();return u}const di=/-+([a-z0-9])/g;function Jr(W){return W.replace(di,(...u)=>u[1].toUpperCase())}function Rr(W){return W.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function pr(W,u,h){switch(u.type){case 7:return W.visitTrigger(u,h);case 0:return W.visitState(u,h);case 1:return W.visitTransition(u,h);case 2:return W.visitSequence(u,h);case 3:return W.visitGroup(u,h);case 4:return W.visitAnimate(u,h);case 5:return W.visitKeyframes(u,h);case 6:return W.visitStyle(u,h);case 8:return W.visitReference(u,h);case 9:return W.visitAnimateChild(u,h);case 10:return W.visitAnimateRef(u,h);case 11:return W.visitQuery(u,h);case 12:return W.visitStagger(u,h);default:throw function mn(W){return new j.vHH(3004,!1)}()}}function Si(W,u){return window.getComputedStyle(W)[u]}const Oi="*";function go(W,u){const h=[];return"string"==typeof W?W.split(/\s*,\s*/).forEach(f=>function _s(W,u,h){if(":"==W[0]){const le=function ar(W,u){switch(W){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(h,f)=>parseFloat(f)>parseFloat(h);case":decrement":return(h,f)=>parseFloat(f)<parseFloat(h);default:return u.push(function Js(W){return new j.vHH(3016,!1)}()),"* => *"}}(W,h);if("function"==typeof le)return void u.push(le);W=le}const f=W.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==f||f.length<4)return h.push(function _i(W){return new j.vHH(3015,!1)}()),u;const I=f[1],S=f[2],F=f[3];u.push(aa(I,F));"<"==S[0]&&!(I==Oi&&F==Oi)&&u.push(aa(F,I))}(f,h,u)):h.push(W),h}const vs=new Set(["true","1"]),Kn=new Set(["false","0"]);function aa(W,u){const h=vs.has(W)||Kn.has(W),f=vs.has(u)||Kn.has(u);return(I,S)=>{let F=W==Oi||W==I,$=u==Oi||u==S;return!F&&h&&"boolean"==typeof I&&(F=I?vs.has(W):Kn.has(W)),!$&&f&&"boolean"==typeof S&&($=S?vs.has(u):Kn.has(u)),F&&$}}const la=new RegExp("s*:selfs*,?","g");function to(W,u,h,f){return new La(W).build(u,h,f)}class La{constructor(u){this._driver=u}build(u,h,f){const I=new x(h);return this._resetContextStyleTimingState(I),pr(this,vn(u),I)}_resetContextStyleTimingState(u){u.currentQuerySelector="",u.collectedStyles=new Map,u.collectedStyles.set("",new Map),u.currentTime=0}visitTrigger(u,h){let f=h.queryCount=0,I=h.depCount=0;const S=[],F=[];return"@"==u.name.charAt(0)&&h.errors.push(function xr(){return new j.vHH(3006,!1)}()),u.definitions.forEach($=>{if(this._resetContextStyleTimingState(h),0==$.type){const le=$,De=le.name;De.toString().split(/\s*,\s*/).forEach(Je=>{le.name=Je,S.push(this.visitState(le,h))}),le.name=De}else if(1==$.type){const le=this.visitTransition($,h);f+=le.queryCount,I+=le.depCount,F.push(le)}else h.errors.push(function Li(){return new j.vHH(3007,!1)}())}),{type:7,name:u.name,states:S,transitions:F,queryCount:f,depCount:I,options:null}}visitState(u,h){const f=this.visitStyle(u.styles,h),I=u.options&&u.options.params||null;if(f.containsDynamicStyles){const S=new Set,F=I||{};f.styles.forEach($=>{$ instanceof Map&&$.forEach(le=>{_r(le).forEach(De=>{F.hasOwnProperty(De)||S.add(De)})})}),S.size&&(Ti(S.values()),h.errors.push(function ht(W,u){return new j.vHH(3008,!1)}()))}return{type:0,name:u.name,style:f,options:I?{params:I}:null}}visitTransition(u,h){h.queryCount=0,h.depCount=0;const f=pr(this,vn(u.animation),h);return{type:1,matchers:go(u.expr,h.errors),animation:f,queryCount:h.queryCount,depCount:h.depCount,options:re(u.options)}}visitSequence(u,h){return{type:2,steps:u.steps.map(f=>pr(this,f,h)),options:re(u.options)}}visitGroup(u,h){const f=h.currentTime;let I=0;const S=u.steps.map(F=>{h.currentTime=f;const $=pr(this,F,h);return I=Math.max(I,h.currentTime),$});return h.currentTime=I,{type:3,steps:S,options:re(u.options)}}visitAnimate(u,h){const f=function L(W,u){if(W.hasOwnProperty("duration"))return W;if("number"==typeof W)return Xe(xs(W,u).duration,0,"");const h=W;if(h.split(/\s+/).some(S=>"{"==S.charAt(0)&&"{"==S.charAt(1))){const S=Xe(0,0,"");return S.dynamic=!0,S.strValue=h,S}const I=xs(h,u);return Xe(I.duration,I.delay,I.easing)}(u.timings,h.errors);h.currentAnimateTimings=f;let I,S=u.styles?u.styles:(0,Se.oB)({});if(5==S.type)I=this.visitKeyframes(S,h);else{let F=u.styles,$=!1;if(!F){$=!0;const De={};f.easing&&(De.easing=f.easing),F=(0,Se.oB)(De)}h.currentTime+=f.duration+f.delay;const le=this.visitStyle(F,h);le.isEmptyStep=$,I=le}return h.currentAnimateTimings=null,{type:4,timings:f,style:I,options:null}}visitStyle(u,h){const f=this._makeStyleAst(u,h);return this._validateStyleAst(f,h),f}_makeStyleAst(u,h){const f=[],I=Array.isArray(u.styles)?u.styles:[u.styles];for(let $ of I)"string"==typeof $?$===Se.l3?f.push($):h.errors.push(new j.vHH(3002,!1)):f.push(Ms($));let S=!1,F=null;return f.forEach($=>{if($ instanceof Map&&($.has("easing")&&(F=$.get("easing"),$.delete("easing")),!S))for(let le of $.values())if(le.toString().indexOf("{{")>=0){S=!0;break}}),{type:6,styles:f,easing:F,offset:u.offset,containsDynamicStyles:S,options:null}}_validateStyleAst(u,h){const f=h.currentAnimateTimings;let I=h.currentTime,S=h.currentTime;f&&S>0&&(S-=f.duration+f.delay),u.styles.forEach(F=>{"string"!=typeof F&&F.forEach(($,le)=>{const De=h.collectedStyles.get(h.currentQuerySelector),Je=De.get(le);let ft=!0;Je&&(S!=I&&S>=Je.startTime&&I<=Je.endTime&&(h.errors.push(function pn(W,u,h,f,I){return new j.vHH(3010,!1)}()),ft=!1),S=Je.startTime),ft&&De.set(le,{startTime:S,endTime:I}),h.options&&function tn(W,u,h){const f=u.params||{},I=_r(W);I.length&&I.forEach(S=>{f.hasOwnProperty(S)||h.push(function nt(W){return new j.vHH(3001,!1)}())})}($,h.options,h.errors)})})}visitKeyframes(u,h){const f={type:5,styles:[],options:null};if(!h.currentAnimateTimings)return h.errors.push(function Pn(){return new j.vHH(3011,!1)}()),f;let S=0;const F=[];let $=!1,le=!1,De=0;const Je=u.steps.map(tr=>{const Bi=this._makeStyleAst(tr,h);let Xi=null!=Bi.offset?Bi.offset:function B(W){if("string"==typeof W)return null;let u=null;if(Array.isArray(W))W.forEach(h=>{if(h instanceof Map&&h.has("offset")){const f=h;u=parseFloat(f.get("offset")),f.delete("offset")}});else if(W instanceof Map&&W.has("offset")){const h=W;u=parseFloat(h.get("offset")),h.delete("offset")}return u}(Bi.styles),Vs=0;return null!=Xi&&(S++,Vs=Bi.offset=Xi),le=le||Vs<0||Vs>1,$=$||Vs<De,De=Vs,F.push(Vs),Bi});le&&h.errors.push(function ir(){return new j.vHH(3012,!1)}()),$&&h.errors.push(function gn(){return new j.vHH(3200,!1)}());const ft=u.steps.length;let ln=0;S>0&&S<ft?h.errors.push(function Cr(){return new j.vHH(3202,!1)}()):0==S&&(ln=1/(ft-1));const An=ft-1,Un=h.currentTime,qn=h.currentAnimateTimings,Pr=qn.duration;return Je.forEach((tr,Bi)=>{const Xi=ln>0?Bi==An?1:ln*Bi:F[Bi],Vs=Xi*Pr;h.currentTime=Un+qn.delay+Vs,qn.duration=Vs,this._validateStyleAst(tr,h),tr.offset=Xi,f.styles.push(tr)}),f}visitReference(u,h){return{type:8,animation:pr(this,vn(u.animation),h),options:re(u.options)}}visitAnimateChild(u,h){return h.depCount++,{type:9,options:re(u.options)}}visitAnimateRef(u,h){return{type:10,animation:this.visitReference(u.animation,h),options:re(u.options)}}visitQuery(u,h){const f=h.currentQuerySelector,I=u.options||{};h.queryCount++,h.currentQuery=u;const[S,F]=function No(W){const u=!!W.split(/\s*,\s*/).find(h=>":self"==h);return u&&(W=W.replace(la,"")),W=W.replace(/@\*/g,Lo).replace(/@\w+/g,h=>Lo+"-"+h.slice(1)).replace(/:animating/g,eo),[W,u]}(u.selector);h.currentQuerySelector=f.length?f+" "+S:S,Qr(h.collectedStyles,h.currentQuerySelector,new Map);const $=pr(this,vn(u.animation),h);return h.currentQuery=null,h.currentQuerySelector=f,{type:11,selector:S,limit:I.limit||0,optional:!!I.optional,includeSelf:F,animation:$,originalSelector:u.selector,options:re(u.options)}}visitStagger(u,h){h.currentQuery||h.errors.push(function vr(){return new j.vHH(3013,!1)}());const f="full"===u.timings?{duration:0,delay:0,easing:"full"}:xs(u.timings,h.errors,!0);return{type:12,animation:pr(this,vn(u.animation),h),timings:f,options:null}}}class x{constructor(u){this.errors=u,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function re(W){return W?(W=$s(W)).params&&(W.params=function Vo(W){return W?$s(W):null}(W.params)):W={},W}function Xe(W,u,h){return{duration:W,delay:u,easing:h}}function dn(W,u,h,f,I,S,F=null,$=!1){return{type:1,element:W,keyframes:u,preStyleProps:h,postStyleProps:f,duration:I,delay:S,totalTime:I+S,easing:F,subTimeline:$}}class Gr{constructor(){this._map=new Map}get(u){return this._map.get(u)||[]}append(u,h){let f=this._map.get(u);f||this._map.set(u,f=[]),f.push(...h)}has(u){return this._map.has(u)}clear(){this._map.clear()}}const Ws=new RegExp(":enter","g"),Ds=new RegExp(":leave","g");function Ks(W,u,h,f,I,S=new Map,F=new Map,$,le,De=[]){return(new Es).buildKeyframes(W,u,h,f,I,S,F,$,le,De)}class Es{buildKeyframes(u,h,f,I,S,F,$,le,De,Je=[]){De=De||new Gr;const ft=new xo(u,h,De,I,S,Je,[]);ft.options=le;const ln=le.delay?as(le.delay):0;ft.currentTimeline.delayNextStep(ln),ft.currentTimeline.setStyles([F],null,ft.errors,le),pr(this,f,ft);const An=ft.timelines.filter(Un=>Un.containsAnimation());if(An.length&&$.size){let Un;for(let qn=An.length-1;qn>=0;qn--){const Pr=An[qn];if(Pr.element===h){Un=Pr;break}}Un&&!Un.allowOnlyTimelineStyles()&&Un.setStyles([$],null,ft.errors,le)}return An.length?An.map(Un=>Un.buildKeyframes()):[dn(h,[],[],[],0,ln,"",!1)]}visitTrigger(u,h){}visitState(u,h){}visitTransition(u,h){}visitAnimateChild(u,h){const f=h.subInstructions.get(h.element);if(f){const I=h.createSubContext(u.options),S=h.currentTimeline.currentTime,F=this._visitSubInstructions(f,I,I.options);S!=F&&h.transformIntoNewTimeline(F)}h.previousNode=u}visitAnimateRef(u,h){const f=h.createSubContext(u.options);f.transformIntoNewTimeline(),this._applyAnimationRefDelays([u.options,u.animation.options],h,f),this.visitReference(u.animation,f),h.transformIntoNewTimeline(f.currentTimeline.currentTime),h.previousNode=u}_applyAnimationRefDelays(u,h,f){for(const I of u){const S=I?.delay;if(S){const F="number"==typeof S?S:as(Hr(S,I?.params??{},h.errors));f.delayNextStep(F)}}}_visitSubInstructions(u,h,f){let S=h.currentTimeline.currentTime;const F=null!=f.duration?as(f.duration):null,$=null!=f.delay?as(f.delay):null;return 0!==F&&u.forEach(le=>{const De=h.appendInstructionToTimeline(le,F,$);S=Math.max(S,De.duration+De.delay)}),S}visitReference(u,h){h.updateOptions(u.options,!0),pr(this,u.animation,h),h.previousNode=u}visitSequence(u,h){const f=h.subContextCount;let I=h;const S=u.options;if(S&&(S.params||S.delay)&&(I=h.createSubContext(S),I.transformIntoNewTimeline(),null!=S.delay)){6==I.previousNode.type&&(I.currentTimeline.snapshotCurrentStyles(),I.previousNode=Ps);const F=as(S.delay);I.delayNextStep(F)}u.steps.length&&(u.steps.forEach(F=>pr(this,F,I)),I.currentTimeline.applyStylesToKeyframe(),I.subContextCount>f&&I.transformIntoNewTimeline()),h.previousNode=u}visitGroup(u,h){const f=[];let I=h.currentTimeline.currentTime;const S=u.options&&u.options.delay?as(u.options.delay):0;u.steps.forEach(F=>{const $=h.createSubContext(u.options);S&&$.delayNextStep(S),pr(this,F,$),I=Math.max(I,$.currentTimeline.currentTime),f.push($.currentTimeline)}),f.forEach(F=>h.currentTimeline.mergeTimelineCollectedStyles(F)),h.transformIntoNewTimeline(I),h.previousNode=u}_visitTiming(u,h){if(u.dynamic){const f=u.strValue;return xs(h.params?Hr(f,h.params,h.errors):f,h.errors)}return{duration:u.duration,delay:u.delay,easing:u.easing}}visitAnimate(u,h){const f=h.currentAnimateTimings=this._visitTiming(u.timings,h),I=h.currentTimeline;f.delay&&(h.incrementTime(f.delay),I.snapshotCurrentStyles());const S=u.style;5==S.type?this.visitKeyframes(S,h):(h.incrementTime(f.duration),this.visitStyle(S,h),I.applyStylesToKeyframe()),h.currentAnimateTimings=null,h.previousNode=u}visitStyle(u,h){const f=h.currentTimeline,I=h.currentAnimateTimings;!I&&f.hasCurrentStyleProperties()&&f.forwardFrame();const S=I&&I.easing||u.easing;u.isEmptyStep?f.applyEmptyStep(S):f.setStyles(u.styles,S,h.errors,h.options),h.previousNode=u}visitKeyframes(u,h){const f=h.currentAnimateTimings,I=h.currentTimeline.duration,S=f.duration,$=h.createSubContext().currentTimeline;$.easing=f.easing,u.styles.forEach(le=>{$.forwardTime((le.offset||0)*S),$.setStyles(le.styles,le.easing,h.errors,h.options),$.applyStylesToKeyframe()}),h.currentTimeline.mergeTimelineCollectedStyles($),h.transformIntoNewTimeline(I+S),h.previousNode=u}visitQuery(u,h){const f=h.currentTimeline.currentTime,I=u.options||{},S=I.delay?as(I.delay):0;S&&(6===h.previousNode.type||0==f&&h.currentTimeline.hasCurrentStyleProperties())&&(h.currentTimeline.snapshotCurrentStyles(),h.previousNode=Ps);let F=f;const $=h.invokeQuery(u.selector,u.originalSelector,u.limit,u.includeSelf,!!I.optional,h.errors);h.currentQueryTotal=$.length;let le=null;$.forEach((De,Je)=>{h.currentQueryIndex=Je;const ft=h.createSubContext(u.options,De);S&&ft.delayNextStep(S),De===h.element&&(le=ft.currentTimeline),pr(this,u.animation,ft),ft.currentTimeline.applyStylesToKeyframe(),F=Math.max(F,ft.currentTimeline.currentTime)}),h.currentQueryIndex=0,h.currentQueryTotal=0,h.transformIntoNewTimeline(F),le&&(h.currentTimeline.mergeTimelineCollectedStyles(le),h.currentTimeline.snapshotCurrentStyles()),h.previousNode=u}visitStagger(u,h){const f=h.parentContext,I=h.currentTimeline,S=u.timings,F=Math.abs(S.duration),$=F*(h.currentQueryTotal-1);let le=F*h.currentQueryIndex;switch(S.duration<0?"reverse":S.easing){case"reverse":le=$-le;break;case"full":le=f.currentStaggerTime}const Je=h.currentTimeline;le&&Je.delayNextStep(le);const ft=Je.currentTime;pr(this,u.animation,h),h.previousNode=u,f.currentStaggerTime=I.currentTime-ft+(I.startTime-f.currentTimeline.startTime)}}const Ps={};class xo{constructor(u,h,f,I,S,F,$,le){this._driver=u,this.element=h,this.subInstructions=f,this._enterClassName=I,this._leaveClassName=S,this.errors=F,this.timelines=$,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ps,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=le||new qs(this._driver,h,0),$.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(u,h){if(!u)return;const f=u;let I=this.options;null!=f.duration&&(I.duration=as(f.duration)),null!=f.delay&&(I.delay=as(f.delay));const S=f.params;if(S){let F=I.params;F||(F=this.options.params={}),Object.keys(S).forEach($=>{(!h||!F.hasOwnProperty($))&&(F[$]=Hr(S[$],F,this.errors))})}}_copyOptions(){const u={};if(this.options){const h=this.options.params;if(h){const f=u.params={};Object.keys(h).forEach(I=>{f[I]=h[I]})}}return u}createSubContext(u=null,h,f){const I=h||this.element,S=new xo(this._driver,I,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(I,f||0));return S.previousNode=this.previousNode,S.currentAnimateTimings=this.currentAnimateTimings,S.options=this._copyOptions(),S.updateOptions(u),S.currentQueryIndex=this.currentQueryIndex,S.currentQueryTotal=this.currentQueryTotal,S.parentContext=this,this.subContextCount++,S}transformIntoNewTimeline(u){return this.previousNode=Ps,this.currentTimeline=this.currentTimeline.fork(this.element,u),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(u,h,f){const I={duration:h??u.duration,delay:this.currentTimeline.currentTime+(f??0)+u.delay,easing:""},S=new yo(this._driver,u.element,u.keyframes,u.preStyleProps,u.postStyleProps,I,u.stretchStartingKeyframe);return this.timelines.push(S),I}incrementTime(u){this.currentTimeline.forwardTime(this.currentTimeline.duration+u)}delayNextStep(u){u>0&&this.currentTimeline.delayNextStep(u)}invokeQuery(u,h,f,I,S,F){let $=[];if(I&&$.push(this.element),u.length>0){u=(u=u.replace(Ws,"."+this._enterClassName)).replace(Ds,"."+this._leaveClassName);let De=this._driver.query(this.element,u,1!=f);0!==f&&(De=f<0?De.slice(De.length+f,De.length):De.slice(0,f)),$.push(...De)}return!S&&0==$.length&&F.push(function Zi(W){return new j.vHH(3014,!1)}()),$}}class qs{constructor(u,h,f,I){this._driver=u,this.element=h,this.startTime=f,this._elementTimelineStylesLookup=I,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(h),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(h,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(u){const h=1===this._keyframes.size&&this._pendingStyles.size;this.duration||h?(this.forwardTime(this.currentTime+u),h&&this.snapshotCurrentStyles()):this.startTime+=u}fork(u,h){return this.applyStylesToKeyframe(),new qs(this._driver,u,h||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(u){this.applyStylesToKeyframe(),this.duration=u,this._loadKeyframe()}_updateStyle(u,h){this._localTimelineStyles.set(u,h),this._globalTimelineStyles.set(u,h),this._styleSummary.set(u,{time:this.currentTime,value:h})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(u){u&&this._previousKeyframe.set("easing",u);for(let[h,f]of this._globalTimelineStyles)this._backFill.set(h,f||Se.l3),this._currentKeyframe.set(h,Se.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(u,h,f,I){h&&this._previousKeyframe.set("easing",h);const S=I&&I.params||{},F=function _o(W,u){const h=new Map;let f;return W.forEach(I=>{if("*"===I){f=f||u.keys();for(let S of f)h.set(S,Se.l3)}else Ee(I,h)}),h}(u,this._globalTimelineStyles);for(let[$,le]of F){const De=Hr(le,S,f);this._pendingStyles.set($,De),this._localTimelineStyles.has($)||this._backFill.set($,this._globalTimelineStyles.get($)??Se.l3),this._updateStyle($,De)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((u,h)=>{this._currentKeyframe.set(h,u)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((u,h)=>{this._currentKeyframe.has(h)||this._currentKeyframe.set(h,u)}))}snapshotCurrentStyles(){for(let[u,h]of this._localTimelineStyles)this._pendingStyles.set(u,h),this._updateStyle(u,h)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const u=[];for(let h in this._currentKeyframe)u.push(h);return u}mergeTimelineCollectedStyles(u){u._styleSummary.forEach((h,f)=>{const I=this._styleSummary.get(f);(!I||h.time>I.time)&&this._updateStyle(f,h.value)})}buildKeyframes(){this.applyStylesToKeyframe();const u=new Set,h=new Set,f=1===this._keyframes.size&&0===this.duration;let I=[];this._keyframes.forEach(($,le)=>{const De=Ee($,new Map,this._backFill);De.forEach((Je,ft)=>{Je===Se.k1?u.add(ft):Je===Se.l3&&h.add(ft)}),f||De.set("offset",le/this.duration),I.push(De)});const S=u.size?Ti(u.values()):[],F=h.size?Ti(h.values()):[];if(f){const $=I[0],le=new Map($);$.set("offset",0),le.set("offset",1),I=[$,le]}return dn(this.element,I,S,F,this.duration,this.startTime,this.easing,!1)}}class yo extends qs{constructor(u,h,f,I,S,F,$=!1){super(u,h,F.delay),this.keyframes=f,this.preStyleProps=I,this.postStyleProps=S,this._stretchStartingKeyframe=$,this.timings={duration:F.duration,delay:F.delay,easing:F.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let u=this.keyframes,{delay:h,duration:f,easing:I}=this.timings;if(this._stretchStartingKeyframe&&h){const S=[],F=f+h,$=h/F,le=Ee(u[0]);le.set("offset",0),S.push(le);const De=Ee(u[0]);De.set("offset",Os($)),S.push(De);const Je=u.length-1;for(let ft=1;ft<=Je;ft++){let ln=Ee(u[ft]);const An=ln.get("offset");ln.set("offset",Os((h+An*f)/F)),S.push(ln)}f=F,h=0,I="",u=S}return dn(this.element,u,this.preStyleProps,this.postStyleProps,f,h,I,!0)}}function Os(W,u=3){const h=Math.pow(10,u-1);return Math.round(W*h)/h}class Qo{}const Zs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ua extends Qo{normalizePropertyName(u,h){return Jr(u)}normalizeStyleValue(u,h,f,I){let S="";const F=f.toString().trim();if(Zs.has(h)&&0!==f&&"0"!==f)if("number"==typeof f)S="px";else{const $=f.match(/^[+-]?[\d\.]+([a-z]*)$/);$&&0==$[1].length&&I.push(function Dn(W,u){return new j.vHH(3005,!1)}())}return F+S}}function hi(W,u,h,f,I,S,F,$,le,De,Je,ft,ln){return{type:0,element:W,triggerName:u,isRemovalTransition:I,fromState:h,fromStyles:S,toState:f,toStyles:F,timelines:$,queriedElements:le,preStyleProps:De,postStyleProps:Je,totalTime:ft,errors:ln}}const ca={};class Qa{constructor(u,h,f){this._triggerName=u,this.ast=h,this._stateStyles=f}match(u,h,f,I){return function Va(W,u,h,f,I){return W.some(S=>S(u,h,f,I))}(this.ast.matchers,u,h,f,I)}buildStyles(u,h,f){let I=this._stateStyles.get("*");return void 0!==u&&(I=this._stateStyles.get(u?.toString())||I),I?I.buildStyles(h,f):new Map}build(u,h,f,I,S,F,$,le,De,Je){const ft=[],ln=this.ast.options&&this.ast.options.params||ca,Un=this.buildStyles(f,$&&$.params||ca,ft),qn=le&&le.params||ca,Pr=this.buildStyles(I,qn,ft),tr=new Set,Bi=new Map,Xi=new Map,Vs="void"===I,Ii={params:da(qn,ln),delay:this.ast.options?.delay},lo=Je?[]:Ks(u,h,this.ast.animation,S,F,Un,Pr,Ii,De,ft);let fi=0;if(lo.forEach(Wa=>{fi=Math.max(Wa.duration+Wa.delay,fi)}),ft.length)return hi(h,this._triggerName,f,I,Vs,Un,Pr,[],[],Bi,Xi,fi,ft);lo.forEach(Wa=>{const ko=Wa.element,uo=Qr(Bi,ko,new Set);Wa.preStyleProps.forEach(hl=>uo.add(hl));const Sl=Qr(Xi,ko,new Set);Wa.postStyleProps.forEach(hl=>Sl.add(hl)),ko!==h&&tr.add(ko)});const Ei=Ti(tr.values());return hi(h,this._triggerName,f,I,Vs,Un,Pr,lo,Ei,Bi,Xi,fi)}}function da(W,u){const h=$s(u);for(const f in W)W.hasOwnProperty(f)&&null!=W[f]&&(h[f]=W[f]);return h}class vo{constructor(u,h,f){this.styles=u,this.defaultParams=h,this.normalizer=f}buildStyles(u,h){const f=new Map,I=$s(this.defaultParams);return Object.keys(u).forEach(S=>{const F=u[S];null!==F&&(I[S]=F)}),this.styles.styles.forEach(S=>{"string"!=typeof S&&S.forEach((F,$)=>{F&&(F=Hr(F,I,h));const le=this.normalizer.normalizePropertyName($,h);F=this.normalizer.normalizeStyleValue($,le,F,h),f.set($,F)})}),f}}class Ea{constructor(u,h,f){this.name=u,this.ast=h,this._normalizer=f,this.transitionFactories=[],this.states=new Map,h.states.forEach(I=>{this.states.set(I.name,new vo(I.style,I.options&&I.options.params||{},f))}),hs(this.states,"true","1"),hs(this.states,"false","0"),h.transitions.forEach(I=>{this.transitionFactories.push(new Qa(u,I,this.states))}),this.fallbackTransition=function Ss(W,u,h){return new Qa(W,{type:1,animation:{type:2,steps:[],options:null},matchers:[(F,$)=>!0],options:null,queryCount:0,depCount:0},u)}(u,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(u,h,f,I){return this.transitionFactories.find(F=>F.match(u,h,f,I))||null}matchStyles(u,h,f){return this.fallbackTransition.buildStyles(u,h,f)}}function hs(W,u,h){W.has(u)?W.has(h)||W.set(h,W.get(u)):W.has(h)&&W.set(u,W.get(h))}const Or=new Gr;class js{constructor(u,h,f){this.bodyNode=u,this._driver=h,this._normalizer=f,this._animations=new Map,this._playersById=new Map,this.players=[]}register(u,h){const f=[],I=[],S=to(this._driver,h,f,I);if(f.length)throw function jn(W){return new j.vHH(3503,!1)}();this._animations.set(u,S)}_buildPlayer(u,h,f){const I=u.element,S=mr(0,this._normalizer,0,u.keyframes,h,f);return this._driver.animate(I,S,u.duration,u.delay,u.easing,[],!0)}create(u,h,f={}){const I=[],S=this._animations.get(u);let F;const $=new Map;if(S?(F=Ks(this._driver,h,S,ao,po,new Map,new Map,f,Or,I),F.forEach(Je=>{const ft=Qr($,Je.element,new Map);Je.postStyleProps.forEach(ln=>ft.set(ln,null))})):(I.push(function Zr(){return new j.vHH(3300,!1)}()),F=[]),I.length)throw function $r(W){return new j.vHH(3504,!1)}();$.forEach((Je,ft)=>{Je.forEach((ln,An)=>{Je.set(An,this._driver.computeStyle(ft,An,Se.l3))})});const De=Tn(F.map(Je=>{const ft=$.get(Je.element);return this._buildPlayer(Je,new Map,ft)}));return this._playersById.set(u,De),De.onDestroy(()=>this.destroy(u)),this.players.push(De),De}destroy(u){const h=this._getPlayer(u);h.destroy(),this._playersById.delete(u);const f=this.players.indexOf(h);f>=0&&this.players.splice(f,1)}_getPlayer(u){const h=this._playersById.get(u);if(!h)throw function $i(W){return new j.vHH(3301,!1)}();return h}listen(u,h,f,I){const S=Yi(h,"","","");return ns(this._getPlayer(u),f,S,I),()=>{}}command(u,h,f,I){if("register"==f)return void this.register(u,I[0]);if("create"==f)return void this.create(u,h,I[0]||{});const S=this._getPlayer(u);switch(f){case"play":S.play();break;case"pause":S.pause();break;case"reset":S.reset();break;case"restart":S.restart();break;case"finish":S.finish();break;case"init":S.init();break;case"setPosition":S.setPosition(parseFloat(I[0]));break;case"destroy":this.destroy(u)}}}const ki="ng-animate-queued",$o="ng-animate-disabled",Ol=[],Jo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ha={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},no="__ng_removed";class N{get params(){return this.options.params}constructor(u,h=""){this.namespaceId=h;const f=u&&u.hasOwnProperty("value");if(this.value=function Wt(W){return W??null}(f?u.value:u),f){const S=$s(u);delete S.value,this.options=S}else this.options={};this.options.params||(this.options.params={})}absorbOptions(u){const h=u.params;if(h){const f=this.options.params;Object.keys(h).forEach(I=>{null==f[I]&&(f[I]=h[I])})}}}const K="void",V=new N(K);class ie{constructor(u,h,f){this.id=u,this.hostElement=h,this._engine=f,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+u,On(h,this._hostClassName)}listen(u,h,f,I){if(!this._triggers.has(h))throw function ji(W,u){return new j.vHH(3302,!1)}();if(null==f||0==f.length)throw function Hs(W){return new j.vHH(3303,!1)}();if(!function dr(W){return"start"==W||"done"==W}(f))throw function Yr(W,u){return new j.vHH(3400,!1)}();const S=Qr(this._elementListeners,u,[]),F={name:h,phase:f,callback:I};S.push(F);const $=Qr(this._engine.statesByElement,u,new Map);return $.has(h)||(On(u,zs),On(u,zs+"-"+h),$.set(h,V)),()=>{this._engine.afterFlush(()=>{const le=S.indexOf(F);le>=0&&S.splice(le,1),this._triggers.has(h)||$.delete(h)})}}register(u,h){return!this._triggers.has(u)&&(this._triggers.set(u,h),!0)}_getTrigger(u){const h=this._triggers.get(u);if(!h)throw function Ge(W){return new j.vHH(3401,!1)}();return h}trigger(u,h,f,I=!0){const S=this._getTrigger(h),F=new ut(this.id,h,u);let $=this._engine.statesByElement.get(u);$||(On(u,zs),On(u,zs+"-"+h),this._engine.statesByElement.set(u,$=new Map));let le=$.get(h);const De=new N(f,this.id);if(!(f&&f.hasOwnProperty("value"))&&le&&De.absorbOptions(le.options),$.set(h,De),le||(le=V),De.value!==K&&le.value===De.value){if(!function ks(W,u){const h=Object.keys(W),f=Object.keys(u);if(h.length!=f.length)return!1;for(let I=0;I<h.length;I++){const S=h[I];if(!u.hasOwnProperty(S)||W[S]!==u[S])return!1}return!0}(le.params,De.params)){const qn=[],Pr=S.matchStyles(le.value,le.params,qn),tr=S.matchStyles(De.value,De.params,qn);qn.length?this._engine.reportError(qn):this._engine.afterFlush(()=>{Ot(u,Pr),pt(u,tr)})}return}const ln=Qr(this._engine.playersByElement,u,[]);ln.forEach(qn=>{qn.namespaceId==this.id&&qn.triggerName==h&&qn.queued&&qn.destroy()});let An=S.matchTransition(le.value,De.value,u,De.params),Un=!1;if(!An){if(!I)return;An=S.fallbackTransition,Un=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:h,transition:An,fromState:le,toState:De,player:F,isFallbackTransition:Un}),Un||(On(u,ki),F.onStart(()=>{si(u,ki)})),F.onDone(()=>{let qn=this.players.indexOf(F);qn>=0&&this.players.splice(qn,1);const Pr=this._engine.playersByElement.get(u);if(Pr){let tr=Pr.indexOf(F);tr>=0&&Pr.splice(tr,1)}}),this.players.push(F),ln.push(F),F}deregister(u){this._triggers.delete(u),this._engine.statesByElement.forEach(h=>h.delete(u)),this._elementListeners.forEach((h,f)=>{this._elementListeners.set(f,h.filter(I=>I.name!=u))})}clearElementCache(u){this._engine.statesByElement.delete(u),this._elementListeners.delete(u);const h=this._engine.playersByElement.get(u);h&&(h.forEach(f=>f.destroy()),this._engine.playersByElement.delete(u))}_signalRemovalForInnerTriggers(u,h){const f=this._engine.driver.query(u,Lo,!0);f.forEach(I=>{if(I[no])return;const S=this._engine.fetchNamespacesByElement(I);S.size?S.forEach(F=>F.triggerLeaveAnimation(I,h,!1,!0)):this.clearElementCache(I)}),this._engine.afterFlushAnimationsDone(()=>f.forEach(I=>this.clearElementCache(I)))}triggerLeaveAnimation(u,h,f,I){const S=this._engine.statesByElement.get(u),F=new Map;if(S){const $=[];if(S.forEach((le,De)=>{if(F.set(De,le.value),this._triggers.has(De)){const Je=this.trigger(u,De,K,I);Je&&$.push(Je)}}),$.length)return this._engine.markElementAsRemoved(this.id,u,!0,h,F),f&&Tn($).onDone(()=>this._engine.processLeaveNode(u)),!0}return!1}prepareLeaveAnimationListeners(u){const h=this._elementListeners.get(u),f=this._engine.statesByElement.get(u);if(h&&f){const I=new Set;h.forEach(S=>{const F=S.name;if(I.has(F))return;I.add(F);const le=this._triggers.get(F).fallbackTransition,De=f.get(F)||V,Je=new N(K),ft=new ut(this.id,F,u);this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:F,transition:le,fromState:De,toState:Je,player:ft,isFallbackTransition:!0})})}}removeNode(u,h){const f=this._engine;if(u.childElementCount&&this._signalRemovalForInnerTriggers(u,h),this.triggerLeaveAnimation(u,h,!0))return;let I=!1;if(f.totalAnimations){const S=f.players.length?f.playersByQueriedElement.get(u):[];if(S&&S.length)I=!0;else{let F=u;for(;F=F.parentNode;)if(f.statesByElement.get(F)){I=!0;break}}}if(this.prepareLeaveAnimationListeners(u),I)f.markElementAsRemoved(this.id,u,!1,h);else{const S=u[no];(!S||S===Jo)&&(f.afterFlush(()=>this.clearElementCache(u)),f.destroyInnerAnimations(u),f._onRemovalComplete(u,h))}}insertNode(u,h){On(u,this._hostClassName)}drainQueuedTransitions(u){const h=[];return this._queue.forEach(f=>{const I=f.player;if(I.destroyed)return;const S=f.element,F=this._elementListeners.get(S);F&&F.forEach($=>{if($.name==f.triggerName){const le=Yi(S,f.triggerName,f.fromState.value,f.toState.value);le._data=u,ns(f.player,$.phase,le,$.callback)}}),I.markedForDestroy?this._engine.afterFlush(()=>{I.destroy()}):h.push(f)}),this._queue=[],h.sort((f,I)=>{const S=f.transition.ast.depCount,F=I.transition.ast.depCount;return 0==S||0==F?S-F:this._engine.driver.containsElement(f.element,I.element)?1:-1})}destroy(u){this.players.forEach(h=>h.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,u)}elementContainsData(u){let h=!1;return this._elementListeners.has(u)&&(h=!0),h=!!this._queue.find(f=>f.element===u)||h,h}}class Te{_onRemovalComplete(u,h){this.onRemovalComplete(u,h)}constructor(u,h,f){this.bodyNode=u,this.driver=h,this._normalizer=f,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(I,S)=>{}}get queuedPlayers(){const u=[];return this._namespaceList.forEach(h=>{h.players.forEach(f=>{f.queued&&u.push(f)})}),u}createNamespace(u,h){const f=new ie(u,h,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,h)?this._balanceNamespaceList(f,h):(this.newHostElements.set(h,f),this.collectEnterElement(h)),this._namespaceLookup[u]=f}_balanceNamespaceList(u,h){const f=this._namespaceList,I=this.namespacesByHostElement;if(f.length-1>=0){let F=!1,$=this.driver.getParentElement(h);for(;$;){const le=I.get($);if(le){const De=f.indexOf(le);f.splice(De+1,0,u),F=!0;break}$=this.driver.getParentElement($)}F||f.unshift(u)}else f.push(u);return I.set(h,u),u}register(u,h){let f=this._namespaceLookup[u];return f||(f=this.createNamespace(u,h)),f}registerTrigger(u,h,f){let I=this._namespaceLookup[u];I&&I.register(h,f)&&this.totalAnimations++}destroy(u,h){if(!u)return;const f=this._fetchNamespace(u);this.afterFlush(()=>{this.namespacesByHostElement.delete(f.hostElement),delete this._namespaceLookup[u];const I=this._namespaceList.indexOf(f);I>=0&&this._namespaceList.splice(I,1)}),this.afterFlushAnimationsDone(()=>f.destroy(h))}_fetchNamespace(u){return this._namespaceLookup[u]}fetchNamespacesByElement(u){const h=new Set,f=this.statesByElement.get(u);if(f)for(let I of f.values())if(I.namespaceId){const S=this._fetchNamespace(I.namespaceId);S&&h.add(S)}return h}trigger(u,h,f,I){if(ei(h)){const S=this._fetchNamespace(u);if(S)return S.trigger(h,f,I),!0}return!1}insertNode(u,h,f,I){if(!ei(h))return;const S=h[no];if(S&&S.setForRemoval){S.setForRemoval=!1,S.setForMove=!0;const F=this.collectedLeaveElements.indexOf(h);F>=0&&this.collectedLeaveElements.splice(F,1)}if(u){const F=this._fetchNamespace(u);F&&F.insertNode(h,f)}I&&this.collectEnterElement(h)}collectEnterElement(u){this.collectedEnterElements.push(u)}markElementAsDisabled(u,h){h?this.disabledNodes.has(u)||(this.disabledNodes.add(u),On(u,$o)):this.disabledNodes.has(u)&&(this.disabledNodes.delete(u),si(u,$o))}removeNode(u,h,f,I){if(ei(h)){const S=u?this._fetchNamespace(u):null;if(S?S.removeNode(h,I):this.markElementAsRemoved(u,h,!1,I),f){const F=this.namespacesByHostElement.get(h);F&&F.id!==u&&F.removeNode(h,I)}}else this._onRemovalComplete(h,I)}markElementAsRemoved(u,h,f,I,S){this.collectedLeaveElements.push(h),h[no]={namespaceId:u,setForRemoval:I,hasAnimation:f,removedBeforeQueried:!1,previousTriggersValues:S}}listen(u,h,f,I,S){return ei(h)?this._fetchNamespace(u).listen(h,f,I,S):()=>{}}_buildInstruction(u,h,f,I,S){return u.transition.build(this.driver,u.element,u.fromState.value,u.toState.value,f,I,u.fromState.options,u.toState.options,h,S)}destroyInnerAnimations(u){let h=this.driver.query(u,Lo,!0);h.forEach(f=>this.destroyActiveAnimationsForElement(f)),0!=this.playersByQueriedElement.size&&(h=this.driver.query(u,eo,!0),h.forEach(f=>this.finishActiveQueriedAnimationOnElement(f)))}destroyActiveAnimationsForElement(u){const h=this.playersByElement.get(u);h&&h.forEach(f=>{f.queued?f.markedForDestroy=!0:f.destroy()})}finishActiveQueriedAnimationOnElement(u){const h=this.playersByQueriedElement.get(u);h&&h.forEach(f=>f.finish())}whenRenderingDone(){return new Promise(u=>{if(this.players.length)return Tn(this.players).onDone(()=>u());u()})}processLeaveNode(u){const h=u[no];if(h&&h.setForRemoval){if(u[no]=Jo,h.namespaceId){this.destroyInnerAnimations(u);const f=this._fetchNamespace(h.namespaceId);f&&f.clearElementCache(u)}this._onRemovalComplete(u,h.setForRemoval)}u.classList?.contains($o)&&this.markElementAsDisabled(u,!1),this.driver.query(u,".ng-animate-disabled",!0).forEach(f=>{this.markElementAsDisabled(f,!1)})}flush(u=-1){let h=[];if(this.newHostElements.size&&(this.newHostElements.forEach((f,I)=>this._balanceNamespaceList(f,I)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let f=0;f<this.collectedEnterElements.length;f++)On(this.collectedEnterElements[f],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const f=[];try{h=this._flushAnimations(f,u)}finally{for(let I=0;I<f.length;I++)f[I]()}}else for(let f=0;f<this.collectedLeaveElements.length;f++)this.processLeaveNode(this.collectedLeaveElements[f]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(f=>f()),this._flushFns=[],this._whenQuietFns.length){const f=this._whenQuietFns;this._whenQuietFns=[],h.length?Tn(h).onDone(()=>{f.forEach(I=>I())}):f.forEach(I=>I())}}reportError(u){throw function Ue(W){return new j.vHH(3402,!1)}()}_flushAnimations(u,h){const f=new Gr,I=[],S=new Map,F=[],$=new Map,le=new Map,De=new Map,Je=new Set;this.disabledNodes.forEach(Nn=>{Je.add(Nn);const hn=this.driver.query(Nn,".ng-animate-queued",!0);for(let Yn=0;Yn<hn.length;Yn++)Je.add(hn[Yn])});const ft=this.bodyNode,ln=Array.from(this.statesByElement.keys()),An=At(ln,this.collectedEnterElements),Un=new Map;let qn=0;An.forEach((Nn,hn)=>{const Yn=ao+qn++;Un.set(hn,Yn),Nn.forEach(oi=>On(oi,Yn))});const Pr=[],tr=new Set,Bi=new Set;for(let Nn=0;Nn<this.collectedLeaveElements.length;Nn++){const hn=this.collectedLeaveElements[Nn],Yn=hn[no];Yn&&Yn.setForRemoval&&(Pr.push(hn),tr.add(hn),Yn.hasAnimation?this.driver.query(hn,".ng-star-inserted",!0).forEach(oi=>tr.add(oi)):Bi.add(hn))}const Xi=new Map,Vs=At(ln,Array.from(tr));Vs.forEach((Nn,hn)=>{const Yn=po+qn++;Xi.set(hn,Yn),Nn.forEach(oi=>On(oi,Yn))}),u.push(()=>{An.forEach((Nn,hn)=>{const Yn=Un.get(hn);Nn.forEach(oi=>si(oi,Yn))}),Vs.forEach((Nn,hn)=>{const Yn=Xi.get(hn);Nn.forEach(oi=>si(oi,Yn))}),Pr.forEach(Nn=>{this.processLeaveNode(Nn)})});const Ii=[],lo=[];for(let Nn=this._namespaceList.length-1;Nn>=0;Nn--)this._namespaceList[Nn].drainQueuedTransitions(h).forEach(Yn=>{const oi=Yn.player,fs=Yn.element;if(Ii.push(oi),this.collectedEnterElements.length){const ps=fs[no];if(ps&&ps.setForMove){if(ps.previousTriggersValues&&ps.previousTriggersValues.has(Yn.triggerName)){const Do=ps.previousTriggersValues.get(Yn.triggerName),gs=this.statesByElement.get(Yn.element);if(gs&&gs.has(Yn.triggerName)){const bl=gs.get(Yn.triggerName);bl.value=Do,gs.set(Yn.triggerName,bl)}}return void oi.destroy()}}const so=!ft||!this.driver.containsElement(ft,fs),oo=Xi.get(fs),Co=Un.get(fs),Ai=this._buildInstruction(Yn,f,Co,oo,so);if(Ai.errors&&Ai.errors.length)return void lo.push(Ai);if(so)return oi.onStart(()=>Ot(fs,Ai.fromStyles)),oi.onDestroy(()=>pt(fs,Ai.toStyles)),void I.push(oi);if(Yn.isFallbackTransition)return oi.onStart(()=>Ot(fs,Ai.fromStyles)),oi.onDestroy(()=>pt(fs,Ai.toStyles)),void I.push(oi);const Ka=[];Ai.timelines.forEach(ps=>{ps.stretchStartingKeyframe=!0,this.disabledNodes.has(ps.element)||Ka.push(ps)}),Ai.timelines=Ka,f.append(fs,Ai.timelines),F.push({instruction:Ai,player:oi,element:fs}),Ai.queriedElements.forEach(ps=>Qr($,ps,[]).push(oi)),Ai.preStyleProps.forEach((ps,Do)=>{if(ps.size){let gs=le.get(Do);gs||le.set(Do,gs=new Set),ps.forEach((bl,nl)=>gs.add(nl))}}),Ai.postStyleProps.forEach((ps,Do)=>{let gs=De.get(Do);gs||De.set(Do,gs=new Set),ps.forEach((bl,nl)=>gs.add(nl))})});if(lo.length){const Nn=[];lo.forEach(hn=>{Nn.push(function wt(W,u){return new j.vHH(3505,!1)}())}),Ii.forEach(hn=>hn.destroy()),this.reportError(Nn)}const fi=new Map,Ei=new Map;F.forEach(Nn=>{const hn=Nn.element;f.has(hn)&&(Ei.set(hn,hn),this._beforeAnimationBuild(Nn.player.namespaceId,Nn.instruction,fi))}),I.forEach(Nn=>{const hn=Nn.element;this._getPreviousPlayers(hn,!1,Nn.namespaceId,Nn.triggerName,null).forEach(oi=>{Qr(fi,hn,[]).push(oi),oi.destroy()})});const Wa=Pr.filter(Nn=>zt(Nn,le,De)),ko=new Map;Ir(ko,this.driver,Bi,De,Se.l3).forEach(Nn=>{zt(Nn,le,De)&&Wa.push(Nn)});const Sl=new Map;An.forEach((Nn,hn)=>{Ir(Sl,this.driver,new Set(Nn),le,Se.k1)}),Wa.forEach(Nn=>{const hn=ko.get(Nn),Yn=Sl.get(Nn);ko.set(Nn,new Map([...Array.from(hn?.entries()??[]),...Array.from(Yn?.entries()??[])]))});const hl=[],Us=[],Nu={};F.forEach(Nn=>{const{element:hn,player:Yn,instruction:oi}=Nn;if(f.has(hn)){if(Je.has(hn))return Yn.onDestroy(()=>pt(hn,oi.toStyles)),Yn.disabled=!0,Yn.overrideTotalTime(oi.totalTime),void I.push(Yn);let fs=Nu;if(Ei.size>1){let oo=hn;const Co=[];for(;oo=oo.parentNode;){const Ai=Ei.get(oo);if(Ai){fs=Ai;break}Co.push(oo)}Co.forEach(Ai=>Ei.set(Ai,fs))}const so=this._buildAnimation(Yn.namespaceId,oi,fi,S,Sl,ko);if(Yn.setRealPlayer(so),fs===Nu)hl.push(Yn);else{const oo=this.playersByElement.get(fs);oo&&oo.length&&(Yn.parentPlayer=Tn(oo)),I.push(Yn)}}else Ot(hn,oi.fromStyles),Yn.onDestroy(()=>pt(hn,oi.toStyles)),Us.push(Yn),Je.has(hn)&&I.push(Yn)}),Us.forEach(Nn=>{const hn=S.get(Nn.element);if(hn&&hn.length){const Yn=Tn(hn);Nn.setRealPlayer(Yn)}}),I.forEach(Nn=>{Nn.parentPlayer?Nn.syncPlayerEvents(Nn.parentPlayer):Nn.destroy()});for(let Nn=0;Nn<Pr.length;Nn++){const hn=Pr[Nn],Yn=hn[no];if(si(hn,po),Yn&&Yn.hasAnimation)continue;let oi=[];if($.size){let so=$.get(hn);so&&so.length&&oi.push(...so);let oo=this.driver.query(hn,eo,!0);for(let Co=0;Co<oo.length;Co++){let Ai=$.get(oo[Co]);Ai&&Ai.length&&oi.push(...Ai)}}const fs=oi.filter(so=>!so.destroyed);fs.length?Eo(this,hn,fs):this.processLeaveNode(hn)}return Pr.length=0,hl.forEach(Nn=>{this.players.push(Nn),Nn.onDone(()=>{Nn.destroy();const hn=this.players.indexOf(Nn);this.players.splice(hn,1)}),Nn.play()}),hl}elementContainsData(u,h){let f=!1;const I=h[no];return I&&I.setForRemoval&&(f=!0),this.playersByElement.has(h)&&(f=!0),this.playersByQueriedElement.has(h)&&(f=!0),this.statesByElement.has(h)&&(f=!0),this._fetchNamespace(u).elementContainsData(h)||f}afterFlush(u){this._flushFns.push(u)}afterFlushAnimationsDone(u){this._whenQuietFns.push(u)}_getPreviousPlayers(u,h,f,I,S){let F=[];if(h){const $=this.playersByQueriedElement.get(u);$&&(F=$)}else{const $=this.playersByElement.get(u);if($){const le=!S||S==K;$.forEach(De=>{De.queued||!le&&De.triggerName!=I||F.push(De)})}}return(f||I)&&(F=F.filter($=>!(f&&f!=$.namespaceId||I&&I!=$.triggerName))),F}_beforeAnimationBuild(u,h,f){const S=h.element,F=h.isRemovalTransition?void 0:u,$=h.isRemovalTransition?void 0:h.triggerName;for(const le of h.timelines){const De=le.element,Je=De!==S,ft=Qr(f,De,[]);this._getPreviousPlayers(De,Je,F,$,h.toState).forEach(An=>{const Un=An.getRealPlayer();Un.beforeDestroy&&Un.beforeDestroy(),An.destroy(),ft.push(An)})}Ot(S,h.fromStyles)}_buildAnimation(u,h,f,I,S,F){const $=h.triggerName,le=h.element,De=[],Je=new Set,ft=new Set,ln=h.timelines.map(Un=>{const qn=Un.element;Je.add(qn);const Pr=qn[no];if(Pr&&Pr.removedBeforeQueried)return new Se.ZN(Un.duration,Un.delay);const tr=qn!==le,Bi=function nn(W){const u=[];return wn(W,u),u}((f.get(qn)||Ol).map(fi=>fi.getRealPlayer())).filter(fi=>!!fi.element&&fi.element===qn),Xi=S.get(qn),Vs=F.get(qn),Ii=mr(0,this._normalizer,0,Un.keyframes,Xi,Vs),lo=this._buildPlayer(Un,Ii,Bi);if(Un.subTimeline&&I&&ft.add(qn),tr){const fi=new ut(u,$,qn);fi.setRealPlayer(lo),De.push(fi)}return lo});De.forEach(Un=>{Qr(this.playersByQueriedElement,Un.element,[]).push(Un),Un.onDone(()=>function bt(W,u,h){let f=W.get(u);if(f){if(f.length){const I=f.indexOf(h);f.splice(I,1)}0==f.length&&W.delete(u)}return f}(this.playersByQueriedElement,Un.element,Un))}),Je.forEach(Un=>On(Un,Gs));const An=Tn(ln);return An.onDestroy(()=>{Je.forEach(Un=>si(Un,Gs)),pt(le,h.toStyles)}),ft.forEach(Un=>{Qr(I,Un,[]).push(An)}),An}_buildPlayer(u,h,f){return h.length>0?this.driver.animate(u.element,h,u.duration,u.delay,u.easing,f):new Se.ZN(u.duration,u.delay)}}class ut{constructor(u,h,f){this.namespaceId=u,this.triggerName=h,this.element=f,this._player=new Se.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(u){this._containsRealPlayer||(this._player=u,this._queuedCallbacks.forEach((h,f)=>{h.forEach(I=>ns(u,f,void 0,I))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(u.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(u){this.totalTime=u}syncPlayerEvents(u){const h=this._player;h.triggerCallback&&u.onStart(()=>h.triggerCallback("start")),u.onDone(()=>this.finish()),u.onDestroy(()=>this.destroy())}_queueEvent(u,h){Qr(this._queuedCallbacks,u,[]).push(h)}onDone(u){this.queued&&this._queueEvent("done",u),this._player.onDone(u)}onStart(u){this.queued&&this._queueEvent("start",u),this._player.onStart(u)}onDestroy(u){this.queued&&this._queueEvent("destroy",u),this._player.onDestroy(u)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(u){this.queued||this._player.setPosition(u)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(u){const h=this._player;h.triggerCallback&&h.triggerCallback(u)}}function ei(W){return W&&1===W.nodeType}function Ur(W,u){const h=W.style.display;return W.style.display=u??"none",h}function Ir(W,u,h,f,I){const S=[];h.forEach(le=>S.push(Ur(le)));const F=[];f.forEach((le,De)=>{const Je=new Map;le.forEach(ft=>{const ln=u.computeStyle(De,ft,I);Je.set(ft,ln),(!ln||0==ln.length)&&(De[no]=ha,F.push(De))}),W.set(De,Je)});let $=0;return h.forEach(le=>Ur(le,S[$++])),F}function At(W,u){const h=new Map;if(W.forEach($=>h.set($,[])),0==u.length)return h;const f=1,I=new Set(u),S=new Map;function F($){if(!$)return f;let le=S.get($);if(le)return le;const De=$.parentNode;return le=h.has(De)?De:I.has(De)?f:F(De),S.set($,le),le}return u.forEach($=>{const le=F($);le!==f&&h.get(le).push($)}),h}function On(W,u){W.classList?.add(u)}function si(W,u){W.classList?.remove(u)}function Eo(W,u,h){Tn(h).onDone(()=>W.processLeaveNode(u))}function wn(W,u){for(let h=0;h<W.length;h++){const f=W[h];f instanceof Se.ZE?wn(f.players,u):u.push(f)}}function zt(W,u,h){const f=h.get(W);if(!f)return!1;let I=u.get(W);return I?f.forEach(S=>I.add(S)):u.set(W,f),h.delete(W),!0}class et{constructor(u,h,f){this.bodyNode=u,this._driver=h,this._normalizer=f,this._triggerCache={},this.onRemovalComplete=(I,S)=>{},this._transitionEngine=new Te(u,h,f),this._timelineEngine=new js(u,h,f),this._transitionEngine.onRemovalComplete=(I,S)=>this.onRemovalComplete(I,S)}registerTrigger(u,h,f,I,S){const F=u+"-"+I;let $=this._triggerCache[F];if(!$){const le=[],De=[],Je=to(this._driver,S,le,De);if(le.length)throw function Vi(W,u){return new j.vHH(3404,!1)}();$=function Xo(W,u,h){return new Ea(W,u,h)}(I,Je,this._normalizer),this._triggerCache[F]=$}this._transitionEngine.registerTrigger(h,I,$)}register(u,h){this._transitionEngine.register(u,h)}destroy(u,h){this._transitionEngine.destroy(u,h)}onInsert(u,h,f,I){this._transitionEngine.insertNode(u,h,f,I)}onRemove(u,h,f,I){this._transitionEngine.removeNode(u,h,I||!1,f)}disableAnimations(u,h){this._transitionEngine.markElementAsDisabled(u,h)}process(u,h,f,I){if("@"==f.charAt(0)){const[S,F]=ii(f);this._timelineEngine.command(S,h,F,I)}else this._transitionEngine.trigger(u,h,f,I)}listen(u,h,f,I,S){if("@"==f.charAt(0)){const[F,$]=ii(f);return this._timelineEngine.listen(F,h,$,S)}return this._transitionEngine.listen(u,h,f,I,S)}flush(u=-1){this._transitionEngine.flush(u)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let bs=(()=>{class W{constructor(h,f,I){this._element=h,this._startStyles=f,this._endStyles=I,this._state=0;let S=W.initialStylesByElement.get(h);S||W.initialStylesByElement.set(h,S=new Map),this._initialStyles=S}start(){this._state<1&&(this._startStyles&&pt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pt(this._element,this._initialStyles),this._endStyles&&(pt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(W.initialStylesByElement.delete(this._element),this._startStyles&&(Ot(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ot(this._element,this._endStyles),this._endStyles=null),pt(this._element,this._initialStyles),this._state=3)}}return W.initialStylesByElement=new WeakMap,W})();function Ba(W){let u=null;return W.forEach((h,f)=>{(function kl(W){return"display"===W||"position"===W})(f)&&(u=u||new Map,u.set(f,h))}),u}class Ja{constructor(u,h,f,I){this.element=u,this.keyframes=h,this.options=f,this._specialStyles=I,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=f.duration,this._delay=f.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(u=>u()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const u=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,u,this.options),this._finalKeyframe=u.length?u[u.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(u){const h=[];return u.forEach(f=>{h.push(Object.fromEntries(f))}),h}_triggerWebAnimation(u,h,f){return u.animate(this._convertKeyframesToObject(h),f)}onStart(u){this._originalOnStartFns.push(u),this._onStartFns.push(u)}onDone(u){this._originalOnDoneFns.push(u),this._onDoneFns.push(u)}onDestroy(u){this._onDestroyFns.push(u)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(u=>u()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(u=>u()),this._onDestroyFns=[])}setPosition(u){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=u*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const u=new Map;this.hasStarted()&&this._finalKeyframe.forEach((f,I)=>{"offset"!==I&&u.set(I,this._finished?f:Si(this.element,I))}),this.currentSnapshot=u}triggerCallback(u){const h="start"===u?this._onStartFns:this._onDoneFns;h.forEach(f=>f()),h.length=0}}class Fl{validateStyleProperty(u){return!0}validateAnimatableStyleProperty(u){return!0}matchesElement(u,h){return!1}containsElement(u,h){return jr(u,h)}getParentElement(u){return wr(u)}query(u,h,f){return sr(u,h,f)}computeStyle(u,h,f){return window.getComputedStyle(u)[h]}animate(u,h,f,I,S,F=[]){const le={duration:f,delay:I,fill:0==I?"both":"forwards"};S&&(le.easing=S);const De=new Map,Je=F.filter(An=>An instanceof Ja);(function zr(W,u){return 0===W||0===u})(f,I)&&Je.forEach(An=>{An.currentSnapshot.forEach((Un,qn)=>De.set(qn,Un))});let ft=function Z(W){return W.length?W[0]instanceof Map?W:W.map(u=>Ms(u)):[]}(h).map(An=>Ee(An));ft=function ds(W,u,h){if(h.size&&u.length){let f=u[0],I=[];if(h.forEach((S,F)=>{f.has(F)||I.push(F),f.set(F,S)}),I.length)for(let S=1;S<u.length;S++){let F=u[S];I.forEach($=>F.set($,Si(W,$)))}}return u}(u,ft,De);const ln=function Mt(W,u){let h=null,f=null;return Array.isArray(u)&&u.length?(h=Ba(u[0]),u.length>1&&(f=Ba(u[u.length-1]))):u instanceof Map&&(h=Ba(u)),h||f?new bs(W,h,f):null}(u,ft);return new Ja(u,ft,le,ln)}}var Ll=G(6895);let ea=(()=>{class W extends Se._j{constructor(h,f){super(),this._nextAnimationId=0,this._renderer=h.createRenderer(f.body,{id:"0",encapsulation:j.ifc.None,styles:[],data:{animation:[]}})}build(h){const f=this._nextAnimationId.toString();this._nextAnimationId++;const I=Array.isArray(h)?(0,Se.vP)(h):h;return Ia(this._renderer,null,f,"register",[I]),new Vl(f,this._renderer)}}return W.\u0275fac=function(h){return new(h||W)(j.LFG(j.FYo),j.LFG(Ll.K0))},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac}),W})();class Vl extends Se.LC{constructor(u,h){super(),this._id=u,this._renderer=h}create(u,h){return new El(this._id,u,h||{},this._renderer)}}class El{constructor(u,h,f,I){this.id=u,this.element=h,this._renderer=I,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",f)}_listen(u,h){return this._renderer.listen(this.element,`@@${this.id}:${u}`,h)}_command(u,...h){return Ia(this._renderer,this.element,this.id,u,h)}onDone(u){this._listen("done",u)}onStart(u){this._listen("start",u)}onDestroy(u){this._listen("destroy",u)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(u){this._command("setPosition",u)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ia(W,u,h,f,I){return W.setProperty(u,`@@${h}:${f}`,I)}const is="@.disabled";let lr=(()=>{class W{constructor(h,f,I){this.delegate=h,this.engine=f,this._zone=I,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),f.onRemovalComplete=(S,F)=>{const $=F?.parentNode(S);$&&F.removeChild($,S)}}createRenderer(h,f){const S=this.delegate.createRenderer(h,f);if(!(h&&f&&f.data&&f.data.animation)){let Je=this._rendererCache.get(S);return Je||(Je=new Ca("",S,this.engine,()=>this._rendererCache.delete(S)),this._rendererCache.set(S,Je)),Je}const F=f.id,$=f.id+"-"+this._currentId;this._currentId++,this.engine.register($,h);const le=Je=>{Array.isArray(Je)?Je.forEach(le):this.engine.registerTrigger(F,$,h,Je.name,Je)};return f.data.animation.forEach(le),new cl(this,$,S,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(h,f,I){h>=0&&h<this._microtaskId?this._zone.run(()=>f(I)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(S=>{const[F,$]=S;F($)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([f,I]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return W.\u0275fac=function(h){return new(h||W)(j.LFG(j.FYo),j.LFG(et),j.LFG(j.R0b))},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac}),W})();class Ca{constructor(u,h,f,I){this.namespaceId=u,this.delegate=h,this.engine=f,this._onDestroy=I,this.destroyNode=this.delegate.destroyNode?S=>h.destroyNode(S):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(u,h){return this.delegate.createElement(u,h)}createComment(u){return this.delegate.createComment(u)}createText(u){return this.delegate.createText(u)}appendChild(u,h){this.delegate.appendChild(u,h),this.engine.onInsert(this.namespaceId,h,u,!1)}insertBefore(u,h,f,I=!0){this.delegate.insertBefore(u,h,f),this.engine.onInsert(this.namespaceId,h,u,I)}removeChild(u,h,f){this.engine.onRemove(this.namespaceId,h,this.delegate,f)}selectRootElement(u,h){return this.delegate.selectRootElement(u,h)}parentNode(u){return this.delegate.parentNode(u)}nextSibling(u){return this.delegate.nextSibling(u)}setAttribute(u,h,f,I){this.delegate.setAttribute(u,h,f,I)}removeAttribute(u,h,f){this.delegate.removeAttribute(u,h,f)}addClass(u,h){this.delegate.addClass(u,h)}removeClass(u,h){this.delegate.removeClass(u,h)}setStyle(u,h,f,I){this.delegate.setStyle(u,h,f,I)}removeStyle(u,h,f){this.delegate.removeStyle(u,h,f)}setProperty(u,h,f){"@"==h.charAt(0)&&h==is?this.disableAnimations(u,!!f):this.delegate.setProperty(u,h,f)}setValue(u,h){this.delegate.setValue(u,h)}listen(u,h,f){return this.delegate.listen(u,h,f)}disableAnimations(u,h){this.engine.disableAnimations(u,h)}}class cl extends Ca{constructor(u,h,f,I,S){super(h,f,I,S),this.factory=u,this.namespaceId=h}setProperty(u,h,f){"@"==h.charAt(0)?"."==h.charAt(1)&&h==is?this.disableAnimations(u,f=void 0===f||!!f):this.engine.process(this.namespaceId,u,h.slice(1),f):this.delegate.setProperty(u,h,f)}listen(u,h,f){if("@"==h.charAt(0)){const I=function es(W){switch(W){case"body":return document.body;case"document":return document;case"window":return window;default:return W}}(u);let S=h.slice(1),F="";return"@"!=S.charAt(0)&&([S,F]=function Gn(W){const u=W.indexOf(".");return[W.substring(0,u),W.slice(u+1)]}(S)),this.engine.listen(this.namespaceId,I,S,F,$=>{this.factory.scheduleListenerCallback($._data||-1,f,$)})}return this.delegate.listen(u,h,f)}}const Dr=[{provide:Se._j,useClass:ea},{provide:Qo,useFactory:function or(){return new ua}},{provide:et,useClass:(()=>{class W extends et{constructor(h,f,I,S){super(h.body,f,I)}ngOnDestroy(){this.flush()}}return W.\u0275fac=function(h){return new(h||W)(j.LFG(Ll.K0),j.LFG(Bs),j.LFG(Qo),j.LFG(j.z2F))},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac}),W})()},{provide:j.FYo,useFactory:function ro(W,u,h){return new lr(W,u,h)},deps:[v.se,et,j.R0b]}],Xt=[{provide:Bs,useFactory:()=>new Fl},{provide:j.QbO,useValue:"BrowserAnimations"},...Dr],ta=[{provide:Bs,useClass:Xr},{provide:j.QbO,useValue:"NoopAnimations"},...Dr];let $a=(()=>{class W{static withConfig(h){return{ngModule:W,providers:h.disableAnimations?ta:Xt}}}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W}),W.\u0275inj=j.cJS({providers:Xt,imports:[v.b2]}),W})();var ja=G(7512),Ha=G(9751),fa=G(9646),Fs=G(8996),Ys=G(4986),jo=G(4482),Il=G(5403),io=G(4004),na=G(3900),it=G(3942),ls=G(6961),ti=G(4859);class za{constructor(u,h,f){this._delegate=u,this.task=h,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ga{constructor(u,h){this._delegate=u,this._ref=h,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new za(this._delegate.snapshot,this,this._ref)}then(u,h){return this._delegate.then(f=>{if(u)return u(new za(f,this,this._ref))},h)}on(u,h,f,I){let S;return h&&(S="function"==typeof h?F=>h(new za(F,this,this._ref)):{next:h.next?F=>h.next(new za(F,this,this._ref)):void 0,complete:h.complete||void 0,error:h.error||void 0}),this._delegate.on(u,S,f||void 0,I||void 0)}}class ra{constructor(u,h){this._delegate=u,this._service=h}get prefixes(){return this._delegate.prefixes.map(u=>new Ho(u,this._service))}get items(){return this._delegate.items.map(u=>new Ho(u,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ho{constructor(u,h){this._delegate=u,this.storage=h}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(u){const h=(0,ls.g6)(this._delegate,u);return new Ho(h,this.storage)}get root(){return new Ho(this._delegate.root,this.storage)}get parent(){const u=this._delegate.parent;return null==u?null:new Ho(u,this.storage)}put(u,h){return this._throwIfRoot("put"),new Ga((0,ls.B0)(this._delegate,u,h),this)}putString(u,h=ls.bm.RAW,f){this._throwIfRoot("putString");const I=(0,ls.qm)(h,u),S=Object.assign({},f);return null==S.contentType&&null!=I.contentType&&(S.contentType=I.contentType),new Ga(new ls.IX(this._delegate,new ls.UJ(I.data,!0),S),this)}listAll(){return(0,ls.aF)(this._delegate).then(u=>new ra(u,this.storage))}list(u){return(0,ls.pb)(this._delegate,u||void 0).then(h=>new ra(h,this.storage))}getMetadata(){return(0,ls.sd)(this._delegate)}updateMetadata(u){return(0,ls.Ym)(this._delegate,u)}getDownloadURL(){return(0,ls.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,ls.oq)(this._delegate)}_throwIfRoot(u){if(""===this._delegate._location.path)throw(0,ls.y4)(u)}}class Da{constructor(u,h){this.app=u,this._delegate=h}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(u){if(iu(u))throw(0,ls.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new Ho((0,ls.iH)(this._delegate,u),this)}refFromURL(u){if(!iu(u))throw(0,ls.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ls.gE.makeFromUrl(u,this._delegate.host)}catch{throw(0,ls.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ho((0,ls.iH)(this._delegate,u),this)}setMaxUploadRetryTime(u){this._delegate.maxUploadRetryTime=u}setMaxOperationRetryTime(u){this._delegate.maxOperationRetryTime=u}useEmulator(u,h,f={}){(0,ls.a1)(this._delegate,u,h,f)}}function iu(W){return/^[A-Za-z]+:\/\//.test(W)}function Oo(W,{instanceIdentifier:u}){const h=W.getProvider("app-compat").getImmediate(),f=W.getProvider("storage").getImmediate({identifier:u});return new Da(h,f)}!function ws(W){const u={TaskState:ls.$Y,TaskEvent:ls.FN,StringFormat:ls.bm,Storage:Da,Reference:Ho};W.INTERNAL.registerComponent(new ti.wA("storage-compat",Oo,"PUBLIC").setServiceProps(u).setMultipleInstances(!0)),W.registerVersion("@firebase/storage-compat","0.3.2")}(it.Z);var zo=G(9260);function ts(W){const u=function dl(W){return new Ha.y(u=>{const h=F=>u.next(F);h(W.snapshot);const S=W.on("state_changed",h);return W.then(F=>{h(F),u.complete()},F=>{h(W.snapshot),(F=>{u.error(F)})(F)}),function(){S()}}).pipe(function Cl(W,u=Ys.z){return(0,jo.e)((h,f)=>{let I=null,S=null,F=null;const $=()=>{if(I){I.unsubscribe(),I=null;const De=S;S=null,f.next(De)}};function le(){const De=F+W,Je=u.now();if(Je<De)return I=this.schedule(void 0,De-Je),void f.add(I);$()}h.subscribe((0,Il.x)(f,De=>{S=De,F=u.now(),I||(I=u.schedule(le,W),f.add(I))},()=>{$(),f.complete()},void 0,()=>{S=I=null}))})}(0))}(W);return{task:W,then:W.then.bind(W),catch:W.catch.bind(W),pause:W.pause.bind(W),cancel:W.cancel.bind(W),resume:W.resume.bind(W),snapshotChanges:()=>u,percentageChanges:()=>u.pipe((0,io.U)(h=>h.bytesTransferred/h.totalBytes*100))}}function Qs(W){return{getDownloadURL:()=>(0,fa.of)(void 0).pipe(ge.fc,(0,na.w)(()=>W.getDownloadURL()),ge.iC),getMetadata:()=>(0,fa.of)(void 0).pipe(ge.fc,(0,na.w)(()=>W.getMetadata()),ge.iC),delete:()=>(0,Fs.D)(W.delete()),child:u=>Qs(W.child(u)),updateMetadata:u=>(0,Fs.D)(W.updateMetadata(u)),put:(u,h)=>ts(W.put(u,h)),putString:(u,h,f)=>ts(W.putString(u,h,f)),list:u=>(0,Fs.D)(W.list(u)),listAll:()=>(0,Fs.D)(W.listAll())}}const pa=new j.OlP("angularfire2.storageBucket"),Ls=new j.OlP("angularfire2.storage.maxUploadRetryTime"),Ta=new j.OlP("angularfire2.storage.maxOperationRetryTime"),Go=new j.OlP("angularfire2.storage.use-emulator");let Ul=(()=>{class W{constructor(h,f,I,S,F,$,le,De,Je,ft){const ln=(0,he.on)(h,F,f);this.storage=(0,he.cc)(`${ln.name}.storage.${I}`,"AngularFireStorage",ln.name,()=>{const An=F.runOutsideAngular(()=>ln.storage(I||void 0)),Un=Je;return Un&&An.useEmulator(...Un),le&&An.setMaxUploadRetryTime(le),De&&An.setMaxOperationRetryTime(De),An},[le,De])}ref(h){return Qs(this.storage.ref(h))}refFromURL(h){return Qs(this.storage.refFromURL(h))}upload(h,f,I){return Qs(this.storage.ref(h)).put(f,I)}}return W.\u0275fac=function(h){return new(h||W)(j.LFG(he.Dh),j.LFG(he.xv,8),j.LFG(pa,8),j.LFG(j.Lbi),j.LFG(j.R0b),j.LFG(ge.HU),j.LFG(Ls,8),j.LFG(Ta,8),j.LFG(Go,8),j.LFG(gt.nm,8))},W.\u0275prov=j.Yz7({token:W,factory:W.\u0275fac,providedIn:"any"}),W})(),Dl=(()=>{class W{}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W}),W.\u0275inj=j.cJS({}),W})(),Tl=(()=>{class W{constructor(){zo.Z.registerVersion("angularfire",ge.q4.full,"gcs-compat")}}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W}),W.\u0275inj=j.cJS({providers:[Ul],imports:[Dl]}),W})();he.hO.initializeApp(ne.firebaseConfig);let Io=(()=>{class W{}return W.\u0275fac=function(h){return new(h||W)},W.\u0275mod=j.oAB({type:W,bootstrap:[ye]}),W.\u0275inj=j.cJS({providers:[Pe.e,{provide:he.Dh,useValue:ne.firebaseConfig},Ce],imports:[v.b2,$e,$a,te.Bz,qe.u5,(0,ce.hX)(()=>(0,ce.ZF)(ne.firebaseConfig)),(0,Ne.AR)(()=>(0,Ne.v0)()),q(()=>Qn()),(0,ja.Vq)(()=>(0,ja.cF)()),we.ww,oe.JS,Tl]}),W})();v.q6().bootstrapModule(Io).catch(W=>console.error(W))},9751:(rn,tt,G)=>{G.d(tt,{y:()=>ye});var v=G(930),te=G(727),j=G(8822),Pe=G(9635),Ce=G(2416),Fe=G(576),$e=G(2806);let ye=(()=>{class Ne{constructor(gt){gt&&(this._subscribe=gt)}lift(gt){const Pt=new Ne;return Pt.source=this,Pt.operator=gt,Pt}subscribe(gt,Pt,jt){const ot=function ge(Ne){return Ne&&Ne instanceof v.Lv||function ce(Ne){return Ne&&(0,Fe.m)(Ne.next)&&(0,Fe.m)(Ne.error)&&(0,Fe.m)(Ne.complete)}(Ne)&&(0,te.Nn)(Ne)}(gt)?gt:new v.Hp(gt,Pt,jt);return(0,$e.x)(()=>{const{operator:mt,source:Et}=this;ot.add(mt?mt.call(ot,Et):Et?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(gt){try{return this._subscribe(gt)}catch(Pt){gt.error(Pt)}}forEach(gt,Pt){return new(Pt=qe(Pt))((jt,ot)=>{const mt=new v.Hp({next:Et=>{try{gt(Et)}catch(_t){ot(_t),mt.unsubscribe()}},error:ot,complete:jt});this.subscribe(mt)})}_subscribe(gt){var Pt;return null===(Pt=this.source)||void 0===Pt?void 0:Pt.subscribe(gt)}[j.L](){return this}pipe(...gt){return(0,Pe.U)(gt)(this)}toPromise(gt){return new(gt=qe(gt))((Pt,jt)=>{let ot;this.subscribe(mt=>ot=mt,mt=>jt(mt),()=>Pt(ot))})}}return Ne.create=at=>new Ne(at),Ne})();function qe(Ne){var at;return null!==(at=Ne??Ce.v.Promise)&&void 0!==at?at:Promise}},7579:(rn,tt,G)=>{G.d(tt,{x:()=>$e});var v=G(9751),te=G(727);const Pe=(0,G(3888).d)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=G(8737),Fe=G(2806);let $e=(()=>{class qe extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const Ne=new ye(this,this);return Ne.operator=ge,Ne}_throwIfClosed(){if(this.closed)throw new Pe}next(ge){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ne of this.currentObservers)Ne.next(ge)}})}error(ge){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(ge)}})}complete(){(0,Fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:Ne,isStopped:at,observers:gt}=this;return Ne||at?te.Lc:(this.currentObservers=null,gt.push(ge),new te.w0(()=>{this.currentObservers=null,(0,Ce.P)(gt,ge)}))}_checkFinalizedStatuses(ge){const{hasError:Ne,thrownError:at,isStopped:gt}=this;Ne?ge.error(at):gt&&ge.complete()}asObservable(){const ge=new v.y;return ge.source=this,ge}}return qe.create=(ce,ge)=>new ye(ce,ge),qe})();class ye extends $e{constructor(ce,ge){super(),this.destination=ce,this.source=ge}next(ce){var ge,Ne;null===(Ne=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===Ne||Ne.call(ge,ce)}error(ce){var ge,Ne;null===(Ne=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===Ne||Ne.call(ge,ce)}complete(){var ce,ge;null===(ge=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===ge||ge.call(ce)}_subscribe(ce){var ge,Ne;return null!==(Ne=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(ce))&&void 0!==Ne?Ne:te.Lc}}},930:(rn,tt,G)=>{G.d(tt,{Hp:()=>jt,Lv:()=>Ne});var v=G(576),te=G(727),j=G(2416),Pe=G(7849),Ce=G(5032);const Fe=qe("C",void 0,void 0);function qe(Ze,Oe,rt){return{kind:Ze,value:Oe,error:rt}}var ce=G(3410),ge=G(2806);class Ne extends te.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,te.Nn)(Oe)&&Oe.add(this)):this.destination=_t}static create(Oe,rt,Dt){return new jt(Oe,rt,Dt)}next(Oe){this.isStopped?Et(function ye(Ze){return qe("N",Ze,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Et(function $e(Ze){return qe("E",void 0,Ze)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Et(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function gt(Ze,Oe){return at.call(Ze,Oe)}class Pt{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:rt}=this;if(rt.next)try{rt.next(Oe)}catch(Dt){ot(Dt)}}error(Oe){const{partialObserver:rt}=this;if(rt.error)try{rt.error(Oe)}catch(Dt){ot(Dt)}else ot(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(rt){ot(rt)}}}class jt extends Ne{constructor(Oe,rt,Dt){let lt;if(super(),(0,v.m)(Oe)||!Oe)lt={next:Oe??void 0,error:rt??void 0,complete:Dt??void 0};else{let q;this&&j.v.useDeprecatedNextContext?(q=Object.create(Oe),q.unsubscribe=()=>this.unsubscribe(),lt={next:Oe.next&&gt(Oe.next,q),error:Oe.error&&gt(Oe.error,q),complete:Oe.complete&&gt(Oe.complete,q)}):lt=Oe}this.destination=new Pt(lt)}}function ot(Ze){j.v.useDeprecatedSynchronousErrorHandling?(0,ge.O)(Ze):(0,Pe.h)(Ze)}function Et(Ze,Oe){const{onStoppedNotification:rt}=j.v;rt&&ce.z.setTimeout(()=>rt(Ze,Oe))}const _t={closed:!0,next:Ce.Z,error:function mt(Ze){throw Ze},complete:Ce.Z}},727:(rn,tt,G)=>{G.d(tt,{Lc:()=>Fe,w0:()=>Ce,Nn:()=>$e});var v=G(576);const j=(0,G(3888).d)(qe=>function(ge){qe(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Ne,at)=>`${at+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var Pe=G(8737);class Ce{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const gt of ge)gt.remove(this);else ge.remove(this);const{initialTeardown:Ne}=this;if((0,v.m)(Ne))try{Ne()}catch(gt){ce=gt instanceof j?gt.errors:[gt]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const gt of at)try{ye(gt)}catch(Pt){ce=ce??[],Pt instanceof j?ce=[...ce,...Pt.errors]:ce.push(Pt)}}if(ce)throw new j(ce)}}add(ce){var ge;if(ce&&ce!==this)if(this.closed)ye(ce);else{if(ce instanceof Ce){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(ce)}}_hasParent(ce){const{_parentage:ge}=this;return ge===ce||Array.isArray(ge)&&ge.includes(ce)}_addParent(ce){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(ce),ge):ge?[ge,ce]:ce}_removeParent(ce){const{_parentage:ge}=this;ge===ce?this._parentage=null:Array.isArray(ge)&&(0,Pe.P)(ge,ce)}remove(ce){const{_finalizers:ge}=this;ge&&(0,Pe.P)(ge,ce),ce instanceof Ce&&ce._removeParent(this)}}Ce.EMPTY=(()=>{const qe=new Ce;return qe.closed=!0,qe})();const Fe=Ce.EMPTY;function $e(qe){return qe instanceof Ce||qe&&"closed"in qe&&(0,v.m)(qe.remove)&&(0,v.m)(qe.add)&&(0,v.m)(qe.unsubscribe)}function ye(qe){(0,v.m)(qe)?qe():qe.unsubscribe()}},2416:(rn,tt,G)=>{G.d(tt,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(rn,tt,G)=>{G.d(tt,{z:()=>Ce});var v=G(8189),j=G(7669),Pe=G(8996);function Ce(...Fe){return function te(){return(0,v.J)(1)}()((0,Pe.D)(Fe,(0,j.yG)(Fe)))}},515:(rn,tt,G)=>{G.d(tt,{E:()=>te});const te=new(G(9751).y)(Ce=>Ce.complete())},8996:(rn,tt,G)=>{G.d(tt,{D:()=>Oe});var v=G(8421),te=G(5363),j=G(9468),Fe=G(9751),ye=G(2202),qe=G(576),ce=G(9672);function Ne(rt,Dt){if(!rt)throw new Error("Iterable cannot be null");return new Fe.y(lt=>{(0,ce.f)(lt,Dt,()=>{const q=rt[Symbol.asyncIterator]();(0,ce.f)(lt,Dt,()=>{q.next().then(Bt=>{Bt.done?lt.complete():lt.next(Bt.value)})},0,!0)})})}var at=G(3670),gt=G(8239),Pt=G(1144),jt=G(6495),ot=G(2206),mt=G(4532),Et=G(3260);function Oe(rt,Dt){return Dt?function Ze(rt,Dt){if(null!=rt){if((0,at.c)(rt))return function Pe(rt,Dt){return(0,v.Xf)(rt).pipe((0,j.R)(Dt),(0,te.Q)(Dt))}(rt,Dt);if((0,Pt.z)(rt))return function $e(rt,Dt){return new Fe.y(lt=>{let q=0;return Dt.schedule(function(){q===rt.length?lt.complete():(lt.next(rt[q++]),lt.closed||this.schedule())})})}(rt,Dt);if((0,gt.t)(rt))return function Ce(rt,Dt){return(0,v.Xf)(rt).pipe((0,j.R)(Dt),(0,te.Q)(Dt))}(rt,Dt);if((0,ot.D)(rt))return Ne(rt,Dt);if((0,jt.T)(rt))return function ge(rt,Dt){return new Fe.y(lt=>{let q;return(0,ce.f)(lt,Dt,()=>{q=rt[ye.h](),(0,ce.f)(lt,Dt,()=>{let Bt,fn;try{({value:Bt,done:fn}=q.next())}catch(Ut){return void lt.error(Ut)}fn?lt.complete():lt.next(Bt)},0,!0)}),()=>(0,qe.m)(q?.return)&&q.return()})}(rt,Dt);if((0,Et.L)(rt))return function _t(rt,Dt){return Ne((0,Et.Q)(rt),Dt)}(rt,Dt)}throw(0,mt.z)(rt)}(rt,Dt):(0,v.Xf)(rt)}},8421:(rn,tt,G)=>{G.d(tt,{Xf:()=>at});var v=G(7582),te=G(1144),j=G(8239),Pe=G(9751),Ce=G(3670),Fe=G(2206),$e=G(4532),ye=G(6495),qe=G(3260),ce=G(576),ge=G(7849),Ne=G(8822);function at(Ze){if(Ze instanceof Pe.y)return Ze;if(null!=Ze){if((0,Ce.c)(Ze))return function gt(Ze){return new Pe.y(Oe=>{const rt=Ze[Ne.L]();if((0,ce.m)(rt.subscribe))return rt.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ze);if((0,te.z)(Ze))return function Pt(Ze){return new Pe.y(Oe=>{for(let rt=0;rt<Ze.length&&!Oe.closed;rt++)Oe.next(Ze[rt]);Oe.complete()})}(Ze);if((0,j.t)(Ze))return function jt(Ze){return new Pe.y(Oe=>{Ze.then(rt=>{Oe.closed||(Oe.next(rt),Oe.complete())},rt=>Oe.error(rt)).then(null,ge.h)})}(Ze);if((0,Fe.D)(Ze))return mt(Ze);if((0,ye.T)(Ze))return function ot(Ze){return new Pe.y(Oe=>{for(const rt of Ze)if(Oe.next(rt),Oe.closed)return;Oe.complete()})}(Ze);if((0,qe.L)(Ze))return function Et(Ze){return mt((0,qe.Q)(Ze))}(Ze)}throw(0,$e.z)(Ze)}function mt(Ze){return new Pe.y(Oe=>{(function _t(Ze,Oe){var rt,Dt,lt,q;return(0,v.mG)(this,void 0,void 0,function*(){try{for(rt=(0,v.KL)(Ze);!(Dt=yield rt.next()).done;)if(Oe.next(Dt.value),Oe.closed)return}catch(Bt){lt={error:Bt}}finally{try{Dt&&!Dt.done&&(q=rt.return)&&(yield q.call(rt))}finally{if(lt)throw lt.error}}Oe.complete()})})(Ze,Oe).catch(rt=>Oe.error(rt))})}},6451:(rn,tt,G)=>{G.d(tt,{T:()=>Fe});var v=G(8189),te=G(8421),j=G(515),Pe=G(7669),Ce=G(8996);function Fe(...$e){const ye=(0,Pe.yG)($e),qe=(0,Pe._6)($e,1/0),ce=$e;return ce.length?1===ce.length?(0,te.Xf)(ce[0]):(0,v.J)(qe)((0,Ce.D)(ce,ye)):j.E}},9646:(rn,tt,G)=>{G.d(tt,{of:()=>j});var v=G(7669),te=G(8996);function j(...Pe){const Ce=(0,v.yG)(Pe);return(0,te.D)(Pe,Ce)}},5403:(rn,tt,G)=>{G.d(tt,{Q:()=>j,x:()=>te});var v=G(930);function te(Pe,Ce,Fe,$e,ye){return new j(Pe,Ce,Fe,$e,ye)}class j extends v.Lv{constructor(Ce,Fe,$e,ye,qe,ce){super(Ce),this.onFinalize=qe,this.shouldUnsubscribe=ce,this._next=Fe?function(ge){try{Fe(ge)}catch(Ne){Ce.error(Ne)}}:super._next,this._error=ye?function(ge){try{ye(ge)}catch(Ne){Ce.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(ge){Ce.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Fe}=this;super.unsubscribe(),!Fe&&(null===(Ce=this.onFinalize)||void 0===Ce||Ce.call(this))}}}},6590:(rn,tt,G)=>{G.d(tt,{d:()=>j});var v=G(4482),te=G(5403);function j(Pe){return(0,v.e)((Ce,Fe)=>{let $e=!1;Ce.subscribe((0,te.x)(Fe,ye=>{$e=!0,Fe.next(ye)},()=>{$e||Fe.next(Pe),Fe.complete()}))})}},1884:(rn,tt,G)=>{G.d(tt,{x:()=>Pe});var v=G(4671),te=G(4482),j=G(5403);function Pe(Fe,$e=v.y){return Fe=Fe??Ce,(0,te.e)((ye,qe)=>{let ce,ge=!0;ye.subscribe((0,j.x)(qe,Ne=>{const at=$e(Ne);(ge||!Fe(ce,at))&&(ge=!1,ce=at,qe.next(Ne))}))})}function Ce(Fe,$e){return Fe===$e}},9300:(rn,tt,G)=>{G.d(tt,{h:()=>j});var v=G(4482),te=G(5403);function j(Pe,Ce){return(0,v.e)((Fe,$e)=>{let ye=0;Fe.subscribe((0,te.x)($e,qe=>Pe.call(Ce,qe,ye++)&&$e.next(qe)))})}},590:(rn,tt,G)=>{G.d(tt,{P:()=>$e});var v=G(6805),te=G(9300),j=G(5698),Pe=G(6590),Ce=G(8068),Fe=G(4671);function $e(ye,qe){const ce=arguments.length>=2;return ge=>ge.pipe(ye?(0,te.h)((Ne,at)=>ye(Ne,at,ge)):Fe.y,(0,j.q)(1),ce?(0,Pe.d)(qe):(0,Ce.T)(()=>new v.K))}},4004:(rn,tt,G)=>{G.d(tt,{U:()=>j});var v=G(4482),te=G(5403);function j(Pe,Ce){return(0,v.e)((Fe,$e)=>{let ye=0;Fe.subscribe((0,te.x)($e,qe=>{$e.next(Pe.call(Ce,qe,ye++))}))})}},8189:(rn,tt,G)=>{G.d(tt,{J:()=>j});var v=G(5577),te=G(4671);function j(Pe=1/0){return(0,v.z)(te.y,Pe)}},5577:(rn,tt,G)=>{G.d(tt,{z:()=>ye});var v=G(4004),te=G(8421),j=G(4482),Pe=G(9672),Ce=G(5403),$e=G(576);function ye(qe,ce,ge=1/0){return(0,$e.m)(ce)?ye((Ne,at)=>(0,v.U)((gt,Pt)=>ce(Ne,gt,at,Pt))((0,te.Xf)(qe(Ne,at))),ge):("number"==typeof ce&&(ge=ce),(0,j.e)((Ne,at)=>function Fe(qe,ce,ge,Ne,at,gt,Pt,jt){const ot=[];let mt=0,Et=0,_t=!1;const Ze=()=>{_t&&!ot.length&&!mt&&ce.complete()},Oe=Dt=>mt<Ne?rt(Dt):ot.push(Dt),rt=Dt=>{gt&&ce.next(Dt),mt++;let lt=!1;(0,te.Xf)(ge(Dt,Et++)).subscribe((0,Ce.x)(ce,q=>{at?.(q),gt?Oe(q):ce.next(q)},()=>{lt=!0},void 0,()=>{if(lt)try{for(mt--;ot.length&&mt<Ne;){const q=ot.shift();Pt?(0,Pe.f)(ce,Pt,()=>rt(q)):rt(q)}Ze()}catch(q){ce.error(q)}}))};return qe.subscribe((0,Ce.x)(ce,Oe,()=>{_t=!0,Ze()})),()=>{jt?.()}}(Ne,at,qe,ge)))}},5363:(rn,tt,G)=>{G.d(tt,{Q:()=>Pe});var v=G(9672),te=G(4482),j=G(5403);function Pe(Ce,Fe=0){return(0,te.e)(($e,ye)=>{$e.subscribe((0,j.x)(ye,qe=>(0,v.f)(ye,Ce,()=>ye.next(qe),Fe),()=>(0,v.f)(ye,Ce,()=>ye.complete(),Fe),qe=>(0,v.f)(ye,Ce,()=>ye.error(qe),Fe)))})}},2940:(rn,tt,G)=>{G.d(tt,{R:()=>j});var v=G(4482),te=G(7359);function j(Pe,Ce){return(0,v.e)((0,te.U)(Pe,Ce,arguments.length>=2,!0))}},7359:(rn,tt,G)=>{G.d(tt,{U:()=>te});var v=G(5403);function te(j,Pe,Ce,Fe,$e){return(ye,qe)=>{let ce=Ce,ge=Pe,Ne=0;ye.subscribe((0,v.x)(qe,at=>{const gt=Ne++;ge=ce?j(ge,at,gt):(ce=!0,at),Fe&&qe.next(ge)},$e&&(()=>{ce&&qe.next(ge),qe.complete()})))}}},3099:(rn,tt,G)=>{G.d(tt,{B:()=>Ce});var v=G(8421),te=G(7579),j=G(930),Pe=G(4482);function Ce($e={}){const{connector:ye=(()=>new te.x),resetOnError:qe=!0,resetOnComplete:ce=!0,resetOnRefCountZero:ge=!0}=$e;return Ne=>{let at,gt,Pt,jt=0,ot=!1,mt=!1;const Et=()=>{gt?.unsubscribe(),gt=void 0},_t=()=>{Et(),at=Pt=void 0,ot=mt=!1},Ze=()=>{const Oe=at;_t(),Oe?.unsubscribe()};return(0,Pe.e)((Oe,rt)=>{jt++,!mt&&!ot&&Et();const Dt=Pt=Pt??ye();rt.add(()=>{jt--,0===jt&&!mt&&!ot&&(gt=Fe(Ze,ge))}),Dt.subscribe(rt),!at&&jt>0&&(at=new j.Hp({next:lt=>Dt.next(lt),error:lt=>{mt=!0,Et(),gt=Fe(_t,qe,lt),Dt.error(lt)},complete:()=>{ot=!0,Et(),gt=Fe(_t,ce),Dt.complete()}}),(0,v.Xf)(Oe).subscribe(at))})(Ne)}}function Fe($e,ye,...qe){if(!0===ye)return void $e();if(!1===ye)return;const ce=new j.Hp({next:()=>{ce.unsubscribe(),$e()}});return(0,v.Xf)(ye(...qe)).subscribe(ce)}},8675:(rn,tt,G)=>{G.d(tt,{O:()=>Pe});var v=G(7272),te=G(7669),j=G(4482);function Pe(...Ce){const Fe=(0,te.yG)(Ce);return(0,j.e)(($e,ye)=>{(Fe?(0,v.z)(Ce,$e,Fe):(0,v.z)(Ce,$e)).subscribe(ye)})}},9468:(rn,tt,G)=>{G.d(tt,{R:()=>te});var v=G(4482);function te(j,Pe=0){return(0,v.e)((Ce,Fe)=>{Fe.add(j.schedule(()=>Ce.subscribe(Fe),Pe))})}},3900:(rn,tt,G)=>{G.d(tt,{w:()=>Pe});var v=G(8421),te=G(4482),j=G(5403);function Pe(Ce,Fe){return(0,te.e)(($e,ye)=>{let qe=null,ce=0,ge=!1;const Ne=()=>ge&&!qe&&ye.complete();$e.subscribe((0,j.x)(ye,at=>{qe?.unsubscribe();let gt=0;const Pt=ce++;(0,v.Xf)(Ce(at,Pt)).subscribe(qe=(0,j.x)(ye,jt=>ye.next(Fe?Fe(at,jt,Pt,gt++):jt),()=>{qe=null,Ne()}))},()=>{ge=!0,Ne()}))})}},5698:(rn,tt,G)=>{G.d(tt,{q:()=>Pe});var v=G(515),te=G(4482),j=G(5403);function Pe(Ce){return Ce<=0?()=>v.E:(0,te.e)((Fe,$e)=>{let ye=0;Fe.subscribe((0,j.x)($e,qe=>{++ye<=Ce&&($e.next(qe),Ce<=ye&&$e.complete())}))})}},8505:(rn,tt,G)=>{G.d(tt,{b:()=>Ce});var v=G(576),te=G(4482),j=G(5403),Pe=G(4671);function Ce(Fe,$e,ye){const qe=(0,v.m)(Fe)||$e||ye?{next:Fe,error:$e,complete:ye}:Fe;return qe?(0,te.e)((ce,ge)=>{var Ne;null===(Ne=qe.subscribe)||void 0===Ne||Ne.call(qe);let at=!0;ce.subscribe((0,j.x)(ge,gt=>{var Pt;null===(Pt=qe.next)||void 0===Pt||Pt.call(qe,gt),ge.next(gt)},()=>{var gt;at=!1,null===(gt=qe.complete)||void 0===gt||gt.call(qe),ge.complete()},gt=>{var Pt;at=!1,null===(Pt=qe.error)||void 0===Pt||Pt.call(qe,gt),ge.error(gt)},()=>{var gt,Pt;at&&(null===(gt=qe.unsubscribe)||void 0===gt||gt.call(qe)),null===(Pt=qe.finalize)||void 0===Pt||Pt.call(qe)}))}):Pe.y}},8068:(rn,tt,G)=>{G.d(tt,{T:()=>Pe});var v=G(6805),te=G(4482),j=G(5403);function Pe(Fe=Ce){return(0,te.e)(($e,ye)=>{let qe=!1;$e.subscribe((0,j.x)(ye,ce=>{qe=!0,ye.next(ce)},()=>qe?ye.complete():ye.error(Fe())))})}function Ce(){return new v.K}},4408:(rn,tt,G)=>{G.d(tt,{o:()=>Ce});var v=G(727);class te extends v.w0{constructor($e,ye){super()}schedule($e,ye=0){return this}}const j={setInterval(Fe,$e,...ye){const{delegate:qe}=j;return qe?.setInterval?qe.setInterval(Fe,$e,...ye):setInterval(Fe,$e,...ye)},clearInterval(Fe){const{delegate:$e}=j;return($e?.clearInterval||clearInterval)(Fe)},delegate:void 0};var Pe=G(8737);class Ce extends te{constructor($e,ye){super($e,ye),this.scheduler=$e,this.work=ye,this.pending=!1}schedule($e,ye=0){var qe;if(this.closed)return this;this.state=$e;const ce=this.id,ge=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(ge,ce,ye)),this.pending=!0,this.delay=ye,this.id=null!==(qe=this.id)&&void 0!==qe?qe:this.requestAsyncId(ge,this.id,ye),this}requestAsyncId($e,ye,qe=0){return j.setInterval($e.flush.bind($e,this),qe)}recycleAsyncId($e,ye,qe=0){if(null!=qe&&this.delay===qe&&!1===this.pending)return ye;null!=ye&&j.clearInterval(ye)}execute($e,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const qe=this._execute($e,ye);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,ye){let ce,qe=!1;try{this.work($e)}catch(ge){qe=!0,ce=ge||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:$e,scheduler:ye}=this,{actions:qe}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Pe.P)(qe,this),null!=$e&&(this.id=this.recycleAsyncId(ye,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(rn,tt,G)=>{G.d(tt,{v:()=>j});var v=G(6063);class te{constructor(Ce,Fe=te.now){this.schedulerActionCtor=Ce,this.now=Fe}schedule(Ce,Fe=0,$e){return new this.schedulerActionCtor(this,Ce).schedule($e,Fe)}}te.now=v.l.now;class j extends te{constructor(Ce,Fe=te.now){super(Ce,Fe),this.actions=[],this._active=!1}flush(Ce){const{actions:Fe}=this;if(this._active)return void Fe.push(Ce);let $e;this._active=!0;do{if($e=Ce.execute(Ce.state,Ce.delay))break}while(Ce=Fe.shift());if(this._active=!1,$e){for(;Ce=Fe.shift();)Ce.unsubscribe();throw $e}}}},4986:(rn,tt,G)=>{G.d(tt,{z:()=>j});var v=G(4408);const j=new(G(7565).v)(v.o)},6063:(rn,tt,G)=>{G.d(tt,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(rn,tt,G)=>{G.d(tt,{z:()=>v});const v={setTimeout(te,j,...Pe){const{delegate:Ce}=v;return Ce?.setTimeout?Ce.setTimeout(te,j,...Pe):setTimeout(te,j,...Pe)},clearTimeout(te){const{delegate:j}=v;return(j?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(rn,tt,G)=>{G.d(tt,{h:()=>te});const te=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rn,tt,G)=>{G.d(tt,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(rn,tt,G)=>{G.d(tt,{K:()=>te});const te=(0,G(3888).d)(j=>function(){j(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(rn,tt,G)=>{G.d(tt,{_6:()=>Fe,jO:()=>Pe,yG:()=>Ce});var v=G(576);function j($e){return $e[$e.length-1]}function Pe($e){return(0,v.m)(j($e))?$e.pop():void 0}function Ce($e){return function te($e){return $e&&(0,v.m)($e.schedule)}(j($e))?$e.pop():void 0}function Fe($e,ye){return"number"==typeof j($e)?$e.pop():ye}},4742:(rn,tt,G)=>{G.d(tt,{D:()=>Ce});const{isArray:v}=Array,{getPrototypeOf:te,prototype:j,keys:Pe}=Object;function Ce($e){if(1===$e.length){const ye=$e[0];if(v(ye))return{args:ye,keys:null};if(function Fe($e){return $e&&"object"==typeof $e&&te($e)===j}(ye)){const qe=Pe(ye);return{args:qe.map(ce=>ye[ce]),keys:qe}}}return{args:$e,keys:null}}},8737:(rn,tt,G)=>{function v(te,j){if(te){const Pe=te.indexOf(j);0<=Pe&&te.splice(Pe,1)}}G.d(tt,{P:()=>v})},3888:(rn,tt,G)=>{function v(te){const Pe=te(Ce=>{Error.call(Ce),Ce.stack=(new Error).stack});return Pe.prototype=Object.create(Error.prototype),Pe.prototype.constructor=Pe,Pe}G.d(tt,{d:()=>v})},1810:(rn,tt,G)=>{function v(te,j){return te.reduce((Pe,Ce,Fe)=>(Pe[Ce]=j[Fe],Pe),{})}G.d(tt,{n:()=>v})},2806:(rn,tt,G)=>{G.d(tt,{O:()=>Pe,x:()=>j});var v=G(2416);let te=null;function j(Ce){if(v.v.useDeprecatedSynchronousErrorHandling){const Fe=!te;if(Fe&&(te={errorThrown:!1,error:null}),Ce(),Fe){const{errorThrown:$e,error:ye}=te;if(te=null,$e)throw ye}}else Ce()}function Pe(Ce){v.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=Ce)}},9672:(rn,tt,G)=>{function v(te,j,Pe,Ce=0,Fe=!1){const $e=j.schedule(function(){Pe(),Fe?te.add(this.schedule(null,Ce)):this.unsubscribe()},Ce);if(te.add($e),!Fe)return $e}G.d(tt,{f:()=>v})},4671:(rn,tt,G)=>{function v(te){return te}G.d(tt,{y:()=>v})},1144:(rn,tt,G)=>{G.d(tt,{z:()=>v});const v=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(rn,tt,G)=>{G.d(tt,{D:()=>te});var v=G(576);function te(j){return Symbol.asyncIterator&&(0,v.m)(j?.[Symbol.asyncIterator])}},576:(rn,tt,G)=>{function v(te){return"function"==typeof te}G.d(tt,{m:()=>v})},3670:(rn,tt,G)=>{G.d(tt,{c:()=>j});var v=G(8822),te=G(576);function j(Pe){return(0,te.m)(Pe[v.L])}},6495:(rn,tt,G)=>{G.d(tt,{T:()=>j});var v=G(2202),te=G(576);function j(Pe){return(0,te.m)(Pe?.[v.h])}},8239:(rn,tt,G)=>{G.d(tt,{t:()=>te});var v=G(576);function te(j){return(0,v.m)(j?.then)}},3260:(rn,tt,G)=>{G.d(tt,{L:()=>Pe,Q:()=>j});var v=G(7582),te=G(576);function j(Ce){return(0,v.FC)(this,arguments,function*(){const $e=Ce.getReader();try{for(;;){const{value:ye,done:qe}=yield(0,v.qq)($e.read());if(qe)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(ye)}}finally{$e.releaseLock()}})}function Pe(Ce){return(0,te.m)(Ce?.getReader)}},4482:(rn,tt,G)=>{G.d(tt,{A:()=>te,e:()=>j});var v=G(576);function te(Pe){return(0,v.m)(Pe?.lift)}function j(Pe){return Ce=>{if(te(Ce))return Ce.lift(function(Fe){try{return Pe(Fe,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(rn,tt,G)=>{G.d(tt,{Z:()=>Pe});var v=G(4004);const{isArray:te}=Array;function Pe(Ce){return(0,v.U)(Fe=>function j(Ce,Fe){return te(Fe)?Ce(...Fe):Ce(Fe)}(Ce,Fe))}},5032:(rn,tt,G)=>{function v(){}G.d(tt,{Z:()=>v})},9635:(rn,tt,G)=>{G.d(tt,{U:()=>j,z:()=>te});var v=G(4671);function te(...Pe){return j(Pe)}function j(Pe){return 0===Pe.length?v.y:1===Pe.length?Pe[0]:function(Fe){return Pe.reduce(($e,ye)=>ye($e),Fe)}}},7849:(rn,tt,G)=>{G.d(tt,{h:()=>j});var v=G(2416),te=G(3410);function j(Pe){te.z.setTimeout(()=>{const{onUnhandledError:Ce}=v.v;if(!Ce)throw Pe;Ce(Pe)})}},4532:(rn,tt,G)=>{function v(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(tt,{z:()=>v})},7340:(rn,tt,G)=>{G.d(tt,{F4:()=>ce,IO:()=>Pt,LC:()=>te,X$:()=>Pe,ZE:()=>Et,ZN:()=>mt,_7:()=>gt,_j:()=>v,eR:()=>ge,jt:()=>Ce,k1:()=>_t,l3:()=>j,oB:()=>ye,oQ:()=>Ne,pV:()=>at,ru:()=>Fe,vP:()=>$e});class v{}class te{}const j="*";function Pe(Ze,Oe){return{type:7,name:Ze,definitions:Oe,options:{}}}function Ce(Ze,Oe=null){return{type:4,styles:Oe,timings:Ze}}function Fe(Ze,Oe=null){return{type:3,steps:Ze,options:Oe}}function $e(Ze,Oe=null){return{type:2,steps:Ze,options:Oe}}function ye(Ze){return{type:6,styles:Ze,offset:null}}function ce(Ze){return{type:5,steps:Ze}}function ge(Ze,Oe,rt=null){return{type:1,expr:Ze,animation:Oe,options:rt}}function Ne(Ze,Oe=null){return{type:8,animation:Ze,options:Oe}}function at(Ze=null){return{type:9,options:Ze}}function gt(Ze,Oe=null){return{type:10,animation:Ze,options:Oe}}function Pt(Ze,Oe,rt=null){return{type:11,selector:Ze,animation:Oe,options:rt}}function ot(Ze){Promise.resolve().then(Ze)}class mt{constructor(Oe=0,rt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Oe+rt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}onStart(Oe){this._originalOnStartFns.push(Oe),this._onStartFns.push(Oe)}onDone(Oe){this._originalOnDoneFns.push(Oe),this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ot(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Oe){this._position=this.totalTime?Oe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Oe){const rt="start"==Oe?this._onStartFns:this._onDoneFns;rt.forEach(Dt=>Dt()),rt.length=0}}class Et{constructor(Oe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Oe;let rt=0,Dt=0,lt=0;const q=this.players.length;0==q?ot(()=>this._onFinish()):this.players.forEach(Bt=>{Bt.onDone(()=>{++rt==q&&this._onFinish()}),Bt.onDestroy(()=>{++Dt==q&&this._onDestroy()}),Bt.onStart(()=>{++lt==q&&this._onStart()})}),this.totalTime=this.players.reduce((Bt,fn)=>Math.max(Bt,fn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}init(){this.players.forEach(Oe=>Oe.init())}onStart(Oe){this._onStartFns.push(Oe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[])}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Oe=>Oe.play())}pause(){this.players.forEach(Oe=>Oe.pause())}restart(){this.players.forEach(Oe=>Oe.restart())}finish(){this._onFinish(),this.players.forEach(Oe=>Oe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Oe=>Oe.destroy()),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this.players.forEach(Oe=>Oe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Oe){const rt=Oe*this.totalTime;this.players.forEach(Dt=>{const lt=Dt.totalTime?Math.min(1,rt/Dt.totalTime):1;Dt.setPosition(lt)})}getPosition(){const Oe=this.players.reduce((rt,Dt)=>null===rt||Dt.totalTime>rt.totalTime?Dt:rt,null);return null!=Oe?Oe.getPosition():0}beforeDestroy(){this.players.forEach(Oe=>{Oe.beforeDestroy&&Oe.beforeDestroy()})}triggerCallback(Oe){const rt="start"==Oe?this._onStartFns:this._onDoneFns;rt.forEach(Dt=>Dt()),rt.length=0}}const _t="!"},6895:(rn,tt,G)=>{G.d(tt,{Do:()=>Et,EM:()=>vn,HT:()=>Pe,JF:()=>Ti,K0:()=>Fe,Mx:()=>Rs,O5:()=>Ue,Ov:()=>cs,PM:()=>Me,S$:()=>jt,V_:()=>qe,Ye:()=>_t,b0:()=>mt,bD:()=>$s,ez:()=>Ro,mk:()=>jn,q:()=>j,sg:()=>Hs,w_:()=>Ce});var v=G(4650);let te=null;function j(){return te}function Pe(N){te||(te=N)}class Ce{}const Fe=new v.OlP("DocumentToken");let $e=(()=>{class N{historyGo(V){throw new Error("Not implemented")}}return N.\u0275fac=function(V){return new(V||N)},N.\u0275prov=v.Yz7({token:N,factory:function(){return function ye(){return(0,v.LFG)(ce)}()},providedIn:"platform"}),N})();const qe=new v.OlP("Location Initialized");let ce=(()=>{class N extends $e{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(V){const ie=j().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",V,!1),()=>ie.removeEventListener("popstate",V)}onHashChange(V){const ie=j().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",V,!1),()=>ie.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,ie,Te){ge()?this._history.pushState(V,ie,Te):this._location.hash=Te}replaceState(V,ie,Te){ge()?this._history.replaceState(V,ie,Te):this._location.hash=Te}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return N.\u0275fac=function(V){return new(V||N)(v.LFG(Fe))},N.\u0275prov=v.Yz7({token:N,factory:function(){return function Ne(){return new ce((0,v.LFG)(Fe))}()},providedIn:"platform"}),N})();function ge(){return!!window.history.pushState}function at(N,K){if(0==N.length)return K;if(0==K.length)return N;let V=0;return N.endsWith("/")&&V++,K.startsWith("/")&&V++,2==V?N+K.substring(1):1==V?N+K:N+"/"+K}function gt(N){const K=N.match(/#|\?|$/),V=K&&K.index||N.length;return N.slice(0,V-("/"===N[V-1]?1:0))+N.slice(V)}function Pt(N){return N&&"?"!==N[0]?"?"+N:N}let jt=(()=>{class N{historyGo(V){throw new Error("Not implemented")}}return N.\u0275fac=function(V){return new(V||N)},N.\u0275prov=v.Yz7({token:N,factory:function(){return(0,v.f3M)(mt)},providedIn:"root"}),N})();const ot=new v.OlP("appBaseHref");let mt=(()=>{class N extends jt{constructor(V,ie){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=ie??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return at(this._baseHref,V)}path(V=!1){const ie=this._platformLocation.pathname+Pt(this._platformLocation.search),Te=this._platformLocation.hash;return Te&&V?`${ie}${Te}`:ie}pushState(V,ie,Te,ut){const bt=this.prepareExternalUrl(Te+Pt(ut));this._platformLocation.pushState(V,ie,bt)}replaceState(V,ie,Te,ut){const bt=this.prepareExternalUrl(Te+Pt(ut));this._platformLocation.replaceState(V,ie,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return N.\u0275fac=function(V){return new(V||N)(v.LFG($e),v.LFG(ot,8))},N.\u0275prov=v.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),Et=(()=>{class N extends jt{constructor(V,ie){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(V){const ie=at(this._baseHref,V);return ie.length>0?"#"+ie:ie}pushState(V,ie,Te,ut){let bt=this.prepareExternalUrl(Te+Pt(ut));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.pushState(V,ie,bt)}replaceState(V,ie,Te,ut){let bt=this.prepareExternalUrl(Te+Pt(ut));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ie,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return N.\u0275fac=function(V){return new(V||N)(v.LFG($e),v.LFG(ot,8))},N.\u0275prov=v.Yz7({token:N,factory:N.\u0275fac}),N})(),_t=(()=>{class N{constructor(V){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const ie=this._locationStrategy.getBaseHref();this._basePath=function Dt(N){if(new RegExp("^(https?:)?//").test(N)){const[,V]=N.split(/\/\/[^\/]+/);return V}return N}(gt(rt(ie))),this._locationStrategy.onPopState(Te=>{this._subject.emit({url:this.path(!0),pop:!0,state:Te.state,type:Te.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,ie=""){return this.path()==this.normalize(V+Pt(ie))}normalize(V){return N.stripTrailingSlash(function Oe(N,K){if(!N||!K.startsWith(N))return K;const V=K.substring(N.length);return""===V||["/",";","?","#"].includes(V[0])?V:K}(this._basePath,rt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,ie="",Te=null){this._locationStrategy.pushState(Te,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pt(ie)),Te)}replaceState(V,ie="",Te=null){this._locationStrategy.replaceState(Te,"",V,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pt(ie)),Te)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",ie){this._urlChangeListeners.forEach(Te=>Te(V,ie))}subscribe(V,ie,Te){return this._subject.subscribe({next:V,error:ie,complete:Te})}}return N.normalizeQueryParams=Pt,N.joinWithSlash=at,N.stripTrailingSlash=gt,N.\u0275fac=function(V){return new(V||N)(v.LFG(jt))},N.\u0275prov=v.Yz7({token:N,factory:function(){return function Ze(){return new _t((0,v.LFG)(jt))}()},providedIn:"root"}),N})();function rt(N){return N.replace(/\/index.html$/,"")}function Rs(N,K){K=encodeURIComponent(K);for(const V of N.split(";")){const ie=V.indexOf("="),[Te,ut]=-1==ie?[V,""]:[V.slice(0,ie),V.slice(ie+1)];if(Te.trim()===K)return decodeURIComponent(ut)}return null}const Vi=/\s+/,Kt=[];let jn=(()=>{class N{constructor(V,ie,Te,ut){this._iterableDiffers=V,this._keyValueDiffers=ie,this._ngEl=Te,this._renderer=ut,this.initialClasses=Kt,this.stateMap=new Map}set klass(V){this.initialClasses=null!=V?V.trim().split(Vi):Kt}set ngClass(V){this.rawClass="string"==typeof V?V.trim().split(Vi):V}ngDoCheck(){for(const ie of this.initialClasses)this._updateState(ie,!0);const V=this.rawClass;if(Array.isArray(V)||V instanceof Set)for(const ie of V)this._updateState(ie,!0);else if(null!=V)for(const ie of Object.keys(V))this._updateState(ie,Boolean(V[ie]));this._applyStateDiff()}_updateState(V,ie){const Te=this.stateMap.get(V);void 0!==Te?(Te.enabled!==ie&&(Te.changed=!0,Te.enabled=ie),Te.touched=!0):this.stateMap.set(V,{enabled:ie,changed:!0,touched:!0})}_applyStateDiff(){for(const V of this.stateMap){const ie=V[0],Te=V[1];Te.changed?(this._toggleClass(ie,Te.enabled),Te.changed=!1):Te.touched||(Te.enabled&&this._toggleClass(ie,!1),this.stateMap.delete(ie)),Te.touched=!1}}_toggleClass(V,ie){(V=V.trim()).length>0&&V.split(Vi).forEach(Te=>{ie?this._renderer.addClass(this._ngEl.nativeElement,Te):this._renderer.removeClass(this._ngEl.nativeElement,Te)})}}return N.\u0275fac=function(V){return new(V||N)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},N.\u0275dir=v.lG2({type:N,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),N})();class ji{constructor(K,V,ie,Te){this.$implicit=K,this.ngForOf=V,this.index=ie,this.count=Te}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hs=(()=>{class N{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,ie,Te){this._viewContainer=V,this._template=ie,this._differs=Te,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ie=this._viewContainer;V.forEachOperation((Te,ut,bt)=>{if(null==Te.previousIndex)ie.createEmbeddedView(this._template,new ji(Te.item,this._ngForOf,-1,-1),null===bt?void 0:bt);else if(null==bt)ie.remove(null===ut?void 0:ut);else if(null!==ut){const Wt=ie.get(ut);ie.move(Wt,bt),Yr(Wt,Te)}});for(let Te=0,ut=ie.length;Te<ut;Te++){const Wt=ie.get(Te).context;Wt.index=Te,Wt.count=ut,Wt.ngForOf=this._ngForOf}V.forEachIdentityChange(Te=>{Yr(ie.get(Te.currentIndex),Te)})}static ngTemplateContextGuard(V,ie){return!0}}return N.\u0275fac=function(V){return new(V||N)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},N.\u0275dir=v.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function Yr(N,K){N.context.$implicit=K.item}let Ue=(()=>{class N{constructor(V,ie){this._viewContainer=V,this._context=new Ve,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){wt("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){wt("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ie){return!0}}return N.\u0275fac=function(V){return new(V||N)(v.Y36(v.s_b),v.Y36(v.Rgc))},N.\u0275dir=v.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Ve{constructor(){this.$implicit=null,this.ngIf=null}}function wt(N,K){if(K&&!K.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,v.AaK)(K)}'.`)}class ho{createSubscription(K,V){return K.subscribe({next:V,error:ie=>{throw ie}})}dispose(K){K.unsubscribe()}}class yr{createSubscription(K,V){return K.then(V,ie=>{throw ie})}dispose(K){}}const wr=new yr,cr=new ho;let cs=(()=>{class N{constructor(V){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=V}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ie=>this._updateLatestValue(V,ie))}_selectStrategy(V){if((0,v.QGY)(V))return wr;if((0,v.F4k)(V))return cr;throw function ms(N,K){return new v.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ie){V===this._obj&&(this._latestValue=ie,this._ref.markForCheck())}}return N.\u0275fac=function(V){return new(V||N)(v.Y36(v.sBO,16))},N.\u0275pipe=v.Yjl({name:"async",type:N,pure:!1,standalone:!0}),N})(),Ro=(()=>{class N{}return N.\u0275fac=function(V){return new(V||N)},N.\u0275mod=v.oAB({type:N}),N.\u0275inj=v.cJS({}),N})();const $s="browser",Ms="server";function Me(N){return N===Ms}let vn=(()=>{class N{}return N.\u0275prov=(0,v.Yz7)({token:N,providedIn:"root",factory:()=>new tn((0,v.LFG)(Fe),window)}),N})();class tn{constructor(K,V){this.document=K,this.window=V,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const V=function _r(N,K){const V=N.getElementById(K)||N.getElementsByName(K)[0];if(V)return V;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const ie=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let Te=ie.currentNode;for(;Te;){const ut=Te.shadowRoot;if(ut){const bt=ut.getElementById(K)||ut.querySelector(`[name="${K}"]`);if(bt)return bt}Te=ie.nextNode()}}return null}(this.document,K);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=K)}}scrollToElement(K){const V=K.getBoundingClientRect(),ie=V.left+this.window.pageXOffset,Te=V.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(ie-ut[0],Te-ut[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=er(this.window.history)||er(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function er(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Ti{}},4650:(rn,tt,G)=>{G.d(tt,{$8M:()=>Fs,$WT:()=>Zi,$Z:()=>Vf,AFp:()=>JE,ALo:()=>wE,AaK:()=>ye,Akn:()=>Ru,BQk:()=>op,CHM:()=>L,CRH:()=>PE,CZH:()=>Ny,CqO:()=>nh,D6c:()=>bI,DdM:()=>pE,EJc:()=>Hw,EpF:()=>lp,F4k:()=>Bm,FYo:()=>sa,FiY:()=>An,Gf:()=>RE,GfV:()=>Fd,Gpc:()=>ge,JOm:()=>Za,KtG:()=>re,LFG:()=>qt,LSH:()=>Qu,Lbi:()=>Uw,Lck:()=>F0,MMx:()=>gv,NdJ:()=>Dg,O4$:()=>Bo,OlP:()=>ti,Oqu:()=>ad,P3R:()=>_h,PXZ:()=>iI,Q6J:()=>Ig,QGY:()=>Gh,QbO:()=>Bw,Qsj:()=>hu,R0b:()=>ju,RDi:()=>co,Rgc:()=>Qg,SBq:()=>Zn,Sil:()=>Gw,Suo:()=>ME,TTD:()=>Ot,TgZ:()=>eh,VKq:()=>gE,X6Q:()=>uI,XFs:()=>Yt,Xpm:()=>Dn,Xts:()=>Xu,Y36:()=>Vd,YKP:()=>sE,YNc:()=>sp,Yjl:()=>ir,Yz7:()=>Zt,Z0I:()=>nr,ZZ4:()=>$v,_Bn:()=>iE,_UZ:()=>Cg,_Vd:()=>Ct,_c5:()=>TI,_uU:()=>Vg,aQg:()=>jv,c2e:()=>$w,cJS:()=>yn,cg1:()=>hy,dDg:()=>eI,dqk:()=>Ln,eFA:()=>f0,eJc:()=>Tv,ekj:()=>kg,eoX:()=>u0,f3M:()=>Vr,g9A:()=>t0,h0i:()=>Ap,hGG:()=>SI,hij:()=>mp,iGM:()=>AE,ifc:()=>he,ip1:()=>XE,jDz:()=>aE,kL8:()=>py,kcU:()=>Xa,lG2:()=>Pn,lcZ:()=>IE,lqb:()=>yl,lri:()=>a0,n5z:()=>wl,oAB:()=>Qe,oxw:()=>jm,q4F:()=>Rf,qLn:()=>Rc,qOj:()=>gg,qZA:()=>zh,rWj:()=>l0,sBO:()=>cI,s_b:()=>Ry,soG:()=>xy,tb:()=>d0,tp0:()=>qn,uIk:()=>vg,vHH:()=>ot,vpe:()=>Gc,wAp:()=>kr,xp6:()=>dm,ynx:()=>th,z2F:()=>Oy,zSh:()=>Nd,zs3:()=>Jc});var v=G(7579),te=G(727),j=G(9751),Pe=G(6451),Ce=G(3099);function Fe(n){for(let i in n)if(n[i]===Fe)return i;throw Error("Could not find renamed property on target object.")}function $e(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function qe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const ce=Fe({__forward_ref__:Fe});function ge(n){return n.__forward_ref__=ge,n.toString=function(){return ye(this())},n}function Ne(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===ge}function gt(n){return n&&!!n.\u0275providers}const jt="https://g.co/ng/security#xss";class ot extends Error{constructor(i,o){super(mt(i,o)),this.code=i}}function mt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function Et(n){return"string"==typeof n?n:null==n?"":String(n)}function Dt(n,i){throw new ot(-201,!1)}function Ye(n,i){null==n&&function ke(n,i,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Zt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function zn(n){return Fn(n,Ar)||Fn(n,br)}function nr(n){return null!==zn(n)}function Fn(n,i){return n.hasOwnProperty(i)?n[i]:null}function Gt(n){return n&&(n.hasOwnProperty(fr)||n.hasOwnProperty(Wn))?n[fr]:null}const Ar=Fe({\u0275prov:Fe}),fr=Fe({\u0275inj:Fe}),br=Fe({ngInjectableDef:Fe}),Wn=Fe({ngInjectorDef:Fe});var Yt=(()=>((Yt=Yt||{})[Yt.Default=0]="Default",Yt[Yt.Host=1]="Host",Yt[Yt.Self=2]="Self",Yt[Yt.SkipSelf=4]="SkipSelf",Yt[Yt.Optional=8]="Optional",Yt))();let In;function qr(n){const i=In;return In=n,i}function Qn(n,i,o){const l=zn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Yt.Optional?null:void 0!==i?i:void Dt(ye(n))}const Ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),li={},wi="__NG_DI_FLAG__",Br="ngTempTokenPath",ui="ngTokenPath",Lr=/\n/gm,ci="\u0275",Xn="__source";let Nr;function Cn(n){const i=Nr;return Nr=n,i}function Qt(n,i=Yt.Default){if(void 0===Nr)throw new ot(-203,!1);return null===Nr?Qn(n,void 0,i):Nr.get(n,i&Yt.Optional?null:void 0,i)}function qt(n,i=Yt.Default){return(function gi(){return In}()||Qt)(Ne(n),i)}function Vr(n,i=Yt.Default){return qt(n,Pi(i))}function Pi(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function mi(n){const i=[];for(let o=0;o<n.length;o++){const l=Ne(n[o]);if(Array.isArray(l)){if(0===l.length)throw new ot(900,!1);let g,E=Yt.Default;for(let D=0;D<l.length;D++){const P=l[D],U=Ni(P);"number"==typeof U?-1===U?g=P.token:E|=U:g=P}i.push(qt(g,E))}else i.push(qt(l))}return i}function qi(n,i){return n[wi]=i,n.prototype[wi]=i,n}function Ni(n){return n[wi]}function we(n){return{toString:n}.toString()}var oe=(()=>((oe=oe||{})[oe.OnPush=0]="OnPush",oe[oe.Default=1]="Default",oe))(),he=(()=>{return(n=he||(he={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",he;var n})();const ne={},Se=[],me=Fe({\u0275cmp:Fe}),ve=Fe({\u0275dir:Fe}),pe=Fe({\u0275pipe:Fe}),Le=Fe({\u0275mod:Fe}),nt=Fe({\u0275fac:Fe}),St=Fe({__NG_ELEMENT_ID__:Fe});let mn=0;function Dn(n){return we(()=>{const i=Js(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===oe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||he.Emulated,id:"c"+mn++,styles:n.styles||Se,_:null,schemas:n.schemas||null,tView:null};gr(o);const l=n.dependencies;return o.directiveDefs=Rs(l,!1),o.pipeDefs=Rs(l,!0),o})}function Li(n){return gn(n)||Cr(n)}function ht(n){return null!==n}function Qe(n){return we(()=>({type:n.type,bootstrap:n.bootstrap||Se,declarations:n.declarations||Se,imports:n.imports||Se,exports:n.exports||Se,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pn(n,i){if(null==n)return ne;const o={};for(const l in n)if(n.hasOwnProperty(l)){let g=n[l],E=g;Array.isArray(g)&&(E=g[1],g=g[0]),o[g]=l,i&&(i[g]=E)}return o}function Pn(n){return we(()=>{const i=Js(n);return gr(i),i})}function ir(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function gn(n){return n[me]||null}function Cr(n){return n[ve]||null}function vr(n){return n[pe]||null}function Zi(n){const i=gn(n)||Cr(n)||vr(n);return null!==i&&i.standalone}function _i(n,i){const o=n[Le]||null;if(!o&&!0===i)throw new Error(`Type ${ye(n)} does not have '\u0275mod' property.`);return o}function Js(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Se,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pn(n.inputs,i),outputs:pn(n.outputs)}}function gr(n){n.features?.forEach(i=>i(n))}function Rs(n,i){if(!n)return null;const o=i?vr:Li;return()=>("function"==typeof n?n():n).map(l=>o(l)).filter(ht)}const Vi=0,Kt=1,jn=2,Zr=3,$r=4,$i=5,ji=6,Hs=7,Yr=8,Ge=9,Ue=10,Ve=11,wt=12,kt=13,Mn=14,Bn=15,Tn=16,mr=17,ns=18,xi=19,Yi=20,Qr=21,ii=22,ho=1,yr=2,wr=7,cr=8,cs=9,Jn=10;function Is(n){return Array.isArray(n)&&"object"==typeof n[ho]}function Hi(n){return Array.isArray(n)&&!0===n[ho]}function Cs(n){return 0!=(4&n.flags)}function jr(n){return n.componentOffset>-1}function sr(n){return 1==(1&n.flags)}function vi(n){return!!n.template}function Xr(n){return 0!=(256&n[jn])}function He(n,i){return n.hasOwnProperty(nt)?n[nt]:null}class pt{constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ot(){return vn}function vn(n){return n.type.prototype.ngOnChanges&&(n.setInput=er),tn}function tn(){const n=Hr(this),i=n?.current;if(i){const o=n.previous;if(o===ne)n.previous=i;else for(let l in i)o[l]=i[l];n.current=null,this.ngOnChanges(i)}}function er(n,i,o,l){const g=this.declaredInputs[o],E=Hr(n)||function Ti(n,i){return n[_r]=i}(n,{previous:ne,current:null}),D=E.current||(E.current={}),P=E.previous,U=P[g];D[g]=new pt(U&&U.currentValue,i,P===ne),n[l]=i}Ot.ngInherit=!0;const _r="__ngSimpleChanges__";function Hr(n){return n[_r]||null}const Rr=function(n,i,o){},zr="svg";function pr(n){for(;Array.isArray(n);)n=n[Vi];return n}function bi(n,i){return pr(i[n])}function hr(n,i){return pr(i[n.index])}function Yo(n,i){return n.data[i]}function Qi(n,i){const o=i[n];return Is(o)?o:o[Vi]}function Oi(n){return 64==(64&n[jn])}function _s(n,i){return null==i?null:n[i]}function ar(n){n[ns]=0}function vs(n,i){n[$i]+=i;let o=n,l=n[Zr];for(;null!==l&&(1===i&&1===o[$i]||-1===i&&0===o[$i]);)l[$i]+=i,o=l,l=l[Zr]}const Kn={lFrame:da(null),bindingsEnabled:!0};function La(){return Kn.bindingsEnabled}function x(){return Kn.lFrame.lView}function B(){return Kn.lFrame.tView}function L(n){return Kn.lFrame.contextLView=n,n[Yr]}function re(n){return Kn.lFrame.contextLView=null,n}function Xe(){let n=dn();for(;null!==n&&64===n.type;)n=n.parent;return n}function dn(){return Kn.lFrame.currentTNode}function zi(n,i){const o=Kn.lFrame;o.currentTNode=n,o.isParent=i}function mo(){return Kn.lFrame.isParent}function Ws(){Kn.lFrame.isParent=!1}function Es(){const n=Kn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function qs(){return Kn.lFrame.bindingIndex++}function yo(n){const i=Kn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function ul(n,i){const o=Kn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ts(i)}function Ts(n){Kn.lFrame.currentDirectiveIndex=n}function ua(){return Kn.lFrame.currentQueryIndex}function hi(n){Kn.lFrame.currentQueryIndex=n}function ca(n){const i=n[Kt];return 2===i.type?i.declTNode:1===i.type?n[ji]:null}function Qa(n,i,o){if(o&Yt.SkipSelf){let g=i,E=n;for(;!(g=g.parent,null!==g||o&Yt.Host||(g=ca(E),null===g||(E=E[Bn],10&g.type))););if(null===g)return!1;i=g,n=E}const l=Kn.lFrame=Va();return l.currentTNode=i,l.lView=n,!0}function Ji(n){const i=Va(),o=n[Kt];Kn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Va(){const n=Kn.lFrame,i=null===n?null:n.child;return null===i?da(n):i}function da(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function vo(){const n=Kn.lFrame;return Kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xo=vo;function Ea(){const n=vo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Or(){return Kn.lFrame.selectedIndex}function js(n){Kn.lFrame.selectedIndex=n}function ki(){const n=Kn.lFrame;return Yo(n.tView,n.selectedIndex)}function Bo(){Kn.lFrame.currentNamespace=zr}function Xa(){!function wa(){Kn.lFrame.currentNamespace=null}()}function Jo(n,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const E=n.data[o].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:P,ngAfterViewInit:U,ngAfterViewChecked:Q,ngOnDestroy:ae}=E;D&&(n.contentHooks??(n.contentHooks=[])).push(-o,D),P&&((n.contentHooks??(n.contentHooks=[])).push(o,P),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,P)),U&&(n.viewHooks??(n.viewHooks=[])).push(-o,U),Q&&((n.viewHooks??(n.viewHooks=[])).push(o,Q),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,Q)),null!=ae&&(n.destroyHooks??(n.destroyHooks=[])).push(o,ae)}}function ha(n,i,o){K(n,i,3,o)}function no(n,i,o,l){(3&n[jn])===o&&K(n,i,o,l)}function N(n,i){let o=n[jn];(3&o)===i&&(o&=2047,o+=1,n[jn]=o)}function K(n,i,o,l){const E=l??-1,D=i.length-1;let P=0;for(let U=void 0!==l?65535&n[ns]:0;U<D;U++)if("number"==typeof i[U+1]){if(P=i[U],null!=l&&P>=l)break}else i[U]<0&&(n[ns]+=65536),(P<E||-1==E)&&(V(n,o,i,U),n[ns]=(4294901760&n[ns])+U+2),U++}function V(n,i,o,l){const g=o[l]<0,E=o[l+1],P=n[g?-o[l]:o[l]];if(g){if(n[jn]>>11<n[ns]>>16&&(3&n[jn])===i){n[jn]+=2048,Rr(4,P,E);try{E.call(P)}finally{Rr(5,P,E)}}}else{Rr(4,P,E);try{E.call(P)}finally{Rr(5,P,E)}}}const ie=-1;class Te{constructor(i,o,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function On(n,i,o){let l=0;for(;l<o.length;){const g=o[l];if("number"==typeof g){if(0!==g)break;l++;const E=o[l++],D=o[l++],P=o[l++];n.setAttribute(i,D,P,E)}else{const E=g,D=o[++l];Eo(E)?n.setProperty(i,E,D):n.setAttribute(i,E,D),l++}}return l}function si(n){return 3===n||4===n||6===n}function Eo(n){return 64===n.charCodeAt(0)}function nn(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const g=i[l];"number"==typeof g?o=g:0===o||wn(n,o,g,null,-1===o||2===o?i[++l]:null)}}return n}function wn(n,i,o,l,g){let E=0,D=n.length;if(-1===i)D=-1;else for(;E<n.length;){const P=n[E++];if("number"==typeof P){if(P===i){D=-1;break}if(P>i){D=E-1;break}}}for(;E<n.length;){const P=n[E];if("number"==typeof P)break;if(P===o){if(null===l)return void(null!==g&&(n[E+1]=g));if(l===n[E+1])return void(n[E+2]=g)}E++,null!==l&&E++,null!==g&&E++}-1!==D&&(n.splice(D,0,i),E=D+1),n.splice(E++,0,o),null!==l&&n.splice(E++,0,l),null!==g&&n.splice(E++,0,g)}function ks(n){return n!==ie}function zt(n){return 32767&n}function Mt(n,i){let o=function et(n){return n>>16}(n),l=i;for(;o>0;)l=l[Bn],o--;return l}let bs=!0;function Ba(n){const i=bs;return bs=n,i}const Ja=255,Fl=5;let Ll=0;const ea={};function El(n,i){const o=el(n,i);if(-1!==o)return o;const l=i[Kt];l.firstCreatePass&&(n.injectorIndex=i.length,Ia(l.data,n),Ia(i,null),Ia(l.blueprint,null));const g=is(n,i),E=n.injectorIndex;if(ks(g)){const D=zt(g),P=Mt(g,i),U=P[Kt].data;for(let Q=0;Q<8;Q++)i[E+Q]=P[D+Q]|U[D+Q]}return i[E+8]=g,E}function Ia(n,i){n.push(0,0,0,0,0,0,0,0,i)}function el(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function is(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,g=i;for(;null!==g;){if(l=fa(g),null===l)return ie;if(o++,g=g[Bn],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return ie}function lr(n,i,o){!function Vl(n,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(St)&&(l=o[St]),null==l&&(l=o[St]=Ll++);const g=l&Ja;i.data[n+(g>>Fl)]|=1<<g}(n,i,o)}function cl(n,i,o){if(o&Yt.Optional||void 0!==n)return n;Dt()}function es(n,i,o,l){if(o&Yt.Optional&&void 0===l&&(l=null),!(o&(Yt.Self|Yt.Host))){const g=n[Ge],E=qr(void 0);try{return g?g.get(i,l,o&Yt.Optional):Qn(i,l,o&Yt.Optional)}finally{qr(E)}}return cl(l,0,o)}function Gn(n,i,o,l=Yt.Default,g){if(null!==n){if(1024&i[jn]){const D=function Ha(n,i,o,l,g){let E=n,D=i;for(;null!==E&&null!==D&&1024&D[jn]&&!(256&D[jn]);){const P=Pa(E,D,o,l|Yt.Self,ea);if(P!==ea)return P;let U=E.parent;if(!U){const Q=D[Qr];if(Q){const ae=Q.get(o,ea,l);if(ae!==ea)return ae}U=fa(D),D=D[Bn]}E=U}return g}(n,i,o,l,ea);if(D!==ea)return D}const E=Pa(n,i,o,l,ea);if(E!==ea)return E}return es(i,o,l,g)}function Pa(n,i,o,l,g){const E=function Xt(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(St)?n[St]:void 0;return"number"==typeof i?i>=0?i&Ja:Yl:i}(o);if("function"==typeof E){if(!Qa(i,n,l))return l&Yt.Host?cl(g,0,l):es(i,o,l,g);try{const D=E(l);if(null!=D||l&Yt.Optional)return D;Dt()}finally{Xo()}}else if("number"==typeof E){let D=null,P=el(n,i),U=ie,Q=l&Yt.Host?i[Tn][ji]:null;for((-1===P||l&Yt.SkipSelf)&&(U=-1===P?is(n,i):i[P+8],U!==ie&&$a(l,!1)?(D=i[Kt],P=zt(U),i=Mt(U,i)):P=-1);-1!==P;){const ae=i[Kt];if(ta(E,P,ae.data)){const Ie=or(P,i,o,D,l,Q);if(Ie!==ea)return Ie}U=i[P+8],U!==ie&&$a(l,i[Kt].data[P+8]===Q)&&ta(E,P,i)?(D=ae,P=zt(U),i=Mt(U,i)):P=-1}}return g}function or(n,i,o,l,g,E){const D=i[Kt],P=D.data[n+8],ae=ro(P,D,o,null==l?jr(P)&&bs:l!=D&&0!=(3&P.type),g&Yt.Host&&E===P);return null!==ae?Dr(i,D,ae,P):ea}function ro(n,i,o,l,g){const E=n.providerIndexes,D=i.data,P=1048575&E,U=n.directiveStart,ae=E>>20,Ke=g?P+ae:n.directiveEnd;for(let ct=l?P:P+ae;ct<Ke;ct++){const Nt=D[ct];if(ct<U&&o===Nt||ct>=U&&Nt.type===o)return ct}if(g){const ct=D[U];if(ct&&vi(ct)&&ct.type===o)return U}return null}function Dr(n,i,o,l){let g=n[o];const E=i.data;if(function ut(n){return n instanceof Te}(g)){const D=g;D.resolving&&function Ze(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ot(-200,`Circular dependency in DI detected for ${n}${o}`)}(function _t(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Et(n)}(E[o]));const P=Ba(D.canSeeViewProviders);D.resolving=!0;const U=D.injectImpl?qr(D.injectImpl):null;Qa(n,l,Yt.Default);try{g=n[o]=D.factory(void 0,E,n,l),i.firstCreatePass&&o>=l.directiveStart&&function Ol(n,i,o){const{ngOnChanges:l,ngOnInit:g,ngDoCheck:E}=i.type.prototype;if(l){const D=vn(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,D),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,D)}g&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,g),E&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,E),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,E))}(o,E[o],i)}finally{null!==U&&qr(U),Ba(P),D.resolving=!1,Xo()}}return g}function ta(n,i,o){return!!(o[i+(n>>Fl)]&1<<n)}function $a(n,i){return!(n&Yt.Self||n&Yt.Host&&i)}class wo{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return Gn(this._tNode,this._lView,i,Pi(l),o)}}function Yl(){return new wo(Xe(),x())}function wl(n){return we(()=>{const i=n.prototype.constructor,o=i[nt]||ja(i),l=Object.prototype;let g=Object.getPrototypeOf(n.prototype).constructor;for(;g&&g!==l;){const E=g[nt]||ja(g);if(E&&E!==o)return E;g=Object.getPrototypeOf(g)}return E=>new E})}function ja(n){return at(n)?()=>{const i=ja(Ne(n));return i&&i()}:He(n)}function fa(n){const i=n[Kt],o=i.type;return 2===o?i.declTNode:1===o?n[ji]:null}function Fs(n){return function Ca(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const l=o.length;let g=0;for(;g<l;){const E=o[g];if(si(E))break;if(0===E)g+=2;else if("number"==typeof E)for(g++;g<l&&"string"==typeof o[g];)g++;else{if(E===i)return o[g+1];g+=2}}}return null}(Xe(),n)}const jo="__parameters__";function na(n,i,o){return we(()=>{const l=function io(n){return function(...o){if(n){const l=n(...o);for(const g in l)this[g]=l[g]}}}(i);function g(...E){if(this instanceof g)return l.apply(this,E),this;const D=new g(...E);return P.annotation=D,P;function P(U,Q,ae){const Ie=U.hasOwnProperty(jo)?U[jo]:Object.defineProperty(U,jo,{value:[]})[jo];for(;Ie.length<=ae;)Ie.push(null);return(Ie[ae]=Ie[ae]||[]).push(D),U}}return o&&(g.prototype=Object.create(o.prototype)),g.prototype.ngMetadataName=n,g.annotationCls=g,g})}class ti{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Zt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pa(n,i){n.forEach(o=>Array.isArray(o)?pa(o,i):i(o))}function Ls(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function Ta(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Io(n,i,o){let l=u(n,i);return l>=0?n[1|l]=o:(l=~l,function Dl(n,i,o,l){let g=n.length;if(g==i)n.push(o,l);else if(1===g)n.push(l,n[0]),n[0]=o;else{for(g--,n.push(n[g-1],n[g]);g>i;)n[g]=n[g-2],g--;n[i]=o,n[i+1]=l}}(n,l,i,o)),l}function W(n,i){const o=u(n,i);if(o>=0)return n[1|o]}function u(n,i){return function f(n,i,o){let l=0,g=n.length>>o;for(;g!==l;){const E=l+(g-l>>1),D=n[E<<o];if(i===D)return E<<o;D>i?g=E:l=E+1}return~(g<<o)}(n,i,1)}const An=qi(na("Optional"),8),qn=qi(na("SkipSelf"),4);var Za=(()=>((Za=Za||{})[Za.Important=1]="Important",Za[Za.DashCase=2]="DashCase",Za))();const ss=new Map;let dc=0;const Re="__ngContext__";function ze(n,i){Is(i)?(n[Re]=i[Yi],function il(n){ss.set(n[Yi],n)}(i)):n[Re]=i}let Na;function ba(n,i){return Na(n,i)}function fc(n){const i=n[Zr];return Hi(i)?i[Zr]:i}function sl(n){return Pl(n[kt])}function au(n){return Pl(n[$r])}function Pl(n){for(;null!==n&&!Hi(n);)n=n[$r];return n}function Aa(n,i,o,l,g){if(null!=l){let E,D=!1;Hi(l)?E=l:Is(l)&&(D=!0,l=l[Vi]);const P=pr(l);0===n&&null!==o?null==g?Ra(i,o,P):Wr(i,o,P,g||null,!0):1===n&&null!==o?Wr(i,o,P,g||null,!0):2===n?function _c(n,i,o){const l=jl(n,i);l&&function Wu(n,i,o,l){n.removeChild(i,o,l)}(n,l,i,o)}(i,P,D):3===n&&i.destroyNode(P),null!=E&&function Kc(n,i,o,l,g){const E=o[wr];E!==pr(o)&&Aa(i,n,l,E,g);for(let P=Jn;P<o.length;P++){const U=o[P];vc(U[Kt],U,n,i,l,E)}}(i,n,E,o,g)}}function gc(n,i,o){return n.createElement(i,o)}function R(n,i){const o=n[cs],l=o.indexOf(i),g=i[Zr];512&i[jn]&&(i[jn]&=-513,vs(g,-1)),o.splice(l,1)}function J(n,i){if(n.length<=Jn)return;const o=Jn+i,l=n[o];if(l){const g=l[mr];null!==g&&g!==n&&R(g,l),i>0&&(n[o-1][$r]=l[$r]);const E=Ta(n,Jn+i);!function gl(n,i){vc(n,i,i[Ve],2,null,null),i[Vi]=null,i[ji]=null}(l[Kt],l);const D=E[xi];null!==D&&D.detachView(E[Kt]),l[Zr]=null,l[$r]=null,l[jn]&=-65}return l}function de(n,i){if(!(128&i[jn])){const o=i[Ve];o.destroyNode&&vc(n,i,o,3,null,null),function b(n){let i=n[kt];if(!i)return We(n[Kt],n);for(;i;){let o=null;if(Is(i))o=i[kt];else{const l=i[Jn];l&&(o=l)}if(!o){for(;i&&!i[$r]&&i!==n;)Is(i)&&We(i[Kt],i),i=i[Zr];null===i&&(i=n),Is(i)&&We(i[Kt],i),o=i&&i[$r]}i=o}}(i)}}function We(n,i){if(!(128&i[jn])){i[jn]&=-65,i[jn]|=128,function Jt(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const g=i[o[l]];if(!(g instanceof Te)){const E=o[l+1];if(Array.isArray(E))for(let D=0;D<E.length;D+=2){const P=g[E[D]],U=E[D+1];Rr(4,P,U);try{U.call(P)}finally{Rr(5,P,U)}}else{Rr(4,g,E);try{E.call(g)}finally{Rr(5,g,E)}}}}}(n,i),function yt(n,i){const o=n.cleanup,l=i[Hs];let g=-1;if(null!==o)for(let E=0;E<o.length-1;E+=2)if("string"==typeof o[E]){const D=o[E+3];D>=0?l[g=D]():l[g=-D].unsubscribe(),E+=2}else{const D=l[g=o[E+1]];o[E].call(D)}if(null!==l){for(let E=g+1;E<l.length;E++)(0,l[E])();i[Hs]=null}}(n,i),1===i[Kt].type&&i[Ve].destroy();const o=i[mr];if(null!==o&&Hi(i[Zr])){o!==i[Zr]&&R(o,i);const l=i[xi];null!==l&&l.detachView(n)}!function ia(n){ss.delete(n[Yi])}(i)}}function _n(n,i,o){return function rr(n,i,o){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return o[Vi];{const{componentOffset:g}=l;if(g>-1){const{encapsulation:E}=n.data[l.directiveStart+g];if(E===he.None||E===he.Emulated)return null}return hr(l,o)}}(n,i.parent,o)}function Wr(n,i,o,l,g){n.insertBefore(i,o,l,g)}function Ra(n,i,o){n.appendChild(i,o)}function Ko(n,i,o,l,g){null!==l?Wr(n,i,o,l,g):Ra(n,i,o)}function jl(n,i){return n.parentNode(i)}let eu,ch,Zu,Hl=function Xs(n,i,o){return 40&n.type?hr(n,o):null};function Nl(n,i,o,l){const g=_n(n,l,i),E=i[Ve],P=function Eu(n,i,o){return Hl(n,i,o)}(l.parent||i[ji],l,i);if(null!=g)if(Array.isArray(o))for(let U=0;U<o.length;U++)Ko(E,g,o[U],P,!1);else Ko(E,g,o,P,!1);void 0!==eu&&eu(E,l,i,o,g)}function ni(n,i){if(null!==i){const o=i.type;if(3&o)return hr(i,n);if(4&o)return qu(-1,n[i.index]);if(8&o){const l=i.child;if(null!==l)return ni(n,l);{const g=n[i.index];return Hi(g)?qu(-1,g):pr(g)}}if(32&o)return ba(i,n)()||pr(n[i.index]);{const l=yc(n,i);return null!==l?Array.isArray(l)?l[0]:ni(fc(n[Tn]),l):ni(n,i.next)}}return null}function yc(n,i){return null!==i?n[Tn][ji].projection[i.projection]:null}function qu(n,i){const o=Jn+n+1;if(o<i.length){const l=i[o],g=l[Kt].firstChild;if(null!==g)return ni(l,g)}return i[wr]}function md(n,i,o,l,g,E,D){for(;null!=o;){const P=l[o.index],U=o.type;if(D&&0===i&&(P&&ze(pr(P),l),o.flags|=2),32!=(32&o.flags))if(8&U)md(n,i,o.child,l,g,E,!1),Aa(i,n,g,P,E);else if(32&U){const Q=ba(o,l);let ae;for(;ae=Q();)Aa(i,n,g,ae,E);Aa(i,n,g,P,E)}else 16&U?pf(n,i,l,o,g,E):Aa(i,n,g,P,E);o=D?o.projectionNext:o.next}}function vc(n,i,o,l,g,E){md(o,l,n.firstChild,i,g,E,!1)}function pf(n,i,o,l,g,E){const D=o[Tn],U=D[ji].projection[l.projection];if(Array.isArray(U))for(let Q=0;Q<U.length;Q++)Aa(i,n,g,U[Q],E);else md(n,i,U,D[Zr],g,E,!0)}function uu(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function _d(n,i,o){const{mergedAttrs:l,classes:g,styles:E}=o;null!==l&&On(n,i,l),null!==g&&uu(n,i,g),null!==E&&function lu(n,i,o){n.setAttribute(i,"style",o)}(n,i,E)}function co(n){ch=n}function mf(n){return function vd(){if(void 0===Zu&&(Zu=null,Ln.trustedTypes))try{Zu=Ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zu}()?.createScriptURL(n)||n}class dh{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jt})`}}function xl(n){return n instanceof dh?n.changingThisBreaksApplicationSecurity:n}function Yu(n,i){const o=function hh(n){return n instanceof dh&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${jt})`)}return o===i}const wd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ri=(()=>((Ri=Ri||{})[Ri.NONE=0]="NONE",Ri[Ri.HTML=1]="HTML",Ri[Ri.STYLE=2]="STYLE",Ri[Ri.SCRIPT=3]="SCRIPT",Ri[Ri.URL=4]="URL",Ri[Ri.RESOURCE_URL=5]="RESOURCE_URL",Ri))();function Qu(n){const i=Wl();return i?i.sanitize(Ri.URL,n)||"":Yu(n,"URL")?xl(n):function Id(n){return(n=String(n)).match(wd)?n:"unsafe:"+n}(Et(n))}function Ma(n){const i=Wl();if(i)return mf(i.sanitize(Ri.RESOURCE_URL,n)||"");if(Yu(n,"ResourceURL"))return mf(xl(n));throw new ot(904,!1)}function _h(n,i,o){return function Sf(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Ma:Qu}(i,o)(n)}function Wl(){const n=x();return n&&n[wt]}const Xu=new ti("ENVIRONMENT_INITIALIZER"),Ad=new ti("INJECTOR",-1),bf=new ti("INJECTOR_DEF_TYPES");class vh{get(i,o=li){if(o===li){const l=new Error(`NullInjectorError: No provider for ${ye(i)}!`);throw l.name="NullInjectorError",l}return o}}function wh(...n){return{\u0275providers:Ih(0,n),\u0275fromNgModule:!0}}function Ih(n,...i){const o=[],l=new Set;let g;return pa(i,E=>{const D=E;Ju(D,o,[],l)&&(g||(g=[]),g.push(D))}),void 0!==g&&Rd(g,o),o}function Rd(n,i){for(let o=0;o<n.length;o++){const{providers:g}=n[o];Md(g,E=>{i.push(E)})}}function Ju(n,i,o,l){if(!(n=Ne(n)))return!1;let g=null,E=Gt(n);const D=!E&&gn(n);if(E||D){if(D&&!D.standalone)return!1;g=n}else{const U=n.ngModule;if(E=Gt(U),!E)return!1;g=U}const P=l.has(g);if(D){if(P)return!1;if(l.add(g),D.dependencies){const U="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const Q of U)Ju(Q,i,o,l)}}else{if(!E)return!1;{if(null!=E.imports&&!P){let Q;l.add(g);try{pa(E.imports,ae=>{Ju(ae,i,o,l)&&(Q||(Q=[]),Q.push(ae))})}finally{}void 0!==Q&&Rd(Q,i)}if(!P){const Q=He(g)||(()=>new g);i.push({provide:g,useFactory:Q,deps:Se},{provide:bf,useValue:g,multi:!0},{provide:Xu,useValue:()=>qt(g),multi:!0})}const U=E.providers;null==U||P||Md(U,ae=>{i.push(ae)})}}return g!==n&&void 0!==n.providers}function Md(n,i){for(let o of n)gt(o)&&(o=o.\u0275providers),Array.isArray(o)?Md(o,i):i(o)}const ku=Fe({provide:String,useValue:Fe});function Fu(n){return null!==n&&"object"==typeof n&&ku in n}function Du(n){return"function"==typeof n}const Nd=new ti("Set Injector scope."),xd={},Dh={};let bc;function du(){return void 0===bc&&(bc=new vh),bc}class yl{}class Lu extends yl{get destroyed(){return this._destroyed}constructor(i,o,l,g){super(),this.parent=o,this.source=l,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,T(i,D=>this.processProvider(D)),this.records.set(Ad,p(void 0,this)),g.has("environment")&&this.records.set(yl,p(void 0,this));const E=this.records.get(Nd);null!=E&&"string"==typeof E.value&&this.scopes.add(E.value),this.injectorDefTypes=new Set(this.get(bf.multi,Se,Yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Cn(this),l=qr(void 0);try{return i()}finally{Cn(o),qr(l)}}get(i,o=li,l=Yt.Default){this.assertNotDestroyed(),l=Pi(l);const g=Cn(this),E=qr(void 0);try{if(!(l&Yt.SkipSelf)){let P=this.records.get(i);if(void 0===P){const U=function _(n){return"function"==typeof n||"object"==typeof n&&n instanceof ti}(i)&&zn(i);P=U&&this.injectableDefInScope(U)?p(ec(i),xd):null,this.records.set(i,P)}if(null!=P)return this.hydrate(i,P)}return(l&Yt.Self?du():this.parent).get(i,o=l&Yt.Optional&&o===li?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Br]=D[Br]||[]).unshift(ye(i)),g)throw D;return function yi(n,i,o,l){const g=n[Br];throw i[Xn]&&g.unshift(i[Xn]),n.message=function be(n,i,o,l=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ci?n.slice(2):n;let g=ye(i);if(Array.isArray(i))g=i.map(ye).join(" -> ");else if("object"==typeof i){let E=[];for(let D in i)if(i.hasOwnProperty(D)){let P=i[D];E.push(D+":"+("string"==typeof P?JSON.stringify(P):ye(P)))}g=`{${E.join(", ")}}`}return`${o}${l?"("+l+")":""}[${g}]: ${n.replace(Lr,"\n  ")}`}("\n"+n.message,g,o,l),n[ui]=g,n[Br]=null,n}(D,i,"R3InjectorError",this.source)}throw D}finally{qr(E),Cn(g)}}resolveInjectorInitializers(){const i=Cn(this),o=qr(void 0);try{const l=this.get(Xu.multi,Se,Yt.Self);for(const g of l)g()}finally{Cn(i),qr(o)}}toString(){const i=[],o=this.records;for(const l of o.keys())i.push(ye(l));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processProvider(i){let o=Du(i=Ne(i))?i:Ne(i&&i.provide);const l=function Od(n){return Fu(n)?p(void 0,n.useValue):p(kd(n),xd)}(i);if(Du(i)||!0!==i.multi)this.records.get(o);else{let g=this.records.get(o);g||(g=p(void 0,xd,!0),g.factory=()=>mi(g.multi),this.records.set(o,g)),o=i,g.multi.push(i)}this.records.set(o,l)}hydrate(i,o){return o.value===xd&&(o.value=Dh,o.value=o.factory()),"object"==typeof o.value&&o.value&&function d(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Ne(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function ec(n){const i=zn(n),o=null!==i?i.factory:He(n);if(null!==o)return o;if(n instanceof ti)throw new ot(204,!1);if(n instanceof Function)return function Af(n){const i=n.length;if(i>0)throw function Go(n,i){const o=[];for(let l=0;l<n;l++)o.push(i);return o}(i,"?"),new ot(204,!1);const o=function Sr(n){return n&&(n[Ar]||n[br])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ot(204,!1)}function kd(n,i,o){let l;if(Du(n)){const g=Ne(n);return He(g)||ec(g)}if(Fu(n))l=()=>Ne(n.useValue);else if(function Ch(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...mi(n.deps||[]));else if(function Pd(n){return!(!n||!n.useExisting)}(n))l=()=>qt(Ne(n.useExisting));else{const g=Ne(n&&(n.useClass||n.provide));if(!function c(n){return!!n.deps}(n))return He(g)||ec(g);l=()=>new g(...mi(n.deps))}return l}function p(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function T(n,i){for(const o of n)Array.isArray(o)?T(o,i):o&&gt(o)?T(o.\u0275providers,i):i(o)}class O{}class z{}class It{resolveComponentFactory(i){throw function se(n){const i=Error(`No component factory found for ${ye(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Ct=(()=>{class n{}return n.NULL=new It,n})();function Ft(){return En(Xe(),x())}function En(n,i){return new Zn(hr(n,i))}let Zn=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Ft,n})();function Mi(n){return n instanceof Zn?n.nativeElement:n}class sa{}let hu=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fu(){const n=x(),o=Qi(Xe().index,n);return(Is(o)?o:n)[Ve]}(),n})(),Ac=(()=>{class n{}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:()=>null}),n})();class Fd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Rf=new Fd("15.2.9"),Mf={},Th="ngOriginalError";function Pf(n){return n[Th]}class Rc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Pf(i);for(;o&&Pf(o);)o=Pf(o);return o||null}}function Uu(n){return n instanceof Function?n():n}function tc(n,i,o){let l=n.length;for(;;){const g=n.indexOf(i,o);if(-1===g)return g;if(0===g||n.charCodeAt(g-1)<=32){const E=i.length;if(g+E===l||n.charCodeAt(g+E)<=32)return g}o=g+1}}const Xc="ng-template";function om(n,i,o){let l=0,g=!0;for(;l<n.length;){let E=n[l++];if("string"==typeof E&&g){const D=n[l++];if(o&&"class"===E&&-1!==tc(D.toLowerCase(),i,0))return!0}else{if(1===E){for(;l<n.length&&"string"==typeof(E=n[l++]);)if(E.toLowerCase()===i)return!0;return!1}"number"==typeof E&&(g=!1)}}return!1}function Mc(n){return 4===n.type&&n.value!==Xc}function jy(n,i,o){return i===(4!==n.type||o?n.value:Xc)}function Ld(n,i,o){let l=4;const g=n.attrs||[],E=function am(n){for(let i=0;i<n.length;i++)if(si(n[i]))return i;return n.length}(g);let D=!1;for(let P=0;P<i.length;P++){const U=i[P];if("number"!=typeof U){if(!D)if(4&l){if(l=2|1&l,""!==U&&!jy(n,U,o)||""===U&&1===i.length){if(pu(l))return!1;D=!0}}else{const Q=8&l?U:i[++P];if(8&l&&null!==n.attrs){if(!om(n.attrs,Q,o)){if(pu(l))return!1;D=!0}continue}const Ie=Pc(8&l?"class":U,g,Mc(n),o);if(-1===Ie){if(pu(l))return!1;D=!0;continue}if(""!==Q){let Ke;Ke=Ie>E?"":g[Ie+1].toLowerCase();const ct=8&l?Ke:null;if(ct&&-1!==tc(ct,Q,0)||2&l&&Q!==Ke){if(pu(l))return!1;D=!0}}}}else{if(!D&&!pu(l)&&!pu(U))return!1;if(D&&pu(U))continue;D=!1,l=U|1&l}}return pu(l)||D}function pu(n){return 0==(1&n)}function Pc(n,i,o,l){if(null===i)return-1;let g=0;if(l||!o){let E=!1;for(;g<i.length;){const D=i[g];if(D===n)return g;if(3===D||6===D)E=!0;else{if(1===D||2===D){let P=i[++g];for(;"string"==typeof P;)P=i[++g];continue}if(4===D)break;if(0===D){g+=4;continue}}g+=E?1:2}return-1}return function zy(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,n)}function Bp(n,i,o=!1){for(let l=0;l<i.length;l++)if(Ld(n,i[l],o))return!0;return!1}function um(n,i){return n?":not("+i.trim()+")":i}function Of(n){let i=n[0],o=1,l=2,g="",E=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&l){const P=n[++o];g+="["+D+(P.length>0?'="'+P+'"':"")+"]"}else 8&l?g+="."+D:4&l&&(g+=" "+D);else""!==g&&!pu(D)&&(i+=um(E,g),g=""),l=D,E=E||!pu(l);o++}return""!==g&&(i+=um(E,g)),i}const pi={};function dm(n){$p(B(),x(),Or()+n,!1)}function $p(n,i,o,l){if(!l)if(3==(3&i[jn])){const E=n.preOrderCheckHooks;null!==E&&ha(i,E,o)}else{const E=n.preOrderHooks;null!==E&&no(i,E,0,o)}js(o)}function xa(n,i=null,o=null,l){const g=pm(n,i,o,l);return g.resolveInjectorInitializers(),g}function pm(n,i=null,o=null,l,g=new Set){const E=[o||Se,wh(n)];return l=l||("object"==typeof n?void 0:ye(n)),new Lu(E,i||du(),l||null,g)}let Jc=(()=>{class n{static create(o,l){if(Array.isArray(o))return xa({name:""},l,o,"");{const g=o.name??"";return xa({name:g},o.parent,o.providers,g)}}}return n.THROW_IF_NOT_FOUND=li,n.NULL=new vh,n.\u0275prov=Zt({token:n,providedIn:"any",factory:()=>qt(Ad)}),n.__NG_ELEMENT_ID__=-1,n})();function Vd(n,i=Yt.Default){const o=x();return null===o?qt(n,i):Gn(Xe(),o,Ne(n),i)}function Vf(){throw new Error("invalid")}function Uf(n,i){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const E=o[l+1];if(-1!==E){const D=n.data[E];hi(o[l]),D.contentQueries(2,i[E],E)}}}function Ud(n,i,o,l,g,E,D,P,U,Q,ae){const Ie=i.blueprint.slice();return Ie[Vi]=g,Ie[jn]=76|l,(null!==ae||n&&1024&n[jn])&&(Ie[jn]|=1024),ar(Ie),Ie[Zr]=Ie[Bn]=n,Ie[Yr]=o,Ie[Ue]=D||n&&n[Ue],Ie[Ve]=P||n&&n[Ve],Ie[wt]=U||n&&n[wt]||null,Ie[Ge]=Q||n&&n[Ge]||null,Ie[ji]=E,Ie[Yi]=function As(){return dc++}(),Ie[Qr]=ae,Ie[Tn]=2==i.type?n[Tn]:Ie,Ie}function rc(n,i,o,l,g){let E=n.data[i];if(null===E)E=function nd(n,i,o,l,g){const E=dn(),D=mo(),U=n.data[i]=function s_(n,i,o,l,g,E){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?E:E&&E.parent,o,i,l,g);return null===n.firstChild&&(n.firstChild=U),null!==E&&(D?null==E.child&&null!==U.parent&&(E.child=U):null===E.next&&(E.next=U,U.prev=E)),U}(n,i,o,l,g),function Os(){return Kn.lFrame.inI18n}()&&(E.flags|=32);else if(64&E.type){E.type=o,E.value=l,E.attrs=g;const D=function Gr(){const n=Kn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();E.injectorIndex=null===D?-1:D.injectorIndex}return zi(E,!0),E}function xc(n,i,o,l){if(0===o)return-1;const g=i.length;for(let E=0;E<o;E++)i.push(l),n.blueprint.push(l),n.data.push(null);return g}function xh(n,i,o){Ji(i);try{const l=n.viewQuery;null!==l&&Kf(1,l,o);const g=n.template;null!==g&&Bf(n,i,g,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Uf(n,i),n.staticViewQueries&&Kf(2,n.viewQuery,o);const E=n.components;null!==E&&function wm(n,i){for(let o=0;o<i.length;o++)ug(n,i[o])}(i,E)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[jn]&=-5,Ea()}}function Bd(n,i,o,l){const g=i[jn];if(128!=(128&g)){Ji(i);try{ar(i),function xo(n){return Kn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Bf(n,i,o,2,l);const D=3==(3&g);if(D){const Q=n.preOrderCheckHooks;null!==Q&&ha(i,Q,null)}else{const Q=n.preOrderHooks;null!==Q&&no(i,Q,0,null),N(i,0)}if(function d_(n){for(let i=sl(n);null!==i;i=au(i)){if(!i[yr])continue;const o=i[cs];for(let l=0;l<o.length;l++){const g=o[l];512&g[jn]||vs(g[Zr],1),g[jn]|=512}}}(i),function ag(n){for(let i=sl(n);null!==i;i=au(i))for(let o=Jn;o<i.length;o++){const l=i[o],g=l[Kt];Oi(l)&&Bd(g,l,g.template,l[Yr])}}(i),null!==n.contentQueries&&Uf(n,i),D){const Q=n.contentCheckHooks;null!==Q&&ha(i,Q)}else{const Q=n.contentHooks;null!==Q&&no(i,Q,1),N(i,1)}!function n_(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const g=o[l];if(g<0)js(~g);else{const E=g,D=o[++l],P=o[++l];ul(D,E),P(2,i[E])}}}finally{js(-1)}}(n,i);const P=n.components;null!==P&&function Em(n,i){for(let o=0;o<i.length;o++)lg(n,i[o])}(i,P);const U=n.viewQuery;if(null!==U&&Kf(2,U,l),D){const Q=n.viewCheckHooks;null!==Q&&ha(i,Q)}else{const Q=n.viewHooks;null!==Q&&no(i,Q,2),N(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[jn]&=-41,512&i[jn]&&(i[jn]&=-513,vs(i[Zr],-1))}finally{Ea()}}}function Bf(n,i,o,l,g){const E=Or(),D=2&l;try{js(-1),D&&i.length>ii&&$p(n,i,ii,!1),Rr(D?2:0,g),o(l,g)}finally{js(E),Rr(D?3:1,g)}}function $f(n,i,o){if(Cs(i)){const g=i.directiveEnd;for(let E=i.directiveStart;E<g;E++){const D=n.data[E];D.contentQueries&&D.contentQueries(1,o[E],E)}}}function Xp(n,i,o){La()&&(function Vh(n,i,o,l){const g=o.directiveStart,E=o.directiveEnd;jr(o)&&function sg(n,i,o){const l=hr(i,n),g=Oh(o),E=n[Ue],D=ic(n,Ud(n,g,null,o.onPush?32:16,l,i,E,E.createRenderer(l,o),null,null,null));n[i.index]=D}(i,o,n.data[g+o.componentOffset]),n.firstCreatePass||El(o,i),ze(l,i);const D=o.initialInputs;for(let P=g;P<E;P++){const U=n.data[P],Q=Dr(i,n,P,o);ze(Q,i),null!==D&&c_(0,P-g,Q,U,0,D),vi(U)&&(Qi(o.index,i)[Yr]=Dr(i,n,P,o))}}(n,i,o,hr(o,i)),64==(64&o.flags)&&zf(n,i,o))}function jf(n,i,o=hr){const l=i.localNames;if(null!==l){let g=i.index+1;for(let E=0;E<l.length;E+=2){const D=l[E+1],P=-1===D?o(i,n):n[D];n[g++]=P}}}function Oh(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=kh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function kh(n,i,o,l,g,E,D,P,U,Q){const ae=ii+l,Ie=ae+g,Ke=function r_(n,i){const o=[];for(let l=0;l<i;l++)o.push(l<n?null:pi);return o}(ae,Ie),ct="function"==typeof Q?Q():Q;return Ke[Kt]={type:n,blueprint:Ke,template:o,queries:null,viewQuery:P,declTNode:i,data:Ke.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:U,consts:ct,incompleteFirstPass:!1}}function al(n,i,o,l){const g=Tm(i);null===o?g.push(l):(g.push(o),n.firstCreatePass&&qf(n).push(l,g.length-1))}function Jp(n,i,o,l){for(let g in n)if(n.hasOwnProperty(g)){o=null===o?{}:o;const E=n[g];null===l?Fh(o,i,g,E):l.hasOwnProperty(g)&&Fh(o,i,l[g],E)}return o}function Fh(n,i,o,l){n.hasOwnProperty(o)?n[o].push(i,l):n[o]=[i,l]}function tg(n,i,o,l){if(La()){const g=null===l?null:{"":-1},E=function ng(n,i){const o=n.directiveRegistry;let l=null,g=null;if(o)for(let E=0;E<o.length;E++){const D=o[E];if(Bp(i,D.selectors,!1))if(l||(l=[]),vi(D))if(null!==D.findHostDirectiveDefs){const P=[];g=g||new Map,D.findHostDirectiveDefs(D,P,g),l.unshift(...P,D),jd(n,i,P.length)}else l.unshift(D),jd(n,i,0);else g=g||new Map,D.findHostDirectiveDefs?.(D,l,g),l.push(D)}return null===l?null:[l,g]}(n,o);let D,P;null===E?D=P=null:[D,P]=E,null!==D&&Hf(n,i,o,D,g,P),g&&function Uh(n,i,o){if(i){const l=n.localNames=[];for(let g=0;g<i.length;g+=2){const E=o[i[g+1]];if(null==E)throw new ot(-301,!1);l.push(i[g],E)}}}(o,l,g)}o.mergedAttrs=nn(o.mergedAttrs,o.attrs)}function Hf(n,i,o,l,g,E){for(let Q=0;Q<l.length;Q++)lr(El(o,i),n,l[Q].type);!function Im(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,l.length);for(let Q=0;Q<l.length;Q++){const ae=l[Q];ae.providersResolver&&ae.providersResolver(ae)}let D=!1,P=!1,U=xc(n,i,l.length,null);for(let Q=0;Q<l.length;Q++){const ae=l[Q];o.mergedAttrs=nn(o.mergedAttrs,ae.hostAttrs),ig(n,o,i,U,ae),rg(U,ae,g),null!==ae.contentQueries&&(o.flags|=4),(null!==ae.hostBindings||null!==ae.hostAttrs||0!==ae.hostVars)&&(o.flags|=64);const Ie=ae.type.prototype;!D&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),D=!0),!P&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),P=!0),U++}!function Lh(n,i,o){const g=i.directiveEnd,E=n.data,D=i.attrs,P=[];let U=null,Q=null;for(let ae=i.directiveStart;ae<g;ae++){const Ie=E[ae],Ke=o?o.get(Ie):null,Nt=Ke?Ke.outputs:null;U=Jp(Ie.inputs,ae,U,Ke?Ke.inputs:null),Q=Jp(Ie.outputs,ae,Q,Nt);const un=null===U||null===D||Mc(i)?null:og(U,ae,D);P.push(un)}null!==U&&(U.hasOwnProperty("class")&&(i.flags|=8),U.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=P,i.inputs=U,i.outputs=Q}(n,o,E)}function zf(n,i,o){const l=o.directiveStart,g=o.directiveEnd,E=o.index,D=function Qo(){return Kn.lFrame.currentDirectiveIndex}();try{js(E);for(let P=l;P<g;P++){const U=n.data[P],Q=i[P];Ts(P),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&$d(U,Q)}}finally{js(-1),Ts(D)}}function $d(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function jd(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function rg(n,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=n;vi(i)&&(o[""]=n)}}function ig(n,i,o,l,g){n.data[l]=g;const E=g.factory||(g.factory=He(g.type)),D=new Te(E,vi(g),Vd);n.blueprint[l]=D,o[l]=D,function l_(n,i,o,l,g){const E=g.hostBindings;if(E){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const P=~i.index;(function u_(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(D)!=P&&D.push(P),D.push(o,l,E)}}(n,i,l,xc(n,o,g.hostVars,pi),g)}function ll(n,i,o,l,g,E){const D=hr(n,i);!function Gf(n,i,o,l,g,E,D){if(null==E)n.removeAttribute(i,g,o);else{const P=null==D?Et(E):D(E,l||"",g);n.setAttribute(i,g,P,o)}}(i[Ve],D,E,n.value,o,l,g)}function c_(n,i,o,l,g,E){const D=E[i];if(null!==D){const P=l.setInput;for(let U=0;U<D.length;){const Q=D[U++],ae=D[U++],Ie=D[U++];null!==P?l.setInput(o,Ie,Q,ae):o[ae]=Ie}}}function og(n,i,o){let l=null,g=0;for(;g<o.length;){const E=o[g];if(0!==E)if(5!==E){if("number"==typeof E)break;if(n.hasOwnProperty(E)){null===l&&(l=[]);const D=n[E];for(let P=0;P<D.length;P+=2)if(D[P]===i){l.push(E,D[P+1],o[g+1]);break}}g+=2}else g+=2;else g+=4}return l}function Cm(n,i,o,l){return[n,!0,!1,i,null,0,l,o,null,null]}function lg(n,i){const o=Qi(i,n);if(Oi(o)){const l=o[Kt];48&o[jn]?Bd(l,o,l.template,o[Yr]):o[$i]>0&&Hd(o)}}function Hd(n){for(let l=sl(n);null!==l;l=au(l))for(let g=Jn;g<l.length;g++){const E=l[g];if(Oi(E))if(512&E[jn]){const D=E[Kt];Bd(D,E,D.template,E[Yr])}else E[$i]>0&&Hd(E)}const o=n[Kt].components;if(null!==o)for(let l=0;l<o.length;l++){const g=Qi(o[l],n);Oi(g)&&g[$i]>0&&Hd(g)}}function ug(n,i){const o=Qi(i,n),l=o[Kt];(function Dm(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(l,o),xh(l,o,o[Yr])}function ic(n,i){return n[kt]?n[Mn][$r]=i:n[kt]=i,n[Mn]=i,i}function zd(n){for(;n;){n[jn]|=32;const i=fc(n);if(Xr(n)&&!i)return n;n=i}return null}function Wf(n,i,o,l=!0){const g=i[Ue];g.begin&&g.begin();try{Bd(n,i,n.template,o)}catch(D){throw l&&Zf(i,D),D}finally{g.end&&g.end()}}function Kf(n,i,o){hi(0),i(n,o)}function Tm(n){return n[Hs]||(n[Hs]=[])}function qf(n){return n.cleanup||(n.cleanup=[])}function Zf(n,i){const o=n[Ge],l=o?o.get(Rc,null):null;l&&l.handleError(i)}function cg(n,i,o,l,g){for(let E=0;E<o.length;){const D=o[E++],P=o[E++],U=i[D],Q=n.data[D];null!==Q.setInput?Q.setInput(U,g,l,P):U[P]=g}}function Yf(n,i,o){let l=o?n.styles:null,g=o?n.classes:null,E=0;if(null!==i)for(let D=0;D<i.length;D++){const P=i[D];"number"==typeof P?E=P:1==E?g=qe(g,P):2==E&&(l=qe(l,P+": "+i[++D]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=g:n.classesWithoutHost=g}function Gd(n,i,o,l,g=!1){for(;null!==o;){const E=i[o.index];if(null!==E&&l.push(pr(E)),Hi(E))for(let P=Jn;P<E.length;P++){const U=E[P],Q=U[Kt].firstChild;null!==Q&&Gd(U[Kt],U,Q,l)}const D=o.type;if(8&D)Gd(n,i,o.child,l);else if(32&D){const P=ba(o,i);let U;for(;U=P();)l.push(U)}else if(16&D){const P=yc(i,o);if(Array.isArray(P))l.push(...P);else{const U=fc(i[Tn]);Gd(U[Kt],U,P,l,!0)}}o=g?o.projectionNext:o.next}return l}class Wd{get rootNodes(){const i=this._lView,o=i[Kt];return Gd(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yr]}set context(i){this._lView[Yr]=i}get destroyed(){return 128==(128&this._lView[jn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Zr];if(Hi(i)){const o=i[cr],l=o?o.indexOf(this):-1;l>-1&&(J(i,l),Ta(o,l))}this._attachedToViewContainer=!1}de(this._lView[Kt],this._lView)}onDestroy(i){al(this._lView[Kt],this._lView,null,i)}markForCheck(){zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[jn]&=-65}reattach(){this._lView[jn]|=64}detectChanges(){Wf(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ot(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mc(n,i){vc(n,i,i[Ve],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ot(902,!1);this._appRef=i}}class dg extends Wd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Wf(i[Kt],i,i[Yr],!1)}checkNoChanges(){}get context(){return null}}class Qf extends Ct{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=gn(i);return new rd(o,this.ngModule)}}function Xf(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Oc{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,l){l=Pi(l);const g=this.injector.get(i,Mf,l);return g!==Mf||o===Mf?g:this.parentInjector.get(i,o,l)}}class rd extends z{get inputs(){return Xf(this.componentDef.inputs)}get outputs(){return Xf(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function cm(n){return n.map(Of).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,l,g){let E=(g=g||this.ngModule)instanceof yl?g:g?.injector;E&&null!==this.componentDef.getStandaloneInjector&&(E=this.componentDef.getStandaloneInjector(E)||E);const D=E?new Oc(i,E):i,P=D.get(sa,null);if(null===P)throw new ot(407,!1);const U=D.get(Ac,null),Q=P.createRenderer(null,this.componentDef),ae=this.componentDef.selectors[0][0]||"div",Ie=l?function i_(n,i,o){return n.selectRootElement(i,o===he.ShadowDom)}(Q,l,this.componentDef.encapsulation):gc(Q,ae,function Kd(n){const i=n.toLowerCase();return"svg"===i?zr:"math"===i?"math":null}(ae)),Ke=this.componentDef.onPush?288:272,ct=kh(0,null,null,1,0,null,null,null,null,null),Nt=Ud(null,ct,null,Ke,null,null,P,Q,U,D,null);let un,Vn;Ji(Nt);try{const ur=this.componentDef;let Kr,Ht=null;ur.findHostDirectiveDefs?(Kr=[],Ht=new Map,ur.findHostDirectiveDefs(ur,Kr,Ht),Kr.push(ur)):Kr=[ur];const Di=function bm(n,i){const o=n[Kt],l=ii;return n[l]=i,rc(o,l,2,"#host",null)}(Nt,Ie),oa=function Zd(n,i,o,l,g,E,D,P){const U=g[Kt];!function f_(n,i,o,l){for(const g of n)i.mergedAttrs=nn(i.mergedAttrs,g.hostAttrs);null!==i.mergedAttrs&&(Yf(i,i.mergedAttrs,!0),null!==o&&_d(l,o,i))}(l,n,i,D);const Q=E.createRenderer(i,o),ae=Ud(g,Oh(o),null,o.onPush?32:16,g[n.index],n,E,Q,P||null,null,null);return U.firstCreatePass&&jd(U,n,l.length-1),ic(g,ae),g[n.index]=ae}(Di,Ie,ur,Kr,Nt,P,Q);Vn=Yo(ct,ii),Ie&&function hg(n,i,o,l){if(l)On(n,o,["ng-version",Rf.full]);else{const{attrs:g,classes:E}=function Gy(n){const i=[],o=[];let l=1,g=2;for(;l<n.length;){let E=n[l];if("string"==typeof E)2===g?""!==E&&i.push(E,n[++l]):8===g&&o.push(E);else{if(!pu(g))break;g=E}l++}return{attrs:i,classes:o}}(i.selectors[0]);g&&On(n,o,g),E&&E.length>0&&uu(n,o,E.join(" "))}}(Q,ur,Ie,l),void 0!==o&&function fg(n,i,o){const l=n.projection=[];for(let g=0;g<i.length;g++){const E=o[g];l.push(null!=E?Array.from(E):null)}}(Vn,this.ngContentSelectors,o),un=function p_(n,i,o,l,g,E){const D=Xe(),P=g[Kt],U=hr(D,g);Hf(P,g,D,o,null,l);for(let ae=0;ae<o.length;ae++)ze(Dr(g,P,D.directiveStart+ae,D),g);zf(P,g,D),U&&ze(U,g);const Q=Dr(g,P,D.directiveStart+D.componentOffset,D);if(n[Yr]=g[Yr]=Q,null!==E)for(const ae of E)ae(Q,i);return $f(P,D,n),Q}(oa,ur,Kr,Ht,Nt,[pg]),xh(ct,Nt,null)}finally{Ea()}return new qd(this.componentType,un,En(Vn,Nt),Nt,Vn)}}class qd extends O{constructor(i,o,l,g,E){super(),this.location=l,this._rootLView=g,this._tNode=E,this.instance=o,this.hostView=this.changeDetectorRef=new dg(g),this.componentType=i}setInput(i,o){const l=this._tNode.inputs;let g;if(null!==l&&(g=l[i])){const E=this._rootLView;cg(E[Kt],E,g,i,o),zd(Qi(this._tNode.index,E))}}get injector(){return new wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function pg(){const n=Xe();Jo(x()[Kt],n)}function gg(n){let i=function Jf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;i;){let g;if(vi(n))g=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ot(903,!1);g=i.\u0275dir}if(g){if(o){l.push(g);const D=n;D.inputs=$h(n.inputs),D.declaredInputs=$h(n.declaredInputs),D.outputs=$h(n.outputs);const P=g.hostBindings;P&&Am(n,P);const U=g.viewQuery,Q=g.contentQueries;if(U&&mg(n,U),Q&&m_(n,Q),$e(n.inputs,g.inputs),$e(n.declaredInputs,g.declaredInputs),$e(n.outputs,g.outputs),vi(g)&&g.data.animation){const ae=n.data;ae.animation=(ae.animation||[]).concat(g.data.animation)}}const E=g.features;if(E)for(let D=0;D<E.length;D++){const P=E[D];P&&P.ngInherit&&P(n),P===gg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function g_(n){let i=0,o=null;for(let l=n.length-1;l>=0;l--){const g=n[l];g.hostVars=i+=g.hostVars,g.hostAttrs=nn(g.hostAttrs,o=nn(o,g.hostAttrs))}}(l)}function $h(n){return n===ne?{}:n===Se?[]:n}function mg(n,i){const o=n.viewQuery;n.viewQuery=o?(l,g)=>{i(l,g),o(l,g)}:i}function m_(n,i){const o=n.contentQueries;n.contentQueries=o?(l,g,E)=>{i(l,g,E),o(l,g,E)}:i}function Am(n,i){const o=n.hostBindings;n.hostBindings=o?(l,g)=>{i(l,g),o(l,g)}:i}function Yd(n){return!!jh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function jh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function gu(n,i,o){return n[i]=o}function Ya(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function vg(n,i,o,l){const g=x();return Ya(g,qs(),i)&&(B(),ll(ki(),g,n,i,o,l)),vg}function sp(n,i,o,l,g,E,D,P){const U=x(),Q=B(),ae=n+ii,Ie=Q.firstCreatePass?function w_(n,i,o,l,g,E,D,P,U){const Q=i.consts,ae=rc(i,n,4,D||null,_s(Q,P));tg(i,o,ae,_s(Q,U)),Jo(i,ae);const Ie=ae.tView=kh(2,ae,l,g,E,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Q);return null!==i.queries&&(i.queries.template(i,ae),Ie.queries=i.queries.embeddedTView(ae)),ae}(ae,Q,U,i,o,l,g,E,D):Q.data[ae];zi(Ie,!1);const Ke=U[Ve].createComment("");Nl(Q,U,Ke,Ie),ze(Ke,U),ic(U,U[ae]=Cm(Ke,U,Ke,Ie)),sr(Ie)&&Xp(Q,U,Ie),null!=D&&jf(U,Ie,P)}function Ig(n,i,o){const l=x();return Ya(l,qs(),i)&&function Kl(n,i,o,l,g,E,D,P){const U=hr(i,o);let ae,Q=i.inputs;!P&&null!=Q&&(ae=Q[l])?(cg(n,o,ae,l,g),jr(i)&&function o_(n,i){const o=Qi(i,n);16&o[jn]||(o[jn]|=32)}(o,i.index)):3&i.type&&(l=function eg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),g=null!=D?D(g,i.value||"",l):g,E.setProperty(U,l,g))}(B(),ki(),l,n,i,l[Ve],o,!1),Ig}function Hh(n,i,o,l,g){const D=g?"class":"style";cg(n,o,i.inputs[D],D,l)}function eh(n,i,o,l){const g=x(),E=B(),D=ii+n,P=g[Ve],U=E.firstCreatePass?function Um(n,i,o,l,g,E){const D=i.consts,U=rc(i,n,2,l,_s(D,g));return tg(i,o,U,_s(D,E)),null!==U.attrs&&Yf(U,U.attrs,!1),null!==U.mergedAttrs&&Yf(U,U.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,U),U}(D,E,g,i,o,l):E.data[D],Q=g[D]=gc(P,i,function Ua(){return Kn.lFrame.currentNamespace}()),ae=sr(U);return zi(U,!0),_d(P,Q,U),32!=(32&U.flags)&&Nl(E,g,Q,U),0===function la(){return Kn.lFrame.elementDepthCount}()&&ze(Q,g),function to(){Kn.lFrame.elementDepthCount++}(),ae&&(Xp(E,g,U),$f(E,U,g)),null!==l&&jf(g,U),eh}function zh(){let n=Xe();mo()?Ws():(n=n.parent,zi(n,!1));const i=n;!function Po(){Kn.lFrame.elementDepthCount--}();const o=B();return o.firstCreatePass&&(Jo(o,n),Cs(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function dr(n){return 0!=(8&n.flags)}(i)&&Hh(o,i,x(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Ur(n){return 0!=(16&n.flags)}(i)&&Hh(o,i,x(),i.stylesWithoutHost,!1),zh}function Cg(n,i,o,l){return eh(n,i,o,l),zh(),Cg}function th(n,i,o){const l=x(),g=B(),E=n+ii,D=g.firstCreatePass?function C_(n,i,o,l,g){const E=i.consts,D=_s(E,l),P=rc(i,n,8,"ng-container",D);return null!==D&&Yf(P,D,!0),tg(i,o,P,_s(E,g)),null!==i.queries&&i.queries.elementStart(i,P),P}(E,g,l,i,o):g.data[E];zi(D,!0);const P=l[E]=l[Ve].createComment("");return Nl(g,l,P,D),ze(P,l),sr(D)&&(Xp(g,l,D),$f(g,D,l)),null!=o&&jf(l,D),th}function op(){let n=Xe();const i=B();return mo()?Ws():(n=n.parent,zi(n,!1)),i.firstCreatePass&&(Jo(i,n),Cs(n)&&i.queries.elementEnd(n)),op}function lp(){return x()}function Gh(n){return!!n&&"function"==typeof n.then}function Bm(n){return!!n&&"function"==typeof n.subscribe}const nh=Bm;function Dg(n,i,o,l){const g=x(),E=B(),D=Xe();return function sd(n,i,o,l,g,E,D){const P=sr(l),Q=n.firstCreatePass&&qf(n),ae=i[Yr],Ie=Tm(i);let Ke=!0;if(3&l.type||D){const un=hr(l,i),Vn=D?D(un):un,ur=Ie.length,Kr=D?Di=>D(pr(Di[l.index])):l.index;let Ht=null;if(!D&&P&&(Ht=function $m(n,i,o,l){const g=n.cleanup;if(null!=g)for(let E=0;E<g.length-1;E+=2){const D=g[E];if(D===o&&g[E+1]===l){const P=i[Hs],U=g[E+2];return P.length>U?P[U]:null}"string"==typeof D&&(E+=2)}return null}(n,i,g,l.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=E,Ht.__ngLastListenerFn__=E,Ke=!1;else{E=Wh(l,i,ae,E,!1);const Di=o.listen(Vn,g,E);Ie.push(E,Di),Q&&Q.push(g,Kr,ur,ur+1)}}else E=Wh(l,i,ae,E,!1);const ct=l.outputs;let Nt;if(Ke&&null!==ct&&(Nt=ct[g])){const un=Nt.length;if(un)for(let Vn=0;Vn<un;Vn+=2){const oa=i[Nt[Vn]][Nt[Vn+1]].subscribe(E),Fa=Ie.length;Ie.push(E,oa),Q&&Q.push(g,l.index,Fa,-(Fa+1))}}}(E,g,g[Ve],D,n,i,l),Dg}function Tg(n,i,o,l){try{return Rr(6,i,o),!1!==o(l)}catch(g){return Zf(n,g),!1}finally{Rr(7,i,o)}}function Wh(n,i,o,l,g){return function E(D){if(D===Function)return l;zd(n.componentOffset>-1?Qi(n.index,i):i);let U=Tg(i,o,l,D),Q=E.__ngNextListenerFn__;for(;Q;)U=Tg(i,o,Q,D)&&U,Q=Q.__ngNextListenerFn__;return g&&!1===U&&(D.preventDefault(),D.returnValue=!1),U}}function jm(n=1){return function Ss(n){return(Kn.lFrame.contextLView=function hs(n,i){for(;n>0;)i=i[Bn],n--;return i}(n,Kn.lFrame.contextLView))[Yr]}(n)}function od(n,i){return n<<17|i<<2}function sc(n){return n>>17&32767}function $c(n){return 2|n}function oc(n){return(131068&n)>>2}function Rg(n,i){return-131069&n|i<<2}function Mg(n){return 1|n}function Gm(n,i,o,l,g){const E=n[o+1],D=null===i;let P=l?sc(E):oc(E),U=!1;for(;0!==P&&(!1===U||D);){const ae=n[P+1];M_(n[P],i)&&(U=!0,n[P+1]=l?Mg(ae):$c(ae)),P=l?sc(ae):oc(ae)}U&&(n[o+1]=l?$c(E):Mg(E))}function M_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&u(n,i)>=0}const Oa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pg(n){return n.substring(Oa.key,Oa.keyEnd)}function Wm(n){return n.substring(Oa.value,Oa.valueEnd)}function Og(n,i){const o=Oa.textEnd;let l=Oa.key=Fi(n,i,o);return o===l?-1:(l=Oa.keyEnd=function Zm(n,i,o){let l;for(;i<o&&(45===(l=n.charCodeAt(i))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)i++;return i}(n,l,o),l=rh(n,l,o),l=Oa.value=Fi(n,l,o),l=Oa.valueEnd=function Ym(n,i,o){let l=-1,g=-1,E=-1,D=i,P=D;for(;D<o;){const U=n.charCodeAt(D++);if(59===U)return P;34===U||39===U?P=D=qo(n,U,D,o):i===D-4&&85===E&&82===g&&76===l&&40===U?P=D=qo(n,41,D,o):U>32&&(P=D),E=g,g=l,l=-33&U}return P}(n,l,o),rh(n,l,o))}function Fi(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function rh(n,i,o,l){return(i=Fi(n,i,o))<o&&i++,i}function qo(n,i,o,l){let g=-1,E=o;for(;E<l;){const D=n.charCodeAt(E++);if(D==i&&92!==g)return E;g=92==D&&92===g?0:D}throw new Error}function kg(n,i){return function Mu(n,i,o,l){const g=x(),E=B(),D=yo(2);E.firstUpdatePass&&Jm(E,n,D,l),i!==pi&&Ya(g,D,i)&&ey(E,E.data[Or()],g,g[Ve],n,g[D+1]=function F_(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=ye(xl(n)))),n}(i,o),l,D)}(n,i,null,!0),kg}function Ru(n){!function nu(n,i,o,l){const g=B(),E=yo(2);g.firstUpdatePass&&Jm(g,null,E,l);const D=x();if(o!==pi&&Ya(D,E,o)){const P=g.data[Or()];if(ny(P,l)&&!Xm(g,E)){let U=l?P.classesWithoutHost:P.stylesWithoutHost;null!==U&&(o=qe(U,o||"")),Hh(g,P,D,o,l)}else!function k_(n,i,o,l,g,E,D,P){g===pi&&(g=Se);let U=0,Q=0,ae=0<g.length?g[0]:null,Ie=0<E.length?E[0]:null;for(;null!==ae||null!==Ie;){const Ke=U<g.length?g[U+1]:void 0,ct=Q<E.length?E[Q+1]:void 0;let un,Nt=null;ae===Ie?(U+=2,Q+=2,Ke!==ct&&(Nt=Ie,un=ct)):null===Ie||null!==ae&&ae<Ie?(U+=2,Nt=ae):(Q+=2,Nt=Ie,un=ct),null!==Nt&&ey(n,i,o,l,Nt,un,D,P),ae=U<g.length?g[U]:null,Ie=Q<E.length?E[Q]:null}}(g,P,D,D[Ve],D[E+1],D[E+1]=function x_(n,i,o){if(null==o||""===o)return Se;const l=[],g=xl(o);if(Array.isArray(g))for(let E=0;E<g.length;E++)n(l,g[E],!0);else if("object"==typeof g)for(const E in g)g.hasOwnProperty(E)&&n(l,E,g[E]);else"string"==typeof g&&i(l,g);return l}(n,i,o),l,E)}}(Fg,Qm,n,!1)}function Qm(n,i){for(let o=function Km(n){return function Yh(n){Oa.key=0,Oa.keyEnd=0,Oa.value=0,Oa.valueEnd=0,Oa.textEnd=n.length}(n),Og(n,Fi(n,0,Oa.textEnd))}(i);o>=0;o=Og(i,o))Fg(n,Pg(i),Wm(i))}function Xm(n,i){return i>=n.expandoStartIndex}function Jm(n,i,o,l){const g=n.data;if(null===g[o+1]){const E=g[Or()],D=Xm(n,o);ny(E,l)&&null===i&&!D&&(i=!1),i=function So(n,i,o,l){const g=function Zs(n){const i=Kn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let E=l?i.residualClasses:i.residualStyles;if(null===g)0===(l?i.classBindings:i.styleBindings)&&(o=Qh(o=gp(null,n,i,o,l),i.attrs,l),E=null);else{const D=i.directiveStylingLast;if(-1===D||n[D]!==g)if(o=gp(g,n,i,o,l),null===E){let U=function qv(n,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==oc(l))return n[sc(l)]}(n,i,l);void 0!==U&&Array.isArray(U)&&(U=gp(null,n,i,U[1],l),U=Qh(U,i.attrs,l),function N_(n,i,o,l){n[sc(o?i.classBindings:i.styleBindings)]=l}(n,i,l,U))}else E=function _a(n,i,o){let l;const g=i.directiveEnd;for(let E=1+i.directiveStylingLast;E<g;E++)l=Qh(l,n[E].hostAttrs,o);return Qh(l,i.attrs,o)}(n,i,l)}return void 0!==E&&(l?i.residualClasses=E:i.residualStyles=E),o}(g,E,i,l),function zm(n,i,o,l,g,E){let D=E?i.classBindings:i.styleBindings,P=sc(D),U=oc(D);n[l]=o;let ae,Q=!1;if(Array.isArray(o)?(ae=o[1],(null===ae||u(o,ae)>0)&&(Q=!0)):ae=o,g)if(0!==U){const Ke=sc(n[P+1]);n[l+1]=od(Ke,P),0!==Ke&&(n[Ke+1]=Rg(n[Ke+1],l)),n[P+1]=function Hm(n,i){return 131071&n|i<<17}(n[P+1],l)}else n[l+1]=od(P,0),0!==P&&(n[P+1]=Rg(n[P+1],l)),P=l;else n[l+1]=od(U,0),0===P?P=l:n[U+1]=Rg(n[U+1],l),U=l;Q&&(n[l+1]=$c(n[l+1])),Gm(n,ae,l,!0),Gm(n,ae,l,!1),function R_(n,i,o,l,g){const E=g?n.residualClasses:n.residualStyles;null!=E&&"string"==typeof i&&u(E,i)>=0&&(o[l+1]=Mg(o[l+1]))}(i,ae,n,l,E),D=od(P,U),E?i.classBindings=D:i.styleBindings=D}(g,E,i,o,D,l)}}function gp(n,i,o,l,g){let E=null;const D=o.directiveEnd;let P=o.directiveStylingLast;for(-1===P?P=o.directiveStart:P++;P<D&&(E=i[P],l=Qh(l,E.hostAttrs,g),E!==n);)P++;return null!==n&&(o.directiveStylingLast=P),l}function Qh(n,i,o){const l=o?1:2;let g=-1;if(null!==i)for(let E=0;E<i.length;E++){const D=i[E];"number"==typeof D?g=D:g===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Io(n,D,!!o||i[++E]))}return void 0===n?null:n}function Fg(n,i,o){Io(n,i,xl(o))}function ey(n,i,o,l,g,E,D,P){if(!(3&i.type))return;const U=n.data,Q=U[P+1],ae=function b_(n){return 1==(1&n)}(Q)?ty(U,i,o,g,oc(Q),D):void 0;Lg(ae)||(Lg(E)||function Ag(n){return 2==(2&n)}(Q)&&(E=ty(U,null,o,g,P,D)),function qc(n,i,o,l,g){if(i)g?n.addClass(o,l):n.removeClass(o,l);else{let E=-1===l.indexOf("-")?void 0:Za.DashCase;null==g?n.removeStyle(o,l,E):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),E|=Za.Important),n.setStyle(o,l,g,E))}}(l,D,bi(Or(),o),g,E))}function ty(n,i,o,l,g,E){const D=null===i;let P;for(;g>0;){const U=n[g],Q=Array.isArray(U),ae=Q?U[1]:U,Ie=null===ae;let Ke=o[g+1];Ke===pi&&(Ke=Ie?Se:void 0);let ct=Ie?W(Ke,l):ae===l?Ke:void 0;if(Q&&!Lg(ct)&&(ct=W(U,l)),Lg(ct)&&(P=ct,D))return P;const Nt=n[g+1];g=D?sc(Nt):oc(Nt)}if(null!==i){let U=E?i.residualClasses:i.residualStyles;null!=U&&(P=W(U,l))}return P}function Lg(n){return void 0!==n}function ny(n,i){return 0!=(n.flags&(i?8:16))}function Vg(n,i=""){const o=x(),l=B(),g=n+ii,E=l.firstCreatePass?rc(l,g,1,i,null):l.data[g],D=o[g]=function pc(n,i){return n.createText(i)}(o[Ve],i);Nl(l,o,D,E),zi(E,!1)}function ad(n){return mp("",n,""),ad}function mp(n,i,o){const l=x(),g=function Xd(n,i,o,l){return Ya(n,qs(),o)?i+Et(o)+l:pi}(l,n,i,o);return g!==pi&&function Su(n,i,o){const l=bi(i,n);!function Gu(n,i,o){n.setValue(i,o)}(n[Ve],l,o)}(l,Or(),g),mp}const cd=void 0;var j_=["en",[["a","p"],["AM","PM"],cd],[["AM","PM"],cd,cd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cd,"{1} 'at' {0}",cd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rf(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let Pu={};function hy(n){const i=function Ep(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=sf(i);if(o)return o;const l=i.split("-")[0];if(o=sf(l),o)return o;if("en"===l)return j_;throw new ot(701,!1)}function py(n){return hy(n)[kr.PluralCase]}function sf(n){return n in Pu||(Pu[n]=Ln.ng&&Ln.ng.common&&Ln.ng.common.locales&&Ln.ng.common.locales[n]),Pu[n]}var kr=(()=>((kr=kr||{})[kr.LocaleId=0]="LocaleId",kr[kr.DayPeriodsFormat=1]="DayPeriodsFormat",kr[kr.DayPeriodsStandalone=2]="DayPeriodsStandalone",kr[kr.DaysFormat=3]="DaysFormat",kr[kr.DaysStandalone=4]="DaysStandalone",kr[kr.MonthsFormat=5]="MonthsFormat",kr[kr.MonthsStandalone=6]="MonthsStandalone",kr[kr.Eras=7]="Eras",kr[kr.FirstDayOfWeek=8]="FirstDayOfWeek",kr[kr.WeekendRange=9]="WeekendRange",kr[kr.DateFormat=10]="DateFormat",kr[kr.TimeFormat=11]="TimeFormat",kr[kr.DateTimeFormat=12]="DateTimeFormat",kr[kr.NumberSymbols=13]="NumberSymbols",kr[kr.NumberFormats=14]="NumberFormats",kr[kr.CurrencyCode=15]="CurrencyCode",kr[kr.CurrencySymbol=16]="CurrencySymbol",kr[kr.CurrencyName=17]="CurrencyName",kr[kr.Currencies=18]="Currencies",kr[kr.Directionality=19]="Directionality",kr[kr.PluralCase=20]="PluralCase",kr[kr.ExtraData=21]="ExtraData",kr))();const uc="en-US";let Wg=uc;function bp(n,i,o,l,g){if(n=Ne(n),Array.isArray(n))for(let E=0;E<n.length;E++)bp(n[E],i,o,l,g);else{const E=B(),D=x();let P=Du(n)?n:Ne(n.provide),U=kd(n);const Q=Xe(),ae=1048575&Q.providerIndexes,Ie=Q.directiveStart,Ke=Q.providerIndexes>>20;if(Du(n)||!n.multi){const ct=new Te(U,g,Vd),Nt=hv(P,i,g?ae:ae+Ke,Ie);-1===Nt?(lr(El(Q,D),E,P),dv(E,n,i.length),i.push(P),Q.directiveStart++,Q.directiveEnd++,g&&(Q.providerIndexes+=1048576),o.push(ct),D.push(ct)):(o[Nt]=ct,D[Nt]=ct)}else{const ct=hv(P,i,ae+Ke,Ie),Nt=hv(P,i,ae,ae+Ke),Vn=Nt>=0&&o[Nt];if(g&&!Vn||!g&&!(ct>=0&&o[ct])){lr(El(Q,D),E,P);const ur=function k0(n,i,o,l,g){const E=new Te(n,o,Vd);return E.multi=[],E.index=i,E.componentProviders=0,rE(E,g,l&&!o),E}(g?O0:x0,o.length,g,l,U);!g&&Vn&&(o[Nt].providerFactory=ur),dv(E,n,i.length,0),i.push(P),Q.directiveStart++,Q.directiveEnd++,g&&(Q.providerIndexes+=1048576),o.push(ur),D.push(ur)}else dv(E,n,ct>-1?ct:Nt,rE(o[g?Nt:ct],U,!g&&l));!g&&l&&Vn&&o[Nt].componentProviders++}}}function dv(n,i,o,l){const g=Du(i),E=function Tu(n){return!!n.useClass}(i);if(g||E){const U=(E?Ne(i.useClass):i).prototype.ngOnDestroy;if(U){const Q=n.destroyHooks||(n.destroyHooks=[]);if(!g&&i.multi){const ae=Q.indexOf(o);-1===ae?Q.push(o,[l,U]):Q[ae+1].push(l,U)}else Q.push(o,U)}}}function rE(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function hv(n,i,o,l){for(let g=o;g<l;g++)if(i[g]===n)return g;return-1}function x0(n,i,o,l){return fv(this.multi,[])}function O0(n,i,o,l){const g=this.multi;let E;if(this.providerFactory){const D=this.providerFactory.componentProviders,P=Dr(o,o[Kt],this.providerFactory.index,l);E=P.slice(0,D),fv(g,E);for(let U=D;U<P.length;U++)E.push(P[U])}else E=[],fv(g,E);return E}function fv(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function iE(n,i=[]){return o=>{o.providersResolver=(l,g)=>function fd(n,i,o){const l=B();if(l.firstCreatePass){const g=vi(n);bp(o,l.data,l.blueprint,g,!0),bp(i,l.data,l.blueprint,g,!1)}}(l,g?g(n):n,i)}}class Ap{}class sE{}function F0(n,i){return new oE(n,i??null)}class oE extends Ap{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qf(this);const l=_i(i);this._bootstrapComponents=Uu(l.bootstrap),this._r3Injector=pm(i,o,[{provide:Ap,useValue:this},{provide:Ct,useValue:this.componentFactoryResolver}],ye(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class pv extends sE{constructor(i){super(),this.moduleType=i}create(i){return new oE(this.moduleType,i)}}class L0 extends Ap{constructor(i,o,l){super(),this.componentFactoryResolver=new Qf(this),this.instance=null;const g=new Lu([...i,{provide:Ap,useValue:this},{provide:Ct,useValue:this.componentFactoryResolver}],o||du(),l,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function gv(n,i,o=null){return new L0(n,i,o).injector}let V0=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const l=Ih(0,o.type),g=l.length>0?gv([l],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,g)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Zt({token:n,providedIn:"environment",factory:()=>new n(qt(yl))}),n})();function aE(n){n.getStandaloneInjector=i=>i.get(V0).getOrCreateStandaloneInjector(n)}function pE(n,i,o){const l=Es()+n,g=x();return g[l]===pi?gu(g,l,o?i.call(o):i()):function Qd(n,i){return n[i]}(g,l)}function gE(n,i,o,l){return mE(x(),Es(),n,i,o,l)}function mE(n,i,o,l,g,E){const D=i+o;return Ya(n,D,g)?gu(n,D+1,E?l.call(E,g):l(g)):function Zg(n,i){const o=n[i];return o===pi?void 0:o}(n,D+1)}function wE(n,i){const o=B();let l;const g=n+ii;o.firstCreatePass?(l=function tw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const l=i[o];if(n===l.name)return l}}(i,o.pipeRegistry),o.data[g]=l,l.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(g,l.onDestroy)):l=o.data[g];const E=l.factory||(l.factory=He(l.type)),D=qr(Vd);try{const P=Ba(!1),U=E();return Ba(P),function I_(n,i,o,l){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=l}(o,x(),g,U),U}finally{qr(D)}}function IE(n,i,o){const l=n+ii,g=x(),E=function rs(n,i){return n[i]}(g,l);return function Yg(n,i){return n[Kt].data[i].pure}(g,l)?mE(g,Es(),i,E.transform,o,E):E.transform(o)}function yv(n){return i=>{setTimeout(n,void 0,i)}}const Gc=class ow extends v.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,l){let g=i,E=o||(()=>null),D=l;if(i&&"object"==typeof i){const U=i;g=U.next?.bind(U),E=U.error?.bind(U),D=U.complete?.bind(U)}this.__isAsync&&(E=yv(E),g&&(g=yv(g)),D&&(D=yv(D)));const P=super.subscribe({next:g,error:E,complete:D});return i instanceof te.w0&&i.add(P),P}};function aw(){return this._results[Symbol.iterator]()}class _v{get changes(){return this._changes||(this._changes=new Gc)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=_v.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=aw)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const l=this;l.dirty=!1;const g=function Qs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function ts(n,i,o){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let g=n[l],E=i[l];if(o&&(g=o(g),E=o(E)),E!==g)return!1}return!0}(l._results,g,o))&&(l._results=g,l.length=g.length,l.last=g[this.length-1],l.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qg=(()=>{class n{}return n.__NG_ELEMENT_ID__=cw,n})();const lw=Qg,uw=class extends lw{constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(i,o){const l=this._declarationTContainer.tView,g=Ud(this._declarationLView,l,i,16,null,l.declTNode,null,null,null,null,o||null);g[mr]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[xi];return null!==D&&(g[xi]=D.createEmbeddedView(l)),xh(l,g,i),new Wd(g)}};function cw(){return Ay(Xe(),x())}function Ay(n,i){return 4&n.type?new uw(i,n,En(n,i)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();function dw(){return TE(Xe(),x())}const hw=Ry,CE=class extends hw{constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return En(this._hostTNode,this._hostLView)}get injector(){return new wo(this._hostTNode,this._hostLView)}get parentInjector(){const i=is(this._hostTNode,this._hostLView);if(ks(i)){const o=Mt(i,this._hostLView),l=zt(i);return new wo(o[Kt].data[l+8],o)}return new wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=DE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Jn}createEmbeddedView(i,o,l){let g,E;"number"==typeof l?g=l:null!=l&&(g=l.index,E=l.injector);const D=i.createEmbeddedView(o||{},E);return this.insert(D,g),D}createComponent(i,o,l,g,E){const D=i&&!function dl(n){return"function"==typeof n}(i);let P;if(D)P=o;else{const Ie=o||{};P=Ie.index,l=Ie.injector,g=Ie.projectableNodes,E=Ie.environmentInjector||Ie.ngModuleRef}const U=D?i:new rd(gn(i)),Q=l||this.parentInjector;if(!E&&null==U.ngModule){const Ke=(D?Q:this.parentInjector).get(yl,null);Ke&&(E=Ke)}const ae=U.create(Q,g,void 0,E);return this.insert(ae.hostView,P),ae}insert(i,o){const l=i._lView,g=l[Kt];if(function go(n){return Hi(n[Zr])}(l)){const ae=this.indexOf(i);if(-1!==ae)this.detach(ae);else{const Ie=l[Zr],Ke=new CE(Ie,Ie[ji],Ie[Zr]);Ke.detach(Ke.indexOf(i))}}const E=this._adjustIndex(o),D=this._lContainer;!function y(n,i,o,l){const g=Jn+l,E=o.length;l>0&&(o[g-1][$r]=i),l<E-Jn?(i[$r]=o[g],Ls(o,Jn+l,i)):(o.push(i),i[$r]=null),i[Zr]=o;const D=i[mr];null!==D&&o!==D&&function C(n,i){const o=n[cs];i[Tn]!==i[Zr][Zr][Tn]&&(n[yr]=!0),null===o?n[cs]=[i]:o.push(i)}(D,i);const P=i[xi];null!==P&&P.insertView(n),i[jn]|=64}(g,l,D,E);const P=qu(E,D),U=l[Ve],Q=jl(U,D[wr]);return null!==Q&&function gd(n,i,o,l,g,E){l[Vi]=g,l[ji]=i,vc(n,l,o,1,g,E)}(g,D[ji],U,l,Q,P),i.attachToViewContainerRef(),Ls(vv(D),E,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=DE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=J(this._lContainer,o);l&&(Ta(vv(this._lContainer),o),de(l[Kt],l))}detach(i){const o=this._adjustIndex(i,-1),l=J(this._lContainer,o);return l&&null!=Ta(vv(this._lContainer),o)?new Wd(l):null}_adjustIndex(i,o=0){return i??this.length+o}};function DE(n){return n[cr]}function vv(n){return n[cr]||(n[cr]=[])}function TE(n,i){let o;const l=i[n.index];if(Hi(l))o=l;else{let g;if(8&n.type)g=pr(l);else{const E=i[Ve];g=E.createComment("");const D=hr(n,i);Wr(E,jl(E,D),g,function ol(n,i){return n.nextSibling(i)}(E,D),!1)}i[n.index]=o=Cm(l,i,g,n),ic(i,o)}return new CE(o,n,i)}class Ev{constructor(i){this.queryList=i,this.matches=null}clone(){return new Ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class wv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,g=[];for(let E=0;E<l;E++){const D=o.getByIndex(E);g.push(this.queries[D.indexInDeclarationView].clone())}return new wv(g)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==OE(i,o).matches&&this.queries[o].setDirty()}}class SE{constructor(i,o,l=null){this.predicate=i,this.flags=o,this.read=l}}class Iv{constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const g=null!==o?o.length:0,E=this.getByIndex(l).embeddedTView(i,g);E&&(E.indexInDeclarationView=l,null!==o?o.push(E):o=[E])}return null!==o?new Iv(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Cv{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Cv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let g=0;g<l.length;g++){const E=l[g];this.matchTNodeWithReadOption(i,o,fw(o,E)),this.matchTNodeWithReadOption(i,o,ro(o,i,E,!1,!1))}else l===Qg?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ro(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const g=this.metadata.read;if(null!==g)if(g===Zn||g===Ry||g===Qg&&4&o.type)this.addMatch(o.index,-2);else{const E=ro(o,i,g,!1,!1);null!==E&&this.addMatch(o.index,E)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function fw(n,i){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function gw(n,i,o,l){return-1===o?function pw(n,i){return 11&n.type?En(n,i):4&n.type?Ay(n,i):null}(i,n):-2===o?function mw(n,i,o){return o===Zn?En(i,n):o===Qg?Ay(i,n):o===Ry?TE(i,n):void 0}(n,i,l):Dr(n,n[Kt],o,i)}function bE(n,i,o,l){const g=i[xi].queries[l];if(null===g.matches){const E=n.data,D=o.matches,P=[];for(let U=0;U<D.length;U+=2){const Q=D[U];P.push(Q<0?null:gw(i,E[Q],D[U+1],o.metadata.read))}g.matches=P}return g.matches}function Dv(n,i,o,l){const g=n.queries.getByIndex(o),E=g.matches;if(null!==E){const D=bE(n,i,g,o);for(let P=0;P<E.length;P+=2){const U=E[P];if(U>0)l.push(D[P/2]);else{const Q=E[P+1],ae=i[-U];for(let Ie=Jn;Ie<ae.length;Ie++){const Ke=ae[Ie];Ke[mr]===Ke[Zr]&&Dv(Ke[Kt],Ke,Q,l)}if(null!==ae[cs]){const Ie=ae[cs];for(let Ke=0;Ke<Ie.length;Ke++){const ct=Ie[Ke];Dv(ct[Kt],ct,Q,l)}}}}}return l}function AE(n){const i=x(),o=B(),l=ua();hi(l+1);const g=OE(o,l);if(n.dirty&&function Mo(n){return 4==(4&n[jn])}(i)===(2==(2&g.metadata.flags))){if(null===g.matches)n.reset([]);else{const E=g.crossesNgTemplate?Dv(o,i,l,[]):bE(o,i,g,l);n.reset(E,Mi),n.notifyOnChanges()}return!0}return!1}function RE(n,i,o){const l=B();l.firstCreatePass&&(xE(l,new SE(n,i,o),-1),2==(2&i)&&(l.staticViewQueries=!0)),NE(l,x(),i)}function ME(n,i,o,l){const g=B();if(g.firstCreatePass){const E=Xe();xE(g,new SE(i,o,l),E.index),function _w(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(g,n),2==(2&o)&&(g.staticContentQueries=!0)}NE(g,x(),o)}function PE(){return function yw(n,i){return n[xi].queries[i].queryList}(x(),ua())}function NE(n,i,o){const l=new _v(4==(4&o));al(n,i,l,l.destroy),null===i[xi]&&(i[xi]=new wv),i[xi].queries.push(new Ev(l))}function xE(n,i,o){null===n.queries&&(n.queries=new Iv),n.queries.track(new Cv(i,o))}function OE(n,i){return n.queries.getByIndex(i)}function Tv(n){return!!_i(n)}function Py(...n){}const XE=new ti("Application Initializer");let Ny=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Py,this.reject=Py,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,g)=>{this.resolve=l,this.reject=g})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const E=this.appInits[g]();if(Gh(E))o.push(E);else if(nh(E)){const D=new Promise((P,U)=>{E.subscribe({complete:P,error:U})});o.push(D)}}Promise.all(o).then(()=>{l()}).catch(g=>{this.reject(g)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(qt(XE,8))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JE=new ti("AppId",{providedIn:"root",factory:function e0(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const t0=new ti("Platform Initializer"),Uw=new ti("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bw=new ti("AnimationModuleType");let $w=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const xy=new ti("LocaleId",{providedIn:"root",factory:()=>Vr(xy,Yt.Optional|Yt.SkipSelf)||function jw(){return typeof $localize<"u"&&$localize.locale||uc}()}),Hw=new ti("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zw{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let Gw=(()=>{class n{compileModuleSync(o){return new pv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),E=Uu(_i(o).declarations).reduce((D,P)=>{const U=gn(P);return U&&D.push(new rd(U)),D},[]);return new zw(l,E)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qw=(()=>Promise.resolve(0))();function Pv(n){typeof Zone>"u"?qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ju{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gc(!1),this.onMicrotaskEmpty=new Gc(!1),this.onStable=new Gc(!1),this.onError=new Gc(!1),typeof Zone>"u")throw new ot(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!l&&o,g.shouldCoalesceRunChangeDetection=l,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function Zw(){let n=Ln.requestAnimationFrame,i=Ln.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xw(n){const i=()=>{!function Qw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ln,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,Nv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,g,E,D,P)=>{try{return s0(n),o.invokeTask(g,E,D,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||n.shouldCoalesceRunChangeDetection)&&i(),o0(n)}},onInvoke:(o,l,g,E,D,P,U)=>{try{return s0(n),o.invoke(g,E,D,P,U)}finally{n.shouldCoalesceRunChangeDetection&&i(),o0(n)}},onHasTask:(o,l,g,E)=>{o.hasTask(g,E),l===g&&("microTask"==E.change?(n._hasPendingMicrotasks=E.microTask,xv(n),Nv(n)):"macroTask"==E.change&&(n.hasPendingMacrotasks=E.macroTask))},onHandleError:(o,l,g,E)=>(o.handleError(g,E),n.runOutsideAngular(()=>n.onError.emit(E)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ju.isInAngularZone())throw new ot(909,!1)}static assertNotInAngularZone(){if(ju.isInAngularZone())throw new ot(909,!1)}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,g){const E=this._inner,D=E.scheduleEventTask("NgZoneEvent: "+g,i,Yw,Py,Py);try{return E.runTask(D,o,l)}finally{E.cancelTask(D)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const Yw={};function Nv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function s0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function o0(n){n._nesting--,Nv(n)}class Jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gc,this.onMicrotaskEmpty=new Gc,this.onStable=new Gc,this.onError=new Gc}run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,g){return i.apply(o,l)}}const a0=new ti(""),l0=new ti("");let Ov,eI=(()=>{class n{constructor(o,l,g){this._ngZone=o,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ov||(function tI(n){Ov=n}(g),g.addToWindow(l)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ju.assertNotInAngularZone(),Pv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,g){let E=-1;l&&l>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==E),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:E,updateCb:g})}whenStable(o,l,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,l,g){return[]}}return n.\u0275fac=function(o){return new(o||n)(qt(ju),qt(u0),qt(l0))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac}),n})(),u0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return Ov?.findTestabilityInTree(this,o,l)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const pd=!1;let lh=null;const c0=new ti("AllowMultipleToken"),kv=new ti("PlatformDestroyListeners"),d0=new ti("appBootstrapListener");class iI{constructor(i,o){this.name=i,this.token=o}}function f0(n,i,o=[]){const l=`Platform: ${i}`,g=new ti(l);return(E=[])=>{let D=Fv();if(!D||D.injector.get(c0,!1)){const P=[...o,...E,{provide:g,useValue:!0}];n?n(P):function sI(n){if(lh&&!lh.get(c0,!1))throw new ot(400,!1);lh=n;const i=n.get(g0);(function h0(n){const i=n.get(t0,null);i&&i.forEach(o=>o())})(n)}(function p0(n=[],i){return Jc.create({name:i,providers:[{provide:Nd,useValue:"platform"},{provide:kv,useValue:new Set([()=>lh=null])},...n]})}(P,l))}return function aI(n){const i=Fv();if(!i)throw new ot(401,!1);return i}()}}function Fv(){return lh?.get(g0)??null}let g0=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const g=function y0(n,i){let o;return o="noop"===n?new Jw:("zone.js"===n?void 0:n)||new ju(i),o}(l?.ngZone,function m0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),E=[{provide:ju,useValue:g}];return g.run(()=>{const D=Jc.create({providers:E,parent:this.injector,name:o.moduleType.name}),P=o.create(D),U=P.injector.get(Rc,null);if(!U)throw new ot(402,!1);return g.runOutsideAngular(()=>{const Q=g.onError.subscribe({next:ae=>{U.handleError(ae)}});P.onDestroy(()=>{ky(this._modules,P),Q.unsubscribe()})}),function _0(n,i,o){try{const l=o();return Gh(l)?l.catch(g=>{throw i.runOutsideAngular(()=>n.handleError(g)),g}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(U,g,()=>{const Q=P.injector.get(Ny);return Q.runInitializers(),Q.donePromise.then(()=>(function Kg(n){Ye(n,"Expected localeId to be defined"),"string"==typeof n&&(Wg=n.toLowerCase().replace(/_/g,"-"))}(P.injector.get(xy,uc)||uc),this._moduleDoBootstrap(P),P))})})}bootstrapModule(o,l=[]){const g=v0({},l);return function nI(n,i,o){const l=new pv(o);return Promise.resolve(l)}(0,0,o).then(E=>this.bootstrapModuleFactory(E,g))}_moduleDoBootstrap(o){const l=o.injector.get(Oy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(g=>l.bootstrap(g));else{if(!o.instance.ngDoBootstrap)throw new ot(-403,!1);o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ot(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(kv,null);o&&(o.forEach(l=>l()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(qt(Jc))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function v0(n,i){return Array.isArray(i)?i.reduce(v0,n):{...n,...i}}let Oy=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,l,g){this._zone=o,this._injector=l,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new j.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),D=new j.y(P=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{ju.assertNotInAngularZone(),Pv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{ju.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{U.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,Pe.T)(E,D.pipe((0,Ce.B)()))}bootstrap(o,l){const g=o instanceof z;if(!this._injector.get(Ny).done){!g&&Zi(o);throw new ot(405,pd)}let D;D=g?o:this._injector.get(Ct).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const P=function rI(n){return n.isBoundToModule}(D)?void 0:this._injector.get(Ap),Q=D.create(Jc.NULL,[],l||D.selector,P),ae=Q.location.nativeElement,Ie=Q.injector.get(a0,null);return Ie?.registerApplication(ae),Q.onDestroy(()=>{this.detachView(Q.hostView),ky(this.components,Q),Ie?.unregisterApplication(ae)}),this._loadComponent(Q),Q}tick(){if(this._runningTick)throw new ot(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;ky(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const l=this._injector.get(d0,[]);l.push(...this._bootstrapListeners),l.forEach(g=>g(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ky(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ot(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(qt(ju),qt(yl),qt(Rc))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ky(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function uI(){return!1}let cI=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();function dI(n){return function hI(n,i,o){if(jr(n)&&!o){const l=Qi(n.index,i);return new Wd(l,l)}return 47&n.type?new Wd(i[Tn],i):null}(Xe(),x(),16==(16&n))}class D0{constructor(){}supports(i){return Yd(i)}create(i){return new _I(i)}}const yI=(n,i)=>i;class _I{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||yI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,g=0,E=null;for(;o||l;){const D=!l||o&&o.currentIndex<S0(l,g,E)?o:l,P=S0(D,g,E),U=D.currentIndex;if(D===l)g--,l=l._nextRemoved;else if(o=o._next,null==D.previousIndex)g++;else{E||(E=[]);const Q=P-g,ae=U-g;if(Q!=ae){for(let Ke=0;Ke<Q;Ke++){const ct=Ke<E.length?E[Ke]:E[Ke]=0,Nt=ct+Ke;ae<=Nt&&Nt<Q&&(E[Ke]=ct+1)}E[D.previousIndex]=ae-Q}}P!==U&&i(D,P,U)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Yd(i))throw new ot(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let g,E,D,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let P=0;P<this.length;P++)E=i[P],D=this._trackByFn(P,E),null!==o&&Object.is(o.trackById,D)?(l&&(o=this._verifyReinsertion(o,E,D,P)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,D,P),l=!0),o=o._next}else g=0,function v_(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,P=>{D=this._trackByFn(g,P),null!==o&&Object.is(o.trackById,D)?(l&&(o=this._verifyReinsertion(o,P,D,g)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,D,g),l=!0),o=o._next,g++}),this.length=g;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,g){let E;return null===i?E=this._itTail:(E=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,E,g)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,g))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,E,g)):i=this._addAfter(new vI(o,l),E,g),i}_verifyReinsertion(i,o,l,g){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==E?i=this._reinsertAfter(E,i._prev,g):i.currentIndex!=g&&(i.currentIndex=g,this._addToMoves(i,g)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const g=i._prevRemoved,E=i._nextRemoved;return null===g?this._removalsHead=E:g._nextRemoved=E,null===E?this._removalsTail=g:E._prevRemoved=g,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const g=null===o?this._itHead:o._next;return i._next=g,i._prev=o,null===g?this._itTail=i:g._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new T0),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new T0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class vI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class T0{constructor(){this.map=new Map}put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new EI,this.map.set(o,l)),l.add(i)}get(i,o){const g=this.map.get(i);return g?g.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function S0(n,i,o){const l=n.previousIndex;if(null===l)return l;let g=0;return o&&l<o.length&&(g=o[l]),l+i+g}class b0{constructor(){}supports(i){return i instanceof Map||jh(i)}create(){return new wI}}class wI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||jh(i)))throw new ot(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,g)=>{if(o&&o.key===g)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const E=this._getOrCreateRecordForKey(g,l);o=this._insertBeforeOrAppend(o,E)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const g=this._records.get(i);this._maybeAddToChanges(g,o);const E=g._prev,D=g._next;return E&&(E._next=D),D&&(D._prev=E),g._next=null,g._prev=null,g}const l=new II(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class II{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function A0(){return new $v([new D0])}let $v=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const g=l.factories.slice();o=o.concat(g)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||A0()),deps:[[n,new qn,new An]]}}find(o){const l=this.factories.find(g=>g.supports(o));if(null!=l)return l;throw new ot(901,!1)}}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:A0}),n})();function R0(){return new jv([new b0])}let jv=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const g=l.factories.slice();o=o.concat(g)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||R0()),deps:[[n,new qn,new An]]}}find(o){const l=this.factories.find(g=>g.supports(o));if(l)return l;throw new ot(901,!1)}}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:R0}),n})();const TI=f0(null,"core",[]);let SI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(qt(Oy))},n.\u0275mod=Qe({type:n}),n.\u0275inj=yn({}),n})();function bI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(rn,tt,G)=>{G.d(tt,{Fj:()=>Ze,qu:()=>la,u:()=>xs,sg:()=>po,u5:()=>No,JJ:()=>Ln,JL:()=>xn,On:()=>cs,YN:()=>ee,UX:()=>Vo,Q7:()=>ds,EJ:()=>Z,_Y:()=>Jn,Kr:()=>vn});var v=G(4650),te=G(6895),j=G(8996),Pe=G(9751),Ce=G(4742),Fe=G(8421),$e=G(7669),ye=G(5403),qe=G(3268),ce=G(1810),Ne=G(4004);let at=(()=>{class x{constructor(L,re){this._renderer=L,this._elementRef=re,this.onChange=Xe=>{},this.onTouched=()=>{}}setProperty(L,re){this._renderer.setProperty(this._elementRef.nativeElement,L,re)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(v.Qsj),v.Y36(v.SBq))},x.\u0275dir=v.lG2({type:x}),x})(),gt=(()=>{class x extends at{}return x.\u0275fac=function(){let B;return function(re){return(B||(B=v.n5z(x)))(re||x)}}(),x.\u0275dir=v.lG2({type:x,features:[v.qOj]}),x})();const Pt=new v.OlP("NgValueAccessor"),mt={provide:Pt,useExisting:(0,v.Gpc)(()=>Ze),multi:!0},_t=new v.OlP("CompositionEventMode");let Ze=(()=>{class x extends at{constructor(L,re,Xe){super(L,re),this._compositionMode=Xe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Et(){const x=(0,te.q)()?(0,te.q)().getUserAgent():"";return/android (\d+)/.test(x.toLowerCase())}())}writeValue(L){this.setProperty("value",L??"")}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(_t,8))},x.\u0275dir=v.lG2({type:x,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,re){1&L&&v.NdJ("input",function(dn){return re._handleInput(dn.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(dn){return re._compositionEnd(dn.target.value)})},features:[v._Bn([mt]),v.qOj]}),x})();const Oe=!1;const lt=new v.OlP("NgValidators"),q=new v.OlP("NgAsyncValidators");function Vt(x){return function rt(x){return null==x||("string"==typeof x||Array.isArray(x))&&0===x.length}(x.value)?{required:!0}:null}function je(x){return null}function Ye(x){return null!=x}function ke(x){const B=(0,v.QGY)(x)?(0,j.D)(x):x;if(Oe&&!(0,v.CqO)(B)){let L="Expected async validator to return Promise or Observable.";throw"object"==typeof x&&(L+=" Are you using a synchronous validator where an async validator is expected?"),new v.vHH(-1101,L)}return B}function dt(x){let B={};return x.forEach(L=>{B=null!=L?{...B,...L}:B}),0===Object.keys(B).length?null:B}function Tt(x,B){return B.map(L=>L(x))}function Zt(x){return x.map(B=>function $t(x){return!x.validate}(B)?B:L=>B.validate(L))}function yn(x){return null!=x?function cn(x){if(!x)return null;const B=x.filter(Ye);return 0==B.length?null:function(L){return dt(Tt(L,B))}}(Zt(x)):null}function nr(x){return null!=x?function zn(x){if(!x)return null;const B=x.filter(Ye);return 0==B.length?null:function(L){return function ge(...x){const B=(0,$e.jO)(x),{args:L,keys:re}=(0,Ce.D)(x),Xe=new Pe.y(dn=>{const{length:Gr}=L;if(!Gr)return void dn.complete();const zi=new Array(Gr);let mo=Gr,Ws=Gr;for(let Uo=0;Uo<Gr;Uo++){let Ds=!1;(0,Fe.Xf)(L[Uo]).subscribe((0,ye.x)(dn,Ks=>{Ds||(Ds=!0,Ws--),zi[Uo]=Ks},()=>mo--,void 0,()=>{(!mo||!Ds)&&(Ws||dn.next(re?(0,ce.n)(re,zi):zi),dn.complete())}))}});return B?Xe.pipe((0,qe.Z)(B)):Xe}(Tt(L,B).map(ke)).pipe((0,Ne.U)(dt))}}(Zt(x)):null}function Fn(x,B){return null===x?[B]:Array.isArray(x)?[...x,B]:[x,B]}function Sr(x){return x._rawValidators}function Gt(x){return x._rawAsyncValidators}function Ar(x){return x?Array.isArray(x)?x:[x]:[]}function fr(x,B){return Array.isArray(x)?x.includes(B):x===B}function br(x,B){const L=Ar(B);return Ar(x).forEach(Xe=>{fr(L,Xe)||L.push(Xe)}),L}function Wn(x,B){return Ar(B).filter(L=>!fr(x,L))}class Yt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=yn(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=nr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,L){return!!this.control&&this.control.hasError(B,L)}getError(B,L){return this.control?this.control.getError(B,L):null}}class In extends Yt{get formDirective(){return null}get path(){return null}}class gi extends Yt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qr{constructor(B){this._cd=B}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ln=(()=>{class x extends qr{constructor(L){super(L)}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(gi,2))},x.\u0275dir=v.lG2({type:x,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,re){2&L&&v.ekj("ng-untouched",re.isUntouched)("ng-touched",re.isTouched)("ng-pristine",re.isPristine)("ng-dirty",re.isDirty)("ng-valid",re.isValid)("ng-invalid",re.isInvalid)("ng-pending",re.isPending)},features:[v.qOj]}),x})(),xn=(()=>{class x extends qr{constructor(L){super(L)}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(In,10))},x.\u0275dir=v.lG2({type:x,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,re){2&L&&v.ekj("ng-untouched",re.isUntouched)("ng-touched",re.isTouched)("ng-pristine",re.isPristine)("ng-dirty",re.isDirty)("ng-valid",re.isValid)("ng-invalid",re.isInvalid)("ng-pending",re.isPending)("ng-submitted",re.isSubmitted)},features:[v.qOj]}),x})();function ri(x,B){return x?`with name: '${B}'`:`at index: ${B}`}const qi=!1,Ni="VALID",yi="INVALID",be="PENDING",we="DISABLED";function oe(x){return(me(x)?x.validators:x)||null}function ne(x,B){return(me(B)?B.asyncValidators:x)||null}function me(x){return null!=x&&!Array.isArray(x)&&"object"==typeof x}function ve(x,B,L){const re=x.controls;if(!(B?Object.keys(re):re).length)throw new v.vHH(1e3,qi?function Vr(x){return`\n    There are no form controls registered with this ${x?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(B):"");if(!re[L])throw new v.vHH(1001,qi?function Pi(x,B){return`Cannot find form control ${ri(x,B)}`}(B,L):"")}function pe(x,B,L){x._forEachChild((re,Xe)=>{if(void 0===L[Xe])throw new v.vHH(1002,qi?function mi(x,B){return`Must supply a value for form control ${ri(x,B)}`}(B,Xe):"")})}class Le{constructor(B,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(B),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Ni}get invalid(){return this.status===yi}get pending(){return this.status==be}get disabled(){return this.status===we}get enabled(){return this.status!==we}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._assignValidators(B)}setAsyncValidators(B){this._assignAsyncValidators(B)}addValidators(B){this.setValidators(br(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(br(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Wn(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Wn(B,this._rawAsyncValidators))}hasValidator(B){return fr(this._rawValidators,B)}hasAsyncValidator(B){return fr(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=be,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const L=this._parentMarkedDirty(B.onlySelf);this.status=we,this.errors=null,this._forEachChild(re=>{re.disable({...B,onlySelf:!0})}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...B,skipPristineCheck:L}),this._onDisabledChange.forEach(re=>re(!0))}enable(B={}){const L=this._parentMarkedDirty(B.onlySelf);this.status=Ni,this._forEachChild(re=>{re.enable({...B,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors({...B,skipPristineCheck:L}),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}getRawValue(){return this.value}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ni||this.status===be)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?we:Ni}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=be,this._hasOwnPendingAsyncValidator=!0;const L=ke(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,L={}){this.errors=B,this._updateControlsErrors(!1!==L.emitEvent)}get(B){let L=B;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((re,Xe)=>re&&re._find(Xe),this)}getError(B,L){const re=L?this.get(L):this;return re&&re.errors?re.errors[B]:null}hasError(B,L){return!!this.getError(B,L)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new v.vpe,this.statusChanges=new v.vpe}_calculateStatus(){return this._allControlsDisabled()?we:this.errors?yi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(be)?be:this._anyControlsHaveStatus(yi)?yi:Ni}_anyControlsHaveStatus(B){return this._anyControls(L=>L.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){me(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(B){return null}_assignValidators(B){this._rawValidators=Array.isArray(B)?B.slice():B,this._composedValidatorFn=function he(x){return Array.isArray(x)?yn(x):x||null}(this._rawValidators)}_assignAsyncValidators(B){this._rawAsyncValidators=Array.isArray(B)?B.slice():B,this._composedAsyncValidatorFn=function Se(x){return Array.isArray(x)?nr(x):x||null}(this._rawAsyncValidators)}}class nt extends Le{constructor(B,L,re){super(oe(L),ne(re,L)),this.controls=B,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,L){return this.controls[B]?this.controls[B]:(this.controls[B]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(B,L,re={}){this.registerControl(B,L),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(B,L={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(B,L,re={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],L&&this.registerControl(B,L),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,L={}){pe(this,!0,B),Object.keys(B).forEach(re=>{ve(this,!0,re),this.controls[re].setValue(B[re],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(B,L={}){null!=B&&(Object.keys(B).forEach(re=>{const Xe=this.controls[re];Xe&&Xe.patchValue(B[re],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(B={},L={}){this._forEachChild((re,Xe)=>{re.reset(B[Xe],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(B,L,re)=>(B[re]=L.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(L,re)=>!!re._syncPendingControls()||L);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(L=>{const re=this.controls[L];re&&B(re,L)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const[L,re]of Object.entries(this.controls))if(this.contains(L)&&B(re))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,re,Xe)=>((re.enabled||this.disabled)&&(L[Xe]=re.value),L))}_reduceChildren(B,L){let re=B;return this._forEachChild((Xe,dn)=>{re=L(re,Xe,dn)}),re}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(B){return this.controls.hasOwnProperty(B)?this.controls[B]:null}}class Dn extends nt{}const Li=new v.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ht}),ht="always";function Qe(x,B){return[...B.path,x]}function xt(x,B,L=ht){gn(x,B),B.valueAccessor.writeValue(x.value),(x.disabled||"always"===L)&&B.valueAccessor.setDisabledState?.(x.disabled),function vr(x,B){B.valueAccessor.registerOnChange(L=>{x._pendingValue=L,x._pendingChange=!0,x._pendingDirty=!0,"change"===x.updateOn&&_i(x,B)})}(x,B),function Js(x,B){const L=(re,Xe)=>{B.valueAccessor.writeValue(re),Xe&&B.viewToModelUpdate(re)};x.registerOnChange(L),B._registerOnDestroy(()=>{x._unregisterOnChange(L)})}(x,B),function Zi(x,B){B.valueAccessor.registerOnTouched(()=>{x._pendingTouched=!0,"blur"===x.updateOn&&x._pendingChange&&_i(x,B),"submit"!==x.updateOn&&x.markAsTouched()})}(x,B),function ir(x,B){if(B.valueAccessor.setDisabledState){const L=re=>{B.valueAccessor.setDisabledState(re)};x.registerOnDisabledChange(L),B._registerOnDestroy(()=>{x._unregisterOnDisabledChange(L)})}}(x,B)}function pn(x,B,L=!0){const re=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(re),B.valueAccessor.registerOnTouched(re)),Cr(x,B),x&&(B._invokeOnDestroyCallbacks(),x._registerOnCollectionChange(()=>{}))}function Pn(x,B){x.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(B)})}function gn(x,B){const L=Sr(x);null!==B.validator?x.setValidators(Fn(L,B.validator)):"function"==typeof L&&x.setValidators([L]);const re=Gt(x);null!==B.asyncValidator?x.setAsyncValidators(Fn(re,B.asyncValidator)):"function"==typeof re&&x.setAsyncValidators([re]);const Xe=()=>x.updateValueAndValidity();Pn(B._rawValidators,Xe),Pn(B._rawAsyncValidators,Xe)}function Cr(x,B){let L=!1;if(null!==x){if(null!==B.validator){const Xe=Sr(x);if(Array.isArray(Xe)&&Xe.length>0){const dn=Xe.filter(Gr=>Gr!==B.validator);dn.length!==Xe.length&&(L=!0,x.setValidators(dn))}}if(null!==B.asyncValidator){const Xe=Gt(x);if(Array.isArray(Xe)&&Xe.length>0){const dn=Xe.filter(Gr=>Gr!==B.asyncValidator);dn.length!==Xe.length&&(L=!0,x.setAsyncValidators(dn))}}}const re=()=>{};return Pn(B._rawValidators,re),Pn(B._rawAsyncValidators,re),L}function _i(x,B){x._pendingDirty&&x.markAsDirty(),x.setValue(x._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(x._pendingValue),x._pendingChange=!1}function $i(x,B){if(!x.hasOwnProperty("model"))return!1;const L=x.model;return!!L.isFirstChange()||!Object.is(B,L.currentValue)}function Yr(x,B){if(!B)return null;let L,re,Xe;return Array.isArray(B),B.forEach(dn=>{dn.constructor===Ze?L=dn:function ji(x){return Object.getPrototypeOf(x.constructor)===gt}(dn)?re=dn:Xe=dn}),Xe||re||L||null}function Mn(x,B){const L=x.indexOf(B);L>-1&&x.splice(L,1)}function Bn(x){return"object"==typeof x&&null!==x&&2===Object.keys(x).length&&"value"in x&&"disabled"in x}const Tn=class extends Le{constructor(B=null,L,re){super(oe(L),ne(re,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),me(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Bn(B)?B.value:B)}setValue(B,L={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(B,L={}){this.setValue(B,L)}reset(B=this.defaultValue,L={}){this._applyFormState(B),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){Mn(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){Mn(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){Bn(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}},wr={provide:gi,useExisting:(0,v.Gpc)(()=>cs)},cr=(()=>Promise.resolve())();let cs=(()=>{class x extends gi{constructor(L,re,Xe,dn,Gr,zi){super(),this._changeDetectorRef=Gr,this.callSetDisabledState=zi,this.control=new Tn,this._registered=!1,this.update=new v.vpe,this._parent=L,this._setValidators(re),this._setAsyncValidators(Xe),this.valueAccessor=Yr(0,dn)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const re=L.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),$i(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){cr.then(()=>{this.control.setValue(L,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(L){const re=L.isDisabled.currentValue,Xe=0!==re&&(0,v.D6c)(re);cr.then(()=>{Xe&&!this.control.disabled?this.control.disable():!Xe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(L){return this._parent?Qe(L,this._parent):[L]}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(In,9),v.Y36(lt,10),v.Y36(q,10),v.Y36(Pt,10),v.Y36(v.sBO,8),v.Y36(Li,8))},x.\u0275dir=v.lG2({type:x,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[v._Bn([wr]),v.qOj,v.TTD]}),x})(),Jn=(()=>{class x{}return x.\u0275fac=function(L){return new(L||x)},x.\u0275dir=v.lG2({type:x,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),x})(),jr=(()=>{class x{}return x.\u0275fac=function(L){return new(L||x)},x.\u0275mod=v.oAB({type:x}),x.\u0275inj=v.cJS({}),x})();const os=new v.OlP("NgModelWithFormControlWarning"),ao={provide:In,useExisting:(0,v.Gpc)(()=>po)};let po=(()=>{class x extends In{constructor(L,re,Xe){super(),this.callSetDisabledState=Xe,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new v.vpe,this._setValidators(L),this._setAsyncValidators(re)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const re=this.form.get(L.path);return xt(re,L,this.callSetDisabledState),re.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),re}getControl(L){return this.form.get(L.path)}removeControl(L){pn(L.control||null,L,!1),function Ge(x,B){const L=x.indexOf(B);L>-1&&x.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,re){this.form.get(L.path).setValue(re)}onSubmit(L){return this.submitted=!0,function Hs(x,B){x._syncPendingControls(),B.forEach(L=>{const re=L.control;"submit"===re.updateOn&&re._pendingChange&&(L.viewToModelUpdate(re._pendingValue),re._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const re=L.control,Xe=this.form.get(L.path);re!==Xe&&(pn(re||null,L),(x=>x instanceof Tn)(Xe)&&(xt(Xe,L,this.callSetDisabledState),L.control=Xe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const re=this.form.get(L.path);(function gr(x,B){gn(x,B)})(re,L),re.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const re=this.form.get(L.path);re&&function Rs(x,B){return Cr(x,B)}(re,L)&&re.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gn(this.form,this),this._oldForm&&Cr(this._oldForm,this)}_checkFormPresent(){}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(lt,10),v.Y36(q,10),v.Y36(Li,8))},x.\u0275dir=v.lG2({type:x,selectors:[["","formGroup",""]],hostBindings:function(L,re){1&L&&v.NdJ("submit",function(dn){return re.onSubmit(dn)})("reset",function(){return re.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([ao]),v.qOj,v.TTD]}),x})();const Ao={provide:gi,useExisting:(0,v.Gpc)(()=>xs)};let xs=(()=>{class x extends gi{set isDisabled(L){}constructor(L,re,Xe,dn,Gr){super(),this._ngModelWarningConfig=Gr,this._added=!1,this.update=new v.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(re),this._setAsyncValidators(Xe),this.valueAccessor=Yr(0,dn)}ngOnChanges(L){this._added||this._setUpControl(),$i(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return Qe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return x._ngModelWarningSentOnce=!1,x.\u0275fac=function(L){return new(L||x)(v.Y36(In,13),v.Y36(lt,10),v.Y36(q,10),v.Y36(Pt,10),v.Y36(os,8))},x.\u0275dir=v.lG2({type:x,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[v._Bn([Ao]),v.qOj,v.TTD]}),x})();const Ro={provide:Pt,useExisting:(0,v.Gpc)(()=>Z),multi:!0};function $s(x,B){return null==x?`${B}`:(B&&"object"==typeof B&&(B="Object"),`${x}: ${B}`.slice(0,50))}let Z=(()=>{class x extends gt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){this.value=L;const Xe=$s(this._getOptionId(L),L);this.setProperty("value",Xe)}registerOnChange(L){this.onChange=re=>{this.value=this._getOptionValue(re),L(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(L){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re),L))return re;return null}_getOptionValue(L){const re=function Ms(x){return x.split(":")[0]}(L);return this._optionMap.has(re)?this._optionMap.get(re):L}}return x.\u0275fac=function(){let B;return function(re){return(B||(B=v.n5z(x)))(re||x)}}(),x.\u0275dir=v.lG2({type:x,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(L,re){1&L&&v.NdJ("change",function(dn){return re.onChange(dn.target.value)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[v._Bn([Ro]),v.qOj]}),x})(),ee=(()=>{class x{constructor(L,re,Xe){this._element=L,this._renderer=re,this._select=Xe,this._select&&(this.id=this._select._registerOption())}set ngValue(L){null!=this._select&&(this._select._optionMap.set(this.id,L),this._setElementValue($s(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._setElementValue(L),this._select&&this._select.writeValue(this._select.value)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(Z,9))},x.\u0275dir=v.lG2({type:x,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),x})();const Ee={provide:Pt,useExisting:(0,v.Gpc)(()=>Ot),multi:!0};function Me(x,B){return null==x?`${B}`:("string"==typeof B&&(B=`'${B}'`),B&&"object"==typeof B&&(B="Object"),`${x}: ${B}`.slice(0,50))}let Ot=(()=>{class x extends gt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){let re;if(this.value=L,Array.isArray(L)){const Xe=L.map(dn=>this._getOptionId(dn));re=(dn,Gr)=>{dn._setSelected(Xe.indexOf(Gr.toString())>-1)}}else re=(Xe,dn)=>{Xe._setSelected(!1)};this._optionMap.forEach(re)}registerOnChange(L){this.onChange=re=>{const Xe=[],dn=re.selectedOptions;if(void 0!==dn){const Gr=dn;for(let zi=0;zi<Gr.length;zi++){const Ws=this._getOptionValue(Gr[zi].value);Xe.push(Ws)}}else{const Gr=re.options;for(let zi=0;zi<Gr.length;zi++){const mo=Gr[zi];if(mo.selected){const Ws=this._getOptionValue(mo.value);Xe.push(Ws)}}}this.value=Xe,L(Xe)}}_registerOption(L){const re=(this._idCounter++).toString();return this._optionMap.set(re,L),re}_getOptionId(L){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re)._value,L))return re;return null}_getOptionValue(L){const re=function He(x){return x.split(":")[0]}(L);return this._optionMap.has(re)?this._optionMap.get(re)._value:L}}return x.\u0275fac=function(){let B;return function(re){return(B||(B=v.n5z(x)))(re||x)}}(),x.\u0275dir=v.lG2({type:x,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(L,re){1&L&&v.NdJ("change",function(dn){return re.onChange(dn.target)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[v._Bn([Ee]),v.qOj]}),x})(),vn=(()=>{class x{constructor(L,re,Xe){this._element=L,this._renderer=re,this._select=Xe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(L){null!=this._select&&(this._value=L,this._setElementValue(Me(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._select?(this._value=L,this._setElementValue(Me(this.id,L)),this._select.writeValue(this._select.value)):this._setElementValue(L)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}_setSelected(L){this._renderer.setProperty(this._element.nativeElement,"selected",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return x.\u0275fac=function(L){return new(L||x)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(Ot,9))},x.\u0275dir=v.lG2({type:x,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),x})(),_r=(()=>{class x{constructor(){this._validator=je}ngOnChanges(L){if(this.inputName in L){const re=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(re),this._validator=this._enabled?this.createValidator(re):je,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}}return x.\u0275fac=function(L){return new(L||x)},x.\u0275dir=v.lG2({type:x,features:[v.TTD]}),x})();const Rr={provide:lt,useExisting:(0,v.Gpc)(()=>ds),multi:!0};let ds=(()=>{class x extends _r{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=v.D6c,this.createValidator=L=>Vt}enabled(L){return L}}return x.\u0275fac=function(){let B;return function(re){return(B||(B=v.n5z(x)))(re||x)}}(),x.\u0275dir=v.lG2({type:x,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(L,re){2&L&&v.uIk("required",re._enabled?"":null)},inputs:{required:"required"},features:[v._Bn([Rr]),v.qOj]}),x})(),ar=(()=>{class x{}return x.\u0275fac=function(L){return new(L||x)},x.\u0275mod=v.oAB({type:x}),x.\u0275inj=v.cJS({imports:[jr]}),x})();class vs extends Le{constructor(B,L,re){super(oe(L),ne(re,L)),this.controls=B,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[this._adjustIndex(B)]}push(B,L={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(B,L,re={}){this.controls.splice(B,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:re.emitEvent})}removeAt(B,L={}){let re=this._adjustIndex(B);re<0&&(re=0),this.controls[re]&&this.controls[re]._registerOnCollectionChange(()=>{}),this.controls.splice(re,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(B,L,re={}){let Xe=this._adjustIndex(B);Xe<0&&(Xe=0),this.controls[Xe]&&this.controls[Xe]._registerOnCollectionChange(()=>{}),this.controls.splice(Xe,1),L&&(this.controls.splice(Xe,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,L={}){pe(this,!1,B),B.forEach((re,Xe)=>{ve(this,!1,Xe),this.at(Xe).setValue(re,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(B,L={}){null!=B&&(B.forEach((re,Xe)=>{this.at(Xe)&&this.at(Xe).patchValue(re,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(B=[],L={}){this._forEachChild((re,Xe)=>{re.reset(B[Xe],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(B=>B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_adjustIndex(B){return B<0?B+this.length:B}_syncPendingControls(){let B=this.controls.reduce((L,re)=>!!re._syncPendingControls()||L,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((L,re)=>{B(L,re)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(L=>L.enabled&&B(L))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}_find(B){return this.at(B)??null}}function Ui(x){return!!x&&(void 0!==x.asyncValidators||void 0!==x.validators||void 0!==x.updateOn)}let la=(()=>{class x{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new x;return L.useNonNullable=!0,L}group(L,re=null){const Xe=this._reduceControls(L);let dn={};return Ui(re)?dn=re:null!==re&&(dn.validators=re.validator,dn.asyncValidators=re.asyncValidator),new nt(Xe,dn)}record(L,re=null){const Xe=this._reduceControls(L);return new Dn(Xe,re)}control(L,re,Xe){let dn={};return this.useNonNullable?(Ui(re)?dn=re:(dn.validators=re,dn.asyncValidators=Xe),new Tn(L,{...dn,nonNullable:!0})):new Tn(L,re,Xe)}array(L,re,Xe){const dn=L.map(Gr=>this._createControl(Gr));return new vs(dn,re,Xe)}_reduceControls(L){const re={};return Object.keys(L).forEach(Xe=>{re[Xe]=this._createControl(L[Xe])}),re}_createControl(L){return L instanceof Tn||L instanceof Le?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return x.\u0275fac=function(L){return new(L||x)},x.\u0275prov=v.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),No=(()=>{class x{static withConfig(L){return{ngModule:x,providers:[{provide:Li,useValue:L.callSetDisabledState??ht}]}}}return x.\u0275fac=function(L){return new(L||x)},x.\u0275mod=v.oAB({type:x}),x.\u0275inj=v.cJS({imports:[ar]}),x})(),Vo=(()=>{class x{static withConfig(L){return{ngModule:x,providers:[{provide:os,useValue:L.warnOnNgModelWithFormControl??"always"},{provide:Li,useValue:L.callSetDisabledState??ht}]}}}return x.\u0275fac=function(L){return new(L||x)},x.\u0275mod=v.oAB({type:x}),x.\u0275inj=v.cJS({imports:[ar]}),x})()},1481:(rn,tt,G)=>{G.d(tt,{Dx:()=>xn,b2:()=>gi,q6:()=>br,se:()=>Vt});var v=G(6895),te=G(4650);class j extends v.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Pe extends j{static makeCurrent(){(0,v.HT)(new Pe)}onAndCancel(ve,pe,Le){return ve.addEventListener(pe,Le,!1),()=>{ve.removeEventListener(pe,Le,!1)}}dispatchEvent(ve,pe){ve.dispatchEvent(pe)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,pe){return(pe=pe||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,pe){return"window"===pe?window:"document"===pe?ve:"body"===pe?ve.body:null}getBaseHref(ve){const pe=function Fe(){return Ce=Ce||document.querySelector("base"),Ce?Ce.getAttribute("href"):null}();return null==pe?null:function ye(me){$e=$e||document.createElement("a"),$e.setAttribute("href",me);const ve=$e.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(pe)}resetBaseElement(){Ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,v.Mx)(document.cookie,ve)}}let $e,Ce=null;const qe=new te.OlP("TRANSITION_ID"),ge=[{provide:te.ip1,useFactory:function ce(me,ve,pe){return()=>{pe.get(te.CZH).donePromise.then(()=>{const Le=(0,v.q)(),nt=ve.querySelectorAll(`style[ng-transition="${me}"]`);for(let St=0;St<nt.length;St++)Le.remove(nt[St])})}},deps:[qe,v.K0,te.zs3],multi:!0}];let at=(()=>{class me{build(){return new XMLHttpRequest}}return me.\u0275fac=function(pe){return new(pe||me)},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();const gt=new te.OlP("EventManagerPlugins");let Pt=(()=>{class me{constructor(pe,Le){this._zone=Le,this._eventNameToPlugin=new Map,pe.forEach(nt=>{nt.manager=this}),this._plugins=pe.slice().reverse()}addEventListener(pe,Le,nt){return this._findPluginFor(Le).addEventListener(pe,Le,nt)}addGlobalEventListener(pe,Le,nt){return this._findPluginFor(Le).addGlobalEventListener(pe,Le,nt)}getZone(){return this._zone}_findPluginFor(pe){const Le=this._eventNameToPlugin.get(pe);if(Le)return Le;const nt=this._plugins;for(let St=0;St<nt.length;St++){const mn=nt[St];if(mn.supports(pe))return this._eventNameToPlugin.set(pe,mn),mn}throw new Error(`No event manager plugin found for event ${pe}`)}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(gt),te.LFG(te.R0b))},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();class jt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,pe,Le){const nt=(0,v.q)().getGlobalEventTarget(this._doc,ve);if(!nt)throw new Error(`Unsupported event target ${nt} for event ${pe}`);return this.addEventListener(nt,pe,Le)}}let ot=(()=>{class me{constructor(){this.usageCount=new Map}addStyles(pe){for(const Le of pe)1===this.changeUsageCount(Le,1)&&this.onStyleAdded(Le)}removeStyles(pe){for(const Le of pe)0===this.changeUsageCount(Le,-1)&&this.onStyleRemoved(Le)}onStyleRemoved(pe){}onStyleAdded(pe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(pe,Le){const nt=this.usageCount;let St=nt.get(pe)??0;return St+=Le,St>0?nt.set(pe,St):nt.delete(pe),St}ngOnDestroy(){for(const pe of this.getAllStyles())this.onStyleRemoved(pe);this.usageCount.clear()}}return me.\u0275fac=function(pe){return new(pe||me)},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})(),mt=(()=>{class me extends ot{constructor(pe){super(),this.doc=pe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(pe){for(const Le of this.hostNodes)this.addStyleToHost(Le,pe)}onStyleRemoved(pe){const Le=this.styleRef;Le.get(pe)?.forEach(St=>St.remove()),Le.delete(pe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(pe){this.hostNodes.add(pe);for(const Le of this.getAllStyles())this.addStyleToHost(pe,Le)}removeHost(pe){this.hostNodes.delete(pe)}addStyleToHost(pe,Le){const nt=this.doc.createElement("style");nt.textContent=Le,pe.appendChild(nt);const St=this.styleRef.get(Le);St?St.push(nt):this.styleRef.set(Le,[nt])}resetHostNodes(){const pe=this.hostNodes;pe.clear(),pe.add(this.doc.head)}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(v.K0))},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_t=/%COMP%/g,q=new te.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ut(me,ve){return ve.flat(100).map(pe=>pe.replace(_t,me))}function Lt(me){return ve=>{if("__ngUnwrap__"===ve)return me;!1===me(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let Vt=(()=>{class me{constructor(pe,Le,nt,St){this.eventManager=pe,this.sharedStylesHost=Le,this.appId=nt,this.removeStylesOnCompDestory=St,this.rendererByCompId=new Map,this.defaultRenderer=new ai(pe)}createRenderer(pe,Le){if(!pe||!Le)return this.defaultRenderer;const nt=this.getOrCreateRenderer(pe,Le);return nt instanceof Ye?nt.applyToHost(pe):nt instanceof je&&nt.applyStyles(),nt}getOrCreateRenderer(pe,Le){const nt=this.rendererByCompId;let St=nt.get(Le.id);if(!St){const mn=this.eventManager,Dn=this.sharedStylesHost,xr=this.removeStylesOnCompDestory;switch(Le.encapsulation){case te.ifc.Emulated:St=new Ye(mn,Dn,Le,this.appId,xr);break;case te.ifc.ShadowDom:return new Be(mn,Dn,pe,Le);default:St=new je(mn,Dn,Le,xr)}St.onDestroy=()=>nt.delete(Le.id),nt.set(Le.id,St)}return St}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(Pt),te.LFG(mt),te.LFG(te.AFp),te.LFG(q))},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();class ai{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,pe){return pe?document.createElementNS(Et[pe]||pe,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,pe){(bn(ve)?ve.content:ve).appendChild(pe)}insertBefore(ve,pe,Le){ve&&(bn(ve)?ve.content:ve).insertBefore(pe,Le)}removeChild(ve,pe){ve&&ve.removeChild(pe)}selectRootElement(ve,pe){let Le="string"==typeof ve?document.querySelector(ve):ve;if(!Le)throw new Error(`The selector "${ve}" did not match any elements`);return pe||(Le.textContent=""),Le}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,pe,Le,nt){if(nt){pe=nt+":"+pe;const St=Et[nt];St?ve.setAttributeNS(St,pe,Le):ve.setAttribute(pe,Le)}else ve.setAttribute(pe,Le)}removeAttribute(ve,pe,Le){if(Le){const nt=Et[Le];nt?ve.removeAttributeNS(nt,pe):ve.removeAttribute(`${Le}:${pe}`)}else ve.removeAttribute(pe)}addClass(ve,pe){ve.classList.add(pe)}removeClass(ve,pe){ve.classList.remove(pe)}setStyle(ve,pe,Le,nt){nt&(te.JOm.DashCase|te.JOm.Important)?ve.style.setProperty(pe,Le,nt&te.JOm.Important?"important":""):ve.style[pe]=Le}removeStyle(ve,pe,Le){Le&te.JOm.DashCase?ve.style.removeProperty(pe):ve.style[pe]=""}setProperty(ve,pe,Le){ve[pe]=Le}setValue(ve,pe){ve.nodeValue=pe}listen(ve,pe,Le){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,pe,Lt(Le)):this.eventManager.addEventListener(ve,pe,Lt(Le))}}function bn(me){return"TEMPLATE"===me.tagName&&void 0!==me.content}class Be extends ai{constructor(ve,pe,Le,nt){super(ve),this.sharedStylesHost=pe,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const St=Ut(nt.id,nt.styles);for(const mn of St){const Dn=document.createElement("style");Dn.textContent=mn,this.shadowRoot.appendChild(Dn)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}appendChild(ve,pe){return super.appendChild(this.nodeOrShadowRoot(ve),pe)}insertBefore(ve,pe,Le){return super.insertBefore(this.nodeOrShadowRoot(ve),pe,Le)}removeChild(ve,pe){return super.removeChild(this.nodeOrShadowRoot(ve),pe)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class je extends ai{constructor(ve,pe,Le,nt,St=Le.id){super(ve),this.sharedStylesHost=pe,this.removeStylesOnCompDestory=nt,this.rendererUsageCount=0,this.styles=Ut(St,Le.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ye extends je{constructor(ve,pe,Le,nt,St){const mn=nt+"-"+Le.id;super(ve,pe,Le,St,mn),this.contentAttr=function Bt(me){return"_ngcontent-%COMP%".replace(_t,me)}(mn),this.hostAttr=function fn(me){return"_nghost-%COMP%".replace(_t,me)}(mn)}applyToHost(ve){this.applyStyles(),this.setAttribute(ve,this.hostAttr,"")}createElement(ve,pe){const Le=super.createElement(ve,pe);return super.setAttribute(Le,this.contentAttr,""),Le}}let ke=(()=>{class me extends jt{constructor(pe){super(pe)}supports(pe){return!0}addEventListener(pe,Le,nt){return pe.addEventListener(Le,nt,!1),()=>this.removeEventListener(pe,Le,nt)}removeEventListener(pe,Le,nt){return pe.removeEventListener(Le,nt)}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(v.K0))},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();const dt=["alt","control","meta","shift"],Tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$t={alt:me=>me.altKey,control:me=>me.ctrlKey,meta:me=>me.metaKey,shift:me=>me.shiftKey};let Zt=(()=>{class me extends jt{constructor(pe){super(pe)}supports(pe){return null!=me.parseEventName(pe)}addEventListener(pe,Le,nt){const St=me.parseEventName(Le),mn=me.eventCallback(St.fullKey,nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,v.q)().onAndCancel(pe,St.domEventName,mn))}static parseEventName(pe){const Le=pe.toLowerCase().split("."),nt=Le.shift();if(0===Le.length||"keydown"!==nt&&"keyup"!==nt)return null;const St=me._normalizeKey(Le.pop());let mn="",Dn=Le.indexOf("code");if(Dn>-1&&(Le.splice(Dn,1),mn="code."),dt.forEach(Li=>{const ht=Le.indexOf(Li);ht>-1&&(Le.splice(ht,1),mn+=Li+".")}),mn+=St,0!=Le.length||0===St.length)return null;const xr={};return xr.domEventName=nt,xr.fullKey=mn,xr}static matchEventFullKeyCode(pe,Le){let nt=Tt[pe.key]||pe.key,St="";return Le.indexOf("code.")>-1&&(nt=pe.code,St="code."),!(null==nt||!nt)&&(nt=nt.toLowerCase()," "===nt?nt="space":"."===nt&&(nt="dot"),dt.forEach(mn=>{mn!==nt&&(0,$t[mn])(pe)&&(St+=mn+".")}),St+=nt,St===Le)}static eventCallback(pe,Le,nt){return St=>{me.matchEventFullKeyCode(St,pe)&&nt.runGuarded(()=>Le(St))}}static _normalizeKey(pe){return"esc"===pe?"escape":pe}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(v.K0))},me.\u0275prov=te.Yz7({token:me,factory:me.\u0275fac}),me})();const br=(0,te.eFA)(te._c5,"browser",[{provide:te.Lbi,useValue:v.bD},{provide:te.g9A,useValue:function Sr(){Pe.makeCurrent()},multi:!0},{provide:v.K0,useFactory:function Ar(){return(0,te.RDi)(document),document},deps:[]}]),Wn=new te.OlP(""),Yt=[{provide:te.rWj,useClass:class Ne{addToWindow(ve){te.dqk.getAngularTestability=(Le,nt=!0)=>{const St=ve.findTestabilityInTree(Le,nt);if(null==St)throw new Error("Could not find testability for element.");return St},te.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),te.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),te.dqk.frameworkStabilizers||(te.dqk.frameworkStabilizers=[]),te.dqk.frameworkStabilizers.push(Le=>{const nt=te.dqk.getAllAngularTestabilities();let St=nt.length,mn=!1;const Dn=function(xr){mn=mn||xr,St--,0==St&&Le(mn)};nt.forEach(function(xr){xr.whenStable(Dn)})})}findTestabilityInTree(ve,pe,Le){return null==pe?null:ve.getTestability(pe)??(Le?(0,v.q)().isShadowRoot(pe)?this.findTestabilityInTree(ve,pe.host,!0):this.findTestabilityInTree(ve,pe.parentElement,!0):null)}},deps:[]},{provide:te.lri,useClass:te.dDg,deps:[te.R0b,te.eoX,te.rWj]},{provide:te.dDg,useClass:te.dDg,deps:[te.R0b,te.eoX,te.rWj]}],In=[{provide:te.zSh,useValue:"root"},{provide:te.qLn,useFactory:function Gt(){return new te.qLn},deps:[]},{provide:gt,useClass:ke,multi:!0,deps:[v.K0,te.R0b,te.Lbi]},{provide:gt,useClass:Zt,multi:!0,deps:[v.K0]},{provide:Vt,useClass:Vt,deps:[Pt,mt,te.AFp,q]},{provide:te.FYo,useExisting:Vt},{provide:ot,useExisting:mt},{provide:mt,useClass:mt,deps:[v.K0]},{provide:Pt,useClass:Pt,deps:[gt,te.R0b]},{provide:v.JF,useClass:at,deps:[]},[]];let gi=(()=>{class me{constructor(pe){}static withServerTransition(pe){return{ngModule:me,providers:[{provide:te.AFp,useValue:pe.appId},{provide:qe,useExisting:te.AFp},ge]}}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(Wn,12))},me.\u0275mod=te.oAB({type:me}),me.\u0275inj=te.cJS({providers:[...In,...Yt],imports:[v.ez,te.hGG]}),me})(),xn=(()=>{class me{constructor(pe){this._doc=pe}getTitle(){return this._doc.title}setTitle(pe){this._doc.title=pe||""}}return me.\u0275fac=function(pe){return new(pe||me)(te.LFG(v.K0))},me.\u0275prov=te.Yz7({token:me,factory:function(pe){let Le=null;return Le=pe?new pe:function Ln(){return new xn((0,te.LFG)(v.K0))}(),Le},providedIn:"root"}),me})();typeof window<"u"&&window},9051:(rn,tt,G)=>{G.d(tt,{F0:()=>ro,rH:()=>Xt,Od:()=>ta,Bz:()=>Ls,lC:()=>di});var v=G(4650),te=G(8996),j=G(9646),Pe=G(7579);class Ce extends Pe.x{constructor(h){super(),this._value=h}get value(){return this.getValue()}_subscribe(h){const f=super._subscribe(h);return!f.closed&&h.next(this._value),f}getValue(){const{hasError:h,thrownError:f,_value:I}=this;if(h)throw f;return this._throwIfClosed(),I}next(h){super.next(this._value=h)}}var Fe=G(6805),$e=G(9751),ye=G(4742),qe=G(4671),ce=G(3268),ge=G(7669),Ne=G(1810),at=G(5403),gt=G(9672);function Pt(...u){const h=(0,ge.yG)(u),f=(0,ge.jO)(u),{args:I,keys:S}=(0,ye.D)(u);if(0===I.length)return(0,te.D)([],h);const F=new $e.y(function jt(u,h,f=qe.y){return I=>{ot(h,()=>{const{length:S}=u,F=new Array(S);let $=S,le=S;for(let De=0;De<S;De++)ot(h,()=>{const Je=(0,te.D)(u[De],h);let ft=!1;Je.subscribe((0,at.x)(I,ln=>{F[De]=ln,ft||(ft=!0,le--),le||I.next(f(F.slice()))},()=>{--$||I.complete()}))},I)},I)}}(I,h,S?$=>(0,Ne.n)(S,$):qe.y));return f?F.pipe((0,ce.Z)(f)):F}function ot(u,h,f){u?(0,gt.f)(f,u,h):h()}var mt=G(7272),Et=G(8421);function _t(u){return new $e.y(h=>{(0,Et.Xf)(u()).subscribe(h)})}var Ze=G(9635),Oe=G(576);function rt(u,h){const f=(0,Oe.m)(u)?u:()=>u,I=S=>S.error(f());return new $e.y(h?S=>h.schedule(I,0,S):I)}var Dt=G(515),lt=G(727),q=G(4482);function Bt(){return(0,q.e)((u,h)=>{let f=null;u._refCount++;const I=(0,at.x)(h,void 0,void 0,void 0,()=>{if(!u||u._refCount<=0||0<--u._refCount)return void(f=null);const S=u._connection,F=f;f=null,S&&(!F||S===F)&&S.unsubscribe(),h.unsubscribe()});u.subscribe(I),I.closed||(f=u.connect())})}class fn extends $e.y{constructor(h,f){super(),this.source=h,this.subjectFactory=f,this._subject=null,this._refCount=0,this._connection=null,(0,q.A)(h)&&(this.lift=h.lift)}_subscribe(h){return this.getSubject().subscribe(h)}getSubject(){const h=this._subject;return(!h||h.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:h}=this;this._subject=this._connection=null,h?.unsubscribe()}connect(){let h=this._connection;if(!h){h=this._connection=new lt.w0;const f=this.getSubject();h.add(this.source.subscribe((0,at.x)(f,void 0,()=>{this._teardown(),f.complete()},I=>{this._teardown(),f.error(I)},()=>this._teardown()))),h.closed&&(this._connection=null,h=lt.w0.EMPTY)}return h}refCount(){return Bt()(this)}}var Ut=G(6895),Lt=G(4004),Vt=G(3900),ai=G(5698),Er=G(8675),Sn=G(9300),bn=G(5577),Be=G(590);function je(u,h){return(0,Oe.m)(h)?(0,bn.z)(u,h,1):(0,bn.z)(u,1)}var Ye=G(8505);function ke(u){return(0,q.e)((h,f)=>{let F,I=null,S=!1;I=h.subscribe((0,at.x)(f,void 0,void 0,$=>{F=(0,Et.Xf)(u($,ke(u)(h))),I?(I.unsubscribe(),I=null,F.subscribe(f)):S=!0})),S&&(I.unsubscribe(),I=null,F.subscribe(f))})}var dt=G(2940);function Tt(u){return u<=0?()=>Dt.E:(0,q.e)((h,f)=>{let I=[];h.subscribe((0,at.x)(f,S=>{I.push(S),u<I.length&&I.shift()},()=>{for(const S of I)f.next(S);f.complete()},void 0,()=>{I=null}))})}var $t=G(8068),Zt=G(6590);function cn(u,h){const f=arguments.length>=2;return I=>I.pipe(u?(0,Sn.h)((S,F)=>u(S,F,I)):qe.y,Tt(1),f?(0,Zt.d)(h):(0,$t.T)(()=>new Fe.K))}function nr(u){return(0,q.e)((h,f)=>{try{h.subscribe(f)}finally{f.add(u)}})}var Fn=G(8189),Sr=G(1481);const Gt="primary",Ar=Symbol("RouteTitle");class fr{constructor(h){this.params=h||{}}has(h){return Object.prototype.hasOwnProperty.call(this.params,h)}get(h){if(this.has(h)){const f=this.params[h];return Array.isArray(f)?f[0]:f}return null}getAll(h){if(this.has(h)){const f=this.params[h];return Array.isArray(f)?f:[f]}return[]}get keys(){return Object.keys(this.params)}}function br(u){return new fr(u)}function Wn(u,h,f){const I=f.path.split("/");if(I.length>u.length||"full"===f.pathMatch&&(h.hasChildren()||I.length<u.length))return null;const S={};for(let F=0;F<I.length;F++){const $=I[F],le=u[F];if($.startsWith(":"))S[$.substring(1)]=le;else if($!==le.path)return null}return{consumed:u.slice(0,I.length),posParams:S}}function In(u,h){const f=u?Object.keys(u):void 0,I=h?Object.keys(h):void 0;if(!f||!I||f.length!=I.length)return!1;let S;for(let F=0;F<f.length;F++)if(S=f[F],!gi(u[S],h[S]))return!1;return!0}function gi(u,h){if(Array.isArray(u)&&Array.isArray(h)){if(u.length!==h.length)return!1;const f=[...u].sort(),I=[...h].sort();return f.every((S,F)=>I[F]===S)}return u===h}function qr(u){return Array.prototype.concat.apply([],u)}function Qn(u){return u.length>0?u[u.length-1]:null}function Ln(u,h){for(const f in u)u.hasOwnProperty(f)&&h(u[f],f)}function xn(u){return(0,v.CqO)(u)?u:(0,v.QGY)(u)?(0,te.D)(Promise.resolve(u)):(0,j.of)(u)}const sn=!1,Rn={exact:function ui(u,h,f){if(!Vr(u.segments,h.segments)||!Nr(u.segments,h.segments,f)||u.numberOfChildren!==h.numberOfChildren)return!1;for(const I in h.children)if(!u.children[I]||!ui(u.children[I],h.children[I],f))return!1;return!0},subset:ci},li={exact:function Br(u,h){return In(u,h)},subset:function Lr(u,h){return Object.keys(h).length<=Object.keys(u).length&&Object.keys(h).every(f=>gi(u[f],h[f]))},ignored:()=>!0};function wi(u,h,f){return Rn[f.paths](u.root,h.root,f.matrixParams)&&li[f.queryParams](u.queryParams,h.queryParams)&&!("exact"===f.fragment&&u.fragment!==h.fragment)}function ci(u,h,f){return Xn(u,h,h.segments,f)}function Xn(u,h,f,I){if(u.segments.length>f.length){const S=u.segments.slice(0,f.length);return!(!Vr(S,f)||h.hasChildren()||!Nr(S,f,I))}if(u.segments.length===f.length){if(!Vr(u.segments,f)||!Nr(u.segments,f,I))return!1;for(const S in h.children)if(!u.children[S]||!ci(u.children[S],h.children[S],I))return!1;return!0}{const S=f.slice(0,u.segments.length),F=f.slice(u.segments.length);return!!(Vr(u.segments,S)&&Nr(u.segments,S,I)&&u.children[Gt])&&Xn(u.children[Gt],h,F,I)}}function Nr(u,h,f){return h.every((I,S)=>li[f](u[S].parameters,I.parameters))}class Cn{constructor(h=new Qt([],{}),f={},I=null){this.root=h,this.queryParams=f,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=br(this.queryParams)),this._queryParamMap}toString(){return Ni.serialize(this)}}class Qt{constructor(h,f){this.segments=h,this.children=f,this.parent=null,Ln(f,(I,S)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yi(this)}}class qt{constructor(h,f){this.path=h,this.parameters=f}get parameterMap(){return this._parameterMap||(this._parameterMap=br(this.parameters)),this._parameterMap}toString(){return ve(this)}}function Vr(u,h){return u.length===h.length&&u.every((f,I)=>f.path===h[I].path)}let mi=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:function(){return new qi},providedIn:"root"}),u})();class qi{parse(h){const f=new ht(h);return new Cn(f.parseRootSegment(),f.parseQueryParams(),f.parseFragment())}serialize(h){const f=`/${be(h.root,!0)}`,I=function Le(u){const h=Object.keys(u).map(f=>{const I=u[f];return Array.isArray(I)?I.map(S=>`${oe(f)}=${oe(S)}`).join("&"):`${oe(f)}=${oe(I)}`}).filter(f=>!!f);return h.length?`?${h.join("&")}`:""}(h.queryParams);return`${f}${I}${"string"==typeof h.fragment?`#${function he(u){return encodeURI(u)}(h.fragment)}`:""}`}}const Ni=new qi;function yi(u){return u.segments.map(h=>ve(h)).join("/")}function be(u,h){if(!u.hasChildren())return yi(u);if(h){const f=u.children[Gt]?be(u.children[Gt],!1):"",I=[];return Ln(u.children,(S,F)=>{F!==Gt&&I.push(`${F}:${be(S,!1)}`)}),I.length>0?`${f}(${I.join("//")})`:f}{const f=function Pi(u,h){let f=[];return Ln(u.children,(I,S)=>{S===Gt&&(f=f.concat(h(I,S)))}),Ln(u.children,(I,S)=>{S!==Gt&&(f=f.concat(h(I,S)))}),f}(u,(I,S)=>S===Gt?[be(u.children[Gt],!1)]:[`${S}:${be(I,!1)}`]);return 1===Object.keys(u.children).length&&null!=u.children[Gt]?`${yi(u)}/${f[0]}`:`${yi(u)}/(${f.join("//")})`}}function we(u){return encodeURIComponent(u).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oe(u){return we(u).replace(/%3B/gi,";")}function ne(u){return we(u).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Se(u){return decodeURIComponent(u)}function me(u){return Se(u.replace(/\+/g,"%20"))}function ve(u){return`${ne(u.path)}${function pe(u){return Object.keys(u).map(h=>`;${ne(h)}=${ne(u[h])}`).join("")}(u.parameters)}`}const nt=/^[^\/()?;=#]+/;function St(u){const h=u.match(nt);return h?h[0]:""}const mn=/^[^=?&#]+/,xr=/^[^&#]+/;class ht{constructor(h){this.url=h,this.remaining=h}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const h={};if(this.consumeOptional("?"))do{this.parseQueryParam(h)}while(this.consumeOptional("&"));return h}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const h=[];for(this.peekStartsWith("(")||h.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),h.push(this.parseSegment());let f={};this.peekStartsWith("/(")&&(this.capture("/"),f=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(h.length>0||Object.keys(f).length>0)&&(I[Gt]=new Qt(h,f)),I}parseSegment(){const h=St(this.remaining);if(""===h&&this.peekStartsWith(";"))throw new v.vHH(4009,sn);return this.capture(h),new qt(Se(h),this.parseMatrixParams())}parseMatrixParams(){const h={};for(;this.consumeOptional(";");)this.parseParam(h);return h}parseParam(h){const f=St(this.remaining);if(!f)return;this.capture(f);let I="";if(this.consumeOptional("=")){const S=St(this.remaining);S&&(I=S,this.capture(I))}h[Se(f)]=Se(I)}parseQueryParam(h){const f=function Dn(u){const h=u.match(mn);return h?h[0]:""}(this.remaining);if(!f)return;this.capture(f);let I="";if(this.consumeOptional("=")){const $=function Li(u){const h=u.match(xr);return h?h[0]:""}(this.remaining);$&&(I=$,this.capture(I))}const S=me(f),F=me(I);if(h.hasOwnProperty(S)){let $=h[S];Array.isArray($)||($=[$],h[S]=$),$.push(F)}else h[S]=F}parseParens(h){const f={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=St(this.remaining),S=this.remaining[I.length];if("/"!==S&&")"!==S&&";"!==S)throw new v.vHH(4010,sn);let F;I.indexOf(":")>-1?(F=I.slice(0,I.indexOf(":")),this.capture(F),this.capture(":")):h&&(F=Gt);const $=this.parseChildren();f[F]=1===Object.keys($).length?$[Gt]:new Qt([],$),this.consumeOptional("//")}return f}peekStartsWith(h){return this.remaining.startsWith(h)}consumeOptional(h){return!!this.peekStartsWith(h)&&(this.remaining=this.remaining.substring(h.length),!0)}capture(h){if(!this.consumeOptional(h))throw new v.vHH(4011,sn)}}function Qe(u){return u.segments.length>0?new Qt([],{[Gt]:u}):u}function xt(u){const h={};for(const I of Object.keys(u.children)){const F=xt(u.children[I]);(F.segments.length>0||F.hasChildren())&&(h[I]=F)}return function pn(u){if(1===u.numberOfChildren&&u.children[Gt]){const h=u.children[Gt];return new Qt(u.segments.concat(h.segments),h.children)}return u}(new Qt(u.segments,h))}function Pn(u){return u instanceof Cn}const ir=!1;function Zi(u,h,f,I,S){if(0===f.length)return gr(h.root,h.root,h.root,I,S);const F=function Kt(u){if("string"==typeof u[0]&&1===u.length&&"/"===u[0])return new Vi(!0,0,u);let h=0,f=!1;const I=u.reduce((S,F,$)=>{if("object"==typeof F&&null!=F){if(F.outlets){const le={};return Ln(F.outlets,(De,Je)=>{le[Je]="string"==typeof De?De.split("/"):De}),[...S,{outlets:le}]}if(F.segmentPath)return[...S,F.segmentPath]}return"string"!=typeof F?[...S,F]:0===$?(F.split("/").forEach((le,De)=>{0==De&&"."===le||(0==De&&""===le?f=!0:".."===le?h++:""!=le&&S.push(le))}),S):[...S,F]},[]);return new Vi(f,h,I)}(f);return F.toRoot()?gr(h.root,h.root,new Qt([],{}),I,S):function $(De){const Je=function $r(u,h,f,I){if(u.isAbsolute)return new jn(h.root,!0,0);if(-1===I)return new jn(f,f===h.root,0);return function $i(u,h,f){let I=u,S=h,F=f;for(;F>S;){if(F-=S,I=I.parent,!I)throw new v.vHH(4005,ir&&"Invalid number of '../'");S=I.segments.length}return new jn(I,!1,S-F)}(f,I+(_i(u.commands[0])?0:1),u.numberOfDoubleDots)}(F,h,u.snapshot?._urlSegment,De),ft=Je.processChildren?Yr(Je.segmentGroup,Je.index,F.commands):Hs(Je.segmentGroup,Je.index,F.commands);return gr(h.root,Je.segmentGroup,ft,I,S)}(u.snapshot?._lastPathIndex)}function _i(u){return"object"==typeof u&&null!=u&&!u.outlets&&!u.segmentPath}function Js(u){return"object"==typeof u&&null!=u&&u.outlets}function gr(u,h,f,I,S){let $,F={};I&&Ln(I,(De,Je)=>{F[Je]=Array.isArray(De)?De.map(ft=>`${ft}`):`${De}`}),$=u===h?f:Rs(u,h,f);const le=Qe(xt($));return new Cn(le,F,S)}function Rs(u,h,f){const I={};return Ln(u.children,(S,F)=>{I[F]=S===h?f:Rs(S,h,f)}),new Qt(u.segments,I)}class Vi{constructor(h,f,I){if(this.isAbsolute=h,this.numberOfDoubleDots=f,this.commands=I,h&&I.length>0&&_i(I[0]))throw new v.vHH(4003,ir&&"Root segment cannot have matrix parameters");const S=I.find(Js);if(S&&S!==Qn(I))throw new v.vHH(4004,ir&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jn{constructor(h,f,I){this.segmentGroup=h,this.processChildren=f,this.index=I}}function Hs(u,h,f){if(u||(u=new Qt([],{})),0===u.segments.length&&u.hasChildren())return Yr(u,h,f);const I=function Ge(u,h,f){let I=0,S=h;const F={match:!1,pathIndex:0,commandIndex:0};for(;S<u.segments.length;){if(I>=f.length)return F;const $=u.segments[S],le=f[I];if(Js(le))break;const De=`${le}`,Je=I<f.length-1?f[I+1]:null;if(S>0&&void 0===De)break;if(De&&Je&&"object"==typeof Je&&void 0===Je.outlets){if(!kt(De,Je,$))return F;I+=2}else{if(!kt(De,{},$))return F;I++}S++}return{match:!0,pathIndex:S,commandIndex:I}}(u,h,f),S=f.slice(I.commandIndex);if(I.match&&I.pathIndex<u.segments.length){const F=new Qt(u.segments.slice(0,I.pathIndex),{});return F.children[Gt]=new Qt(u.segments.slice(I.pathIndex),u.children),Yr(F,0,S)}return I.match&&0===S.length?new Qt(u.segments,{}):I.match&&!u.hasChildren()?Ue(u,h,f):I.match?Yr(u,0,S):Ue(u,h,f)}function Yr(u,h,f){if(0===f.length)return new Qt(u.segments,{});{const I=function ji(u){return Js(u[0])?u[0].outlets:{[Gt]:u}}(f),S={};if(!I[Gt]&&u.children[Gt]&&1===u.numberOfChildren&&0===u.children[Gt].segments.length){const F=Yr(u.children[Gt],h,f);return new Qt(u.segments,F.children)}return Ln(I,(F,$)=>{"string"==typeof F&&(F=[F]),null!==F&&(S[$]=Hs(u.children[$],h,F))}),Ln(u.children,(F,$)=>{void 0===I[$]&&(S[$]=F)}),new Qt(u.segments,S)}}function Ue(u,h,f){const I=u.segments.slice(0,h);let S=0;for(;S<f.length;){const F=f[S];if(Js(F)){const De=Ve(F.outlets);return new Qt(I,De)}if(0===S&&_i(f[0])){I.push(new qt(u.segments[h].path,wt(f[0]))),S++;continue}const $=Js(F)?F.outlets[Gt]:`${F}`,le=S<f.length-1?f[S+1]:null;$&&le&&_i(le)?(I.push(new qt($,wt(le))),S+=2):(I.push(new qt($,{})),S++)}return new Qt(I,{})}function Ve(u){const h={};return Ln(u,(f,I)=>{"string"==typeof f&&(f=[f]),null!==f&&(h[I]=Ue(new Qt([],{}),0,f))}),h}function wt(u){const h={};return Ln(u,(f,I)=>h[I]=`${f}`),h}function kt(u,h,f){return u==f.path&&In(h,f.parameters)}const Mn="imperative";class Bn{constructor(h,f){this.id=h,this.url=f}}class Tn extends Bn{constructor(h,f,I="imperative",S=null){super(h,f),this.type=0,this.navigationTrigger=I,this.restoredState=S}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mr extends Bn{constructor(h,f,I){super(h,f),this.urlAfterRedirects=I,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ns extends Bn{constructor(h,f,I,S){super(h,f),this.reason=I,this.code=S,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xi extends Bn{constructor(h,f,I,S){super(h,f),this.reason=I,this.code=S,this.type=16}}class Yi extends Bn{constructor(h,f,I,S){super(h,f),this.error=I,this.target=S,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qr extends Bn{constructor(h,f,I,S){super(h,f),this.urlAfterRedirects=I,this.state=S,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends Bn{constructor(h,f,I,S){super(h,f),this.urlAfterRedirects=I,this.state=S,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ms extends Bn{constructor(h,f,I,S,F){super(h,f),this.urlAfterRedirects=I,this.state=S,this.shouldActivate=F,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ho extends Bn{constructor(h,f,I,S){super(h,f),this.urlAfterRedirects=I,this.state=S,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends Bn{constructor(h,f,I,S){super(h,f),this.urlAfterRedirects=I,this.state=S,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr{constructor(h){this.route=h,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cr{constructor(h){this.route=h,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cs{constructor(h){this.snapshot=h,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(h){this.snapshot=h,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fo{constructor(h){this.snapshot=h,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Is{constructor(h){this.snapshot=h,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hi{constructor(h,f,I){this.routerEvent=h,this.position=f,this.anchor=I,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let sr=(()=>{class u{createUrlTree(f,I,S,F,$,le){return Zi(f||I.root,S,F,$,le)}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac}),u})(),Xr=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:function(h){return sr.\u0275fac(h)},providedIn:"root"}),u})();class Bs{constructor(h){this._root=h}get root(){return this._root.value}parent(h){const f=this.pathFromRoot(h);return f.length>1?f[f.length-2]:null}children(h){const f=os(h,this._root);return f?f.children.map(I=>I.value):[]}firstChild(h){const f=os(h,this._root);return f&&f.children.length>0?f.children[0].value:null}siblings(h){const f=ys(h,this._root);return f.length<2?[]:f[f.length-2].children.map(S=>S.value).filter(S=>S!==h)}pathFromRoot(h){return ys(h,this._root).map(f=>f.value)}}function os(u,h){if(u===h.value)return h;for(const f of h.children){const I=os(u,f);if(I)return I}return null}function ys(u,h){if(u===h.value)return[h];for(const f of h.children){const I=ys(u,f);if(I.length)return I.unshift(h),I}return[]}class fo{constructor(h,f){this.value=h,this.children=f}toString(){return`TreeNode(${this.value})`}}function ao(u){const h={};return u&&u.children.forEach(f=>h[f.value.outlet]=f),h}class po extends Bs{constructor(h,f){super(h),this.snapshot=f,Ro(this,h)}toString(){return this.snapshot.toString()}}function zs(u,h){const f=function Lo(u,h){const $=new Ao([],{},{},"",{},Gt,h,null,u.root,-1,{});return new xs("",new fo($,[]))}(u,h),I=new Ce([new qt("",{})]),S=new Ce({}),F=new Ce({}),$=new Ce({}),le=new Ce(""),De=new Gs(I,S,$,le,F,Gt,h,f.root);return De.snapshot=f.root,new po(new fo(De,[]),f)}class Gs{constructor(h,f,I,S,F,$,le,De){this.url=h,this.params=f,this.queryParams=I,this.fragment=S,this.data=F,this.outlet=$,this.component=le,this.title=this.data?.pipe((0,Lt.U)(Je=>Je[Ar]))??(0,j.of)(void 0),this._futureSnapshot=De}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(h=>br(h)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(h=>br(h)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eo(u,h="emptyOnly"){const f=u.pathFromRoot;let I=0;if("always"!==h)for(I=f.length-1;I>=1;){const S=f[I],F=f[I-1];if(S.routeConfig&&""===S.routeConfig.path)I--;else{if(F.component)break;I--}}return function as(u){return u.reduce((h,f)=>({params:{...h.params,...f.params},data:{...h.data,...f.data},resolve:{...f.data,...h.resolve,...f.routeConfig?.data,...f._resolvedData}}),{params:{},data:{},resolve:{}})}(f.slice(I))}class Ao{get title(){return this.data?.[Ar]}constructor(h,f,I,S,F,$,le,De,Je,ft,ln){this.url=h,this.params=f,this.queryParams=I,this.fragment=S,this.data=F,this.outlet=$,this.component=le,this.routeConfig=De,this._urlSegment=Je,this._lastPathIndex=ft,this._resolve=ln}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=br(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=br(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xs extends Bs{constructor(h,f){super(f),this.url=h,Ro(this,f)}toString(){return $s(this._root)}}function Ro(u,h){h.value._routerState=u,h.children.forEach(f=>Ro(u,f))}function $s(u){const h=u.children.length>0?` { ${u.children.map($s).join(", ")} } `:"";return`${u.value}${h}`}function Ms(u){if(u.snapshot){const h=u.snapshot,f=u._futureSnapshot;u.snapshot=f,In(h.queryParams,f.queryParams)||u.queryParams.next(f.queryParams),h.fragment!==f.fragment&&u.fragment.next(f.fragment),In(h.params,f.params)||u.params.next(f.params),function Yt(u,h){if(u.length!==h.length)return!1;for(let f=0;f<u.length;++f)if(!In(u[f],h[f]))return!1;return!0}(h.url,f.url)||u.url.next(f.url),In(h.data,f.data)||u.data.next(f.data)}else u.snapshot=u._futureSnapshot,u.data.next(u._futureSnapshot.data)}function Z(u,h){const f=In(u.params,h.params)&&function ri(u,h){return Vr(u,h)&&u.every((f,I)=>In(f.parameters,h[I].parameters))}(u.url,h.url);return f&&!(!u.parent!=!h.parent)&&(!u.parent||Z(u.parent,h.parent))}function Ee(u,h,f){if(f&&u.shouldReuseRoute(h.value,f.value.snapshot)){const I=f.value;I._futureSnapshot=h.value;const S=function Me(u,h,f){return h.children.map(I=>{for(const S of f.children)if(u.shouldReuseRoute(I.value,S.value.snapshot))return Ee(u,I,S);return Ee(u,I)})}(u,h,f);return new fo(I,S)}{if(u.shouldAttach(h.value)){const F=u.retrieve(h.value);if(null!==F){const $=F.route;return $.value._futureSnapshot=h.value,$.children=h.children.map(le=>Ee(u,le)),$}}const I=function He(u){return new Gs(new Ce(u.url),new Ce(u.params),new Ce(u.queryParams),new Ce(u.fragment),new Ce(u.data),u.outlet,u.component,u)}(h.value),S=h.children.map(F=>Ee(u,F));return new fo(I,S)}}const pt="ngNavigationCancelingError";function Ot(u,h){const{redirectTo:f,navigationBehaviorOptions:I}=Pn(h)?{redirectTo:h,navigationBehaviorOptions:void 0}:h,S=vn(!1,0,h);return S.url=f,S.navigationBehaviorOptions=I,S}function vn(u,h,f){const I=new Error("NavigationCancelingError: "+(u||""));return I[pt]=!0,I.cancellationCode=h,f&&(I.url=f),I}function tn(u){return er(u)&&Pn(u.url)}function er(u){return u&&u[pt]}class _r{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Hr,this.attachRef=null}}let Hr=(()=>{class u{constructor(){this.contexts=new Map}onChildOutletCreated(f,I){const S=this.getOrCreateContext(f);S.outlet=I,this.contexts.set(f,S)}onChildOutletDestroyed(f){const I=this.getContext(f);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const f=this.contexts;return this.contexts=new Map,f}onOutletReAttached(f){this.contexts=f}getOrCreateContext(f){let I=this.getContext(f);return I||(I=new _r,this.contexts.set(f,I)),I}getContext(f){return this.contexts.get(f)||null}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const Ti=!1;let di=(()=>{class u{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.parentContexts=(0,v.f3M)(Hr),this.location=(0,v.f3M)(v.s_b),this.changeDetector=(0,v.f3M)(v.sBO),this.environmentInjector=(0,v.f3M)(v.lqb)}ngOnChanges(f){if(f.name){const{firstChange:I,previousValue:S}=f.name;if(I)return;this.isTrackedInParentContexts(S)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(S)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(f){return this.parentContexts.getContext(f)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const f=this.parentContexts.getContext(this.name);f?.route&&(f.attachRef?this.attach(f.attachRef,f.route):this.activateWith(f.route,f.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,Ti);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,Ti);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,Ti);this.location.detach();const f=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(f.instance),f}attach(f,I){this.activated=f,this._activatedRoute=I,this.location.insert(f.hostView),this.attachEvents.emit(f.instance)}deactivate(){if(this.activated){const f=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(f)}}activateWith(f,I){if(this.isActivated)throw new v.vHH(4013,Ti);this._activatedRoute=f;const S=this.location,$=f.snapshot.component,le=this.parentContexts.getOrCreateContext(this.name).children,De=new Jr(f,le,S.injector);if(I&&function Rr(u){return!!u.resolveComponentFactory}(I)){const Je=I.resolveComponentFactory($);this.activated=S.createComponent(Je,S.length,De)}else this.activated=S.createComponent($,{index:S.length,injector:De,environmentInjector:I??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275dir=v.lG2({type:u,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[v.TTD]}),u})();class Jr{constructor(h,f,I){this.route=h,this.childContexts=f,this.parent=I}get(h,f){return h===Gs?this.route:h===Hr?this.childContexts:this.parent.get(h,f)}}let zr=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275cmp=v.Xpm({type:u,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(f,I){1&f&&v._UZ(0,"router-outlet")},dependencies:[di],encapsulation:2}),u})();function ds(u,h){return u.providers&&!u._injector&&(u._injector=(0,v.MMx)(u.providers,h,`Route: ${u.path}`)),u._injector??h}function Mo(u){const h=u.children&&u.children.map(Mo),f=h?{...u,children:h}:{...u};return!f.component&&!f.loadComponent&&(h||f.loadChildren)&&f.outlet&&f.outlet!==Gt&&(f.component=zr),f}function Oi(u){return u.outlet||Gt}function go(u,h){const f=u.filter(I=>Oi(I)===h);return f.push(...u.filter(I=>Oi(I)!==h)),f}function _s(u){if(!u)return null;if(u.routeConfig?._injector)return u.routeConfig._injector;for(let h=u.parent;h;h=h.parent){const f=h.routeConfig;if(f?._loadedInjector)return f._loadedInjector;if(f?._injector)return f._injector}return null}class vs{constructor(h,f,I,S){this.routeReuseStrategy=h,this.futureState=f,this.currState=I,this.forwardEvent=S}activate(h){const f=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(f,I,h),Ms(this.futureState.root),this.activateChildRoutes(f,I,h)}deactivateChildRoutes(h,f,I){const S=ao(f);h.children.forEach(F=>{const $=F.value.outlet;this.deactivateRoutes(F,S[$],I),delete S[$]}),Ln(S,(F,$)=>{this.deactivateRouteAndItsChildren(F,I)})}deactivateRoutes(h,f,I){const S=h.value,F=f?f.value:null;if(S===F)if(S.component){const $=I.getContext(S.outlet);$&&this.deactivateChildRoutes(h,f,$.children)}else this.deactivateChildRoutes(h,f,I);else F&&this.deactivateRouteAndItsChildren(f,I)}deactivateRouteAndItsChildren(h,f){h.value.component&&this.routeReuseStrategy.shouldDetach(h.value.snapshot)?this.detachAndStoreRouteSubtree(h,f):this.deactivateRouteAndOutlet(h,f)}detachAndStoreRouteSubtree(h,f){const I=f.getContext(h.value.outlet),S=I&&h.value.component?I.children:f,F=ao(h);for(const $ of Object.keys(F))this.deactivateRouteAndItsChildren(F[$],S);if(I&&I.outlet){const $=I.outlet.detach(),le=I.children.onOutletDeactivated();this.routeReuseStrategy.store(h.value.snapshot,{componentRef:$,route:h,contexts:le})}}deactivateRouteAndOutlet(h,f){const I=f.getContext(h.value.outlet),S=I&&h.value.component?I.children:f,F=ao(h);for(const $ of Object.keys(F))this.deactivateRouteAndItsChildren(F[$],S);I&&(I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated()),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(h,f,I){const S=ao(f);h.children.forEach(F=>{this.activateRoutes(F,S[F.value.outlet],I),this.forwardEvent(new Is(F.value.snapshot))}),h.children.length&&this.forwardEvent(new Jn(h.value.snapshot))}activateRoutes(h,f,I){const S=h.value,F=f?f.value:null;if(Ms(S),S===F)if(S.component){const $=I.getOrCreateContext(S.outlet);this.activateChildRoutes(h,f,$.children)}else this.activateChildRoutes(h,f,I);else if(S.component){const $=I.getOrCreateContext(S.outlet);if(this.routeReuseStrategy.shouldAttach(S.snapshot)){const le=this.routeReuseStrategy.retrieve(S.snapshot);this.routeReuseStrategy.store(S.snapshot,null),$.children.onOutletReAttached(le.contexts),$.attachRef=le.componentRef,$.route=le.route.value,$.outlet&&$.outlet.attach(le.componentRef,le.route.value),Ms(le.route.value),this.activateChildRoutes(h,null,$.children)}else{const le=_s(S.snapshot),De=le?.get(v._Vd)??null;$.attachRef=null,$.route=S,$.resolver=De,$.injector=le,$.outlet&&$.outlet.activateWith(S,$.injector),this.activateChildRoutes(h,null,$.children)}}else this.activateChildRoutes(h,null,I)}}class Kn{constructor(h){this.path=h,this.route=this.path[this.path.length-1]}}class aa{constructor(h,f){this.component=h,this.route=f}}function Ui(u,h,f){const I=u._root;return Po(I,h?h._root:null,f,[I.value])}function to(u,h){const f=Symbol(),I=h.get(u,f);return I===f?"function"!=typeof u||(0,v.Z0I)(u)?h.get(u):u:I}function Po(u,h,f,I,S={canDeactivateChecks:[],canActivateChecks:[]}){const F=ao(h);return u.children.forEach($=>{(function La(u,h,f,I,S={canDeactivateChecks:[],canActivateChecks:[]}){const F=u.value,$=h?h.value:null,le=f?f.getContext(u.value.outlet):null;if($&&F.routeConfig===$.routeConfig){const De=function No(u,h,f){if("function"==typeof f)return f(u,h);switch(f){case"pathParamsChange":return!Vr(u.url,h.url);case"pathParamsOrQueryParamsChange":return!Vr(u.url,h.url)||!In(u.queryParams,h.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Z(u,h)||!In(u.queryParams,h.queryParams);default:return!Z(u,h)}}($,F,F.routeConfig.runGuardsAndResolvers);De?S.canActivateChecks.push(new Kn(I)):(F.data=$.data,F._resolvedData=$._resolvedData),Po(u,h,F.component?le?le.children:null:f,I,S),De&&le&&le.outlet&&le.outlet.isActivated&&S.canDeactivateChecks.push(new aa(le.outlet.component,$))}else $&&Vo(h,le,S),S.canActivateChecks.push(new Kn(I)),Po(u,null,F.component?le?le.children:null:f,I,S)})($,F[$.value.outlet],f,I.concat([$.value]),S),delete F[$.value.outlet]}),Ln(F,($,le)=>Vo($,f.getContext(le),S)),S}function Vo(u,h,f){const I=ao(u),S=u.value;Ln(I,(F,$)=>{Vo(F,S.component?h?h.children.getContext($):null:h,f)}),f.canDeactivateChecks.push(new aa(S.component&&h&&h.outlet&&h.outlet.isActivated?h.outlet.component:null,S))}function x(u){return"function"==typeof u}function Ws(u){return u instanceof Fe.K||"EmptyError"===u?.name}const Uo=Symbol("INITIAL_VALUE");function Ds(){return(0,Vt.w)(u=>Pt(u.map(h=>h.pipe((0,ai.q)(1),(0,Er.O)(Uo)))).pipe((0,Lt.U)(h=>{for(const f of h)if(!0!==f){if(f===Uo)return Uo;if(!1===f||f instanceof Cn)return f}return!0}),(0,Sn.h)(h=>h!==Uo),(0,ai.q)(1)))}function Qo(u){return(0,Ze.z)((0,Ye.b)(h=>{if(Pn(h))throw Ot(0,h)}),(0,Lt.U)(h=>!0===h))}const Zs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ua(u,h,f,I,S){const F=hi(u,h,f);return F.matched?function Ts(u,h,f,I){const S=h.canMatch;if(!S||0===S.length)return(0,j.of)(!0);const F=S.map($=>{const le=to($,u);return xn(function Gr(u){return u&&x(u.canMatch)}(le)?le.canMatch(h,f):u.runInContext(()=>le(h,f)))});return(0,j.of)(F).pipe(Ds(),Qo())}(I=ds(h,I),h,f).pipe((0,Lt.U)($=>!0===$?F:{...Zs})):(0,j.of)(F)}function hi(u,h,f){if(""===h.path)return"full"===h.pathMatch&&(u.hasChildren()||f.length>0)?{...Zs}:{matched:!0,consumedSegments:[],remainingSegments:f,parameters:{},positionalParamSegments:{}};const S=(h.matcher||Wn)(f,u,h);if(!S)return{...Zs};const F={};Ln(S.posParams,(le,De)=>{F[De]=le.path});const $=S.consumed.length>0?{...F,...S.consumed[S.consumed.length-1].parameters}:F;return{matched:!0,consumedSegments:S.consumed,remainingSegments:f.slice(S.consumed.length),parameters:$,positionalParamSegments:S.posParams??{}}}function ca(u,h,f,I){if(f.length>0&&function Va(u,h,f){return f.some(I=>vo(u,h,I)&&Oi(I)!==Gt)}(u,f,I)){const F=new Qt(h,function Ji(u,h,f,I){const S={};S[Gt]=I,I._sourceSegment=u,I._segmentIndexShift=h.length;for(const F of f)if(""===F.path&&Oi(F)!==Gt){const $=new Qt([],{});$._sourceSegment=u,$._segmentIndexShift=h.length,S[Oi(F)]=$}return S}(u,h,I,new Qt(f,u.children)));return F._sourceSegment=u,F._segmentIndexShift=h.length,{segmentGroup:F,slicedSegments:[]}}if(0===f.length&&function da(u,h,f){return f.some(I=>vo(u,h,I))}(u,f,I)){const F=new Qt(u.segments,function Qa(u,h,f,I,S){const F={};for(const $ of I)if(vo(u,f,$)&&!S[Oi($)]){const le=new Qt([],{});le._sourceSegment=u,le._segmentIndexShift=h.length,F[Oi($)]=le}return{...S,...F}}(u,h,f,I,u.children));return F._sourceSegment=u,F._segmentIndexShift=h.length,{segmentGroup:F,slicedSegments:f}}const S=new Qt(u.segments,u.children);return S._sourceSegment=u,S._segmentIndexShift=h.length,{segmentGroup:S,slicedSegments:f}}function vo(u,h,f){return(!(u.hasChildren()||h.length>0)||"full"!==f.pathMatch)&&""===f.path}function Xo(u,h,f,I){return!!(Oi(u)===I||I!==Gt&&vo(h,f,u))&&("**"===u.path||hi(h,u,f).matched)}function Ea(u,h,f){return 0===h.length&&!u.children[f]}const Ss=!1;class hs{constructor(h){this.segmentGroup=h||null}}class Or{constructor(h){this.urlTree=h}}function js(u){return rt(new hs(u))}function ki(u){return rt(new Or(u))}class wa{constructor(h,f,I,S,F){this.injector=h,this.configLoader=f,this.urlSerializer=I,this.urlTree=S,this.config=F,this.allowRedirects=!0}apply(){const h=ca(this.urlTree.root,[],[],this.config).segmentGroup,f=new Qt(h.segments,h.children);return this.expandSegmentGroup(this.injector,this.config,f,Gt).pipe((0,Lt.U)(F=>this.createUrlTree(xt(F),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ke(F=>{if(F instanceof Or)return this.allowRedirects=!1,this.match(F.urlTree);throw F instanceof hs?this.noMatchError(F):F}))}match(h){return this.expandSegmentGroup(this.injector,this.config,h.root,Gt).pipe((0,Lt.U)(S=>this.createUrlTree(xt(S),h.queryParams,h.fragment))).pipe(ke(S=>{throw S instanceof hs?this.noMatchError(S):S}))}noMatchError(h){return new v.vHH(4002,Ss)}createUrlTree(h,f,I){const S=Qe(h);return new Cn(S,f,I)}expandSegmentGroup(h,f,I,S){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(h,f,I).pipe((0,Lt.U)(F=>new Qt([],F))):this.expandSegment(h,I,f,I.segments,S,!0)}expandChildren(h,f,I){const S=[];for(const F of Object.keys(I.children))"primary"===F?S.unshift(F):S.push(F);return(0,te.D)(S).pipe(je(F=>{const $=I.children[F],le=go(f,F);return this.expandSegmentGroup(h,le,$,F).pipe((0,Lt.U)(De=>({segment:De,outlet:F})))}),(0,dt.R)((F,$)=>(F[$.outlet]=$.segment,F),{}),cn())}expandSegment(h,f,I,S,F,$){return(0,te.D)(I).pipe(je(le=>this.expandSegmentAgainstRoute(h,f,I,le,S,F,$).pipe(ke(Je=>{if(Je instanceof hs)return(0,j.of)(null);throw Je}))),(0,Be.P)(le=>!!le),ke((le,De)=>{if(Ws(le))return Ea(f,S,F)?(0,j.of)(new Qt([],{})):js(f);throw le}))}expandSegmentAgainstRoute(h,f,I,S,F,$,le){return Xo(S,f,F,$)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(h,f,S,F,$):le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(h,f,I,S,F,$):js(f):js(f)}expandSegmentAgainstRouteUsingRedirect(h,f,I,S,F,$){return"**"===S.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(h,I,S,$):this.expandRegularSegmentAgainstRouteUsingRedirect(h,f,I,S,F,$)}expandWildCardWithParamsAgainstRouteUsingRedirect(h,f,I,S){const F=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?ki(F):this.lineralizeSegments(I,F).pipe((0,bn.z)($=>{const le=new Qt($,{});return this.expandSegment(h,le,f,$,S,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(h,f,I,S,F,$){const{matched:le,consumedSegments:De,remainingSegments:Je,positionalParamSegments:ft}=hi(f,S,F);if(!le)return js(f);const ln=this.applyRedirectCommands(De,S.redirectTo,ft);return S.redirectTo.startsWith("/")?ki(ln):this.lineralizeSegments(S,ln).pipe((0,bn.z)(An=>this.expandSegment(h,f,I,An.concat(Je),$,!1)))}matchSegmentAgainstRoute(h,f,I,S,F){return"**"===I.path?(h=ds(I,h),I.loadChildren?(I._loadedRoutes?(0,j.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):this.configLoader.loadChildren(h,I)).pipe((0,Lt.U)(le=>(I._loadedRoutes=le.routes,I._loadedInjector=le.injector,new Qt(S,{})))):(0,j.of)(new Qt(S,{}))):ua(f,I,S,h).pipe((0,Vt.w)(({matched:$,consumedSegments:le,remainingSegments:De})=>$?this.getChildConfig(h=I._injector??h,I,S).pipe((0,bn.z)(ft=>{const ln=ft.injector??h,An=ft.routes,{segmentGroup:Un,slicedSegments:qn}=ca(f,le,De,An),Pr=new Qt(Un.segments,Un.children);if(0===qn.length&&Pr.hasChildren())return this.expandChildren(ln,An,Pr).pipe((0,Lt.U)(Vs=>new Qt(le,Vs)));if(0===An.length&&0===qn.length)return(0,j.of)(new Qt(le,{}));const tr=Oi(I)===F;return this.expandSegment(ln,Pr,An,qn,tr?Gt:F,!0).pipe((0,Lt.U)(Xi=>new Qt(le.concat(Xi.segments),Xi.children)))})):js(f)))}getChildConfig(h,f,I){return f.children?(0,j.of)({routes:f.children,injector:h}):f.loadChildren?void 0!==f._loadedRoutes?(0,j.of)({routes:f._loadedRoutes,injector:f._loadedInjector}):function ul(u,h,f,I){const S=h.canLoad;if(void 0===S||0===S.length)return(0,j.of)(!0);const F=S.map($=>{const le=to($,u);return xn(function L(u){return u&&x(u.canLoad)}(le)?le.canLoad(h,f):u.runInContext(()=>le(h,f)))});return(0,j.of)(F).pipe(Ds(),Qo())}(h,f,I).pipe((0,bn.z)(S=>S?this.configLoader.loadChildren(h,f).pipe((0,Ye.b)(F=>{f._loadedRoutes=F.routes,f._loadedInjector=F.injector})):function $o(u){return rt(vn(Ss,3))}())):(0,j.of)({routes:[],injector:h})}lineralizeSegments(h,f){let I=[],S=f.root;for(;;){if(I=I.concat(S.segments),0===S.numberOfChildren)return(0,j.of)(I);if(S.numberOfChildren>1||!S.children[Gt])return h.redirectTo,rt(new v.vHH(4e3,Ss));S=S.children[Gt]}}applyRedirectCommands(h,f,I){return this.applyRedirectCreateUrlTree(f,this.urlSerializer.parse(f),h,I)}applyRedirectCreateUrlTree(h,f,I,S){const F=this.createSegmentGroup(h,f.root,I,S);return new Cn(F,this.createQueryParams(f.queryParams,this.urlTree.queryParams),f.fragment)}createQueryParams(h,f){const I={};return Ln(h,(S,F)=>{if("string"==typeof S&&S.startsWith(":")){const le=S.substring(1);I[F]=f[le]}else I[F]=S}),I}createSegmentGroup(h,f,I,S){const F=this.createSegments(h,f.segments,I,S);let $={};return Ln(f.children,(le,De)=>{$[De]=this.createSegmentGroup(h,le,I,S)}),new Qt(F,$)}createSegments(h,f,I,S){return f.map(F=>F.path.startsWith(":")?this.findPosParam(h,F,S):this.findOrReturn(F,I))}findPosParam(h,f,I){const S=I[f.path.substring(1)];if(!S)throw new v.vHH(4001,Ss);return S}findOrReturn(h,f){let I=0;for(const S of f){if(S.path===h.path)return f.splice(I),S;I++}return h}}class Jo{}class N{constructor(h,f,I,S,F,$,le){this.injector=h,this.rootComponentType=f,this.config=I,this.urlTree=S,this.url=F,this.paramsInheritanceStrategy=$,this.urlSerializer=le}recognize(){const h=ca(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,h,Gt).pipe((0,Lt.U)(f=>{if(null===f)return null;const I=new Ao([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),S=new fo(I,f),F=new xs(this.url,S);return this.inheritParamsAndData(F._root),F}))}inheritParamsAndData(h){const f=h.value,I=eo(f,this.paramsInheritanceStrategy);f.params=Object.freeze(I.params),f.data=Object.freeze(I.data),h.children.forEach(S=>this.inheritParamsAndData(S))}processSegmentGroup(h,f,I,S){return 0===I.segments.length&&I.hasChildren()?this.processChildren(h,f,I):this.processSegment(h,f,I,I.segments,S)}processChildren(h,f,I){return(0,te.D)(Object.keys(I.children)).pipe(je(S=>{const F=I.children[S],$=go(f,S);return this.processSegmentGroup(h,$,F,S)}),(0,dt.R)((S,F)=>S&&F?(S.push(...F),S):null),function yn(u,h=!1){return(0,q.e)((f,I)=>{let S=0;f.subscribe((0,at.x)(I,F=>{const $=u(F,S++);($||h)&&I.next(F),!$&&I.complete()}))})}(S=>null!==S),(0,Zt.d)(null),cn(),(0,Lt.U)(S=>{if(null===S)return null;const F=Te(S);return function K(u){u.sort((h,f)=>h.value.outlet===Gt?-1:f.value.outlet===Gt?1:h.value.outlet.localeCompare(f.value.outlet))}(F),F}))}processSegment(h,f,I,S,F){return(0,te.D)(f).pipe(je($=>this.processSegmentAgainstRoute($._injector??h,$,I,S,F)),(0,Be.P)($=>!!$),ke($=>{if(Ws($))return Ea(I,S,F)?(0,j.of)([]):(0,j.of)(null);throw $}))}processSegmentAgainstRoute(h,f,I,S,F){if(f.redirectTo||!Xo(f,I,S,F))return(0,j.of)(null);let $;if("**"===f.path){const le=S.length>0?Qn(S).parameters:{},De=Wt(I)+S.length,Je=new Ao(S,le,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dr(f),Oi(f),f.component??f._loadedComponent??null,f,bt(I),De,Ur(f));$=(0,j.of)({snapshot:Je,consumedSegments:[],remainingSegments:[]})}else $=ua(I,f,S,h).pipe((0,Lt.U)(({matched:le,consumedSegments:De,remainingSegments:Je,parameters:ft})=>{if(!le)return null;const ln=Wt(I)+De.length;return{snapshot:new Ao(De,ft,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dr(f),Oi(f),f.component??f._loadedComponent??null,f,bt(I),ln,Ur(f)),consumedSegments:De,remainingSegments:Je}}));return $.pipe((0,Vt.w)(le=>{if(null===le)return(0,j.of)(null);const{snapshot:De,consumedSegments:Je,remainingSegments:ft}=le;h=f._injector??h;const ln=f._loadedInjector??h,An=function V(u){return u.children?u.children:u.loadChildren?u._loadedRoutes:[]}(f),{segmentGroup:Un,slicedSegments:qn}=ca(I,Je,ft,An.filter(tr=>void 0===tr.redirectTo));if(0===qn.length&&Un.hasChildren())return this.processChildren(ln,An,Un).pipe((0,Lt.U)(tr=>null===tr?null:[new fo(De,tr)]));if(0===An.length&&0===qn.length)return(0,j.of)([new fo(De,[])]);const Pr=Oi(f)===F;return this.processSegment(ln,An,Un,qn,Pr?Gt:F).pipe((0,Lt.U)(tr=>null===tr?null:[new fo(De,tr)]))}))}}function ie(u){const h=u.value.routeConfig;return h&&""===h.path&&void 0===h.redirectTo}function Te(u){const h=[],f=new Set;for(const I of u){if(!ie(I)){h.push(I);continue}const S=h.find(F=>I.value.routeConfig===F.value.routeConfig);void 0!==S?(S.children.push(...I.children),f.add(S)):h.push(I)}for(const I of f){const S=Te(I.children);h.push(new fo(I.value,S))}return h.filter(I=>!f.has(I))}function bt(u){let h=u;for(;h._sourceSegment;)h=h._sourceSegment;return h}function Wt(u){let h=u,f=h._segmentIndexShift??0;for(;h._sourceSegment;)h=h._sourceSegment,f+=h._segmentIndexShift??0;return f-1}function dr(u){return u.data||{}}function Ur(u){return u.resolve||{}}function wn(u){return"string"==typeof u.title||null===u.title}function ks(u){return(0,Vt.w)(h=>{const f=u(h);return f?(0,te.D)(f).pipe((0,Lt.U)(()=>h)):(0,j.of)(h)})}const et=new v.OlP("ROUTES");let Mt=(()=>{class u{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,v.f3M)(v.Sil)}loadComponent(f){if(this.componentLoaders.get(f))return this.componentLoaders.get(f);if(f._loadedComponent)return(0,j.of)(f._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(f);const I=xn(f.loadComponent()).pipe((0,Lt.U)(Ba),(0,Ye.b)(F=>{this.onLoadEndListener&&this.onLoadEndListener(f),f._loadedComponent=F}),nr(()=>{this.componentLoaders.delete(f)})),S=new fn(I,()=>new Pe.x).pipe(Bt());return this.componentLoaders.set(f,S),S}loadChildren(f,I){if(this.childrenLoaders.get(I))return this.childrenLoaders.get(I);if(I._loadedRoutes)return(0,j.of)({routes:I._loadedRoutes,injector:I._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(I);const F=this.loadModuleFactoryOrRoutes(I.loadChildren).pipe((0,Lt.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(I);let De,Je,ft=!1;Array.isArray(le)?Je=le:(De=le.create(f).injector,Je=qr(De.get(et,[],v.XFs.Self|v.XFs.Optional)));return{routes:Je.map(Mo),injector:De}}),nr(()=>{this.childrenLoaders.delete(I)})),$=new fn(F,()=>new Pe.x).pipe(Bt());return this.childrenLoaders.set(I,$),$}loadModuleFactoryOrRoutes(f){return xn(f()).pipe((0,Lt.U)(Ba),(0,bn.z)(I=>I instanceof v.YKP||Array.isArray(I)?(0,j.of)(I):(0,te.D)(this.compiler.compileModuleAsync(I))))}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function Ba(u){return function bs(u){return u&&"object"==typeof u&&"default"in u}(u)?u.default:u}let Ja=(()=>{class u{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Pe.x,this.configLoader=(0,v.f3M)(Mt),this.environmentInjector=(0,v.f3M)(v.lqb),this.urlSerializer=(0,v.f3M)(mi),this.rootContexts=(0,v.f3M)(Hr),this.navigationId=0,this.afterPreactivation=()=>(0,j.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=S=>this.events.next(new cr(S)),this.configLoader.onLoadStartListener=S=>this.events.next(new wr(S))}complete(){this.transitions?.complete()}handleNavigationRequest(f){const I=++this.navigationId;this.transitions?.next({...this.transitions.value,...f,id:I})}setupNavigations(f){return this.transitions=new Ce({id:0,targetPageId:0,currentUrlTree:f.currentUrlTree,currentRawUrl:f.currentUrlTree,extractedUrl:f.urlHandlingStrategy.extract(f.currentUrlTree),urlAfterRedirects:f.urlHandlingStrategy.extract(f.currentUrlTree),rawUrl:f.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mn,restoredState:null,currentSnapshot:f.routerState.snapshot,targetSnapshot:null,currentRouterState:f.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Sn.h)(I=>0!==I.id),(0,Lt.U)(I=>({...I,extractedUrl:f.urlHandlingStrategy.extract(I.rawUrl)})),(0,Vt.w)(I=>{let S=!1,F=!1;return(0,j.of)(I).pipe((0,Ye.b)($=>{this.currentNavigation={id:$.id,initialUrl:$.rawUrl,extractedUrl:$.extractedUrl,trigger:$.source,extras:$.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Vt.w)($=>{const le=f.browserUrlTree.toString(),De=!f.navigated||$.extractedUrl.toString()!==le||le!==f.currentUrlTree.toString();if(!De&&"reload"!==($.extras.onSameUrlNavigation??f.onSameUrlNavigation)){const ft="";return this.events.next(new xi($.id,f.serializeUrl(I.rawUrl),ft,0)),f.rawUrlTree=$.rawUrl,$.resolve(null),Dt.E}if(f.urlHandlingStrategy.shouldProcessUrl($.rawUrl))return Fl($.source)&&(f.browserUrlTree=$.extractedUrl),(0,j.of)($).pipe((0,Vt.w)(ft=>{const ln=this.transitions?.getValue();return this.events.next(new Tn(ft.id,this.urlSerializer.serialize(ft.extractedUrl),ft.source,ft.restoredState)),ln!==this.transitions?.getValue()?Dt.E:Promise.resolve(ft)}),function Ua(u,h,f,I){return(0,Vt.w)(S=>function Xa(u,h,f,I,S){return new wa(u,h,f,I,S).apply()}(u,h,f,S.extractedUrl,I).pipe((0,Lt.U)(F=>({...S,urlAfterRedirects:F}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,f.config),(0,Ye.b)(ft=>{this.currentNavigation={...this.currentNavigation,finalUrl:ft.urlAfterRedirects},I.urlAfterRedirects=ft.urlAfterRedirects}),function Ir(u,h,f,I,S){return(0,bn.z)(F=>function no(u,h,f,I,S,F,$="emptyOnly"){return new N(u,h,f,I,S,$,F).recognize().pipe((0,Vt.w)(le=>null===le?function ha(u){return new $e.y(h=>h.error(u))}(new Jo):(0,j.of)(le)))}(u,h,f,F.urlAfterRedirects,I.serialize(F.urlAfterRedirects),I,S).pipe((0,Lt.U)($=>({...F,targetSnapshot:$}))))}(this.environmentInjector,this.rootComponentType,f.config,this.urlSerializer,f.paramsInheritanceStrategy),(0,Ye.b)(ft=>{if(I.targetSnapshot=ft.targetSnapshot,"eager"===f.urlUpdateStrategy){if(!ft.extras.skipLocationChange){const An=f.urlHandlingStrategy.merge(ft.urlAfterRedirects,ft.rawUrl);f.setBrowserUrl(An,ft)}f.browserUrlTree=ft.urlAfterRedirects}const ln=new Qr(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(ln)}));if(De&&f.urlHandlingStrategy.shouldProcessUrl(f.rawUrlTree)){const{id:ft,extractedUrl:ln,source:An,restoredState:Un,extras:qn}=$,Pr=new Tn(ft,this.urlSerializer.serialize(ln),An,Un);this.events.next(Pr);const tr=zs(ln,this.rootComponentType).snapshot;return I={...$,targetSnapshot:tr,urlAfterRedirects:ln,extras:{...qn,skipLocationChange:!1,replaceUrl:!1}},(0,j.of)(I)}{const ft="";return this.events.next(new xi($.id,f.serializeUrl(I.extractedUrl),ft,1)),f.rawUrlTree=$.rawUrl,$.resolve(null),Dt.E}}),(0,Ye.b)($=>{const le=new ii($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(le)}),(0,Lt.U)($=>I={...$,guards:Ui($.targetSnapshot,$.currentSnapshot,this.rootContexts)}),function Ks(u,h){return(0,bn.z)(f=>{const{targetSnapshot:I,currentSnapshot:S,guards:{canActivateChecks:F,canDeactivateChecks:$}}=f;return 0===$.length&&0===F.length?(0,j.of)({...f,guardsResult:!0}):function Es(u,h,f,I){return(0,te.D)(u).pipe((0,bn.z)(S=>function _o(u,h,f,I,S){const F=h&&h.routeConfig?h.routeConfig.canDeactivate:null;if(!F||0===F.length)return(0,j.of)(!0);const $=F.map(le=>{const De=_s(h)??S,Je=to(le,De);return xn(function dn(u){return u&&x(u.canDeactivate)}(Je)?Je.canDeactivate(u,h,f,I):De.runInContext(()=>Je(u,h,f,I))).pipe((0,Be.P)())});return(0,j.of)($).pipe(Ds())}(S.component,S.route,f,h,I)),(0,Be.P)(S=>!0!==S,!0))}($,I,S,u).pipe((0,bn.z)(le=>le&&function B(u){return"boolean"==typeof u}(le)?function Ps(u,h,f,I){return(0,te.D)(h).pipe(je(S=>(0,mt.z)(function qs(u,h){return null!==u&&h&&h(new cs(u)),(0,j.of)(!0)}(S.route.parent,I),function xo(u,h){return null!==u&&h&&h(new Fo(u)),(0,j.of)(!0)}(S.route,I),function Os(u,h,f){const I=h[h.length-1],F=h.slice(0,h.length-1).reverse().map($=>function la(u){const h=u.routeConfig?u.routeConfig.canActivateChild:null;return h&&0!==h.length?{node:u,guards:h}:null}($)).filter($=>null!==$).map($=>_t(()=>{const le=$.guards.map(De=>{const Je=_s($.node)??f,ft=to(De,Je);return xn(function Xe(u){return u&&x(u.canActivateChild)}(ft)?ft.canActivateChild(I,u):Je.runInContext(()=>ft(I,u))).pipe((0,Be.P)())});return(0,j.of)(le).pipe(Ds())}));return(0,j.of)(F).pipe(Ds())}(u,S.path,f),function yo(u,h,f){const I=h.routeConfig?h.routeConfig.canActivate:null;if(!I||0===I.length)return(0,j.of)(!0);const S=I.map(F=>_t(()=>{const $=_s(h)??f,le=to(F,$);return xn(function re(u){return u&&x(u.canActivate)}(le)?le.canActivate(h,u):$.runInContext(()=>le(h,u))).pipe((0,Be.P)())}));return(0,j.of)(S).pipe(Ds())}(u,S.route,f))),(0,Be.P)(S=>!0!==S,!0))}(I,F,u,h):(0,j.of)(le)),(0,Lt.U)(le=>({...f,guardsResult:le})))})}(this.environmentInjector,$=>this.events.next($)),(0,Ye.b)($=>{if(I.guardsResult=$.guardsResult,Pn($.guardsResult))throw Ot(0,$.guardsResult);const le=new ms($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot,!!$.guardsResult);this.events.next(le)}),(0,Sn.h)($=>!!$.guardsResult||(f.restoreHistory($),this.cancelNavigationTransition($,"",3),!1)),ks($=>{if($.guards.canActivateChecks.length)return(0,j.of)($).pipe((0,Ye.b)(le=>{const De=new ho(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(De)}),(0,Vt.w)(le=>{let De=!1;return(0,j.of)(le).pipe(function At(u,h){return(0,bn.z)(f=>{const{targetSnapshot:I,guards:{canActivateChecks:S}}=f;if(!S.length)return(0,j.of)(f);let F=0;return(0,te.D)(S).pipe(je($=>function On(u,h,f,I){const S=u.routeConfig,F=u._resolve;return void 0!==S?.title&&!wn(S)&&(F[Ar]=S.title),function si(u,h,f,I){const S=function Eo(u){return[...Object.keys(u),...Object.getOwnPropertySymbols(u)]}(u);if(0===S.length)return(0,j.of)({});const F={};return(0,te.D)(S).pipe((0,bn.z)($=>function nn(u,h,f,I){const S=_s(h)??I,F=to(u,S);return xn(F.resolve?F.resolve(h,f):S.runInContext(()=>F(h,f)))}(u[$],h,f,I).pipe((0,Be.P)(),(0,Ye.b)(le=>{F[$]=le}))),Tt(1),function zn(u){return(0,Lt.U)(()=>u)}(F),ke($=>Ws($)?Dt.E:rt($)))}(F,u,h,I).pipe((0,Lt.U)($=>(u._resolvedData=$,u.data=eo(u,f).resolve,S&&wn(S)&&(u.data[Ar]=S.title),null)))}($.route,I,u,h)),(0,Ye.b)(()=>F++),Tt(1),(0,bn.z)($=>F===S.length?(0,j.of)(f):Dt.E))})}(f.paramsInheritanceStrategy,this.environmentInjector),(0,Ye.b)({next:()=>De=!0,complete:()=>{De||(f.restoreHistory(le),this.cancelNavigationTransition(le,"",2))}}))}),(0,Ye.b)(le=>{const De=new yr(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(De)}))}),ks($=>{const le=De=>{const Je=[];De.routeConfig?.loadComponent&&!De.routeConfig._loadedComponent&&Je.push(this.configLoader.loadComponent(De.routeConfig).pipe((0,Ye.b)(ft=>{De.component=ft}),(0,Lt.U)(()=>{})));for(const ft of De.children)Je.push(...le(ft));return Je};return Pt(le($.targetSnapshot.root)).pipe((0,Zt.d)(),(0,ai.q)(1))}),ks(()=>this.afterPreactivation()),(0,Lt.U)($=>{const le=function ee(u,h,f){const I=Ee(u,h._root,f?f._root:void 0);return new po(I,h)}(f.routeReuseStrategy,$.targetSnapshot,$.currentRouterState);return I={...$,targetRouterState:le}}),(0,Ye.b)($=>{f.currentUrlTree=$.urlAfterRedirects,f.rawUrlTree=f.urlHandlingStrategy.merge($.urlAfterRedirects,$.rawUrl),f.routerState=$.targetRouterState,"deferred"===f.urlUpdateStrategy&&($.extras.skipLocationChange||f.setBrowserUrl(f.rawUrlTree,$),f.browserUrlTree=$.urlAfterRedirects)}),((u,h,f)=>(0,Lt.U)(I=>(new vs(h,I.targetRouterState,I.currentRouterState,f).activate(u),I)))(this.rootContexts,f.routeReuseStrategy,$=>this.events.next($)),(0,ai.q)(1),(0,Ye.b)({next:$=>{S=!0,this.lastSuccessfulNavigation=this.currentNavigation,f.navigated=!0,this.events.next(new mr($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize(f.currentUrlTree))),f.titleStrategy?.updateTitle($.targetRouterState.snapshot),$.resolve(!0)},complete:()=>{S=!0}}),nr(()=>{S||F||this.cancelNavigationTransition(I,"",1),this.currentNavigation?.id===I.id&&(this.currentNavigation=null)}),ke($=>{if(F=!0,er($)){tn($)||(f.navigated=!0,f.restoreHistory(I,!0));const le=new ns(I.id,this.urlSerializer.serialize(I.extractedUrl),$.message,$.cancellationCode);if(this.events.next(le),tn($)){const De=f.urlHandlingStrategy.merge($.url,f.rawUrlTree),Je={skipLocationChange:I.extras.skipLocationChange,replaceUrl:"eager"===f.urlUpdateStrategy||Fl(I.source)};f.scheduleNavigation(De,Mn,null,Je,{resolve:I.resolve,reject:I.reject,promise:I.promise})}else I.resolve(!1)}else{f.restoreHistory(I,!0);const le=new Yi(I.id,this.urlSerializer.serialize(I.extractedUrl),$,I.targetSnapshot??void 0);this.events.next(le);try{I.resolve(f.errorHandler($))}catch(De){I.reject(De)}}return Dt.E}))}))}cancelNavigationTransition(f,I,S){const F=new ns(f.id,this.urlSerializer.serialize(f.extractedUrl),I,S);this.events.next(F),f.resolve(!1)}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function Fl(u){return u!==Mn}let Ll=(()=>{class u{buildTitle(f){let I,S=f.root;for(;void 0!==S;)I=this.getResolvedTitleForRoute(S)??I,S=S.children.find(F=>F.outlet===Gt);return I}getResolvedTitleForRoute(f){return f.data[Ar]}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:function(){return(0,v.f3M)(ea)},providedIn:"root"}),u})(),ea=(()=>{class u extends Ll{constructor(f){super(),this.title=f}updateTitle(f){const I=this.buildTitle(f);void 0!==I&&this.title.setTitle(I)}}return u.\u0275fac=function(f){return new(f||u)(v.LFG(Sr.Dx))},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),Vl=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:function(){return(0,v.f3M)(Ia)},providedIn:"root"}),u})();class El{shouldDetach(h){return!1}store(h,f){}shouldAttach(h){return!1}retrieve(h){return null}shouldReuseRoute(h,f){return h.routeConfig===f.routeConfig}}let Ia=(()=>{class u extends El{}return u.\u0275fac=function(){let h;return function(I){return(h||(h=v.n5z(u)))(I||u)}}(),u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const is=new v.OlP("",{providedIn:"root",factory:()=>({})});let lr=(()=>{class u{}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:function(){return(0,v.f3M)(Ca)},providedIn:"root"}),u})(),Ca=(()=>{class u{shouldProcessUrl(f){return!0}extract(f){return f}merge(f,I){return f}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function es(u){throw u}function Gn(u,h,f){return h.parse("/")}const Pa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},or={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ro=(()=>{class u{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,v.f3M)(v.c2e),this.isNgZoneEnabled=!1,this.options=(0,v.f3M)(is,{optional:!0})||{},this.errorHandler=this.options.errorHandler||es,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Gn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,v.f3M)(lr),this.routeReuseStrategy=(0,v.f3M)(Vl),this.urlCreationStrategy=(0,v.f3M)(Xr),this.titleStrategy=(0,v.f3M)(Ll),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qr((0,v.f3M)(et,{optional:!0})??[]),this.navigationTransitions=(0,v.f3M)(Ja),this.urlSerializer=(0,v.f3M)(mi),this.location=(0,v.f3M)(Ut.Ye),this.isNgZoneEnabled=(0,v.f3M)(v.R0b)instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(f=>{this.lastSuccessfulId=f.id,this.currentPageId=this.browserPageId??0},f=>{this.console.warn(`Unhandled Navigation Error: ${f}`)})}resetRootComponentType(f){this.routerState.root.component=f,this.navigationTransitions.rootComponentType=f}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const f=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mn,f)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(f=>{const I="popstate"===f.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{this.navigateToSyncWithBrowser(f.url,I,f.state)},0)}))}navigateToSyncWithBrowser(f,I,S){const F={replaceUrl:!0},$=S?.navigationId?S:null;if(S){const De={...S};delete De.navigationId,delete De.\u0275routerPageId,0!==Object.keys(De).length&&(F.state=De)}const le=this.parseUrl(f);this.scheduleNavigation(le,I,$,F)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(f){this.config=f.map(Mo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(f,I={}){const{relativeTo:S,queryParams:F,fragment:$,queryParamsHandling:le,preserveFragment:De}=I,Je=De?this.currentUrlTree.fragment:$;let ft=null;switch(le){case"merge":ft={...this.currentUrlTree.queryParams,...F};break;case"preserve":ft=this.currentUrlTree.queryParams;break;default:ft=F||null}return null!==ft&&(ft=this.removeEmptyProps(ft)),this.urlCreationStrategy.createUrlTree(S,this.routerState,this.currentUrlTree,f,ft,Je??null)}navigateByUrl(f,I={skipLocationChange:!1}){const S=Pn(f)?f:this.parseUrl(f),F=this.urlHandlingStrategy.merge(S,this.rawUrlTree);return this.scheduleNavigation(F,Mn,null,I)}navigate(f,I={skipLocationChange:!1}){return function Dr(u){for(let h=0;h<u.length;h++){const f=u[h];if(null==f)throw new v.vHH(4008,false)}}(f),this.navigateByUrl(this.createUrlTree(f,I),I)}serializeUrl(f){return this.urlSerializer.serialize(f)}parseUrl(f){let I;try{I=this.urlSerializer.parse(f)}catch(S){I=this.malformedUriErrorHandler(S,this.urlSerializer,f)}return I}isActive(f,I){let S;if(S=!0===I?{...Pa}:!1===I?{...or}:I,Pn(f))return wi(this.currentUrlTree,f,S);const F=this.parseUrl(f);return wi(this.currentUrlTree,F,S)}removeEmptyProps(f){return Object.keys(f).reduce((I,S)=>{const F=f[S];return null!=F&&(I[S]=F),I},{})}scheduleNavigation(f,I,S,F,$){if(this.disposed)return Promise.resolve(!1);let le,De,Je,ft;return $?(le=$.resolve,De=$.reject,Je=$.promise):Je=new Promise((ln,An)=>{le=ln,De=An}),ft="computed"===this.canceledNavigationResolution?S&&S.\u0275routerPageId?S.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:ft,source:I,restoredState:S,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:f,extras:F,resolve:le,reject:De,promise:Je,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Je.catch(ln=>Promise.reject(ln))}setBrowserUrl(f,I){const S=this.urlSerializer.serialize(f);if(this.location.isCurrentPathEqualTo(S)||I.extras.replaceUrl){const $={...I.extras.state,...this.generateNgRouterState(I.id,this.browserPageId)};this.location.replaceState(S,"",$)}else{const F={...I.extras.state,...this.generateNgRouterState(I.id,I.targetPageId)};this.location.go(S,"",F)}}restoreHistory(f,I=!1){if("computed"===this.canceledNavigationResolution){const F=this.currentPageId-(this.browserPageId??this.currentPageId);0!==F?this.location.historyGo(F):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===F&&(this.resetState(f),this.browserUrlTree=f.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(f),this.resetUrlToCurrentUrlTree())}resetState(f){this.routerState=f.currentRouterState,this.currentUrlTree=f.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,f.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(f,I){return"computed"===this.canceledNavigationResolution?{navigationId:f,\u0275routerPageId:I}:{navigationId:f}}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),Xt=(()=>{class u{constructor(f,I,S,F,$,le){this.router=f,this.route=I,this.tabIndexAttribute=S,this.renderer=F,this.el=$,this.locationStrategy=le,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Pe.x;const De=$.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===De||"area"===De,this.isAnchorElement?this.subscription=f.events.subscribe(Je=>{Je instanceof mr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(f){this._preserveFragment=(0,v.D6c)(f)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(f){this._skipLocationChange=(0,v.D6c)(f)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(f){this._replaceUrl=(0,v.D6c)(f)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(f){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",f)}ngOnChanges(f){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(f){null!=f?(this.commands=Array.isArray(f)?f:[f],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(f,I,S,F,$){return!!(null===this.urlTree||this.isAnchorElement&&(0!==f||I||S||F||$||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const f=null===this.href?null:(0,v.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",f)}applyAttributeValue(f,I){const S=this.renderer,F=this.el.nativeElement;null!==I?S.setAttribute(F,f,I):S.removeAttribute(F,f)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return u.\u0275fac=function(f){return new(f||u)(v.Y36(ro),v.Y36(Gs),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(Ut.S$))},u.\u0275dir=v.lG2({type:u,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(f,I){1&f&&v.NdJ("click",function(F){return I.onClick(F.button,F.ctrlKey,F.shiftKey,F.altKey,F.metaKey)}),2&f&&v.uIk("target",I.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[v.TTD]}),u})(),ta=(()=>{class u{get isActive(){return this._isActive}constructor(f,I,S,F,$){this.router=f,this.element=I,this.renderer=S,this.cdr=F,this.link=$,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new v.vpe,this.routerEventsSubscription=f.events.subscribe(le=>{le instanceof mr&&this.update()})}ngAfterContentInit(){(0,j.of)(this.links.changes,(0,j.of)(null)).pipe((0,Fn.J)()).subscribe(f=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const f=[...this.links.toArray(),this.link].filter(I=>!!I).map(I=>I.onChanges);this.linkInputChangesSubscription=(0,te.D)(f).pipe((0,Fn.J)()).subscribe(I=>{this._isActive!==this.isLinkActive(this.router)(I)&&this.update()})}set routerLinkActive(f){const I=Array.isArray(f)?f:f.split(" ");this.classes=I.filter(S=>!!S)}ngOnChanges(f){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const f=this.hasActiveLinks();this._isActive!==f&&(this._isActive=f,this.cdr.markForCheck(),this.classes.forEach(I=>{f?this.renderer.addClass(this.element.nativeElement,I):this.renderer.removeClass(this.element.nativeElement,I)}),f&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(f))})}isLinkActive(f){const I=function $a(u){return!!u.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return S=>!!S.urlTree&&f.isActive(S.urlTree,I)}hasActiveLinks(){const f=this.isLinkActive(this.router);return this.link&&f(this.link)||this.links.some(f)}}return u.\u0275fac=function(f){return new(f||u)(v.Y36(ro),v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.sBO),v.Y36(Xt,8))},u.\u0275dir=v.lG2({type:u,selectors:[["","routerLinkActive",""]],contentQueries:function(f,I,S){if(1&f&&v.Suo(S,Xt,5),2&f){let F;v.iGM(F=v.CRH())&&(I.links=F)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[v.TTD]}),u})();class wo{}let ja=(()=>{class u{constructor(f,I,S,F,$){this.router=f,this.injector=S,this.preloadingStrategy=F,this.loader=$}setUpPreloading(){this.subscription=this.router.events.pipe((0,Sn.h)(f=>f instanceof mr),je(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(f,I){const S=[];for(const F of I){F.providers&&!F._injector&&(F._injector=(0,v.MMx)(F.providers,f,`Route: ${F.path}`));const $=F._injector??f,le=F._loadedInjector??$;(F.loadChildren&&!F._loadedRoutes&&void 0===F.canLoad||F.loadComponent&&!F._loadedComponent)&&S.push(this.preloadConfig($,F)),(F.children||F._loadedRoutes)&&S.push(this.processRoutes(le,F.children??F._loadedRoutes))}return(0,te.D)(S).pipe((0,Fn.J)())}preloadConfig(f,I){return this.preloadingStrategy.preload(I,()=>{let S;S=I.loadChildren&&void 0===I.canLoad?this.loader.loadChildren(f,I):(0,j.of)(null);const F=S.pipe((0,bn.z)($=>null===$?(0,j.of)(void 0):(I._loadedRoutes=$.routes,I._loadedInjector=$.injector,this.processRoutes($.injector??f,$.routes))));if(I.loadComponent&&!I._loadedComponent){const $=this.loader.loadComponent(I);return(0,te.D)([F,$]).pipe((0,Fn.J)())}return F})}}return u.\u0275fac=function(f){return new(f||u)(v.LFG(ro),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(wo),v.LFG(Mt))},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const Ha=new v.OlP("");let fa=(()=>{class u{constructor(f,I,S,F,$={}){this.urlSerializer=f,this.transitions=I,this.viewportScroller=S,this.zone=F,this.options=$,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},$.scrollPositionRestoration=$.scrollPositionRestoration||"disabled",$.anchorScrolling=$.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(f=>{f instanceof Tn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=f.navigationTrigger,this.restoredId=f.restoredState?f.restoredState.navigationId:0):f instanceof mr&&(this.lastId=f.id,this.scheduleScrollEvent(f,this.urlSerializer.parse(f.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(f=>{f instanceof Hi&&(f.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(f.position):f.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(f.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(f,I){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hi(f,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return u.\u0275fac=function(f){v.$Z()},u.\u0275prov=v.Yz7({token:u,factory:u.\u0275fac}),u})();var Fs=(()=>((Fs=Fs||{})[Fs.COMPLETE=0]="COMPLETE",Fs[Fs.FAILED=1]="FAILED",Fs[Fs.REDIRECTING=2]="REDIRECTING",Fs))();const jo=!1;function io(u,h){return{\u0275kind:u,\u0275providers:h}}const na=new v.OlP("",{providedIn:"root",factory:()=>!1});function za(){const u=(0,v.f3M)(v.zs3);return h=>{const f=u.get(v.z2F);if(h!==f.components[0])return;const I=u.get(ro),S=u.get(Ga);1===u.get(ra)&&I.initialNavigation(),u.get(Ql,null,v.XFs.Optional)?.setUpPreloading(),u.get(Ha,null,v.XFs.Optional)?.init(),I.resetRootComponentType(f.componentTypes[0]),S.closed||(S.next(),S.complete(),S.unsubscribe())}}const Ga=new v.OlP(jo?"bootstrap done indicator":"",{factory:()=>new Pe.x}),ra=new v.OlP(jo?"initial navigation":"",{providedIn:"root",factory:()=>1});function iu(){let u=[];return u=jo?[{provide:v.Xts,multi:!0,useFactory:()=>{const h=(0,v.f3M)(ro);return()=>h.events.subscribe(f=>{console.group?.(`Router Event: ${f.constructor.name}`),console.log(function Cs(u){if(!("type"in u))return`Unknown Router Event: ${u.constructor.name}`;switch(u.type){case 14:return`ActivationEnd(path: '${u.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${u.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${u.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${u.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}', state: ${u.state}, shouldActivate: ${u.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}', state: ${u.state})`;case 2:return`NavigationCancel(id: ${u.id}, url: '${u.url}')`;case 16:return`NavigationSkipped(id: ${u.id}, url: '${u.url}')`;case 1:return`NavigationEnd(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${u.id}, url: '${u.url}', error: ${u.error})`;case 0:return`NavigationStart(id: ${u.id}, url: '${u.url}')`;case 6:return`ResolveEnd(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}', state: ${u.state})`;case 5:return`ResolveStart(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}', state: ${u.state})`;case 10:return`RouteConfigLoadEnd(path: ${u.route.path})`;case 9:return`RouteConfigLoadStart(path: ${u.route.path})`;case 4:return`RoutesRecognized(id: ${u.id}, url: '${u.url}', urlAfterRedirects: '${u.urlAfterRedirects}', state: ${u.state})`;case 15:return`Scroll(anchor: '${u.anchor}', position: '${u.position?`${u.position[0]}, ${u.position[1]}`:null}')`}}(f)),console.log(f),console.groupEnd?.()})}}]:[],io(1,u)}const Ql=new v.OlP(jo?"router preloader":"");function tl(u){return io(0,[{provide:Ql,useExisting:ja},{provide:wo,useExisting:u}])}const zo=!1,ts=new v.OlP(zo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Qs=[Ut.Ye,{provide:mi,useClass:qi},ro,Hr,{provide:Gs,useFactory:function Cl(u){return u.routerState.root},deps:[ro]},Mt,zo?{provide:na,useValue:!0}:[]];function pa(){return new v.PXZ("Router",ro)}let Ls=(()=>{class u{constructor(f){}static forRoot(f,I){return{ngModule:u,providers:[Qs,zo&&I?.enableTracing?iu().\u0275providers:[],{provide:et,multi:!0,useValue:f},{provide:ts,useFactory:Xl,deps:[[ro,new v.FiY,new v.tp0]]},{provide:is,useValue:I||{}},I?.useHash?{provide:Ut.S$,useClass:Ut.Do}:{provide:Ut.S$,useClass:Ut.b0},{provide:Ha,useFactory:()=>{const u=(0,v.f3M)(Ut.EM),h=(0,v.f3M)(v.R0b),f=(0,v.f3M)(is),I=(0,v.f3M)(Ja),S=(0,v.f3M)(mi);return f.scrollOffset&&u.setOffset(f.scrollOffset),new fa(S,I,u,h,f)}},I?.preloadingStrategy?tl(I.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:pa},I?.initialNavigation?Dl(I):[],[{provide:Tl,useFactory:za},{provide:v.tb,multi:!0,useExisting:Tl}]]}}static forChild(f){return{ngModule:u,providers:[{provide:et,multi:!0,useValue:f}]}}}return u.\u0275fac=function(f){return new(f||u)(v.LFG(ts,8))},u.\u0275mod=v.oAB({type:u}),u.\u0275inj=v.cJS({imports:[zr]}),u})();function Xl(u){if(zo&&u)throw new v.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Dl(u){return["disabled"===u.initialNavigation?io(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const h=(0,v.f3M)(ro);return()=>{h.setUpLocationChangeListener()}}},{provide:ra,useValue:2}]).\u0275providers:[],"enabledBlocking"===u.initialNavigation?io(2,[{provide:ra,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:h=>{const f=h.get(Ut.V_,Promise.resolve());return()=>f.then(()=>new Promise(I=>{const S=h.get(ro),F=h.get(Ga);(function Ys(u,h){u.events.pipe((0,Sn.h)(f=>f instanceof mr||f instanceof ns||f instanceof Yi||f instanceof xi),(0,Lt.U)(f=>f instanceof mr||f instanceof xi?Fs.COMPLETE:f instanceof ns&&(0===f.code||1===f.code)?Fs.REDIRECTING:Fs.FAILED),(0,Sn.h)(f=>f!==Fs.REDIRECTING),(0,ai.q)(1)).subscribe(()=>{h()})})(S,()=>{I(!0)}),h.get(Ja).afterPreactivation=()=>(I(!0),F.closed?(0,j.of)(void 0):F),S.initialNavigation()}))}}]).\u0275providers:[]]}const Tl=new v.OlP(zo?"Router Initializer":"")},3942:(rn,tt,G)=>{G.d(tt,{Z:()=>Pt});var v=G(2090),te=G(4859),j=G(6881),Pe=G(1877);class Ce{constructor(ot,mt){this._delegate=ot,this.firebase=mt,(0,j._addComponent)(ot,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ot,mt=j._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(ot);return!_t.isInitialized()&&"EXPLICIT"===(null===(Et=_t.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:mt})}_removeServiceInstance(ot,mt=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(mt)}_addComponent(ot){(0,j._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,j._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function qe(){const jt=function ye(jt){const ot={},mt={__esModule:!0,initializeApp:function Ze(lt,q={}){const Bt=j.initializeApp(lt,q);if((0,v.r3)(ot,Bt.name))return ot[Bt.name];const fn=new jt(Bt,mt);return ot[Bt.name]=fn,fn},app:_t,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function rt(lt){const q=lt.name,Bt=q.replace("-compat","");if(j._registerComponent(lt)&&"PUBLIC"===lt.type){const fn=(Ut=_t())=>{if("function"!=typeof Ut[Bt])throw $e.create("invalid-app-argument",{appName:q});return Ut[Bt]()};void 0!==lt.serviceProps&&(0,v.ZB)(fn,lt.serviceProps),mt[Bt]=fn,jt.prototype[Bt]=function(...Ut){return this._getService.bind(this,q).apply(this,lt.multipleInstances?Ut:[])}}return"PUBLIC"===lt.type?mt[Bt]:null},removeApp:function Et(lt){delete ot[lt]},useAsService:function Dt(lt,q){return"serverAuth"===q?null:q},modularAPIs:j}};function _t(lt){if(!(0,v.r3)(ot,lt=lt||j._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:lt});return ot[lt]}return mt.default=mt,Object.defineProperty(mt,"apps",{get:function Oe(){return Object.keys(ot).map(lt=>ot[lt])}}),_t.App=jt,mt}(Ce);return jt.INTERNAL=Object.assign(Object.assign({},jt.INTERNAL),{createFirebaseNamespace:qe,extendNamespace:function ot(mt){(0,v.ZB)(jt,mt)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),jt}(),ge=new Pe.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const jt=self.firebase.SDK_VERSION;jt&&jt.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pt=ce;!function gt(jt){(0,j.registerVersion)("@firebase/app-compat","0.2.13",jt)}()},6881:(rn,tt,G)=>{G.r(tt),G.d(tt,{FirebaseError:()=>Pe.ZR,SDK_VERSION:()=>Nr,_DEFAULT_ENTRY_NAME:()=>Qn,_addComponent:()=>sn,_addOrOverwriteComponent:()=>Rn,_apps:()=>Ln,_clearComponents:()=>ui,_components:()=>xn,_getProvider:()=>wi,_registerComponent:()=>li,_removeServiceInstance:()=>Br,deleteApp:()=>ri,getApp:()=>Qt,getApps:()=>qt,initializeApp:()=>Cn,onLog:()=>mi,registerVersion:()=>Pi,setLogLevel:()=>qi});var v=G(5861),te=G(4859),j=G(1877),Pe=G(2090);const Ce=(ht,Qe)=>Qe.some(xt=>ht instanceof xt);let Fe,$e;const ce=new WeakMap,ge=new WeakMap,Ne=new WeakMap,at=new WeakMap,gt=new WeakMap;let ot={get(ht,Qe,xt){if(ht instanceof IDBTransaction){if("done"===Qe)return ge.get(ht);if("objectStoreNames"===Qe)return ht.objectStoreNames||Ne.get(ht);if("store"===Qe)return xt.objectStoreNames[1]?void 0:xt.objectStore(xt.objectStoreNames[0])}return Ze(ht[Qe])},set:(ht,Qe,xt)=>(ht[Qe]=xt,!0),has:(ht,Qe)=>ht instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in ht};function _t(ht){return"function"==typeof ht?function Et(ht){return ht!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qe(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ht)?function(...Qe){return ht.apply(Oe(this),Qe),Ze(ce.get(this))}:function(...Qe){return Ze(ht.apply(Oe(this),Qe))}:function(Qe,...xt){const pn=ht.call(Oe(this),Qe,...xt);return Ne.set(pn,Qe.sort?Qe.sort():[Qe]),Ze(pn)}}(ht):(ht instanceof IDBTransaction&&function jt(ht){if(ge.has(ht))return;const Qe=new Promise((xt,pn)=>{const Pn=()=>{ht.removeEventListener("complete",ir),ht.removeEventListener("error",gn),ht.removeEventListener("abort",gn)},ir=()=>{xt(),Pn()},gn=()=>{pn(ht.error||new DOMException("AbortError","AbortError")),Pn()};ht.addEventListener("complete",ir),ht.addEventListener("error",gn),ht.addEventListener("abort",gn)});ge.set(ht,Qe)}(ht),Ce(ht,function ye(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ht,ot):ht)}function Ze(ht){if(ht instanceof IDBRequest)return function Pt(ht){const Qe=new Promise((xt,pn)=>{const Pn=()=>{ht.removeEventListener("success",ir),ht.removeEventListener("error",gn)},ir=()=>{xt(Ze(ht.result)),Pn()},gn=()=>{pn(ht.error),Pn()};ht.addEventListener("success",ir),ht.addEventListener("error",gn)});return Qe.then(xt=>{xt instanceof IDBCursor&&ce.set(xt,ht)}).catch(()=>{}),gt.set(Qe,ht),Qe}(ht);if(at.has(ht))return at.get(ht);const Qe=_t(ht);return Qe!==ht&&(at.set(ht,Qe),gt.set(Qe,ht)),Qe}const Oe=ht=>gt.get(ht),lt=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],Bt=new Map;function fn(ht,Qe){if(!(ht instanceof IDBDatabase)||Qe in ht||"string"!=typeof Qe)return;if(Bt.get(Qe))return Bt.get(Qe);const xt=Qe.replace(/FromIndex$/,""),pn=Qe!==xt,Pn=q.includes(xt);if(!(xt in(pn?IDBIndex:IDBObjectStore).prototype)||!Pn&&!lt.includes(xt))return;const ir=function(){var gn=(0,v.Z)(function*(Cr,...vr){const Zi=this.transaction(Cr,Pn?"readwrite":"readonly");let _i=Zi.store;return pn&&(_i=_i.index(vr.shift())),(yield Promise.all([_i[xt](...vr),Pn&&Zi.done]))[0]});return function(vr){return gn.apply(this,arguments)}}();return Bt.set(Qe,ir),ir}!function mt(ht){ot=ht(ot)}(ht=>({...ht,get:(Qe,xt,pn)=>fn(Qe,xt)||ht.get(Qe,xt,pn),has:(Qe,xt)=>!!fn(Qe,xt)||ht.has(Qe,xt)}));class Ut{constructor(Qe){this.container=Qe}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function Lt(ht){return"VERSION"===ht.getComponent()?.type}(xt)){const pn=xt.getImmediate();return`${pn.library}/${pn.version}`}return null}).filter(xt=>xt).join(" ")}}const Vt="@firebase/app",Er=new j.Yd("@firebase/app"),Qn="[DEFAULT]",Ki={[Vt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ln=new Map,xn=new Map;function sn(ht,Qe){try{ht.container.addComponent(Qe)}catch(xt){Er.debug(`Component ${Qe.name} failed to register with FirebaseApp ${ht.name}`,xt)}}function Rn(ht,Qe){ht.container.addOrOverwriteComponent(Qe)}function li(ht){const Qe=ht.name;if(xn.has(Qe))return Er.debug(`There were multiple attempts to register component ${Qe}.`),!1;xn.set(Qe,ht);for(const xt of Ln.values())sn(xt,ht);return!0}function wi(ht,Qe){const xt=ht.container.getProvider("heartbeat").getImmediate({optional:!0});return xt&&xt.triggerHeartbeat(),ht.container.getProvider(Qe)}function Br(ht,Qe,xt=Qn){wi(ht,Qe).clearInstance(xt)}function ui(){xn.clear()}const ci=new Pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xn{constructor(Qe,xt,pn){this._isDeleted=!1,this._options=Object.assign({},Qe),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=pn,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Qe){this._isDeleted=Qe}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const Nr="9.23.0";function Cn(ht,Qe={}){let xt=ht;"object"!=typeof Qe&&(Qe={name:Qe});const pn=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},Qe),Pn=pn.name;if("string"!=typeof Pn||!Pn)throw ci.create("bad-app-name",{appName:String(Pn)});if(xt||(xt=(0,Pe.aH)()),!xt)throw ci.create("no-options");const ir=Ln.get(Pn);if(ir){if((0,Pe.vZ)(xt,ir.options)&&(0,Pe.vZ)(pn,ir.config))return ir;throw ci.create("duplicate-app",{appName:Pn})}const gn=new te.H0(Pn);for(const vr of xn.values())gn.addComponent(vr);const Cr=new Xn(xt,pn,gn);return Ln.set(Pn,Cr),Cr}function Qt(ht=Qn){const Qe=Ln.get(ht);if(!Qe&&ht===Qn&&(0,Pe.aH)())return Cn();if(!Qe)throw ci.create("no-app",{appName:ht});return Qe}function qt(){return Array.from(Ln.values())}function ri(ht){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,v.Z)(function*(ht){const Qe=ht.name;Ln.has(Qe)&&(Ln.delete(Qe),yield Promise.all(ht.container.getProviders().map(xt=>xt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function Pi(ht,Qe,xt){var pn;let Pn=null!==(pn=Ki[ht])&&void 0!==pn?pn:ht;xt&&(Pn+=`-${xt}`);const ir=Pn.match(/\s|\//),gn=Qe.match(/\s|\//);if(ir||gn){const Cr=[`Unable to register library "${Pn}" with version "${Qe}":`];return ir&&Cr.push(`library name "${Pn}" contains illegal characters (whitespace or "/")`),ir&&gn&&Cr.push("and"),gn&&Cr.push(`version name "${Qe}" contains illegal characters (whitespace or "/")`),void Er.warn(Cr.join(" "))}li(new te.wA(`${Pn}-version`,()=>({library:Pn,version:Qe}),"VERSION"))}function mi(ht,Qe){if(null!==ht&&"function"!=typeof ht)throw ci.create("invalid-log-argument");(0,j.Am)(ht,Qe)}function qi(ht){(0,j.Ub)(ht)}const Ni="firebase-heartbeat-database",yi=1,be="firebase-heartbeat-store";let we=null;function oe(){return we||(we=function rt(ht,Qe,{blocked:xt,upgrade:pn,blocking:Pn,terminated:ir}={}){const gn=indexedDB.open(ht,Qe),Cr=Ze(gn);return pn&&gn.addEventListener("upgradeneeded",vr=>{pn(Ze(gn.result),vr.oldVersion,vr.newVersion,Ze(gn.transaction),vr)}),xt&&gn.addEventListener("blocked",vr=>xt(vr.oldVersion,vr.newVersion,vr)),Cr.then(vr=>{ir&&vr.addEventListener("close",()=>ir()),Pn&&vr.addEventListener("versionchange",Zi=>Pn(Zi.oldVersion,Zi.newVersion,Zi))}).catch(()=>{}),Cr}(Ni,yi,{upgrade:(ht,Qe)=>{0===Qe&&ht.createObjectStore(be)}}).catch(ht=>{throw ci.create("idb-open",{originalErrorMessage:ht.message})})),we}function ne(){return(ne=(0,v.Z)(function*(ht){try{return yield(yield oe()).transaction(be).objectStore(be).get(ve(ht))}catch(Qe){if(Qe instanceof Pe.ZR)Er.warn(Qe.message);else{const xt=ci.create("idb-get",{originalErrorMessage:Qe?.message});Er.warn(xt.message)}}})).apply(this,arguments)}function Se(ht,Qe){return me.apply(this,arguments)}function me(){return(me=(0,v.Z)(function*(ht,Qe){try{const pn=(yield oe()).transaction(be,"readwrite");yield pn.objectStore(be).put(Qe,ve(ht)),yield pn.done}catch(xt){if(xt instanceof Pe.ZR)Er.warn(xt.message);else{const pn=ci.create("idb-set",{originalErrorMessage:xt?.message});Er.warn(pn.message)}}})).apply(this,arguments)}function ve(ht){return`${ht.name}!${ht.options.appId}`}class nt{constructor(Qe){this.container=Qe,this._heartbeatsCache=null;const xt=this.container.getProvider("app").getImmediate();this._storage=new Dn(xt),this._heartbeatsCachePromise=this._storage.read().then(pn=>(this._heartbeatsCache=pn,pn))}triggerHeartbeat(){var Qe=this;return(0,v.Z)(function*(){const pn=Qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pn=St();if(null===Qe._heartbeatsCache&&(Qe._heartbeatsCache=yield Qe._heartbeatsCachePromise),Qe._heartbeatsCache.lastSentHeartbeatDate!==Pn&&!Qe._heartbeatsCache.heartbeats.some(ir=>ir.date===Pn))return Qe._heartbeatsCache.heartbeats.push({date:Pn,agent:pn}),Qe._heartbeatsCache.heartbeats=Qe._heartbeatsCache.heartbeats.filter(ir=>{const gn=new Date(ir.date).valueOf();return Date.now()-gn<=2592e6}),Qe._storage.overwrite(Qe._heartbeatsCache)})()}getHeartbeatsHeader(){var Qe=this;return(0,v.Z)(function*(){if(null===Qe._heartbeatsCache&&(yield Qe._heartbeatsCachePromise),null===Qe._heartbeatsCache||0===Qe._heartbeatsCache.heartbeats.length)return"";const xt=St(),{heartbeatsToSend:pn,unsentEntries:Pn}=function mn(ht,Qe=1024){const xt=[];let pn=ht.slice();for(const Pn of ht){const ir=xt.find(gn=>gn.agent===Pn.agent);if(ir){if(ir.dates.push(Pn.date),xr(xt)>Qe){ir.dates.pop();break}}else if(xt.push({agent:Pn.agent,dates:[Pn.date]}),xr(xt)>Qe){xt.pop();break}pn=pn.slice(1)}return{heartbeatsToSend:xt,unsentEntries:pn}}(Qe._heartbeatsCache.heartbeats),ir=(0,Pe.L)(JSON.stringify({version:2,heartbeats:pn}));return Qe._heartbeatsCache.lastSentHeartbeatDate=xt,Pn.length>0?(Qe._heartbeatsCache.heartbeats=Pn,yield Qe._storage.overwrite(Qe._heartbeatsCache)):(Qe._heartbeatsCache.heartbeats=[],Qe._storage.overwrite(Qe._heartbeatsCache)),ir})()}}function St(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(Qe){this.app=Qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,Pe.hl)()&&(0,Pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Qe=this;return(0,v.Z)(function*(){return(yield Qe._canUseIndexedDBPromise)&&(yield function he(ht){return ne.apply(this,arguments)}(Qe.app))||{heartbeats:[]}})()}overwrite(Qe){var xt=this;return(0,v.Z)(function*(){var pn;if(yield xt._canUseIndexedDBPromise){const ir=yield xt.read();return Se(xt.app,{lastSentHeartbeatDate:null!==(pn=Qe.lastSentHeartbeatDate)&&void 0!==pn?pn:ir.lastSentHeartbeatDate,heartbeats:Qe.heartbeats})}})()}add(Qe){var xt=this;return(0,v.Z)(function*(){var pn;if(yield xt._canUseIndexedDBPromise){const ir=yield xt.read();return Se(xt.app,{lastSentHeartbeatDate:null!==(pn=Qe.lastSentHeartbeatDate)&&void 0!==pn?pn:ir.lastSentHeartbeatDate,heartbeats:[...ir.heartbeats,...Qe.heartbeats]})}})()}}function xr(ht){return(0,Pe.L)(JSON.stringify({version:2,heartbeats:ht})).length}!function Li(ht){li(new te.wA("platform-logger",Qe=>new Ut(Qe),"PRIVATE")),li(new te.wA("heartbeat",Qe=>new nt(Qe),"PRIVATE")),Pi(Vt,"0.9.13",ht),Pi(Vt,"0.9.13","esm2017"),Pi("fire-js","")}("")},4859:(rn,tt,G)=>{G.d(tt,{H0:()=>ye,wA:()=>j,zt:()=>Ce});var v=G(5861),te=G(2090);class j{constructor(ce,ge,Ne){this.name=ce,this.instanceFactory=ge,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Pe="[DEFAULT]";class Ce{constructor(ce,ge){this.name=ce,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const ge=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(ge)){const Ne=new te.BH;if(this.instancesDeferred.set(ge,Ne),this.isInitialized(ge)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ge});at&&Ne.resolve(at)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(ce){var ge;const Ne=this.normalizeInstanceIdentifier(ce?.identifier),at=null!==(ge=ce?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(gt){if(at)return null;throw gt}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function $e(qe){return"EAGER"===qe.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch{}for(const[ge,Ne]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ge);try{const gt=this.getOrInitializeService({instanceIdentifier:at});Ne.resolve(gt)}catch{}}}}clearInstance(ce=Pe){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,v.Z)(function*(){const ge=Array.from(ce.instances.values());yield Promise.all([...ge.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...ge.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Pe){return this.instances.has(ce)}getOptions(ce=Pe){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:ge={}}=ce,Ne=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Ne,options:ge});for(const[gt,Pt]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(gt)&&Pt.resolve(at);return at}onInit(ce,ge){var Ne;const at=this.normalizeInstanceIdentifier(ge),gt=null!==(Ne=this.onInitCallbacks.get(at))&&void 0!==Ne?Ne:new Set;gt.add(ce),this.onInitCallbacks.set(at,gt);const Pt=this.instances.get(at);return Pt&&ce(Pt,at),()=>{gt.delete(ce)}}invokeOnInitCallbacks(ce,ge){const Ne=this.onInitCallbacks.get(ge);if(Ne)for(const at of Ne)try{at(ce,ge)}catch{}}getOrInitializeService({instanceIdentifier:ce,options:ge={}}){let Ne=this.instances.get(ce);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(qe=ce,qe===Pe?void 0:qe),options:ge}),this.instances.set(ce,Ne),this.instancesOptions.set(ce,ge),this.invokeOnInitCallbacks(Ne,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Ne)}catch{}var qe;return Ne||null}normalizeInstanceIdentifier(ce=Pe){return this.component?this.component.multipleInstances?ce:Pe:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const ge=this.getProvider(ce.name);if(ge.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);ge.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const ge=new Ce(ce,this);return this.providers.set(ce,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(rn,tt,G)=>{G.d(tt,{Am:()=>qe,Ub:()=>ye,Yd:()=>$e,in:()=>te});const v=[];var te=(()=>{return(ce=te||(te={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",te;var ce})();const j={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Pe=te.INFO,Ce={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Fe=(ce,ge,...Ne)=>{if(ge<ce.logLevel)return;const at=(new Date).toISOString(),gt=Ce[ge];if(!gt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[gt](`[${at}]  ${ce.name}:`,...Ne)};class $e{constructor(ge){this.name=ge,this._logLevel=Pe,this._logHandler=Fe,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in te))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?j[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...ge),this._logHandler(this,te.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...ge),this._logHandler(this,te.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,te.INFO,...ge),this._logHandler(this,te.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,te.WARN,...ge),this._logHandler(this,te.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...ge),this._logHandler(this,te.ERROR,...ge)}}function ye(ce){v.forEach(ge=>{ge.setLogLevel(ce)})}function qe(ce,ge){for(const Ne of v){let at=null;ge&&ge.level&&(at=j[ge.level]),Ne.userLogHandler=null===ce?null:(gt,Pt,...jt)=>{const ot=jt.map(mt=>{if(null==mt)return null;if("string"==typeof mt)return mt;if("number"==typeof mt||"boolean"==typeof mt)return mt.toString();if(mt instanceof Error)return mt.message;try{return JSON.stringify(mt)}catch{return null}}).filter(mt=>mt).join(" ");Pt>=(at??gt.logLevel)&&ce({level:te[Pt].toLowerCase(),message:ot,args:jt,type:gt.name})}}}},259:(rn,tt,G)=>{G.d(tt,{C6:()=>v.getApps,KN:()=>v.registerVersion,Mq:()=>v.getApp,ZF:()=>v.initializeApp});var v=G(6881);(0,v.registerVersion)("firebase","9.23.0","app")},4322:(rn,tt,G)=>{G.d(tt,{hJ:()=>v.V,v0:()=>v.o,e5:()=>v.a9,rh:()=>v.c,ck:()=>v.ai});var v=G(1389);G(2090),G(6881),G(1877),G(4859)},9260:(rn,tt,G)=>{G.d(tt,{Z:()=>v.Z});var v=G(3942);v.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(rn,tt,G)=>{G.r(tt);var v=G(5861),te=G(3942),j=G(1389),Pe=G(2090),$e=(G(6881),G(1877),G(4859));function ye(){return window}const qe=2e3;function ge(){return ge=(0,v.Z)(function*(oe,he,ne){var Se;const{BuildInfo:me}=ye();(0,j.as)(he.sessionId,"AuthEvent did not contain a session ID");const ve=yield function mt(oe){return Et.apply(this,arguments)}(he.sessionId),pe={};return(0,j.at)()?pe.ibi=me.packageName:(0,j.au)()?pe.apn=me.packageName:(0,j.av)(oe,"operation-not-supported-in-this-environment"),me.displayName&&(pe.appDisplayName=me.displayName),pe.sessionId=ve,(0,j.aw)(oe,ne,he.type,void 0,null!==(Se=he.eventId)&&void 0!==Se?Se:void 0,pe)}),ge.apply(this,arguments)}function at(){return(at=(0,v.Z)(function*(oe){const{BuildInfo:he}=ye(),ne={};(0,j.at)()?ne.iosBundleId=he.packageName:(0,j.au)()?ne.androidPackageName=he.packageName:(0,j.av)(oe,"operation-not-supported-in-this-environment"),yield(0,j.ax)(oe,ne)})).apply(this,arguments)}function jt(){return(jt=(0,v.Z)(function*(oe,he,ne){const{cordova:Se}=ye();let me=()=>{};try{yield new Promise((ve,pe)=>{let Le=null;function nt(){var Dn;ve();const xr=null===(Dn=Se.plugins.browsertab)||void 0===Dn?void 0:Dn.close;"function"==typeof xr&&xr(),"function"==typeof ne?.close&&ne.close()}function St(){Le||(Le=window.setTimeout(()=>{pe((0,j.az)(oe,"redirect-cancelled-by-user"))},qe))}function mn(){"visible"===document?.visibilityState&&St()}he.addPassiveListener(nt),document.addEventListener("resume",St,!1),(0,j.au)()&&document.addEventListener("visibilitychange",mn,!1),me=()=>{he.removePassiveListener(nt),document.removeEventListener("resume",St,!1),document.removeEventListener("visibilitychange",mn,!1),Le&&window.clearTimeout(Le)}})}finally{me()}})).apply(this,arguments)}function Et(){return(Et=(0,v.Z)(function*(oe){const he=function _t(oe){if((0,j.as)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(oe);const he=new ArrayBuffer(oe.length),ne=new Uint8Array(he);for(let Se=0;Se<oe.length;Se++)ne[Se]=oe.charCodeAt(Se);return ne}(oe),ne=yield crypto.subtle.digest("SHA-256",he);return Array.from(new Uint8Array(ne)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ze=20;class Oe extends j.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(he=>{this.resolveInialized=he})}addPassiveListener(he){this.passiveListeners.add(he)}removePassiveListener(he){this.passiveListeners.delete(he)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(he){return this.resolveInialized(),this.passiveListeners.forEach(ne=>ne(he)),super.onEvent(he)}initialized(){var he=this;return(0,v.Z)(function*(){yield he.initPromise})()}}function lt(oe){return q.apply(this,arguments)}function q(){return(q=(0,v.Z)(function*(oe){const he=yield Ut()._get(Lt(oe));return he&&(yield Ut()._remove(Lt(oe))),he})).apply(this,arguments)}function fn(){const oe=[],he="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ne=0;ne<Ze;ne++){const Se=Math.floor(Math.random()*he.length);oe.push(he.charAt(Se))}return oe.join("")}function Ut(){return(0,j.aC)(j.b)}function Lt(oe){return(0,j.aD)("authEvent",oe.config.apiKey,oe.name)}function Er(oe){if(!oe?.includes("?"))return{};const[he,...ne]=oe.split("?");return(0,Pe.zd)(ne.join("?"))}const Be=class bn{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(he){var ne=this;return(0,v.Z)(function*(){const Se=he._key();let me=ne.eventManagers.get(Se);return me||(me=new Oe(he),ne.eventManagers.set(Se,me),ne.attachCallbackListeners(he,me)),me})()}_openPopup(he){(0,j.av)(he,"operation-not-supported-in-this-environment")}_openRedirect(he,ne,Se,me){var ve=this;return(0,v.Z)(function*(){!function ot(oe){var he,ne,Se,me,ve,pe,Le,nt,St,mn;const Dn=ye();(0,j.aA)("function"==typeof(null===(he=Dn?.universalLinks)||void 0===he?void 0:he.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.aA)(typeof(null===(ne=Dn?.BuildInfo)||void 0===ne?void 0:ne.packageName)<"u",oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.aA)("function"==typeof(null===(ve=null===(me=null===(Se=Dn?.cordova)||void 0===Se?void 0:Se.plugins)||void 0===me?void 0:me.browsertab)||void 0===ve?void 0:ve.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(nt=null===(Le=null===(pe=Dn?.cordova)||void 0===pe?void 0:pe.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===nt?void 0:nt.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(mn=null===(St=Dn?.cordova)||void 0===St?void 0:St.InAppBrowser)||void 0===mn?void 0:mn.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(he);const pe=yield ve._initialize(he);yield pe.initialized(),pe.resetRedirect(),(0,j.aG)(),yield ve._originValidation(he);const Le=function rt(oe,he,ne=null){return{type:he,eventId:ne,urlResponse:null,sessionId:fn(),postBody:null,tenantId:oe.tenantId,error:(0,j.az)(oe,"no-auth-event")}}(he,Se,me);yield function Dt(oe,he){return Ut()._set(Lt(oe),he)}(he,Le);const nt=yield function ce(oe,he,ne){return ge.apply(this,arguments)}(he,Le,ne),St=yield function gt(oe){const{cordova:he}=ye();return new Promise(ne=>{he.plugins.browsertab.isAvailable(Se=>{let me=null;Se?he.plugins.browsertab.openUrl(oe):me=he.InAppBrowser.open(oe,(0,j.ay)()?"_blank":"_system","location=yes"),ne(me)})})}(nt);return function Pt(oe,he,ne){return jt.apply(this,arguments)}(he,pe,St)})()}_isIframeWebStorageSupported(he,ne){throw new Error("Method not implemented.")}_originValidation(he){const ne=he._key();return this.originValidationPromises[ne]||(this.originValidationPromises[ne]=function Ne(oe){return at.apply(this,arguments)}(he)),this.originValidationPromises[ne]}attachCallbackListeners(he,ne){const{universalLinks:Se,handleOpenURL:me,BuildInfo:ve}=ye(),pe=setTimeout((0,v.Z)(function*(){yield lt(he),ne.onEvent(je())}),500),Le=function(){var mn=(0,v.Z)(function*(Dn){clearTimeout(pe);const xr=yield lt(he);let Li=null;xr&&Dn?.url&&(Li=function Bt(oe,he){var ne,Se;const me=function ai(oe){const he=Er(oe),ne=he.link?decodeURIComponent(he.link):void 0,Se=Er(ne).link,me=he.deep_link_id?decodeURIComponent(he.deep_link_id):void 0;return Er(me).link||me||Se||ne||oe}(he);if(me.includes("/__/auth/callback")){const ve=Er(me),pe=ve.firebaseError?function Vt(oe){try{return JSON.parse(oe)}catch{return null}}(decodeURIComponent(ve.firebaseError)):null,Le=null===(Se=null===(ne=pe?.code)||void 0===ne?void 0:ne.split("auth/"))||void 0===Se?void 0:Se[1],nt=Le?(0,j.az)(Le):null;return nt?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:nt,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:me,postBody:null}}return null}(xr,Dn.url)),ne.onEvent(Li||je())});return function(xr){return mn.apply(this,arguments)}}();typeof Se<"u"&&"function"==typeof Se.subscribe&&Se.subscribe(null,Le);const nt=me,St=`${ve.packageName.toLowerCase()}://`;ye().handleOpenURL=function(){var mn=(0,v.Z)(function*(Dn){if(Dn.toLowerCase().startsWith(St)&&Le({url:Dn}),"function"==typeof nt)try{nt(Dn)}catch(xr){console.error(xr)}});return function(Dn){return mn.apply(this,arguments)}}()}};function je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.az)("no-auth-event")}}const Tt=1e3;function $t(){var oe;return(null===(oe=self?.location)||void 0===oe?void 0:oe.protocol)||null}function cn(oe=(0,Pe.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()&&"capacitor:"!==$t()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){try{const oe=self.localStorage,he=j.aL();if(oe)return oe.setItem(he,"1"),oe.removeItem(he),!function Fn(oe=(0,Pe.z$)()){return function zn(){return(0,Pe.w1)()&&11===document?.documentMode}()||function nr(oe=(0,Pe.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,Pe.hl)()}catch{return Gt()&&(0,Pe.hl)()}return!1}function Gt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ar(){return(function Zt(){return"http:"===$t()||"https:"===$t()}()||(0,Pe.ru)()||cn())&&!function yn(){return(0,Pe.b$)()||(0,Pe.UG)()}()&&Sr()&&!Gt()}function fr(){return cn()&&typeof document<"u"}function Wn(){return(Wn=(0,v.Z)(function*(){return!!fr()&&new Promise(oe=>{const he=setTimeout(()=>{oe(!1)},Tt);document.addEventListener("deviceready",()=>{clearTimeout(he),oe(!0)})})})).apply(this,arguments)}const In={LOCAL:"local",NONE:"none",SESSION:"session"},gi=j.aA,qr="persistence";function Ki(oe){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,v.Z)(function*(oe){yield oe._initializationPromise;const he=sn(),ne=j.aD(qr,oe.config.apiKey,oe.name);he&&he.setItem(ne,oe._getPersistence())})).apply(this,arguments)}function sn(){var oe;try{return(null===(oe=function Yt(){return typeof window<"u"?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch{return null}}const Rn=j.aA;class li{constructor(){this.browserResolver=j.aC(j.k),this.cordovaResolver=j.aC(Be),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(he){var ne=this;return(0,v.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._initialize(he)})()}_openPopup(he,ne,Se,me){var ve=this;return(0,v.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openPopup(he,ne,Se,me)})()}_openRedirect(he,ne,Se,me){var ve=this;return(0,v.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openRedirect(he,ne,Se,me)})()}_isIframeWebStorageSupported(he,ne){this.assertedUnderlyingResolver._isIframeWebStorageSupported(he,ne)}_originValidation(he){return this.assertedUnderlyingResolver._originValidation(he)}get _shouldInitProactively(){return fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var he=this;return(0,v.Z)(function*(){if(he.underlyingResolver)return;const ne=yield function br(){return Wn.apply(this,arguments)}();he.underlyingResolver=ne?he.cordovaResolver:he.browserResolver})()}}function wi(oe){return oe.unwrap()}function ui(oe){return ci(oe)}function ci(oe){const{_tokenResponse:he}=oe instanceof Pe.ZR?oe.customData:oe;if(!he)return null;if(!(oe instanceof Pe.ZR)&&"temporaryProof"in he&&"phoneNumber"in he)return j.P.credentialFromResult(oe);const ne=he.providerId;if(!ne||ne===j.p.PASSWORD)return null;let Se;switch(ne){case j.p.GOOGLE:Se=j.V;break;case j.p.FACEBOOK:Se=j.U;break;case j.p.GITHUB:Se=j.W;break;case j.p.TWITTER:Se=j.Z;break;default:const{oauthIdToken:me,oauthAccessToken:ve,oauthTokenSecret:pe,pendingToken:Le,nonce:nt}=he;return ve||pe||me||Le?Le?ne.startsWith("saml.")?j.aO._create(ne,Le):j.L._fromParams({providerId:ne,signInMethod:ne,pendingToken:Le,idToken:me,accessToken:ve}):new j.X(ne).credential({idToken:me,accessToken:ve,rawNonce:nt}):null}return oe instanceof Pe.ZR?Se.credentialFromError(oe):Se.credentialFromResult(oe)}function Xn(oe,he){return he.catch(ne=>{throw ne instanceof Pe.ZR&&function Lr(oe,he){var ne;const Se=null===(ne=he.customData)||void 0===ne?void 0:ne._tokenResponse;if("auth/multi-factor-auth-required"===he?.code)he.resolver=new Qt(oe,j.aq(oe,he));else if(Se){const me=ci(he),ve=he;me&&(ve.credential=me,ve.tenantId=Se.tenantId||void 0,ve.email=Se.email||void 0,ve.phoneNumber=Se.phoneNumber||void 0)}}(oe,ne),ne}).then(ne=>{const me=ne.user;return{operationType:ne.operationType,credential:ui(ne),additionalUserInfo:j.ao(ne),user:qt.getOrCreate(me)}})}function Nr(oe,he){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,v.Z)(function*(oe,he){const ne=yield he;return{verificationId:ne.verificationId,confirm:Se=>Xn(oe,ne.confirm(Se))}})).apply(this,arguments)}class Qt{constructor(he,ne){this.resolver=ne,this.auth=function Br(oe){return oe.wrapped()}(he)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(he){return Xn(wi(this.auth),this.resolver.resolveSignIn(he))}}class qt{constructor(he){this._delegate=he,this.multiFactor=j.ar(he)}static getOrCreate(he){return qt.USER_MAP.has(he)||qt.USER_MAP.set(he,new qt(he)),qt.USER_MAP.get(he)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(he){return this._delegate.getIdTokenResult(he)}getIdToken(he){return this._delegate.getIdToken(he)}linkAndRetrieveDataWithCredential(he){return this.linkWithCredential(he)}linkWithCredential(he){var ne=this;return(0,v.Z)(function*(){return Xn(ne.auth,j.a0(ne._delegate,he))})()}linkWithPhoneNumber(he,ne){var Se=this;return(0,v.Z)(function*(){return Nr(Se.auth,j.l(Se._delegate,he,ne))})()}linkWithPopup(he){var ne=this;return(0,v.Z)(function*(){return Xn(ne.auth,j.d(ne._delegate,he,li))})()}linkWithRedirect(he){var ne=this;return(0,v.Z)(function*(){return yield Ki(j.aH(ne.auth)),j.g(ne._delegate,he,li)})()}reauthenticateAndRetrieveDataWithCredential(he){return this.reauthenticateWithCredential(he)}reauthenticateWithCredential(he){var ne=this;return(0,v.Z)(function*(){return Xn(ne.auth,j.a1(ne._delegate,he))})()}reauthenticateWithPhoneNumber(he,ne){return Nr(this.auth,j.r(this._delegate,he,ne))}reauthenticateWithPopup(he){return Xn(this.auth,j.e(this._delegate,he,li))}reauthenticateWithRedirect(he){var ne=this;return(0,v.Z)(function*(){return yield Ki(j.aH(ne.auth)),j.h(ne._delegate,he,li)})()}sendEmailVerification(he){return j.ae(this._delegate,he)}unlink(he){var ne=this;return(0,v.Z)(function*(){return yield j.an(ne._delegate,he),ne})()}updateEmail(he){return j.aj(this._delegate,he)}updatePassword(he){return j.ak(this._delegate,he)}updatePhoneNumber(he){return j.u(this._delegate,he)}updateProfile(he){return j.ai(this._delegate,he)}verifyBeforeUpdateEmail(he,ne){return j.af(this._delegate,he,ne)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qt.USER_MAP=new WeakMap;const ri=j.aA;let Vr=(()=>{class oe{constructor(ne,Se){if(this.app=ne,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=ne.options;ri(me,"invalid-api-key",{appName:ne.name}),ri(me,"invalid-api-key",{appName:ne.name});const ve=typeof window<"u"?li:void 0;this._delegate=Se.initialize({options:{persistence:mi(me,ne.name),popupRedirectResolver:ve}}),this._delegate._updateErrorMap(j.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ne){this._delegate.languageCode=ne}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ne){this._delegate.tenantId=ne}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ne,Se){j.I(this._delegate,ne,Se)}applyActionCode(ne){return j.a5(this._delegate,ne)}checkActionCode(ne){return j.a6(this._delegate,ne)}confirmPasswordReset(ne,Se){return j.a4(this._delegate,ne,Se)}createUserWithEmailAndPassword(ne,Se){var me=this;return(0,v.Z)(function*(){return Xn(me._delegate,j.a8(me._delegate,ne,Se))})()}fetchProvidersForEmail(ne){return this.fetchSignInMethodsForEmail(ne)}fetchSignInMethodsForEmail(ne){return j.ad(this._delegate,ne)}isSignInWithEmailLink(ne){return j.ab(this._delegate,ne)}getRedirectResult(){var ne=this;return(0,v.Z)(function*(){ri(Ar(),ne._delegate,"operation-not-supported-in-this-environment");const Se=yield j.j(ne._delegate,li);return Se?Xn(ne._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(ne){!function Ye(oe,he){(0,j.aH)(oe)._logFramework(he)}(this._delegate,ne)}onAuthStateChanged(ne,Se,me){const{next:ve,error:pe,complete:Le}=Pi(ne,Se,me);return this._delegate.onAuthStateChanged(ve,pe,Le)}onIdTokenChanged(ne,Se,me){const{next:ve,error:pe,complete:Le}=Pi(ne,Se,me);return this._delegate.onIdTokenChanged(ve,pe,Le)}sendSignInLinkToEmail(ne,Se){return j.aa(this._delegate,ne,Se)}sendPasswordResetEmail(ne,Se){return j.a3(this._delegate,ne,Se||void 0)}setPersistence(ne){var Se=this;return(0,v.Z)(function*(){let me;switch(function Qn(oe,he){gi(Object.values(In).includes(he),oe,"invalid-persistence-type"),(0,Pe.b$)()?gi(he!==In.SESSION,oe,"unsupported-persistence-type"):(0,Pe.UG)()?gi(he===In.NONE,oe,"unsupported-persistence-type"):Gt()?gi(he===In.NONE||he===In.LOCAL&&(0,Pe.hl)(),oe,"unsupported-persistence-type"):gi(he===In.NONE||Sr(),oe,"unsupported-persistence-type")}(Se._delegate,ne),ne){case In.SESSION:me=j.a;break;case In.LOCAL:me=(yield j.aC(j.i)._isAvailable())?j.i:j.b;break;case In.NONE:me=j.N;break;default:return j.av("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(ne){return this.signInWithCredential(ne)}signInAnonymously(){return Xn(this._delegate,j._(this._delegate))}signInWithCredential(ne){return Xn(this._delegate,j.$(this._delegate,ne))}signInWithCustomToken(ne){return Xn(this._delegate,j.a2(this._delegate,ne))}signInWithEmailAndPassword(ne,Se){return Xn(this._delegate,j.a9(this._delegate,ne,Se))}signInWithEmailLink(ne,Se){return Xn(this._delegate,j.ac(this._delegate,ne,Se))}signInWithPhoneNumber(ne,Se){return Nr(this._delegate,j.s(this._delegate,ne,Se))}signInWithPopup(ne){var Se=this;return(0,v.Z)(function*(){return ri(Ar(),Se._delegate,"operation-not-supported-in-this-environment"),Xn(Se._delegate,j.c(Se._delegate,ne,li))})()}signInWithRedirect(ne){var Se=this;return(0,v.Z)(function*(){return ri(Ar(),Se._delegate,"operation-not-supported-in-this-environment"),yield Ki(Se._delegate),j.f(Se._delegate,ne,li)})()}updateCurrentUser(ne){return this._delegate.updateCurrentUser(ne)}verifyPasswordResetCode(ne){return j.a7(this._delegate,ne)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=In,oe})();function Pi(oe,he,ne){let Se=oe;"function"!=typeof oe&&({next:Se,error:he,complete:ne}=oe);const me=Se;return{next:pe=>me(pe&&qt.getOrCreate(pe)),error:he,complete:ne}}function mi(oe,he){const ne=function xn(oe,he){const ne=sn();if(!ne)return[];const Se=j.aD(qr,oe,he);switch(ne.getItem(Se)){case In.NONE:return[j.N];case In.LOCAL:return[j.i,j.a];case In.SESSION:return[j.a];default:return[]}}(oe,he);if(typeof self<"u"&&!ne.includes(j.i)&&ne.push(j.i),typeof window<"u")for(const Se of[j.b,j.a])ne.includes(Se)||ne.push(Se);return ne.includes(j.N)||ne.push(j.N),ne}class qi{constructor(){this.providerId="phone",this._delegate=new j.P(wi(te.Z.auth()))}static credential(he,ne){return j.P.credential(he,ne)}verifyPhoneNumber(he,ne){return this._delegate.verifyPhoneNumber(he,ne)}unwrap(){return this._delegate}}qi.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,qi.PROVIDER_ID=j.P.PROVIDER_ID;const Ni=j.aA;class yi{constructor(he,ne,Se=te.Z.app()){var me;Ni(null===(me=Se.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new j.R(he,ne,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function we(oe){oe.INTERNAL.registerComponent(new $e.wA("auth-compat",he=>{const ne=he.getProvider("app-compat").getImmediate(),Se=he.getProvider("auth");return new Vr(ne,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.Q,FacebookAuthProvider:j.U,GithubAuthProvider:j.W,GoogleAuthProvider:j.V,OAuthProvider:j.X,SAMLAuthProvider:j.Y,PhoneAuthProvider:qi,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:yi,TwitterAuthProvider:j.Z,Auth:Vr,AuthCredential:j.J,Error:Pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.4.2")}(te.Z)},5861:(rn,tt,G)=>{function v(j,Pe,Ce,Fe,$e,ye,qe){try{var ce=j[ye](qe),ge=ce.value}catch(Ne){return void Ce(Ne)}ce.done?Pe(ge):Promise.resolve(ge).then(Fe,$e)}function te(j){return function(){var Pe=this,Ce=arguments;return new Promise(function(Fe,$e){var ye=j.apply(Pe,Ce);function qe(ge){v(ye,Fe,$e,qe,ce,"next",ge)}function ce(ge){v(ye,Fe,$e,qe,ce,"throw",ge)}qe(void 0)})}}G.d(tt,{Z:()=>te})},7582:(rn,tt,G)=>{function Pe(Be,je){var Ye={};for(var ke in Be)Object.prototype.hasOwnProperty.call(Be,ke)&&je.indexOf(ke)<0&&(Ye[ke]=Be[ke]);if(null!=Be&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(ke=Object.getOwnPropertySymbols(Be);dt<ke.length;dt++)je.indexOf(ke[dt])<0&&Object.prototype.propertyIsEnumerable.call(Be,ke[dt])&&(Ye[ke[dt]]=Be[ke[dt]])}return Ye}function Ne(Be,je,Ye,ke){return new(Ye||(Ye=Promise))(function(Tt,$t){function Zt(zn){try{yn(ke.next(zn))}catch(nr){$t(nr)}}function cn(zn){try{yn(ke.throw(zn))}catch(nr){$t(nr)}}function yn(zn){zn.done?Tt(zn.value):function dt(Tt){return Tt instanceof Ye?Tt:new Ye(function($t){$t(Tt)})}(zn.value).then(Zt,cn)}yn((ke=ke.apply(Be,je||[])).next())})}function Ze(Be){return this instanceof Ze?(this.v=Be,this):new Ze(Be)}function Oe(Be,je,Ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,ke=Ye.apply(Be,je||[]),Tt=[];return dt={},$t("next"),$t("throw"),$t("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function $t(Fn){ke[Fn]&&(dt[Fn]=function(Sr){return new Promise(function(Gt,Ar){Tt.push([Fn,Sr,Gt,Ar])>1||Zt(Fn,Sr)})})}function Zt(Fn,Sr){try{!function cn(Fn){Fn.value instanceof Ze?Promise.resolve(Fn.value.v).then(yn,zn):nr(Tt[0][2],Fn)}(ke[Fn](Sr))}catch(Gt){nr(Tt[0][3],Gt)}}function yn(Fn){Zt("next",Fn)}function zn(Fn){Zt("throw",Fn)}function nr(Fn,Sr){Fn(Sr),Tt.shift(),Tt.length&&Zt(Tt[0][0],Tt[0][1])}}function Dt(Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,je=Be[Symbol.asyncIterator];return je?je.call(Be):(Be=function jt(Be){var je="function"==typeof Symbol&&Symbol.iterator,Ye=je&&Be[je],ke=0;if(Ye)return Ye.call(Be);if(Be&&"number"==typeof Be.length)return{next:function(){return Be&&ke>=Be.length&&(Be=void 0),{value:Be&&Be[ke++],done:!Be}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Be),Ye={},ke("next"),ke("throw"),ke("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye);function ke(Tt){Ye[Tt]=Be[Tt]&&function($t){return new Promise(function(Zt,cn){!function dt(Tt,$t,Zt,cn){Promise.resolve(cn).then(function(yn){Tt({value:yn,done:Zt})},$t)}(Zt,cn,($t=Be[Tt]($t)).done,$t.value)})}}}G.d(tt,{FC:()=>Oe,KL:()=>Dt,_T:()=>Pe,mG:()=>Ne,qq:()=>Ze}),"function"==typeof SuppressedError&&SuppressedError}},rn=>{rn(rn.s=5684)}]);