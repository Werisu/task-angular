"use strict";(self.webpackChunktask_angular=self.webpackChunktask_angular||[]).push([[179],{2313:(fn,lt,K)=>{K.d(lt,{nm:()=>Ur});var _=K(4976),Se=(K(4650),K(3692),K(259),K(5861)),je=K(6881),Ge=K(4859),Ie=K(2090),Qe=K(1877);const he=new Map,we={activated:!1,tokenObservers:[]},Oe={initialized:!1,enabled:!1};function dt(Je){return he.get(Je)||Object.assign({},we)}function Mt(){return Oe}const qt="https://content-firebaseappcheck.googleapis.com/v1",At="exchangeDebugToken",It={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Pe{constructor(He,$e,St,Ht,Kn){if(this.operation=He,this.retryPolicy=$e,this.getWaitDuration=St,this.lowerBound=Ht,this.upperBound=Kn,this.pending=null,this.nextErrorWaitInterval=Ht,Ht>Kn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(He){var $e=this;return(0,Se.Z)(function*(){$e.stop();try{$e.pending=new Ie.BH,yield function at(Je){return new Promise(He=>{setTimeout(He,Je)})}($e.getNextRun(He)),$e.pending.resolve(),yield $e.pending.promise,$e.pending=new Ie.BH,yield $e.operation(),$e.pending.resolve(),yield $e.pending.promise,$e.process(!0).catch(()=>{})}catch(St){$e.retryPolicy(St)?$e.process(!1).catch(()=>{}):$e.stop()}})()}getNextRun(He){if(He)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const $e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),$e}}}const gt=new Ie.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $t(Je){if(!dt(Je).activated)throw gt.create("use-before-activation",{appName:Je.name})}function Zt(Je,He){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Se.Z)(function*({url:Je,body:He},$e){const St={"Content-Type":"application/json"},Ht=$e.getImmediate({optional:!0});if(Ht){const Ss=yield Ht.getHeartbeatsHeader();Ss&&(St["X-Firebase-Client"]=Ss)}const Kn={method:"POST",body:JSON.stringify(He),headers:St};let Sr,tr;try{Sr=yield fetch(Je,Kn)}catch(Ss){throw gt.create("fetch-network-error",{originalErrorMessage:Ss?.message})}if(200!==Sr.status)throw gt.create("fetch-status-error",{httpStatus:Sr.status});try{tr=yield Sr.json()}catch(Ss){throw gt.create("fetch-parse-error",{originalErrorMessage:Ss?.message})}const ti=tr.ttl.match(/^([\d.]+)(s)$/);if(!ti||!ti[2]||isNaN(Number(ti[1])))throw gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${tr.ttl}`});const Is=1e3*Number(ti[1]),Es=Date.now();return{token:tr.token,expireTimeMillis:Es+Is,issuedAtTimeMillis:Es}})).apply(this,arguments)}function Vn(Je,He){const{projectId:$e,appId:St,apiKey:Ht}=Je.options;return{url:`${qt}/projects/${$e}/apps/${St}:${At}?key=${Ht}`,body:{debug_token:He}}}const Jn="firebase-app-check-database",Ke=1,Ye="firebase-app-check-store";let ze=null;function Cn(Je,He){return On.apply(this,arguments)}function On(){return(On=(0,Se.Z)(function*(Je,He){const St=(yield function mt(){return ze||(ze=new Promise((Je,He)=>{try{const $e=indexedDB.open(Jn,Ke);$e.onsuccess=St=>{Je(St.target.result)},$e.onerror=St=>{var Ht;He(gt.create("storage-open",{originalErrorMessage:null===(Ht=St.target.error)||void 0===Ht?void 0:Ht.message}))},$e.onupgradeneeded=St=>{0===St.oldVersion&&St.target.result.createObjectStore(Ye,{keyPath:"compositeKey"})}}catch($e){He(gt.create("storage-open",{originalErrorMessage:$e?.message}))}}),ze)}()).transaction(Ye,"readwrite"),Kn=St.objectStore(Ye).put({compositeKey:Je,value:He});return new Promise((Sr,tr)=>{Kn.onsuccess=ti=>{Sr()},St.onerror=ti=>{var Is;tr(gt.create("storage-set",{originalErrorMessage:null===(Is=ti.target.error)||void 0===Is?void 0:Is.message}))}})})).apply(this,arguments)}const Cr=new Qe.Yd("@firebase/app-check");function Gr(Je,He){return(0,Ie.hl)()?function Qt(Je,He){return Cn(function _r(Je){return`${Je.options.appId}-${Je.name}`}(Je),He)}(Je,He).catch($e=>{Cr.warn(`Failed to write token to IndexedDB. Error: ${$e}`)}):Promise.resolve()}function Hn(){return Mt().enabled}function yi(){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,Se.Z)(function*(){const Je=Mt();if(Je.enabled&&Je.token)return Je.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ri={error:"UNKNOWN_ERROR"};function Yn(Je){return Ie.US.encodeString(JSON.stringify(Je),!1)}function er(Je){return cn.apply(this,arguments)}function cn(){return(cn=(0,Se.Z)(function*(Je,He=!1){const $e=Je.app;$t($e);const St=dt($e);let Kn,Ht=St.token;if(Ht&&!cr(Ht)&&(St.token=void 0,Ht=void 0),!Ht){const ti=yield St.cachedTokenPromise;ti&&(cr(ti)?Ht=ti:yield Gr($e,void 0))}if(!He&&Ht&&cr(Ht))return{token:Ht.token};let tr,Sr=!1;if(Hn()){St.exchangeTokenPromise||(St.exchangeTokenPromise=Zt(Vn($e,yield yi()),Je.heartbeatServiceProvider).finally(()=>{St.exchangeTokenPromise=void 0}),Sr=!0);const ti=yield St.exchangeTokenPromise;return yield Gr($e,ti),St.token=ti,{token:ti.token}}try{St.exchangeTokenPromise||(St.exchangeTokenPromise=St.provider.getToken().finally(()=>{St.exchangeTokenPromise=void 0}),Sr=!0),Ht=yield dt($e).exchangeTokenPromise}catch(ti){"appCheck/throttled"===ti.code?Cr.warn(ti.message):Cr.error(ti),Kn=ti}return Ht?Kn?tr=cr(Ht)?{token:Ht.token,internalError:Kn}:Kr(Kn):(tr={token:Ht.token},St.token=Ht,yield Gr($e,Ht)):tr=Kr(Kn),Sr&&function Xr(Je,He){const $e=dt(Je).tokenObservers;for(const St of $e)try{"EXTERNAL"===St.type&&null!=He.error?St.error(He.error):St.next(He)}catch{}}($e,tr),tr})).apply(this,arguments)}function An(Je){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,Se.Z)(function*(Je){const He=Je.app;$t(He);const{provider:$e}=dt(He);if(Hn()){const St=yield yi(),{token:Ht}=yield Zt(Vn(He,St),Je.heartbeatServiceProvider);return{token:Ht}}{const{token:St}=yield $e.getToken();return{token:St}}})).apply(this,arguments)}function wn(Je,He){const $e=dt(Je),St=$e.tokenObservers.filter(Ht=>Ht.next!==He);0===St.length&&$e.tokenRefresher&&$e.tokenRefresher.isRunning()&&$e.tokenRefresher.stop(),$e.tokenObservers=St}function Qr(Je){const{app:He}=Je,$e=dt(He);let St=$e.tokenRefresher;St||(St=function si(Je){const{app:He}=Je;return new Pe((0,Se.Z)(function*(){let St;if(St=dt(He).token?yield er(Je,!0):yield er(Je),St.error)throw St.error;if(St.internalError)throw St.internalError}),()=>!0,()=>{const $e=dt(He);if($e.token){let St=$e.token.issuedAtTimeMillis+.5*($e.token.expireTimeMillis-$e.token.issuedAtTimeMillis)+3e5;return St=Math.min(St,$e.token.expireTimeMillis-3e5),Math.max(0,St-Date.now())}return 0},It.RETRIAL_MIN_WAIT,It.RETRIAL_MAX_WAIT)}(Je),$e.tokenRefresher=St),!St.isRunning()&&$e.isTokenAutoRefreshEnabled&&St.start()}function cr(Je){return Je.expireTimeMillis-Date.now()>0}function Kr(Je){return{token:Yn(ri),error:Je}}class $n{constructor(He,$e){this.app=He,this.heartbeatServiceProvider=$e}_delete(){const{tokenObservers:He}=dt(this.app);for(const $e of He)wn(this.app,$e.next);return Promise.resolve()}}const yn="app-check-internal";!function zn(){(0,je._registerComponent)(new Ge.wA("app-check",Je=>function Nr(Je,He){return new $n(Je,He)}(Je.getProvider("app").getImmediate(),Je.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Je,He,$e)=>{Je.getProvider(yn).initialize()})),(0,je._registerComponent)(new Ge.wA(yn,Je=>function an(Je){return{getToken:He=>er(Je,He),getLimitedUseToken:()=>An(Je),addTokenListener:He=>function ii(Je,He,$e,St){const{app:Ht}=Je,Kn=dt(Ht);if(Kn.tokenObservers=[...Kn.tokenObservers,{next:$e,error:St,type:He}],Kn.token&&cr(Kn.token)){const tr=Kn.token;Promise.resolve().then(()=>{$e({token:tr.token}),Qr(Je)}).catch(()=>{})}Kn.cachedTokenPromise.then(()=>Qr(Je))}(Je,"INTERNAL",He),removeTokenListener:He=>wn(Je.app,He)}}(Je.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,je.registerVersion)("@firebase/app-check","0.8.0")}();class Ur{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},3692:(fn,lt,K)=>{K.d(lt,{Ot:()=>Le,ZF:()=>ct,hX:()=>dt,z6:()=>Se});var _=K(259),ie=K(4650),z=K(4976);class Le{constructor(Pe){return Pe}}class Se{constructor(){return(0,_.C6)()}}const Ie=new ie.OlP("angularfire2._apps"),Qe={provide:Le,useFactory:function Ge(Ze){return Ze&&1===Ze.length?Ze[0]:new Le((0,_.Mq)())},deps:[[new ie.FiY,Ie]]},he={provide:Se,deps:[[new ie.FiY,Ie]]};function we(Ze){return(Pe,at)=>{const Lt=Pe.runOutsideAngular(()=>Ze(at));return new Le(Lt)}}let Oe=(()=>{class Ze{constructor(at){(0,_.KN)("angularfire",z.q4.full,"core"),(0,_.KN)("angularfire",z.q4.full,"app"),(0,_.KN)("angular",ie.q4F.full,at.toString())}}return Ze.\u0275fac=function(at){return new(at||Ze)(ie.LFG(ie.Lbi))},Ze.\u0275mod=ie.oAB({type:Ze}),Ze.\u0275inj=ie.cJS({providers:[Qe,he]}),Ze})();function dt(Ze,...Pe){return{ngModule:Oe,providers:[{provide:Ie,useFactory:we(Ze),multi:!0,deps:[ie.R0b,ie.zs3,z.HU,...Pe]}]}}const ct=(0,z.u3)(_.ZF,!0)},7158:(fn,lt,K)=>{K.d(lt,{AR:()=>ct,SF:()=>An,ck:()=>Qr,dh:()=>Qe,e5:()=>yi,gQ:()=>ii,gx:()=>Ie,rh:()=>ri,s:()=>Yr,v0:()=>Zt});var _=K(4976),ie=K(4650),z=K(3692),Le=K(259),Se=K(2313),je=K(4322);class Ie{constructor($n){return $n}}class Qe{constructor(){return(0,_.vb)("auth")}}const we=new ie.OlP("angularfire2.auth-instances");function dt(Kr){return($n,Nr)=>{const an=$n.runOutsideAngular(()=>Kr(Nr));return new Ie(an)}}const ht={provide:Qe,deps:[[new ie.FiY,we]]},Mt={provide:Ie,useFactory:function Oe(Kr,$n){const Nr=(0,_.JM)("auth",Kr,$n);return Nr&&new Ie(Nr)},deps:[[new ie.FiY,we],z.Ot]};let qt=(()=>{class Kr{constructor(){(0,Le.KN)("angularfire",_.q4.full,"auth")}}return Kr.\u0275fac=function(Nr){return new(Nr||Kr)},Kr.\u0275mod=ie.oAB({type:Kr}),Kr.\u0275inj=ie.cJS({providers:[Mt,ht]}),Kr})();function ct(Kr,...$n){return{ngModule:qt,providers:[{provide:we,useFactory:dt(Kr),multi:!0,deps:[ie.R0b,ie.zs3,_.HU,z.z6,[new ie.FiY,Se.nm],...$n]}]}}const Zt=(0,_.u3)(je.v0,!0),yi=(0,_.u3)(je.e5,!0),ri=(0,_.u3)(je.rh,!0),An=(0,_.u3)(je.SF,!0),Yr=(0,_.u3)(je.s,!0),ii=(0,_.u3)(je.gQ,!0),Qr=(0,_.u3)(je.ck,!0)},1205:(fn,lt,K)=>{K.d(lt,{zQ:()=>Wr,ww:()=>br,rT:()=>on,f7:()=>Zt,L6:()=>Y,_Q:()=>$t,lh:()=>Yt,Qv:()=>gt,nw:()=>Gt});var _=K(4650),ie=K(7579),z=K(9646),Le=K(9751),Se=K(8996),je=K(6451),Ge=K(5363),Ie=K(3900),Qe=K(4004),he=K(6063);class we extends ie.x{constructor(Jn=1/0,Ke=1/0,Ye=he.l){super(),this._bufferSize=Jn,this._windowTime=Ke,this._timestampProvider=Ye,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ke===1/0,this._bufferSize=Math.max(1,Jn),this._windowTime=Math.max(1,Ke)}next(Jn){const{isStopped:Ke,_buffer:Ye,_infiniteTimeWindow:ut,_timestampProvider:ze,_windowTime:mt}=this;Ke||(Ye.push(Jn),!ut&&Ye.push(ze.now()+mt)),this._trimBuffer(),super.next(Jn)}_subscribe(Jn){this._throwIfClosed(),this._trimBuffer();const Ke=this._innerSubscribe(Jn),{_infiniteTimeWindow:Ye,_buffer:ut}=this,ze=ut.slice();for(let mt=0;mt<ze.length&&!Jn.closed;mt+=Ye?1:2)Jn.next(ze[mt]);return this._checkFinalizedStatuses(Jn),Ke}_trimBuffer(){const{_bufferSize:Jn,_timestampProvider:Ke,_buffer:Ye,_infiniteTimeWindow:ut}=this,ze=(ut?1:2)*Jn;if(Jn<1/0&&ze<Ye.length&&Ye.splice(0,Ye.length-ze),!ut){const mt=Ke.now();let Ot=0;for(let Qt=1;Qt<Ye.length&&Ye[Qt]<=mt;Qt+=2)Ot=Qt;Ot&&Ye.splice(0,Ot+1)}}}var Oe=K(3099);function dt(Vn,Jn,Ke){let Ye,ut=!1;return Vn&&"object"==typeof Vn?({bufferSize:Ye=1/0,windowTime:Jn=1/0,refCount:ut=!1,scheduler:Ke}=Vn):Ye=Vn??1/0,(0,Oe.B)({connector:()=>new we(Ye,Jn,Ke),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ut})}var ht=K(590),Mt=K(576);function qt(Vn,Jn){return(0,Mt.m)(Jn)?(0,Ie.w)(()=>Vn,Jn):(0,Ie.w)(()=>Vn)}var ct=K(9468),_t=K(9300),At=K(4976),It=K(2011),Ze=K(6895),Pe=K(2313),at=K(9260);const gt=new _.OlP("angularfire2.auth.use-emulator"),Y=new _.OlP("angularfire2.auth.settings"),$t=new _.OlP("angularfire2.auth.tenant-id"),on=new _.OlP("angularfire2.auth.langugage-code"),Yt=new _.OlP("angularfire2.auth.use-device-language"),Zt=new _.OlP("angularfire.auth.persistence"),Gt=(Vn,Jn,Ke,Ye,ut,ze,mt,Ot)=>(0,It.cc)(`${Vn.name}.auth`,"AngularFireAuth",Vn.name,()=>{const Qt=Jn.runOutsideAngular(()=>Vn.auth());if(Ke&&Qt.useEmulator(...Ke),Ye&&(Qt.tenantId=Ye),Qt.languageCode=ut,ze&&Qt.useDeviceLanguage(),mt)for(const[Rt,nn]of Object.entries(mt))Qt.settings[Rt]=nn;return Ot&&Qt.setPersistence(Ot),Qt},[Ke,Ye,ut,ze,mt,Ot]);let Wr=(()=>{class Vn{constructor(Ke,Ye,ut,ze,mt,Ot,Qt,Rt,nn,Cn,On,gr){const Qn=new ie.x,_r=(0,z.of)(void 0).pipe((0,Ge.Q)(mt.outsideAngular),(0,Ie.w)(()=>ze.runOutsideAngular(()=>Promise.resolve().then(K.bind(K,9568)))),(0,Qe.U)(()=>(0,It.on)(Ke,ze,Ye)),(0,Qe.U)(Cr=>Gt(Cr,ze,Ot,Rt,nn,Cn,Qt,On)),dt({bufferSize:1,refCount:!1}));if((0,Ze.PM)(ut))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,z.of)(null);else{_r.pipe((0,ht.P)()).subscribe();const Hr=_r.pipe((0,Ie.w)(Pn=>Pn.getRedirectResult().then(Xt=>Xt,()=>null)),At.iC,dt({bufferSize:1,refCount:!1})),Er=_r.pipe((0,Ie.w)(Pn=>new Le.y(Xt=>({unsubscribe:ze.runOutsideAngular(()=>Pn.onAuthStateChanged(Hn=>Xt.next(Hn),Hn=>Xt.error(Hn),()=>Xt.complete()))})))),Gr=_r.pipe((0,Ie.w)(Pn=>new Le.y(Xt=>({unsubscribe:ze.runOutsideAngular(()=>Pn.onIdTokenChanged(Hn=>Xt.next(Hn),Hn=>Xt.error(Hn),()=>Xt.complete()))}))));this.authState=Hr.pipe(qt(Er),(0,ct.R)(mt.outsideAngular),(0,Ge.Q)(mt.insideAngular)),this.user=Hr.pipe(qt(Gr),(0,ct.R)(mt.outsideAngular),(0,Ge.Q)(mt.insideAngular)),this.idToken=this.user.pipe((0,Ie.w)(Pn=>Pn?(0,Se.D)(Pn.getIdToken()):(0,z.of)(null))),this.idTokenResult=this.user.pipe((0,Ie.w)(Pn=>Pn?(0,Se.D)(Pn.getIdTokenResult()):(0,z.of)(null))),this.credential=(0,je.T)(Hr,Qn,this.authState.pipe((0,_t.h)(Pn=>!Pn))).pipe((0,Qe.U)(Pn=>Pn?.user?Pn:null),(0,ct.R)(mt.outsideAngular),(0,Ge.Q)(mt.insideAngular))}return(0,It.pX)(this,_r,ze,{spy:{apply:(Cr,Hr,Er)=>{(Cr.startsWith("signIn")||Cr.startsWith("createUser"))&&Er.then(Gr=>Qn.next(Gr))}}})}}return Vn.\u0275fac=function(Ke){return new(Ke||Vn)(_.LFG(It.Dh),_.LFG(It.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(At.HU),_.LFG(gt,8),_.LFG(Y,8),_.LFG($t,8),_.LFG(on,8),_.LFG(Yt,8),_.LFG(Zt,8),_.LFG(Pe.nm,8))},Vn.\u0275prov=_.Yz7({token:Vn,factory:Vn.\u0275fac,providedIn:"any"}),Vn})(),br=(()=>{class Vn{constructor(){at.Z.registerVersion("angularfire",At.q4.full,"auth-compat")}}return Vn.\u0275fac=function(Ke){return new(Ke||Vn)},Vn.\u0275mod=_.oAB({type:Vn}),Vn.\u0275inj=_.cJS({providers:[Wr]}),Vn})()},5197:(fn,lt,K)=>{K.d(lt,{KQ:()=>id,JS:()=>Zc});var _=K(4650),ie=K(4986),z=K(9751),Le=K(9646),Se=K(6451),je=K(4004),Ge=K(3099),Ie=K(3900),Qe=K(2940),he=K(1884),we=K(4482),Oe=K(5403),dt=K(8421),ht=K(4671),Mt=K(5032),qt=K(7669),At=K(4976),It=K(2011),Pe=(K(9568),K(3942)),at=K(4859),Lt=K(5861),gt=K(6881),Y=K(2090),$t=K(1877);const on="@firebase/database";let Zt="";function Gt(h){Zt=h}class Wr{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,Y.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,Y.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class br{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,Y.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Vn=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Wr(u)}}catch{}return new br},Jn=Vn("localStorage"),Ke=Vn("sessionStorage"),Ye=new $t.Yd("@firebase/database"),ut=function(){let h=1;return function(){return h++}}(),ze=function(h){const u=(0,Y.dS)(h),c=new Y.gQ;c.update(u);const y=c.digest();return Y.US.encodeByteArray(y)},mt=function(...h){let u="";for(let c=0;c<h.length;c++){const y=h[c];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?u+=mt.apply(null,y):u+="object"==typeof y?(0,Y.Wl)(y):y,u+=" "}return u};let Ot=null,Qt=!0;const Rt=function(h,u){(0,Y.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Ye.logLevel=$t.in.VERBOSE,Ot=Ye.log.bind(Ye),u&&Ke.set("logging_enabled",!0)):"function"==typeof h?Ot=h:(Ot=null,Ke.remove("logging_enabled"))},nn=function(...h){if(!0===Qt&&(Qt=!1,null===Ot&&!0===Ke.get("logging_enabled")&&Rt(!0)),Ot){const u=mt.apply(null,h);Ot(u)}},Cn=function(h){return function(...u){nn(h,...u)}},On=function(...h){const u="FIREBASE INTERNAL ERROR: "+mt(...h);Ye.error(u)},gr=function(...h){const u=`FIREBASE FATAL ERROR: ${mt(...h)}`;throw Ye.error(u),new Error(u)},Qn=function(...h){const u="FIREBASE WARNING: "+mt(...h);Ye.warn(u)},Cr=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Er="[MIN_NAME]",Gr="[MAX_NAME]",Pn=function(h,u){if(h===u)return 0;if(h===Er||u===Gr)return-1;if(u===Er||h===Gr)return 1;{const c=wn(h),y=wn(u);return null!==c?null!==y?c-y==0?h.length-u.length:c-y:-1:null!==y?1:h<u?-1:1}},Xt=function(h,u){return h===u?0:h<u?-1:1},Hn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,Y.Wl)(u))},yi=function(h){if("object"!=typeof h||null===h)return(0,Y.Wl)(h);const u=[];for(const y in h)u.push(y);u.sort();let c="{";for(let y=0;y<u.length;y++)0!==y&&(c+=","),c+=(0,Y.Wl)(u[y]),c+=":",c+=yi(h[u[y]]);return c+="}",c},Dr=function(h,u){const c=h.length;if(c<=u)return[h];const y=[];for(let T=0;T<c;T+=u)y.push(h.substring(T,T+u>c?c:T+u));return y};function jn(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const ri=function(h){(0,Y.hu)(!Cr(h),"Invalid JSON number");const y=1023;let T,F,q,ue,Ce;0===h?(F=0,q=0,T=1/h==-1/0?1:0):(T=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(ue=Math.min(Math.floor(Math.log(h)/Math.LN2),y),F=ue+y,q=Math.round(h*Math.pow(2,52-ue)-Math.pow(2,52))):(F=0,q=Math.round(h/Math.pow(2,-1074))));const Ue=[];for(Ce=52;Ce;Ce-=1)Ue.push(q%2?1:0),q=Math.floor(q/2);for(Ce=11;Ce;Ce-=1)Ue.push(F%2?1:0),F=Math.floor(F/2);Ue.push(T?1:0),Ue.reverse();const xt=Ue.join("");let kt="";for(Ce=0;Ce<64;Ce+=8){let Wt=parseInt(xt.substr(Ce,8),2).toString(16);1===Wt.length&&(Wt="0"+Wt),kt+=Wt}return kt.toLowerCase()},An=new RegExp("^-?(0*)\\d{1,10}$"),wn=function(h){if(An.test(h)){const u=Number(h);if(u>=-2147483648&&u<=2147483647)return u}return null},Qr=function(h){try{h()}catch(u){setTimeout(()=>{throw Qn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},si=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xr=function(h,u){const c=setTimeout(h,u);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class cr{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(y=>this.appCheck=y)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,y)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(y=>y.addTokenListener(u))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Kr{constructor(u,c,y){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(T=>this.auth_=T)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,y)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(u)}}let $n=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Yi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ne="websocket",Re="long_polling";class ce{constructor(u,c,y,T,F=!1,q="",ue=!1,Ce=!1){this.secure=c,this.namespace=y,this.webSocketOnly=T,this.nodeAdmin=F,this.persistenceKey=q,this.includeNamespaceInQueryParams=ue,this.isUsingEmulator=Ce,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jn.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Jn.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function oe(h,u,c){let y;if((0,Y.hu)("string"==typeof u,"typeof type must == string"),(0,Y.hu)("object"==typeof c,"typeof params must == object"),u===Ne)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==Re)throw new Error("Unknown connection type: "+u);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function ye(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const T=[];return jn(c,(F,q)=>{T.push(F+"="+q)}),y+T.join("&")}class Be{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,Y.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,Y.p$)(this.counters_)}}const be={},De={};function ve(h){const u=h.toString();return be[u]||(be[u]=new Be),be[u]}class it{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<y.length;++T)y[T]&&Qr(()=>{this.onMessage_(y[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Lr{constructor(u,c,y,T,F,q,ue){this.connId=u,this.repoInfo=c,this.applicationId=y,this.appCheckToken=T,this.authToken=F,this.transportSessionId=q,this.lastSessionId=ue,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cn(u),this.stats_=ve(c),this.urlFn=Ce=>(this.appCheckToken&&(Ce.ac=this.appCheckToken),oe(c,Re,Ce))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new it(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,Y.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ks((...F)=>{const[q,ue,Ce,Ue,xt]=F;if(this.incrementIncomingBytes_(F),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===q)this.id=ue,this.password=Ce;else{if("close"!==q)throw new Error("Unrecognized command received: "+q);ue?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ue,()=>{this.onClosed_()})):this.onClosed_()}},(...F)=>{const[q,ue]=F;this.incrementIncomingBytes_(F),this.myPacketOrderer.handleResponse(q,ue)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Yi.test(location.hostname)&&(y.r="f");const T=this.urlFn(y);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lr.forceAllow_=!0}static forceDisallow(){Lr.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!Lr.forceAllow_&&(Lr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,Y.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const y=(0,Y.h$)(c),T=Dr(y,1840);for(let F=0;F<T.length;F++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[F]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=u,y.pw=c,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,Y.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Ks{constructor(u,c,y,T){if(this.onDisconnect=y,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=ut(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Ks.createIFrame_();let F="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(F='<script>document.domain="'+document.domain+'";<\/script>');const q="<html><body>"+F+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(q),this.myIFrame.doc.close()}catch(ue){nn("frame writing exception"),ue.stack&&nn(ue.stack),nn(ue)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||nn("No IE domain setting required")}catch{const y=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),y="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const q=this.pendingSegs.shift();y=y+"&seg"+T+"="+q.seg+"&ts"+T+"="+q.ts+"&d"+T+"="+q.d,T++}return c+=y,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,y){this.pendingSegs.push({seg:u,ts:c,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const y=()=>{this.outstandingRequests.delete(c),this.newRequest_()},T=setTimeout(y,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(T),y()})}addTag(u,c){(0,Y.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=u,y.onload=y.onreadystatechange=function(){const T=y.readyState;(!T||"loaded"===T||"complete"===T)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),c())},y.onerror=()=>{nn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let mr=null;typeof MozWebSocket<"u"?mr=MozWebSocket:typeof WebSocket<"u"&&(mr=WebSocket);let oi=(()=>{class h{constructor(c,y,T,F,q,ue,Ce){this.connId=c,this.applicationId=T,this.appCheckToken=F,this.authToken=q,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cn(this.connId),this.stats_=ve(y),this.connURL=h.connectionURL_(y,ue,Ce,F,T),this.nodeAdmin=y.nodeAdmin}static connectionURL_(c,y,T,F,q){const ue={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&Yi.test(location.hostname)&&(ue.r="f"),y&&(ue.s=y),T&&(ue.ls=T),F&&(ue.ac=F),q&&(ue.p=q),oe(c,Ne,ue)}open(c,y){this.onDisconnect=y,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jn.set("previous_websocket_failure",!0);try{let T;if((0,Y.Yr)()){T={headers:{"User-Agent":`Firebase/5/${Zt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(T.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);const q=process.env,ue=0===this.connURL.indexOf("wss://")?q.HTTPS_PROXY||q.https_proxy:q.HTTP_PROXY||q.http_proxy;ue&&(T.proxy={origin:ue})}this.mySock=new mr(this.connURL,[],T)}catch(T){this.log_("Error instantiating WebSocket.");const F=T.message||T.data;return F&&this.log_(F),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const F=T.message||T.data;F&&this.log_(F),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(c=!0)}return!c&&null!==mr&&!h.forceDisallow_}static previouslyFailed(){return Jn.isInMemoryStorage||!0===Jn.get("previous_websocket_failure")}markConnectionHealthy(){Jn.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const T=(0,Y.cI)(y);this.onMessage(T)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const y=Number(c);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const y=c.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const T=this.extractFrameCount_(y);null!==T&&this.appendFrame_(T)}}send(c){this.resetKeepAlive();const y=(0,Y.Wl)(c);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const T=Dr(y,16384);T.length>1&&this.sendString_(String(T.length));for(let F=0;F<T.length;F++)this.sendString_(T[F])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),ai=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[Lr,oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const y=oi&&oi.isAvailable();let T=y&&!oi.previouslyFailed();if(c.webSocketOnly&&(y||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[oi];else{const F=this.transports_=[];for(const q of h.ALL_TRANSPORTS)q&&q.isAvailable()&&F.push(q);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class Es{constructor(u,c,y,T,F,q,ue,Ce,Ue,xt){this.id=u,this.repoInfo_=c,this.applicationId_=y,this.appCheckToken_=T,this.authToken_=F,this.onMessage_=q,this.onReady_=ue,this.onDisconnect_=Ce,this.onKill_=Ue,this.lastSessionId=xt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cn("c:"+this.id+":"),this.transportManager_=new ai(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,y)},Math.floor(0));const T=u.healthyTimeout||0;T>0&&(this.healthyTimeout_=Xr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Hn("t",u),y=Hn("d",u);if("c"===c)this.onSecondaryControl_(y);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Hn("t",u),y=Hn("d",u);"c"===c?this.onControl_(y):"d"===c&&this.onDataMessage_(y)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Hn("t",u);if("d"in u){const y=u.d;if("h"===c){const T=Object.assign({},y);this.repoInfo_.isUsingEmulator&&(T.h=this.repoInfo_.host),this.onHandshake_(T)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(y):"r"===c?this.onReset_(y):"e"===c?On("Server Error: "+y):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):On("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,y=u.v,T=u.h;this.sessionId=u.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==y&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,y),Xr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ss{put(u,c,y,T){}merge(u,c,y,T){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,y){}onDisconnectMerge(u,c,y){}onDisconnectCancel(u,c){}reportStats(u){}}class ws{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,Y.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const y=[...this.listeners_[u]];for(let T=0;T<y.length;T++)y[T].callback.apply(y[T].context,c)}}on(u,c,y){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:y});const T=this.getInitialEvent(u);T&&c.apply(y,T)}off(u,c,y){this.validateEventType_(u);const T=this.listeners_[u]||[];for(let F=0;F<T.length;F++)if(T[F].callback===c&&(!y||y===T[F].context))return void T.splice(F,1)}validateEventType_(u){(0,Y.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Ti extends ws{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ti}getInitialEvent(u){return(0,Y.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}const Hs=32,Zo=768;class Or{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let y=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[y]=this.pieces_[T],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Br(){return new Or("")}function vr(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function As(h){return h.pieces_.length-h.pieceNum_}function Mr(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Or(h.pieces_,u)}function da(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function _i(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function ys(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new Or(u,0)}function Tr(h,u){const c=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)c.push(h.pieces_[y]);if(u instanceof Or)for(let y=u.pieceNum_;y<u.pieces_.length;y++)c.push(u.pieces_[y]);else{const y=u.split("/");for(let T=0;T<y.length;T++)y[T].length>0&&c.push(y[T])}return new Or(c,0)}function lr(h){return h.pieceNum_>=h.pieces_.length}function vi(h,u){const c=vr(h),y=vr(u);if(null===c)return u;if(c===y)return vi(Mr(h),Mr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Ii(h,u){const c=_i(h,0),y=_i(u,0);for(let T=0;T<c.length&&T<y.length;T++){const F=Pn(c[T],y[T]);if(0!==F)return F}return c.length===y.length?0:c.length<y.length?-1:1}function eo(h,u){if(As(h)!==As(u))return!1;for(let c=h.pieceNum_,y=u.pieceNum_;c<=h.pieces_.length;c++,y++)if(h.pieces_[c]!==u.pieces_[y])return!1;return!0}function Bi(h,u){let c=h.pieceNum_,y=u.pieceNum_;if(As(h)>As(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[y])return!1;++c,++y}return!0}class xs{constructor(u,c){this.errorPrefix_=c,this.parts_=_i(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,Y.ug)(this.parts_[y]);Pa(this)}}function Pa(h){if(h.byteLength_>Zo)throw new Error(h.errorPrefix_+"has a key path longer than "+Zo+" bytes ("+h.byteLength_+").");if(h.parts_.length>Hs)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hs+") or object contains a cycle "+to(h))}function to(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class vo extends ws{constructor(){let u,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const y=!document[u];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new vo}getInitialEvent(u){return(0,Y.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const xo=1e3;let Te,zs=(()=>{class h extends Ss{constructor(c,y,T,F,q,ue,Ce,Ue){if(super(),this.repoInfo_=c,this.applicationId_=y,this.onDataUpdate_=T,this.onConnectStatus_=F,this.onServerInfoUpdate_=q,this.authTokenProvider_=ue,this.appCheckTokenProvider_=Ce,this.authOverride_=Ue,this.id=h.nextPersistentConnectionId_++,this.log_=Cn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ue&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vo.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ti.getInstance().on("online",this.onOnline_,this)}sendRequest(c,y,T){const F=++this.requestNumber_,q={r:F,a:c,b:y};this.log_((0,Y.Wl)(q)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(q),T&&(this.requestCBHash_[F]=T)}get(c){this.initConnection_();const y=new Y.BH,F={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:ue=>{const Ce=ue.d;"ok"===ue.s?y.resolve(Ce):y.reject(Ce)}};return this.outstandingGets_.push(F),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(c,y,T,F){this.initConnection_();const q=c._queryIdentifier,ue=c._path.toString();this.log_("Listen called for "+ue+" "+q),this.listens.has(ue)||this.listens.set(ue,new Map),(0,Y.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(ue).has(q),"listen() called twice for same path/queryId.");const Ce={onComplete:F,hashFn:y,query:c,tag:T};this.listens.get(ue).set(q,Ce),this.connected_&&this.sendListen_(Ce)}sendGet_(c){const y=this.outstandingGets_[c];this.sendRequest("g",y.request,T=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(T)})}sendListen_(c){const y=c.query,T=y._path.toString(),F=y._queryIdentifier;this.log_("Listen on "+T+" for "+F);const q={p:T};c.tag&&(q.q=y._queryObject,q.t=c.tag),q.h=c.hashFn(),this.sendRequest("q",q,Ce=>{const Ue=Ce.d,xt=Ce.s;h.warnOnListenWarnings_(Ue,y),(this.listens.get(T)&&this.listens.get(T).get(F))===c&&(this.log_("listen response",Ce),"ok"!==xt&&this.removeListen_(T,F),c.onComplete&&c.onComplete(xt,Ue))})}static warnOnListenWarnings_(c,y){if(c&&"object"==typeof c&&(0,Y.r3)(c,"w")){const T=(0,Y.DV)(c,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const F='".indexOn": "'+y._queryParams.getIndex().toString()+'"',q=y._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${F} at ${q} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,Y.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,y=(0,Y.w9)(c)?"auth":"gauth",T={cred:c};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(y,T,F=>{const q=F.s,ue=F.d||"error";this.authToken_===c&&("ok"===q?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(q,ue))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const y=c.s,T=c.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,T)})}unlisten(c,y){const T=c._path.toString(),F=c._queryIdentifier;this.log_("Unlisten called for "+T+" "+F),(0,Y.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,F)&&this.connected_&&this.sendUnlisten_(T,F,c._queryObject,y)}sendUnlisten_(c,y,T,F){this.log_("Unlisten on "+c+" for "+y);const q={p:c};F&&(q.q=T,q.t=F),this.sendRequest("n",q)}onDisconnectPut(c,y,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,y,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:y,onComplete:T})}onDisconnectMerge(c,y,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,y,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:y,onComplete:T})}onDisconnectCancel(c,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,y):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(c,y,T,F){const q={p:y,d:T};this.log_("onDisconnect "+c,q),this.sendRequest(c,q,ue=>{F&&setTimeout(()=>{F(ue.s,ue.d)},Math.floor(0))})}put(c,y,T,F){this.putInternal("p",c,y,T,F)}merge(c,y,T,F){this.putInternal("m",c,y,T,F)}putInternal(c,y,T,F,q){this.initConnection_();const ue={p:y,d:T};void 0!==q&&(ue.h=q),this.outstandingPuts_.push({action:c,request:ue,onComplete:F}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(c){const y=this.outstandingPuts_[c].action,T=this.outstandingPuts_[c].request,F=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(y,T,q=>{this.log_(y+" response",q),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),F&&F(q.s,q.d)})}reportStats(c){if(this.connected_){const y={c};this.log_("reportStats",y),this.sendRequest("s",y,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,Y.Wl)(c));const y=c.r,T=this.requestCBHash_[y];T&&(delete this.requestCBHash_[y],T(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,y){this.log_("handleServerMessage",c,y),"d"===c?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===c?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===c?this.onListenRevoked_(y.p,y.q):"ac"===c?this.onAuthRevoked_(y.s,y.d):"apc"===c?this.onAppCheckRevoked_(y.s,y.d):"sd"===c?this.onSecurityDebugPacket_(y):On("Unrecognized action received from server: "+(0,Y.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xo,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=xo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-c);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Lt.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const y=c.onDataMessage_.bind(c),T=c.onReady_.bind(c),F=c.onRealtimeDisconnect_.bind(c),q=c.id+":"+h.nextConnectionId_++,ue=c.lastSessionId;let Ce=!1,Ue=null;const xt=function(){Ue?Ue.close():(Ce=!0,F())};c.realtime_={close:xt,sendRequest:function(Fn){(0,Y.hu)(Ue,"sendRequest call when we're not connected not allowed."),Ue.sendRequest(Fn)}};const Wt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Fn,ur]=yield Promise.all([c.authTokenProvider_.getToken(Wt),c.appCheckTokenProvider_.getToken(Wt)]);Ce?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),c.authToken_=Fn&&Fn.accessToken,c.appCheckToken_=ur&&ur.token,Ue=new Es(q,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,y,T,F,Zi=>{Qn(Zi+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ue))}catch(Fn){c.log_("Failed to get token: "+Fn),Ce||(c.repoInfo_.nodeAdmin&&Qn(Fn),xt())}}})()}interrupt(c){nn("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){nn("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const y=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const y=this.outstandingPuts_[c];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,y){let T;T=y?y.map(q=>yi(q)).join("$"):"default";const F=this.removeListen_(c,T);F&&F.onComplete&&F.onComplete("permission_denied")}removeListen_(c,y){const T=new Or(c).toString();let F;if(this.listens.has(T)){const q=this.listens.get(T);F=q.get(y),q.delete(y),0===q.size&&this.listens.delete(T)}else F=void 0;return F}onAuthRevoked_(c,y){nn("Auth token revoked: "+c+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,y){nn("App check token revoked: "+c+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const y of c.values())this.sendListen_(y);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let y="js";(0,Y.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+y+"."+Zt.replace(/\./g,"-")]=1,(0,Y.uI)()?c["framework.cordova"]=1:(0,Y.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ti.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class X{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new X(u,c)}}class re{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const y=new X(Er,u),T=new X(Er,c);return 0!==this.compare(y,T)}minPost(){return X.MIN}}class Fe extends re{static get __EMPTY_NODE(){return Te}static set __EMPTY_NODE(u){Te=u}compare(u,c){return Pn(u.name,c.name)}isDefinedOn(u){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return X.MIN}maxPost(){return new X(Gr,Te)}makePost(u,c){return(0,Y.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new X(u,Te)}toString(){return".key"}}const qe=new Fe;class Tt{constructor(u,c,y,T,F=null){this.isReverse_=T,this.resultGenerator_=F,this.nodeStack_=[];let q=1;for(;!u.isEmpty();)if(q=c?y(u.key,c):1,T&&(q*=-1),q<0)u=this.isReverse_?u.left:u.right;else{if(0===q){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let Gi,Kt=(()=>{class h{constructor(c,y,T,F,q){this.key=c,this.value=y,this.color=T??h.RED,this.left=F??dn.EMPTY_NODE,this.right=q??dn.EMPTY_NODE}copy(c,y,T,F,q){return new h(c??this.key,y??this.value,T??this.color,F??this.left,q??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,y,T){let F=this;const q=T(c,F.key);return F=q<0?F.copy(null,null,null,F.left.insert(c,y,T),null):0===q?F.copy(null,y,null,null,null):F.copy(null,null,null,null,F.right.insert(c,y,T)),F.fixUp_()}removeMin_(){if(this.left.isEmpty())return dn.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,y){let T,F;if(T=this,y(c,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(c,y),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===y(c,T.key)){if(T.right.isEmpty())return dn.EMPTY_NODE;F=T.right.min_(),T=T.copy(F.key,F.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(c,y))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,y)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class dn{constructor(u,c=dn.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new dn(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,Kt.BLACK,null,null))}remove(u){return new dn(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,Kt.BLACK,null,null))}get(u){let c,y=this.root_;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c)return y.value;c<0?y=y.left:c>0&&(y=y.right)}return null}getPredecessorKey(u){let c,y=this.root_,T=null;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c){if(y.left.isEmpty())return T?T.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}c<0?y=y.left:c>0&&(T=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Tt(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Tt(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Tt(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Tt(this.root_,null,this.comparator_,!0,u)}}function or(h,u){return Pn(h.name,u.name)}function Pr(h,u){return Pn(h,u)}dn.EMPTY_NODE=new class xn{copy(u,c,y,T,F){return this}insert(u,c,y){return new Kt(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xi=function(h){return"number"==typeof h?"number:"+ri(h):"string:"+h},bi=function(h){if(h.isLeafNode()){const u=h.val();(0,Y.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,Y.r3)(u,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(h===Gi||h.isEmpty(),"priority of unexpected type.");(0,Y.hu)(h===Gi||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Vr,ks,hi,gi=(()=>{class h{constructor(c,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=y,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),bi(this.priorityNode_)}static set __childrenNodeConstructor(c){Vr=c}static get __childrenNodeConstructor(){return Vr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return lr(c)?this:".priority"===vr(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,y){return null}updateImmediateChild(c,y){return".priority"===c?this.updatePriority(y):y.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,y).updatePriority(this.priorityNode_)}updateChild(c,y){const T=vr(c);return null===T?y:y.isEmpty()&&".priority"!==T?this:((0,Y.hu)(".priority"!==T||1===As(c),".priority must be the last token in a path"),this.updateImmediateChild(T,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mr(c),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,y){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+xi(this.priorityNode_.val())+":");const y=typeof this.value_;c+=y+":",c+="number"===y?ri(this.value_):this.value_,this.lazyHash_=ze(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,Y.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const y=typeof c.value_,T=typeof this.value_,F=h.VALUE_TYPE_ORDER.indexOf(y),q=h.VALUE_TYPE_ORDER.indexOf(T);return(0,Y.hu)(F>=0,"Unknown leaf type: "+y),(0,Y.hu)(q>=0,"Unknown leaf type: "+T),F===q?"object"===T?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:q-F}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const jr=new class xr extends re{compare(u,c){const y=u.node.getPriority(),T=c.node.getPriority(),F=y.compareTo(T);return 0===F?Pn(u.name,c.name):F}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return X.MIN}maxPost(){return new X(Gr,new gi("[PRIORITY-POST]",hi))}makePost(u,c){const y=ks(u);return new X(c,new gi("[PRIORITY-POST]",y))}toString(){return".priority"}},Ls=Math.log(2);class hs{constructor(u){this.count=parseInt(Math.log(u+1)/Ls,10),this.current_=this.count-1;const T=(F=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&T}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const rs=function(h,u,c,y){h.sort(u);const T=function(Ce,Ue){const xt=Ue-Ce;let kt,Wt;if(0===xt)return null;if(1===xt)return kt=h[Ce],Wt=c?c(kt):kt,new Kt(Wt,kt.node,Kt.BLACK,null,null);{const Fn=parseInt(xt/2,10)+Ce,ur=T(Ce,Fn),Zi=T(Fn+1,Ue);return kt=h[Fn],Wt=c?c(kt):kt,new Kt(Wt,kt.node,Kt.BLACK,ur,Zi)}},ue=function(Ce){let Ue=null,xt=null,kt=h.length;const Wt=function(ur,Zi){const Ra=kt-ur,Ec=kt;kt-=ur;const wc=T(Ra+1,Ec),Ad=h[Ra],bh=c?c(Ad):Ad;Fn(new Kt(bh,Ad.node,Zi,null,wc))},Fn=function(ur){Ue?(Ue.left=ur,Ue=ur):(xt=ur,Ue=ur)};for(let ur=0;ur<Ce.count;++ur){const Zi=Ce.nextBitIsOne(),Ra=Math.pow(2,Ce.count-(ur+1));Zi?Wt(Ra,Kt.BLACK):(Wt(Ra,Kt.BLACK),Wt(Ra,Kt.RED))}return xt}(new hs(h.length));return new dn(y||u,ue)};let wo;const Io={};class Do{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,Y.hu)(Io&&jr,"ChildrenNode.ts has not been loaded"),wo=wo||new Do({".priority":Io},{".priority":jr}),wo}get(u){const c=(0,Y.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof dn?c:null}hasIndex(u){return(0,Y.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,Y.hu)(u!==qe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let T=!1;const F=c.getIterator(X.Wrap);let ue,q=F.getNext();for(;q;)T=T||u.isDefinedOn(q.node),y.push(q),q=F.getNext();ue=T?rs(y,u.getCompare()):Io;const Ce=u.toString(),Ue=Object.assign({},this.indexSet_);Ue[Ce]=u;const xt=Object.assign({},this.indexes_);return xt[Ce]=ue,new Do(xt,Ue)}addToIndexes(u,c){const y=(0,Y.UI)(this.indexes_,(T,F)=>{const q=(0,Y.DV)(this.indexSet_,F);if((0,Y.hu)(q,"Missing index implementation for "+F),T===Io){if(q.isDefinedOn(u.node)){const ue=[],Ce=c.getIterator(X.Wrap);let Ue=Ce.getNext();for(;Ue;)Ue.name!==u.name&&ue.push(Ue),Ue=Ce.getNext();return ue.push(u),rs(ue,q.getCompare())}return Io}{const ue=c.get(u.name);let Ce=T;return ue&&(Ce=Ce.remove(new X(u.name,ue))),Ce.insert(u,u.node)}});return new Do(y,this.indexSet_)}removeFromIndexes(u,c){const y=(0,Y.UI)(this.indexes_,T=>{if(T===Io)return T;{const F=c.get(u.name);return F?T.remove(new X(u.name,F)):T}});return new Do(y,this.indexSet_)}}let Cs,fr=(()=>{class h{constructor(c,y,T){this.children_=c,this.priorityNode_=y,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&bi(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cs||(Cs=new h(new dn(Pr),null,Do.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cs}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const y=this.children_.get(c);return null===y?Cs:y}}getChild(c){const y=vr(c);return null===y?this:this.getImmediateChild(y).getChild(Mr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,y){if((0,Y.hu)(y,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(y);{const T=new X(c,y);let F,q;y.isEmpty()?(F=this.children_.remove(c),q=this.indexMap_.removeFromIndexes(T,this.children_)):(F=this.children_.insert(c,y),q=this.indexMap_.addToIndexes(T,this.children_));const ue=F.isEmpty()?Cs:this.priorityNode_;return new h(F,ue,q)}}updateChild(c,y){const T=vr(c);if(null===T)return y;{(0,Y.hu)(".priority"!==vr(c)||1===As(c),".priority must be the last token in a path");const F=this.getImmediateChild(T).updateChild(Mr(c),y);return this.updateImmediateChild(T,F)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const y={};let T=0,F=0,q=!0;if(this.forEachChild(jr,(ue,Ce)=>{y[ue]=Ce.val(c),T++,q&&h.INTEGER_REGEXP_.test(ue)?F=Math.max(F,Number(ue)):q=!1}),!c&&q&&F<2*T){const ue=[];for(const Ce in y)ue[Ce]=y[Ce];return ue}return c&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+xi(this.getPriority().val())+":"),this.forEachChild(jr,(y,T)=>{const F=T.hash();""!==F&&(c+=":"+y+":"+F)}),this.lazyHash_=""===c?"":ze(c)}return this.lazyHash_}getPredecessorChildName(c,y,T){const F=this.resolveIndex_(T);if(F){const q=F.getPredecessorKey(new X(c,y));return q?q.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const y=this.resolveIndex_(c);if(y){const T=y.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(c){const y=this.getFirstChildName(c);return y?new X(y,this.children_.get(y)):null}getLastChildName(c){const y=this.resolveIndex_(c);if(y){const T=y.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(c){const y=this.getLastChildName(c);return y?new X(y,this.children_.get(y)):null}forEachChild(c,y){const T=this.resolveIndex_(c);return T?T.inorderTraversal(F=>y(F.name,F.node)):this.children_.inorderTraversal(y)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,y){const T=this.resolveIndex_(y);if(T)return T.getIteratorFrom(c,F=>F);{const F=this.children_.getIteratorFrom(c.name,X.Wrap);let q=F.peek();for(;null!=q&&y.compare(q,c)<0;)F.getNext(),q=F.peek();return F}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,y){const T=this.resolveIndex_(y);if(T)return T.getReverseIteratorFrom(c,F=>F);{const F=this.children_.getReverseIteratorFrom(c.name,X.Wrap);let q=F.peek();for(;null!=q&&y.compare(q,c)>0;)F.getNext(),q=F.peek();return F}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===pr?-1:0}withIndex(c){if(c===qe||this.indexMap_.hasIndex(c))return this;{const y=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(c){return c===qe||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const y=c;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const T=this.getIterator(jr),F=y.getIterator(jr);let q=T.getNext(),ue=F.getNext();for(;q&&ue;){if(q.name!==ue.name||!q.node.equals(ue.node))return!1;q=T.getNext(),ue=F.getNext()}return null===q&&null===ue}return!1}return!1}}resolveIndex_(c){return c===qe?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const pr=new class so extends fr{constructor(){super(new dn(Pr),fr.EMPTY_NODE,Do.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return fr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(X,{MIN:{value:new X(Er,fr.EMPTY_NODE)},MAX:{value:new X(Gr,pr)}}),Fe.__EMPTY_NODE=fr.EMPTY_NODE,gi.__childrenNodeConstructor=fr,function Rs(h){Gi=h}(pr),function li(h){hi=h}(pr);const xa=!0;function ji(h,u=null){if(null===h)return fr.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,Y.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new gi(h,ji(u));if(h instanceof Array||!xa){let c=fr.EMPTY_NODE;return jn(h,(y,T)=>{if((0,Y.r3)(h,y)&&"."!==y.substring(0,1)){const F=ji(T);(F.isLeafNode()||!F.isEmpty())&&(c=c.updateImmediateChild(y,F))}}),c.updatePriority(ji(u))}{const c=[];let y=!1;if(jn(h,(q,ue)=>{if("."!==q.substring(0,1)){const Ce=ji(ue);Ce.isEmpty()||(y=y||!Ce.getPriority().isEmpty(),c.push(new X(q,Ce)))}}),0===c.length)return fr.EMPTY_NODE;const F=rs(c,or,q=>q.name,Pr);if(y){const q=rs(c,jr.getCompare());return new fr(F,ji(u),new Do({".priority":q},{".priority":jr}))}return new fr(F,ji(u),Do.Default)}}!function ki(h){ks=h}(ji);class Na extends re{constructor(u){super(),this.indexPath_=u,(0,Y.hu)(!lr(u)&&".priority"!==vr(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const y=this.extractChild(u.node),T=this.extractChild(c.node),F=y.compareTo(T);return 0===F?Pn(u.name,c.name):F}makePost(u,c){const y=ji(u),T=fr.EMPTY_NODE.updateChild(this.indexPath_,y);return new X(c,T)}maxPost(){const u=fr.EMPTY_NODE.updateChild(this.indexPath_,pr);return new X(Gr,u)}toString(){return _i(this.indexPath_,0).join("/")}}const sl=new class Ha extends re{compare(u,c){const y=u.node.compareTo(c.node);return 0===y?Pn(u.name,c.name):y}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(u,c){const y=ji(u);return new X(c,y)}toString(){return".value"}};function Rl(h){return{type:"value",snapshotNode:h}}function na(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Ml(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function L(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class B{constructor(u){this.index_=u}updateChild(u,c,y,T,F,q){(0,Y.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ue=u.getImmediateChild(c);return ue.getChild(T).equals(y.getChild(T))&&ue.isEmpty()===y.isEmpty()||(null!=q&&(y.isEmpty()?u.hasChild(c)?q.trackChildChange(Ml(c,ue)):(0,Y.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ue.isEmpty()?q.trackChildChange(na(c,y)):q.trackChildChange(L(c,y,ue))),u.isLeafNode()&&y.isEmpty())?u:u.updateImmediateChild(c,y).withIndex(this.index_)}updateFullNode(u,c,y){return null!=y&&(u.isLeafNode()||u.forEachChild(jr,(T,F)=>{c.hasChild(T)||y.trackChildChange(Ml(T,F))}),c.isLeafNode()||c.forEachChild(jr,(T,F)=>{if(u.hasChild(T)){const q=u.getImmediateChild(T);q.equals(F)||y.trackChildChange(L(T,F,q))}else y.trackChildChange(na(T,F))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?fr.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class le{constructor(u){this.indexedFilter_=new B(u.getIndex()),this.index_=u.getIndex(),this.startPost_=le.getStartPost_(u),this.endPost_=le.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,y=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return c&&y}updateChild(u,c,y,T,F,q){return this.matches(new X(c,y))||(y=fr.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,y,T,F,q)}updateFullNode(u,c,y){c.isLeafNode()&&(c=fr.EMPTY_NODE);let T=c.withIndex(this.index_);T=T.updatePriority(fr.EMPTY_NODE);const F=this;return c.forEachChild(jr,(q,ue)=>{F.matches(new X(q,ue))||(T=T.updateImmediateChild(q,fr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,T,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class st{constructor(u){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const y=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?y<=0:y<0},this.withinEndPost=c=>{const y=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?y<=0:y<0},this.rangedFilter_=new le(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,c,y,T,F,q){return this.rangedFilter_.matches(new X(c,y))||(y=fr.EMPTY_NODE),u.getImmediateChild(c).equals(y)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,y,T,F,q):this.fullLimitUpdateChild_(u,c,y,F,q)}updateFullNode(u,c,y){let T;if(c.isLeafNode()||c.isEmpty())T=fr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let F;T=fr.EMPTY_NODE.withIndex(this.index_),F=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let q=0;for(;F.hasNext()&&q<this.limit_;){const ue=F.getNext();if(this.withinDirectionalStart(ue)){if(!this.withinDirectionalEnd(ue))break;T=T.updateImmediateChild(ue.name,ue.node),q++}}}else{let F;T=c.withIndex(this.index_),T=T.updatePriority(fr.EMPTY_NODE),F=this.reverse_?T.getReverseIterator(this.index_):T.getIterator(this.index_);let q=0;for(;F.hasNext();){const ue=F.getNext();q<this.limit_&&this.withinDirectionalStart(ue)&&this.withinDirectionalEnd(ue)?q++:T=T.updateImmediateChild(ue.name,fr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,T,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,y,T,F){let q;if(this.reverse_){const kt=this.index_.getCompare();q=(Wt,Fn)=>kt(Fn,Wt)}else q=this.index_.getCompare();const ue=u;(0,Y.hu)(ue.numChildren()===this.limit_,"");const Ce=new X(c,y),Ue=this.reverse_?ue.getFirstChild(this.index_):ue.getLastChild(this.index_),xt=this.rangedFilter_.matches(Ce);if(ue.hasChild(c)){const kt=ue.getImmediateChild(c);let Wt=T.getChildAfterChild(this.index_,Ue,this.reverse_);for(;null!=Wt&&(Wt.name===c||ue.hasChild(Wt.name));)Wt=T.getChildAfterChild(this.index_,Wt,this.reverse_);const Fn=null==Wt?1:q(Wt,Ce);if(xt&&!y.isEmpty()&&Fn>=0)return F?.trackChildChange(L(c,y,kt)),ue.updateImmediateChild(c,y);{F?.trackChildChange(Ml(c,kt));const Zi=ue.updateImmediateChild(c,fr.EMPTY_NODE);return null!=Wt&&this.rangedFilter_.matches(Wt)?(F?.trackChildChange(na(Wt.name,Wt.node)),Zi.updateImmediateChild(Wt.name,Wt.node)):Zi}}return y.isEmpty()?u:xt&&q(Ue,Ce)>=0?(null!=F&&(F.trackChildChange(Ml(Ue.name,Ue.node)),F.trackChildChange(na(c,y))),ue.updateImmediateChild(c,y).updateImmediateChild(Ue.name,fr.EMPTY_NODE)):u}}class Nn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Er}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jr}copy(){const u=new Nn;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function No(h,u,c){const y=h.copy();return y.startSet_=!0,void 0===u&&(u=null),y.indexStartValue_=u,null!=c?(y.startNameSet_=!0,y.indexStartName_=c):(y.startNameSet_=!1,y.indexStartName_=""),y}function To(h,u,c){const y=h.copy();return y.endSet_=!0,void 0===u&&(u=null),y.indexEndValue_=u,void 0!==c?(y.endNameSet_=!0,y.indexEndName_=c):(y.endNameSet_=!1,y.indexEndName_=""),y}function Fs(h,u){const c=h.copy();return c.index_=u,c}function ho(h){const u={};if(h.isDefault())return u;let c;if(h.index_===jr?c="$priority":h.index_===sl?c="$value":h.index_===qe?c="$key":((0,Y.hu)(h.index_ instanceof Na,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,Y.Wl)(c),h.startSet_){const y=h.startAfterSet_?"startAfter":"startAt";u[y]=(0,Y.Wl)(h.indexStartValue_),h.startNameSet_&&(u[y]+=","+(0,Y.Wl)(h.indexStartName_))}if(h.endSet_){const y=h.endBeforeSet_?"endBefore":"endAt";u[y]=(0,Y.Wl)(h.indexEndValue_),h.endNameSet_&&(u[y]+=","+(0,Y.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function Oa(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_),u.sin=!h.startAfterSet_),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_),u.ein=!h.endBeforeSet_),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==jr&&(u.i=h.index_.toString()),u}class So extends Ss{constructor(u,c,y,T){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=y,this.appCheckTokenProvider_=T,this.log_=Cn("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,Y.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,y,T){const F=u._path.toString();this.log_("Listen called for "+F+" "+u._queryIdentifier);const q=So.getListenId_(u,y),ue={};this.listens_[q]=ue;const Ce=ho(u._queryParams);this.restRequest_(F+".json",Ce,(Ue,xt)=>{let kt=xt;if(404===Ue&&(kt=null,Ue=null),null===Ue&&this.onDataUpdate_(F,kt,!1,y),(0,Y.DV)(this.listens_,q)===ue){let Wt;Wt=Ue?401===Ue?"permission_denied":"rest_error:"+Ue:"ok",T(Wt,null)}})}unlisten(u,c){const y=So.getListenId_(u,c);delete this.listens_[y]}get(u){const c=ho(u._queryParams),y=u._path.toString(),T=new Y.BH;return this.restRequest_(y+".json",c,(F,q)=>{let ue=q;404===F&&(ue=null,F=null),null===F?(this.onDataUpdate_(y,ue,!1,null),T.resolve(ue)):T.reject(new Error(ue))}),T.promise}refreshAuthToken(u){}restRequest_(u,c={},y){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,F])=>{T&&T.accessToken&&(c.auth=T.accessToken),F&&F.token&&(c.ac=F.token);const q=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(c);this.log_("Sending REST request for "+q);const ue=new XMLHttpRequest;ue.onreadystatechange=()=>{if(y&&4===ue.readyState){this.log_("REST Response for "+q+" received. status:",ue.status,"response:",ue.responseText);let Ce=null;if(ue.status>=200&&ue.status<300){try{Ce=(0,Y.cI)(ue.responseText)}catch{Qn("Failed to parse JSON response for "+q+": "+ue.responseText)}y(null,Ce)}else 401!==ue.status&&404!==ue.status&&Qn("Got unsuccessful REST response for "+q+" Status: "+ue.status),y(ue.status);y=null}},ue.open("GET",q,!0),ue.send()})}}class ko{constructor(){this.rootNode_=fr.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function Zs(){return{value:null,children:new Map}}function bo(h,u,c){if(lr(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const y=vr(u);h.children.has(y)||h.children.set(y,Zs()),bo(h.children.get(y),u=Mr(u),c)}}function ou(h,u){if(lr(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(jr,(y,T)=>{bo(h,new Or(y),T)}),ou(h,u)}}if(h.children.size>0){const c=vr(u);return u=Mr(u),h.children.has(c)&&ou(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function Pl(h,u,c){null!==h.value?c(u,h.value):function Vs(h,u){h.children.forEach((c,y)=>{u(y,c)})}(h,(y,T)=>{Pl(T,new Or(u.toString()+"/"+y),c)})}class Lo{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&jn(this.last_,(y,T)=>{c[y]=c[y]-T}),this.last_=u,c}}class xl{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Lo(u);const y=1e4+2e4*Math.random();Xr(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const u=this.statsListener_.get(),c={};let y=!1;jn(u,(T,F)=>{F>0&&(0,Y.r3)(this.statsToReport_,T)&&(c[T]=F,y=!0)}),y&&this.server_.reportStats(c),Xr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var is=(()=>{return(h=is||(is={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",is;var h})();function pa(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class za{constructor(u,c,y){this.path=u,this.affectedTree=c,this.revert=y,this.type=is.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(lr(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Or(u));return new za(Br(),c,this.revert)}}return(0,Y.hu)(vr(this.path)===u,"operationForChild called for unrelated child."),new za(Mr(this.path),this.affectedTree,this.revert)}}class Ol{constructor(u,c){this.source=u,this.path=c,this.type=is.LISTEN_COMPLETE}operationForChild(u){return lr(this.path)?new Ol(this.source,Br()):new Ol(this.source,Mr(this.path))}}class fo{constructor(u,c,y){this.source=u,this.path=c,this.snap=y,this.type=is.OVERWRITE}operationForChild(u){return lr(this.path)?new fo(this.source,Br(),this.snap.getImmediateChild(u)):new fo(this.source,Mr(this.path),this.snap)}}class oo{constructor(u,c,y){this.source=u,this.path=c,this.children=y,this.type=is.MERGE}operationForChild(u){if(lr(this.path)){const c=this.children.subtree(new Or(u));return c.isEmpty()?null:c.value?new fo(this.source,Br(),c.value):new oo(this.source,Br(),c)}return(0,Y.hu)(vr(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new oo(this.source,Mr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fi{constructor(u,c,y){this.node_=u,this.fullyInitialized_=c,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(lr(u))return this.isFullyInitialized()&&!this.filtered_;const c=vr(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Vo{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function ga(h,u,c,y,T,F){const q=y.filter(ue=>ue.type===c);q.sort((ue,Ce)=>function lu(h,u,c){if(null==u.childName||null==c.childName)throw(0,Y.g5)("Should only compare child_ events.");const y=new X(u.childName,u.snapshotNode),T=new X(c.childName,c.snapshotNode);return h.index_.compare(y,T)}(h,ue,Ce)),q.forEach(ue=>{const Ce=function Wa(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,ue,F);T.forEach(Ue=>{Ue.respondsTo(ue.type)&&u.push(Ue.createEvent(Ce,h.query_))})})}function al(h,u){return{eventCache:h,serverCache:u}}function ql(h,u,c,y){return al(new fi(u,c,y),h.serverCache)}function uc(h,u,c,y){return al(h.eventCache,new fi(u,c,y))}function ka(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Ga(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let uu;class Z{constructor(u,c=(()=>(uu||(uu=new dn(Xt)),uu))()){this.value=u,this.children=c}static fromObject(u){let c=new Z(null);return jn(u,(y,T)=>{c=c.set(new Or(y),T)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Br(),value:this.value};if(lr(u))return null;{const y=vr(u),T=this.children.get(y);if(null!==T){const F=T.findRootMostMatchingPathAndValue(Mr(u),c);return null!=F?{path:Tr(new Or(y),F.path),value:F.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(lr(u))return this;{const c=vr(u),y=this.children.get(c);return null!==y?y.subtree(Mr(u)):new Z(null)}}set(u,c){if(lr(u))return new Z(c,this.children);{const y=vr(u),F=(this.children.get(y)||new Z(null)).set(Mr(u),c),q=this.children.insert(y,F);return new Z(this.value,q)}}remove(u){if(lr(u))return this.children.isEmpty()?new Z(null):new Z(null,this.children);{const c=vr(u),y=this.children.get(c);if(y){const T=y.remove(Mr(u));let F;return F=T.isEmpty()?this.children.remove(c):this.children.insert(c,T),null===this.value&&F.isEmpty()?new Z(null):new Z(this.value,F)}return this}}get(u){if(lr(u))return this.value;{const c=vr(u),y=this.children.get(c);return y?y.get(Mr(u)):null}}setTree(u,c){if(lr(u))return c;{const y=vr(u),F=(this.children.get(y)||new Z(null)).setTree(Mr(u),c);let q;return q=F.isEmpty()?this.children.remove(y):this.children.insert(y,F),new Z(this.value,q)}}fold(u){return this.fold_(Br(),u)}fold_(u,c){const y={};return this.children.inorderTraversal((T,F)=>{y[T]=F.fold_(Tr(u,T),c)}),c(u,this.value,y)}findOnPath(u,c){return this.findOnPath_(u,Br(),c)}findOnPath_(u,c,y){const T=!!this.value&&y(c,this.value);if(T)return T;if(lr(u))return null;{const F=vr(u),q=this.children.get(F);return q?q.findOnPath_(Mr(u),Tr(c,F),y):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Br(),c)}foreachOnPath_(u,c,y){if(lr(u))return this;{this.value&&y(c,this.value);const T=vr(u),F=this.children.get(T);return F?F.foreachOnPath_(Mr(u),Tr(c,T),y):new Z(null)}}foreach(u){this.foreach_(Br(),u)}foreach_(u,c){this.children.inorderTraversal((y,T)=>{T.foreach_(Tr(u,y),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,y)=>{y.value&&u(c,y.value)})}}class ${constructor(u){this.writeTree_=u}static empty(){return new $(new Z(null))}}function ae(h,u,c){if(lr(u))return new $(new Z(c));{const y=h.writeTree_.findRootMostValueAndPath(u);if(null!=y){const T=y.path;let F=y.value;const q=vi(T,u);return F=F.updateChild(q,c),new $(h.writeTree_.set(T,F))}{const T=new Z(c),F=h.writeTree_.setTree(u,T);return new $(F)}}}function Me(h,u,c){let y=h;return jn(c,(T,F)=>{y=ae(y,Tr(u,T),F)}),y}function wt(h,u){if(lr(u))return $.empty();{const c=h.writeTree_.setTree(u,new Z(null));return new $(c)}}function Ft(h,u){return null!=sn(h,u)}function sn(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(vi(c.path,u)):null}function Si(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(jr,(y,T)=>{u.push(new X(y,T))}):h.writeTree_.children.inorderTraversal((y,T)=>{null!=T.value&&u.push(new X(y,T.value))}),u}function yr(h,u){if(lr(u))return h;{const c=sn(h,u);return new $(null!=c?new Z(c):h.writeTree_.subtree(u))}}function ui(h){return h.writeTree_.isEmpty()}function kn(h,u){return Vt(Br(),h.writeTree_,u)}function Vt(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let y=null;return u.children.inorderTraversal((T,F)=>{".priority"===T?((0,Y.hu)(null!==F.value,"Priority writes must always be leaf nodes"),y=F.value):c=Vt(Tr(h,T),F,c)}),!c.getChild(h).isEmpty()&&null!==y&&(c=c.updateChild(Tr(h,".priority"),y)),c}}function ir(h,u){return Zl(u,h)}function Ws(h,u){if(h.snap)return Bi(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&Bi(Tr(h.path,c),u))return!0;return!1}function pt(h){return h.visible}function Bt(h,u,c){let y=$.empty();for(let T=0;T<h.length;++T){const F=h[T];if(u(F)){const q=F.path;let ue;if(F.snap)Bi(c,q)?(ue=vi(c,q),y=ae(y,ue,F.snap)):Bi(q,c)&&(ue=vi(q,c),y=ae(y,Br(),F.snap.getChild(ue)));else{if(!F.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(Bi(c,q))ue=vi(c,q),y=Me(y,ue,F.children);else if(Bi(q,c))if(ue=vi(q,c),lr(ue))y=Me(y,Br(),F.children);else{const Ce=(0,Y.DV)(F.children,vr(ue));if(Ce){const Ue=Ce.getChild(Mr(ue));y=ae(y,Br(),Ue)}}}}}return y}function Us(h,u,c,y,T){if(y||T){const F=yr(h.visibleWrites,u);return!T&&ui(F)?c:T||null!=c||Ft(F,Br())?kn(Bt(h.allWrites,function(Ue){return(Ue.visible||T)&&(!y||!~y.indexOf(Ue.writeId))&&(Bi(Ue.path,u)||Bi(u,Ue.path))},u),c||fr.EMPTY_NODE):null}{const F=sn(h.visibleWrites,u);if(null!=F)return F;{const q=yr(h.visibleWrites,u);return ui(q)?c:null!=c||Ft(q,Br())?kn(q,c||fr.EMPTY_NODE):null}}}function du(h,u,c,y){return Us(h.writeTree,h.treePath,u,c,y)}function Cu(h,u){return function bu(h,u,c){let y=fr.EMPTY_NODE;const T=sn(h.visibleWrites,u);if(T)return T.isLeafNode()||T.forEachChild(jr,(F,q)=>{y=y.updateImmediateChild(F,q)}),y;if(c){const F=yr(h.visibleWrites,u);return c.forEachChild(jr,(q,ue)=>{const Ce=kn(yr(F,new Or(q)),ue);y=y.updateImmediateChild(q,Ce)}),Si(F).forEach(q=>{y=y.updateImmediateChild(q.name,q.node)}),y}return Si(yr(h.visibleWrites,u)).forEach(q=>{y=y.updateImmediateChild(q.name,q.node)}),y}(h.writeTree,h.treePath,u)}function ll(h,u,c,y){return function Vc(h,u,c,y,T){(0,Y.hu)(y||T,"Either existingEventSnap or existingServerSnap must exist");const F=Tr(u,c);if(Ft(h.visibleWrites,F))return null;{const q=yr(h.visibleWrites,F);return ui(q)?T.getChild(c):kn(q,T.getChild(c))}}(h.writeTree,h.treePath,u,c,y)}function Pu(h,u){return function cu(h,u){return sn(h.visibleWrites,u)}(h.writeTree,Tr(h.treePath,u))}function Wn(h,u,c){return function Gu(h,u,c,y){const T=Tr(u,c),F=sn(h.visibleWrites,T);return null!=F?F:y.isCompleteForChild(c)?kn(yr(h.visibleWrites,T),y.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function ul(h,u){return Zl(Tr(h.treePath,u),h.writeTree)}function Zl(h,u){return{treePath:h,writeTree:u}}class ps{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,y=u.childName;(0,Y.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(y);if(T){const F=T.type;if("child_added"===c&&"child_removed"===F)this.changeMap.set(y,L(y,u.snapshotNode,T.snapshotNode));else if("child_removed"===c&&"child_added"===F)this.changeMap.delete(y);else if("child_removed"===c&&"child_changed"===F)this.changeMap.set(y,Ml(y,T.oldSnap));else if("child_changed"===c&&"child_added"===F)this.changeMap.set(y,na(y,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==F)throw(0,Y.g5)("Illegal combination of changes: "+u+" occurred after "+T);this.changeMap.set(y,L(y,u.snapshotNode,T.oldSnap))}}else this.changeMap.set(y,u)}getChanges(){return Array.from(this.changeMap.values())}}const Ka=new class ar{getCompleteChild(u){return null}getChildAfterChild(u,c,y){return null}};class wr{constructor(u,c,y=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=y}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const y=null!=this.optCompleteServerCache_?new fi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wn(this.writes_,u,y)}}getChildAfterChild(u,c,y){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ga(this.viewCache_),F=function Bs(h,u,c,y,T,F){return function cc(h,u,c,y,T,F,q){let ue;const Ce=yr(h.visibleWrites,u),Ue=sn(Ce,Br());if(null!=Ue)ue=Ue;else{if(null==c)return[];ue=kn(Ce,c)}if(ue=ue.withIndex(q),ue.isEmpty()||ue.isLeafNode())return[];{const xt=[],kt=q.getCompare(),Wt=F?ue.getReverseIteratorFrom(y,q):ue.getIteratorFrom(y,q);let Fn=Wt.getNext();for(;Fn&&xt.length<T;)0!==kt(Fn,y)&&xt.push(Fn),Fn=Wt.getNext();return xt}}(h.writeTree,h.treePath,u,c,y,T,F)}(this.writes_,T,c,1,y,u);return 0===F.length?null:F[0]}}function Ys(h,u,c,y,T,F){const q=u.eventCache;if(null!=Pu(y,c))return u;{let ue,Ce;if(lr(c))if((0,Y.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ue=Ga(u),kt=Cu(y,Ue instanceof fr?Ue:fr.EMPTY_NODE);ue=h.filter.updateFullNode(u.eventCache.getNode(),kt,F)}else{const Ue=du(y,Ga(u));ue=h.filter.updateFullNode(u.eventCache.getNode(),Ue,F)}else{const Ue=vr(c);if(".priority"===Ue){(0,Y.hu)(1===As(c),"Can't have a priority with additional path components");const xt=q.getNode();Ce=u.serverCache.getNode();const kt=ll(y,c,xt,Ce);ue=null!=kt?h.filter.updatePriority(xt,kt):q.getNode()}else{const xt=Mr(c);let kt;if(q.isCompleteForChild(Ue)){Ce=u.serverCache.getNode();const Wt=ll(y,c,q.getNode(),Ce);kt=null!=Wt?q.getNode().getImmediateChild(Ue).updateChild(xt,Wt):q.getNode().getImmediateChild(Ue)}else kt=Wn(y,Ue,u.serverCache);ue=null!=kt?h.filter.updateChild(q.getNode(),Ue,kt,xt,T,F):q.getNode()}}return ql(u,ue,q.isFullyInitialized()||lr(c),h.filter.filtersNodes())}}function Bo(h,u,c,y,T,F,q,ue){const Ce=u.serverCache;let Ue;const xt=q?h.filter:h.filter.getIndexedFilter();if(lr(c))Ue=xt.updateFullNode(Ce.getNode(),y,null);else if(xt.filtersNodes()&&!Ce.isFiltered()){const Fn=Ce.getNode().updateChild(c,y);Ue=xt.updateFullNode(Ce.getNode(),Fn,null)}else{const Fn=vr(c);if(!Ce.isCompleteForPath(c)&&As(c)>1)return u;const ur=Mr(c),Ra=Ce.getNode().getImmediateChild(Fn).updateChild(ur,y);Ue=".priority"===Fn?xt.updatePriority(Ce.getNode(),Ra):xt.updateChild(Ce.getNode(),Fn,Ra,ur,Ka,null)}const kt=uc(u,Ue,Ce.isFullyInitialized()||lr(c),xt.filtersNodes());return Ys(h,kt,c,T,new wr(T,kt,F),ue)}function cl(h,u,c,y,T,F,q){const ue=u.eventCache;let Ce,Ue;const xt=new wr(T,u,F);if(lr(c))Ue=h.filter.updateFullNode(u.eventCache.getNode(),y,q),Ce=ql(u,Ue,!0,h.filter.filtersNodes());else{const kt=vr(c);if(".priority"===kt)Ue=h.filter.updatePriority(u.eventCache.getNode(),y),Ce=ql(u,Ue,ue.isFullyInitialized(),ue.isFiltered());else{const Wt=Mr(c),Fn=ue.getNode().getImmediateChild(kt);let ur;if(lr(Wt))ur=y;else{const Zi=xt.getCompleteChild(kt);ur=null!=Zi?".priority"===da(Wt)&&Zi.getChild(ys(Wt)).isEmpty()?Zi:Zi.updateChild(Wt,y):fr.EMPTY_NODE}Ce=Fn.equals(ur)?u:ql(u,h.filter.updateChild(ue.getNode(),kt,ur,Wt,xt,q),ue.isFullyInitialized(),h.filter.filtersNodes())}}return Ce}function hu(h,u){return h.eventCache.isCompleteForChild(u)}function ra(h,u,c){return c.foreach((y,T)=>{u=u.updateChild(y,T)}),u}function ia(h,u,c,y,T,F,q,ue){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ue,Ce=u;Ue=lr(c)?y:new Z(null).setTree(c,y);const xt=u.serverCache.getNode();return Ue.children.inorderTraversal((kt,Wt)=>{if(xt.hasChild(kt)){const ur=ra(0,u.serverCache.getNode().getImmediateChild(kt),Wt);Ce=Bo(h,Ce,new Or(kt),ur,T,F,q,ue)}}),Ue.children.inorderTraversal((kt,Wt)=>{const Fn=!u.serverCache.isCompleteForChild(kt)&&null===Wt.value;if(!xt.hasChild(kt)&&!Fn){const Zi=ra(0,u.serverCache.getNode().getImmediateChild(kt),Wt);Ce=Bo(h,Ce,new Or(kt),Zi,T,F,q,ue)}}),Ce}class hl{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const y=this.query_._queryParams,T=new B(y.getIndex()),F=function Ni(h){return h.loadsAllData()?new B(h.getIndex()):h.hasLimit()?new st(h):new le(h)}(y);this.processor_=function Ku(h){return{filter:h}}(F);const q=c.serverCache,ue=c.eventCache,Ce=T.updateFullNode(fr.EMPTY_NODE,q.getNode(),null),Ue=F.updateFullNode(fr.EMPTY_NODE,ue.getNode(),null),xt=new fi(Ce,q.isFullyInitialized(),T.filtersNodes()),kt=new fi(Ue,ue.isFullyInitialized(),F.filtersNodes());this.viewCache_=al(kt,xt),this.eventGenerator_=new Vo(this.query_)}get query(){return this.query_}}function qa(h,u){const c=Ga(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!lr(u)&&!c.getImmediateChild(vr(u)).isEmpty())?c.getChild(u):null}function ft(h){return 0===h.eventRegistrations_.length}function ci(h,u,c){const y=[];if(c){(0,Y.hu)(null==u,"A cancel should cancel all event registrations.");const T=h.query._path;h.eventRegistrations_.forEach(F=>{const q=F.createCancelEvent(c,T);q&&y.push(q)})}if(u){let T=[];for(let F=0;F<h.eventRegistrations_.length;++F){const q=h.eventRegistrations_[F];if(q.matches(u)){if(u.hasAnyCallback()){T=T.concat(h.eventRegistrations_.slice(F+1));break}}else T.push(q)}h.eventRegistrations_=T}else h.eventRegistrations_=[];return y}function fu(h,u,c,y){u.type===is.MERGE&&null!==u.source.queryId&&((0,Y.hu)(Ga(h.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(ka(h.viewCache_),"Missing event cache, even though we have a server cache"));const T=h.viewCache_,F=function _n(h,u,c,y,T){const F=new ps;let q,ue;if(c.type===is.OVERWRITE){const Ue=c;Ue.source.fromUser?q=cl(h,u,Ue.path,Ue.snap,y,T,F):((0,Y.hu)(Ue.source.fromServer,"Unknown source."),ue=Ue.source.tagged||u.serverCache.isFiltered()&&!lr(Ue.path),q=Bo(h,u,Ue.path,Ue.snap,y,T,ue,F))}else if(c.type===is.MERGE){const Ue=c;Ue.source.fromUser?q=function kl(h,u,c,y,T,F,q){let ue=u;return y.foreach((Ce,Ue)=>{const xt=Tr(c,Ce);hu(u,vr(xt))&&(ue=cl(h,ue,xt,Ue,T,F,q))}),y.foreach((Ce,Ue)=>{const xt=Tr(c,Ce);hu(u,vr(xt))||(ue=cl(h,ue,xt,Ue,T,F,q))}),ue}(h,u,Ue.path,Ue.children,y,T,F):((0,Y.hu)(Ue.source.fromServer,"Unknown source."),ue=Ue.source.tagged||u.serverCache.isFiltered(),q=ia(h,u,Ue.path,Ue.children,y,T,ue,F))}else if(c.type===is.ACK_USER_WRITE){const Ue=c;q=Ue.revert?function dl(h,u,c,y,T,F){let q;if(null!=Pu(y,c))return u;{const ue=new wr(y,u,T),Ce=u.eventCache.getNode();let Ue;if(lr(c)||".priority"===vr(c)){let xt;if(u.serverCache.isFullyInitialized())xt=du(y,Ga(u));else{const kt=u.serverCache.getNode();(0,Y.hu)(kt instanceof fr,"serverChildren would be complete if leaf node"),xt=Cu(y,kt)}Ue=h.filter.updateFullNode(Ce,xt,F)}else{const xt=vr(c);let kt=Wn(y,xt,u.serverCache);null==kt&&u.serverCache.isCompleteForChild(xt)&&(kt=Ce.getImmediateChild(xt)),Ue=null!=kt?h.filter.updateChild(Ce,xt,kt,Mr(c),ue,F):u.eventCache.getNode().hasChild(xt)?h.filter.updateChild(Ce,xt,fr.EMPTY_NODE,Mr(c),ue,F):Ce,Ue.isEmpty()&&u.serverCache.isFullyInitialized()&&(q=du(y,Ga(u)),q.isLeafNode()&&(Ue=h.filter.updateFullNode(Ue,q,F)))}return q=u.serverCache.isFullyInitialized()||null!=Pu(y,Br()),ql(u,Ue,q,h.filter.filtersNodes())}}(h,u,Ue.path,y,T,F):function ya(h,u,c,y,T,F,q){if(null!=Pu(T,c))return u;const ue=u.serverCache.isFiltered(),Ce=u.serverCache;if(null!=y.value){if(lr(c)&&Ce.isFullyInitialized()||Ce.isCompleteForPath(c))return Bo(h,u,c,Ce.getNode().getChild(c),T,F,ue,q);if(lr(c)){let Ue=new Z(null);return Ce.getNode().forEachChild(qe,(xt,kt)=>{Ue=Ue.set(new Or(xt),kt)}),ia(h,u,c,Ue,T,F,ue,q)}return u}{let Ue=new Z(null);return y.foreach((xt,kt)=>{const Wt=Tr(c,xt);Ce.isCompleteForPath(Wt)&&(Ue=Ue.set(xt,Ce.getNode().getChild(Wt)))}),ia(h,u,c,Ue,T,F,ue,q)}}(h,u,Ue.path,Ue.affectedTree,y,T,F)}else{if(c.type!==is.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+c.type);q=function po(h,u,c,y,T){const F=u.serverCache;return Ys(h,uc(u,F.getNode(),F.isFullyInitialized()||lr(c),F.isFiltered()),c,y,Ka,T)}(h,u,c.path,y,F)}const Ce=F.getChanges();return function La(h,u,c){const y=u.eventCache;if(y.isFullyInitialized()){const T=y.getNode().isLeafNode()||y.getNode().isEmpty(),F=ka(h);(c.length>0||!h.eventCache.isFullyInitialized()||T&&!y.getNode().equals(F)||!y.getNode().getPriority().equals(F.getPriority()))&&c.push(Rl(ka(u)))}}(u,q,Ce),{viewCache:q,changes:Ce}}(h.processor_,T,u,c,y);return function zr(h,u){(0,Y.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,F.viewCache),(0,Y.hu)(F.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=F.viewCache,Ll(h,F.changes,F.viewCache.eventCache.getNode(),null)}function Ll(h,u,c,y){return function fs(h,u,c,y){const T=[],F=[];return u.forEach(q=>{"child_changed"===q.type&&h.index_.indexedValueChanged(q.oldSnap,q.snapshotNode)&&F.push(function H(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(q.childName,q.snapshotNode))}),ga(h,T,"child_removed",u,y,c),ga(h,T,"child_added",u,y,c),ga(h,T,"child_moved",F,y,c),ga(h,T,"child_changed",u,y,c),ga(h,T,"value",u,y,c),T}(h.eventGenerator_,u,c,y?[y]:h.eventRegistrations_)}let Za,D;class Xo{constructor(){this.views=new Map}}function qu(h,u,c,y){const T=u.source.queryId;if(null!==T){const F=h.views.get(T);return(0,Y.hu)(null!=F,"SyncTree gave us an op for an invalid query."),fu(F,u,c,y)}{let F=[];for(const q of h.views.values())F=F.concat(fu(q,u,c,y));return F}}function Ao(h,u,c,y,T){const q=h.views.get(u._queryIdentifier);if(!q){let ue=du(c,T?y:null),Ce=!1;ue?Ce=!0:y instanceof fr?(ue=Cu(c,y),Ce=!1):(ue=fr.EMPTY_NODE,Ce=!1);const Ue=al(new fi(ue,Ce,!1),new fi(y,T,!1));return new hl(u,Ue)}return q}function fl(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function Ds(h,u){let c=null;for(const y of h.views.values())c=c||qa(y,u);return c}function Ro(h,u){return u._queryParams.loadsAllData()?va(h):h.views.get(u._queryIdentifier)}function _a(h,u){return null!=Ro(h,u)}function js(h){return null!=va(h)}function va(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let O=1;class G{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Z(null),this.pendingWriteTree_=function ma(){return{visibleWrites:$.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function se(h,u,c,y,T){return function $i(h,u,c,y,T){(0,Y.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),h.allWrites.push({path:u,snap:c,writeId:y,visible:T}),T&&(h.visibleWrites=ae(h.visibleWrites,u,c)),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y,T),T?pl(h,new fo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function et(h,u,c=!1){const y=function pn(h,u){for(let c=0;c<h.allWrites.length;c++){const y=h.allWrites[c];if(y.writeId===u)return y}return null}(h.pendingWriteTree_,u);if(function Ln(h,u){const c=h.allWrites.findIndex(ue=>ue.writeId===u);(0,Y.hu)(c>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[c];h.allWrites.splice(c,1);let T=y.visible,F=!1,q=h.allWrites.length-1;for(;T&&q>=0;){const ue=h.allWrites[q];ue.visible&&(q>=c&&Ws(ue,y.path)?T=!1:Bi(y.path,ue.path)&&(F=!0)),q--}return!!T&&(F?(function rn(h){h.visibleWrites=Bt(h.allWrites,pt,Br()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=wt(h.visibleWrites,y.path):jn(y.children,Ce=>{h.visibleWrites=wt(h.visibleWrites,Tr(y.path,Ce))}),!0))}(h.pendingWriteTree_,u)){let F=new Z(null);return null!=y.snap?F=F.set(Br(),!0):jn(y.children,q=>{F=F.set(new Or(q),!0)}),pl(h,new za(y.path,F,c))}return[]}function Nt(h,u,c){return pl(h,new fo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function us(h,u,c,y,T=!1){const F=u._path,q=h.syncPointTree_.get(F);let ue=[];if(q&&("default"===u._queryIdentifier||_a(q,u))){const Ce=function Ya(h,u,c,y){const T=u._queryIdentifier,F=[];let q=[];const ue=js(h);if("default"===T)for(const[Ce,Ue]of h.views.entries())q=q.concat(ci(Ue,c,y)),ft(Ue)&&(h.views.delete(Ce),Ue.query._queryParams.loadsAllData()||F.push(Ue.query));else{const Ce=h.views.get(T);Ce&&(q=q.concat(ci(Ce,c,y)),ft(Ce)&&(h.views.delete(T),Ce.query._queryParams.loadsAllData()||F.push(Ce.query)))}return ue&&!js(h)&&F.push(new(function dc(){return(0,Y.hu)(Za,"Reference.ts has not been loaded"),Za}())(u._repo,u._path)),{removed:F,events:q}}(q,u,c,y);(function Ql(h){return 0===h.views.size})(q)&&(h.syncPointTree_=h.syncPointTree_.remove(F));const Ue=Ce.removed;if(ue=Ce.events,!T){const xt=-1!==Ue.findIndex(Wt=>Wt._queryParams.loadsAllData()),kt=h.syncPointTree_.findOnPath(F,(Wt,Fn)=>js(Fn));if(xt&&!kt){const Wt=h.syncPointTree_.subtree(F);if(!Wt.isEmpty()){const Fn=function gs(h){return h.fold((u,c,y)=>{if(c&&js(c))return[va(c)];{let T=[];return c&&(T=fl(c)),jn(y,(F,q)=>{T=T.concat(q)}),T}})}(Wt);for(let ur=0;ur<Fn.length;++ur){const Zi=Fn[ur],Ra=Zi.query,Ec=gl(h,Zi);h.listenProvider_.startListening(lo(Ra),Qa(h,Ra),Ec.hashFn,Ec.onComplete)}}}!kt&&Ue.length>0&&!y&&(xt?h.listenProvider_.stopListening(lo(u),null):Ue.forEach(Wt=>{const Fn=h.queryToTagMap.get(Qs(Wt));h.listenProvider_.stopListening(lo(Wt),Fn)}))}!function $s(h,u){for(let c=0;c<u.length;++c){const y=u[c];if(!y._queryParams.loadsAllData()){const T=Qs(y),F=h.queryToTagMap.get(T);h.queryToTagMap.delete(T),h.tagToQueryMap.delete(F)}}}(h,Ue)}return ue}function jo(h,u,c,y){const T=Jo(h,y);if(null!=T){const F=Xa(T),q=F.path,ue=F.queryId,Ce=vi(q,u);return hc(h,q,new fo(pa(ue),Ce,c))}return[]}function ao(h,u,c,y=!1){const T=u._path;let F=null,q=!1;h.syncPointTree_.foreachOnPath(T,(Wt,Fn)=>{const ur=vi(Wt,T);F=F||Ds(Fn,ur),q=q||js(Fn)});let Ce,ue=h.syncPointTree_.get(T);ue?(q=q||js(ue),F=F||Ds(ue,Br())):(ue=new Xo,h.syncPointTree_=h.syncPointTree_.set(T,ue)),null!=F?Ce=!0:(Ce=!1,F=fr.EMPTY_NODE,h.syncPointTree_.subtree(T).foreachChild((Fn,ur)=>{const Zi=Ds(ur,Br());Zi&&(F=F.updateImmediateChild(Fn,Zi))}));const Ue=_a(ue,u);if(!Ue&&!u._queryParams.loadsAllData()){const Wt=Qs(u);(0,Y.hu)(!h.queryToTagMap.has(Wt),"View does not exist, but we have a tag");const Fn=function cs(){return O++}();h.queryToTagMap.set(Wt,Fn),h.tagToQueryMap.set(Fn,Wt)}let kt=function Ns(h,u,c,y,T,F){const q=Ao(h,u,y,T,F);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,q),function Du(h,u){h.eventRegistrations_.push(u)}(q,c),function xu(h,u){const c=h.viewCache_.eventCache,y=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(jr,(F,q)=>{y.push(na(F,q))}),c.isFullyInitialized()&&y.push(Rl(c.getNode())),Ll(h,y,c.getNode(),u)}(q,c)}(ue,u,c,ir(h.pendingWriteTree_,T),F,Ce);if(!Ue&&!q&&!y){const Wt=Ro(ue,u);kt=kt.concat(function Yu(h,u,c){const y=u._path,T=Qa(h,u),F=gl(h,c),q=h.listenProvider_.startListening(lo(u),T,F.hashFn,F.onComplete),ue=h.syncPointTree_.subtree(y);if(T)(0,Y.hu)(!js(ue.value),"If we're adding a query, it shouldn't be shadowed");else{const Ce=ue.fold((Ue,xt,kt)=>{if(!lr(Ue)&&xt&&js(xt))return[va(xt).query];{let Wt=[];return xt&&(Wt=Wt.concat(fl(xt).map(Fn=>Fn.query))),jn(kt,(Fn,ur)=>{Wt=Wt.concat(ur)}),Wt}});for(let Ue=0;Ue<Ce.length;++Ue){const xt=Ce[Ue];h.listenProvider_.stopListening(lo(xt),Qa(h,xt))}}return q}(h,u,Wt))}return kt}function Xi(h,u,c){const T=h.pendingWriteTree_,F=h.syncPointTree_.findOnPath(u,(q,ue)=>{const Ue=Ds(ue,vi(q,u));if(Ue)return Ue});return Us(T,u,F,c,!0)}function pl(h,u){return Fa(u,h.syncPointTree_,null,ir(h.pendingWriteTree_,Br()))}function Fa(h,u,c,y){if(lr(h.path))return Zu(h,u,c,y);{const T=u.get(Br());null==c&&null!=T&&(c=Ds(T,Br()));let F=[];const q=vr(h.path),ue=h.operationForChild(q),Ce=u.children.get(q);if(Ce&&ue){const Ue=c?c.getImmediateChild(q):null,xt=ul(y,q);F=F.concat(Fa(ue,Ce,Ue,xt))}return T&&(F=F.concat(qu(T,h,y,c))),F}}function Zu(h,u,c,y){const T=u.get(Br());null==c&&null!=T&&(c=Ds(T,Br()));let F=[];return u.children.inorderTraversal((q,ue)=>{const Ce=c?c.getImmediateChild(q):null,Ue=ul(y,q),xt=h.operationForChild(q);xt&&(F=F.concat(Zu(xt,ue,Ce,Ue)))}),T&&(F=F.concat(qu(T,h,y,c))),F}function gl(h,u){const c=u.query,y=Qa(h,c);return{hashFn:()=>(function Yl(h){return h.viewCache_.serverCache.getNode()}(u)||fr.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return y?function Li(h,u,c){const y=Jo(h,c);if(y){const T=Xa(y),F=T.path,q=T.queryId,ue=vi(F,u);return hc(h,F,new Ol(pa(q),ue))}return[]}(h,c._path,y):function Sn(h,u){return pl(h,new Ol({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const F=function cn(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const y=new Error(h+" at "+u._path.toString()+": "+c);return y.code=h.toUpperCase(),y}(T,c);return us(h,c,null,F)}}}}function Qa(h,u){const c=Qs(u);return h.queryToTagMap.get(c)}function Qs(h){return h._path.toString()+"$"+h._queryIdentifier}function Jo(h,u){return h.tagToQueryMap.get(u)}function Xa(h){const u=h.indexOf("$");return(0,Y.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Or(h.substr(0,u))}}function hc(h,u,c){const y=h.syncPointTree_.get(u);return(0,Y.hu)(y,"Missing sync point for query tag that we're tracking"),qu(y,c,ir(h.pendingWriteTree_,u),null)}function lo(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function b(){return(0,Y.hu)(D,"Reference.ts has not been loaded"),D}())(h._repo,h._path):h}class pu{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new pu(c)}node(){return this.node_}}class $o{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Tr(this.path_,u);return new $o(this.syncTree_,c)}node(){return Xi(this.syncTree_,this.path_)}}const Dc=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},td=function(h,u,c){return h&&"object"==typeof h?((0,Y.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?go(h[".sv"],u,c):"object"==typeof h[".sv"]?fc(h[".sv"],u):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},go=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+h)},fc=function(h,u,c){h.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,Y.hu)(!1,"Unexpected increment value: "+y);const T=u.node();if((0,Y.hu)(null!==T&&typeof T<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return y;const q=T.getValue();return"number"!=typeof q?y:q+y},Xl=function(h,u,c,y){return Ja(u,new $o(c,h),y)},_s=function(h,u,c){return Ja(h,new pu(u),c)};function Ja(h,u,c){const y=h.getPriority().val(),T=td(y,u.getImmediateChild(".priority"),c);let F;if(h.isLeafNode()){const q=h,ue=td(q.getValue(),u,c);return ue!==q.getValue()||T!==q.getPriority().val()?new gi(ue,ji(T)):h}{const q=h;return F=q,T!==q.getPriority().val()&&(F=F.updatePriority(new gi(T))),q.forEachChild(jr,(ue,Ce)=>{const Ue=Ja(Ce,u.getImmediateChild(ue),c);Ue!==Ce&&(F=F.updateImmediateChild(ue,Ue))}),F}}class Jl{constructor(u="",c=null,y={children:{},childCount:0}){this.name=u,this.parent=c,this.node=y}}function el(h,u){let c=u instanceof Or?u:new Or(u),y=h,T=vr(c);for(;null!==T;){const F=(0,Y.DV)(y.node.children,T)||{children:{},childCount:0};y=new Jl(T,y,F),c=Mr(c),T=vr(c)}return y}function ml(h){return h.node.value}function gu(h,u){h.node.value=u,sa(h)}function Fl(h){return h.node.childCount>0}function Vl(h,u){jn(h.node.children,(c,y)=>{u(new Jl(c,h,y))})}function Va(h,u,c,y){c&&!y&&u(h),Vl(h,T=>{Va(T,u,!0,y)}),c&&y&&u(h)}function _l(h){return new Or(null===h.parent?h.name:_l(h.parent)+"/"+h.name)}function sa(h){null!==h.parent&&function pc(h,u,c){const y=function Ia(h){return void 0===ml(h)&&!Fl(h)}(c),T=(0,Y.r3)(h.node.children,u);y&&T?(delete h.node.children[u],h.node.childCount--,sa(h)):!y&&!T&&(h.node.children[u]=c.node,h.node.childCount++,sa(h))}(h.parent,h.name,h)}const Tu=/[\[\].#$\/\u0000-\u001F\u007F]/,vl=/[\[\].#$\u0000-\u001F\u007F]/,El=10485760,Ul=function(h){return"string"==typeof h&&0!==h.length&&!Tu.test(h)},Nu=function(h){return"string"==typeof h&&0!==h.length&&!vl.test(h)},Bl=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Cr(h)||h&&"object"==typeof h&&(0,Y.r3)(h,".sv")},tl=function(h,u,c,y){y&&void 0===u||ba((0,Y.gK)(h,"value"),u,c)},ba=function(h,u,c){const y=c instanceof Or?new xs(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+to(y));if("function"==typeof u)throw new Error(h+"contains a function "+to(y)+" with contents = "+u.toString());if(Cr(u))throw new Error(h+"contains "+u.toString()+" "+to(y));if("string"==typeof u&&u.length>El/3&&(0,Y.ug)(u)>El)throw new Error(h+"contains a string greater than "+El+" utf8 bytes "+to(y)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let T=!1,F=!1;if(jn(u,(q,ue)=>{if(".value"===q)T=!0;else if(".priority"!==q&&".sv"!==q&&(F=!0,!Ul(q)))throw new Error(h+" contains an invalid key ("+q+") "+to(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function $a(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,Y.ug)(u),Pa(h)})(y,q),ba(h,ue,y),function Yo(h){const u=h.parts_.pop();h.byteLength_-=(0,Y.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),T&&F)throw new Error(h+' contains ".value" child '+to(y)+" in addition to actual children.")}},Ca=function(h,u,c,y){if(y&&void 0===u)return;const T=(0,Y.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(T+" must be an object containing the children to replace.");const F=[];jn(u,(q,ue)=>{const Ce=new Or(q);if(ba(T,ue,Tr(c,Ce)),".priority"===da(Ce)&&!Bl(ue))throw new Error(T+"contains an invalid value for '"+Ce.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");F.push(Ce)}),function(h,u){let c,y;for(c=0;c<u.length;c++){y=u[c];const F=_i(y);for(let q=0;q<F.length;q++)if((".priority"!==F[q]||q!==F.length-1)&&!Ul(F[q]))throw new Error(h+"contains an invalid key ("+F[q]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ii);let T=null;for(c=0;c<u.length;c++){if(y=u[c],null!==T&&Bi(T,y))throw new Error(h+"contains a path "+T.toString()+" that is ancestor of another path "+y.toString());T=y}}(T,F)},Ou=function(h,u,c){if(!c||void 0!==u){if(Cr(u))throw new Error((0,Y.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Bl(u))throw new Error((0,Y.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Da=function(h,u,c,y){if(!(y&&void 0===c||Ul(c)))throw new Error((0,Y.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yu=function(h,u,c,y){if(!(y&&void 0===c||Nu(c)))throw new Error((0,Y.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},nl=function(h,u,c,y){c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),yu(h,u,c,y)},ms=function(h,u){if(".info"===vr(u))throw new Error(h+" failed = Can't modify data under /.info/")},Tc=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!Ul(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Nu(h)}(c))throw new Error((0,Y.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ps{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jl(h,u){let c=null;for(let y=0;y<u.length;y++){const T=u[y],F=T.getPath();null!==c&&!eo(F,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:F}),c.events.push(T)}c&&h.eventLists_.push(c)}function ku(h,u,c){jl(h,c),M(h,y=>eo(y,u))}function oa(h,u,c){jl(h,c),M(h,y=>Bi(y,u)||Bi(u,y))}function M(h,u){h.recursionDepth_++;let c=!0;for(let y=0;y<h.eventLists_.length;y++){const T=h.eventLists_[y];T&&(u(T.path)?(V(h.eventLists_[y]),h.eventLists_[y]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function V(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const y=c.getEventRunner();Ot&&nn("event: "+c.toString()),Qr(y)}}}const te="repo_interrupt",_e=25;class ke{constructor(u,c,y,T){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=y,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ps,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zs(),this.transactionQueueTree_=new Jl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Dt(h){const c=h.infoData_.getNode(new Or(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function mn(h){return Dc({timestamp:Dt(h)})}function gn(h,u,c,y,T){h.dataUpdateCount++;const F=new Or(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let q=[];if(T)if(y){const Ce=(0,Y.UI)(c,Ue=>ji(Ue));q=function Ea(h,u,c,y){const T=Jo(h,y);if(T){const F=Xa(T),q=F.path,ue=F.queryId,Ce=vi(q,u),Ue=Z.fromObject(c);return hc(h,q,new oo(pa(ue),Ce,Ue))}return[]}(h.serverSyncTree_,F,Ce,T)}else{const Ce=ji(c);q=jo(h.serverSyncTree_,F,Ce,T)}else if(y){const Ce=(0,Y.UI)(c,Ue=>ji(Ue));q=function Rn(h,u,c){const y=Z.fromObject(c);return pl(h,new oo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,y))}(h.serverSyncTree_,F,Ce)}else{const Ce=ji(c);q=Nt(h.serverSyncTree_,F,Ce)}let ue=F;q.length>0&&(ue=Hl(h,F)),oa(h.eventQueue_,ue,q)}function Xn(h,u){Fr(h,"connected",u),!1===u&&function Su(h){Il(h,"onDisconnectEvents");const u=mn(h),c=Zs();Pl(h.onDisconnect_,Br(),(T,F)=>{const q=Xl(T,F,h.serverSyncTree_,u);bo(c,T,q)});let y=[];Pl(c,Br(),(T,F)=>{y=y.concat(Nt(h.serverSyncTree_,T,F));const q=P(h,T);Hl(h,q)}),h.onDisconnect_=Zs(),oa(h.eventQueue_,Br(),y)}(h)}function Fr(h,u,c){const y=new Or("/.info/"+u),T=ji(c);h.infoData_.updateSnapshot(y,T);const F=Nt(h.infoSyncTree_,y,T);oa(h.eventQueue_,y,F)}function mo(h){return h.nextWriteId_++}function eu(h,u,c,y,T){Il(h,"set",{path:u.toString(),value:c,priority:y});const F=mn(h),q=ji(c,y),ue=Xi(h.serverSyncTree_,u),Ce=_s(q,ue,F),Ue=mo(h),xt=se(h.serverSyncTree_,u,Ce,Ue,!0);jl(h.eventQueue_,xt),h.server_.put(u.toString(),q.val(!0),(Wt,Fn)=>{const ur="ok"===Wt;ur||Qn("set at "+u+" failed: "+Wt);const Zi=et(h.serverSyncTree_,Ue,!ur);oa(h.eventQueue_,u,Zi),Mo(0,T,Wt,Fn)});const kt=P(h,u);Hl(h,kt),oa(h.eventQueue_,kt,[])}function aa(h,u,c){h.server_.onDisconnectCancel(u.toString(),(y,T)=>{"ok"===y&&ou(h.onDisconnect_,u),Mo(0,c,y,T)})}function Ta(h,u,c,y){const T=ji(c);h.server_.onDisconnectPut(u.toString(),T.val(!0),(F,q)=>{"ok"===F&&bo(h.onDisconnect_,u,T),Mo(0,y,F,q)})}function Xu(h,u,c){let y;y=".info"===vr(u._path)?us(h.infoSyncTree_,u,c):us(h.serverSyncTree_,u,c),ku(h.eventQueue_,u._path,y)}function wl(h){h.persistentConnection_&&h.persistentConnection_.interrupt(te)}function Il(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),nn(c,...u)}function Mo(h,u,c,y){u&&Qr(()=>{if("ok"===c)u(null);else{const T=(c||"error").toUpperCase();let F=T;y&&(F+=": "+y);const q=new Error(F);q.code=T,u(q)}})}function Sc(h,u,c){return Xi(h.serverSyncTree_,u,c)||fr.EMPTY_NODE}function $l(h,u=h.transactionQueueTree_){if(u||w(h,u),ml(u)){const c=A(h,u);(0,Y.hu)(c.length>0,"Sending zero length transaction queue"),c.every(T=>0===T.status)&&function yc(h,u,c){const y=c.map(Ue=>Ue.currentWriteId),T=Sc(h,u,y);let F=T;const q=T.hash();for(let Ue=0;Ue<c.length;Ue++){const xt=c[Ue];(0,Y.hu)(0===xt.status,"tryToSendTransactionQueue_: items in queue should all be run."),xt.status=1,xt.retryCount++;const kt=vi(u,xt.path);F=F.updateChild(kt,xt.currentOutputSnapshotRaw)}const ue=F.val(!0),Ce=u;h.server_.put(Ce.toString(),ue,Ue=>{Il(h,"transaction put response",{path:Ce.toString(),status:Ue});let xt=[];if("ok"===Ue){const kt=[];for(let Wt=0;Wt<c.length;Wt++)c[Wt].status=2,xt=xt.concat(et(h.serverSyncTree_,c[Wt].currentWriteId)),c[Wt].onComplete&&kt.push(()=>c[Wt].onComplete(null,!0,c[Wt].currentOutputSnapshotResolved)),c[Wt].unwatcher();w(h,el(h.transactionQueueTree_,u)),$l(h,h.transactionQueueTree_),oa(h.eventQueue_,u,xt);for(let Wt=0;Wt<kt.length;Wt++)Qr(kt[Wt])}else{if("datastale"===Ue)for(let kt=0;kt<c.length;kt++)c[kt].status=3===c[kt].status?4:0;else{Qn("transaction at "+Ce.toString()+" failed: "+Ue);for(let kt=0;kt<c.length;kt++)c[kt].status=4,c[kt].abortReason=Ue}Hl(h,u)}},q)}(h,_l(u),c)}else Fl(u)&&Vl(u,c=>{$l(h,c)})}function Hl(h,u){const c=Ju(h,u),y=_l(c);return function gd(h,u,c){if(0===u.length)return;const y=[];let T=[];const q=u.filter(ue=>0===ue.status).map(ue=>ue.currentWriteId);for(let ue=0;ue<u.length;ue++){const Ce=u[ue],Ue=vi(c,Ce.path);let kt,xt=!1;if((0,Y.hu)(null!==Ue,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ce.status)xt=!0,kt=Ce.abortReason,T=T.concat(et(h.serverSyncTree_,Ce.currentWriteId,!0));else if(0===Ce.status)if(Ce.retryCount>=_e)xt=!0,kt="maxretry",T=T.concat(et(h.serverSyncTree_,Ce.currentWriteId,!0));else{const Wt=Sc(h,Ce.path,q);Ce.currentInputSnapshot=Wt;const Fn=u[ue].update(Wt.val());if(void 0!==Fn){ba("transaction failed: Data returned ",Fn,Ce.path);let ur=ji(Fn);"object"==typeof Fn&&null!=Fn&&(0,Y.r3)(Fn,".priority")||(ur=ur.updatePriority(Wt.getPriority()));const Ra=Ce.currentWriteId,Ec=mn(h),wc=_s(ur,Wt,Ec);Ce.currentOutputSnapshotRaw=ur,Ce.currentOutputSnapshotResolved=wc,Ce.currentWriteId=mo(h),q.splice(q.indexOf(Ra),1),T=T.concat(se(h.serverSyncTree_,Ce.path,wc,Ce.currentWriteId,Ce.applyLocally)),T=T.concat(et(h.serverSyncTree_,Ra,!0))}else xt=!0,kt="nodata",T=T.concat(et(h.serverSyncTree_,Ce.currentWriteId,!0))}oa(h.eventQueue_,c,T),T=[],xt&&(u[ue].status=2,setTimeout(u[ue].unwatcher,Math.floor(0)),u[ue].onComplete&&y.push("nodata"===kt?()=>u[ue].onComplete(null,!1,u[ue].currentInputSnapshot):()=>u[ue].onComplete(new Error(kt),!1,null)))}w(h,h.transactionQueueTree_);for(let ue=0;ue<y.length;ue++)Qr(y[ue]);$l(h,h.transactionQueueTree_)}(h,A(h,c),y),y}function Ju(h,u){let c,y=h.transactionQueueTree_;for(c=vr(u);null!==c&&void 0===ml(y);)y=el(y,c),c=vr(u=Mr(u));return y}function A(h,u){const c=[];return m(h,u,c),c.sort((y,T)=>y.order-T.order),c}function m(h,u,c){const y=ml(u);if(y)for(let T=0;T<y.length;T++)c.push(y[T]);Vl(u,T=>{m(h,T,c)})}function w(h,u){const c=ml(u);if(c){let y=0;for(let T=0;T<c.length;T++)2!==c[T].status&&(c[y]=c[T],y++);c.length=y,gu(u,c.length>0?c:void 0)}Vl(u,y=>{w(h,y)})}function P(h,u){const c=_l(Ju(h,u)),y=el(h.transactionQueueTree_,u);return function yl(h,u,c){let y=c?h:h.parent;for(;null!==y;){if(u(y))return!0;y=y.parent}}(y,T=>{ne(h,T)}),ne(h,y),Va(y,T=>{ne(h,T)}),c}function ne(h,u){const c=ml(u);if(c){const y=[];let T=[],F=-1;for(let q=0;q<c.length;q++)3===c[q].status||(1===c[q].status?((0,Y.hu)(F===q-1,"All SENT items should be at beginning of queue."),F=q,c[q].status=3,c[q].abortReason="set"):((0,Y.hu)(0===c[q].status,"Unexpected transaction status in abort"),c[q].unwatcher(),T=T.concat(et(h.serverSyncTree_,c[q].currentWriteId,!0)),c[q].onComplete&&y.push(c[q].onComplete.bind(null,new Error("set"),!1,null))));-1===F?gu(u,void 0):c.length=F+1,oa(h.eventQueue_,_l(u),T);for(let q=0;q<y.length;q++)Qr(y[q])}}const Ct=function(h,u){const c=ln(h),y=c.namespace;return"firebase.com"===c.domain&&gr(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==c.domain&&gr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ce(c.host,c.secure,y,"ws"===c.scheme||"wss"===c.scheme,u,"",y!==c.subdomain),path:new Or(c.pathString)}},ln=function(h){let u="",c="",y="",T="",F="",q=!0,ue="https",Ce=443;if("string"==typeof h){let Ue=h.indexOf("//");Ue>=0&&(ue=h.substring(0,Ue-1),h=h.substring(Ue+2));let xt=h.indexOf("/");-1===xt&&(xt=h.length);let kt=h.indexOf("?");-1===kt&&(kt=h.length),u=h.substring(0,Math.min(xt,kt)),xt<kt&&(T=function fe(h){let u="";const c=h.split("/");for(let y=0;y<c.length;y++)if(c[y].length>0){let T=c[y];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch{}u+="/"+T}return u}(h.substring(xt,kt)));const Wt=function tt(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const y=c.split("=");2===y.length?u[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):Qn(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,kt)));Ue=u.indexOf(":"),Ue>=0?(q="https"===ue||"wss"===ue,Ce=parseInt(u.substring(Ue+1),10)):Ue=u.length;const Fn=u.slice(0,Ue);if("localhost"===Fn.toLowerCase())c="localhost";else if(Fn.split(".").length<=2)c=Fn;else{const ur=u.indexOf(".");y=u.substring(0,ur).toLowerCase(),c=u.substring(ur+1),F=y}"ns"in Wt&&(F=Wt.ns)}return{host:u,port:Ce,domain:c,subdomain:y,secure:q,scheme:ue,pathString:T,namespace:F}},Mn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dr=function(){let h=0;const u=[];return function(c){const y=c===h;let T;h=c;const F=new Array(8);for(T=7;T>=0;T--)F[T]=Mn.charAt(c%64),c=Math.floor(c/64);(0,Y.hu)(0===c,"Cannot push at time == 0");let q=F.join("");if(y){for(T=11;T>=0&&63===u[T];T--)u[T]=0;u[T]++}else for(T=0;T<12;T++)u[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)q+=Mn.charAt(u[T]);return(0,Y.hu)(20===q.length,"nextPushId: Length should be 20."),q}}();class Zr{constructor(u,c,y,T){this.eventType=u,this.eventRegistration=c,this.snapshot=y,this.prevName=T}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class Sa{constructor(u,c,y){this.eventRegistration=u,this.error=c,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wo{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class ec{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new Y.BH;return aa(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){ms("OnDisconnect.remove",this._path);const u=new Y.BH;return Ta(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){ms("OnDisconnect.set",this._path),tl("OnDisconnect.set",u,this._path,!1);const c=new Y.BH;return Ta(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){ms("OnDisconnect.setWithPriority",this._path),tl("OnDisconnect.setWithPriority",u,this._path,!1),Ou("OnDisconnect.setWithPriority",c,!1);const y=new Y.BH;return function Bc(h,u,c,y,T){const F=ji(c,y);h.server_.onDisconnectPut(u.toString(),F.val(!0),(q,ue)=>{"ok"===q&&bo(h.onDisconnect_,u,F),Mo(0,T,q,ue)})}(this._repo,this._path,u,c,y.wrapCallback(()=>{})),y.promise}update(u){ms("OnDisconnect.update",this._path),Ca("OnDisconnect.update",u,this._path,!1);const c=new Y.BH;return function jc(h,u,c,y){if((0,Y.xb)(c))return nn("onDisconnect().update() called with empty data.  Don't do anything."),void Mo(0,y,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(T,F)=>{"ok"===T&&jn(c,(q,ue)=>{const Ce=ji(ue);bo(h.onDisconnect_,Tr(u,q),Ce)}),Mo(0,y,T,F)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Os{constructor(u,c,y,T){this._repo=u,this._path=c,this._queryParams=y,this._orderByCalled=T}get key(){return lr(this._path)?null:da(this._path)}get ref(){return new Xs(this._repo,this._path)}get _queryIdentifier(){const u=Oa(this._queryParams),c=yi(u);return"{}"===c?"default":c}get _queryObject(){return Oa(this._queryParams)}isEqual(u){if(!((u=(0,Y.m9)(u))instanceof Os))return!1;const c=this._repo===u._repo,y=eo(this._path,u._path);return c&&y&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bs(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function tu(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function bl(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===qe){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Er)throw new Error(y);if("string"!=typeof u)throw new Error(T)}if(h.hasEnd()){if(h.getIndexEndName()!==Gr)throw new Error(y);if("string"!=typeof c)throw new Error(T)}}else if(h.getIndex()===jr){if(null!=u&&!Bl(u)||null!=c&&!Bl(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(h.getIndex()instanceof Na||h.getIndex()===sl,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lu(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xs extends Os{constructor(u,c){super(u,c,new Nn,!1)}get parent(){const u=ys(this._path);return null===u?null:new Xs(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class _u{constructor(u,c,y){this._node=u,this.ref=c,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Or(u),y=rl(this.ref,u);return new _u(this._node.getChild(c),y,jr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,T)=>u(new _u(T,rl(this.ref,y),jr)))}hasChild(u){const c=new Or(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Au(h,u){return(h=(0,Y.m9)(h))._checkNotDeleted("ref"),void 0!==u?rl(h._root,u):h._root}function _c(h,u){(h=(0,Y.m9)(h))._checkNotDeleted("refFromURL");const c=Ct(u,h._repo.repoInfo_.nodeAdmin);Tc("refFromURL",c);const y=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&y.host!==h._repo.repoInfo_.host&&gr("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+h._repo.repoInfo_.host+")"),Au(h,c.path.toString())}function rl(h,u){return null===vr((h=(0,Y.m9)(h))._path)?nl("child","path",u,!1):yu("child","path",u,!1),new Xs(h._repo,Tr(h._path,u))}function Hc(h,u){h=(0,Y.m9)(h),ms("set",h._path),tl("set",u,h._path,!1);const c=new Y.BH;return eu(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function yd(h,u){Ca("update",u,h._path,!1);const c=new Y.BH;return function gc(h,u,c,y){Il(h,"update",{path:u.toString(),value:c});let T=!0;const F=mn(h),q={};if(jn(c,(ue,Ce)=>{T=!1,q[ue]=Xl(Tr(u,ue),ji(Ce),h.serverSyncTree_,F)}),T)nn("update() called with empty data.  Don't do anything."),Mo(0,y,"ok",void 0);else{const ue=mo(h),Ce=function ge(h,u,c,y){!function Uo(h,u,c,y){(0,Y.hu)(y>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:y,visible:!0}),h.visibleWrites=Me(h.visibleWrites,u,c),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y);const T=Z.fromObject(c);return pl(h,new oo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,T))}(h.serverSyncTree_,u,q,ue);jl(h.eventQueue_,Ce),h.server_.merge(u.toString(),c,(Ue,xt)=>{const kt="ok"===Ue;kt||Qn("update at "+u+" failed: "+Ue);const Wt=et(h.serverSyncTree_,ue,!kt),Fn=Wt.length>0?Hl(h,u):u;oa(h.eventQueue_,Fn,Wt),Mo(0,y,Ue,xt)}),jn(c,Ue=>{const xt=P(h,Tr(u,Ue));Hl(h,xt)}),oa(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function mh(h){h=(0,Y.m9)(h);const u=new Wo(()=>{}),c=new rd(u);return function Ho(h,u,c){const y=function wa(h,u){const c=u._path;let y=null;h.syncPointTree_.foreachOnPath(c,(Ue,xt)=>{const kt=vi(Ue,c);y=y||Ds(xt,kt)});let T=h.syncPointTree_.get(c);T?y=y||Ds(T,Br()):(T=new Xo,h.syncPointTree_=h.syncPointTree_.set(c,T));const F=null!=y,q=F?new fi(y,!0,!1):null;return function Ms(h){return ka(h.viewCache_)}(Ao(T,u,ir(h.pendingWriteTree_,u._path),F?q.getNode():fr.EMPTY_NODE,F))}(h.serverSyncTree_,u);return null!=y?Promise.resolve(y):h.server_.get(u).then(T=>{const F=ji(T).withIndex(u._queryParams.getIndex());let q;if(ao(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())q=Nt(h.serverSyncTree_,u._path,F);else{const ue=Qa(h.serverSyncTree_,u);q=jo(h.serverSyncTree_,u._path,F,ue)}return oa(h.eventQueue_,u._path,q),us(h.serverSyncTree_,u,c,null,!0),F},T=>(Il(h,"get for query "+(0,Y.Wl)(u)+" failed: "+T),Promise.reject(new Error(T))))}(h._repo,h,c).then(y=>new _u(y,new Xs(h._repo,h._path),h._queryParams.getIndex()))}class rd{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const y=c._queryParams.getIndex();return new Zr("value",this,new _u(u.snapshotNode,new Xs(c._repo,c._path),y))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Sa(this,u,c):null}matches(u){return u instanceof rd&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wc{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Sa(this,u,c):null}createEvent(u,c){(0,Y.hu)(null!=u.childName,"Child events should have a childName.");const y=rl(new Xs(c._repo,c._path),u.childName),T=c._queryParams.getIndex();return new Zr(u.type,this,new _u(u.snapshotNode,y,T),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Wc&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function vu(h,u,c,y,T){let F;if("object"==typeof y&&(F=void 0,T=y),"function"==typeof y&&(F=y),T&&T.onlyOnce){const Ce=c,Ue=(xt,kt)=>{Xu(h._repo,h,ue),Ce(xt,kt)};Ue.userCallback=c.userCallback,Ue.context=c.context,c=Ue}const q=new Wo(c,F||void 0),ue="value"===u?new rd(q):new Wc(u,q);return function nd(h,u,c){let y;y=".info"===vr(u._path)?ao(h.infoSyncTree_,u,c):ao(h.serverSyncTree_,u,c),ku(h.eventQueue_,u._path,y)}(h._repo,h,ue),()=>Xu(h._repo,h,ue)}function Ru(h,u,c,y){return vu(h,"value",u,c,y)}function _d(h,u,c,y){return vu(h,"child_added",u,c,y)}function Fu(h,u,c,y){return vu(h,"child_changed",u,c,y)}function vd(h,u,c,y){return vu(h,"child_moved",u,c,y)}function Mu(h,u,c,y){return vu(h,"child_removed",u,c,y)}function Ed(h,u,c){let y=null;const T=c?new Wo(c):null;"value"===u?y=new rd(T):u&&(y=new Wc(u,T)),Xu(h._repo,h,y)}class Eu{}class Gc extends Eu{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){tl("endAt",this._value,u._path,!0);const c=To(u._queryParams,this._value,this._key);if(Lu(c),bl(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Os(u._repo,u._path,c,u._orderByCalled)}}class Gd extends Eu{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){tl("endBefore",this._value,u._path,!1);const c=function Oo(h,u,c){let y;return y=To(h,u,h.index_===qe||c?c:Er),y.endBeforeSet_=!0,y}(u._queryParams,this._value,this._key);if(Lu(c),bl(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Os(u._repo,u._path,c,u._orderByCalled)}}class Ac extends Eu{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){tl("startAt",this._value,u._path,!0);const c=No(u._queryParams,this._value,this._key);if(Lu(c),bl(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Os(u._repo,u._path,c,u._orderByCalled)}}class Js extends Eu{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){tl("startAfter",this._value,u._path,!1);const c=function ol(h,u,c){let y;return y=No(h,u,h.index_===qe||c?c:Gr),y.startAfterSet_=!0,y}(u._queryParams,this._value,this._key);if(Lu(c),bl(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Os(u._repo,u._path,c,u._orderByCalled)}}class tc extends Eu{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Os(u._repo,u._path,function ls(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class Id extends Eu{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Os(u._repo,u._path,function Qo(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class Vu extends Eu{constructor(u){super(),this._path=u}_apply(u){tu(u,"orderByChild");const c=new Or(this._path);if(lr(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new Na(c),T=Fs(u._queryParams,y);return bl(T),new Os(u._repo,u._path,T,!0)}}class _h extends Eu{_apply(u){tu(u,"orderByKey");const c=Fs(u._queryParams,qe);return bl(c),new Os(u._repo,u._path,c,!0)}}class nu extends Eu{_apply(u){tu(u,"orderByPriority");const c=Fs(u._queryParams,jr);return bl(c),new Os(u._repo,u._path,c,!0)}}class Zd extends Eu{_apply(u){tu(u,"orderByValue");const c=Fs(u._queryParams,sl);return bl(c),new Os(u._repo,u._path,c,!0)}}class wh extends Eu{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(tl("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gc(this._value,this._key)._apply(new Ac(this._value,this._key)._apply(u))}}function ru(h,...u){let c=(0,Y.m9)(h);for(const y of u)c=y._apply(c);return c}(function Uc(h){(0,Y.hu)(!Za,"__referenceConstructor has already been defined"),Za=h})(Xs),function R(h){(0,Y.hu)(!D,"__referenceConstructor has already been defined"),D=h}(Xs);const la="FIREBASE_DATABASE_EMULATOR_HOST",Ji={};let Yd=!1;function bd(h,u,c,y,T){let F=y||h.options.databaseURL;void 0===F&&(h.options.projectId||gr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",h.options.projectId),F=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Ce,Ue,q=Ct(F,T),ue=q.repoInfo;typeof process<"u"&&process.env&&(Ue=process.env[la]),Ue?(Ce=!0,F=`http://${Ue}?ns=${ue.namespace}`,q=Ct(F,T),ue=q.repoInfo):Ce=!q.repoInfo.secure;const xt=T&&Ce?new $n($n.OWNER):new Kr(h.name,h.options,u);Tc("Invalid Firebase Database URL",q),lr(q.path)||gr("Database URL must point to the root of a Firebase Database (not including a child path).");const kt=function Cd(h,u,c,y){let T=Ji[u.name];T||(T={},Ji[u.name]=T);let F=T[h.toURLString()];return F&&gr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),F=new ke(h,Yd,c,y),T[h.toURLString()]=F,F}(ue,h,xt,new cr(h.name,c));return new Kc(kt,h)}class Kc{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Xe(h,u,c){if(h.stats_=ve(h.repoInfo_),h.forceRestClient_||si())h.server_=new So(h.repoInfo_,(y,T,F,q)=>{gn(h,y,T,F,q)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Xn(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(c)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new zs(h.repoInfo_,u,(y,T,F,q)=>{gn(h,y,T,F,q)},y=>{Xn(h,y)},y=>{!function $r(h,u){jn(u,(c,y)=>{Fr(h,c,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function We(h,u){const c=h.toString();return De[c]||(De[c]=u()),De[c]}(h.repoInfo_,()=>new xl(h.stats_,h.server_)),h.infoData_=new ko,h.infoSyncTree_=new G({startListening:(y,T,F,q)=>{let ue=[];const Ce=h.infoData_.getNode(y._path);return Ce.isEmpty()||(ue=Nt(h.infoSyncTree_,y._path,Ce),setTimeout(()=>{q("ok")},0)),ue},stopListening:()=>{}}),Fr(h,"connected",!1),h.serverSyncTree_=new G({startListening:(y,T,F,q)=>(h.server_.listen(y,F,T,(ue,Ce)=>{const Ue=q(ue,Ce);oa(h.eventQueue_,y._path,Ue)}),[]),stopListening:(y,T)=>{h.server_.unlisten(y,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xs(this._repo,Br())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Qd(h,u){const c=Ji[u];(!c||c[h.key]!==h)&&gr(`Database ${u}(${h.repoInfo_}) has already been deleted.`),wl(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&gr("Cannot call "+u+" on a deleted database.")}}function I(){ai.IS_TRANSPORT_INITIALIZED&&Qn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function d(){I(),Lr.forceDisallow()}function g(){I(),oi.forceDisallow(),Lr.forceAllow()}function Ee(h,u){Rt(h,u)}const rt={".sv":"timestamp"};class nr{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}zs.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},zs.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function xe(h){Gt(gt.SDK_VERSION),(0,gt._registerComponent)(new at.wA("database",(u,{instanceIdentifier:c})=>bd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,gt.registerVersion)(on,"0.14.4",h),(0,gt.registerVersion)(on,"0.14.4","esm2017")}();const Ci=new $t.Yd("@firebase/database-compat"),qi=function(h){Ci.warn("FIREBASE WARNING: "+h)};class Fi{constructor(u){this._delegate=u}cancel(u){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),y=>u(y)),c}remove(u){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),y=>u(y)),c}set(u,c){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",c,!0);const y=this._delegate.set(u);return c&&y.then(()=>c(null),T=>c(T)),y}setWithPriority(u,c,y){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);const T=this._delegate.setWithPriority(u,c);return y&&T.then(()=>y(null),F=>y(F)),T}update(u,c){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const T={};for(let F=0;F<u.length;++F)T[""+F]=u[F];u=T,qi("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",c,!0);const y=this._delegate.update(u);return c&&y.then(()=>c(null),T=>c(T)),y}}class Ei{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wi{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),yu("DataSnapshot.child","path",u,!1),new wi(this._database,this._delegate.child(u))}hasChild(u){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yu("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new wi(this._database,c)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ai(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class pi{constructor(u,c){this.database=u,this._delegate=c}on(u,c,y,T){var F;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",c,!1);const q=pi.getCancelAndContextArgs_("Query.on",y,T),ue=(Ue,xt)=>{c.call(q.context,new wi(this.database,Ue),xt)};ue.userCallback=c,ue.context=q.context;const Ce=null===(F=q.cancel)||void 0===F?void 0:F.bind(q.context);switch(u){case"value":return Ru(this._delegate,ue,Ce),c;case"child_added":return _d(this._delegate,ue,Ce),c;case"child_removed":return Mu(this._delegate,ue,Ce),c;case"child_changed":return Fu(this._delegate,ue,Ce),c;case"child_moved":return vd(this._delegate,ue,Ce),c;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,y){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,Y.Wj)("Query.off","callback",c,!0),(0,Y.lb)("Query.off","context",y,!0),c){const T=()=>{};T.userCallback=c,T.context=y,Ed(this._delegate,u,T)}else Ed(this._delegate,u)}get(){return mh(this._delegate).then(u=>new wi(this.database,u))}once(u,c,y,T){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",c,!0);const F=pi.getCancelAndContextArgs_("Query.once",y,T),q=new Y.BH,ue=(Ue,xt)=>{const kt=new wi(this.database,Ue);c&&c.call(F.context,kt,xt),q.resolve(kt)};ue.userCallback=c,ue.context=F.context;const Ce=Ue=>{F.cancel&&F.cancel.call(F.context,Ue),q.reject(Ue)};switch(u){case"value":Ru(this._delegate,ue,Ce,{onlyOnce:!0});break;case"child_added":_d(this._delegate,ue,Ce,{onlyOnce:!0});break;case"child_removed":Mu(this._delegate,ue,Ce,{onlyOnce:!0});break;case"child_changed":Fu(this._delegate,ue,Ce,{onlyOnce:!0});break;case"child_moved":vd(this._delegate,ue,Ce,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return q.promise}limitToFirst(u){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new pi(this.database,ru(this._delegate,function Kd(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tc(h)}(u)))}limitToLast(u){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new pi(this.database,ru(this._delegate,function zl(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Id(h)}(u)))}orderByChild(u){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new pi(this.database,ru(this._delegate,function qd(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yu("orderByChild","path",h,!1),new Vu(h)}(u)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new pi(this.database,ru(this._delegate,function vh(){return new _h}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new pi(this.database,ru(this._delegate,function Mc(){return new nu}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new pi(this.database,ru(this._delegate,function Eh(){return new Zd}()))}startAt(u=null,c){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new pi(this.database,ru(this._delegate,function Rc(h=null,u){return Da("startAt","key",u,!0),new Ac(h,u)}(u,c)))}startAfter(u=null,c){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new pi(this.database,ru(this._delegate,function yh(h,u){return Da("startAfter","key",u,!0),new Js(h,u)}(u,c)))}endAt(u=null,c){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new pi(this.database,ru(this._delegate,function wd(h,u){return Da("endAt","key",u,!0),new Gc(h,u)}(u,c)))}endBefore(u=null,c){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new pi(this.database,ru(this._delegate,function yo(h,u){return Da("endBefore","key",u,!0),new Gd(h,u)}(u,c)))}equalTo(u,c){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new pi(this.database,ru(this._delegate,function Yh(h,u){return Da("equalTo","key",u,!0),new wh(h,u)}(u,c)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof pi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,y){const T={cancel:void 0,context:void 0};if(c&&y)T.cancel=c,(0,Y.Wj)(u,"cancel",T.cancel,!0),T.context=y,(0,Y.lb)(u,"context",T.context,!0);else if(c)if("object"==typeof c&&null!==c)T.context=c;else{if("function"!=typeof c)throw new Error((0,Y.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=c}return T}get ref(){return new Ai(this.database,new Xs(this._delegate._repo,this._delegate._path))}}class Ai extends pi{constructor(u,c){super(u,new Os(c._repo,c._path,new Nn,!1)),this.database=u,this._delegate=c}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new Ai(this.database,rl(this._delegate,u))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new Ai(this.database,u):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new Ai(this.database,this._delegate.root)}set(u,c){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",c,!0);const y=Hc(this._delegate,u);return c&&y.then(()=>c(null),T=>c(T)),y}update(u,c){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const T={};for(let F=0;F<u.length;++F)T[""+F]=u[F];u=T,qi("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ms("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",c,!0);const y=yd(this._delegate,u);return c&&y.then(()=>c(null),T=>c(T)),y}setWithPriority(u,c,y){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",y,!0);const T=function zc(h,u,c){if(ms("setWithPriority",h._path),tl("setWithPriority",u,h._path,!1),Ou("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const y=new Y.BH;return eu(h._repo,h._path,u,c,y.wrapCallback(()=>{})),y.promise}(this._delegate,u,c);return y&&T.then(()=>y(null),F=>y(F)),T}remove(u){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",u,!0);const c=function vc(h){return ms("remove",h._path),Hc(h,null)}(this._delegate);return u&&c.then(()=>u(null),y=>u(y)),c}transaction(u,c,y){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,Y.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,y){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const T=function bn(h,u,c){var y;if(h=(0,Y.m9)(h),ms("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const T=null===(y=c?.applyLocally)||void 0===y||y,F=new Y.BH,ue=Ru(h,()=>{});return function mc(h,u,c,y,T,F){Il(h,"transaction on "+u);const q={path:u,update:c,onComplete:y,status:null,order:ut(),applyLocally:F,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ue=Sc(h,u,void 0);q.currentInputSnapshot=ue;const Ce=q.update(ue.val());if(void 0===Ce)q.unwatcher(),q.currentOutputSnapshotRaw=null,q.currentOutputSnapshotResolved=null,q.onComplete&&q.onComplete(null,!1,q.currentInputSnapshot);else{ba("transaction failed: Data returned ",Ce,q.path),q.status=0;const Ue=el(h.transactionQueueTree_,u),xt=ml(Ue)||[];let kt;xt.push(q),gu(Ue,xt),"object"==typeof Ce&&null!==Ce&&(0,Y.r3)(Ce,".priority")?(kt=(0,Y.DV)(Ce,".priority"),(0,Y.hu)(Bl(kt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):kt=(Xi(h.serverSyncTree_,u)||fr.EMPTY_NODE).getPriority().val();const Wt=mn(h),Fn=ji(Ce,kt),ur=_s(Fn,ue,Wt);q.currentOutputSnapshotRaw=Fn,q.currentOutputSnapshotResolved=ur,q.currentWriteId=mo(h);const Zi=se(h.serverSyncTree_,u,ur,q.currentWriteId,q.applyLocally);oa(h.eventQueue_,u,Zi),$l(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(Ce,Ue,xt)=>{let kt=null;Ce?F.reject(Ce):(kt=new _u(xt,new Xs(h._repo,h._path),jr),F.resolve(new nr(Ue,kt)))},ue,T),F.promise}(this._delegate,u,{applyLocally:y}).then(F=>new Ei(F.committed,new wi(this.database,F.snapshot)));return c&&T.then(F=>c(null,F.committed,F.snapshot),F=>c(F,!1,null)),T}setPriority(u,c){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",c,!0);const y=function md(h,u){h=(0,Y.m9)(h),ms("setPriority",h._path),Ou("setPriority",u,!1);const c=new Y.BH;return eu(h._repo,Tr(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&y.then(()=>c(null),T=>c(T)),y}push(u,c){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",c,!0);const y=function $c(h,u){h=(0,Y.m9)(h),ms("push",h._path),tl("push",u,h._path,!0);const c=Dt(h._repo),y=dr(c),T=rl(h,y),F=rl(h,y);let q;return q=null!=u?Hc(F,u).then(()=>F):Promise.resolve(F),T.then=q.then.bind(q),T.catch=q.then.bind(q,void 0),T}(this._delegate,u),T=y.then(q=>new Ai(this.database,q));c&&T.then(()=>c(null),q=>c(q));const F=new Ai(this.database,y);return F.then=T.then.bind(T),F.catch=T.catch.bind(T,void 0),F}onDisconnect(){return ms("Reference.onDisconnect",this._delegate._path),new Fi(new ec(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Gs{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:d,forceLongPolling:g}}useEmulator(u,c,y={}){!function U(h,u,c,y={}){(h=(0,Y.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&gr("Cannot call useEmulator() after instance has already been initialized.");const T=h._repoInternal;let F;if(T.repoInfo_.nodeAdmin)y.mockUserToken&&gr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),F=new $n($n.OWNER);else if(y.mockUserToken){const q="string"==typeof y.mockUserToken?y.mockUserToken:(0,Y.Sg)(y.mockUserToken,h.app.options.projectId);F=new $n(q)}!function Ih(h,u,c,y){h.repoInfo_=new ce(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),y&&(h.authTokenProvider_=y)}(T,u,c,F)}(this._delegate,u,c,y)}ref(u){if((0,Y.Dv)("database.ref",0,1,arguments.length),u instanceof Ai){const c=_c(this._delegate,u.toString());return new Ai(this,c)}{const c=Au(this._delegate,u);return new Ai(this,c)}}refFromURL(u){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const y=_c(this._delegate,u);return new Ai(this,y)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function Q(h){(h=(0,Y.m9)(h))._checkNotDeleted("goOffline"),wl(h._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function me(h){(h=(0,Y.m9)(h))._checkNotDeleted("goOnline"),function zo(h){h.persistentConnection_&&h.persistentConnection_.resume(te)}(h._repo)}(this._delegate)}}Gs.ServerValue={TIMESTAMP:function bt(){return rt}(),increment:h=>function Jt(h){return{".sv":{increment:h}}}(h)};var uo=Object.freeze({__proto__:null,initStandalone:function Aa({app:h,url:u,version:c,customAuthImpl:y,namespace:T,nodeAdmin:F=!1}){Gt(c);const q=new at.zt("auth-internal",new at.H0("database-standalone"));return q.setComponent(new at.wA("auth-internal",()=>y,"PRIVATE")),{instance:new Gs(bd(h,q,void 0,u,F),h),namespace:T}}});const Uu=Gs.ServerValue;!function rc(h){h.INTERNAL.registerComponent(new at.wA("database-compat",(u,{instanceIdentifier:c})=>{const y=u.getProvider("app-compat").getImmediate(),T=u.getProvider("database").getImmediate({identifier:c});return new Gs(T,y)},"PUBLIC").setServiceProps({Reference:Ai,Query:pi,Database:Gs,DataSnapshot:wi,enableLogging:Ee,INTERNAL:uo,ServerValue:Uu}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.4")}(Pe.Z);var vn=K(1205),qn=K(2313),Rr=K(9260);function il(h){return null==h}function Go(h){return"function"==typeof h.set}function Cl(h,u){return Go(u)?u:h.ref(u)}function vs(h,u){if(function Ri(h){return"string"==typeof h}(h))return u.stringCase();if(Go(h))return u.firebaseCase();if(function co(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Ua(h,u,c="on",y=ie.z){return new z.y(T=>{let F=null;return F=h[c](u,(q,ue)=>{y.schedule(()=>{T.next({snapshot:q,prevKey:ue})}),"once"===c&&y.schedule(()=>T.complete())},q=>{y.schedule(()=>T.error(q))}),"on"===c?{unsubscribe(){null!=F&&h.off(u,F)}}:{unsubscribe(){}}}).pipe((0,je.U)(T=>{const{snapshot:F,prevKey:q}=T;let ue=null;return F.exists()&&(ue=F.key),{type:u,payload:F,prevKey:q,key:ue}}),(0,Ge.B)())}function _o(h,u){const c=h.length;for(let y=0;y<c;y++)if(h[y].payload.key===u)return y;return-1}function Co(h,u){const{payload:c,prevKey:y,key:T}=u,F=_o(h,T),q=function Po(h,u){if(il(u))return 0;{const c=_o(h,u);return-1===c?h.length:c+1}}(h,y);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let ue=null;u.payload.forEach(Ce=>{const Ue={payload:Ce,type:"value",prevKey:ue,key:Ce.key};return ue=Ce.key,h=[...h,Ue],!1})}return h;case"child_added":if(F>-1){const ue=h[F-1];(ue&&ue.key||null)!==y&&(h=h.filter(Ce=>Ce.payload.key!==c.key)).splice(q,0,u)}else{if(null==y)return[u,...h];(h=h.slice()).splice(q,0,u)}return h;case"child_removed":return h.filter(ue=>ue.payload.key!==c.key);case"child_changed":return h.map(ue=>ue.payload.key===T?u:ue);case"child_moved":if(F>-1){const ue=h.splice(F,1)[0];return(h=h.slice()).splice(q,0,ue),h}return h;default:return h}}function ic(h){return(il(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function sc(h,u,c){return function qc(h,u,c){return Ua(h,"value","once",c).pipe((0,Ie.w)(y=>{const T=[(0,Le.of)(y)];return u.forEach(F=>T.push(Ua(h,F,"on",c))),(0,Se.T)(...T).pipe((0,Qe.R)(Co,[]))}),(0,he.x)())}(h,u=ic(u),c)}function oc(h,u,c){const y=(u=ic(u)).map(T=>Ua(h,T,"on",c));return(0,Se.T)(...y)}function Sd(h,u){return function(y,T){return vs(y,{stringCase:()=>h.child(y)[u](T),firebaseCase:()=>y[u](T),snapshotCase:()=>y.ref[u](T)})}}function Pc(h){return function(c){return c?vs(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Wl(h,u){return function(){return Ua(h,"value","on",u)}}const $u=new _.OlP("angularfire2.realtimeDatabaseURL"),Xd=new _.OlP("angularfire2.database.use-emulator");let id=(()=>{class h{constructor(c,y,T,F,q,ue,Ce,Ue,xt,kt,Wt,Fn,ur,Zi,Ra){this.schedulers=ue;const Ec=Ce,wc=(0,It.on)(c,q,y);Ue&&(0,vn.nw)(wc,q,xt,Wt,Fn,ur,kt,Zi),this.database=(0,It.cc)(`${wc.name}.database.${T}`,"AngularFireDatabase",wc.name,()=>{const Ad=q.runOutsideAngular(()=>wc.database(T||void 0));return Ec&&Ad.useEmulator(...Ec),Ad},[Ec])}list(c,y){const T=this.schedulers.ngZone.runOutsideAngular(()=>Cl(this.database,c));let F=T;return y&&(F=y(T)),function ju(h,u){const c=u.schedulers.outsideAngular,y=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Sd(y,"update"),set:Sd(y,"set"),push:T=>y.push(T),remove:Pc(y),snapshotChanges:T=>sc(h,T,c).pipe(At.iC),stateChanges:T=>oc(h,T,c).pipe(At.iC),auditTrail:T=>function Bu(h,u,c){return function Td(h,u,c){return function Dd(h,u){return Ua(h,"value","on",u).pipe((0,je.U)(c=>{let y;return c.payload.forEach(T=>(y=T.key,!1)),{data:c,lastKeyToLoad:y}}))}(h,c).pipe(function ct(...h){const u=(0,qt.jO)(h);return(0,we.e)((c,y)=>{const T=h.length,F=new Array(T);let q=h.map(()=>!1),ue=!1;for(let Ce=0;Ce<T;Ce++)(0,dt.Xf)(h[Ce]).subscribe((0,Oe.x)(y,Ue=>{F[Ce]=Ue,!ue&&!q[Ce]&&(q[Ce]=!0,(ue=q.every(ht.y))&&(q=null))},Mt.Z));c.subscribe((0,Oe.x)(y,Ce=>{if(ue){const Ue=[Ce,...F];y.next(u?u(...Ue):Ue)}}))})}(u),(0,je.U)(([T,F])=>{const q=T.lastKeyToLoad,ue=F.map(Ce=>Ce.key);return{actions:F,lastKeyToLoad:q,loadedKeys:ue}}),function _t(h){return(0,we.e)((u,c)=>{let y=!1,T=0;u.subscribe((0,Oe.x)(c,F=>(y||(y=!h(F,T++)))&&c.next(F)))})}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,je.U)(T=>T.actions))}(h,oc(h,u).pipe((0,Qe.R)((T,F)=>[...T,F],[])),c)}(h,T,c).pipe(At.iC),valueChanges:(T,F)=>sc(h,T,c).pipe((0,je.U)(ue=>ue.map(Ce=>F&&F.idField?Object.assign(Object.assign({},Ce.payload.val()),{[F.idField]:Ce.key}):Ce.payload.val())),At.iC)}}(F,this)}object(c){return function Gl(h,u){return{query:h,snapshotChanges:()=>Wl(h,u.schedulers.outsideAngular)().pipe(At.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Wl(h,u.schedulers.outsideAngular)().pipe(At.iC,(0,je.U)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Cl(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(_.LFG(It.Dh),_.LFG(It.xv,8),_.LFG($u,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(At.HU),_.LFG(Xd,8),_.LFG(vn.zQ,8),_.LFG(vn.Qv,8),_.LFG(vn.L6,8),_.LFG(vn._Q,8),_.LFG(vn.rT,8),_.LFG(vn.lh,8),_.LFG(vn.f7,8),_.LFG(qn.nm,8))},h.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Zc=(()=>{class h{constructor(){Rr.Z.registerVersion("angularfire",At.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=_.oAB({type:h}),h.\u0275inj=_.cJS({providers:[id]}),h})()},2011:(fn,lt,K)=>{K.d(lt,{Dh:()=>Ie,GT:()=>je,cc:()=>ht,hO:()=>dt,on:()=>he,pX:()=>Se,xv:()=>Qe});var _=K(4650),ie=K(9260),z=K(4976);fn=K.hmd(fn);const Le=["ngOnDestroy"],Se=(_t,At,It,Ze={})=>new Proxy(_t,{get:(Pe,at)=>It.runOutsideAngular(()=>{var Lt;if(_t[at])return!(null===(Lt=Ze?.spy)||void 0===Lt)&&Lt.get&&Ze.spy.get(at,_t[at]),_t[at];if(Le.indexOf(at)>-1)return()=>{};const gt=At.toPromise().then(Y=>{const $t=Y&&Y[at];return"function"==typeof $t?$t.bind(Y):$t&&$t.then?$t.then(on=>It.run(()=>on)):It.run(()=>$t)});return new Proxy(()=>{},{get:(Y,$t)=>gt[$t],apply:(Y,$t,on)=>gt.then(Yt=>{var Zt;const Gt=Yt&&Yt(...on);return!(null===(Zt=Ze?.spy)||void 0===Zt)&&Zt.apply&&Ze.spy.apply(at,on,Gt),Gt})})})}),je=(_t,At)=>{At.forEach(It=>{Object.getOwnPropertyNames(It.prototype||It).forEach(Ze=>{Object.defineProperty(_t.prototype,Ze,Object.getOwnPropertyDescriptor(It.prototype||It,Ze))})})};class Ge{constructor(At){return At}}const Ie=new _.OlP("angularfire2.app.options"),Qe=new _.OlP("angularfire2.app.name");function he(_t,At,It){const Pe="object"==typeof It&&It||{};Pe.name=Pe.name||"string"==typeof It&&It||"[DEFAULT]";const Lt=ie.Z.apps.filter(gt=>gt&&gt.name===Pe.name)[0]||At.runOutsideAngular(()=>ie.Z.initializeApp(_t,Pe));try{JSON.stringify(_t)!==JSON.stringify(Lt.options)&&we("error",`${Lt.name} Firebase App already initialized with different options${fn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ge(Lt)}const we=(_t,...At)=>{(0,_.X6Q)()&&typeof console<"u"&&console[_t](...At)},Oe={provide:Ge,useFactory:he,deps:[Ie,_.R0b,[new _.FiY,Qe]]};let dt=(()=>{class _t{constructor(It){ie.Z.registerVersion("angularfire",z.q4.full,"core"),ie.Z.registerVersion("angularfire",z.q4.full,"app-compat"),ie.Z.registerVersion("angular",_.q4F.full,It.toString())}static initializeApp(It,Ze){return{ngModule:_t,providers:[{provide:Ie,useValue:It},{provide:Qe,useValue:Ze}]}}}return _t.\u0275fac=function(It){return new(It||_t)(_.LFG(_.Lbi))},_t.\u0275mod=_.oAB({type:_t}),_t.\u0275inj=_.cJS({providers:[Oe]}),_t})();function ht(_t,At,It,Ze,Pe){const[,at,Lt]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===_t)||[];if(at)return function Mt(_t,At){try{return _t.toString()===At.toString()}catch{return _t===At}}(Pe,Lt)||(ct("error",`${At} was already initialized on the ${It} Firebase App with different settings.${qt?" You may need to reload as Firebase is not HMR aware.":""}`),ct("warn",{is:Pe,was:Lt})),at;{const gt=Ze();return globalThis.\u0275AngularfireInstanceCache.push([_t,gt,Pe]),gt}}const qt=!!fn.hot,ct=(_t,...At)=>{(0,_.X6Q)()&&typeof console<"u"&&console[_t](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7512:(fn,lt,K)=>{K.d(lt,{Ke:()=>Ie,Jt:()=>gt,cF:()=>$t,Vq:()=>_t,iH:()=>Gt,B0:()=>Vn});var _=K(4976),ie=K(4650),z=K(3692),Le=K(7158),Se=K(259),je=K(2313),Ge=K(6961);class Ie{constructor(Ye){return Ye}}const Qe="storage",Oe=new ie.OlP("angularfire2.storage-instances");function ht(Ke){return(Ye,ut)=>{const ze=Ye.runOutsideAngular(()=>Ke(ut));return new Ie(ze)}}const Mt={provide:class he{constructor(){return(0,_.vb)(Qe)}},deps:[[new ie.FiY,Oe]]},qt={provide:Ie,useFactory:function dt(Ke,Ye){const ut=(0,_.JM)(Qe,Ke,Ye);return ut&&new Ie(ut)},deps:[[new ie.FiY,Oe],z.Ot]};let ct=(()=>{class Ke{constructor(){(0,Se.KN)("angularfire",_.q4.full,"gcs")}}return Ke.\u0275fac=function(ut){return new(ut||Ke)},Ke.\u0275mod=ie.oAB({type:Ke}),Ke.\u0275inj=ie.cJS({providers:[qt,Mt]}),Ke})();function _t(Ke,...Ye){return{ngModule:ct,providers:[{provide:Oe,useFactory:ht(Ke),multi:!0,deps:[ie.R0b,ie.zs3,_.HU,z.z6,[new ie.FiY,Le.dh],[new ie.FiY,je.nm],...Ye]}]}}const gt=(0,_.u3)(Ge.Jt,!0),$t=(0,_.u3)(Ge.cF,!0),Gt=(0,_.u3)(Ge.iH,!0),Vn=(0,_.u3)(Ge.B0,!0)},4976:(fn,lt,K)=>{K.d(lt,{q4:()=>Va,iC:()=>Ps,fc:()=>ms,HU:()=>Ou,vb:()=>tl,JM:()=>Bl,u3:()=>oa});var _=K(4650),ie=K(259),z=K(5861),Le=K(6881),Se=K(2090),je=K(4859),Ge=K(1877);const Ie=(M,V)=>V.some(te=>M instanceof te);let Qe,he;const dt=new WeakMap,ht=new WeakMap,Mt=new WeakMap,qt=new WeakMap,ct=new WeakMap;let It={get(M,V,te){if(M instanceof IDBTransaction){if("done"===V)return ht.get(M);if("objectStoreNames"===V)return M.objectStoreNames||Mt.get(M);if("store"===V)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return Lt(M[V])},set:(M,V,te)=>(M[V]=te,!0),has:(M,V)=>M instanceof IDBTransaction&&("done"===V||"store"===V)||V in M};function at(M){return"function"==typeof M?function Pe(M){return M!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(M)?function(...V){return M.apply(gt(this),V),Lt(dt.get(this))}:function(...V){return Lt(M.apply(gt(this),V))}:function(V,...te){const _e=M.call(gt(this),V,...te);return Mt.set(_e,V.sort?V.sort():[V]),Lt(_e)}}(M):(M instanceof IDBTransaction&&function At(M){if(ht.has(M))return;const V=new Promise((te,_e)=>{const ke=()=>{M.removeEventListener("complete",Xe),M.removeEventListener("error",Dt),M.removeEventListener("abort",Dt)},Xe=()=>{te(),ke()},Dt=()=>{_e(M.error||new DOMException("AbortError","AbortError")),ke()};M.addEventListener("complete",Xe),M.addEventListener("error",Dt),M.addEventListener("abort",Dt)});ht.set(M,V)}(M),Ie(M,function we(){return Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(M,It):M)}function Lt(M){if(M instanceof IDBRequest)return function _t(M){const V=new Promise((te,_e)=>{const ke=()=>{M.removeEventListener("success",Xe),M.removeEventListener("error",Dt)},Xe=()=>{te(Lt(M.result)),ke()},Dt=()=>{_e(M.error),ke()};M.addEventListener("success",Xe),M.addEventListener("error",Dt)});return V.then(te=>{te instanceof IDBCursor&&dt.set(te,M)}).catch(()=>{}),ct.set(V,M),V}(M);if(qt.has(M))return qt.get(M);const V=at(M);return V!==M&&(qt.set(M,V),ct.set(V,M)),V}const gt=M=>ct.get(M),on=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],Zt=new Map;function Gt(M,V){if(!(M instanceof IDBDatabase)||V in M||"string"!=typeof V)return;if(Zt.get(V))return Zt.get(V);const te=V.replace(/FromIndex$/,""),_e=V!==te,ke=Yt.includes(te);if(!(te in(_e?IDBIndex:IDBObjectStore).prototype)||!ke&&!on.includes(te))return;const Xe=function(){var Dt=(0,z.Z)(function*(mn,...gn){const Xn=this.transaction(mn,ke?"readwrite":"readonly");let $r=Xn.store;return _e&&($r=$r.index(gn.shift())),(yield Promise.all([$r[te](...gn),ke&&Xn.done]))[0]});return function(gn){return Dt.apply(this,arguments)}}();return Zt.set(V,Xe),Xe}!function Ze(M){It=M(It)}(M=>({...M,get:(V,te,_e)=>Gt(V,te)||M.get(V,te,_e),has:(V,te)=>!!Gt(V,te)||M.has(V,te)}));const Wr="@firebase/installations",br="0.6.4",Vn=1e4,Jn=`w:${br}`,Ke="FIS_v2",Ye="https://firebaseinstallations.googleapis.com/v1",ut=36e5,Qt=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Rt(M){return M instanceof Se.ZR&&M.code.includes("request-failed")}function nn({projectId:M}){return`${Ye}/projects/${M}/installations`}function Cn(M){return{token:M.token,requestStatus:2,expiresIn:Er(M.expiresIn),creationTime:Date.now()}}function On(M,V){return gr.apply(this,arguments)}function gr(){return(gr=(0,z.Z)(function*(M,V){const _e=(yield V.json()).error;return Qt.create("request-failed",{requestName:M,serverCode:_e.code,serverMessage:_e.message,serverStatus:_e.status})})).apply(this,arguments)}function Qn({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function Cr(M){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,z.Z)(function*(M){const V=yield M();return V.status>=500&&V.status<600?M():V})).apply(this,arguments)}function Er(M){return Number(M.replace("s","000"))}function Xt(){return(Xt=(0,z.Z)(function*({appConfig:M,heartbeatServiceProvider:V},{fid:te}){const _e=nn(M),ke=Qn(M),Xe=V.getImmediate({optional:!0});if(Xe){const Xn=yield Xe.getHeartbeatsHeader();Xn&&ke.append("x-firebase-client",Xn)}const mn={method:"POST",headers:ke,body:JSON.stringify({fid:te,authVersion:Ke,appId:M.appId,sdkVersion:Jn})},gn=yield Cr(()=>fetch(_e,mn));if(gn.ok){const Xn=yield gn.json();return{fid:Xn.fid||te,registrationStatus:2,refreshToken:Xn.refreshToken,authToken:Cn(Xn.authToken)}}throw yield On("Create Installation",gn)})).apply(this,arguments)}function Hn(M){return new Promise(V=>{setTimeout(V,M)})}const Dr=/^[cdef][\w-]{21}$/,jn="";function ri(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const te=function Yn(M){return function yi(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return Dr.test(te)?te:jn}catch{return jn}}function er(M){return`${M.appName}!${M.appId}`}const cn=new Map;function An(M,V){const te=er(M);wn(te,V),function Qr(M,V){const te=function Xr(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=M=>{wn(M.data.key,M.data.fid)}),si}();te&&te.postMessage({key:M,fid:V}),function cr(){0===cn.size&&si&&(si.close(),si=null)}()}(te,V)}function wn(M,V){const te=cn.get(M);if(te)for(const _e of te)_e(V)}let si=null;const Kr="firebase-installations-database",$n=1,Nr="firebase-installations-store";let an=null;function Jr(){return an||(an=function Y(M,V,{blocked:te,upgrade:_e,blocking:ke,terminated:Xe}={}){const Dt=indexedDB.open(M,V),mn=Lt(Dt);return _e&&Dt.addEventListener("upgradeneeded",gn=>{_e(Lt(Dt.result),gn.oldVersion,gn.newVersion,Lt(Dt.transaction))}),te&&Dt.addEventListener("blocked",()=>te()),mn.then(gn=>{Xe&&gn.addEventListener("close",()=>Xe()),ke&&gn.addEventListener("versionchange",()=>ke())}).catch(()=>{}),mn}(Kr,$n,{upgrade:(M,V)=>{0===V&&M.createObjectStore(Nr)}})),an}function Di(M,V){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,z.Z)(function*(M,V){const te=er(M),ke=(yield Jr()).transaction(Nr,"readwrite"),Xe=ke.objectStore(Nr),Dt=yield Xe.get(te);return yield Xe.put(V,te),yield ke.done,(!Dt||Dt.fid!==V.fid)&&An(M,V.fid),V})).apply(this,arguments)}function Yi(M){return ss.apply(this,arguments)}function ss(){return(ss=(0,z.Z)(function*(M){const V=er(M),_e=(yield Jr()).transaction(Nr,"readwrite");yield _e.objectStore(Nr).delete(V),yield _e.done})).apply(this,arguments)}function Pi(M,V){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,z.Z)(function*(M,V){const te=er(M),ke=(yield Jr()).transaction(Nr,"readwrite"),Xe=ke.objectStore(Nr),Dt=yield Xe.get(te),mn=V(Dt);return void 0===mn?yield Xe.delete(te):yield Xe.put(mn,te),yield ke.done,mn&&(!Dt||Dt.fid!==mn.fid)&&An(M,mn.fid),mn})).apply(this,arguments)}function Ne(M){return Re.apply(this,arguments)}function Re(){return Re=(0,z.Z)(function*(M){let V;const te=yield Pi(M.appConfig,_e=>{const ke=function ce(M){return We(M||{fid:ri(),registrationStatus:0})}(_e),Xe=function ye(M,V){if(0===V.registrationStatus){if(!navigator.onLine)return{installationEntry:V,registrationPromise:Promise.reject(Qt.create("app-offline"))};const te={fid:V.fid,registrationStatus:1,registrationTime:Date.now()},_e=function oe(M,V){return Be.apply(this,arguments)}(M,te);return{installationEntry:te,registrationPromise:_e}}return 1===V.registrationStatus?{installationEntry:V,registrationPromise:be(M)}:{installationEntry:V}}(M,ke);return V=Xe.registrationPromise,Xe.installationEntry});return te.fid===jn?{installationEntry:yield V}:{installationEntry:te,registrationPromise:V}}),Re.apply(this,arguments)}function Be(){return Be=(0,z.Z)(function*(M,V){try{const te=yield function Pn(M,V){return Xt.apply(this,arguments)}(M,V);return Di(M.appConfig,te)}catch(te){throw Rt(te)&&409===te.customData.serverCode?yield Yi(M.appConfig):yield Di(M.appConfig,{fid:V.fid,registrationStatus:0}),te}}),Be.apply(this,arguments)}function be(M){return De.apply(this,arguments)}function De(){return(De=(0,z.Z)(function*(M){let V=yield ve(M.appConfig);for(;1===V.registrationStatus;)yield Hn(100),V=yield ve(M.appConfig);if(0===V.registrationStatus){const{installationEntry:te,registrationPromise:_e}=yield Ne(M);return _e||te}return V})).apply(this,arguments)}function ve(M){return Pi(M,V=>{if(!V)throw Qt.create("installation-not-found");return We(V)})}function We(M){return function it(M){return 1===M.registrationStatus&&M.registrationTime+Vn<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function Dn(){return(Dn=(0,z.Z)(function*({appConfig:M,heartbeatServiceProvider:V},te){const _e=function Tn(M,{fid:V}){return`${nn(M)}/${V}/authTokens:generate`}(M,te),ke=function _r(M,{refreshToken:V}){const te=Qn(M);return te.append("Authorization",function Gr(M){return`${Ke} ${M}`}(V)),te}(M,te),Xe=V.getImmediate({optional:!0});if(Xe){const Xn=yield Xe.getHeartbeatsHeader();Xn&&ke.append("x-firebase-client",Xn)}const mn={method:"POST",headers:ke,body:JSON.stringify({installation:{sdkVersion:Jn,appId:M.appId}})},gn=yield Cr(()=>fetch(_e,mn));if(gn.ok)return Cn(yield gn.json());throw yield On("Generate Auth Token",gn)})).apply(this,arguments)}function qr(M){return os.apply(this,arguments)}function os(){return os=(0,z.Z)(function*(M,V=!1){let te;const _e=yield Pi(M.appConfig,Xe=>{if(!hr(Xe))throw Qt.create("not-registered");const Dt=Xe.authToken;if(!V&&function In(M){return 2===M.requestStatus&&!function Ur(M){const V=Date.now();return V<M.creationTime||M.creationTime+M.expiresIn<V+ut}(M)}(Dt))return Xe;if(1===Dt.requestStatus)return te=function Et(M,V){return ot.apply(this,arguments)}(M,V),Xe;{if(!navigator.onLine)throw Qt.create("app-offline");const mn=function kr(M){const V={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:V})}(Xe);return te=function yn(M,V){return zn.apply(this,arguments)}(M,mn),mn}});return te?yield te:_e.authToken}),os.apply(this,arguments)}function ot(){return(ot=(0,z.Z)(function*(M,V){let te=yield zt(M.appConfig);for(;1===te.authToken.requestStatus;)yield Hn(100),te=yield zt(M.appConfig);const _e=te.authToken;return 0===_e.requestStatus?qr(M,V):_e})).apply(this,arguments)}function zt(M){return Pi(M,V=>{if(!hr(V))throw Qt.create("not-registered");return function Ui(M){return 1===M.requestStatus&&M.requestTime+Vn<Date.now()}(V.authToken)?Object.assign(Object.assign({},V),{authToken:{requestStatus:0}}):V})}function zn(){return zn=(0,z.Z)(function*(M,V){try{const te=yield function Pt(M,V){return Dn.apply(this,arguments)}(M,V),_e=Object.assign(Object.assign({},V),{authToken:te});return yield Di(M.appConfig,_e),te}catch(te){if(!Rt(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const _e=Object.assign(Object.assign({},V),{authToken:{requestStatus:0}});yield Di(M.appConfig,_e)}else yield Yi(M.appConfig);throw te}}),zn.apply(this,arguments)}function hr(M){return void 0!==M&&2===M.registrationStatus}function ea(){return(ea=(0,z.Z)(function*(M){const V=M,{installationEntry:te,registrationPromise:_e}=yield Ne(V);return _e?_e.catch(console.error):qr(V).catch(console.error),te.fid})).apply(this,arguments)}function Ks(){return Ks=(0,z.Z)(function*(M,V=!1){const te=M;return yield function Wi(M){return en.apply(this,arguments)}(te),(yield qr(te,V)).token}),Ks.apply(this,arguments)}function en(){return(en=(0,z.Z)(function*(M){const{registrationPromise:V}=yield Ne(M);V&&(yield V)})).apply(this,arguments)}function He(M){return Qt.create("missing-app-config-values",{valueName:M})}const $e="installations",Ht=M=>{const V=M.getProvider("app").getImmediate(),te=function Je(M){if(!M||!M.options)throw He("App Configuration");if(!M.name)throw He("App Name");const V=["projectId","apiKey","appId"];for(const te of V)if(!M.options[te])throw He(te);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(V);return{app:V,appConfig:te,heartbeatServiceProvider:(0,Le._getProvider)(V,"heartbeat"),_delete:()=>Promise.resolve()}},Kn=M=>{const V=M.getProvider("app").getImmediate(),te=(0,Le._getProvider)(V,$e).getImmediate();return{getId:()=>function ns(M){return ea.apply(this,arguments)}(te),getToken:ke=>function Lr(M){return Ks.apply(this,arguments)}(te,ke)}};(function Sr(){(0,Le._registerComponent)(new je.wA($e,Ht,"PUBLIC")),(0,Le._registerComponent)(new je.wA("installations-internal",Kn,"PRIVATE"))})(),(0,Le.registerVersion)(Wr,br),(0,Le.registerVersion)(Wr,br,"esm2017");const tr="@firebase/remote-config",ws=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $a{constructor(V,te,_e,ke){this.client=V,this.storage=te,this.storageCache=_e,this.logger=ke}isCachedDataFresh(V,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const _e=Date.now()-te,ke=_e<=V;return this.logger.debug(`Config fetch cache check. Cache age millis: ${_e}. Cache max age millis (minimumFetchIntervalMillis setting): ${V}. Is cache hit: ${ke}.`),ke}fetch(V){var te=this;return(0,z.Z)(function*(){const[_e,ke]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(ke&&te.isCachedDataFresh(V.cacheMaxAgeMillis,_e))return ke;V.eTag=ke&&ke.eTag;const Xe=yield te.client.fetch(V),Dt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&Dt.push(te.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(Dt),Xe})()}}function Yo(M=navigator){return M.languages&&M.languages[0]||M.language}class Pa{constructor(V,te,_e,ke,Xe,Dt){this.firebaseInstallations=V,this.sdkVersion=te,this.namespace=_e,this.projectId=ke,this.apiKey=Xe,this.appId=Dt}fetch(V){var te=this;return(0,z.Z)(function*(){const[_e,ke]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":V.eTag||"*"},gn={sdk_version:te.sdkVersion,app_instance_id:_e,app_instance_id_token:ke,app_id:te.appId,language_code:Yo()},Xn={method:"POST",headers:mn,body:JSON.stringify(gn)},$r=fetch(Dt,Xn),Fr=new Promise((aa,Ta)=>{V.signal.addEventListener(()=>{const Bc=new Error("The operation was aborted.");Bc.name="AbortError",Ta(Bc)})});let mo;try{yield Promise.race([$r,Fr]),mo=yield $r}catch(aa){let Ta="fetch-client-network";throw"AbortError"===aa?.name&&(Ta="fetch-timeout"),ws.create(Ta,{originalErrorMessage:aa?.message})}let Ho=mo.status;const eu=mo.headers.get("ETag")||void 0;let gc,Su;if(200===mo.status){let aa;try{aa=yield mo.json()}catch(Ta){throw ws.create("fetch-client-parse",{originalErrorMessage:Ta?.message})}gc=aa.entries,Su=aa.state}if("INSTANCE_STATE_UNSPECIFIED"===Su?Ho=500:"NO_CHANGE"===Su?Ho=304:("NO_TEMPLATE"===Su||"EMPTY_CONFIG"===Su)&&(gc={}),304!==Ho&&200!==Ho)throw ws.create("fetch-status",{httpStatus:Ho});return{status:Ho,eTag:eu,config:gc}})()}}class xo{constructor(V,te){this.client=V,this.storage=te}fetch(V){var te=this;return(0,z.Z)(function*(){const _e=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(V,_e)})()}attemptFetch(V,{throttleEndTimeMillis:te,backoffCount:_e}){var ke=this;return(0,z.Z)(function*(){yield function to(M,V){return new Promise((te,_e)=>{const ke=Math.max(V-Date.now(),0),Xe=setTimeout(te,ke);M.addEventListener(()=>{clearTimeout(Xe),_e(ws.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(V.signal,te);try{const Xe=yield ke.client.fetch(V);return yield ke.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function vo(M){if(!(M instanceof Se.ZR&&M.customData))return!1;const V=Number(M.customData.httpStatus);return 429===V||500===V||503===V||504===V}(Xe))throw Xe;const Dt={throttleEndTimeMillis:Date.now()+(0,Se.$s)(_e),backoffCount:_e+1};return yield ke.storage.setThrottleMetadata(Dt),ke.attemptFetch(V,Dt)}})()}}class ha{constructor(V,te,_e,ke,Xe){this.app=V,this._client=te,this._storageCache=_e,this._storage=ke,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function io(M,V){const te=M.target.error||void 0;return ws.create(V,{originalErrorMessage:te&&te?.message})}const ta="app_namespace_store";class re{constructor(V,te,_e,ke=function X(){return new Promise((M,V)=>{try{const te=indexedDB.open("firebase_remote_config",1);te.onerror=_e=>{V(io(_e,"storage-open"))},te.onsuccess=_e=>{M(_e.target.result)},te.onupgradeneeded=_e=>{0===_e.oldVersion&&_e.target.result.createObjectStore(ta,{keyPath:"compositeKey"})}}catch(te){V(ws.create("storage-open",{originalErrorMessage:te?.message}))}})}()){this.appId=V,this.appName=te,this.namespace=_e,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(V){return this.set("last_fetch_status",V)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(V){return this.set("last_successful_fetch_timestamp_millis",V)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(V){return this.set("last_successful_fetch_response",V)}getActiveConfig(){return this.get("active_config")}setActiveConfig(V){return this.set("active_config",V)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(V){return this.set("active_config_etag",V)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(V){return this.set("throttle_metadata",V)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(V){var te=this;return(0,z.Z)(function*(){const _e=yield te.openDbPromise;return new Promise((ke,Xe)=>{const mn=_e.transaction([ta],"readonly").objectStore(ta),gn=te.createCompositeKey(V);try{const Xn=mn.get(gn);Xn.onerror=$r=>{Xe(io($r,"storage-get"))},Xn.onsuccess=$r=>{const Fr=$r.target.result;ke(Fr?Fr.value:void 0)}}catch(Xn){Xe(ws.create("storage-get",{originalErrorMessage:Xn?.message}))}})})()}set(V,te){var _e=this;return(0,z.Z)(function*(){const ke=yield _e.openDbPromise;return new Promise((Xe,Dt)=>{const gn=ke.transaction([ta],"readwrite").objectStore(ta),Xn=_e.createCompositeKey(V);try{const $r=gn.put({compositeKey:Xn,value:te});$r.onerror=Fr=>{Dt(io(Fr,"storage-set"))},$r.onsuccess=()=>{Xe()}}catch($r){Dt(ws.create("storage-set",{originalErrorMessage:$r?.message}))}})})()}delete(V){var te=this;return(0,z.Z)(function*(){const _e=yield te.openDbPromise;return new Promise((ke,Xe)=>{const mn=_e.transaction([ta],"readwrite").objectStore(ta),gn=te.createCompositeKey(V);try{const Xn=mn.delete(gn);Xn.onerror=$r=>{Xe(io($r,"storage-delete"))},Xn.onsuccess=()=>{ke()}}catch(Xn){Xe(ws.create("storage-delete",{originalErrorMessage:Xn?.message}))}})})()}createCompositeKey(V){return[this.appId,this.appName,this.namespace,V].join()}}class Te{constructor(V){this.storage=V}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var V=this;return(0,z.Z)(function*(){const te=V.storage.getLastFetchStatus(),_e=V.storage.getLastSuccessfulFetchTimestampMillis(),ke=V.storage.getActiveConfig(),Xe=yield te;Xe&&(V.lastFetchStatus=Xe);const Dt=yield _e;Dt&&(V.lastSuccessfulFetchTimestampMillis=Dt);const mn=yield ke;mn&&(V.activeConfig=mn)})()}setLastFetchStatus(V){return this.lastFetchStatus=V,this.storage.setLastFetchStatus(V)}setLastSuccessfulFetchTimestampMillis(V){return this.lastSuccessfulFetchTimestampMillis=V,this.storage.setLastSuccessfulFetchTimestampMillis(V)}setActiveConfig(V){return this.activeConfig=V,this.storage.setActiveConfig(V)}}function Kt(){return xn.apply(this,arguments)}function xn(){return(xn=(0,z.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}!function Fe(){(0,Le._registerComponent)(new je.wA("remote-config",function M(V,{instanceIdentifier:te}){const _e=V.getProvider("app").getImmediate(),ke=V.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ws.create("registration-window");if(!(0,Se.hl)())throw ws.create("indexed-db-unavailable");const{projectId:Xe,apiKey:Dt,appId:mn}=_e.options;if(!Xe)throw ws.create("registration-project-id");if(!Dt)throw ws.create("registration-api-key");if(!mn)throw ws.create("registration-app-id");const gn=new re(mn,_e.name,te=te||"firebase"),Xn=new Te(gn),$r=new Ge.Yd(tr);$r.logLevel=Ge.in.ERROR;const Fr=new Pa(ke,Le.SDK_VERSION,te,Xe,Dt,mn),mo=new xo(Fr,gn),Ho=new $a(mo,gn,Xn,$r),eu=new ha(_e,Ho,Xn,gn,$r);return function bs(M){const V=(0,Se.m9)(M);V._initializePromise||(V._initializePromise=V._storageCache.loadFromStorage().then(()=>{V._isInitializationComplete=!0}))}(eu),eu},"PUBLIC").setMultipleInstances(!0)),(0,Le.registerVersion)(tr,"0.4.4"),(0,Le.registerVersion)(tr,"0.4.4","esm2017")}();const dn=(M,V)=>V.some(te=>M instanceof te);let or,Pr;const xi=new WeakMap,bi=new WeakMap,Vr=new WeakMap,gi=new WeakMap,ks=new WeakMap;let li={get(M,V,te){if(M instanceof IDBTransaction){if("done"===V)return bi.get(M);if("objectStoreNames"===V)return M.objectStoreNames||Vr.get(M);if("store"===V)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return hs(M[V])},set:(M,V,te)=>(M[V]=te,!0),has:(M,V)=>M instanceof IDBTransaction&&("done"===V||"store"===V)||V in M};function Ls(M){return"function"==typeof M?function jr(M){return M!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Rs(){return Pr||(Pr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(M)?function(...V){return M.apply(rs(this),V),hs(xi.get(this))}:function(...V){return hs(M.apply(rs(this),V))}:function(V,...te){const _e=M.call(rs(this),V,...te);return Vr.set(_e,V.sort?V.sort():[V]),hs(_e)}}(M):(M instanceof IDBTransaction&&function ki(M){if(bi.has(M))return;const V=new Promise((te,_e)=>{const ke=()=>{M.removeEventListener("complete",Xe),M.removeEventListener("error",Dt),M.removeEventListener("abort",Dt)},Xe=()=>{te(),ke()},Dt=()=>{_e(M.error||new DOMException("AbortError","AbortError")),ke()};M.addEventListener("complete",Xe),M.addEventListener("error",Dt),M.addEventListener("abort",Dt)});bi.set(M,V)}(M),dn(M,function Gi(){return or||(or=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(M,li):M)}function hs(M){if(M instanceof IDBRequest)return function hi(M){const V=new Promise((te,_e)=>{const ke=()=>{M.removeEventListener("success",Xe),M.removeEventListener("error",Dt)},Xe=()=>{te(hs(M.result)),ke()},Dt=()=>{_e(M.error),ke()};M.addEventListener("success",Xe),M.addEventListener("error",Dt)});return V.then(te=>{te instanceof IDBCursor&&xi.set(te,M)}).catch(()=>{}),ks.set(V,M),V}(M);if(gi.has(M))return gi.get(M);const V=Ls(M);return V!==M&&(gi.set(M,V),ks.set(V,M)),V}const rs=M=>ks.get(M);function wo(M,V,{blocked:te,upgrade:_e,blocking:ke,terminated:Xe}={}){const Dt=indexedDB.open(M,V),mn=hs(Dt);return _e&&Dt.addEventListener("upgradeneeded",gn=>{_e(hs(Dt.result),gn.oldVersion,gn.newVersion,hs(Dt.transaction))}),te&&Dt.addEventListener("blocked",()=>te()),mn.then(gn=>{Xe&&gn.addEventListener("close",()=>Xe()),ke&&gn.addEventListener("versionchange",()=>ke())}).catch(()=>{}),mn}function Io(M,{blocked:V}={}){const te=indexedDB.deleteDatabase(M);return V&&te.addEventListener("blocked",()=>V()),hs(te).then(()=>{})}const Do=["get","getKey","getAll","getAllKeys","count"],Cs=["put","add","delete","clear"],fr=new Map;function so(M,V){if(!(M instanceof IDBDatabase)||V in M||"string"!=typeof V)return;if(fr.get(V))return fr.get(V);const te=V.replace(/FromIndex$/,""),_e=V!==te,ke=Cs.includes(te);if(!(te in(_e?IDBIndex:IDBObjectStore).prototype)||!ke&&!Do.includes(te))return;const Xe=function(){var Dt=(0,z.Z)(function*(mn,...gn){const Xn=this.transaction(mn,ke?"readwrite":"readonly");let $r=Xn.store;return _e&&($r=$r.index(gn.shift())),(yield Promise.all([$r[te](...gn),ke&&Xn.done]))[0]});return function(gn){return Dt.apply(this,arguments)}}();return fr.set(V,Xe),Xe}!function xr(M){li=M(li)}(M=>({...M,get:(V,te,_e)=>so(V,te)||M.get(V,te,_e),has:(V,te)=>!!so(V,te)||M.has(V,te)}));const pr="/firebase-messaging-sw.js",xa="/firebase-cloud-messaging-push-scope",ji="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Na="https://fcmregistrations.googleapis.com/v1",Ha="google.c.a.c_id",sl="google.c.a.c_l",Rl="google.c.a.ts",na="google.c.a.e";var L=(()=>{return(M=L||(L={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",L;var M})();function H(M){const V=new Uint8Array(M);return btoa(String.fromCharCode(...V)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function B(M){const te=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_e=atob(te),ke=new Uint8Array(_e.length);for(let Xe=0;Xe<_e.length;++Xe)ke[Xe]=_e.charCodeAt(Xe);return ke}const le="fcm_token_details_db",st=5,Nn="fcm_token_object_Store";function ls(){return ls=(0,z.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(le))return null;let V=null;return(yield wo(le,st,{upgrade:(_e=(0,z.Z)(function*(ke,Xe,Dt,mn){var gn;if(Xe<2||!ke.objectStoreNames.contains(Nn))return;const Xn=mn.objectStore(Nn),$r=yield Xn.index("fcmSenderId").get(M);if(yield Xn.clear(),$r)if(2===Xe){const Fr=$r;if(!Fr.auth||!Fr.p256dh||!Fr.endpoint)return;V={token:Fr.fcmToken,createTime:null!==(gn=Fr.createTime)&&void 0!==gn?gn:Date.now(),subscriptionOptions:{auth:Fr.auth,p256dh:Fr.p256dh,endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:"string"==typeof Fr.vapidKey?Fr.vapidKey:H(Fr.vapidKey)}}}else if(3===Xe){const Fr=$r;V={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:H(Fr.auth),p256dh:H(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:H(Fr.vapidKey)}}}else if(4===Xe){const Fr=$r;V={token:Fr.fcmToken,createTime:Fr.createTime,subscriptionOptions:{auth:H(Fr.auth),p256dh:H(Fr.p256dh),endpoint:Fr.endpoint,swScope:Fr.swScope,vapidKey:H(Fr.vapidKey)}}}}),function(Xe,Dt,mn,gn){return _e.apply(this,arguments)})})).close(),yield Io(le),yield Io("fcm_vapid_details_db"),yield Io("undefined"),function Qo(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:V}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof V.auth&&V.auth.length>0&&"string"==typeof V.p256dh&&V.p256dh.length>0&&"string"==typeof V.endpoint&&V.endpoint.length>0&&"string"==typeof V.swScope&&V.swScope.length>0&&"string"==typeof V.vapidKey&&V.vapidKey.length>0}(V)?V:null;var _e}),ls.apply(this,arguments)}const No="firebase-messaging-database",ol=1,To="firebase-messaging-store";let Oo=null;function Fs(){return Oo||(Oo=wo(No,ol,{upgrade:(M,V)=>{0===V&&M.createObjectStore(To)}})),Oo}function ho(M){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,z.Z)(function*(M){const V=ou(M),_e=yield(yield Fs()).transaction(To).objectStore(To).get(V);if(_e)return _e;{const ke=yield function Ni(M){return ls.apply(this,arguments)}(M.appConfig.senderId);if(ke)return yield So(M,ke),ke}}),Oa.apply(this,arguments)}function So(M,V){return ko.apply(this,arguments)}function ko(){return(ko=(0,z.Z)(function*(M,V){const te=ou(M),ke=(yield Fs()).transaction(To,"readwrite");return yield ke.objectStore(To).put(V,te),yield ke.done,V})).apply(this,arguments)}function bo(){return(bo=(0,z.Z)(function*(M){const V=ou(M),_e=(yield Fs()).transaction(To,"readwrite");yield _e.objectStore(To).delete(V),yield _e.done})).apply(this,arguments)}function ou({appConfig:M}){return M.appId}const Vs=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lo(M,V){return fa.apply(this,arguments)}function fa(){return(fa=(0,z.Z)(function*(M,V){const te=yield Fo(M),_e=za(V),ke={method:"POST",headers:te,body:JSON.stringify(_e)};let Xe;try{Xe=yield(yield fetch(Nl(M.appConfig),ke)).json()}catch(Dt){throw Vs.create("token-subscribe-failed",{errorInfo:Dt?.toString()})}if(Xe.error)throw Vs.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Vs.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function au(){return(au=(0,z.Z)(function*(M,V){const te=yield Fo(M),_e=za(V.subscriptionOptions),ke={method:"PATCH",headers:te,body:JSON.stringify(_e)};let Xe;try{Xe=yield(yield fetch(`${Nl(M.appConfig)}/${V.token}`,ke)).json()}catch(Dt){throw Vs.create("token-update-failed",{errorInfo:Dt?.toString()})}if(Xe.error)throw Vs.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Vs.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function xl(M,V){return is.apply(this,arguments)}function is(){return(is=(0,z.Z)(function*(M,V){const _e={method:"DELETE",headers:yield Fo(M)};try{const Xe=yield(yield fetch(`${Nl(M.appConfig)}/${V}`,_e)).json();if(Xe.error)throw Vs.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(ke){throw Vs.create("token-unsubscribe-failed",{errorInfo:ke?.toString()})}})).apply(this,arguments)}function Nl({projectId:M}){return`${Na}/projects/${M}/registrations`}function Fo(M){return pa.apply(this,arguments)}function pa(){return(pa=(0,z.Z)(function*({appConfig:M,installations:V}){const te=yield V.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function za({p256dh:M,auth:V,endpoint:te,vapidKey:_e}){const ke={web:{endpoint:te,auth:V,p256dh:M}};return _e!==ji&&(ke.web.applicationPubKey=_e),ke}const Ol=6048e5;function oo(){return oo=(0,z.Z)(function*(M){const V=yield function al(M,V){return ql.apply(this,arguments)}(M.swRegistration,M.vapidKey),te={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:V.endpoint,auth:H(V.getKey("auth")),p256dh:H(V.getKey("p256dh"))},_e=yield ho(M.firebaseDependencies);if(_e){if(function uc(M,V){return V.vapidKey===M.vapidKey&&V.endpoint===M.endpoint&&V.auth===M.auth&&V.p256dh===M.p256dh}(_e.subscriptionOptions,te))return Date.now()>=_e.createTime+Ol?function fs(M,V){return ga.apply(this,arguments)}(M,{token:_e.token,createTime:Date.now(),subscriptionOptions:te}):_e.token;try{yield xl(M.firebaseDependencies,_e.token)}catch(ke){console.warn(ke)}return Wa(M.firebaseDependencies,te)}return Wa(M.firebaseDependencies,te)}),oo.apply(this,arguments)}function Vo(){return Vo=(0,z.Z)(function*(M){const V=yield ho(M.firebaseDependencies);V&&(yield xl(M.firebaseDependencies,V.token),yield function Zs(M){return bo.apply(this,arguments)}(M.firebaseDependencies));const te=yield M.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()}),Vo.apply(this,arguments)}function ga(){return ga=(0,z.Z)(function*(M,V){try{const te=yield function Ki(M,V){return au.apply(this,arguments)}(M.firebaseDependencies,V),_e=Object.assign(Object.assign({},V),{token:te,createTime:Date.now()});return yield So(M.firebaseDependencies,_e),te}catch(te){throw yield function fi(M){return Vo.apply(this,arguments)}(M),te}}),ga.apply(this,arguments)}function Wa(M,V){return lu.apply(this,arguments)}function lu(){return(lu=(0,z.Z)(function*(M,V){const _e={token:yield Lo(M,V),createTime:Date.now(),subscriptionOptions:V};return yield So(M,_e),_e.token})).apply(this,arguments)}function ql(){return(ql=(0,z.Z)(function*(M,V){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:B(V)})})).apply(this,arguments)}function ka(M){const V={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function Ga(M,V){if(!V.notification)return;M.notification={};const te=V.notification.title;te&&(M.notification.title=te);const _e=V.notification.body;_e&&(M.notification.body=_e);const ke=V.notification.image;ke&&(M.notification.image=ke);const Xe=V.notification.icon;Xe&&(M.notification.icon=Xe)}(V,M),function uu(M,V){V.data&&(M.data=V.data)}(V,M),function k(M,V){var te,_e,ke,Xe,Dt;if(!(V.fcmOptions||null!==(te=V.notification)&&void 0!==te&&te.click_action))return;M.fcmOptions={};const mn=null!==(ke=null===(_e=V.fcmOptions)||void 0===_e?void 0:_e.link)&&void 0!==ke?ke:null===(Xe=V.notification)||void 0===Xe?void 0:Xe.click_action;mn&&(M.fcmOptions.link=mn);const gn=null===(Dt=V.fcmOptions)||void 0===Dt?void 0:Dt.analytics_label;gn&&(M.fcmOptions.analyticsLabel=gn)}(V,M),V}function $(M,V){const te=[];for(let _e=0;_e<M.length;_e++)te.push(M.charAt(_e)),_e<V.length&&te.push(V.charAt(_e));return te.join("")}function Me(M){return Vs.create("missing-app-config-values",{valueName:M})}$("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wt{constructor(V,te,_e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function ae(M){if(!M||!M.options)throw Me("App Configuration Object");if(!M.name)throw Me("App Name");const V=["projectId","apiKey","appId","messagingSenderId"],{options:te}=M;for(const _e of V)if(!te[_e])throw Me(_e);return{appName:M.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(V);this.firebaseDependencies={app:V,appConfig:ke,installations:te,analyticsProvider:_e}}_delete(){return Promise.resolve()}}function Ft(M){return sn.apply(this,arguments)}function sn(){return(sn=(0,z.Z)(function*(M){try{M.swRegistration=yield navigator.serviceWorker.register(pr,{scope:xa}),M.swRegistration.update().catch(()=>{})}catch(V){throw Vs.create("failed-service-worker-registration",{browserErrorMessage:V?.message})}})).apply(this,arguments)}function yr(){return(yr=(0,z.Z)(function*(M,V){if(!V&&!M.swRegistration&&(yield Ft(M)),V||!M.swRegistration){if(!(V instanceof ServiceWorkerRegistration))throw Vs.create("invalid-sw-registration");M.swRegistration=V}})).apply(this,arguments)}function kn(){return(kn=(0,z.Z)(function*(M,V){V?M.vapidKey=V:M.vapidKey||(M.vapidKey=ji)})).apply(this,arguments)}function ir(){return ir=(0,z.Z)(function*(M,V){if(!navigator)throw Vs.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vs.create("permission-blocked");return yield function ui(M,V){return kn.apply(this,arguments)}(M,V?.vapidKey),yield function Si(M,V){return yr.apply(this,arguments)}(M,V?.serviceWorkerRegistration),function fo(M){return oo.apply(this,arguments)}(M)}),ir.apply(this,arguments)}function Uo(){return(Uo=(0,z.Z)(function*(M,V,te){const _e=function pn(M){switch(M){case L.NOTIFICATION_CLICKED:return"notification_open";case L.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(V);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:te[Ha],message_name:te[sl],message_time:te[Rl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ws(){return Ws=(0,z.Z)(function*(M,V){const te=V.data;if(!te.isFirebaseMessaging)return;M.onMessageHandler&&te.messageType===L.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(ka(te)):M.onMessageHandler.next(ka(te)));const _e=te.data;(function Z(M){return"object"==typeof M&&!!M&&Ha in M})(_e)&&"1"===_e[na]&&(yield function $i(M,V,te){return Uo.apply(this,arguments)}(M,te.messageType,_e))}),Ws.apply(this,arguments)}const rn="@firebase/messaging",Bt=M=>{const V=new wt(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function Ln(M,V){return Ws.apply(this,arguments)}(V,te)),V},Us=M=>{const V=M.getProvider("messaging").getImmediate();return{getToken:_e=>function Vt(M,V){return ir.apply(this,arguments)}(V,_e)}};function Vc(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,z.Z)(function*(){try{yield(0,Se.eu)()}catch{return!1}return typeof window<"u"&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bu(){(0,Le._registerComponent)(new je.wA("messaging",Bt,"PUBLIC")),(0,Le._registerComponent)(new je.wA("messaging-internal",Us,"PRIVATE")),(0,Le.registerVersion)(rn,"0.12.4"),(0,Le.registerVersion)(rn,"0.12.4","esm2017")}();const Wn="analytics",ul="firebase_id",Zl="origin",ps=6e4,ar="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ka="https://www.googletagmanager.com/gtag/js",wr=new Ge.Yd("@firebase/analytics"),zr=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function _n(M){if(!M.startsWith(Ka)){const V=zr.create("invalid-gtag-resource",{gtagURL:M});return wr.warn(V.message),""}return M}function La(M){return Promise.all(M.map(V=>V.catch(te=>te)))}function kl(){return(kl=(0,z.Z)(function*(M,V,te,_e,ke,Xe){const Dt=_e[ke];try{if(Dt)yield V[Dt];else{const gn=(yield La(te)).find(Xn=>Xn.measurementId===ke);gn&&(yield V[gn.appId])}}catch(mn){wr.error(mn)}M("config",ke,Xe)})).apply(this,arguments)}function ia(){return(ia=(0,z.Z)(function*(M,V,te,_e,ke){try{let Xe=[];if(ke&&ke.send_to){let Dt=ke.send_to;Array.isArray(Dt)||(Dt=[Dt]);const mn=yield La(te);for(const gn of Dt){const Xn=mn.find(Fr=>Fr.measurementId===gn),$r=Xn&&V[Xn.appId];if(!$r){Xe=[];break}Xe.push($r)}}0===Xe.length&&(Xe=Object.values(V)),yield Promise.all(Xe),M("event",_e,ke||{})}catch(Xe){wr.error(Xe)}})).apply(this,arguments)}const hl=30,qa=new class Ms{constructor(V={},te=1e3){this.throttleMetadata=V,this.intervalMillis=te}getThrottleMetadata(V){return this.throttleMetadata[V]}setThrottleMetadata(V,te){this.throttleMetadata[V]=te}deleteThrottleMetadata(V){delete this.throttleMetadata[V]}};function ft(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function ci(){return(ci=(0,z.Z)(function*(M){var V;const{appId:te,apiKey:_e}=M,ke={method:"GET",headers:ft(_e)},Xe=ar.replace("{app-id}",te),Dt=yield fetch(Xe,ke);if(200!==Dt.status&&304!==Dt.status){let mn="";try{const gn=yield Dt.json();null!==(V=gn.error)&&void 0!==V&&V.message&&(mn=gn.error.message)}catch{}throw zr.create("config-fetch-failed",{httpStatus:Dt.status,responseMessage:mn})}return Dt.json()})).apply(this,arguments)}function xu(){return(xu=(0,z.Z)(function*(M,V=qa,te){const{appId:_e,apiKey:ke,measurementId:Xe}=M.options;if(!_e)throw zr.create("no-app-id");if(!ke){if(Xe)return{measurementId:Xe,appId:_e};throw zr.create("no-api-key")}const Dt=V.getThrottleMetadata(_e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mn=new dc;return setTimeout((0,z.Z)(function*(){mn.abort()}),void 0!==te?te:ps),Ll({appId:_e,apiKey:ke,measurementId:Xe},Dt,mn,V)})).apply(this,arguments)}function Ll(M,V,te){return Za.apply(this,arguments)}function Za(){return Za=(0,z.Z)(function*(M,{throttleEndTimeMillis:V,backoffCount:te},_e,ke=qa){var Xe;const{appId:Dt,measurementId:mn}=M;try{yield function Xo(M,V){return new Promise((te,_e)=>{const ke=Math.max(V-Date.now(),0),Xe=setTimeout(te,ke);M.addEventListener(()=>{clearTimeout(Xe),_e(zr.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(_e,V)}catch(gn){if(mn)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${gn?.message}]`),{appId:Dt,measurementId:mn};throw gn}try{const gn=yield function Du(M){return ci.apply(this,arguments)}(M);return ke.deleteThrottleMetadata(Dt),gn}catch(gn){const Xn=gn;if(!function Uc(M){if(!(M instanceof Se.ZR&&M.customData))return!1;const V=Number(M.customData.httpStatus);return 429===V||500===V||503===V||504===V}(Xn)){if(ke.deleteThrottleMetadata(Dt),mn)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mn} provided in the "measurementId" field in the local Firebase config. [${Xn?.message}]`),{appId:Dt,measurementId:mn};throw gn}const $r=503===Number(null===(Xe=Xn?.customData)||void 0===Xe?void 0:Xe.httpStatus)?(0,Se.$s)(te,ke.intervalMillis,hl):(0,Se.$s)(te,ke.intervalMillis),Fr={throttleEndTimeMillis:Date.now()+$r,backoffCount:te+1};return ke.setThrottleMetadata(Dt,Fr),wr.debug(`Calling attemptFetch again in ${$r} millis`),Ll(M,Fr,_e,ke)}}),Za.apply(this,arguments)}class dc{constructor(){this.listeners=[]}addEventListener(V){this.listeners.push(V)}abort(){this.listeners.forEach(V=>V())}}let Ql,b;function Ao(){return(Ao=(0,z.Z)(function*(M,V,te,_e,ke){if(ke&&ke.global)M("event",te,_e);else{const Xe=yield V;M("event",te,Object.assign(Object.assign({},_e),{send_to:Xe}))}})).apply(this,arguments)}function ge(){return(ge=(0,z.Z)(function*(){if(!(0,Se.hl)())return wr.warn(zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(M){return wr.warn(zr.create("indexeddb-unavailable",{errorInfo:M?.toString()}).message),!1}return!0})).apply(this,arguments)}function Nt(){return Nt=(0,z.Z)(function*(M,V,te,_e,ke,Xe,Dt){var mn;const gn=function fu(M){return xu.apply(this,arguments)}(M);gn.then(Ho=>{te[Ho.measurementId]=Ho.appId,M.options.measurementId&&Ho.measurementId!==M.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${Ho.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ho=>wr.error(Ho)),V.push(gn);const Xn=function se(){return ge.apply(this,arguments)}().then(Ho=>{if(Ho)return _e.getId()}),[$r,Fr]=yield Promise.all([gn,Xn]);(function dl(M){const V=window.document.getElementsByTagName("script");for(const te of Object.values(V))if(te.src&&te.src.includes(Ka)&&te.src.includes(M))return te;return null})(Xe)||function Bo(M,V){const te=function Ys(M,V){let te;return window.trustedTypes&&(te=window.trustedTypes.createPolicy(M,V)),te}("firebase-js-sdk-policy",{createScriptURL:_n}),_e=document.createElement("script"),ke=`${Ka}?l=${M}&id=${V}`;_e.src=te?te?.createScriptURL(ke):ke,_e.async=!0,document.head.appendChild(_e)}(Xe,$r.measurementId),b&&(ke("consent","default",b),function O(M){b=M}(void 0)),ke("js",new Date);const mo=null!==(mn=Dt?.config)&&void 0!==mn?mn:{};return mo[Zl]="firebase",mo.update=!0,null!=Fr&&(mo[ul]=Fr),ke("config",$r.measurementId,mo),Ql&&(ke("set",Ql),function G(M){Ql=M}(void 0)),$r.measurementId}),Nt.apply(this,arguments)}class Rn{constructor(V){this.app=V}_delete(){return delete Sn[this.app.options.appId],Promise.resolve()}}let Sn={},Li=[];const us={};let ao,Xi,jo="dataLayer",Ea="gtag",wa=!1;function Zu(M,V,te){!function Fa(){const M=[];if((0,Se.ru)()&&M.push("This is a browser extension environment."),(0,Se.zI)()||M.push("Cookies are not available."),M.length>0){const V=M.map((_e,ke)=>`(${ke+1}) ${_e}`).join(" "),te=zr.create("invalid-analytics-context",{errorInfo:V});wr.warn(te.message)}}();const _e=M.options.appId;if(!_e)throw zr.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw zr.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sn[_e])throw zr.create("already-exists",{id:_e});if(!wa){!function cl(M){let V=[];Array.isArray(window[M])?V=window[M]:window[M]=V}(jo);const{wrappedGtag:Xe,gtagCore:Dt}=function po(M,V,te,_e,ke){let Xe=function(...Dt){window[_e].push(arguments)};return window[ke]&&"function"==typeof window[ke]&&(Xe=window[ke]),window[ke]=function ya(M,V,te,_e){function Xe(){return Xe=(0,z.Z)(function*(Dt,...mn){try{if("event"===Dt){const[gn,Xn]=mn;yield function ra(M,V,te,_e,ke){return ia.apply(this,arguments)}(M,V,te,gn,Xn)}else if("config"===Dt){const[gn,Xn]=mn;yield function hu(M,V,te,_e,ke,Xe){return kl.apply(this,arguments)}(M,V,te,_e,gn,Xn)}else if("consent"===Dt){const[gn]=mn;M("consent","update",gn)}else if("get"===Dt){const[gn,Xn,$r]=mn;M("get",gn,Xn,$r)}else if("set"===Dt){const[gn]=mn;M("set",gn)}else M(Dt,...mn)}catch(gn){wr.error(gn)}}),Xe.apply(this,arguments)}return function ke(Dt){return Xe.apply(this,arguments)}}(Xe,M,V,te),{gtagCore:Xe,wrappedGtag:window[ke]}}(Sn,Li,us,jo,Ea);Xi=Xe,ao=Dt,wa=!0}return Sn[_e]=function et(M,V,te,_e,ke,Xe,Dt){return Nt.apply(this,arguments)}(M,Li,us,V,ao,jo,te),new Rn(M)}function Qs(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,z.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}const Dc="@firebase/analytics";!function go(){(0,Le._registerComponent)(new je.wA(Wn,(V,{options:te})=>Zu(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,Le._registerComponent)(new je.wA("analytics-internal",function M(V){try{const te=V.getProvider(Wn).getImmediate();return{logEvent:(_e,ke,Xe)=>function pu(M,V,te,_e){M=(0,Se.m9)(M),function qu(M,V,te,_e,ke){return Ao.apply(this,arguments)}(Xi,Sn[M.app.options.appId],V,te,_e).catch(ke=>wr.error(ke))}(te,_e,ke,Xe)}}catch(te){throw zr.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,Le.registerVersion)(Dc,"0.10.0"),(0,Le.registerVersion)(Dc,"0.10.0","esm2017")}();var fc=K(4408),_s=K(7565);const Jl=new class Ja extends _s.v{}(class Xl extends fc.o{constructor(V,te){super(V,te),this.scheduler=V,this.work=te}schedule(V,te=0){return te>0?super.schedule(V,te):(this.delay=te,this.state=V,this.scheduler.flush(this),this)}execute(V,te){return te>0||this.closed?super.execute(V,te):this._execute(V,te)}requestAsyncId(V,te,_e=0){return null!=_e&&_e>0||null==_e&&this.delay>0?super.requestAsyncId(V,te,_e):(V.flush(this),0)}});var ml=K(4986),gu=K(9751),Fl=K(8505),Ia=K(5363),Vl=K(9468);const Va=new _.GfV("7.6.1"),yl="__angularfire_symbol__analyticsIsSupportedValue",_l="__angularfire_symbol__analyticsIsSupported",sa="__angularfire_symbol__remoteConfigIsSupportedValue",pc="__angularfire_symbol__remoteConfigIsSupported",Tu="__angularfire_symbol__messagingIsSupportedValue",vl="__angularfire_symbol__messagingIsSupported";function Bl(M,V,te){if(V){if(1===V.length)return V[0];const Xe=V.filter(Dt=>Dt.app===te);if(1===Xe.length)return Xe[0]}return te.container.getProvider(M).getImmediate({optional:!0})}globalThis[_l]||(globalThis[_l]=Qs().then(M=>globalThis[yl]=M).catch(()=>globalThis[yl]=!1)),globalThis[vl]||(globalThis[vl]=Vc().then(M=>globalThis[Tu]=M).catch(()=>globalThis[Tu]=!1)),globalThis[pc]||(globalThis[pc]=Kt().then(M=>globalThis[sa]=M).catch(()=>globalThis[sa]=!1));const tl=(M,V)=>{const te=V?[V]:(0,ie.C6)(),_e=[];return te.forEach(ke=>{ke.container.getProvider(M).instances.forEach(Dt=>{_e.includes(Dt)||_e.push(Dt)})}),_e};function ba(){}class mu{constructor(V,te=Jl){this.zone=V,this.delegate=te}now(){return this.delegate.now()}schedule(V,te,_e){const ke=this.zone;return this.delegate.schedule(function(Dt){ke.runGuarded(()=>{V.apply(this,[Dt])})},te,_e)}}class Ca{constructor(V){this.zone=V,this.task=null}call(V,te){const _e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ba,{},ba,ba)),te.pipe((0,Fl.b)({next:_e,complete:_e,error:_e})).subscribe(V).add(_e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ou=(()=>{class M{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new mu(Zone.current)),this.insideAngular=te.run(()=>new mu(Zone.current,ml.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(te){return new(te||M)(_.LFG(_.R0b))},M.\u0275prov=_.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function Da(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function nl(M){return Da().ngZone.run(()=>M())}function ms(M){return M.pipe((0,Ia.Q)(Da().outsideAngular))}function Ps(M){return Da(),function jl(M){return function(te){return(te=te.lift(new Ca(M.ngZone))).pipe((0,Vl.R)(M.outsideAngular),(0,Ia.Q)(M.insideAngular))}}(Da())(M)}const ku=(M,V)=>function(){const _e=arguments;return V&&setTimeout(()=>{"scheduled"===V.state&&V.invoke()},10),nl(()=>M.apply(void 0,_e))},oa=(M,V)=>function(){let te;const _e=arguments;for(let Xe=0;Xe<arguments.length;Xe++)"function"==typeof _e[Xe]&&(V&&(te||(te=nl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ba,{},ba,ba)))),_e[Xe]=ku(_e[Xe],te));const ke=function yu(M){return Da().ngZone.runOutsideAngular(()=>M())}(()=>M.apply(this,_e));if(!V){if(ke instanceof gu.y){const Xe=Da();return ke.pipe((0,Vl.R)(Xe.outsideAngular),(0,Ia.Q)(Xe.insideAngular))}return nl(()=>ke)}return ke instanceof gu.y?ke.pipe(Ps):ke instanceof Promise?nl(()=>new Promise((Xe,Dt)=>ke.then(mn=>nl(()=>Xe(mn)),mn=>nl(()=>Dt(mn))))):"function"==typeof ke&&te?function(){return setTimeout(()=>{te&&"scheduled"===te.state&&te.invoke()},10),ke.apply(this,arguments)}:nl(()=>ke)}},1389:(fn,lt,K)=>{K.d(lt,{$:()=>pr,A:()=>we,D:()=>ht,I:()=>ei,J:()=>Ht,L:()=>xs,N:()=>Pi,P:()=>et,Q:()=>re,R:()=>fl,U:()=>Tt,V:()=>Kt,W:()=>xn,X:()=>qe,Y:()=>Gi,Z:()=>Rs,_:()=>ks,a:()=>ma,a0:()=>ji,a1:()=>Ha,a2:()=>Ml,a3:()=>Nn,a4:()=>ls,a5:()=>No,a6:()=>To,a7:()=>Fs,a8:()=>Oa,a9:()=>ko,aA:()=>Y,aB:()=>_l,aC:()=>Yi,aD:()=>Vi,aE:()=>Fl,aF:()=>Yu,aG:()=>cs,aH:()=>ai,aL:()=>ll,aO:()=>or,aa:()=>Zs,ab:()=>ou,ac:()=>Pl,ad:()=>Ki,ae:()=>xl,af:()=>Nl,ai:()=>Ol,aj:()=>oo,ak:()=>fi,an:()=>jr,ao:()=>Ga,aq:()=>kn,ar:()=>rn,as:()=>on,at:()=>We,au:()=>be,av:()=>Ze,aw:()=>Fr,ax:()=>vl,ay:()=>it,az:()=>Pe,b:()=>cu,c:()=>Xi,d:()=>Zu,e:()=>pl,f:()=>Dc,g:()=>Ja,h:()=>fc,i:()=>Yl,j:()=>ml,k:()=>Su,l:()=>va,m:()=>Bc,o:()=>Ju,p:()=>Ie,r:()=>R,s:()=>_a,u:()=>se,z:()=>wt});var _=K(5861),ie=K(2090),z=K(6881),Le=K(7582),Se=K(1877),je=K(4859);const Ie={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},we={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ht=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Mt=function dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qt=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new Se.Yd("@firebase/auth");function It(A,...m){_t.logLevel<=Se.in.ERROR&&_t.error(`Auth (${z.SDK_VERSION}): ${A}`,...m)}function Ze(A,...m){throw gt(A,...m)}function Pe(A,...m){return gt(A,...m)}function at(A,m,w){const P=Object.assign(Object.assign({},Mt()),{[m]:w});return new ie.LL("auth","Firebase",P).create(m,{appName:A.name})}function Lt(A,m,w){if(!(m instanceof w))throw w.name!==m.constructor.name&&Ze(A,"argument-error"),at(A,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gt(A,...m){if("string"!=typeof A){const w=m[0],P=[...m.slice(1)];return P[0]&&(P[0].appName=A.name),A._errorFactory.create(w,...P)}return qt.create(A,...m)}function Y(A,m,...w){if(!A)throw gt(m,...w)}function $t(A){const m="INTERNAL ASSERTION FAILED: "+A;throw It(m),new Error(m)}function on(A,m){A||$t(m)}function Yt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function Zt(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class Vn{constructor(m,w){this.shortDelay=m,this.longDelay=w,on(w>m,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return function Wr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,ie.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jn(A,m){on(A.emulator,"Emulator should always be set here");const{url:w}=A.emulator;return m?`${w}${m.startsWith("/")?m.slice(1):m}`:w}class Ke{static initialize(m,w,P){this.fetchImpl=m,w&&(this.headersImpl=w),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ut=new Vn(3e4,6e4);function ze(A,m){return A.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:A.tenantId}):m}function mt(A,m,w,P){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,_.Z)(function*(A,m,w,P,ne={}){return Qt(A,ne,(0,_.Z)(function*(){let fe={},tt={};P&&("GET"===m?tt=P:fe={body:JSON.stringify(P)});const Ct=(0,ie.xO)(Object.assign({key:A.config.apiKey},tt)).slice(1),ln=yield A._getAdditionalHeaders();return ln["Content-Type"]="application/json",A.languageCode&&(ln["X-Firebase-Locale"]=A.languageCode),Ke.fetch()(On(A,A.config.apiHost,w,Ct),Object.assign({method:m,headers:ln,referrerPolicy:"no-referrer"},fe))}))})).apply(this,arguments)}function Qt(A,m,w){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,_.Z)(function*(A,m,w){A._canInitEmulator=!1;const P=Object.assign(Object.assign({},Ye),m);try{const ne=new gr(A),fe=yield Promise.race([w(),ne.promise]);ne.clearNetworkTimeout();const tt=yield fe.json();if("needConfirmation"in tt)throw Qn(A,"account-exists-with-different-credential",tt);if(fe.ok&&!("errorMessage"in tt))return tt;{const Ct=fe.ok?tt.errorMessage:tt.error.message,[ln,Mn]=Ct.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ln)throw Qn(A,"credential-already-in-use",tt);if("EMAIL_EXISTS"===ln)throw Qn(A,"email-already-in-use",tt);if("USER_DISABLED"===ln)throw Qn(A,"user-disabled",tt);const dr=P[ln]||ln.toLowerCase().replace(/[_\s]+/g,"-");if(Mn)throw at(A,dr,Mn);Ze(A,dr)}}catch(ne){if(ne instanceof ie.ZR)throw ne;Ze(A,"network-request-failed",{message:String(ne)})}})).apply(this,arguments)}function nn(A,m,w,P){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.Z)(function*(A,m,w,P,ne={}){const fe=yield mt(A,m,w,P,ne);return"mfaPendingCredential"in fe&&Ze(A,"multi-factor-auth-required",{_serverResponse:fe}),fe})).apply(this,arguments)}function On(A,m,w,P){const ne=`${m}${w}?${P}`;return A.config.emulator?Jn(A.config,ne):`${A.config.apiScheme}://${ne}`}class gr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((w,P)=>{this.timer=setTimeout(()=>P(Pe(this.auth,"network-request-failed")),ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qn(A,m,w){const P={appName:A.name};w.email&&(P.email=w.email),w.phoneNumber&&(P.phoneNumber=w.phoneNumber);const ne=Pe(A,m,P);return ne.customData._tokenResponse=w,ne}function Cr(){return(Cr=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Er(){return(Er=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Pn(){return(Pn=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Xt(A){if(A)try{const m=new Date(Number(A));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Dr(){return(Dr=(0,_.Z)(function*(A,m=!1){const w=(0,ie.m9)(A),P=yield w.getIdToken(m),ne=ri(P);Y(ne&&ne.exp&&ne.auth_time&&ne.iat,w.auth,"internal-error");const fe="object"==typeof ne.firebase?ne.firebase:void 0,tt=fe?.sign_in_provider;return{claims:ne,token:P,authTime:Xt(jn(ne.auth_time)),issuedAtTime:Xt(jn(ne.iat)),expirationTime:Xt(jn(ne.exp)),signInProvider:tt||null,signInSecondFactor:fe?.sign_in_second_factor||null}})).apply(this,arguments)}function jn(A){return 1e3*Number(A)}function ri(A){const[m,w,P]=A.split(".");if(void 0===m||void 0===w||void 0===P)return It("JWT malformed, contained fewer than 3 sections"),null;try{const ne=(0,ie.tV)(w);return ne?JSON.parse(ne):(It("Failed to decode base64 JWT payload"),null)}catch(ne){return It("Caught error parsing JWT payload as JSON",ne?.toString()),null}}function er(A,m){return cn.apply(this,arguments)}function cn(){return(cn=(0,_.Z)(function*(A,m,w=!1){if(w)return m;try{return yield m}catch(P){throw P instanceof ie.ZR&&function An({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(P)&&A.auth.currentUser===A&&(yield A.auth.signOut()),P}})).apply(this,arguments)}class Yr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var w;if(m){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const ne=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,ne)}}schedule(m=!1){var w=this;if(!this.isRunning)return;const P=this.getInterval(m);this.timerId=setTimeout((0,_.Z)(function*(){yield w.iteration()}),P)}iteration(){var m=this;return(0,_.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w?.code&&m.schedule(!0))}m.schedule()})()}}class ii{constructor(m,w){this.createdAt=m,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xt(this.lastLoginAt),this.creationTime=Xt(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wn(A){return Qr.apply(this,arguments)}function Qr(){return Qr=(0,_.Z)(function*(A){var m;const w=A.auth,P=yield A.getIdToken(),ne=yield er(A,function Gr(A,m){return Pn.apply(this,arguments)}(w,{idToken:P}));Y(ne?.users.length,w,"internal-error");const fe=ne.users[0];A._notifyReloadListener(fe);const tt=null!==(m=fe.providerUserInfo)&&void 0!==m&&m.length?function Kr(A){return A.map(m=>{var{providerId:w}=m,P=(0,Le._T)(m,["providerId"]);return{providerId:w,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}(fe.providerUserInfo):[],Ct=function cr(A,m){return[...A.filter(P=>!m.some(ne=>ne.providerId===P.providerId)),...m]}(A.providerData,tt),dr=!!A.isAnonymous&&!(A.email&&fe.passwordHash||Ct?.length),Zr={uid:fe.localId,displayName:fe.displayName||null,photoURL:fe.photoUrl||null,email:fe.email||null,emailVerified:fe.emailVerified||!1,phoneNumber:fe.phoneNumber||null,tenantId:fe.tenantId||null,providerData:Ct,metadata:new ii(fe.createdAt,fe.lastLoginAt),isAnonymous:dr};Object.assign(A,Zr)}),Qr.apply(this,arguments)}function Xr(){return(Xr=(0,_.Z)(function*(A){const m=(0,ie.m9)(A);yield wn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(A,m){const w=yield Qt(A,{},(0,_.Z)(function*(){const P=(0,ie.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:ne,apiKey:fe}=A.config,tt=On(A,ne,"/v1/token",`key=${fe}`),Ct=yield A._getAdditionalHeaders();return Ct["Content-Type"]="application/x-www-form-urlencoded",Ke.fetch()(tt,{method:"POST",headers:Ct,body:P})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class an{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Y(m.idToken,"internal-error"),Y(typeof m.idToken<"u","internal-error"),Y(typeof m.refreshToken<"u","internal-error");const w="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Yn(A){const m=ri(A);return Y(m,"internal-error"),Y(typeof m.exp<"u","internal-error"),Y(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,w)}getToken(m,w=!1){var P=this;return(0,_.Z)(function*(){return Y(!P.accessToken||P.refreshToken,m,"user-token-expired"),w||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(m,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,w){var P=this;return(0,_.Z)(function*(){const{accessToken:ne,refreshToken:fe,expiresIn:tt}=yield function $n(A,m){return Nr.apply(this,arguments)}(m,w);P.updateTokensAndExpiration(ne,fe,Number(tt))})()}updateTokensAndExpiration(m,w,P){this.refreshToken=w||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(m,w){const{refreshToken:P,accessToken:ne,expirationTime:fe}=w,tt=new an;return P&&(Y("string"==typeof P,"internal-error",{appName:m}),tt.refreshToken=P),ne&&(Y("string"==typeof ne,"internal-error",{appName:m}),tt.accessToken=ne),fe&&(Y("number"==typeof fe,"internal-error",{appName:m}),tt.expirationTime=fe),tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new an,this.toJSON())}_performRefresh(){return $t("not implemented")}}function Jr(A,m){Y("string"==typeof A||typeof A>"u","internal-error",{appName:m})}class Di{constructor(m){var{uid:w,auth:P,stsTokenManager:ne}=m,fe=(0,Le._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=P,this.stsTokenManager=ne,this.accessToken=ne.accessToken,this.displayName=fe.displayName||null,this.email=fe.email||null,this.emailVerified=fe.emailVerified||!1,this.phoneNumber=fe.phoneNumber||null,this.photoURL=fe.photoURL||null,this.isAnonymous=fe.isAnonymous||!1,this.tenantId=fe.tenantId||null,this.providerData=fe.providerData?[...fe.providerData]:[],this.metadata=new ii(fe.createdAt||void 0,fe.lastLoginAt||void 0)}getIdToken(m){var w=this;return(0,_.Z)(function*(){const P=yield er(w,w.stsTokenManager.getToken(w.auth,m));return Y(P,w.auth,"internal-error"),w.accessToken!==P&&(w.accessToken=P,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),P})()}getIdTokenResult(m){return function yi(A){return Dr.apply(this,arguments)}(this,m)}reload(){return function si(A){return Xr.apply(this,arguments)}(this)}_assign(m){this!==m&&(Y(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(w=>Object.assign({},w)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const w=new Di(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return w.metadata._copy(this.metadata),w}_onReload(m){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,w=!1){var P=this;return(0,_.Z)(function*(){let ne=!1;m.idToken&&m.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(m),ne=!0),w&&(yield wn(P)),yield P.auth._persistUserIfCurrent(P),ne&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var m=this;return(0,_.Z)(function*(){const w=yield m.getIdToken();return yield er(m,function _r(A,m){return Cr.apply(this,arguments)}(m.auth,{idToken:w})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,w){var P,ne,fe,tt,Ct,ln,Mn,dr;const Zr=null!==(P=w.displayName)&&void 0!==P?P:void 0,Sa=null!==(ne=w.email)&&void 0!==ne?ne:void 0,Wo=null!==(fe=w.phoneNumber)&&void 0!==fe?fe:void 0,ec=null!==(tt=w.photoURL)&&void 0!==tt?tt:void 0,Os=null!==(Ct=w.tenantId)&&void 0!==Ct?Ct:void 0,tu=null!==(ln=w._redirectEventId)&&void 0!==ln?ln:void 0,bl=null!==(Mn=w.createdAt)&&void 0!==Mn?Mn:void 0,Lu=null!==(dr=w.lastLoginAt)&&void 0!==dr?dr:void 0,{uid:Xs,emailVerified:_u,isAnonymous:Au,providerData:_c,stsTokenManager:rl}=w;Y(Xs&&rl,m,"internal-error");const di=an.fromJSON(this.name,rl);Y("string"==typeof Xs,m,"internal-error"),Jr(Zr,m.name),Jr(Sa,m.name),Y("boolean"==typeof _u,m,"internal-error"),Y("boolean"==typeof Au,m,"internal-error"),Jr(Wo,m.name),Jr(ec,m.name),Jr(Os,m.name),Jr(tu,m.name),Jr(bl,m.name),Jr(Lu,m.name);const $c=new Di({uid:Xs,auth:m,email:Sa,emailVerified:_u,displayName:Zr,isAnonymous:Au,photoURL:ec,phoneNumber:Wo,tenantId:Os,stsTokenManager:di,createdAt:bl,lastLoginAt:Lu});return _c&&Array.isArray(_c)&&($c.providerData=_c.map(vc=>Object.assign({},vc))),tu&&($c._redirectEventId=tu),$c}static _fromIdTokenResponse(m,w,P=!1){return(0,_.Z)(function*(){const ne=new an;ne.updateFromServerResponse(w);const fe=new Di({uid:w.localId,auth:m,stsTokenManager:ne,isAnonymous:P});return yield wn(fe),fe})()}}const Mi=new Map;function Yi(A){on(A instanceof Function,"Expected a class definition");let m=Mi.get(A);return m?(on(m instanceof A,"Instance stored in cache mismatched with class"),m):(m=new A,Mi.set(A,m),m)}const Pi=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(w,P){var ne=this;return(0,_.Z)(function*(){ne.storage[w]=P})()}_get(w){var P=this;return(0,_.Z)(function*(){const ne=P.storage[w];return void 0===ne?null:ne})()}_remove(w){var P=this;return(0,_.Z)(function*(){delete P.storage[w]})()}_addListener(w,P){}_removeListener(w,P){}}return A.type="NONE",A})();function Vi(A,m,w){return`firebase:${A}:${m}:${w}`}class Ne{constructor(m,w,P){this.persistence=m,this.auth=w,this.userKey=P;const{config:ne,name:fe}=this.auth;this.fullUserKey=Vi(this.userKey,ne.apiKey,fe),this.fullPersistenceKey=Vi("persistence",ne.apiKey,fe),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,_.Z)(function*(){const w=yield m.persistence._get(m.fullUserKey);return w?Di._fromJSON(m.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var w=this;return(0,_.Z)(function*(){if(w.persistence===m)return;const P=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=m,P?w.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,w,P="authUser"){return(0,_.Z)(function*(){if(!w.length)return new Ne(Yi(Pi),m,P);const ne=(yield Promise.all(w.map(function(){var Mn=(0,_.Z)(function*(dr){if(yield dr._isAvailable())return dr});return function(dr){return Mn.apply(this,arguments)}}()))).filter(Mn=>Mn);let fe=ne[0]||Yi(Pi);const tt=Vi(P,m.config.apiKey,m.name);let Ct=null;for(const Mn of w)try{const dr=yield Mn._get(tt);if(dr){const Zr=Di._fromJSON(m,dr);Mn!==fe&&(Ct=Zr),fe=Mn;break}}catch{}const ln=ne.filter(Mn=>Mn._shouldAllowMigration);return fe._shouldAllowMigration&&ln.length?(fe=ln[0],Ct&&(yield fe._set(tt,Ct.toJSON())),yield Promise.all(w.map(function(){var Mn=(0,_.Z)(function*(dr){if(dr!==fe)try{yield dr._remove(tt)}catch{}});return function(dr){return Mn.apply(this,arguments)}}())),new Ne(fe,m,P)):new Ne(fe,m,P)})()}}function Re(A){const m=A.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Be(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(ce(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(De(m))return"Blackberry";if(ve(m))return"Webos";if(ye(m))return"Safari";if((m.includes("chrome/")||oe(m))&&!m.includes("edge/"))return"Chrome";if(be(m))return"Android";{const P=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function ce(A=(0,ie.z$)()){return/firefox\//i.test(A)}function ye(A=(0,ie.z$)()){const m=A.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function oe(A=(0,ie.z$)()){return/crios\//i.test(A)}function Be(A=(0,ie.z$)()){return/iemobile/i.test(A)}function be(A=(0,ie.z$)()){return/android/i.test(A)}function De(A=(0,ie.z$)()){return/blackberry/i.test(A)}function ve(A=(0,ie.z$)()){return/webos/i.test(A)}function We(A=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function it(A=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function Tn(A=(0,ie.z$)()){return We(A)||be(A)||ve(A)||De(A)||/windows phone/i.test(A)||Be(A)}function os(A,m=[]){let w;switch(A){case"Browser":w=Re((0,ie.z$)());break;case"Worker":w=`${Re((0,ie.z$)())}-${A}`;break;default:w=A}const P=m.length?m.join(","):"FirebaseCore-web";return`${w}/JsCore/${z.SDK_VERSION}/${P}`}function ot(){return(ot=(0,_.Z)(function*(A){return(yield mt(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zt(A,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(A,m){return mt(A,"GET","/v2/recaptchaConfig",ze(A,m))})).apply(this,arguments)}function zn(A){return void 0!==A&&void 0!==A.getResponse}function hr(A){return void 0!==A&&void 0!==A.enterprise}class In{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(w=>"EMAIL_PASSWORD_PROVIDER"===w.provider&&"OFF"!==w.enforcementState)}}function kr(A){return new Promise((m,w)=>{const P=document.createElement("script");P.setAttribute("src",A),P.onload=m,P.onerror=ne=>{const fe=Pe("internal-error");fe.customData=ne,w(fe)},P.type="text/javascript",P.charset="UTF-8",function Ur(){var A,m;return null!==(m=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==m?m:document}().appendChild(P)})}function Ui(A){return`__${A}${Math.floor(1e6*Math.random())}`}const Lr="NO_RECAPTCHA";class Ks{constructor(m){this.type="recaptcha-enterprise",this.auth=ai(m)}verify(m="verify",w=!1){var P=this;return(0,_.Z)(function*(){function fe(){return fe=(0,_.Z)(function*(Ct){if(!w){if(null==Ct.tenantId&&null!=Ct._agentRecaptchaConfig)return Ct._agentRecaptchaConfig.siteKey;if(null!=Ct.tenantId&&void 0!==Ct._tenantRecaptchaConfigs[Ct.tenantId])return Ct._tenantRecaptchaConfigs[Ct.tenantId].siteKey}return new Promise(function(){var ln=(0,_.Z)(function*(Mn,dr){zt(Ct,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Zr=>{if(void 0!==Zr.recaptchaKey){const Sa=new In(Zr);return null==Ct.tenantId?Ct._agentRecaptchaConfig=Sa:Ct._tenantRecaptchaConfigs[Ct.tenantId]=Sa,Mn(Sa.siteKey)}dr(new Error("recaptcha Enterprise site key undefined"))}).catch(Zr=>{dr(Zr)})});return function(Mn,dr){return ln.apply(this,arguments)}}())}),fe.apply(this,arguments)}function tt(Ct,ln,Mn){const dr=window.grecaptcha;hr(dr)?dr.enterprise.ready(()=>{dr.enterprise.execute(Ct,{action:m}).then(Zr=>{ln(Zr)}).catch(()=>{ln(Lr)})}):Mn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ct,ln)=>{(function ne(Ct){return fe.apply(this,arguments)})(P.auth).then(Mn=>{if(!w&&hr(window.grecaptcha))tt(Mn,Ct,ln);else{if(typeof window>"u")return void ln(new Error("RecaptchaVerifier is only supported in browser"));kr("https://www.google.com/recaptcha/enterprise.js?render="+Mn).then(()=>{tt(Mn,Ct,ln)}).catch(dr=>{ln(dr)})}}).catch(Mn=>{ln(Mn)})})})()}}function Wi(A,m,w){return en.apply(this,arguments)}function en(){return(en=(0,_.Z)(function*(A,m,w,P=!1){const ne=new Ks(A);let fe;try{fe=yield ne.verify(w)}catch{fe=yield ne.verify(w,!0)}const tt=Object.assign({},m);return Object.assign(tt,P?{captchaResp:fe}:{captchaResponse:fe}),Object.assign(tt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(tt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),tt})).apply(this,arguments)}class mr{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,w){const P=fe=>new Promise((tt,Ct)=>{try{tt(m(fe))}catch(ln){Ct(ln)}});P.onAbort=w,this.queue.push(P);const ne=this.queue.length-1;return()=>{this.queue[ne]=()=>Promise.resolve()}}runMiddleware(m){var w=this;return(0,_.Z)(function*(){if(w.auth.currentUser===m)return;const P=[];try{for(const ne of w.queue)yield ne(m),ne.onAbort&&P.push(ne.onAbort)}catch(ne){P.reverse();for(const fe of P)try{fe()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:ne?.message})}})()}}class oi{constructor(m,w,P,ne){this.app=m,this.heartbeatServiceProvider=w,this.appCheckServiceProvider=P,this.config=ne,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new as(this),this.idTokenSubscription=new as(this),this.beforeStateQueue=new mr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=ne.sdkClientVersion}_initializeWithPersistence(m,w){var P=this;return w&&(this._popupRedirectResolver=Yi(w)),this._initializationPromise=this.queue((0,_.Z)(function*(){var ne,fe;if(!P._deleted&&(P.persistenceManager=yield Ne.create(P,m),!P._deleted)){if(null!==(ne=P._popupRedirectResolver)&&void 0!==ne&&ne._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(w),P.lastNotifiedUid=(null===(fe=P.currentUser)||void 0===fe?void 0:fe.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,_.Z)(function*(){if(m._deleted)return;const w=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||w){if(m.currentUser&&w&&m.currentUser.uid===w.uid)return m._currentUser._assign(w),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(w,!0)}})()}initializeCurrentUser(m){var w=this;return(0,_.Z)(function*(){var P;const ne=yield w.assertedPersistence.getCurrentUser();let fe=ne,tt=!1;if(m&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const Ct=null===(P=w.redirectUser)||void 0===P?void 0:P._redirectEventId,ln=fe?._redirectEventId,Mn=yield w.tryRedirectSignIn(m);(!Ct||Ct===ln)&&Mn?.user&&(fe=Mn.user,tt=!0)}if(!fe)return w.directlySetCurrentUser(null);if(!fe._redirectEventId){if(tt)try{yield w.beforeStateQueue.runMiddleware(fe)}catch(Ct){fe=ne,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(Ct))}return fe?w.reloadAndSetCurrentUserOrClear(fe):w.directlySetCurrentUser(null)}return Y(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===fe._redirectEventId?w.directlySetCurrentUser(fe):w.reloadAndSetCurrentUserOrClear(fe)})()}tryRedirectSignIn(m){var w=this;return(0,_.Z)(function*(){let P=null;try{P=yield w._popupRedirectResolver._completeRedirectFn(w,m,!0)}catch{yield w._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(m){var w=this;return(0,_.Z)(function*(){try{yield wn(m)}catch(P){if("auth/network-request-failed"!==P?.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function br(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var m=this;return(0,_.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var w=this;return(0,_.Z)(function*(){const P=m?(0,ie.m9)(m):null;return P&&Y(P.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(P&&P._clone(w))})()}_updateCurrentUser(m,w=!1){var P=this;return(0,_.Z)(function*(){if(!P._deleted)return m&&Y(P.tenantId===m.tenantId,P,"tenant-id-mismatch"),w||(yield P.beforeStateQueue.runMiddleware(m)),P.queue((0,_.Z)(function*(){yield P.directlySetCurrentUser(m),P.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,_.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var w=this;return this.queue((0,_.Z)(function*(){yield w.assertedPersistence.setPersistence(Yi(m))}))}initializeRecaptchaConfig(){var m=this;return(0,_.Z)(function*(){const w=yield zt(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),P=new In(w);null==m.tenantId?m._agentRecaptchaConfig=P:m._tenantRecaptchaConfigs[m.tenantId]=P,P.emailPasswordEnabled&&new Ks(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new ie.LL("auth","Firebase",m())}onAuthStateChanged(m,w,P){return this.registerStateListener(this.authStateSubscription,m,w,P)}beforeAuthStateChanged(m,w){return this.beforeStateQueue.pushCallback(m,w)}onIdTokenChanged(m,w,P){return this.registerStateListener(this.idTokenSubscription,m,w,P)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,w){var P=this;return(0,_.Z)(function*(){const ne=yield P.getOrInitRedirectPersistenceManager(w);return null===m?ne.removeCurrentUser():ne.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var w=this;return(0,_.Z)(function*(){if(!w.redirectPersistenceManager){const P=m&&Yi(m)||w._popupRedirectResolver;Y(P,w,"argument-error"),w.redirectPersistenceManager=yield Ne.create(w,[Yi(P._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(m){var w=this;return(0,_.Z)(function*(){var P,ne;return w._isInitialized&&(yield w.queue((0,_.Z)(function*(){}))),(null===(P=w._currentUser)||void 0===P?void 0:P._redirectEventId)===m?w._currentUser:(null===(ne=w.redirectUser)||void 0===ne?void 0:ne._redirectEventId)===m?w.redirectUser:null})()}_persistUserIfCurrent(m){var w=this;return(0,_.Z)(function*(){if(m===w.currentUser)return w.queue((0,_.Z)(function*(){return w.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(w=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,w,P,ne){if(this._deleted)return()=>{};const fe="function"==typeof w?w:w.next.bind(w),tt=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(tt,this,"internal-error"),tt.then(()=>fe(this.currentUser)),"function"==typeof w?m.addObserver(w,P,ne):m.addObserver(w)}directlySetCurrentUser(m){var w=this;return(0,_.Z)(function*(){w.currentUser&&w.currentUser!==m&&w._currentUser._stopProactiveRefresh(),m&&w.isProactiveRefreshEnabled&&m._startProactiveRefresh(),w.currentUser=m,m?yield w.assertedPersistence.setCurrentUser(m):yield w.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,_.Z)(function*(){var w;const P={"X-Client-Version":m.clientVersion};m.app.options.appId&&(P["X-Firebase-gmpid"]=m.app.options.appId);const ne=yield null===(w=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();ne&&(P["X-Firebase-Client"]=ne);const fe=yield m._getAppCheckToken();return fe&&(P["X-Firebase-AppCheck"]=fe),P})()}_getAppCheckToken(){var m=this;return(0,_.Z)(function*(){var w;const P=yield null===(w=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getToken();return P?.error&&function At(A,...m){_t.logLevel<=Se.in.WARN&&_t.warn(`Auth (${z.SDK_VERSION}): ${A}`,...m)}(`Error while retrieving App Check token: ${P.error}`),P?.token})()}}function ai(A){return(0,ie.m9)(A)}class as{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,ie.ne)(w=>this.observer=w)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ei(A,m,w){const P=ai(A);Y(P._canInitEmulator,P,"emulator-config-failed"),Y(/^https?:\/\//.test(m),P,"invalid-emulator-scheme");const ne=!!w?.disableWarnings,fe=Je(m),{host:tt,port:Ct}=function He(A){const m=Je(A),w=/(\/\/)?([^?#/]+)/.exec(A.substr(m.length));if(!w)return{host:"",port:null};const P=w[2].split("@").pop()||"",ne=/^(\[[^\]]+\])(:|$)/.exec(P);if(ne){const fe=ne[1];return{host:fe,port:$e(P.substr(fe.length+1))}}{const[fe,tt]=P.split(":");return{host:fe,port:$e(tt)}}}(m);P.config.emulator={url:`${fe}//${tt}${null===Ct?"":`:${Ct}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:tt,port:Ct,protocol:fe.replace(":",""),options:Object.freeze({disableWarnings:ne})}),ne||function St(){function A(){const m=document.createElement("p"),w=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function Je(A){const m=A.indexOf(":");return m<0?"":A.substr(0,m+1)}function $e(A){if(!A)return null;const m=Number(A);return isNaN(m)?null:m}class Ht{constructor(m,w){this.providerId=m,this.signInMethod=w}toJSON(){return $t("not implemented")}_getIdTokenResponse(m){return $t("not implemented")}_linkToIdToken(m,w){return $t("not implemented")}_getReauthenticationResolver(m){return $t("not implemented")}}function Kn(A,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:resetPassword",ze(A,m))})).apply(this,arguments)}function tr(A,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Es(){return(Es=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:update",ze(A,m))})).apply(this,arguments)}function Ss(A,m){return ws.apply(this,arguments)}function ws(){return(ws=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithPassword",ze(A,m))})).apply(this,arguments)}function Ti(A,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:sendOobCode",ze(A,m))})).apply(this,arguments)}function Or(){return(Or=(0,_.Z)(function*(A,m){return Ti(A,m)})).apply(this,arguments)}function Br(A,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(A,m){return Ti(A,m)})).apply(this,arguments)}function As(A,m){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,_.Z)(function*(A,m){return Ti(A,m)})).apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(A,m){return Ti(A,m)})).apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithEmailLink",ze(A,m))})).apply(this,arguments)}function lr(){return(lr=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithEmailLink",ze(A,m))})).apply(this,arguments)}class vi extends Ht{constructor(m,w,P,ne=null){super("password",P),this._email=m,this._password=w,this._tenantId=ne}static _fromEmailAndPassword(m,w){return new vi(m,w,"password")}static _fromEmailAndCode(m,w,P=null){return new vi(m,w,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(m){var w=this;return(0,_.Z)(function*(){var P;switch(w.signInMethod){case"password":const ne={returnSecureToken:!0,email:w._email,password:w._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=m._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const fe=yield Wi(m,ne,"signInWithPassword");return Ss(m,fe)}return Ss(m,ne).catch(function(){var fe=(0,_.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ct=yield Wi(m,ne,"signInWithPassword");return Ss(m,Ct)}return Promise.reject(tt)});return function(tt){return fe.apply(this,arguments)}}());case"emailLink":return function _i(A,m){return ys.apply(this,arguments)}(m,{email:w._email,oobCode:w._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,w){var P=this;return(0,_.Z)(function*(){switch(P.signInMethod){case"password":return tr(m,{idToken:w,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function Tr(A,m){return lr.apply(this,arguments)}(m,{idToken:w,email:P._email,oobCode:P._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ii(A,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithIdp",ze(A,m))})).apply(this,arguments)}class xs extends Ht{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const w=new xs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(w.idToken=m.idToken),m.accessToken&&(w.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(w.nonce=m.nonce),m.pendingToken&&(w.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(w.accessToken=m.oauthToken,w.secret=m.oauthTokenSecret):Ze("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:P,signInMethod:ne}=w,fe=(0,Le._T)(w,["providerId","signInMethod"]);if(!P||!ne)return null;const tt=new xs(P,ne);return tt.idToken=fe.idToken||void 0,tt.accessToken=fe.accessToken||void 0,tt.secret=fe.secret,tt.nonce=fe.nonce,tt.pendingToken=fe.pendingToken||null,tt}_getIdTokenResponse(m){return Ii(m,this.buildRequest())}_linkToIdToken(m,w){const P=this.buildRequest();return P.idToken=w,Ii(m,P)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Ii(m,w)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),m.postBody=(0,ie.xO)(w)}return m}}function Yo(){return(Yo=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:sendVerificationCode",ze(A,m))})).apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithPhoneNumber",ze(A,m))})).apply(this,arguments)}function xo(){return(xo=(0,_.Z)(function*(A,m){const w=yield nn(A,"POST","/v1/accounts:signInWithPhoneNumber",ze(A,m));if(w.temporaryProof)throw Qn(A,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const no={USER_NOT_FOUND:"user-not-found"};function ha(){return(ha=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithPhoneNumber",ze(A,Object.assign(Object.assign({},m),{operation:"REAUTH"})),no)})).apply(this,arguments)}class io extends Ht{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,w){return new io({verificationId:m,verificationCode:w})}static _fromTokenResponse(m,w){return new io({phoneNumber:m,temporaryProof:w})}_getIdTokenResponse(m){return function Pa(A,m){return to.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,w){return function vo(A,m){return xo.apply(this,arguments)}(m,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ro(A,m){return ha.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:w,verificationId:P,verificationCode:ne}=this.params;return m&&w?{temporaryProof:m,phoneNumber:w}:{sessionInfo:P,code:ne}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:w,verificationCode:P,phoneNumber:ne,temporaryProof:fe}=m;return P||w||ne||fe?new io({verificationId:w,verificationCode:P,phoneNumber:ne,temporaryProof:fe}):null}}class zs{constructor(m){var w,P,ne,fe,tt,Ct;const ln=(0,ie.zd)((0,ie.pd)(m)),Mn=null!==(w=ln.apiKey)&&void 0!==w?w:null,dr=null!==(P=ln.oobCode)&&void 0!==P?P:null,Zr=function ta(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ne=ln.mode)&&void 0!==ne?ne:null);Y(Mn&&dr&&Zr,"argument-error"),this.apiKey=Mn,this.operation=Zr,this.code=dr,this.continueUrl=null!==(fe=ln.continueUrl)&&void 0!==fe?fe:null,this.languageCode=null!==(tt=ln.languageCode)&&void 0!==tt?tt:null,this.tenantId=null!==(Ct=ln.tenantId)&&void 0!==Ct?Ct:null}static parseLink(m){const w=function Eo(A){const m=(0,ie.zd)((0,ie.pd)(A)).link,w=m?(0,ie.zd)((0,ie.pd)(m)).deep_link_id:null,P=(0,ie.zd)((0,ie.pd)(A)).deep_link_id;return(P?(0,ie.zd)((0,ie.pd)(P)).link:null)||P||w||m||A}(m);try{return new zs(w)}catch{return null}}}let re=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(w,P){return vi._fromEmailAndPassword(w,P)}static credentialWithLink(w,P){const ne=zs.parseLink(P);return Y(ne,"argument-error"),vi._fromEmailAndCode(w,ne.code,ne.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Te{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Fe extends Te{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class qe extends Fe{static credentialFromJSON(m){const w="string"==typeof m?JSON.parse(m):m;return Y("providerId"in w&&"signInMethod"in w,"argument-error"),xs._fromParams(w)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Y(m.idToken||m.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return qe.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return qe.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:P,oauthTokenSecret:ne,pendingToken:fe,nonce:tt,providerId:Ct}=m;if(!P&&!ne&&!w&&!fe||!Ct)return null;try{return new qe(Ct)._credential({idToken:w,accessToken:P,nonce:tt,pendingToken:fe})}catch{return null}}}let Tt=(()=>{class A extends Fe{constructor(){super("facebook.com")}static credential(w){return xs._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return A.credential(w.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),Kt=(()=>{class A extends Fe{constructor(){super("google.com"),this.addScope("profile")}static credential(w,P){return xs._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:P})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:P,oauthAccessToken:ne}=w;if(!P&&!ne)return null;try{return A.credential(P,ne)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),xn=(()=>{class A extends Fe{constructor(){super("github.com")}static credential(w){return xs._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return A.credential(w.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class or extends Ht{constructor(m,w){super(m,m),this.pendingToken=w}_getIdTokenResponse(m){return Ii(m,this.buildRequest())}_linkToIdToken(m,w){const P=this.buildRequest();return P.idToken=w,Ii(m,P)}_getReauthenticationResolver(m){const w=this.buildRequest();return w.autoCreate=!1,Ii(m,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const w="string"==typeof m?JSON.parse(m):m,{providerId:P,signInMethod:ne,pendingToken:fe}=w;return P&&ne&&fe&&P===ne?new or(P,fe):null}static _create(m,w){return new or(m,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gi extends Te{constructor(m){Y(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Gi.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Gi.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const w=or.fromJSON(m);return Y(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:w,providerId:P}=m;if(!w||!P)return null;try{return or._create(P,w)}catch{return null}}}let Rs=(()=>{class A extends Fe{constructor(){super("twitter.com")}static credential(w,P){return xs._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:P})}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:P,oauthTokenSecret:ne}=w;if(!P||!ne)return null;try{return A.credential(P,ne)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function xi(A,m){return bi.apply(this,arguments)}function bi(){return(bi=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signUp",ze(A,m))})).apply(this,arguments)}class Vr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,w,P,ne=!1){return(0,_.Z)(function*(){const fe=yield Di._fromIdTokenResponse(m,P,ne),tt=gi(P);return new Vr({user:fe,providerId:tt,_tokenResponse:P,operationType:w})})()}static _forOperation(m,w,P){return(0,_.Z)(function*(){yield m._updateTokensIfNecessary(P,!0);const ne=gi(P);return new Vr({user:m,providerId:ne,_tokenResponse:P,operationType:w})})()}}function gi(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function ks(A){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.Z)(function*(A){var m;const w=ai(A);if(yield w._initializationPromise,null!==(m=w.currentUser)&&void 0!==m&&m.isAnonymous)return new Vr({user:w.currentUser,providerId:null,operationType:"signIn"});const P=yield xi(w,{returnSecureToken:!0}),ne=yield Vr._fromIdTokenResponse(w,"signIn",P,!0);return yield w._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class ki extends ie.ZR{constructor(m,w,P,ne){var fe;super(w.code,w.message),this.operationType=P,this.user=ne,Object.setPrototypeOf(this,ki.prototype),this.customData={appName:m.name,tenantId:null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,_serverResponse:w.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(m,w,P,ne){return new ki(m,w,P,ne)}}function li(A,m,w,P){return("reauthenticate"===m?w._getReauthenticationResolver(A):w._getIdTokenResponse(A)).catch(fe=>{throw"auth/multi-factor-auth-required"===fe.code?ki._fromErrorAndOperation(A,fe,m,P):fe})}function xr(A){return new Set(A.map(({providerId:m})=>m).filter(m=>!!m))}function jr(A,m){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,_.Z)(function*(A,m){const w=(0,ie.m9)(A);yield wo(!0,w,m);const{providerUserInfo:P}=yield function Hr(A,m){return Er.apply(this,arguments)}(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[m]}),ne=xr(P||[]);return w.providerData=w.providerData.filter(fe=>ne.has(fe.providerId)),ne.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w}),Ls.apply(this,arguments)}function hs(A,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,_.Z)(function*(A,m,w=!1){const P=yield er(A,m._linkToIdToken(A.auth,yield A.getIdToken()),w);return Vr._forOperation(A,"link",P)})).apply(this,arguments)}function wo(A,m,w){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(A,m,w){yield wn(m);const ne=!1===A?"provider-already-linked":"no-such-provider";Y(xr(m.providerData).has(w)===A,m.auth,ne)})).apply(this,arguments)}function Do(A,m){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(A,m,w=!1){const{auth:P}=A,ne="reauthenticate";try{const fe=yield er(A,li(P,ne,m,A),w);Y(fe.idToken,P,"internal-error");const tt=ri(fe.idToken);Y(tt,P,"internal-error");const{sub:Ct}=tt;return Y(A.uid===Ct,P,"user-mismatch"),Vr._forOperation(A,ne,fe)}catch(fe){throw"auth/user-not-found"===fe?.code&&Ze(P,"user-mismatch"),fe}})).apply(this,arguments)}function fr(A,m){return so.apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(A,m,w=!1){const P="signIn",ne=yield li(A,P,m),fe=yield Vr._fromIdTokenResponse(A,P,ne);return w||(yield A._updateCurrentUser(fe.user)),fe})).apply(this,arguments)}function pr(A,m){return xa.apply(this,arguments)}function xa(){return(xa=(0,_.Z)(function*(A,m){return fr(ai(A),m)})).apply(this,arguments)}function ji(A,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,_.Z)(function*(A,m){const w=(0,ie.m9)(A);return yield wo(!1,w,m.providerId),hs(w,m)})).apply(this,arguments)}function Ha(A,m){return sl.apply(this,arguments)}function sl(){return(sl=(0,_.Z)(function*(A,m){return Do((0,ie.m9)(A),m)})).apply(this,arguments)}function na(){return(na=(0,_.Z)(function*(A,m){return nn(A,"POST","/v1/accounts:signInWithCustomToken",ze(A,m))})).apply(this,arguments)}function Ml(A,m){return L.apply(this,arguments)}function L(){return L=(0,_.Z)(function*(A,m){const w=ai(A),P=yield function Rl(A,m){return na.apply(this,arguments)}(w,{token:m,returnSecureToken:!0}),ne=yield Vr._fromIdTokenResponse(w,"signIn",P);return yield w._updateCurrentUser(ne.user),ne}),L.apply(this,arguments)}class H{constructor(m,w){this.factorId=m,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(m,w){return"phoneInfo"in w?B._fromServerResponse(m,w):"totpInfo"in w?le._fromServerResponse(m,w):Ze(m,"internal-error")}}class B extends H{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,w){return new B(w)}}class le extends H{constructor(m){super("totp",m)}static _fromServerResponse(m,w){return new le(w)}}function st(A,m,w){var P;Y((null===(P=w.url)||void 0===P?void 0:P.length)>0,A,"invalid-continue-uri"),Y(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),m.continueUrl=w.url,m.dynamicLinkDomain=w.dynamicLinkDomain,m.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(Y(w.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),m.iOSBundleId=w.iOS.bundleId),w.android&&(Y(w.android.packageName.length>0,A,"missing-android-pkg-name"),m.androidInstallApp=w.android.installApp,m.androidMinimumVersionCode=w.android.minimumVersion,m.androidPackageName=w.android.packageName)}function Nn(A,m,w){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,_.Z)(function*(A,m,w){var P;const ne=ai(A),fe={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const tt=yield Wi(ne,fe,"getOobCode",!0);w&&st(ne,tt,w),yield Br(ne,tt)}else w&&st(ne,fe,w),yield Br(ne,fe).catch(function(){var tt=(0,_.Z)(function*(Ct){if("auth/missing-recaptcha-token"!==Ct.code)return Promise.reject(Ct);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ln=yield Wi(ne,fe,"getOobCode",!0);w&&st(ne,ln,w),yield Br(ne,ln)}});return function(Ct){return tt.apply(this,arguments)}}())}),Ni.apply(this,arguments)}function ls(A,m,w){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(A,m,w){yield Kn((0,ie.m9)(A),{oobCode:m,newPassword:w})})).apply(this,arguments)}function No(A,m){return ol.apply(this,arguments)}function ol(){return ol=(0,_.Z)(function*(A,m){yield function Is(A,m){return Es.apply(this,arguments)}((0,ie.m9)(A),{oobCode:m})}),ol.apply(this,arguments)}function To(A,m){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,_.Z)(function*(A,m){const w=(0,ie.m9)(A),P=yield Kn(w,{oobCode:m}),ne=P.requestType;switch(Y(ne,w,"internal-error"),ne){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(P.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(P.mfaInfo,w,"internal-error");default:Y(P.email,w,"internal-error")}let fe=null;return P.mfaInfo&&(fe=H._fromServerResponse(ai(w),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:fe},operation:ne}})).apply(this,arguments)}function Fs(A,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,_.Z)(function*(A,m){const{data:w}=yield To((0,ie.m9)(A),m);return w.email})).apply(this,arguments)}function Oa(A,m,w){return So.apply(this,arguments)}function So(){return So=(0,_.Z)(function*(A,m,w){var P;const ne=ai(A),fe={returnSecureToken:!0,email:m,password:w,clientType:"CLIENT_TYPE_WEB"};let tt;if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Mn=yield Wi(ne,fe,"signUpPassword");tt=xi(ne,Mn)}else tt=xi(ne,fe).catch(function(){var Mn=(0,_.Z)(function*(dr){if("auth/missing-recaptcha-token"===dr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Zr=yield Wi(ne,fe,"signUpPassword");return xi(ne,Zr)}return Promise.reject(dr)});return function(dr){return Mn.apply(this,arguments)}}());const Ct=yield tt.catch(Mn=>Promise.reject(Mn)),ln=yield Vr._fromIdTokenResponse(ne,"signIn",Ct);return yield ne._updateCurrentUser(ln.user),ln}),So.apply(this,arguments)}function ko(A,m,w){return pr((0,ie.m9)(A),re.credential(m,w))}function Zs(A,m,w){return bo.apply(this,arguments)}function bo(){return bo=(0,_.Z)(function*(A,m,w){var P;const ne=ai(A),fe={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function tt(Ct,ln){Y(ln.handleCodeInApp,ne,"argument-error"),ln&&st(ne,Ct,ln)}if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Ct=yield Wi(ne,fe,"getOobCode",!0);tt(Ct,w),yield As(ne,Ct)}else tt(fe,w),yield As(ne,fe).catch(function(){var Ct=(0,_.Z)(function*(ln){if("auth/missing-recaptcha-token"!==ln.code)return Promise.reject(ln);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Mn=yield Wi(ne,fe,"getOobCode",!0);tt(Mn,w),yield As(ne,Mn)}});return function(ln){return Ct.apply(this,arguments)}}())}),bo.apply(this,arguments)}function ou(A,m){return"EMAIL_SIGNIN"===zs.parseLink(m)?.operation}function Pl(A,m,w){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A),ne=re.credentialWithLink(m,w||Yt());return Y(ne._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),pr(P,ne)})).apply(this,arguments)}function fa(){return(fa=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:createAuthUri",ze(A,m))})).apply(this,arguments)}function Ki(A,m){return au.apply(this,arguments)}function au(){return au=(0,_.Z)(function*(A,m){const P={identifier:m,continueUri:Zt()?Yt():"http://localhost"},{signinMethods:ne}=yield function Lo(A,m){return fa.apply(this,arguments)}((0,ie.m9)(A),P);return ne||[]}),au.apply(this,arguments)}function xl(A,m){return is.apply(this,arguments)}function is(){return is=(0,_.Z)(function*(A,m){const w=(0,ie.m9)(A),ne={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};m&&st(w.auth,ne,m);const{email:fe}=yield function Zo(A,m){return Or.apply(this,arguments)}(w.auth,ne);fe!==A.email&&(yield A.reload())}),is.apply(this,arguments)}function Nl(A,m,w){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A),fe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:m};w&&st(P.auth,fe,w);const{email:tt}=yield function da(A,m){return bs.apply(this,arguments)}(P.auth,fe);tt!==A.email&&(yield A.reload())}),Fo.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(A,m){return mt(A,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ol(A,m){return fo.apply(this,arguments)}function fo(){return fo=(0,_.Z)(function*(A,{displayName:m,photoURL:w}){if(void 0===m&&void 0===w)return;const P=(0,ie.m9)(A),fe={idToken:yield P.getIdToken(),displayName:m,photoUrl:w,returnSecureToken:!0},tt=yield er(P,function pa(A,m){return za.apply(this,arguments)}(P.auth,fe));P.displayName=tt.displayName||null,P.photoURL=tt.photoUrl||null;const Ct=P.providerData.find(({providerId:ln})=>"password"===ln);Ct&&(Ct.displayName=P.displayName,Ct.photoURL=P.photoURL),yield P._updateTokensIfNecessary(tt)}),fo.apply(this,arguments)}function oo(A,m){return Vo((0,ie.m9)(A),m,null)}function fi(A,m){return Vo((0,ie.m9)(A),null,m)}function Vo(A,m,w){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(A,m,w){const{auth:P}=A,fe={idToken:yield A.getIdToken(),returnSecureToken:!0};m&&(fe.email=m),w&&(fe.password=w);const tt=yield er(A,tr(P,fe));yield A._updateTokensIfNecessary(tt,!0)})).apply(this,arguments)}class Wa{constructor(m,w,P={}){this.isNewUser=m,this.providerId=w,this.profile=P}}class lu extends Wa{constructor(m,w,P,ne){super(m,w,P),this.username=ne}}class al extends Wa{constructor(m,w){super(m,"facebook.com",w)}}class ql extends lu{constructor(m,w){super(m,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class uc extends Wa{constructor(m,w){super(m,"google.com",w)}}class ka extends lu{constructor(m,w,P){super(m,"twitter.com",w,P)}}function Ga(A){const{user:m,_tokenResponse:w}=A;return m.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function ga(A){var m,w;if(!A)return null;const{providerId:P}=A,ne=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},fe=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!P&&A?.idToken){const tt=null===(w=null===(m=ri(A.idToken))||void 0===m?void 0:m.firebase)||void 0===w?void 0:w.sign_in_provider;if(tt)return new Wa(fe,"anonymous"!==tt&&"custom"!==tt?tt:null)}if(!P)return null;switch(P){case"facebook.com":return new al(fe,ne);case"github.com":return new ql(fe,ne);case"google.com":return new uc(fe,ne);case"twitter.com":return new ka(fe,ne,A.screenName||null);case"custom":case"anonymous":return new Wa(fe,null);default:return new Wa(fe,P,ne)}}(w)}function wt(A,m){return(0,ie.m9)(A).updateCurrentUser(m)}class yr{constructor(m,w,P){this.type=m,this.credential=w,this.auth=P}static _fromIdtoken(m,w){return new yr("enroll",m,w)}static _fromMfaPendingCredential(m){return new yr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var w,P;if(m?.multiFactorSession){if(null!==(w=m.multiFactorSession)&&void 0!==w&&w.pendingCredential)return yr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(P=m.multiFactorSession)&&void 0!==P&&P.idToken)return yr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class ui{constructor(m,w,P){this.session=m,this.hints=w,this.signInResolver=P}static _fromError(m,w){const P=ai(m),ne=w.customData._serverResponse,fe=(ne.mfaInfo||[]).map(Ct=>H._fromServerResponse(P,Ct));Y(ne.mfaPendingCredential,P,"internal-error");const tt=yr._fromMfaPendingCredential(ne.mfaPendingCredential);return new ui(tt,fe,function(){var Ct=(0,_.Z)(function*(ln){const Mn=yield ln._process(P,tt);delete ne.mfaInfo,delete ne.mfaPendingCredential;const dr=Object.assign(Object.assign({},ne),{idToken:Mn.idToken,refreshToken:Mn.refreshToken});switch(w.operationType){case"signIn":const Zr=yield Vr._fromIdTokenResponse(P,w.operationType,dr);return yield P._updateCurrentUser(Zr.user),Zr;case"reauthenticate":return Y(w.user,P,"internal-error"),Vr._forOperation(w.user,w.operationType,dr);default:Ze(P,"internal-error")}});return function(ln){return Ct.apply(this,arguments)}}())}resolveSignIn(m){var w=this;return(0,_.Z)(function*(){return w.signInResolver(m)})()}}function kn(A,m){var w;const P=(0,ie.m9)(A),ne=m;return Y(m.customData.operationType,P,"argument-error"),Y(null===(w=ne.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,P,"argument-error"),ui._fromError(P,ne)}class Ln{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(P=>H._fromServerResponse(m.auth,P)))})}static _fromUser(m){return new Ln(m)}getSession(){var m=this;return(0,_.Z)(function*(){return yr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,w){var P=this;return(0,_.Z)(function*(){const ne=m,fe=yield P.getSession(),tt=yield er(P.user,ne._process(P.user.auth,fe,w));return yield P.user._updateTokensIfNecessary(tt),P.user.reload()})()}unenroll(m){var w=this;return(0,_.Z)(function*(){const P="string"==typeof m?m:m.uid,ne=yield w.user.getIdToken();try{const fe=yield er(w.user,function pn(A,m){return mt(A,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(A,m))}(w.user.auth,{idToken:ne,mfaEnrollmentId:P}));w.enrolledFactors=w.enrolledFactors.filter(({uid:tt})=>tt!==P),yield w.user._updateTokensIfNecessary(fe),yield w.user.reload()}catch(fe){throw fe}})()}}const Ws=new WeakMap;function rn(A){const m=(0,ie.m9)(A);return Ws.has(m)||Ws.set(m,Ln._fromUser(m)),Ws.get(m)}const pt="__sak";class Bt{constructor(m,w){this.storageRetriever=m,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(pt,"1"),this.storage.removeItem(pt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,w){return this.storage.setItem(m,JSON.stringify(w)),Promise.resolve()}_get(m){const w=this.storage.getItem(m);return Promise.resolve(w?JSON.parse(w):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const cu=(()=>{class A extends Bt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,P)=>this.onStorageEvent(w,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Us(){const A=(0,ie.z$)();return ye(A)||We(A)}()&&function qr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Tn(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const P of Object.keys(this.listeners)){const ne=this.storage.getItem(P),fe=this.localCache[P];ne!==fe&&w(P,fe,ne)}}onStorageEvent(w,P=!1){if(!w.key)return void this.forAllChangedKeys((Ct,ln,Mn)=>{this.notifyListeners(Ct,Mn)});const ne=w.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ct=this.storage.getItem(ne);if(w.newValue!==Ct)null!==w.newValue?this.storage.setItem(ne,w.newValue):this.storage.removeItem(ne);else if(this.localCache[ne]===w.newValue&&!P)return}const fe=()=>{const Ct=this.storage.getItem(ne);!P&&this.localCache[ne]===Ct||this.notifyListeners(ne,Ct)},tt=this.storage.getItem(ne);!function Dn(){return(0,ie.w1)()&&10===document.documentMode}()||tt===w.newValue||w.newValue===w.oldValue?fe():setTimeout(fe,10)}notifyListeners(w,P){this.localCache[w]=P;const ne=this.listeners[w];if(ne)for(const fe of Array.from(ne))fe(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,P,ne)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:P,newValue:ne}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(P)}_removeListener(w,P){this.listeners[w]&&(this.listeners[w].delete(P),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,P){var ne=()=>super._set,fe=this;return(0,_.Z)(function*(){yield ne().call(fe,w,P),fe.localCache[w]=JSON.stringify(P)})()}_get(w){var P=()=>super._get,ne=this;return(0,_.Z)(function*(){const fe=yield P().call(ne,w);return ne.localCache[w]=JSON.stringify(fe),fe})()}_remove(w){var P=()=>super._remove,ne=this;return(0,_.Z)(function*(){yield P().call(ne,w),delete ne.localCache[w]})()}}return A.type="LOCAL",A})(),ma=(()=>{class A extends Bt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,P){}_removeListener(w,P){}}return A.type="SESSION",A})();let Cu=(()=>{class A{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const P=this.receivers.find(fe=>fe.isListeningto(w));if(P)return P;const ne=new A(w);return this.receivers.push(ne),ne}isListeningto(w){return this.eventTarget===w}handleEvent(w){var P=this;return(0,_.Z)(function*(){const ne=w,{eventId:fe,eventType:tt,data:Ct}=ne.data,ln=P.handlersMap[tt];if(!ln?.size)return;ne.ports[0].postMessage({status:"ack",eventId:fe,eventType:tt});const Mn=Array.from(ln).map(function(){var Zr=(0,_.Z)(function*(Sa){return Sa(ne.origin,Ct)});return function(Sa){return Zr.apply(this,arguments)}}()),dr=yield function du(A){return Promise.all(A.map(function(){var m=(0,_.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(P){return{fulfilled:!1,reason:P}}});return function(w){return m.apply(this,arguments)}}()))}(Mn);ne.ports[0].postMessage({status:"done",eventId:fe,eventType:tt,response:dr})})()}_subscribe(w,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(P)}_unsubscribe(w,P){this.handlersMap[w]&&P&&this.handlersMap[w].delete(P),(!P||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function ll(A="",m=10){let w="";for(let P=0;P<m;P++)w+=Math.floor(10*Math.random());return A+w}class Pu{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,w,P=50){var ne=this;return(0,_.Z)(function*(){const fe=typeof MessageChannel<"u"?new MessageChannel:null;if(!fe)throw new Error("connection_unavailable");let tt,Ct;return new Promise((ln,Mn)=>{const dr=ll("",20);fe.port1.start();const Zr=setTimeout(()=>{Mn(new Error("unsupported_event"))},P);Ct={messageChannel:fe,onMessage(Sa){const Wo=Sa;if(Wo.data.eventId===dr)switch(Wo.data.status){case"ack":clearTimeout(Zr),tt=setTimeout(()=>{Mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(tt),ln(Wo.data.response);break;default:clearTimeout(Zr),clearTimeout(tt),Mn(new Error("invalid_response"))}}},ne.handlers.add(Ct),fe.port1.addEventListener("message",Ct.onMessage),ne.target.postMessage({eventType:m,eventId:dr,data:w},[fe.port2])}).finally(()=>{Ct&&ne.removeMessageHandler(Ct)})})()}}function Bs(){return window}function ul(){return typeof Bs().WorkerGlobalScope<"u"&&"function"==typeof Bs().importScripts}function ps(){return(ps=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wr="firebaseLocalStorageDb",Ku=1,zr="firebaseLocalStorage",_n="fbase_key";class La{constructor(m){this.request=m}toPromise(){return new Promise((m,w)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Ys(A,m){return A.transaction([zr],m?"readwrite":"readonly").objectStore(zr)}function cl(){const A=indexedDB.open(wr,Ku);return new Promise((m,w)=>{A.addEventListener("error",()=>{w(A.error)}),A.addEventListener("upgradeneeded",()=>{const P=A.result;try{P.createObjectStore(zr,{keyPath:_n})}catch(ne){w(ne)}}),A.addEventListener("success",(0,_.Z)(function*(){const P=A.result;P.objectStoreNames.contains(zr)?m(P):(P.close(),yield function Bo(){const A=indexedDB.deleteDatabase(wr);return new La(A).toPromise()}(),m(yield cl()))}))})}function hu(A,m,w){return kl.apply(this,arguments)}function kl(){return(kl=(0,_.Z)(function*(A,m,w){const P=Ys(A,!0).put({[_n]:m,value:w});return new La(P).toPromise()})).apply(this,arguments)}function ia(){return(ia=(0,_.Z)(function*(A,m){const w=Ys(A,!1).get(m),P=yield new La(w).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function ya(A,m){const w=Ys(A,!0).delete(m);return new La(w).toPromise()}const Yl=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,_.Z)(function*(){return w.db||(w.db=yield cl()),w.db})()}_withRetries(w){var P=this;return(0,_.Z)(function*(){let ne=0;for(;;)try{const fe=yield P._openDb();return yield w(fe)}catch(fe){if(ne++>3)throw fe;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,_.Z)(function*(){return ul()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,_.Z)(function*(){w.receiver=Cu._getInstance(function Ka(){return ul()?self:null}()),w.receiver._subscribe("keyChanged",function(){var P=(0,_.Z)(function*(ne,fe){return{keyProcessed:(yield w._poll()).includes(fe.key)}});return function(ne,fe){return P.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var P=(0,_.Z)(function*(ne,fe){return["keyChanged"]});return function(ne,fe){return P.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,_.Z)(function*(){var P,ne;if(w.activeServiceWorker=yield function Zl(){return ps.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Pu(w.activeServiceWorker);const fe=yield w.sender._send("ping",{},800);fe&&null!==(P=fe[0])&&void 0!==P&&P.fulfilled&&null!==(ne=fe[0])&&void 0!==ne&&ne.value.includes("keyChanged")&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var P=this;return(0,_.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function ar(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:w},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const w=yield cl();return yield hu(w,pt,"1"),yield ya(w,pt),!0}catch{}return!1})()}_withPendingWrite(w){var P=this;return(0,_.Z)(function*(){P.pendingWrites++;try{yield w()}finally{P.pendingWrites--}})()}_set(w,P){var ne=this;return(0,_.Z)(function*(){return ne._withPendingWrite((0,_.Z)(function*(){return yield ne._withRetries(fe=>hu(fe,w,P)),ne.localCache[w]=P,ne.notifyServiceWorker(w)}))})()}_get(w){var P=this;return(0,_.Z)(function*(){const ne=yield P._withRetries(fe=>function ra(A,m){return ia.apply(this,arguments)}(fe,w));return P.localCache[w]=ne,ne})()}_remove(w){var P=this;return(0,_.Z)(function*(){return P._withPendingWrite((0,_.Z)(function*(){return yield P._withRetries(ne=>ya(ne,w)),delete P.localCache[w],P.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,_.Z)(function*(){const P=yield w._withRetries(tt=>{const Ct=Ys(tt,!1).getAll();return new La(Ct).toPromise()});if(!P)return[];if(0!==w.pendingWrites)return[];const ne=[],fe=new Set;for(const{fbase_key:tt,value:Ct}of P)fe.add(tt),JSON.stringify(w.localCache[tt])!==JSON.stringify(Ct)&&(w.notifyListeners(tt,Ct),ne.push(tt));for(const tt of Object.keys(w.localCache))w.localCache[tt]&&!fe.has(tt)&&(w.notifyListeners(tt,null),ne.push(tt));return ne})()}notifyListeners(w,P){this.localCache[w]=P;const ne=this.listeners[w];if(ne)for(const fe of Array.from(ne))fe(P)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(P)}_removeListener(w,P){this.listeners[w]&&(this.listeners[w].delete(P),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})(),fu=1e12;class xu{constructor(m){this.auth=m,this.counter=fu,this._widgets=new Map}render(m,w){const P=this.counter;return this._widgets.set(P,new Ll(m,this.auth.name,w||{})),this.counter++,P}reset(m){var w;const P=m||fu;null===(w=this._widgets.get(P))||void 0===w||w.delete(),this._widgets.delete(P)}getResponse(m){var w;return(null===(w=this._widgets.get(m||fu))||void 0===w?void 0:w.getResponse())||""}execute(m){var w=this;return(0,_.Z)(function*(){var P;return null===(P=w._widgets.get(m||fu))||void 0===P||P.execute(),""})()}}class Ll{constructor(m,w,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ne="string"==typeof m?document.getElementById(m):m;Y(ne,"argument-error",{appName:w}),this.container=ne,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Za(A){const m=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<A;P++)m.push(w.charAt(Math.floor(Math.random()*w.length)));return m.join("")}(50);const{callback:m,"expired-callback":w}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xo=Ui("rcb"),Uc=new Vn(3e4,6e4);class Ql{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Bs().grecaptcha)||void 0===m||!m.render)}load(m,w=""){return Y(function qu(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(w),m,"argument-error"),this.shouldResolveImmediately(w)&&zn(Bs().grecaptcha)?Promise.resolve(Bs().grecaptcha):new Promise((P,ne)=>{const fe=Bs().setTimeout(()=>{ne(Pe(m,"network-request-failed"))},Uc.get());Bs()[Xo]=()=>{Bs().clearTimeout(fe),delete Bs()[Xo];const Ct=Bs().grecaptcha;if(!Ct||!zn(Ct))return void ne(Pe(m,"internal-error"));const ln=Ct.render;Ct.render=(Mn,dr)=>{const Zr=ln(Mn,dr);return this.counter++,Zr},this.hostLanguage=w,P(Ct)},kr(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:Xo,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(fe),ne(Pe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var w;return!(null===(w=Bs().grecaptcha)||void 0===w||!w.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ao{load(m){return(0,_.Z)(function*(){return new xu(m)})()}clearedOneInstance(){}}const Ns="recaptcha",Ya={theme:"light",type:"image"};class fl{constructor(m,w=Object.assign({},Ya),P){this.parameters=w,this.type=Ns,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ai(P),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ne="string"==typeof m?document.getElementById(m):m;Y(ne,this.auth,"argument-error"),this.container=ne,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ao:new Ql,this.validateStartingState()}verify(){var m=this;return(0,_.Z)(function*(){m.assertNotDestroyed();const w=yield m.render(),P=m.getAssertedRecaptcha();return P.getResponse(w)||new Promise(fe=>{const tt=Ct=>{Ct&&(m.tokenChangeListeners.delete(tt),fe(Ct))};m.tokenChangeListeners.add(tt),m.isInvisible&&P.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return w=>{if(this.tokenChangeListeners.forEach(P=>P(w)),"function"==typeof m)m(w);else if("string"==typeof m){const P=Bs()[m];"function"==typeof P&&P(w)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,_.Z)(function*(){if(yield m.init(),!m.widgetId){let w=m.container;if(!m.isInvisible){const P=document.createElement("div");w.appendChild(P),w=P}m.widgetId=m.getAssertedRecaptcha().render(w,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,_.Z)(function*(){Y(Zt()&&!ul(),m.auth,"internal-error"),yield function Ds(){let A=null;return new Promise(m=>{"complete"!==document.readyState?(A=()=>m(),window.addEventListener("load",A)):m()}).catch(m=>{throw A&&window.removeEventListener("load",A),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const w=yield function Et(A){return ot.apply(this,arguments)}(m.auth);Y(w,m.auth,"internal-error"),m.parameters.sitekey=w})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ro{constructor(m,w){this.verificationId=m,this.onConfirmation=w}confirm(m){const w=io._fromVerification(this.verificationId,m);return this.onConfirmation(w)}}function _a(A,m,w){return js.apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(A,m,w){const P=ai(A),ne=yield O(P,m,(0,ie.m9)(w));return new Ro(ne,fe=>pr(P,fe))})).apply(this,arguments)}function va(A,m,w){return D.apply(this,arguments)}function D(){return(D=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A);yield wo(!1,P,"phone");const ne=yield O(P.auth,m,(0,ie.m9)(w));return new Ro(ne,fe=>ji(P,fe))})).apply(this,arguments)}function R(A,m,w){return b.apply(this,arguments)}function b(){return(b=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A),ne=yield O(P.auth,m,(0,ie.m9)(w));return new Ro(ne,fe=>Ha(P,fe))})).apply(this,arguments)}function O(A,m,w){return G.apply(this,arguments)}function G(){return G=(0,_.Z)(function*(A,m,w){var P;const ne=yield w.verify();try{let fe;if(Y("string"==typeof ne,A,"argument-error"),Y(w.type===Ns,A,"argument-error"),fe="string"==typeof m?{phoneNumber:m}:m,"session"in fe){const tt=fe.session;if("phoneNumber"in fe)return Y("enroll"===tt.type,A,"internal-error"),(yield function Vt(A,m){return mt(A,"POST","/v2/accounts/mfaEnrollment:start",ze(A,m))}(A,{idToken:tt.credential,phoneEnrollmentInfo:{phoneNumber:fe.phoneNumber,recaptchaToken:ne}})).phoneSessionInfo.sessionInfo;{Y("signin"===tt.type,A,"internal-error");const Ct=(null===(P=fe.multiFactorHint)||void 0===P?void 0:P.uid)||fe.multiFactorUid;return Y(Ct,A,"missing-multi-factor-info"),(yield function Ms(A,m){return mt(A,"POST","/v2/accounts/mfaSignIn:start",ze(A,m))}(A,{mfaPendingCredential:tt.credential,mfaEnrollmentId:Ct,phoneSignInInfo:{recaptchaToken:ne}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:tt}=yield function $a(A,m){return Yo.apply(this,arguments)}(A,{phoneNumber:fe.phoneNumber,recaptchaToken:ne});return tt}}finally{w._reset()}}),G.apply(this,arguments)}function se(A,m){return ge.apply(this,arguments)}function ge(){return(ge=(0,_.Z)(function*(A,m){yield hs((0,ie.m9)(A),m)})).apply(this,arguments)}let et=(()=>{class A{constructor(w){this.providerId=A.PROVIDER_ID,this.auth=ai(w)}verifyPhoneNumber(w,P){return O(this.auth,w,(0,ie.m9)(P))}static credential(w,P){return io._fromVerification(w,P)}static credentialFromResult(w){return A.credentialFromTaggedObject(w)}static credentialFromError(w){return A.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:P,temporaryProof:ne}=w;return P&&ne?io._fromTokenResponse(P,ne):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function Nt(A,m){return m?Yi(m):(Y(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class Rn extends Ht{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ii(m,this._buildIdpRequest())}_linkToIdToken(m,w){return Ii(m,this._buildIdpRequest(w))}_getReauthenticationResolver(m){return Ii(m,this._buildIdpRequest())}_buildIdpRequest(m){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(w.idToken=m),w}}function Sn(A){return fr(A.auth,new Rn(A),A.bypassAuthState)}function Li(A){const{auth:m,user:w}=A;return Y(w,m,"internal-error"),Do(w,new Rn(A),A.bypassAuthState)}function us(A){return jo.apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(A){const{auth:m,user:w}=A;return Y(w,m,"internal-error"),hs(w,new Rn(A),A.bypassAuthState)})).apply(this,arguments)}class Ea{constructor(m,w,P,ne,fe=!1){this.auth=m,this.resolver=P,this.user=ne,this.bypassAuthState=fe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var m=this;return new Promise(function(){var w=(0,_.Z)(function*(P,ne){m.pendingPromise={resolve:P,reject:ne};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(fe){m.reject(fe)}});return function(P,ne){return w.apply(this,arguments)}}())}onAuthEvent(m){var w=this;return(0,_.Z)(function*(){const{urlResponse:P,sessionId:ne,postBody:fe,tenantId:tt,error:Ct,type:ln}=m;if(Ct)return void w.reject(Ct);const Mn={auth:w.auth,requestUri:P,sessionId:ne,tenantId:tt||void 0,postBody:fe||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(ln)(Mn))}catch(dr){w.reject(dr)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Sn;case"linkViaPopup":case"linkViaRedirect":return us;case"reauthViaPopup":case"reauthViaRedirect":return Li;default:Ze(this.auth,"internal-error")}}resolve(m){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new Vn(2e3,1e4);function Xi(A,m,w){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.Z)(function*(A,m,w){const P=ai(A);Lt(A,m,Te);const ne=Nt(P,w);return new Qa(P,"signInViaPopup",m,ne).executeNotNull()})).apply(this,arguments)}function pl(A,m,w){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A);Lt(P.auth,m,Te);const ne=Nt(P.auth,w);return new Qa(P.auth,"reauthViaPopup",m,ne,P).executeNotNull()})).apply(this,arguments)}function Zu(A,m,w){return gl.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A);Lt(P.auth,m,Te);const ne=Nt(P.auth,w);return new Qa(P.auth,"linkViaPopup",m,ne,P).executeNotNull()})).apply(this,arguments)}let Qa=(()=>{class A extends Ea{constructor(w,P,ne,fe,tt){super(w,P,fe,tt),this.provider=ne,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var w=this;return(0,_.Z)(function*(){const P=yield w.execute();return Y(P,w.auth,"internal-error"),P})()}onExecution(){var w=this;return(0,_.Z)(function*(){on(1===w.filter.length,"Popup operations only handle one event");const P=ll();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],P),w.authWindow.associatedEvent=P,w.resolver._originValidation(w.auth).catch(ne=>{w.reject(ne)}),w.resolver._isIframeWebStorageSupported(w.auth,ne=>{ne||w.reject(Pe(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const w=()=>{var P,ne;this.pollId=null!==(ne=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==ne&&ne.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(w,ao.get())};w()}}return A.currentPopupAction=null,A})();const Qs="pendingRedirect",Jo=new Map;class Xa extends Ea{constructor(m,w,P=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,P),this.eventId=null}execute(){var m=()=>super.execute,w=this;return(0,_.Z)(function*(){let P=Jo.get(w.auth._key());if(!P){try{const fe=(yield function hc(A,m){return gs.apply(this,arguments)}(w.resolver,w.auth))?yield m().call(w):null;P=()=>Promise.resolve(fe)}catch(ne){P=()=>Promise.reject(ne)}Jo.set(w.auth._key(),P)}return w.bypassAuthState||Jo.set(w.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(m){var w=()=>super.onAuthEvent,P=this;return(0,_.Z)(function*(){if("signInViaRedirect"===m.type)return w().call(P,m);if("unknown"!==m.type){if(m.eventId){const ne=yield P.auth._redirectUserForId(m.eventId);if(ne)return P.user=ne,w().call(P,m);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function gs(){return(gs=(0,_.Z)(function*(A,m){const w=$o(m),P=pu(A);if(!(yield P._isAvailable()))return!1;const ne="true"===(yield P._get(w));return yield P._remove(w),ne})).apply(this,arguments)}function lo(A,m){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(A,m){return pu(A)._set($o(m),"true")})).apply(this,arguments)}function cs(){Jo.clear()}function Yu(A,m){Jo.set(A._key(),m)}function pu(A){return Yi(A._redirectPersistence)}function $o(A){return Vi(Qs,A.config.apiKey,A.name)}function Dc(A,m,w){return function td(A,m,w){return go.apply(this,arguments)}(A,m,w)}function go(){return(go=(0,_.Z)(function*(A,m,w){const P=ai(A);Lt(A,m,Te),yield P._initializationPromise;const ne=Nt(P,w);return yield lo(ne,P),ne._openRedirect(P,m,"signInViaRedirect")})).apply(this,arguments)}function fc(A,m,w){return function Xl(A,m,w){return _s.apply(this,arguments)}(A,m,w)}function _s(){return(_s=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A);Lt(P.auth,m,Te),yield P.auth._initializationPromise;const ne=Nt(P.auth,w);yield lo(ne,P.auth);const fe=yield Vl(P);return ne._openRedirect(P.auth,m,"reauthViaRedirect",fe)})).apply(this,arguments)}function Ja(A,m,w){return function Jl(A,m,w){return el.apply(this,arguments)}(A,m,w)}function el(){return(el=(0,_.Z)(function*(A,m,w){const P=(0,ie.m9)(A);Lt(P.auth,m,Te),yield P.auth._initializationPromise;const ne=Nt(P.auth,w);yield wo(!1,P,m.providerId),yield lo(ne,P.auth);const fe=yield Vl(P);return ne._openRedirect(P.auth,m,"linkViaRedirect",fe)})).apply(this,arguments)}function ml(A,m){return gu.apply(this,arguments)}function gu(){return(gu=(0,_.Z)(function*(A,m){return yield ai(A)._initializationPromise,Fl(A,m,!1)})).apply(this,arguments)}function Fl(A,m){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,_.Z)(function*(A,m,w=!1){const P=ai(A),ne=Nt(P,m),tt=yield new Xa(P,ne,w).execute();return tt&&!w&&(delete tt.user._redirectEventId,yield P._persistUserIfCurrent(tt.user),yield P._setRedirectUser(null,m)),tt})).apply(this,arguments)}function Vl(A){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(A){const m=ll(`${A.uid}:::`);return A._redirectEventId=m,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),m})).apply(this,arguments)}class _l{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let w=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(m,P)&&(w=!0,this.sendToConsumer(m,P),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Tu(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pc(A);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=m,w=!0)),w}sendToConsumer(m,w){var P;if(m.error&&!pc(m)){const ne=(null===(P=m.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";w.onError(Pe(this.auth,ne))}else w.onAuthEvent(m)}isEventForConsumer(m,w){const P=null===w.eventId||!!m.eventId&&m.eventId===w.eventId;return w.filter.includes(m.type)&&P}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sa(m))}saveEventToCache(m){this.cachedEventUids.add(sa(m)),this.lastProcessedEventTime=Date.now()}}function sa(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(m=>m).join("-")}function pc({type:A,error:m}){return"unknown"===A&&"auth/no-auth-event"===m?.code}function vl(A){return El.apply(this,arguments)}function El(){return(El=(0,_.Z)(function*(A,m={}){return mt(A,"GET","/v1/projects",m)})).apply(this,arguments)}const Ul=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nu=/^https?/;function Bl(){return(Bl=(0,_.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:m}=yield vl(A);for(const w of m)try{if(tl(w))return}catch{}Ze(A,"unauthorized-domain")})).apply(this,arguments)}function tl(A){const m=Yt(),{protocol:w,hostname:P}=new URL(m);if(A.startsWith("chrome-extension://")){const tt=new URL(A);return""===tt.hostname&&""===P?"chrome-extension:"===w&&A.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===w&&tt.hostname===P}if(!Nu.test(w))return!1;if(Ul.test(A))return P===A;const ne=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ne+"|"+ne+")$","i").test(P)}const ba=new Vn(3e4,6e4);function mu(){const A=Bs().___jsl;if(A?.H)for(const m of Object.keys(A.H))if(A.H[m].r=A.H[m].r||[],A.H[m].L=A.H[m].L||[],A.H[m].r=[...A.H[m].L],A.CP)for(let w=0;w<A.CP.length;w++)A.CP[w]=null}let Ou=null;const yu=new Vn(5e3,15e3),nl="__/auth/iframe",ms="emulator/auth/iframe",Tc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ps=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(A){const m=A.config;Y(m.authDomain,A,"auth-domain-config-required");const w=m.emulator?Jn(m,ms):`https://${A.config.authDomain}/${nl}`,P={apiKey:m.apiKey,appName:A.name,v:z.SDK_VERSION},ne=Ps.get(A.config.apiHost);ne&&(P.eid=ne);const fe=A._getFrameworks();return fe.length&&(P.fw=fe.join(",")),`${w}?${(0,ie.xO)(P).slice(1)}`}function oa(){return oa=(0,_.Z)(function*(A){const m=yield function Da(A){return Ou=Ou||function Ca(A){return new Promise((m,w)=>{var P,ne,fe;function tt(){mu(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{mu(),w(Pe(A,"network-request-failed"))},timeout:ba.get()})}if(null!==(ne=null===(P=Bs().gapi)||void 0===P?void 0:P.iframes)&&void 0!==ne&&ne.Iframe)m(gapi.iframes.getContext());else{if(null===(fe=Bs().gapi)||void 0===fe||!fe.load){const Ct=Ui("iframefcb");return Bs()[Ct]=()=>{gapi.load?tt():w(Pe(A,"network-request-failed"))},kr(`https://apis.google.com/js/api.js?onload=${Ct}`).catch(ln=>w(ln))}tt()}}).catch(m=>{throw Ou=null,m})}(A),Ou}(A),w=Bs().gapi;return Y(w,A,"internal-error"),m.open({where:document.body,url:jl(A),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tc,dontclear:!0},P=>new Promise(function(){var ne=(0,_.Z)(function*(fe,tt){yield P.restyle({setHideOnLeave:!1});const Ct=Pe(A,"network-request-failed"),ln=Bs().setTimeout(()=>{tt(Ct)},yu.get());function Mn(){Bs().clearTimeout(ln),fe(P)}P.ping(Mn).then(Mn,()=>{tt(Ct)})});return function(fe,tt){return ne.apply(this,arguments)}}()))}),oa.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V=500,te=600,_e="_blank",ke="http://localhost";class Xe{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const gn="__/auth/handler",Xn="emulator/auth/handler",$r=encodeURIComponent("fac");function Fr(A,m,w,P,ne,fe){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(A,m,w,P,ne,fe){Y(A.config.authDomain,A,"auth-domain-config-required"),Y(A.config.apiKey,A,"invalid-api-key");const tt={apiKey:A.config.apiKey,appName:A.name,authType:w,redirectUrl:P,v:z.SDK_VERSION,eventId:ne};if(m instanceof Te){m.setDefaultLanguage(A.languageCode),tt.providerId=m.providerId||"",(0,ie.xb)(m.getCustomParameters())||(tt.customParameters=JSON.stringify(m.getCustomParameters()));for(const[dr,Zr]of Object.entries(fe||{}))tt[dr]=Zr}if(m instanceof Fe){const dr=m.getScopes().filter(Zr=>""!==Zr);dr.length>0&&(tt.scopes=dr.join(","))}A.tenantId&&(tt.tid=A.tenantId);const Ct=tt;for(const dr of Object.keys(Ct))void 0===Ct[dr]&&delete Ct[dr];const ln=yield A._getAppCheckToken(),Mn=ln?`#${$r}=${encodeURIComponent(ln)}`:"";return`${function Ho({config:A}){return A.emulator?Jn(A,Xn):`https://${A.authDomain}/${gn}`}(A)}?${(0,ie.xO)(Ct).slice(1)}${Mn}`})).apply(this,arguments)}const eu="webStorageSupport",Su=class gc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ma,this._completeRedirectFn=Fl,this._overrideRedirectResult=Yu}_openPopup(m,w,P,ne){var fe=this;return(0,_.Z)(function*(){var tt;on(null===(tt=fe.eventManagers[m._key()])||void 0===tt?void 0:tt.manager,"_initialize() not called before _openPopup()");const Ct=yield Fr(m,w,P,Yt(),ne);return function Dt(A,m,w,P=V,ne=te){const fe=Math.max((window.screen.availHeight-ne)/2,0).toString(),tt=Math.max((window.screen.availWidth-P)/2,0).toString();let Ct="";const ln=Object.assign(Object.assign({},M),{width:P.toString(),height:ne.toString(),top:fe,left:tt}),Mn=(0,ie.z$)().toLowerCase();w&&(Ct=oe(Mn)?_e:w),ce(Mn)&&(m=m||ke,ln.scrollbars="yes");const dr=Object.entries(ln).reduce((Sa,[Wo,ec])=>`${Sa}${Wo}=${ec},`,"");if(function Pt(A=(0,ie.z$)()){var m;return We(A)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Mn)&&"_self"!==Ct)return function mn(A,m){const w=document.createElement("a");w.href=A,w.target=m;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(P)}(m||"",Ct),new Xe(null);const Zr=window.open(m||"",Ct,dr);Y(Zr,A,"popup-blocked");try{Zr.focus()}catch{}return new Xe(Zr)}(m,Ct,ll())})()}_openRedirect(m,w,P,ne){var fe=this;return(0,_.Z)(function*(){return yield fe._originValidation(m),function Wn(A){Bs().location.href=A}(yield Fr(m,w,P,Yt(),ne)),new Promise(()=>{})})()}_initialize(m){const w=m._key();if(this.eventManagers[w]){const{manager:ne,promise:fe}=this.eventManagers[w];return ne?Promise.resolve(ne):(on(fe,"If manager is not set, promise should be"),fe)}const P=this.initAndGetManager(m);return this.eventManagers[w]={promise:P},P.catch(()=>{delete this.eventManagers[w]}),P}initAndGetManager(m){var w=this;return(0,_.Z)(function*(){const P=yield function ku(A){return oa.apply(this,arguments)}(m),ne=new _l(m);return P.register("authEvent",fe=>(Y(fe?.authEvent,m,"invalid-auth-event"),{status:ne.onEvent(fe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[m._key()]={manager:ne},w.iframes[m._key()]=P,ne})()}_isIframeWebStorageSupported(m,w){this.iframes[m._key()].send(eu,{type:eu},ne=>{var fe;const tt=null===(fe=ne?.[0])||void 0===fe?void 0:fe[eu];void 0!==tt&&w(!!tt),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const w=m._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Qu(A){return Bl.apply(this,arguments)}(m)),this.originValidationPromises[w]}get _shouldInitProactively(){return Tn()||ye()||We()}};class aa{constructor(m){this.factorId=m}_process(m,w,P){switch(w.type){case"enroll":return this._finalizeEnroll(m,w.credential,P);case"signin":return this._finalizeSignIn(m,w.credential);default:return $t("unexpected MultiFactorSessionType")}}}class Ta extends aa{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Ta(m)}_finalizeEnroll(m,w,P){return function ir(A,m){return mt(A,"POST","/v2/accounts/mfaEnrollment:finalize",ze(A,m))}(m,{idToken:w,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,w){return function qa(A,m){return mt(A,"POST","/v2/accounts/mfaSignIn:finalize",ze(A,m))}(m,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bc=(()=>{class A{constructor(){}static assertion(w){return Ta._fromCredential(w)}}return A.FACTOR_ID="phone",A})();var zo="@firebase/auth";class Mo{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var w=this;return(0,_.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const w=this.auth.onIdTokenChanged(P=>{m(P?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,w),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const w=this.internalListeners.get(m);w&&(this.internalListeners.delete(m),w(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const yc=(0,ie.Pz)("authIdTokenMaxAge")||300;let Hl=null;const gd=A=>function(){var m=(0,_.Z)(function*(w){const P=w&&(yield w.getIdTokenResult()),ne=P&&((new Date).getTime()-Date.parse(P.issuedAtTime))/1e3;if(ne&&ne>yc)return;const fe=P?.token;Hl!==fe&&(Hl=fe,yield fetch(A,{method:fe?"POST":"DELETE",headers:fe?{Authorization:`Bearer ${fe}`}:{}}))});return function(w){return m.apply(this,arguments)}}();function Ju(A=(0,z.getApp)()){const m=(0,z._getProvider)(A,"auth");if(m.isInitialized())return m.getImmediate();const w=function Qi(A,m){const w=(0,z._getProvider)(A,"auth");if(w.isInitialized()){const ne=w.getImmediate(),fe=w.getOptions();if((0,ie.vZ)(fe,m??{}))return ne;Ze(ne,"already-initialized")}return w.initialize({options:m})}(A,{popupRedirectResolver:Su,persistence:[Yl,cu,ma]}),P=(0,ie.Pz)("authTokenSyncURL");if(P){const fe=gd(P);(function $(A,m,w){(0,ie.m9)(A).beforeAuthStateChanged(m,w)})(w,fe,()=>fe(w.currentUser)),function Z(A,m,w,P){(0,ie.m9)(A).onIdTokenChanged(m,w,P)}(w,tt=>fe(tt))}const ne=(0,ie.q4)("auth");return ne&&ei(w,`http://${ne}`),w}!function Sc(A){(0,z._registerComponent)(new je.wA("auth",(m,{options:w})=>{const P=m.getProvider("app").getImmediate(),ne=m.getProvider("heartbeat"),fe=m.getProvider("app-check-internal"),{apiKey:tt,authDomain:Ct}=P.options;Y(tt&&!tt.includes(":"),"invalid-api-key",{appName:P.name});const ln={apiKey:tt,authDomain:Ct,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:os(A)},Mn=new oi(P,ne,fe,ln);return function qs(A,m){const w=m?.persistence||[],P=(Array.isArray(w)?w:[w]).map(Yi);m?.errorMap&&A._updateErrorMap(m.errorMap),A._initializeWithPersistence(P,m?.popupRedirectResolver)}(Mn,w),Mn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,w,P)=>{m.getProvider("auth-internal").initialize()})),(0,z._registerComponent)(new je.wA("auth-internal",m=>{const w=ai(m.getProvider("auth").getImmediate());return new Mo(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,z.registerVersion)(zo,"0.23.2",function mc(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,z.registerVersion)(zo,"0.23.2","esm2017")}("Browser")},2810:(fn,lt,K)=>{K.d(lt,{u7:()=>Np,Jj:()=>dd,IX:()=>Jm,my:()=>ua,xU:()=>fh,Lz:()=>hd,WA:()=>Bt,F8:()=>Tf,$q:()=>kf,W:()=>Jc,EK:()=>ps,PU:()=>Jg,l7:()=>Fl,Ky:()=>_n,Xb:()=>zr,Cf:()=>ts,K9:()=>Ws,Me:()=>td,yq:()=>$i,Wi:()=>Vg,ET:()=>X_,Ab:()=>Sy,vr:()=>lv,Fc:()=>O_,hJ:()=>Bg,B$:()=>kc,at:()=>Ym,oe:()=>Iy,AK:()=>av,TF:()=>ty,JU:()=>Qm,ST:()=>Df,fH:()=>N_,Ix:()=>ey,Wu:()=>xp,Lx:()=>W_,qY:()=>Ba,GL:()=>qh,QT:()=>vy,kl:()=>Lf,Xk:()=>Ff,PL:()=>Z_,UQ:()=>Y_,zN:()=>Q_,ad:()=>x_,nP:()=>uv,b9:()=>Zv,vh:()=>ni,Pb:()=>L_,L$:()=>ny,cf:()=>by,sc:()=>J_,Xo:()=>py,IO:()=>dh,iE:()=>Cc,Eo:()=>P_,i3:()=>Vf,Bt:()=>Ty,pl:()=>Ey,Ub:()=>kn,qK:()=>_y,TQ:()=>z_,e0:()=>H_,r7:()=>wy,Mx:()=>k_,ar:()=>$_});var Ie,_=K(5861),ie=K(6881),z=K(4859),Le=K(1877),Se=K(2090),je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ge={},Qe=Qe||{},he=je||self;function we(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Oe(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var ht="closure_uid_"+(1e9*Math.random()>>>0),Mt=0;function qt(r,e,t){return r.call.apply(r.bind,arguments)}function ct(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function _t(r,e,t){return(_t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qt:ct).apply(null,arguments)}function At(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function It(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,p){for(var E=Array(arguments.length-2),x=2;x<arguments.length;x++)E[x-2]=arguments[x];return e.prototype[a].apply(s,E)}}function Ze(){this.s=this.s,this.o=this.o}Ze.prototype.s=!1,Ze.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function dt(r){Object.prototype.hasOwnProperty.call(r,ht)&&r[ht]||(r[ht]=++Mt)}(this)},Ze.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const at=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Lt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function gt(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(we(s)){const a=r.length||0,p=s.length||0;r.length=a+p;for(let E=0;E<p;E++)r[a+E]=s[E]}else r.push(s)}}function Y(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{he.addEventListener("test",()=>{},e),he.removeEventListener("test",()=>{},e)}catch{}return r}();function on(r){return/^[\s\xa0]*$/.test(r)}function Yt(){var r=he.navigator;return r&&(r=r.userAgent)?r:""}function Zt(r){return-1!=Yt().indexOf(r)}function Gt(r){return Gt[" "](r),r}Gt[" "]=function(){};var mt,r,br=Zt("Opera"),Vn=Zt("Trident")||Zt("MSIE"),Jn=Zt("Edge"),Ke=Jn||Vn,Ye=Zt("Gecko")&&!(-1!=Yt().toLowerCase().indexOf("webkit")&&!Zt("Edge"))&&!(Zt("Trident")||Zt("MSIE"))&&!Zt("Edge"),ut=-1!=Yt().toLowerCase().indexOf("webkit")&&!Zt("Edge");function ze(){var r=he.document;return r?r.documentMode:void 0}e:{var Ot="",Qt=(r=Yt(),Ye?/rv:([^\);]+)(\)|;)/.exec(r):Jn?/Edge\/([\d\.]+)/.exec(r):Vn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):ut?/WebKit\/(\S+)/.exec(r):br?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Qt&&(Ot=Qt?Qt[1]:""),Vn){var Rt=ze();if(null!=Rt&&Rt>parseFloat(Ot)){mt=String(Rt);break e}}mt=Ot}var On=he.document&&Vn&&(ze()||parseInt(mt,10))||void 0;function gr(r,e){if(Y.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Ye){e:{try{Gt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Qn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&gr.$.h.call(this)}}It(gr,Y);var Qn={2:"touch",3:"pen",4:"mouse"};gr.prototype.h=function(){gr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var _r="closure_listenable_"+(1e6*Math.random()|0),Cr=0;function Hr(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Cr,this.fa=this.ia=!1}function Er(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Gr(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Xt(r){const e={};for(const t in r)e[t]=r[t];return e}const Hn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yi(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let p=0;p<Hn.length;p++)t=Hn[p],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Dr(r){this.src=r,this.g={},this.h=0}function jn(r,e){var t=e.type;if(t in r.g){var p,s=r.g[t],a=at(s,e);(p=0<=a)&&Array.prototype.splice.call(s,a,1),p&&(Er(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ri(r,e,t,s){for(var a=0;a<r.length;++a){var p=r[a];if(!p.fa&&p.listener==e&&p.capture==!!t&&p.la==s)return a}return-1}Dr.prototype.add=function(r,e,t,s,a){var p=r.toString();(r=this.g[p])||(r=this.g[p]=[],this.h++);var E=ri(r,e,s,a);return-1<E?(e=r[E],t||(e.ia=!1)):((e=new Hr(e,this.src,p,!!s,a)).ia=t,r.push(e)),e};var Yn="closure_lm_"+(1e6*Math.random()|0),er={};function cn(r,e,t,s,a){if(s&&s.once)return ii(r,e,t,s,a);if(Array.isArray(e)){for(var p=0;p<e.length;p++)cn(r,e[p],t,s,a);return null}return t=$n(t),r&&r[_r]?r.O(e,t,Oe(s)?!!s.capture:!!s,a):An(r,e,t,!1,s,a)}function An(r,e,t,s,a,p){if(!e)throw Error("Invalid event type");var E=Oe(a)?!!a.capture:!!a,x=cr(r);if(x||(r[Yn]=x=new Dr(r)),(t=x.add(e,t,s,E,p)).proxy)return t;if(s=function Yr(){const e=Xr;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)$t||(a=E),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(si(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ii(r,e,t,s,a){if(Array.isArray(e)){for(var p=0;p<e.length;p++)ii(r,e[p],t,s,a);return null}return t=$n(t),r&&r[_r]?r.P(e,t,Oe(s)?!!s.capture:!!s,a):An(r,e,t,!0,s,a)}function wn(r,e,t,s,a){if(Array.isArray(e))for(var p=0;p<e.length;p++)wn(r,e[p],t,s,a);else s=Oe(s)?!!s.capture:!!s,t=$n(t),r&&r[_r]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ri(p=r.g[e],t,s,a))&&(Er(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete r.g[e],r.h--))):r&&(r=cr(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ri(e,t,s,a)),(t=-1<r?e[r]:null)&&Qr(t))}function Qr(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[_r])jn(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(si(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=cr(e))?(jn(t,r),0==t.h&&(t.src=null,e[Yn]=null)):Er(r)}}}function si(r){return r in er?er[r]:er[r]="on"+r}function Xr(r,e){if(r.fa)r=!0;else{e=new gr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Qr(r),r=t.call(s,e)}return r}function cr(r){return(r=r[Yn])instanceof Dr?r:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function $n(r){return"function"==typeof r?r:(r[Kr]||(r[Kr]=function(e){return r.handleEvent(e)}),r[Kr])}function Nr(){Ze.call(this),this.i=new Dr(this),this.S=this,this.J=null}function an(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Y(e,r);else if(e instanceof Y)e.target=e.target||r;else{var a=e;yi(e=new Y(s,r),a)}if(a=!0,t)for(var p=t.length-1;0<=p;p--){var E=e.g=t[p];a=Jr(E,s,!0,e)&&a}if(a=Jr(E=e.g=r,s,!0,e)&&a,a=Jr(E,s,!1,e)&&a,t)for(p=0;p<t.length;p++)a=Jr(E=e.g=t[p],s,!1,e)&&a}function Jr(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,p=0;p<e.length;++p){var E=e[p];if(E&&!E.fa&&E.capture==t){var x=E.listener,W=E.la||E.src;E.ia&&jn(r.i,E),a=!1!==x.call(W,s)&&a}}return a&&!s.defaultPrevented}It(Nr,Ze),Nr.prototype[_r]=!0,Nr.prototype.removeEventListener=function(r,e,t,s){wn(this,r,e,t,s)},Nr.prototype.N=function(){if(Nr.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Er(t[s]);delete r.g[e],r.h--}}this.J=null},Nr.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Nr.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var Di=he.JSON.stringify;function Yi(){var r=oe;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Pi=new class Mi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Vi,r=>r.reset());class Vi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ne(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function Re(r){he.setTimeout(()=>{throw r},0)}let ce,ye=!1,oe=new class ss{constructor(){this.h=this.g=null}add(e,t){const s=Pi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Be=()=>{const r=he.Promise.resolve(void 0);ce=()=>{r.then(be)}};var be=()=>{for(var r;r=Yi();){try{r.h.call(r.g)}catch(t){Re(t)}var e=Pi;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}ye=!1};function De(r,e){Nr.call(this),this.h=r||1,this.g=e||he,this.j=_t(this.qb,this),this.l=Date.now()}function ve(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function We(r,e,t){if("function"==typeof r)t&&(r=_t(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=_t(r.handleEvent,r)}return 2147483647<Number(e)?-1:he.setTimeout(r,e||0)}function it(r){r.g=We(()=>{r.g=null,r.i&&(r.i=!1,it(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}It(De,Nr),(Ie=De.prototype).ga=!1,Ie.T=null,Ie.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),an(this,"tick"),this.ga&&(ve(this),this.start()))}},Ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.N=function(){De.$.N.call(this),ve(this),delete this.g};class Pt extends Ze{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(r){Ze.call(this),this.h=r,this.g={}}It(Dn,Ze);var Tn=[];function qr(r,e,t,s){Array.isArray(t)||(t&&(Tn[0]=t.toString()),t=Tn);for(var a=0;a<t.length;a++){var p=cn(e,t[a],s||r.handleEvent,!1,r.h||r);if(!p)break;r.g[p.key]=p}}function os(r){Gr(r.g,function(e,t){this.g.hasOwnProperty(t)&&Qr(e)},r),r.g={}}function Et(){this.g=!0}function yn(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function hr(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var p=a[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var E=1;E<a.length;E++)a[E]=""}}}return Di(t)}catch{return e}}(r,t)+(s?" "+s:"")})}Dn.prototype.N=function(){Dn.$.N.call(this),os(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Et.prototype.Ea=function(){this.g=!1},Et.prototype.info=function(){};var In={},Ur=null;function kr(){return Ur=Ur||new Nr}function Ui(r){Y.call(this,In.Ta,r)}function ns(r){const e=kr();an(e,new Ui(e))}function ea(r,e){Y.call(this,In.STAT_EVENT,r),this.stat=e}function Lr(r){const e=kr();an(e,new ea(e,r))}function Ks(r,e){Y.call(this,In.Ua,r),this.size=e}function Wi(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){r()},e)}In.Ta="serverreachability",It(Ui,Y),In.STAT_EVENT="statevent",It(ea,Y),In.Ua="timingevent",It(Ks,Y);var en={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oi(){}function as(){}oi.prototype.h=null;var Je,Qi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qs(){Y.call(this,"d")}function ei(){Y.call(this,"c")}function He(){}function $e(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new Dn(this),this.P=Ht,this.V=new De(r=Ke?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}It(qs,Y),It(ei,Y),It(He,oi),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},Je=new He;var Ht=45e3,Kn={},Sr={};function tr(r,e,t){r.L=1,r.v=eo(ys(e)),r.s=t,r.S=!0,ti(r,null)}function ti(r,e){r.G=Date.now(),ws(r),r.A=ys(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),ta(t.i,"t",s),r.C=0,t=r.l.J,r.h=new St,r.g=Oa(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Pt(_t(r.Pa,r,r.g),r.O)),qr(r.U,r.g,"readystatechange",r.nb),e=r.I?Xt(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),ns(),function ot(r,e,t,s,a,p){r.info(function(){if(r.g)if(p)for(var E="",x=p.split("&"),W=0;W<x.length;W++){var J=x[W].split("=");if(1<J.length){var pe=J[0];J=J[1];var Ve=pe.split("_");E=2<=Ve.length&&"type"==Ve[1]?E+(pe+"=")+J+"&":E+(pe+"=redacted&")}}else E=null;else E=p;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+E})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Is(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Es(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=Ss(r,t),a==Sr){4==e&&(r.o=4,Lr(14),s=!1),yn(r.j,r.m,null,"[Incomplete Response]");break}if(a==Kn){r.o=4,Lr(15),yn(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}yn(r.j,r.m,a,null),Br(r,a)}Is(r)&&a!=Sr&&a!=Kn&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Lr(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ls(e),e.M=!0,Lr(11))):(yn(r.j,r.m,t,"[Invalid Chunked Response]"),Or(r),Zo(r))}function Ss(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?Sr:(t=Number(e.substring(t,s)),isNaN(t)?Kn:(s+=1)+t>e.length?Sr:(e=e.slice(s,s+t),r.C=s+t,e))}function ws(r){r.Y=Date.now()+r.P,Ti(r,r.P)}function Ti(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Wi(_t(r.lb,r),e)}function Hs(r){r.B&&(he.clearTimeout(r.B),r.B=null)}function Zo(r){0==r.l.H||r.J||ol(r.l,r)}function Or(r){Hs(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,ve(r.V),os(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function Br(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||Tt(t.i,r)))if(!r.K&&Tt(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;No(t),na(t)}Ni(t),Lr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Wi(_t(t.ib,t),6e3));if(1>=qe(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Oo(t,11)}else if((r.K||t.g==r)&&No(t),!on(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let J=a[e];if(t.V=J[0],J=J[1],2==t.H)if("c"==J[0]){t.K=J[1],t.pa=J[2];const pe=J[3];null!=pe&&(t.ra=pe,t.l.info("VER="+t.ra));const Ve=J[4];null!=Ve&&(t.Ga=Ve,t.l.info("SVER="+t.Ga));const yt=J[5];null!=yt&&"number"==typeof yt&&0<yt&&(t.L=s=1.5*yt,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const Ut=r.g;if(Ut){const hn=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hn){var p=s.i;p.g||-1==hn.indexOf("spdy")&&-1==hn.indexOf("quic")&&-1==hn.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Kt(p,p.h),p.h=null))}if(s.F){const Gn=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Gn&&(s.Da=Gn,Ii(s.I,s.F,Gn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var E=r;if((s=t).wa=ho(s,s.J?s.pa:null,s.Y),E.K){xn(s.i,E);var x=E,W=s.L;W&&x.setTimeout(W),x.B&&(Hs(x),ws(x)),s.g=E}else Nn(s);0<t.j.length&&L(t)}else"stop"!=J[0]&&"close"!=J[0]||Oo(t,7);else 3==t.H&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?Oo(t,7):Rl(t):"noop"!=J[0]&&t.h&&t.h.Aa(J),t.A=0)}ns()}catch{}}function Mr(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(we(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function As(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(we(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function vr(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(we(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,p=0;p<a;p++)e.call(void 0,s[p],t&&t[p],r)}(Ie=$e.prototype).setTimeout=function(r){this.P=r},Ie.nb=function(r){r=r.target;const e=this.M;e&&3==so(r)?e.l():this.Pa(r)},Ie.Pa=function(r){try{if(r==this.g)e:{const pe=so(this.g);var e=this.g.Ia();if(this.g.da(),!(3>pe)&&(3!=pe||Ke||this.g&&(this.h.h||this.g.ja()||pr(this.g)))){this.J||4!=pe||7==e||ns(),Hs(this);var t=this.g.da();this.ca=t;t:if(Is(this)){var s=pr(this.g);r="";var a=s.length,p=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),Zo(this);var E="";break t}this.h.i=new he.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:p&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function zt(r,e,t,s,a,p,E){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+p+" "+E})}(this.j,this.u,this.A,this.m,this.W,pe,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var x,W=this.g;if((x=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!on(x)){var J=x;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,Lr(12),Or(this),Zo(this);break e}yn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Br(this,t)}this.S?(Es(this,pe,E),Ke&&this.i&&3==pe&&(qr(this.U,this.V,"tick",this.mb),this.V.start())):(yn(this.j,this.m,E,null),Br(this,E)),4==pe&&Or(this),this.i&&!this.J&&(4==pe?ol(this.l,this):(this.i=!1,ws(this)))}else(function xa(r){const e={};r=(r.g&&2<=so(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(on(r[s]))continue;var t=Ne(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const p=e[a]||[];e[a]=p,p.push(t)}!function Pn(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<E.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),Or(this),Zo(this)}}}catch{}},Ie.mb=function(){if(this.g){var r=so(this.g),e=this.g.ja();this.C<e.length&&(Hs(this),Es(this,r,e),this.i&&4!=r&&ws(this))}},Ie.cancel=function(){this.J=!0,Or(this)},Ie.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function zn(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ns(),Lr(17)),Or(this),this.o=2,Zo(this)):Ti(this,this.Y-r)};var da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _i(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof _i){this.h=r.h,Tr(this,r.j),this.s=r.s,this.g=r.g,lr(this,r.m),this.l=r.l;var e=r.i,t=new no;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vi(this,t),this.o=r.o}else r&&(e=String(r).match(da))?(this.h=!1,Tr(this,e[1]||"",!0),this.s=Bi(e[2]||""),this.g=Bi(e[3]||"",!0),lr(this,e[4]),this.l=Bi(e[5]||"",!0),vi(this,e[6]||"",!0),this.o=Bi(e[7]||"")):(this.h=!1,this.i=new no(null,this.h))}function ys(r){return new _i(r)}function Tr(r,e,t){r.j=t?Bi(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function lr(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function vi(r,e,t){e instanceof no?(r.i=e,function zs(r,e){e&&!r.j&&(ro(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(ha(this,s),ta(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=xs(e,vo)),r.i=new no(e,r.h))}function Ii(r,e,t){r.i.set(e,t)}function eo(r){return Ii(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Bi(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function xs(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,$a),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function $a(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}_i.prototype.toString=function(){var r=[],e=this.j;e&&r.push(xs(e,Yo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(xs(e,Yo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(xs(t,"/"==t.charAt(0)?to:Pa,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",xs(t,xo)),r.join("")};var Yo=/[#\/\?@]/g,Pa=/[#\?:]/g,to=/[#\?]/g,vo=/[#\?@]/g,xo=/#/g;function no(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function ro(r){r.g||(r.g=new Map,r.h=0,r.i&&function bs(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var p=r[t].substring(0,s);a=r[t].substring(s+1)}else p=r[t];e(p,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ha(r,e){ro(r),e=Eo(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function io(r,e){return ro(r),e=Eo(r,e),r.g.has(e)}function ta(r,e,t){ha(r,e),0<t.length&&(r.i=null,r.g.set(Eo(r,e),Lt(t)),r.h+=t.length)}function Eo(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function re(r){this.l=r||Te,r=he.PerformanceNavigationTiming?0<(r=he.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(he.g&&he.g.Ka&&he.g.Ka()&&he.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=no.prototype).add=function(r,e){ro(this),this.i=null,r=Eo(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Ie.forEach=function(r,e){ro(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},Ie.ta=function(){ro(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let p=0;p<a.length;p++)t.push(e[s])}return t},Ie.Z=function(r){ro(this);let e=[];if("string"==typeof r)io(this,r)&&(e=e.concat(this.g.get(Eo(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Ie.set=function(r,e){return ro(this),this.i=null,io(this,r=Eo(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Ie.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const p=encodeURIComponent(String(s)),E=this.Z(s);for(s=0;s<E.length;s++){var a=p;""!==E[s]&&(a+="="+encodeURIComponent(String(E[s]))),r.push(a)}}return this.i=r.join("&")};var Te=10;function Fe(r){return!!r.h||!!r.g&&r.g.size>=r.j}function qe(r){return r.h?1:r.g?r.g.size:0}function Tt(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Kt(r,e){r.g?r.g.add(e):r.h=e}function xn(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function dn(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Lt(r.i)}re.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}};var or=class{stringify(r){return he.JSON.stringify(r,void 0)}parse(r){return he.JSON.parse(r,void 0)}};function Pr(){this.g=new or}function Gi(r,e,t){const s=t||"";try{Mr(r,function(a,p){let E=a;Oe(a)&&(E=Di(a)),e.push(s+p+"="+encodeURIComponent(E))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function xi(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function bi(r){this.l=r.fc||null,this.j=r.ob||!1}function Vr(r,e){Nr.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=gi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(bi,oi),bi.prototype.g=function(){return new Vr(this.l,this.j)},bi.prototype.i=function(r){return function(){return r}}({}),It(Vr,Nr);var gi=0;function ks(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function hi(r){r.readyState=4,r.l=null,r.j=null,r.A=null,ki(r)}function ki(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Ie=Vr.prototype).open=function(r,e){if(this.readyState!=gi)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,ki(this)},Ie.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||he).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hi(this)),this.readyState=gi},Ie.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof he.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ks(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Ie.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?hi(this):ki(this),3==this.readyState&&ks(this)}},Ie.Za=function(r){this.g&&(this.response=this.responseText=r,hi(this))},Ie.Ya=function(r){this.g&&(this.response=r,hi(this))},Ie.ka=function(){this.g&&hi(this)},Ie.setRequestHeader=function(r,e){this.v.append(r,e)},Ie.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var li=he.JSON.parse;function xr(r){Nr.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jr,this.L=this.M=!1}It(xr,Nr);var jr="",Ls=/^https?$/i,hs=["POST","PUT"];function wo(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Io(r),Cs(r)}function Io(r){r.F||(r.F=!0,an(r,"complete"),an(r,"error"))}function Do(r){if(r.h&&typeof Qe<"u"&&(!r.C[1]||4!=so(r)||2!=r.da()))if(r.v&&4==so(r))We(r.La,0,r);else if(an(r,"readystatechange"),4==so(r)){r.h=!1;try{const E=r.da();e:switch(E){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===E){var a=String(r.I).match(da)[1]||null;!a&&he.self&&he.self.location&&(a=he.self.location.protocol.slice(0,-1)),s=!Ls.test(a?a.toLowerCase():"")}t=s}if(t)an(r,"complete"),an(r,"success");else{r.m=6;try{var p=2<so(r)?r.g.statusText:""}catch{p=""}r.j=p+" ["+r.da()+"]",Io(r)}}finally{Cs(r)}}}function Cs(r,e){if(r.g){fr(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||an(r,"ready");try{t.onreadystatechange=s}catch{}}}function fr(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(he.clearTimeout(r.A),r.A=null)}function so(r){return r.g?r.g.readyState:0}function pr(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case jr:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(r){let e="";return Gr(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Na(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ji(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):Ii(r,e,t))}function Ha(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function sl(r){this.Ga=0,this.j=[],this.l=new Et,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ha("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ha("baseRetryDelayMs",5e3,r),this.hb=Ha("retryDelaySeedMs",1e4,r),this.eb=Ha("forwardChannelMaxRetries",2,r),this.xa=Ha("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new re(r&&r.concurrentRequestLimit),this.Ja=new Pr,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Rl(r){if(Ml(r),3==r.H){var e=r.W++,t=ys(r.I);if(Ii(t,"SID",r.K),Ii(t,"RID",e),Ii(t,"TYPE","terminate"),le(r,t),(e=new $e(r,r.l,e)).L=2,e.v=eo(ys(t)),t=!1,he.navigator&&he.navigator.sendBeacon)try{t=he.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&he.Image&&((new Image).src=e.v,t=!0),t||(e.g=Oa(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ws(e)}Fs(r)}function na(r){r.g&&(ls(r),r.g.cancel(),r.g=null)}function Ml(r){na(r),r.u&&(he.clearTimeout(r.u),r.u=null),No(r),r.i.cancel(),r.m&&("number"==typeof r.m&&he.clearTimeout(r.m),r.m=null)}function L(r){if(!Fe(r.i)&&!r.m){r.m=!0;var e=r.Na;ce||Be(),ye||(ce(),ye=!0),oe.add(e,r),r.C=0}}function B(r,e){var t;t=e?e.m:r.W++;const s=ys(r.I);Ii(s,"SID",r.K),Ii(s,"RID",t),Ii(s,"AID",r.V),le(r,s),r.o&&r.s&&Na(s,r.o,r.s),t=new $e(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=st(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Kt(r.i,t),tr(t,s,e)}function le(r,e){r.na&&Gr(r.na,function(t,s){Ii(e,s,t)}),r.h&&Mr({},function(t,s){Ii(e,s,t)})}function st(r,e,t){t=Math.min(r.j.length,t);var s=r.h?_t(r.h.Va,r.h,r):null;e:{var a=r.j;let p=-1;for(;;){const E=["count="+t];-1==p?0<t?(p=a[0].g,E.push("ofs="+p)):p=0:E.push("ofs="+p);let x=!0;for(let W=0;W<t;W++){let J=a[W].g;const pe=a[W].map;if(J-=p,0>J)p=Math.max(0,a[W].g-100),x=!1;else try{Gi(pe,E,"req"+J+"_")}catch{s&&s(pe)}}if(x){s=E.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function Nn(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;ce||Be(),ye||(ce(),ye=!0),oe.add(e,r),r.A=0}}function Ni(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Wi(_t(r.Ma,r),To(r,r.A)),r.A++,0))}function ls(r){null!=r.B&&(he.clearTimeout(r.B),r.B=null)}function Qo(r){r.g=new $e(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=ys(r.wa);Ii(e,"RID","rpc"),Ii(e,"SID",r.K),Ii(e,"AID",r.V),Ii(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&Ii(e,"TO",r.qa),Ii(e,"TYPE","xmlhttp"),le(r,e),r.o&&r.s&&Na(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=eo(ys(e)),t.s=null,t.S=!0,ti(t,r)}function No(r){null!=r.v&&(he.clearTimeout(r.v),r.v=null)}function ol(r,e){var t=null;if(r.g==e){No(r),ls(r),r.g=null;var s=2}else{if(!Tt(r.i,e))return;t=e.F,xn(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;an(s=kr(),new Ks(s,t)),L(r)}else Nn(r);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function H(r,e){return!(qe(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Wi(_t(r.Na,r,e),To(r,r.C)),r.C++,0)))}(r,e)||2==s&&Ni(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:Oo(r,5);break;case 4:Oo(r,10);break;case 3:Oo(r,6);break;default:Oo(r,2)}}function To(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function Oo(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=_t(r.pb,r);t||(t=new _i("//www.google.com/images/cleardot.gif"),he.location&&"http"==he.location.protocol||Tr(t,"https"),eo(t)),function Rs(r,e){const t=new Et;if(he.Image){const s=new Image;s.onload=At(xi,t,s,"TestLoadImage: loaded",!0,e),s.onerror=At(xi,t,s,"TestLoadImage: error",!1,e),s.onabort=At(xi,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=At(xi,t,s,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Lr(2);r.H=0,r.h&&r.h.za(e),Fs(r),Ml(r)}function Fs(r){if(r.H=0,r.ma=[],r.h){const e=dn(r.i);(0!=e.length||0!=r.j.length)&&(gt(r.ma,e),gt(r.ma,r.j),r.i.i.length=0,Lt(r.j),r.j.length=0),r.h.ya()}}function ho(r,e,t){var s=t instanceof _i?ys(t):new _i(t);if(""!=s.g)e&&(s.g=e+"."+s.g),lr(s,s.m);else{var a=he.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var p=new _i(null);s&&Tr(p,s),e&&(p.g=e),a&&lr(p,a),t&&(p.l=t),s=p}return e=r.Da,(t=r.F)&&e&&Ii(s,t,e),Ii(s,"VER",r.ra),le(r,s),s}function Oa(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&r.Ha&&!r.va?new bi({ob:!0}):r.va)).Oa(r.J),e}function So(){}function ko(){if(Vn&&!(10<=Number(On)))throw Error("Environmental error: no available transport.")}function Zs(r,e){Nr.call(this),this.g=new sl(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!on(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!on(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Pl(this)}function bo(r){qs.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function ou(){ei.call(this),this.status=1}function Pl(r){this.g=r}function Lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fa(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var p=r.g[3],E=(e=r.g[0])+(p^(t=r.g[1])&((a=r.g[2])^p))+s[0]+3614090360&4294967295;E=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=(t=(a=(p=(e=t+(E<<7&4294967295|E>>>25))+((E=p+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=a+(t^p&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^a&(p^e))+s[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(a^p))+s[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=p+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=a+(t^p&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^a&(p^e))+s[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(a^p))+s[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=p+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=a+(t^p&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^a&(p^e))+s[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(a^p))+s[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=p+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=a+(t^p&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^a&(p^e))+s[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(a^p&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=a+(e^t&(p^e))+s[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(a^p))+s[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(a^p&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=a+(e^t&(p^e))+s[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(a^p))+s[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(a^p&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=a+(e^t&(p^e))+s[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(a^p))+s[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(a^p&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=a+(e^t&(p^e))+s[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(a^p))+s[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^a^p)+s[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=a+(p^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(a^p^e)+s[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^a^p)+s[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=a+(p^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(a^p^e)+s[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^a^p)+s[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=a+(p^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(a^p^e)+s[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^a^p)+s[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=a+(p^e^t)+s[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(a^p^e)+s[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(a^(t|~p))+s[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=a+(e^(p|~t))+s[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(a^(t|~p))+s[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=a+(e^(p|~t))+s[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(a^(t|~p))+s[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=a+(e^(p|~t))+s[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((p=(e=t+((E=e+(a^(t|~p))+s[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((a=p+((E=a+(e^(p|~t))+s[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(E<<21&4294967295|E>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+p&4294967295}function Ki(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var p=0|r[a];s&&p==e||(t[a]=p,s=!1)}this.g=t}(Ie=xr.prototype).Oa=function(r){this.M=r},Ie.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Je.g(),this.C=function ai(r){return r.h||(r.h=r.i())}(this.u?this.u:Je),this.g.onreadystatechange=_t(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(p){return void wo(this,p)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const p of s.keys())t.set(p,s.get(p))}s=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),a=he.FormData&&r instanceof he.FormData,!(0<=at(hs,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,E]of t)this.g.setRequestHeader(p,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fr(this),0<this.B&&((this.L=function rs(r){return Vn&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.ua,this)):this.A=We(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(p){wo(this,p)}},Ie.ua=function(){typeof Qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))},Ie.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,an(this,"complete"),an(this,"abort"),Cs(this))},Ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cs(this,!0)),xr.$.N.call(this)},Ie.La=function(){this.s||(this.G||this.v||this.l?Do(this):this.kb())},Ie.kb=function(){Do(this)},Ie.isActive=function(){return!!this.g},Ie.da=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},Ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),li(e)}},Ie.Ia=function(){return this.m},Ie.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=sl.prototype).ra=8,Ie.H=1,Ie.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new $e(this,this.l,r);let p=this.s;if(this.U&&(p?(p=Xt(p),yi(p,this.U)):p=this.U),null!==this.o||this.O||(a.I=p,p=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=st(this,a,e),Ii(t=ys(this.I),"RID",r),Ii(t,"CVER",22),this.F&&Ii(t,"X-HTTP-Session-Id",this.F),le(this,t),p&&(this.O?e="headers="+encodeURIComponent(String(ji(p)))+"&"+e:this.o&&Na(t,this.o,p)),Kt(this.i,a),this.bb&&Ii(t,"TYPE","init"),this.P?(Ii(t,"$req",e),Ii(t,"SID","null"),a.aa=!0,tr(a,t,null)):tr(a,t,e),this.H=2}}else 3==this.H&&(r?B(this,r):0==this.j.length||Fe(this.i)||B(this))},Ie.Ma=function(){if(this.u=null,Qo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Wi(_t(this.jb,this),r)}},Ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Lr(10),na(this),Qo(this))},Ie.ib=function(){null!=this.v&&(this.v=null,na(this),Ni(this),Lr(19))},Ie.pb=function(r){r?(this.l.info("Successfully pinged google.com"),Lr(2)):(this.l.info("Failed to ping google.com"),Lr(1))},Ie.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ie=So.prototype).Ba=function(){},Ie.Aa=function(){},Ie.za=function(){},Ie.ya=function(){},Ie.isActive=function(){return!0},Ie.Va=function(){},ko.prototype.g=function(r,e){return new Zs(r,e)},It(Zs,Nr),Zs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;Lr(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=ho(r,null,r.Y),L(r)},Zs.prototype.close=function(){Rl(this.g)},Zs.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Di(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&L(e)},Zs.prototype.N=function(){this.g.h=null,delete this.j,Rl(this.g),delete this.g,Zs.$.N.call(this)},It(bo,qs),It(ou,ei),It(Pl,So),Pl.prototype.Ba=function(){an(this.g,"a")},Pl.prototype.Aa=function(r){an(this.g,new bo(r))},Pl.prototype.za=function(r){an(this.g,new ou)},Pl.prototype.ya=function(){an(this.g,"b")},It(Lo,function Vs(){this.blockSize=-1}),Lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lo.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,p=0;p<e;){if(0==a)for(;p<=t;)fa(this,r,p),p+=this.blockSize;if("string"==typeof r){for(;p<e;)if(s[a++]=r.charCodeAt(p++),a==this.blockSize){fa(this,s),a=0;break}}else for(;p<e;)if(s[a++]=r[p++],a==this.blockSize){fa(this,s),a=0;break}}this.h=a,this.i+=e},Lo.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var au={};function xl(r){return-128<=r&&128>r?function Wr(r,e){var t=au;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new Ki([0|e],0>e?-1:0)}):new Ki([0|r],0>r?-1:0)}function is(r){if(isNaN(r)||!isFinite(r))return pa;if(0>r)return fi(is(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=Fo;return new Ki(e,0)}var Fo=4294967296,pa=xl(0),za=xl(1),Ol=xl(16777216);function fo(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function oo(r){return-1==r.h}function fi(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Ki(t,~r.h).add(za)}function Vo(r,e){return r.add(fi(e))}function fs(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function ga(r,e){this.g=r,this.h=e}function Wa(r,e){if(fo(e))throw Error("division by zero");if(fo(r))return new ga(pa,pa);if(oo(r))return e=Wa(fi(r),e),new ga(fi(e.g),fi(e.h));if(oo(e))return e=Wa(r,fi(e)),new ga(fi(e.g),e.h);if(30<r.g.length){if(oo(r)||oo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=za,s=e;0>=s.X(r);)t=lu(t),s=lu(s);var a=al(t,1),p=al(s,1);for(s=al(s,2),t=al(t,2);!fo(s);){var E=p.add(s);0>=E.X(r)&&(a=a.add(t),p=E),s=al(s,1),t=al(t,1)}return e=Vo(r,a.R(e)),new ga(a,e)}for(a=pa;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),E=(p=is(t)).R(e);oo(E)||0<E.X(r);)E=(p=is(t-=s)).R(e);fo(p)&&(p=za),a=a.add(p),r=Vo(r,E)}return new ga(a,r)}function lu(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Ki(t,r.h)}function al(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],p=0;p<s;p++)a[p]=0<e?r.D(p+t)>>>e|r.D(p+t+1)<<32-e:r.D(p+t);return new Ki(a,r.h)}(Ie=Ki.prototype).ea=function(){if(oo(this))return-fi(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:Fo+s)*e,e*=Fo}return r},Ie.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(fo(this))return"0";if(oo(this))return"-"+fi(this).toString(r);for(var e=is(Math.pow(r,6)),t=this,s="";;){var a=Wa(t,e).g,p=((0<(t=Vo(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(fo(t=a))return p+s;for(;6>p.length;)p="0"+p;s=p+s}},Ie.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Ie.X=function(r){return oo(r=Vo(this,r))?-1:fo(r)?0:1},Ie.abs=function(){return oo(this)?fi(this):this},Ie.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var p=s+(65535&this.D(a))+(65535&r.D(a)),E=(p>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=E>>>16,t[a]=(E&=65535)<<16|(p&=65535)}return new Ki(t,-2147483648&t[t.length-1]?-1:0)},Ie.R=function(r){if(fo(this)||fo(r))return pa;if(oo(this))return oo(r)?fi(this).R(fi(r)):fi(fi(this).R(r));if(oo(r))return fi(this.R(fi(r)));if(0>this.X(Ol)&&0>r.X(Ol))return is(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var p=this.D(s)>>>16,E=65535&this.D(s),x=r.D(a)>>>16,W=65535&r.D(a);t[2*s+2*a]+=E*W,fs(t,2*s+2*a),t[2*s+2*a+1]+=p*W,fs(t,2*s+2*a+1),t[2*s+2*a+1]+=E*x,fs(t,2*s+2*a+1),t[2*s+2*a+2]+=p*x,fs(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Ki(t,0)},Ie.gb=function(r){return Wa(this,r).h},Ie.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Ki(t,this.h&r.h)},Ie.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Ki(t,this.h|r.h)},Ie.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Ki(t,this.h^r.h)},ko.prototype.createWebChannel=ko.prototype.g,Zs.prototype.send=Zs.prototype.u,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,mr.COMPLETE="complete",as.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",Nr.prototype.listen=Nr.prototype.O,xr.prototype.listenOnce=xr.prototype.P,xr.prototype.getLastError=xr.prototype.Sa,xr.prototype.getLastErrorCode=xr.prototype.Ia,xr.prototype.getStatus=xr.prototype.da,xr.prototype.getResponseJson=xr.prototype.Wa,xr.prototype.getResponseText=xr.prototype.ja,xr.prototype.send=xr.prototype.ha,xr.prototype.setWithCredentials=xr.prototype.Oa,Lo.prototype.digest=Lo.prototype.l,Lo.prototype.reset=Lo.prototype.reset,Lo.prototype.update=Lo.prototype.j,Ki.prototype.add=Ki.prototype.add,Ki.prototype.multiply=Ki.prototype.R,Ki.prototype.modulo=Ki.prototype.gb,Ki.prototype.compare=Ki.prototype.X,Ki.prototype.toNumber=Ki.prototype.ea,Ki.prototype.toString=Ki.prototype.toString,Ki.prototype.getBits=Ki.prototype.D,Ki.fromNumber=is,Ki.fromString=function Nl(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return fi(Nl(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=is(Math.pow(e,8)),s=pa,a=0;a<r.length;a+=8){var p=Math.min(8,r.length-a),E=parseInt(r.substring(a,a+p),e);8>p?(p=is(Math.pow(e,p)),s=s.R(p).add(is(E))):s=(s=s.R(t)).add(is(E))}return s};var ql=Ge.createWebChannelTransport=function(){return new ko},uc=Ge.getStatEventTarget=function(){return kr()},ka=Ge.ErrorCode=en,Ga=Ge.EventType=mr,uu=Ge.Event=In,k=Ge.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Z=Ge.FetchXmlHttpFactory=bi,$=Ge.WebChannel=as,ae=Ge.XhrIo=xr,Me=Ge.Md5=Lo,wt=Ge.Integer=Ki;const Ft="@firebase/firestore";class sn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let Si="9.23.0";const yr=new Le.Yd("@firebase/firestore");function ui(){return yr.logLevel}function kn(r){yr.setLogLevel(r)}function Vt(r,...e){if(yr.logLevel<=Le.in.DEBUG){const t=e.map(Uo);yr.debug(`Firestore (${Si}): ${r}`,...t)}}function ir(r,...e){if(yr.logLevel<=Le.in.ERROR){const t=e.map(Uo);yr.error(`Firestore (${Si}): ${r}`,...t)}}function $i(r,...e){if(yr.logLevel<=Le.in.WARN){const t=e.map(Uo);yr.warn(`Firestore (${Si}): ${r}`,...t)}}function Uo(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function pn(r="Unexpected state"){const e=`FIRESTORE (${Si}) INTERNAL ASSERTION FAILED: `+r;throw ir(e),new Error(e)}function Ln(r,e){r||pn()}function Ws(r,e){r||pn()}function rn(r,e){return r}const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends Se.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Us{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sn.UNAUTHENTICATED))}shutdown(){}}class Gu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cu{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const p=J=>this.i!==a?(a=this.i,t(J)):Promise.resolve();let E=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new Us,e.enqueueRetryable(()=>p(this.currentUser))};const x=()=>{const J=E;e.enqueueRetryable((0,_.Z)(function*(){yield J.promise,yield p(s.currentUser)}))},W=J=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(J=>W(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?W(J):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new Us)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ln("string"==typeof s.accessToken),new bu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ln(null===e||"string"==typeof e),new sn(e)}}class cc{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ma{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new cc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class du{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=p=>{null!=p.error&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const E=p.token!==this.T;return this.T=p.token,Vt("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>s(p))};const a=p=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.I.onInit(p=>a(p)),setTimeout(()=>{if(!this.appCheck){const p=this.I.getImmediate({optional:!0});p?a(p):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ln("string"==typeof t.token),this.T=t.token,new du(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pu(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Bs{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Pu(40);for(let p=0;p<a.length;++p)s.length<20&&a[p]<t&&(s+=e.charAt(a[p]%e.length))}return s}}function Wn(r,e){return r<e?-1:r>e?1:0}function ul(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function Zl(r){return r+"\0"}class ps{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ps.fromMillis(Date.now())}static fromDate(e){return ps.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ps(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wn(this.nanoseconds,e.nanoseconds):Wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ar{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ar(e)}static min(){return new ar(new ps(0,0))}static max(){return new ar(new ps(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ka{constructor(e,t,s){void 0===t?t=0:t>e.length&&pn(),void 0===s?s=e.length-t:s>e.length-t&&pn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ka.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const p=e.get(a),E=t.get(a);if(p<E)return-1;if(p>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wr extends Ka{construct(e,t,s){return new wr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Bt(pt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new wr(t)}static emptyPath(){return new wr([])}}const Ku=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends Ka{construct(e,t,s){return new zr(e,t,s)}static isValidIdentifier(e){return Ku.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const p=()=>{if(0===s.length)throw new Bt(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;a<e.length;){const x=e[a];if("\\"===x){if(a+1===e.length)throw new Bt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const W=e[a+1];if("\\"!==W&&"."!==W&&"`"!==W)throw new Bt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=W,a+=2}else"`"===x?(E=!E,a++):"."!==x||E?(s+=x,a++):(p(),a++)}if(p(),E)throw new Bt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(t)}static emptyPath(){return new zr([])}}class _n{constructor(e){this.path=e}static fromPath(e){return new _n(wr.fromString(e))}static fromName(e){return new _n(wr.fromString(e).popFirst(5))}static empty(){return new _n(wr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _n(new wr(e.slice()))}}class La{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Ys(r){return r.fields.find(e=>2===e.kind)}function Bo(r){return r.fields.filter(e=>2!==e.kind)}La.UNKNOWN_ID=-1;class hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class ra{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ra(0,po.min())}}function ia(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=ar.fromTimestamp(1e9===s?new ps(t+1,0):new ps(t,s));return new po(a,_n.empty(),e)}function ya(r){return new po(r.readTime,r.key,-1)}class po{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new po(ar.min(),_n.empty(),-1)}static max(){return new po(ar.max(),_n.empty(),-1)}}function dl(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=_n.comparator(r.documentKey,e.documentKey),0!==t?t:Wn(r.largestBatchId,e.largestBatchId))}const hl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ms(r){return qa.apply(this,arguments)}function qa(){return qa=(0,_.Z)(function*(r){if(r.code!==pt.FAILED_PRECONDITION||r.message!==hl)throw r;Vt("LocalStore","Unexpectedly lost primary lease")}),qa.apply(this,arguments)}class ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ft((s,a)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(s,a)},this.catchCallback=p=>{this.wrapFailure(t,p).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ft?t:ft.resolve(t)}catch(t){return ft.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ft.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ft.reject(t)}static resolve(e){return new ft((t,s)=>{t(e)})}static reject(e){return new ft((t,s)=>{s(e)})}static waitFor(e){return new ft((t,s)=>{let a=0,p=0,E=!1;e.forEach(x=>{++a,x.next(()=>{++p,E&&p===a&&t()},W=>s(W))}),E=!0,p===a&&t()})}static or(e){let t=ft.resolve(!1);for(const s of e)t=t.next(a=>a?ft.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,p)=>{s.push(t.call(this,a,p))}),this.waitFor(s)}static mapArray(e,t){return new ft((s,a)=>{const p=e.length,E=new Array(p);let x=0;for(let W=0;W<p;W++){const J=W;t(e[J]).next(pe=>{E[J]=pe,++x,x===p&&s(E)},pe=>a(pe))}})}static doWhile(e,t){return new ft((s,a)=>{const p=()=>{!0===e()?t().next(()=>{p()},a):s()};p()})}}class Du{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Us,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new xu(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=dc(s.target.error);this.v.reject(new xu(e,a))}}static open(e,t,s,a){try{return new Du(t,e.transaction(a,s))}catch(p){throw new xu(t,p)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Vt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Za(t)}}class ci{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===ci.S((0,Se.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vt("SimpleDb","Removing database:",e),Xo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Se.hl)())return!1;if(ci.C())return!0;const e=(0,Se.z$)(),t=ci.S(e),s=0<t&&t<10,a=ci.N(e),p=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,_.Z)(function*(){return t.db||(Vt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=E=>{s(E.target.result)},p.onblocked=()=>{a(new xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=E=>{const x=E.target.error;a("VersionError"===x.name?new Bt(pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new Bt(pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new xu(e,x))},p.onupgradeneeded=E=>{Vt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.O(E.target.result,p.transaction,E.oldVersion,t.version).next(()=>{Vt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var p=this;return(0,_.Z)(function*(){const E="readonly"===t;let x=0;for(;;){++x;try{p.db=yield p.$(e);const W=Du.open(p.db,e,E?"readonly":"readwrite",s),J=a(W).next(pe=>(W.P(),pe)).catch(pe=>(W.abort(pe),ft.reject(pe))).toPromise();return J.catch(()=>{}),yield W.R,J}catch(W){const J=W,pe="FirebaseError"!==J.name&&x<3;if(Vt("SimpleDb","Transaction failed with error:",J.message,"Retrying:",pe),p.close(),!pe)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fu{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Xo(this.L.delete())}}class xu extends Bt{constructor(e,t){super(pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ll(r){return"IndexedDbTransactionError"===r.name}class Za{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Vt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Vt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Xo(s)}add(e){return Vt("SimpleDb","ADD",this.store.name,e,e),Xo(this.store.add(e))}get(e){return Xo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Vt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Vt("SimpleDb","DELETE",this.store.name,e),Xo(this.store.delete(e))}count(){return Vt("SimpleDb","COUNT",this.store.name),Xo(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),p=[];return this.W(a,(E,x)=>{p.push(x)}).next(()=>p)}{const a=this.store.getAll(s.range);return new ft((p,E)=>{a.onerror=x=>{E(x.target.error)},a.onsuccess=x=>{p(x.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new ft((a,p)=>{s.onerror=E=>{p(E.target.error)},s.onsuccess=E=>{a(E.target.result)}})}J(e,t){Vt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(p,E,x)=>x.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new ft((s,a)=>{t.onerror=p=>{const E=dc(p.target.error);a(E)},t.onsuccess=p=>{const E=p.target.result;E?e(E.primaryKey,E.value).next(x=>{x?E.continue():s()}):s()}})}W(e,t){const s=[];return new ft((a,p)=>{e.onerror=E=>{p(E.target.error)},e.onsuccess=E=>{const x=E.target.result;if(!x)return void a();const W=new fu(x),J=t(x.primaryKey,x.value,W);if(J instanceof ft){const pe=J.catch(Ve=>(W.done(),ft.reject(Ve)));s.push(pe)}W.isDone?a():null===W.K?x.continue():x.continue(W.K)}}).next(()=>ft.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xo(r){return new ft((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=dc(s.target.error);t(a)}})}let Uc=!1;function dc(r){const e=ci.S((0,Se.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new Bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Uc||(Uc=!0,setTimeout(()=>{throw s},0)),s}}return r}class Ql{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Vt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.Z)(function*(){t.task=null;try{Vt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Ll(s)?Vt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Ms(s)}yield t.et(6e4)}))}}class qu{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,_.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,p=!0;return ft.doWhile(()=>!0===p&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return Vt("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,a).next(x=>{a-=x,s.add(E)});p=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(p=>{const E=p.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(a,p)).next(x=>(Vt("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>E.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,p)=>{const E=ya(p);dl(E,s)>0&&(s=E)}),new po(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ao=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Ns(r){return null==r}function Ya(r){return 0===r&&1/r==-1/0}function fl(r){return"number"==typeof r&&Number.isInteger(r)&&!Ya(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ds(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_a(e)),e=Ro(r.get(t),e);return _a(e)}function Ro(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const p=r.charAt(a);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function _a(r){return r+"\x01\x01"}function js(r){const e=r.length;if(Ln(e>=2),2===e)return Ln("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),wr.emptyPath();const t=e-2,s=[];let a="";for(let p=0;p<e;){const E=r.indexOf("\x01",p);switch((E<0||E>t)&&pn(),r.charAt(E+1)){case"\x01":const x=r.substring(p,E);let W;0===a.length?W=x:(a+=x,W=a,a=""),s.push(W);break;case"\x10":a+=r.substring(p,E),a+="\0";break;case"\x11":a+=r.substring(p,E+1);break;default:pn()}p=E+2}return new wr(s)}const va=["userId","batchId"];function D(r,e){return[r,Ds(e)]}function R(r,e,t){return[r,Ds(e),t]}const b={},O=["prefixPath","collectionGroup","readTime","documentId"],G=["prefixPath","collectionGroup","documentId"],se=["collectionGroup","readTime","prefixPath","documentId"],ge=["canonicalId","targetId"],et=["targetId","path"],Nt=["path","targetId"],Rn=["collectionId","parent"],Sn=["indexId","uid"],Li=["uid","sequenceNumber"],us=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jo=["indexId","uid","orderedDocumentKey"],Ea=["userId","collectionPath","documentId"],ao=["userId","collectionPath","largestBatchId"],Xi=["userId","collectionGroup","largestBatchId"],wa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pl=[...wa,"documentOverlays"],Fa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zu=Fa,gl=[...Zu,"indexConfiguration","indexState","indexEntries"];class Qa extends Yl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Qs(r,e){const t=rn(r);return ci.M(t.ht,e)}function Jo(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function hc(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class gs{constructor(e,t){this.comparator=e,this.root=t||$s.EMPTY}insert(e,t){return new gs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new gs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lo(this.root,e,this.comparator,!0)}}class lo{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?s(e.key,t):1,t&&a&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,t,s,a,p){this.key=e,this.value=t,this.color=s??$s.RED,this.left=a??$s.EMPTY,this.right=p??$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,p){return new $s(e??this.key,t??this.value,s??this.color,a??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const p=s(e,a.key);return a=p<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===p?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return $s.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(r,e,t,s,a){return this}insert(r,e,t){return new $s(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cs{constructor(e){this.comparator=e,this.data=new gs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yu(this.data.getIterator())}getIteratorFrom(e){return new Yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,p=s.getNext().key;if(0!==this.comparator(a,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cs(this.comparator);return t.data=e,t}}class Yu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pu(r){return r.hasNext()?r.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new $o([])}unionWith(e){let t=new cs(zr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Dc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function td(){return typeof atob<"u"}class go{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Dc("Invalid base64 string: "+a):a}}(e);return new go(t)}static fromUint8Array(e){const t=function(s){let a="";for(let p=0;p<s.length;++p)a+=String.fromCharCode(s[p]);return a}(e);return new go(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}go.EMPTY_BYTE_STRING=new go("");const fc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xl(r){if(Ln(!!r),"string"==typeof r){let e=0;const t=fc.exec(r);if(Ln(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_s(r.seconds),nanos:_s(r.nanos)}}function _s(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Ja(r){return"string"==typeof r?go.fromBase64String(r):go.fromUint8Array(r)}function Jl(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function el(r){const e=r.mapValue.fields.__previous_value__;return Jl(e)?el(e):e}function ml(r){const e=Xl(r.mapValue.fields.__local_write_time__.timestampValue);return new ps(e.seconds,e.nanos)}class gu{constructor(e,t,s,a,p,E,x,W,J){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=p,this.forceLongPolling=E,this.autoDetectLongPolling=x,this.longPollingOptions=W,this.useFetchStreams=J}}class Fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}const Ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vl={nullValue:"NULL_VALUE"};function Va(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Jl(r)?4:Ca(r)?9007199254740991:10:pn()}function yl(r,e){if(r===e)return!0;const t=Va(r);if(t!==Va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ml(r).isEqual(ml(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const p=Xl(s.timestampValue),E=Xl(a.timestampValue);return p.seconds===E.seconds&&p.nanos===E.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,Ja(r.bytesValue).isEqual(Ja(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return _s(s.geoPointValue.latitude)===_s(a.geoPointValue.latitude)&&_s(s.geoPointValue.longitude)===_s(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return _s(s.integerValue)===_s(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const p=_s(s.doubleValue),E=_s(a.doubleValue);return p===E?Ya(p)===Ya(E):isNaN(p)&&isNaN(E)}return!1}(r,e);case 9:return ul(r.arrayValue.values||[],e.arrayValue.values||[],yl);case 10:return function(s,a){const p=s.mapValue.fields||{},E=a.mapValue.fields||{};if(Jo(p)!==Jo(E))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(void 0===E[x]||!yl(p[x],E[x])))return!1;return!0}(r,e);default:return pn()}var a}function _l(r,e){return void 0!==(r.values||[]).find(t=>yl(t,e))}function sa(r,e){if(r===e)return 0;const t=Va(r),s=Va(e);if(t!==s)return Wn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wn(r.booleanValue,e.booleanValue);case 2:return function(a,p){const E=_s(a.integerValue||a.doubleValue),x=_s(p.integerValue||p.doubleValue);return E<x?-1:E>x?1:E===x?0:isNaN(E)?isNaN(x)?0:-1:1}(r,e);case 3:return pc(r.timestampValue,e.timestampValue);case 4:return pc(ml(r),ml(e));case 5:return Wn(r.stringValue,e.stringValue);case 6:return function(a,p){const E=Ja(a),x=Ja(p);return E.compareTo(x)}(r.bytesValue,e.bytesValue);case 7:return function(a,p){const E=a.split("/"),x=p.split("/");for(let W=0;W<E.length&&W<x.length;W++){const J=Wn(E[W],x[W]);if(0!==J)return J}return Wn(E.length,x.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,p){const E=Wn(_s(a.latitude),_s(p.latitude));return 0!==E?E:Wn(_s(a.longitude),_s(p.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,p){const E=a.values||[],x=p.values||[];for(let W=0;W<E.length&&W<x.length;++W){const J=sa(E[W],x[W]);if(J)return J}return Wn(E.length,x.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,p){if(a===Ia.mapValue&&p===Ia.mapValue)return 0;if(a===Ia.mapValue)return 1;if(p===Ia.mapValue)return-1;const E=a.fields||{},x=Object.keys(E),W=p.fields||{},J=Object.keys(W);x.sort(),J.sort();for(let pe=0;pe<x.length&&pe<J.length;++pe){const Ve=Wn(x[pe],J[pe]);if(0!==Ve)return Ve;const yt=sa(E[x[pe]],W[J[pe]]);if(0!==yt)return yt}return Wn(x.length,J.length)}(r.mapValue,e.mapValue);default:throw pn()}}function pc(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Wn(r,e);const t=Xl(r),s=Xl(e),a=Wn(t.seconds,s.seconds);return 0!==a?a:Wn(t.nanos,s.nanos)}function Tu(r){return vl(r)}function vl(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Xl(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Ja(r.bytesValue).toBase64():"referenceValue"in r?_n.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",p=!0;for(const E of s.values||[])p?p=!1:a+=",",a+=vl(E);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let p="{",E=!0;for(const x of a)E?E=!1:p+=",",p+=`${x}:${vl(s.fields[x])}`;return p+"}"}(r.mapValue):pn();var e}function Ul(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Nu(r){return!!r&&"integerValue"in r}function Qu(r){return!!r&&"arrayValue"in r}function Bl(r){return!!r&&"nullValue"in r}function tl(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ba(r){return!!r&&"mapValue"in r}function mu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xa(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=mu(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Ca(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ou(r){return"nullValue"in r?Vl:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ul(Fl.empty(),_n.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:pn()}function Da(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ul(Fl.empty(),_n.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Ia:pn()}function yu(r,e){const t=sa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function nl(r,e){const t=sa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ba(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=zr.emptyPath(),s={},a=[];e.forEach((E,x)=>{if(!t.isImmediateParentOf(x)){const W=this.getFieldsMap(t);this.applyChanges(W,s,a),s={},a=[],t=x.popLast()}E?s[x.lastSegment()]=mu(E):a.push(x.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,s,a)}delete(e){const t=this.field(e.popLast());ba(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ba(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Xa(t,(a,p)=>e[a]=p);for(const a of s)delete e[a]}clone(){return new ms(mu(this.value))}}function Tc(r){const e=[];return Xa(r.fields,(t,s)=>{const a=new zr([t]);if(ba(s)){const p=Tc(s.mapValue).fields;if(0===p.length)e.push(a);else for(const E of p)e.push(a.child(E))}else e.push(a)}),new $o(e)}class Ps{constructor(e,t,s,a,p,E,x){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=p,this.data=E,this.documentState=x}static newInvalidDocument(e){return new Ps(e,0,ar.min(),ar.min(),ar.min(),ms.empty(),0)}static newFoundDocument(e,t,s,a){return new Ps(e,1,t,ar.min(),s,a,0)}static newNoDocument(e,t){return new Ps(e,2,t,ar.min(),ar.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Ps(e,3,t,ar.min(),ar.min(),ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ar.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ar.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ps&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jl{constructor(e,t){this.position=e,this.inclusive=t}}function ku(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const p=e[a],E=r.position[a];if(s=p.field.isKeyField()?_n.comparator(_n.fromName(E.referenceValue),t.key):sa(E,t.data.field(p.field)),"desc"===p.dir&&(s*=-1),0!==s)break}return s}function oa(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!yl(r.position[t],e.position[t]))return!1;return!0}class M{constructor(e,t="asc"){this.field=e,this.dir=t}}function V(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class te{}class _e extends te{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ho(e,t,s):"array-contains"===t?new aa(e,s):"in"===t?new Ta(e,s):"not-in"===t?new Bc(e,s):"array-contains-any"===t?new jc(e,s):new _e(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new eu(e,s):new gc(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(sa(t,this.value)):null!==t&&Va(this.value)===Va(t)&&this.matchesComparison(sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ke extends te{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ke(e,t)}matches(e){return Xe(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Xe(r){return"and"===r.op}function Dt(r){return"or"===r.op}function mn(r){return gn(r)&&Xe(r)}function gn(r){for(const e of r.filters)if(e instanceof ke)return!1;return!0}function Xn(r){if(r instanceof _e)return r.field.canonicalString()+r.op.toString()+Tu(r.value);if(mn(r))return r.filters.map(e=>Xn(e)).join(",");{const e=r.filters.map(t=>Xn(t)).join(",");return`${r.op}(${e})`}}function $r(r,e){return r instanceof _e?(t=r,(s=e)instanceof _e&&t.op===s.op&&t.field.isEqual(s.field)&&yl(t.value,s.value)):r instanceof ke?function(t,s){return s instanceof ke&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,p,E)=>a&&$r(p,s.filters[E]),!0)}(r,e):void pn();var t,s}function Fr(r,e){const t=r.filters.concat(e);return ke.create(t,r.op)}function mo(r){return r instanceof _e?`${(e=r).field.canonicalString()} ${e.op} ${Tu(e.value)}`:r instanceof ke?function(e){return e.op.toString()+" {"+e.getFilters().map(mo).join(" ,")+"}"}(r):"Filter";var e}class Ho extends _e{constructor(e,t,s){super(e,t,s),this.key=_n.fromName(s.referenceValue)}matches(e){const t=_n.comparator(e.key,this.key);return this.matchesComparison(t)}}class eu extends _e{constructor(e,t){super(e,"in",t),this.keys=Su(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gc extends _e{constructor(e,t){super(e,"not-in",t),this.keys=Su(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Su(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>_n.fromName(s.referenceValue))}class aa extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qu(t)&&_l(t.arrayValue,this.value)}}class Ta extends _e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_l(this.value.arrayValue,t)}}class Bc extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_l(this.value.arrayValue,t)}}class jc extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>_l(this.value.arrayValue,s))}}class nd{constructor(e,t=null,s=[],a=[],p=null,E=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=p,this.startAt=E,this.endAt=x,this.dt=null}}function Xu(r,e=null,t=[],s=[],a=null,p=null,E=null){return new nd(r,e,t,s,a,p,E)}function wl(r){const e=rn(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Xn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Ns(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Tu(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Tu(s)).join(",")),e.dt=t}return e.dt}function zo(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!V(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!$r(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oa(r.startAt,e.startAt)&&oa(r.endAt,e.endAt)}function Il(r){return _n.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Mo(r,e){return r.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function mc(r,e,t){let s=Vl,a=!0;for(const p of Mo(r,e)){let E=Vl,x=!0;switch(p.op){case"<":case"<=":E=Ou(p.value);break;case"==":case"in":case">=":E=p.value;break;case">":E=p.value,x=!1;break;case"!=":case"not-in":E=Vl}yu({value:s,inclusive:a},{value:E,inclusive:x})<0&&(s=E,a=x)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];yu({value:s,inclusive:a},{value:E,inclusive:t.inclusive})<0&&(s=E,a=t.inclusive);break}return{value:s,inclusive:a}}function Sc(r,e,t){let s=Ia,a=!0;for(const p of Mo(r,e)){let E=Ia,x=!0;switch(p.op){case">=":case">":E=Da(p.value),x=!1;break;case"==":case"in":case"<=":E=p.value;break;case"<":E=p.value,x=!1;break;case"!=":case"not-in":E=Ia}nl({value:s,inclusive:a},{value:E,inclusive:x})>0&&(s=E,a=x)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];nl({value:s,inclusive:a},{value:E,inclusive:t.inclusive})>0&&(s=E,a=t.inclusive);break}return{value:s,inclusive:a}}class $l{constructor(e,t=null,s=[],a=[],p=null,E="F",x=null,W=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=p,this.limitType=E,this.startAt=x,this.endAt=W,this.wt=null,this._t=null}}function yc(r,e,t,s,a,p,E,x){return new $l(r,e,t,s,a,p,E,x)}function Hl(r){return new $l(r)}function gd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Ju(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function A(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function m(r){return null!==r.collectionGroup}function w(r){const e=rn(r);if(null===e.wt){e.wt=[];const t=A(e),s=Ju(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new M(t)),e.wt.push(new M(zr.keyField(),"asc"));else{let a=!1;for(const p of e.explicitOrderBy)e.wt.push(p),p.field.isKeyField()&&(a=!0);if(!a){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new M(zr.keyField(),p))}}}return e.wt}function P(r){const e=rn(r);if(!e._t)if("F"===e.limitType)e._t=Xu(e.path,e.collectionGroup,w(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of w(e))t.push(new M(p.field,"desc"===p.dir?"asc":"desc"));const s=e.endAt?new jl(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new jl(e.startAt.position,e.startAt.inclusive):null;e._t=Xu(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function ne(r,e){e.getFirstInequalityField(),A(r);const t=r.filters.concat([e]);return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function fe(r,e,t){return new $l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function tt(r,e){return zo(P(r),P(e))&&r.limitType===e.limitType}function Ct(r){return`${wl(P(r))}|lt:${r.limitType}`}function ln(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>mo(s)).join(", ")}]`),Ns(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Tu(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Tu(s)).join(",")),`Target(${t})`}(P(r))}; limitType=${r.limitType})`}function Mn(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):_n.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of w(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,p,E){const x=ku(a,p,E);return a.inclusive?x<=0:x<0}(t.startAt,w(t),s)||t.endAt&&!function(a,p,E){const x=ku(a,p,E);return a.inclusive?x>=0:x>0}(t.endAt,w(t),s)));var t,s}function dr(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Zr(r){return(e,t)=>{let s=!1;for(const a of w(r)){const p=Sa(a,e,t);if(0!==p)return p;s=s||a.field.isKeyField()}return 0}}function Sa(r,e,t){const s=r.field.isKeyField()?_n.comparator(e.key,t.key):function(a,p,E){const x=p.data.field(a),W=E.data.field(a);return null!==x&&null!==W?sa(x,W):pn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return pn()}}class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,p]of s)if(this.equalsFn(a,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let p=0;p<a.length;p++)if(this.equalsFn(a[p][0],e))return void(a[p]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(t,s)=>{for(const[a,p]of s)e(a,p)})}isEmpty(){return hc(this.inner)}size(){return this.innerSize}}const ec=new gs(_n.comparator);function Os(){return ec}const tu=new gs(_n.comparator);function bl(...r){let e=tu;for(const t of r)e=e.insert(t.key,t);return e}function Lu(r){let e=tu;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xs(){return Au()}function _u(){return Au()}function Au(){return new Wo(r=>r.toString(),(r,e)=>r.isEqual(e))}const _c=new gs(_n.comparator),rl=new cs(_n.comparator);function di(...r){let e=rl;for(const t of r)e=e.add(t);return e}const $c=new cs(Wn);function vc(){return $c}function Hc(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ya(e)?"-0":e}}function md(r){return{integerValue:""+r}}function zc(r,e){return fl(e)?md(e):Hc(r,e)}class yd{constructor(){this._=void 0}}function mh(r,e,t){return r instanceof vu?function(s,a){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Jl(a)&&(a=el(a)),a&&(p.fields.__previous_value__=a),{mapValue:p}}(t,e):r instanceof Ru?_d(r,e):r instanceof Fu?vd(r,e):function(s,a){const p=Wc(s,a),E=Ed(p)+Ed(s.gt);return Nu(p)&&Nu(s.gt)?md(E):Hc(s.serializer,E)}(r,e)}function rd(r,e,t){return r instanceof Ru?_d(r,e):r instanceof Fu?vd(r,e):t}function Wc(r,e){return r instanceof Mu?Nu(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class vu extends yd{}class Ru extends yd{constructor(e){super(),this.elements=e}}function _d(r,e){const t=Eu(e);for(const s of r.elements)t.some(a=>yl(a,s))||t.push(s);return{arrayValue:{values:t}}}class Fu extends yd{constructor(e){super(),this.elements=e}}function vd(r,e){let t=Eu(e);for(const s of r.elements)t=t.filter(a=>!yl(a,s));return{arrayValue:{values:t}}}class Mu extends yd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ed(r){return _s(r.integerValue||r.doubleValue)}function Eu(r){return Qu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Gc{constructor(e,t){this.field=e,this.transform=t}}class Gd{constructor(e,t){this.version=e,this.transformResults=t}}class yo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yo}static exists(e){return new yo(void 0,e)}static updateTime(e){return new yo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Rc{}function Js(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new nu(r.key,yo.none()):new zl(r.key,r.data,yo.none());{const t=r.data,s=ms.empty();let a=new cs(zr.comparator);for(let p of e.fields)if(!a.has(p)){let E=t.field(p);null===E&&p.length>1&&(p=p.popLast(),E=t.field(p)),null===E?s.delete(p):s.set(p,E),a=a.add(p)}return new Vu(r.key,s,new $o(a.toArray()),yo.none())}}function yh(r,e,t){r instanceof zl?function(s,a,p){const E=s.value.clone(),x=_h(s.fieldTransforms,a,p.transformResults);E.setAll(x),a.convertToFoundDocument(p.version,E).setHasCommittedMutations()}(r,e,t):r instanceof Vu?function(s,a,p){if(!Ac(s.precondition,a))return void a.convertToUnknownDocument(p.version);const E=_h(s.fieldTransforms,a,p.transformResults),x=a.data;x.setAll(qd(s)),x.setAll(E),a.convertToFoundDocument(p.version,x).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tc(r,e,t,s){return r instanceof zl?function(a,p,E,x){if(!Ac(a.precondition,p))return E;const W=a.value.clone(),J=vh(a.fieldTransforms,x,p);return W.setAll(J),p.convertToFoundDocument(p.version,W).setHasLocalMutations(),null}(r,e,t,s):r instanceof Vu?function(a,p,E,x){if(!Ac(a.precondition,p))return E;const W=vh(a.fieldTransforms,x,p),J=p.data;return J.setAll(qd(a)),J.setAll(W),p.convertToFoundDocument(p.version,J).setHasLocalMutations(),null===E?null:E.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(pe=>pe.field))}(r,e,t,s):(E=t,Ac(r.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):E);var p,E}function Kd(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),p=Wc(s.transform,a||null);null!=p&&(null===t&&(t=ms.empty()),t.set(s.field,p))}return t||null}function Id(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&ul(t,s,(a,p)=>function wd(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof Ru&&s instanceof Ru||t instanceof Fu&&s instanceof Fu?ul(t.elements,s.elements,yl):t instanceof Mu&&s instanceof Mu?yl(t.gt,s.gt):t instanceof vu&&s instanceof vu);var t,s}(a,p))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class zl extends Rc{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Vu extends Rc{constructor(e,t,s,a,p=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function qd(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function _h(r,e,t){const s=new Map;Ln(r.length===t.length);for(let a=0;a<t.length;a++){const p=r[a],E=p.transform,x=e.data.field(p.field);s.set(p.field,rd(E,x,t[a]))}return s}function vh(r,e,t){const s=new Map;for(const a of r){const p=a.transform,E=t.data.field(a.field);s.set(a.field,mh(p,E,e))}return s}class nu extends Rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mc extends Rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const p=this.mutations[a];p.key.isEqual(e.key)&&yh(p,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=tc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=tc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_u();return this.mutations.forEach(a=>{const p=e.get(a.key),E=p.overlayedDocument;let x=this.applyToLocalView(E,p.mutatedFields);x=t.has(a.key)?null:x;const W=Js(E,x);null!==W&&s.set(a.key,W),E.isValidDocument()||E.convertToNoDocument(ar.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),di())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,s)=>Id(t,s))&&ul(this.baseMutations,e.baseMutations,(t,s)=>Id(t,s))}}class Eh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Ln(e.mutations.length===s.length);let a=_c;const p=e.mutations;for(let E=0;E<p.length;E++)a=a.insert(p[E].key,s[E].version);return new Eh(e,t,s,a)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ru{constructor(e,t){this.count=e,this.unchangedNames=t}}var la,Ji;function Yd(r){switch(r){default:return pn();case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0}}function Ih(r){if(void 0===r)return ir("GRPC error has no .code"),pt.UNKNOWN;switch(r){case la.OK:return pt.OK;case la.CANCELLED:return pt.CANCELLED;case la.UNKNOWN:return pt.UNKNOWN;case la.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case la.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case la.INTERNAL:return pt.INTERNAL;case la.UNAVAILABLE:return pt.UNAVAILABLE;case la.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case la.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case la.NOT_FOUND:return pt.NOT_FOUND;case la.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case la.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case la.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case la.ABORTED:return pt.ABORTED;case la.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case la.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case la.DATA_LOSS:return pt.DATA_LOSS;default:return pn()}}(Ji=la||(la={}))[Ji.OK=0]="OK",Ji[Ji.CANCELLED=1]="CANCELLED",Ji[Ji.UNKNOWN=2]="UNKNOWN",Ji[Ji.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ji[Ji.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ji[Ji.NOT_FOUND=5]="NOT_FOUND",Ji[Ji.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ji[Ji.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ji[Ji.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ji[Ji.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ji[Ji.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ji[Ji.ABORTED=10]="ABORTED",Ji[Ji.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ji[Ji.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ji[Ji.INTERNAL=13]="INTERNAL",Ji[Ji.UNAVAILABLE=14]="UNAVAILABLE",Ji[Ji.DATA_LOSS=15]="DATA_LOSS";class bd{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qd}static getOrCreateInstance(){return null===Qd&&(Qd=new bd),Qd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Qd=null;function Cd(){return new TextEncoder}const nc=new wt([4294967295,4294967295],0);function Kc(r){const e=Cd().encode(r),t=new Me;return t.update(e),new Uint8Array(t.digest())}function I(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new wt([t,s],0),new wt([a,p],0)]}class d{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new g(`Invalid padding: ${t}`);if(s<0)throw new g(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new g(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new g(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=wt.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(wt.fromNumber(s)));return 1===a.compare(nc)&&(a=new wt([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Kc(e),[s,a]=I(t);for(let p=0;p<this.hashCount;p++){const E=this.Et(s,a,p);if(!this.At(E))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),E=new d(p,a,t);return s.forEach(x=>E.insert(x)),E}insert(e){if(0===this.It)return;const t=Kc(e),[s,a]=I(t);for(let p=0;p<this.hashCount;p++){const E=this.Et(s,a,p);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class S{constructor(e,t,s,a,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,U.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new S(ar.min(),a,new gs(Wn),Os(),di())}}class U{constructor(e,t,s,a,p){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new U(s,t,di(),di(),di())}}class Q{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class me{constructor(e,t){this.targetId=e,this.Vt=t}}class Ee{constructor(e,t,s=go.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class xe{constructor(){this.St=0,this.Dt=Jt(),this.Ct=go.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=di(),t=di(),s=di();return this.Dt.forEach((a,p)=>{switch(p){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:pn()}}),new U(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Jt()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class rt{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Os(),this.zt=bt(),this.Wt=new gs(Wn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,p=this.se(s);if(p){const E=p.target;if(Il(E))if(0===a){const x=new _n(E.path);this.Yt(s,x,Ps.newNoDocument(x,ar.min()))}else Ln(1===a);else{const x=this.ie(s);if(x!==a){const W=this.re(e,x);0!==W&&(this.ee(s),this.Wt=this.Wt.insert(s,2===W?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=bd.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(J,pe,Ve){var yt,Ut,hn,Gn,rr,Hi;const Ts={localCacheCount:pe,existenceFilterCount:Ve.count},ds=Ve.unchangedNames;return ds&&(Ts.bloomFilter={applied:0===J,hashCount:null!==(yt=ds?.hashCount)&&void 0!==yt?yt:0,bitmapLength:null!==(Gn=null===(hn=null===(Ut=ds?.bits)||void 0===Ut?void 0:Ut.bitmap)||void 0===hn?void 0:hn.length)&&void 0!==Gn?Gn:0,padding:null!==(Hi=null===(rr=ds?.bits)||void 0===rr?void 0:rr.padding)&&void 0!==Hi?Hi:0}),Ts}(W,x,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:p="",padding:E=0},hashCount:x=0}=s;let W,J;try{W=Ja(p).toUint8Array()}catch(pe){if(pe instanceof Dc)return $i("Decoding the base64 bloom filter in existence filter failed ("+pe.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw pe}try{J=new d(W,E,x)}catch(pe){return $i(pe instanceof g?"BloomFilter error: ":"Applying bloom filter failed: ",pe),1}return 0===J.It?1:a!==t-this.oe(e.targetId,J)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(p=>{const E=this.Gt.ue(),x=`projects/${E.projectId}/databases/${E.database}/documents/${p.path.canonicalString()}`;t.vt(x)||(this.Yt(e,p,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((p,E)=>{const x=this.se(E);if(x){if(p.current&&Il(x.target)){const W=new _n(x.target.path);null!==this.jt.get(W)||this.ae(E,W)||this.Yt(E,W,Ps.newNoDocument(W,e))}p.Mt&&(t.set(E,p.Ot()),p.Ft())}});let s=di();this.zt.forEach((p,E)=>{let x=!0;E.forEachWhile(W=>{const J=this.se(W);return!J||"TargetPurposeLimboResolution"===J.purpose||(x=!1,!1)}),x&&(s=s.add(p))}),this.jt.forEach((p,E)=>E.setReadTime(e));const a=new S(e,t,this.Wt,this.jt,s);return this.jt=Os(),this.zt=bt(),this.Wt=new gs(Wn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new xe,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cs(Wn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Vt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new xe),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function bt(){return new gs(_n.comparator)}function Jt(){return new gs(_n.comparator)}const nr={asc:"ASCENDING",desc:"DESCENDING"},bn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Un={and:"AND",or:"OR"};class Bn{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sr(r,e){return r.useProto3Json||Ns(e)?e:{value:e}}function Ar(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ci(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qi(r,e){return Ar(r,e.toTimestamp())}function un(r){return Ln(!!r),ar.fromTimestamp(function(e){const t=Xl(e);return new ps(t.seconds,t.nanos)}(r))}function es(r,e){return(t=r,new wr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Fi(r){const e=wr.fromString(r);return Ln(oc(e)),e}function Ei(r,e){return es(r.databaseId,e.path)}function wi(r,e){const t=Fi(e);if(t.get(1)!==r.databaseId.projectId)throw new Bt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Bt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _n(Aa(t))}function pi(r,e){return es(r.databaseId,e)}function Ai(r){const e=Fi(r);return 4===e.length?wr.emptyPath():Aa(e)}function Gs(r){return new wr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Aa(r){return Ln(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function uo(r,e,t){return{name:Ei(r,e),fields:t.value.mapValue.fields}}function Uu(r,e,t){const s=wi(r,e.name),a=un(e.updateTime),p=e.createTime?un(e.createTime):ar.min(),E=new ms({mapValue:{fields:e.fields}}),x=Ps.newFoundDocument(s,a,p,E);return t&&x.setHasCommittedMutations(),t?x.setHasCommittedMutations():x}function qn(r,e){let t;if(e instanceof zl)t={update:uo(r,e.key,e.value)};else if(e instanceof nu)t={delete:Ei(r,e.key)};else if(e instanceof Vu)t={update:uo(r,e.key,e.data),updateMask:sc(e.fieldMask)};else{if(!(e instanceof Mc))return pn();t={verify:Ei(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,p){const E=p.transform;if(E instanceof vu)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Ru)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof Fu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Mu)return{fieldPath:p.field.canonicalString(),increment:E.gt};throw pn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:qi(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:pn()),t;var a}function Rr(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?yo.updateTime(un(a.updateTime)):void 0!==a.exists?yo.exists(a.exists):yo.none():yo.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(p,E){let x=null;"setToServerValue"in E?(Ln("REQUEST_TIME"===E.setToServerValue),x=new vu):"appendMissingElements"in E?x=new Ru(E.appendMissingElements.values||[]):"removeAllFromArray"in E?x=new Fu(E.removeAllFromArray.values||[]):"increment"in E?x=new Mu(p,E.increment):pn();const W=zr.fromServerFormat(E.fieldPath);return new Gc(W,x)}(r,a)):[];var a;if(e.update){const a=wi(r,e.update.name),p=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new $o((e.updateMask.fieldPaths||[]).map(J=>zr.fromServerFormat(J)));return new Vu(a,p,E,t,s)}return new zl(a,p,t,s)}if(e.delete){const a=wi(r,e.delete);return new nu(a,t)}if(e.verify){const a=wi(r,e.verify);return new Mc(a,t)}return pn()}function co(r,e){return{documents:[pi(r,e.path)]}}function il(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=pi(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pi(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(W){if(0!==W.length)return ic(ke.create(W,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const p=function(W){if(0!==W.length)return W.map(J=>{return{field:Po((pe=J).field),direction:Ua(pe.dir)};var pe})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const E=sr(r,e.limit);var x,W;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(W=e.endAt).inclusive,values:W.position}),t}function Go(r){let e=Ai(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Ln(1===s);const pe=t.from[0];pe.allDescendants?a=pe.collectionId:e=e.child(pe.collectionId)}let p=[];t.where&&(p=function(pe){const Ve=vs(pe);return Ve instanceof ke&&mn(Ve)?Ve.getFilters():[Ve]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(pe=>{return new M(Co((Ve=pe).field),function(yt){switch(yt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ve.direction));var Ve}));let x=null;t.limit&&(x=function(pe){let Ve;return Ve="object"==typeof pe?pe.value:pe,Ns(Ve)?null:Ve}(t.limit));let W=null;var pe;t.startAt&&(W=new jl((pe=t.startAt).values||[],!!pe.before));let J=null;return t.endAt&&(J=function(pe){return new jl(pe.values||[],!pe.before)}(t.endAt)),yc(e,a,E,p,x,"F",W,J)}function vs(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Co(e.unaryFilter.field);return _e.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Co(e.unaryFilter.field);return _e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Co(e.unaryFilter.field);return _e.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Co(e.unaryFilter.field);return _e.create(p,"!=",{nullValue:"NULL_VALUE"});default:return pn()}}(r):void 0!==r.fieldFilter?_e.create(Co((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return ke.create(e.compositeFilter.filters.map(t=>vs(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return pn()}}(e.compositeFilter.op))}(r):pn();var e}function Ua(r){return nr[r]}function qc(r){return bn[r]}function _o(r){return Un[r]}function Po(r){return{fieldPath:r.canonicalString()}}function Co(r){return zr.fromServerFormat(r.fieldPath)}function ic(r){return r instanceof _e?function(e){if("=="===e.op){if(tl(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NAN"}};if(Bl(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tl(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NAN"}};if(Bl(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(e.field),op:qc(e.op),value:e.value}}}(r):r instanceof ke?function(e){const t=e.getFilters().map(s=>ic(s));return 1===t.length?t[0]:{compositeFilter:{op:_o(e.op),filters:t}}}(r):pn()}function sc(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oc(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Bu{constructor(e,t,s,a,p=ar.min(),E=ar.min(),x=go.EMPTY_BYTE_STRING,W=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=x,this.expectedCount=W}withSequenceNumber(e){return new Bu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Dd{constructor(e){this.fe=e}}function Sd(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ei(a=r.fe,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Ar(a,p.version.toTimestamp()),createTime:Ar(a,p.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ju(e.version)};else{if(!e.isUnknownDocument())return pn();s.unknownDocument={path:t.path.toArray(),version:ju(e.version)}}var a,p;return s}function Pc(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function ju(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wl(r){const e=new ps(r.seconds,r.nanoseconds);return ar.fromTimestamp(e)}function Gl(r,e){const t=(e.baseMutations||[]).map(p=>Rr(r.fe,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const s=e.mutations.map(p=>Rr(r.fe,p)),a=ps.fromMillis(e.localWriteTimeMs);return new Zd(e.batchId,a,t,s)}function $u(r){const e=Wl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Wl(r.lastLimboFreeSnapshotVersion):ar.min();let s;var a;return void 0!==r.query.documents?(Ln(1===(a=r.query).documents.length),s=P(Hl(Ai(a.documents[0])))):s=P(Go(r.query)),new Bu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,go.fromBase64String(r.resumeToken))}function Xd(r,e){const t=ju(e.snapshotVersion),s=ju(e.lastLimboFreeSnapshotVersion);let a;a=Il(e.target)?co(r.fe,e.target):il(r.fe,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wl(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function id(r){const e=Go({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?fe(e,e.limit,"L"):e}function Zc(r,e){return new wh(e.largestBatchId,Rr(r.fe,e.overlayMutation))}function h(r,e){const t=e.path.lastSegment();return[r,Ds(e.path.popLast()),t]}function u(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:ju(s.readTime),documentKey:Ds(s.documentKey.path),largestBatchId:s.largestBatchId}}class c{getBundleMetadata(e,t){return y(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Wl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return y(e).put({bundleId:(s=t).id,createTime:ju(un(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return T(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:id(a.bundledQuery),readTime:Wl(a.readTime)};var a})}saveNamedQuery(e,t){return T(e).put({name:(s=t).name,readTime:ju(un(s.readTime)),bundledQuery:s.bundledQuery});var s}}function y(r){return Qs(r,"bundles")}function T(r){return Qs(r,"namedQueries")}class F{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new F(e,t.uid||"")}getOverlay(e,t){return q(e).get(h(this.userId,t)).next(s=>s?Zc(this.serializer,s):null)}getOverlays(e,t){const s=Xs();return ft.forEach(t,a=>this.getOverlay(e,a).next(p=>{null!==p&&s.set(a,p)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((p,E)=>{const x=new wh(t,E);a.push(this.we(e,x))}),ft.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(E=>a.add(Ds(E.getCollectionPath())));const p=[];return a.forEach(E=>{const x=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);p.push(q(e).J("collectionPathOverlayIndex",x))}),ft.waitFor(p)}getOverlaysForCollection(e,t,s){const a=Xs(),p=Ds(t),E=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,Number.POSITIVE_INFINITY],!0);return q(e).j("collectionPathOverlayIndex",E).next(x=>{for(const W of x){const J=Zc(this.serializer,W);a.set(J.getKey(),J)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const p=Xs();let E;const x=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return q(e).X({index:"collectionGroupOverlayIndex",range:x},(W,J,pe)=>{const Ve=Zc(this.serializer,J);p.size()<a||Ve.largestBatchId===E?(p.set(Ve.getKey(),Ve),E=Ve.largestBatchId):pe.done()}).next(()=>p)}we(e,t){return q(e).put(function(s,a,p){const[E,x,W]=h(a,p.mutation.key);return{userId:a,collectionPath:x,documentId:W,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:qn(s.fe,p.mutation)}}(this.serializer,this.userId,t))}}function q(r){return Qs(r,"documentOverlays")}class ue{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(_s(e.integerValue));else if("doubleValue"in e){const s=_s(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Ya(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ja(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?Ca(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):pn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),_n.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Ce(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Ue(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const p=Ce(255&t[a]);if(s+=p,8!==p)break}return s}(r);return Math.ceil(e/8)}ue.Ve=new ue;class xt{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Ue(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Ue(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,a,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class kt{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Wt{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Fn{constructor(){this.je=new xt,this.ze=new kt(this.je),this.We=new Wt(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ur{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new ur(this.indexId,this.documentKey,this.arrayValue,s)}}function Zi(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Ra(r.arrayValue,e.arrayValue),0!==t?t:(t=Ra(r.directionalValue,e.directionalValue),0!==t?t:_n.comparator(r.documentKey,e.documentKey)))}function Ra(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Ec{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){Ln(e.collectionGroup===this.collectionId);const t=Ys(e);if(void 0!==t&&!this.en(t))return!1;const s=Bo(e);let a=new Set,p=0,E=0;for(;p<s.length&&this.en(s[p]);++p)a=a.add(s[p].fieldPath.canonicalString());if(p===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const x=s[p];if(!this.nn(this.Ze,x)||!this.sn(this.Ye[E++],x))return!1}++p}for(;p<s.length;++p)if(E>=this.Ye.length||!this.sn(this.Ye[E++],s[p]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function wc(r){var e,t;if(Ln(r instanceof _e||r instanceof ke),r instanceof _e){if(r instanceof Ta){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>_e.create(r.field,"==",p)))||[];return ke.create(a,"or")}return r}const s=r.filters.map(a=>wc(a));return ke.create(s,r.op)}function Ad(r){if(0===r.getFilters().length)return[];const e=Qh(wc(r));return Ln(jf(e)),bh(e)||Bf(e)?[e]:e.getFilters()}function bh(r){return r instanceof _e}function Bf(r){return r instanceof ke&&mn(r)}function jf(r){return bh(r)||Bf(r)||function(e){if(e instanceof ke&&Dt(e)){for(const t of e.getFilters())if(!bh(t)&&!Bf(t))return!1;return!0}return!1}(r)}function Qh(r){if(Ln(r instanceof _e||r instanceof ke),r instanceof _e)return r;if(1===r.filters.length)return Qh(r.filters[0]);const e=r.filters.map(s=>Qh(s));let t=ke.create(e,r.op);return t=Rd(t),jf(t)?t:(Ln(t instanceof ke),Ln(Xe(t)),Ln(t.filters.length>1),t.filters.reduce((s,a)=>$p(s,a)))}function $p(r,e){let t;return Ln(r instanceof _e||r instanceof ke),Ln(e instanceof _e||e instanceof ke),t=r instanceof _e?e instanceof _e?ke.create([r,e],"and"):$f(r,e):e instanceof _e?$f(e,r):function(s,a){if(Ln(s.filters.length>0&&a.filters.length>0),Xe(s)&&Xe(a))return Fr(s,a.getFilters());const p=Dt(s)?s:a,E=Dt(s)?a:s,x=p.filters.map(W=>$p(W,E));return ke.create(x,"or")}(r,e),Rd(t)}function $f(r,e){if(Xe(e))return Fr(e,r.getFilters());{const t=e.filters.map(s=>$p(r,s));return ke.create(t,"or")}}function Rd(r){if(Ln(r instanceof _e||r instanceof ke),r instanceof _e)return r;const e=r.getFilters();if(1===e.length)return Rd(e[0]);if(gn(r))return r;const t=e.map(a=>Rd(a)),s=[];return t.forEach(a=>{a instanceof _e?s.push(a):a instanceof ke&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:ke.create(s,r.op)}class Vy{constructor(){this.rn=new Hp}addToCollectionParentIndex(e,t){return this.rn.add(t),ft.resolve()}getCollectionParents(e,t){return ft.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ft.resolve()}deleteFieldIndex(e,t){return ft.resolve()}getDocumentsMatchingTarget(e,t){return ft.resolve(null)}getIndexType(e,t){return ft.resolve(0)}getFieldIndexes(e,t){return ft.resolve([])}getNextCollectionGroupToUpdate(e){return ft.resolve(null)}getMinOffset(e,t){return ft.resolve(po.min())}getMinOffsetFromCollectionGroup(e,t){return ft.resolve(po.min())}updateCollectionGroup(e,t,s){return ft.resolve()}updateIndexEntries(e,t){return ft.resolve()}}class Hp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new cs(wr.comparator),p=!a.has(s);return this.index[t]=a.add(s),p}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new cs(wr.comparator)).toArray()}}const Hf=new Uint8Array(0);class Uy{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Hp,this.un=new Wo(s=>wl(s),(s,a)=>zo(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const p={collectionId:s,parent:Ds(a)};return im(e).put(p)}return ft.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Zl(t),""],!1,!0);return im(e).j(a).next(p=>{for(const E of p){if(E.collectionId!==t)break;s.push(js(E.parent))}return s})}addFieldIndex(e,t){const s=zf(e),a={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var E;delete a.indexId;const p=s.add(a);if(t.indexState){const E=Yc(e);return p.next(x=>{E.put(u(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const s=zf(e),a=Yc(e),p=Xh(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Xh(e);let a=!0;const p=new Map;return ft.forEach(this.cn(t),E=>this.an(e,E).next(x=>{a&&(a=!!x),p.set(E,x)})).next(()=>{if(a){let E=di();const x=[];return ft.forEach(p,(W,J)=>{var pe;Vt("IndexedDbIndexManager",`Using index ${pe=W,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(ds=>`${ds.fieldPath}:${ds.kind}`).join(",")}`} to execute ${wl(t)}`);const Ve=function(ds,Sl){const ja=Ys(Sl);if(void 0===ja)return null;for(const qo of Mo(ds,ja.fieldPath))switch(qo.op){case"array-contains-any":return qo.value.arrayValue.values||[];case"array-contains":return[qo.value]}return null}(J,W),yt=function(ds,Sl){const ja=new Map;for(const qo of Bo(Sl))for(const Wu of Mo(ds,qo.fieldPath))switch(Wu.op){case"==":case"in":ja.set(qo.fieldPath.canonicalString(),Wu.value);break;case"not-in":case"!=":return ja.set(qo.fieldPath.canonicalString(),Wu.value),Array.from(ja.values())}return null}(J,W),Ut=function(ds,Sl){const ja=[];let qo=!0;for(const Wu of Bo(Sl)){const ph=0===Wu.kind?mc(ds,Wu.fieldPath,ds.startAt):Sc(ds,Wu.fieldPath,ds.startAt);ja.push(ph.value),qo&&(qo=ph.inclusive)}return new jl(ja,qo)}(J,W),hn=function(ds,Sl){const ja=[];let qo=!0;for(const Wu of Bo(Sl)){const ph=0===Wu.kind?Sc(ds,Wu.fieldPath,ds.endAt):mc(ds,Wu.fieldPath,ds.endAt);ja.push(ph.value),qo&&(qo=ph.inclusive)}return new jl(ja,qo)}(J,W),Gn=this.hn(W,J,Ut),rr=this.hn(W,J,hn),Hi=this.ln(W,J,yt),Ts=this.fn(W.indexId,Ve,Gn,Ut.inclusive,rr,hn.inclusive,Hi);return ft.forEach(Ts,ds=>s.H(ds,t.limit).next(Sl=>{Sl.forEach(ja=>{const qo=_n.fromSegments(ja.documentKey);E.has(qo)||(E=E.add(qo),x.push(qo))})}))}).next(()=>x)}return ft.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ad(ke.create(e.filters,"and")).map(s=>Xu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,p,E,x){const W=(null!=t?t.length:1)*Math.max(s.length,p.length),J=W/(null!=t?t.length:1),pe=[];for(let Ve=0;Ve<W;++Ve){const yt=t?this.dn(t[Ve/J]):Hf,Ut=this.wn(e,yt,s[Ve%J],a),hn=this._n(e,yt,p[Ve%J],E),Gn=x.map(rr=>this.wn(e,yt,rr,!0));pe.push(...this.createRange(Ut,hn,Gn))}return pe}wn(e,t,s,a){const p=new ur(e,_n.empty(),t,s);return a?p:p.Je()}_n(e,t,s,a){const p=new ur(e,_n.empty(),t,s);return a?p.Je():p}an(e,t){const s=new Ec(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(p=>{let E=null;for(const x of p)s.tn(x)&&(!E||x.fields.length>E.fields.length)&&(E=x);return E})}getIndexType(e,t){let s=2;const a=this.cn(t);return ft.forEach(a,p=>this.an(e,p).next(E=>{E?0!==s&&E.fields.length<function(x){let W=new cs(zr.comparator),J=!1;for(const pe of x.filters)for(const Ve of pe.getFlattenedFilters())Ve.field.isKeyField()||("array-contains"===Ve.op||"array-contains-any"===Ve.op?J=!0:W=W.add(Ve.field));for(const pe of x.orderBy)pe.field.isKeyField()||(W=W.add(pe.field));return W.size+(J?1:0)}(p)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Fn;for(const a of Bo(e)){const p=t.data.field(a.fieldPath);if(null==p)return null;const E=s.He(a.kind);ue.Ve._e(p,E)}return s.Qe()}dn(e){const t=new Fn;return ue.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Fn;return ue.Ve._e(Ul(this.databaseId,t),s.He(function(a){const p=Bo(a);return 0===p.length?0:p[p.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Fn);let p=0;for(const E of Bo(e)){const x=s[p++];for(const W of a)if(this.yn(t,E.fieldPath)&&Qu(x))a=this.pn(a,E,x);else{const J=W.He(E.kind);ue.Ve._e(x,J)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],p=[];for(const E of s.arrayValue.values||[])for(const x of a){const W=new Fn;W.seed(x.Qe()),ue.Ve._e(E,W.He(t.kind)),p.push(W)}return p}yn(e,t){return!!e.filters.find(s=>s instanceof _e&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=zf(e),a=Yc(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(p=>{const E=[];return ft.forEach(p,x=>a.get([x.indexId,this.uid]).next(W=>{E.push(function(J,pe){const Ve=pe?new ra(pe.sequenceNumber,new po(Wl(pe.readTime),new _n(js(pe.documentKey)),pe.largestBatchId)):ra.empty(),yt=J.fields.map(([Ut,hn])=>new hu(zr.fromServerFormat(Ut),hn));return new La(J.indexId,J.collectionGroup,yt,Ve)}(x,W))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const p=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==p?p:Wn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=zf(e),p=Yc(e);return this.Tn(e).next(E=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>ft.forEach(x,W=>p.put(u(W.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return ft.forEach(t,(a,p)=>{const E=s.get(a.collectionGroup);return(E?ft.resolve(E):this.getFieldIndexes(e,a.collectionGroup)).next(x=>(s.set(a.collectionGroup,x),ft.forEach(x,W=>this.En(e,a,W).next(J=>{const pe=this.An(p,W);return J.isEqual(pe)?ft.resolve():this.vn(e,p,W,J,pe)}))))})}Rn(e,t,s,a){return Xh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return Xh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=Xh(e);let p=new cs(Zi);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(E,x)=>{p=p.add(new ur(s.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>p)}An(e,t){let s=new cs(Zi);const a=this.mn(t,e);if(null==a)return s;const p=Ys(t);if(null!=p){const E=e.data.field(p.fieldPath);if(Qu(E))for(const x of E.arrayValue.values||[])s=s.add(new ur(t.indexId,e.key,this.dn(x),a))}else s=s.add(new ur(t.indexId,e.key,Hf,a));return s}vn(e,t,s,a,p){Vt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(x,W,J,pe,Ve){const yt=x.getIterator(),Ut=W.getIterator();let hn=pu(yt),Gn=pu(Ut);for(;hn||Gn;){let rr=!1,Hi=!1;if(hn&&Gn){const Ts=J(hn,Gn);Ts<0?Hi=!0:Ts>0&&(rr=!0)}else null!=hn?Hi=!0:rr=!0;rr?(pe(Gn),Gn=pu(Ut)):Hi?(Ve(hn),hn=pu(yt)):(hn=pu(yt),Gn=pu(Ut))}}(a,p,Zi,x=>{E.push(this.Rn(e,t,s,x))},x=>{E.push(this.Pn(e,t,s,x))}),ft.waitFor(E)}Tn(e){let t=1;return Yc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,p)=>{p.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,x)=>Zi(E,x)).filter((E,x,W)=>!x||0!==Zi(E,W[x-1]));const a=[];a.push(e);for(const E of s){const x=Zi(E,e),W=Zi(E,t);if(0===x)a[0]=e.Je();else if(x>0&&W<0)a.push(E),a.push(E.Je());else if(W>0)break}a.push(t);const p=[];for(let E=0;E<a.length;E+=2){if(this.bn(a[E],a[E+1]))return[];p.push(IDBKeyRange.bound([a[E].indexId,this.uid,a[E].arrayValue,a[E].directionalValue,Hf,[]],[a[E+1].indexId,this.uid,a[E+1].arrayValue,a[E+1].directionalValue,Hf,[]]))}return p}bn(e,t){return Zi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qc)}getMinOffset(e,t){return ft.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||pn())).next(Qc)}}function im(r){return Qs(r,"collectionParents")}function Xh(r){return Qs(r,"indexEntries")}function zf(r){return Qs(r,"indexConfiguration")}function Yc(r){return Qs(r,"indexState")}function Qc(r){Ln(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;dl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new po(e.readTime,e.documentKey,t)}const sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wu{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new wu(e,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function By(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),p=[],E=IDBKeyRange.only(t.batchId);let x=0;const W=s.X({range:E},(pe,Ve,yt)=>(x++,yt.delete()));p.push(W.next(()=>{Ln(1===x)}));const J=[];for(const pe of t.mutations){const Ve=R(e,pe.key.path,t.batchId);p.push(a.delete(Ve)),J.push(pe.key)}return ft.waitFor(p).next(()=>J)}function zp(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw pn();e=r.noDocument}return JSON.stringify(e).length}wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(41943040,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);class Jh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){Ln(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Jh(p,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sd(e).X({index:"userMutationsIndex",range:s},(a,p,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const p=Jd(e),E=sd(e);return E.add({}).next(x=>{Ln("number"==typeof x);const W=new Zd(x,t,s,a),J=function(yt,Ut,hn){const Gn=hn.baseMutations.map(Hi=>qn(yt.fe,Hi)),rr=hn.mutations.map(Hi=>qn(yt.fe,Hi));return{userId:Ut,batchId:hn.batchId,localWriteTimeMs:hn.localWriteTime.toMillis(),baseMutations:Gn,mutations:rr}}(this.serializer,this.userId,W),pe=[];let Ve=new cs((yt,Ut)=>Wn(yt.canonicalString(),Ut.canonicalString()));for(const yt of a){const Ut=R(this.userId,yt.key.path,x);Ve=Ve.add(yt.key.path.popLast()),pe.push(E.put(J)),pe.push(p.put(Ut,b))}return Ve.forEach(yt=>{pe.push(this.indexManager.addToCollectionParentIndex(e,yt))}),e.addOnCommittedListener(()=>{this.Vn[x]=W.keys()}),ft.waitFor(pe).next(()=>W)})}lookupMutationBatch(e,t){return sd(e).get(t).next(s=>s?(Ln(s.userId===this.userId),Gl(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?ft.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let p=null;return sd(e).X({index:"userMutationsIndex",range:a},(E,x,W)=>{x.userId===this.userId&&(Ln(x.batchId>=s),p=Gl(this.serializer,x)),W.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return sd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,p,E)=>{s=p.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sd(e).j("userMutationsIndex",t).next(s=>s.map(a=>Gl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=D(this.userId,t.path),a=IDBKeyRange.lowerBound(s),p=[];return Jd(e).X({range:a},(E,x,W)=>{const[J,pe,Ve]=E,yt=js(pe);if(J===this.userId&&t.path.isEqual(yt))return sd(e).get(Ve).next(Ut=>{if(!Ut)throw pn();Ln(Ut.userId===this.userId),p.push(Gl(this.serializer,Ut))});W.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new cs(Wn);const a=[];return t.forEach(p=>{const E=D(this.userId,p.path),x=IDBKeyRange.lowerBound(E),W=Jd(e).X({range:x},(J,pe,Ve)=>{const[yt,Ut,hn]=J,Gn=js(Ut);yt===this.userId&&p.path.isEqual(Gn)?s=s.add(hn):Ve.done()});a.push(W)}),ft.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,p=D(this.userId,s),E=IDBKeyRange.lowerBound(p);let x=new cs(Wn);return Jd(e).X({range:E},(W,J,pe)=>{const[Ve,yt,Ut]=W,hn=js(yt);Ve===this.userId&&s.isPrefixOf(hn)?hn.length===a&&(x=x.add(Ut)):pe.done()}).next(()=>this.Dn(e,x))}Dn(e,t){const s=[],a=[];return t.forEach(p=>{a.push(sd(e).get(p).next(E=>{if(null===E)throw pn();Ln(E.userId===this.userId),s.push(Gl(this.serializer,E))}))}),ft.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return By(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ft.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ft.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Jd(e).X({range:s},(p,E,x)=>{if(p[0]===this.userId){const W=js(p[1]);a.push(W)}else x.done()}).next(()=>{Ln(0===a.length)})})}containsKey(e,t){return jy(e,this.userId,t)}xn(e){return om(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jy(r,e,t){const s=D(e,t.path),a=s[1],p=IDBKeyRange.lowerBound(s);let E=!1;return Jd(r).X({range:p,Y:!0},(x,W,J)=>{const[pe,Ve,yt]=x;pe===e&&Ve===a&&(E=!0),J.done()}).next(()=>E)}function sd(r){return Qs(r,"mutations")}function Jd(r){return Qs(r,"documentMutations")}function om(r){return Qs(r,"mutationQueues")}class Md{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Md(0)}static Mn(){return new Md(-1)}}class $y{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Md(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ar.fromTimestamp(new ps(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ch(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(Ln(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const p=[];return Ch(e).X((E,x)=>{const W=$u(x);W.sequenceNumber<=t&&null===s.get(W.targetId)&&(a++,p.push(this.removeTargetData(e,W)))}).next(()=>ft.waitFor(p)).next(()=>a)}forEachTarget(e,t){return Ch(e).X((s,a)=>{const p=$u(a);t(p)})}$n(e){return Ic(e).get("targetGlobalKey").next(t=>(Ln(null!==t),t))}On(e,t){return Ic(e).put("targetGlobalKey",t)}Fn(e,t){return Ch(e).put(Xd(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=wl(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let p=null;return Ch(e).X({range:a,index:"queryTargetsIndex"},(E,x,W)=>{const J=$u(x);zo(t,J.target)&&(p=J,W.done())}).next(()=>p)}addMatchingKeys(e,t,s){const a=[],p=Pd(e);return t.forEach(E=>{const x=Ds(E.path);a.push(p.put({targetId:s,path:x})),a.push(this.referenceDelegate.addReference(e,s,E))}),ft.waitFor(a)}removeMatchingKeys(e,t,s){const a=Pd(e);return ft.forEach(t,p=>{const E=Ds(p.path);return ft.waitFor([a.delete([s,E]),this.referenceDelegate.removeReference(e,s,p)])})}removeMatchingKeysForTargetId(e,t){const s=Pd(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Pd(e);let p=di();return a.X({range:s,Y:!0},(E,x,W)=>{const J=js(E[1]),pe=new _n(J);p=p.add(pe)}).next(()=>p)}containsKey(e,t){const s=Ds(t.path),a=IDBKeyRange.bound([s],[Zl(s)],!1,!0);let p=0;return Pd(e).X({index:"documentTargetsIndex",Y:!0,range:a},([E,x],W,J)=>{0!==E&&(p++,J.done())}).next(()=>p>0)}le(e,t){return Ch(e).get(t).next(s=>s?$u(s):null)}}function Ch(r){return Qs(r,"targets")}function Ic(r){return Qs(r,"targetGlobal")}function Pd(r){return Qs(r,"targetDocuments")}function Wp([r,e],[t,s]){const a=Wn(r,t);return 0===a?Wn(e,s):a}class Hy{constructor(e){this.Ln=e,this.buffer=new cs(Wp),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Wp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class am{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Vt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Ll(s)?Vt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ms(s)}yield t.Qn(3e5)}))}}class zy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return ft.resolve(Ao.ct);const s=new Hy(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),ft.resolve(sm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,p,E,x,W,J;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ve=>(Ve>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ve}`),a=this.params.maximumSequenceNumbersToCollect):a=Ve,E=Date.now(),this.nthSequenceNumber(e,a))).next(Ve=>(s=Ve,x=Date.now(),this.removeTargets(e,s,t))).next(Ve=>(p=Ve,W=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ve=>(J=Date.now(),ui()<=Le.in.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-pe}ms\n\tDetermined least recently used ${a} in `+(x-E)+`ms\n\tRemoved ${p} targets in `+(W-x)+`ms\n\tRemoved ${Ve} documents in `+(J-W)+`ms\nTotal Duration: ${J-pe}ms`),ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:p,documentsRemoved:Ve})))}}class um{constructor(e,t){this.db=e,this.garbageCollector=function lm(r,e){return new zy(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Wf(e,s)}removeReference(e,t,s){return Wf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Wf(e,t)}Xn(e,t){return function(s,a){let p=!1;return om(s).Z(E=>jy(s,E,a).next(x=>(x&&(p=!0),ft.resolve(!x)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let p=0;return this.Yn(e,(E,x)=>{if(x<=t){const W=this.Xn(e,E).next(J=>{if(!J)return p++,s.getEntry(e,E).next(()=>(s.removeEntry(E,ar.min()),Pd(e).delete([0,Ds(E.path)])))});a.push(W)}}).next(()=>ft.waitFor(a)).next(()=>s.apply(e)).next(()=>p)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Wf(e,t)}Yn(e,t){const s=Pd(e);let a,p=Ao.ct;return s.X({index:"documentTargetsIndex"},([E,x],{path:W,sequenceNumber:J})=>{0===E?(p!==Ao.ct&&t(new _n(js(a)),p),p=J,a=W):p=Ao.ct}).next(()=>{p!==Ao.ct&&t(new _n(js(a)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wf(r,e){return Pd(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ds(e.path),sequenceNumber:s}));var s}class cm{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ps.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?ft.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return xd(e).put(s)}removeEntry(e,t,s){return xd(e).delete(function(a,p){const E=a.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Pc(p),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Ps.newInvalidDocument(t);return xd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ef(t))},(a,p)=>{s=this.ts(t,p)}).next(()=>s)}es(e,t){let s={size:0,document:Ps.newInvalidDocument(t)};return xd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ef(t))},(a,p)=>{s={document:this.ts(t,p),size:zp(p)}}).next(()=>s)}getEntries(e,t){let s=Os();return this.ns(e,t,(a,p)=>{const E=this.ts(a,p);s=s.insert(a,E)}).next(()=>s)}ss(e,t){let s=Os(),a=new gs(_n.comparator);return this.ns(e,t,(p,E)=>{const x=this.ts(p,E);s=s.insert(p,x),a=a.insert(p,zp(E))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return ft.resolve();let a=new cs(Kp);t.forEach(W=>a=a.add(W));const p=IDBKeyRange.bound(ef(a.first()),ef(a.last())),E=a.getIterator();let x=E.getNext();return xd(e).X({index:"documentKeyIndex",range:p},(W,J,pe)=>{const Ve=_n.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;x&&Kp(x,Ve)<0;)s(x,null),x=E.getNext();x&&x.isEqual(Ve)&&(s(x,J),x=E.hasNext()?E.getNext():null),x?pe.G(ef(x)):pe.done()}).next(()=>{for(;x;)s(x,null),x=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const p=t.path,E=[p.popLast().toArray(),p.lastSegment(),Pc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],x=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xd(e).j(IDBKeyRange.bound(E,x,!0)).next(W=>{let J=Os();for(const pe of W){const Ve=this.ts(_n.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Ve.isFoundDocument()&&(Mn(t,Ve)||a.has(Ve.key))&&(J=J.insert(Ve.key,Ve))}return J})}getAllFromCollectionGroup(e,t,s,a){let p=Os();const E=hm(t,s),x=hm(t,po.max());return xd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,x,!0)},(W,J,pe)=>{const Ve=this.ts(_n.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);p=p.insert(Ve.key,Ve),p.size===a&&pe.done()}).next(()=>p)}newChangeBuffer(e){return new dm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gp(e).get("remoteDocumentGlobalKey").next(t=>(Ln(!!t),t))}Zn(e,t){return Gp(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function Td(r,e){let t;if(e.document)t=Uu(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=_n.fromSegments(e.noDocument.path),a=Wl(e.noDocument.readTime);t=Ps.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pn();{const s=_n.fromSegments(e.unknownDocument.path),a=Wl(e.unknownDocument.version);t=Ps.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new ps(s[0],s[1]);return ar.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(ar.min()))return s}return Ps.newInvalidDocument(e)}}function Oi(r){return new Wy(r)}class dm extends cm{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Wo(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new cs((p,E)=>Wn(p.canonicalString(),E.canonicalString()));return this.changes.forEach((p,E)=>{const x=this.us.get(p);if(t.push(this.os.removeEntry(e,p,x.readTime)),E.isValidDocument()){const W=Sd(this.os.serializer,E);a=a.add(p.path.popLast());const J=zp(W);s+=J-x.size,t.push(this.os.addEntry(e,p,W))}else if(s-=x.size,this.trackRemovals){const W=Sd(this.os.serializer,E.convertToNoDocument(ar.min()));t.push(this.os.addEntry(e,p,W))}}),a.forEach(p=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.os.updateMetadata(e,s)),ft.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((p,E)=>{this.us.set(p,{size:E,readTime:s.get(p).readTime})}),s))}}function Gp(r){return Qs(r,"remoteDocumentGlobal")}function xd(r){return Qs(r,"remoteDocumentsV14")}function ef(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hm(r,e){const t=e.documentKey.path.toArray();return[r,Pc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kp(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let p=0;p<t.length-2&&p<s.length-2;++p)if(a=Wn(t[p],s[p]),a)return a;return a=Wn(t.length,s.length),a||(a=Wn(t[t.length-2],s[s.length-2]),a||Wn(t[t.length-1],s[s.length-1]))}class Gy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qp{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&tc(s.mutation,a,$o.empty(),ps.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,di()).next(()=>s))}getLocalViewOfDocuments(e,t,s=di()){const a=Xs();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(p=>{let E=bl();return p.forEach((x,W)=>{E=E.insert(x,W.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=Xs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,di()))}populateOverlays(e,t,s){const a=[];return s.forEach(p=>{t.has(p)||a.push(p)}),this.documentOverlayCache.getOverlays(e,a).next(p=>{p.forEach((E,x)=>{t.set(E,x)})})}computeViews(e,t,s,a){let p=Os();const E=Au(),x=Au();return t.forEach((W,J)=>{const pe=s.get(J.key);a.has(J.key)&&(void 0===pe||pe.mutation instanceof Vu)?p=p.insert(J.key,J):void 0!==pe?(E.set(J.key,pe.mutation.getFieldMask()),tc(pe.mutation,J,pe.mutation.getFieldMask(),ps.now())):E.set(J.key,$o.empty())}),this.recalculateAndSaveOverlays(e,p).next(W=>(W.forEach((J,pe)=>E.set(J,pe)),t.forEach((J,pe)=>{var Ve;return x.set(J,new Gy(pe,null!==(Ve=E.get(J))&&void 0!==Ve?Ve:null))}),x))}recalculateAndSaveOverlays(e,t){const s=Au();let a=new gs((E,x)=>E-x),p=di();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const x of E)x.keys().forEach(W=>{const J=t.get(W);if(null===J)return;let pe=s.get(W)||$o.empty();pe=x.applyToLocalView(J,pe),s.set(W,pe);const Ve=(a.get(x.batchId)||di()).add(W);a=a.insert(x.batchId,Ve)})}).next(()=>{const E=[],x=a.getReverseIterator();for(;x.hasNext();){const W=x.getNext(),J=W.key,pe=W.value,Ve=_u();pe.forEach(yt=>{if(!p.has(yt)){const Ut=Js(t.get(yt),s.get(yt));null!==Ut&&Ve.set(yt,Ut),p=p.add(yt)}}),E.push(this.documentOverlayCache.saveOverlays(e,J,Ve))}return ft.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return _n.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):m(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(p=>{const E=a-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-p.size):ft.resolve(Xs());let x=-1,W=p;return E.next(J=>ft.forEach(J,(pe,Ve)=>(x<Ve.largestBatchId&&(x=Ve.largestBatchId),p.get(pe)?ft.resolve():this.remoteDocumentCache.getEntry(e,pe).next(yt=>{W=W.insert(pe,yt)}))).next(()=>this.populateOverlays(e,J,p)).next(()=>this.computeViews(e,W,J,di())).next(pe=>({batchId:x,changes:Lu(pe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _n(t)).next(s=>{let a=bl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let p=bl();return this.indexManager.getCollectionParents(e,a).next(E=>ft.forEach(E,x=>{const W=(J=t,pe=x.child(a),new $l(pe,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,pe;return this.getDocumentsMatchingCollectionQuery(e,W,s).next(J=>{J.forEach((pe,Ve)=>{p=p.insert(pe,Ve)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(p=>(a=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(p=>{a.forEach((x,W)=>{const J=W.getKey();null===p.get(J)&&(p=p.insert(J,Ps.newInvalidDocument(J)))});let E=bl();return p.forEach((x,W)=>{const J=a.get(x);void 0!==J&&tc(J.mutation,W,$o.empty(),ps.now()),Mn(t,W)&&(E=E.insert(x,W))}),E})}}class Ky{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ft.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:un(s.createTime)}),ft.resolve()}getNamedQuery(e,t){return ft.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:id(s.bundledQuery),readTime:un(s.readTime)}),ft.resolve();var s}}class qy{constructor(){this.overlays=new gs(_n.comparator),this.ls=new Map}getOverlay(e,t){return ft.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xs();return ft.forEach(t,a=>this.getOverlay(e,a).next(p=>{null!==p&&s.set(a,p)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,p)=>{this.we(e,t,p)}),ft.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(p=>this.overlays=this.overlays.remove(p)),this.ls.delete(s)),ft.resolve()}getOverlaysForCollection(e,t,s){const a=Xs(),p=t.length+1,E=new _n(t.child("")),x=this.overlays.getIteratorFrom(E);for(;x.hasNext();){const W=x.getNext().value,J=W.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===p&&W.largestBatchId>s&&a.set(W.getKey(),W)}return ft.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let p=new gs((J,pe)=>J-pe);const E=this.overlays.getIterator();for(;E.hasNext();){const J=E.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>s){let pe=p.get(J.largestBatchId);null===pe&&(pe=Xs(),p=p.insert(J.largestBatchId,pe)),pe.set(J.getKey(),J)}}const x=Xs(),W=p.getIterator();for(;W.hasNext()&&(W.getNext().value.forEach((J,pe)=>x.set(J,pe)),!(x.size()>=a)););return ft.resolve(x)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const E=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new wh(t,s));let p=this.ls.get(t);void 0===p&&(p=di(),this.ls.set(t,p)),this.ls.set(t,p.add(s.key))}}class fm{constructor(){this.fs=new cs(Dl.ds),this.ws=new cs(Dl._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Dl(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Dl(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new _n(new wr([])),s=new Dl(t,e),a=new Dl(t,e+1),p=[];return this.ws.forEachInRange([s,a],E=>{this.ys(E),p.push(E.key)}),p}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new _n(new wr([])),s=new Dl(t,e),a=new Dl(t,e+1);let p=di();return this.ws.forEachInRange([s,a],E=>{p=p.add(E.key)}),p}containsKey(e){const t=new Dl(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Dl{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return _n.comparator(e.key,t.key)||Wn(e.As,t.As)}static _s(e,t){return Wn(e.As,t.As)||_n.comparator(e.key,t.key)}}class pm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cs(Dl.ds)}checkEmpty(e){return ft.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const p=this.vs;this.vs++;const E=new Zd(p,t,s,a);this.mutationQueue.push(E);for(const x of a)this.Rs=this.Rs.add(new Dl(x.key,p)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return ft.resolve(E)}lookupMutationBatch(e,t){return ft.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),p=a<0?0:a;return ft.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Dl(t,0),a=new Dl(t,Number.POSITIVE_INFINITY),p=[];return this.Rs.forEachInRange([s,a],E=>{const x=this.Ps(E.As);p.push(x)}),ft.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new cs(Wn);return t.forEach(a=>{const p=new Dl(a,0),E=new Dl(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([p,E],x=>{s=s.add(x.As)})}),ft.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let p=s;_n.isDocumentKey(p)||(p=p.child(""));const E=new Dl(new _n(p),0);let x=new cs(Wn);return this.Rs.forEachWhile(W=>{const J=W.key.path;return!!s.isPrefixOf(J)&&(J.length===a&&(x=x.add(W.As)),!0)},E),ft.resolve(this.Vs(x))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Ln(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return ft.forEach(t.mutations,a=>{const p=new Dl(a.key,t.batchId);return s=s.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Dl(t,0),a=this.Rs.firstAfterOrEqual(s);return ft.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ft.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eh{constructor(e){this.Ds=e,this.docs=new gs(_n.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),p=a?a.size:0,E=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-p,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ft.resolve(s?s.document.mutableCopy():Ps.newInvalidDocument(t))}getEntries(e,t){let s=Os();return t.forEach(a=>{const p=this.docs.get(a);s=s.insert(a,p?p.document.mutableCopy():Ps.newInvalidDocument(a))}),ft.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let p=Os();const E=t.path,x=new _n(E.child("")),W=this.docs.getIteratorFrom(x);for(;W.hasNext();){const{key:J,value:{document:pe}}=W.getNext();if(!E.isPrefixOf(J.path))break;J.path.length>E.length+1||dl(ya(pe),s)<=0||(a.has(pe.key)||Mn(t,pe))&&(p=p.insert(pe.key,pe.mutableCopy()))}return ft.resolve(p)}getAllFromCollectionGroup(e,t,s,a){pn()}Cs(e,t){return ft.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Zy(this)}getSize(e){return ft.resolve(this.size)}}class Zy extends cm{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),ft.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Zp{constructor(e){this.persistence=e,this.xs=new Wo(t=>wl(t),zo),this.lastRemoteSnapshotVersion=ar.min(),this.highestTargetId=0,this.Ns=0,this.ks=new fm,this.targetCount=0,this.Ms=Md.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),ft.resolve()}getLastRemoteSnapshotVersion(e){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ft.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),ft.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Md(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ft.resolve()}updateTargetData(e,t){return this.Fn(t),ft.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ft.resolve()}removeTargets(e,t,s){let a=0;const p=[];return this.xs.forEach((E,x)=>{x.sequenceNumber<=t&&null===s.get(x.targetId)&&(this.xs.delete(E),p.push(this.removeMatchingKeysForTargetId(e,x.targetId)),a++)}),ft.waitFor(p).next(()=>a)}getTargetCount(e){return ft.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return ft.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),ft.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,p=[];return a&&t.forEach(E=>{p.push(a.markPotentiallyOrphaned(e,E))}),ft.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ft.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return ft.resolve(s)}containsKey(e,t){return ft.resolve(this.ks.containsKey(t))}}class tf{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ao(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Zp(this),this.indexManager=new Vy,this.remoteDocumentCache=new eh(s=>this.referenceDelegate.Ls(s)),this.serializer=new Dd(t),this.qs=new Ky(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new pm(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){Vt("MemoryPersistence","Starting transaction:",e);const a=new Yy(this.Os.next());return this.referenceDelegate.Us(),s(a).next(p=>this.referenceDelegate.Ks(a).next(()=>p)).toPromise().then(p=>(a.raiseOnCommittedEvent(),p))}Gs(e,t){return ft.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class Yy extends Yl{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Qs=new fm,this.js=null}static zs(e){return new Yp(e)}get Ws(){if(this.js)return this.js;throw pn()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),ft.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),ft.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ft.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(p=>this.Ws.add(p.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.Ws,s=>{const a=_n.fromPath(s);return this.Hs(e,a).next(p=>{p||t.removeEntry(a,ar.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ft.or([()=>ft.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Hv{constructor(e){this.serializer=e}O(e,t,s,a){const p=new Du("createOrUpgrade",t);var x;s<1&&a>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",va,{unique:!0}),x.createObjectStore("documentMutations"),gm(e),function(x){x.createObjectStore("remoteDocuments")}(e));let E=ft.resolve();return s<3&&a>=3&&(0!==s&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),gm(e)),E=E.next(()=>function(x){const W=x.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ar.min().toTimestamp(),targetCount:0};return W.put("targetGlobalKey",J)}(p))),s<4&&a>=4&&(0!==s&&(E=E.next(()=>function(x,W){return W.store("mutations").j().next(J=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",va,{unique:!0});const pe=W.store("mutations"),Ve=J.map(yt=>pe.put(yt));return ft.waitFor(Ve)})}(e,p))),E=E.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(E=E.next(()=>this.Ys(p))),s<6&&a>=6&&(E=E.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(p)))),s<7&&a>=7&&(E=E.next(()=>this.Zs(p))),s<8&&a>=8&&(E=E.next(()=>this.ti(e,p))),s<9&&a>=9&&(E=E.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(E=E.next(()=>this.ei(p))),s<11&&a>=11&&(E=E.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(E=E.next(()=>{!function(x){const W=x.createObjectStore("documentOverlays",{keyPath:Ea});W.createIndex("collectionPathOverlayIndex",ao,{unique:!1}),W.createIndex("collectionGroupOverlayIndex",Xi,{unique:!1})}(e)})),s<13&&a>=13&&(E=E.next(()=>function(x){const W=x.createObjectStore("remoteDocumentsV14",{keyPath:O});W.createIndex("documentKeyIndex",G),W.createIndex("collectionGroupIndex",se)}(e)).next(()=>this.ni(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(E=E.next(()=>this.si(e,p))),s<15&&a>=15&&(E=E.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Sn}).createIndex("sequenceNumberIndex",Li,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:us}).createIndex("documentKeyIndex",jo,{unique:!1})}(e))),E}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=zp(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>ft.forEach(a,p=>{const E=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",E).next(x=>ft.forEach(x,W=>{Ln(W.userId===p.userId);const J=Gl(this.serializer,W);return By(e,p.userId,J).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const p=[];return s.X((E,x)=>{const W=new wr(E),J=[0,Ds(W)];p.push(t.get(J).next(pe=>pe?ft.resolve():t.put({targetId:0,path:Ds(W),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ft.waitFor(p))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Rn});const s=t.store("collectionParents"),a=new Hp,p=E=>{if(a.add(E)){const x=E.lastSegment(),W=E.popLast();return s.put({collectionId:x,parent:Ds(W)})}};return t.store("remoteDocuments").X({Y:!0},(E,x)=>{const W=new wr(E);return p(W.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,x,W],J)=>{const pe=js(x);return p(pe.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const p=$u(a),E=Xd(this.serializer,p);return t.put(E)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((p,E)=>{const x=t.store("remoteDocumentsV14"),W=(J=E,J.document?new _n(wr.fromString(J.document.name).popFirst(5)):J.noDocument?_n.fromSegments(J.noDocument.path):J.unknownDocument?_n.fromSegments(J.unknownDocument.path):pn()).path.toArray();var J;const pe={prefixPath:W.slice(0,W.length-2),collectionGroup:W[W.length-2],documentId:W[W.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};a.push(x.put(pe))}).next(()=>ft.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Oi(this.serializer),p=new tf(Yp.zs,this.serializer.fe);return s.j().next(E=>{const x=new Map;return E.forEach(W=>{var J;let pe=null!==(J=x.get(W.userId))&&void 0!==J?J:di();Gl(this.serializer,W).keys().forEach(Ve=>pe=pe.add(Ve)),x.set(W.userId,pe)}),ft.forEach(x,(W,J)=>{const pe=new sn(J),Ve=F.de(this.serializer,pe),yt=p.getIndexManager(pe),Ut=Jh.de(pe,this.serializer,yt,p.referenceDelegate);return new qp(a,Ut,Ve,yt).recalculateAndSaveOverlaysForDocumentKeys(new Qa(t,Ao.ct),W).next()})})}}function gm(r){r.createObjectStore("targetDocuments",{keyPath:et}).createIndex("documentTargetsIndex",Nt,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ge,{unique:!0}),r.createObjectStore("targetGlobal")}const Gf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mm{constructor(e,t,s,a,p,E,x,W,J,pe,Ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=p,this.window=E,this.document=x,this.ri=J,this.oi=pe,this.ui=Ve,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=yt=>Promise.resolve(),!mm.D())throw new Bt(pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new um(this,a),this.di=t+"main",this.serializer=new Dd(W),this.wi=new ci(this.di,this.ui,new Hv(this.serializer)),this.Bs=new $y(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Oi(this.serializer),this.qs=new c,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===pe&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Bt(pt.FAILED_PRECONDITION,Gf);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ao(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,_.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,_.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,_.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>od(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ll(e))return Vt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return nf(e).get("owner").next(t=>ft.resolve(this.Ri(t)))}Pi(e){return od(e).delete(this.clientId)}bi(){var e=this;return(0,_.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Qs(s,"clientMetadata");return a.j().next(p=>{const E=e.Si(p,18e5),x=p.filter(W=>-1===E.indexOf(W));return ft.forEach(x,W=>a.delete(W.clientId)).next(()=>x)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ft.resolve(!0):nf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Bt(pt.FAILED_PRECONDITION,Gf);return!1}}return!(!this.networkEnabled||!this.inForeground)||od(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Vt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Qa(t,Ao.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>od(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Jh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uy(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return F.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){Vt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",p=15===(E=this.ui)?gl:14===E?Zu:13===E?Fa:12===E?pl:11===E?wa:void pn();var E;let x;return this.wi.runTransaction(e,a,p,W=>(x=new Qa(W,this.Os?this.Os.next():Ao.ct),"readwrite-primary"===t?this.Ti(x).next(J=>!!J||this.Ei(x)).next(J=>{if(!J)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Bt(pt.FAILED_PRECONDITION,hl);return s(x)}).next(J=>this.vi(x).next(()=>J)):this.Oi(x).next(()=>s(x)))).then(W=>(x.raiseOnCommittedEvent(),W))}Oi(e){return nf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Bt(pt.FAILED_PRECONDITION,Gf)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nf(e).put("owner",t)}static D(){return ci.D()}Ai(e){const t=nf(e);return t.get("owner").next(s=>this.Ri(s)?(Vt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ft.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(ir(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Se.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Vt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nf(r){return Qs(r,"owner")}function od(r){return Qs(r,"clientMetadata")}function Xp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Kf{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=di(),a=di();for(const p of t.docChanges)switch(p.type){case 0:s=s.add(p.doc.key);break;case 1:a=a.add(p.doc.key)}return new Kf(e,t.fromCache,s,a)}}class rf{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(p=>p||this.Gi(e,t,a,s)).next(p=>p||this.Qi(e,t))}Ki(e,t){if(gd(t))return ft.resolve(null);let s=P(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=fe(t,null,"F"),s=P(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(p=>{const E=di(...p);return this.Ui.getDocuments(e,E).next(x=>this.indexManager.getMinOffset(e,s).next(W=>{const J=this.ji(t,x);return this.zi(t,J,E,W.readTime)?this.Ki(e,fe(t,null,"F")):this.Wi(e,J,t,W)}))})))}Gi(e,t,s,a){return gd(t)||a.isEqual(ar.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(p=>{const E=this.ji(t,p);return this.zi(t,E,s,a)?this.Qi(e,t):(ui()<=Le.in.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ln(t)),this.Wi(e,E,t,ia(a,-1)))})}ji(e,t){let s=new cs(Zr(e));return t.forEach((a,p)=>{Mn(e,p)&&(s=s.add(p))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(a)>0)}Qi(e,t){return ui()<=Le.in.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",ln(t)),this.Ui.getDocumentsMatchingQuery(e,t,po.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(p=>(t.forEach(E=>{p=p.insert(E.key,E)}),p))}}class Qy{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new gs(Wn),this.Yi=new Wo(p=>wl(p),zo),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Jp(r,e,t,s){return new Qy(r,e,t,s)}function ym(r,e){return eg.apply(this,arguments)}function eg(){return eg=(0,_.Z)(function*(r,e){const t=rn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(p=>(a=p,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(p=>{const E=[],x=[];let W=di();for(const J of a){E.push(J.batchId);for(const pe of J.mutations)W=W.add(pe.key)}for(const J of p){x.push(J.batchId);for(const pe of J.mutations)W=W.add(pe.key)}return t.localDocuments.getDocuments(s,W).next(J=>({er:J,removedBatchIds:E,addedBatchIds:x}))})})}),eg.apply(this,arguments)}function _m(r){const e=rn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function tg(r,e,t){let s=di(),a=di();return t.forEach(p=>s=s.add(p)),e.getEntries(r,s).next(p=>{let E=Os();return t.forEach((x,W)=>{const J=p.get(x);W.isFoundDocument()!==J.isFoundDocument()&&(a=a.add(x)),W.isNoDocument()&&W.version.isEqual(ar.min())?(e.removeEntry(x,W.readTime),E=E.insert(x,W)):!J.isValidDocument()||W.version.compareTo(J.version)>0||0===W.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(W),E=E.insert(x,W)):Vt("LocalStore","Ignoring outdated watch update for ",x,". Current version:",J.version," Watch version:",W.version)}),{nr:E,sr:a}})}function e_(r,e){const t=rn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function th(r,e){const t=rn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(p=>p?(a=p,ft.resolve(a)):t.Bs.allocateTargetId(s).next(E=>(a=new Bu(e,E,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function nh(r,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,_.Z)(function*(r,e,t){const s=rn(r),a=s.Ji.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",p,E=>s.persistence.referenceDelegate.removeTarget(E,a)))}catch(E){if(!Ll(E))throw E;Vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),sf.apply(this,arguments)}function ng(r,e,t){const s=rn(r);let a=ar.min(),p=di();return s.persistence.runTransaction("Execute query","readonly",E=>function(x,W,J){const pe=rn(x),Ve=pe.Yi.get(J);return void 0!==Ve?ft.resolve(pe.Ji.get(Ve)):pe.Bs.getTargetData(W,J)}(s,E,P(e)).next(x=>{if(x)return a=x.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(E,x.targetId).next(W=>{p=W})}).next(()=>s.Hi.getDocumentsMatchingQuery(E,e,t?a:ar.min(),t?p:di())).next(x=>(t_(s,dr(e),x),{documents:x,ir:p})))}function qf(r,e){const t=rn(r),s=rn(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",p=>s.le(p,e).next(E=>E?E.target:null))}function vm(r,e){const t=rn(r),s=t.Xi.get(e)||ar.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,ia(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(t_(t,e,a),a))}function t_(r,e,t){let s=r.Xi.get(e)||ar.min();t.forEach((a,p)=>{p.readTime.compareTo(s)>0&&(s=p.readTime)}),r.Xi.set(e,s)}function Zf(){return Zf=(0,_.Z)(function*(r,e,t,s){const a=rn(r);let p=di(),E=Os();for(const J of t){const pe=e.rr(J.metadata.name);J.document&&(p=p.add(pe));const Ve=e.ur(J);Ve.setReadTime(e.cr(J.metadata.readTime)),E=E.insert(pe,Ve)}const x=a.Zi.newChangeBuffer({trackRemovals:!0}),W=yield th(a,(J=s,P(Hl(wr.fromString(`__bundle__/docs/${J}`)))));var J;return a.persistence.runTransaction("Apply bundle documents","readwrite",J=>tg(J,x,E).next(pe=>(x.apply(J),pe)).next(pe=>a.Bs.removeMatchingKeysForTargetId(J,W.targetId).next(()=>a.Bs.addMatchingKeys(J,p,W.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(J,pe.nr,pe.sr)).next(()=>pe.nr)))}),Zf.apply(this,arguments)}function n_(r,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,_.Z)(function*(r,e,t=di()){const s=yield th(r,P(id(e.bundledQuery))),a=rn(r);return a.persistence.runTransaction("Save named query","readwrite",p=>{const E=un(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return a.qs.saveNamedQuery(p,e);const x=s.withResumeToken(go.EMPTY_BYTE_STRING,E);return a.Ji=a.Ji.insert(x.targetId,x),a.Bs.updateTargetData(p,x).next(()=>a.Bs.removeMatchingKeysForTargetId(p,s.targetId)).next(()=>a.Bs.addMatchingKeys(p,t,s.targetId)).next(()=>a.qs.saveNamedQuery(p,e))})}),Yf.apply(this,arguments)}function Em(r,e){return`firestore_clients_${r}_${e}`}function wm(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Th(r,e){return`firestore_targets_${r}_${e}`}class ad{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let p,E="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return E&&a.error&&(E="string"==typeof a.error.message&&"string"==typeof a.error.code,E&&(p=new Bt(a.error.code,a.error.message))),E?new ad(e,t,a.state,p):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,p="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return p&&s.error&&(p="string"==typeof s.error.message&&"string"==typeof s.error.code,p&&(a=new Bt(s.error.code,s.error.message))),p?new rh(e,s.state,a):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,p=vc();for(let E=0;a&&E<s.activeTargetIds.length;++E)a=fl(s.activeTargetIds[E]),p=p.add(s.activeTargetIds[E]);return a?new Nd(e,p):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class af{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new af(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sh{constructor(){this.activeTargetIds=vc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qf{constructor(e,t,s,a,p){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new gs(Wn),this.started=!1,this.yr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.pr=Em(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Sh),this.Tr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const p=e.getItem(Em(e.persistenceKey,a));if(p){const E=Nd.ar(a,p);E&&(e.gr=e.gr.insert(E.clientId,E))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Th(this.persistenceKey,e));if(s){const a=rh.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Th(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Vt("SharedClientState","READ",e,t),t}setItem(e,t){Vt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Vt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Vt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,_.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(p){let E=Ao.ct;if(null!=p)try{const x=JSON.parse(p);Ln("number"==typeof x),E=x}catch(x){ir("SharedClientState","Failed to read sequence number from WebStorage",x)}return E}(s.newValue);a!==Ao.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(p=>t.syncEngine.Qr(p)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ad(this.currentUser,e,t,s),p=wm(this.persistenceKey,this.currentUser,e);this.setItem(p,a.hr())}Cr(e){const t=wm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Th(this.persistenceKey,e),p=new rh(e,t,s);this.setItem(a,p.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Nd.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ad.ar(new sn(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return rh.ar(a,t)}br(e){return af.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,_.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Vt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),p=this.Sr(s),E=[],x=[];return p.forEach(W=>{a.has(W)||E.push(W)}),a.forEach(W=>{p.has(W)||x.push(W)}),this.syncEngine.Wr(E,x).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=vc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Xf{constructor(){this.Hr=new Sh,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Sh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rg{Yr(e){}shutdown(){}}class Jf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lf=null;function uf(){return null===lf?lf=268435456+Math.round(2147483648*Math.random()):lf++,"0x"+lf.toString(16)}const r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i_{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const iu="WebChannelConnection";class s_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,p){const E=uf(),x=this.To(e,t);Vt("RestConnection",`Sending RPC '${e}' ${E}:`,x,s);const W={};return this.Eo(W,a,p),this.Ao(e,x,W,s).then(J=>(Vt("RestConnection",`Received RPC '${e}' ${E}: `,J),J),J=>{throw $i("RestConnection",`RPC '${e}' ${E} failed with error: `,J,"url: ",x,"request:",s),J})}vo(e,t,s,a,p,E){return this.Io(e,t,s,a,p)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Si,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,p)=>e[p]=a),s&&s.headers.forEach((a,p)=>e[p]=a)}To(e,t){return`${this.mo}/v1/${t}:${r_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const p=uf();return new Promise((E,x)=>{const W=new ae;W.setWithCredentials(!0),W.listenOnce(Ga.COMPLETE,()=>{try{switch(W.getLastErrorCode()){case ka.NO_ERROR:const pe=W.getResponseJson();Vt(iu,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(pe)),E(pe);break;case ka.TIMEOUT:Vt(iu,`RPC '${e}' ${p} timed out`),x(new Bt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const Ve=W.getStatus();if(Vt(iu,`RPC '${e}' ${p} failed with status:`,Ve,"response text:",W.getResponseText()),Ve>0){let yt=W.getResponseJson();Array.isArray(yt)&&(yt=yt[0]);const Ut=yt?.error;if(Ut&&Ut.status&&Ut.message){const hn=function(Gn){const rr=Gn.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(rr)>=0?rr:pt.UNKNOWN}(Ut.status);x(new Bt(hn,Ut.message))}else x(new Bt(pt.UNKNOWN,"Server responded with status "+W.getStatus()))}else x(new Bt(pt.UNAVAILABLE,"Connection failed."));break;default:pn()}}finally{Vt(iu,`RPC '${e}' ${p} completed.`)}});const J=JSON.stringify(a);Vt(iu,`RPC '${e}' ${p} sending request:`,a),W.send(t,"POST",J,s,15)})}Ro(e,t,s){const a=uf(),p=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=ql(),x=uc(),W={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},J=this.longPollingOptions.timeoutSeconds;void 0!==J&&(W.longPollingTimeout=Math.round(1e3*J)),this.useFetchStreams&&(W.xmlHttpFactory=new Z({})),this.Eo(W.initMessageHeaders,t,s),W.encodeInitMessageHeaders=!0;const pe=p.join("");Vt(iu,`Creating RPC '${e}' stream ${a}: ${pe}`,W);const Ve=E.createWebChannel(pe,W);let yt=!1,Ut=!1;const hn=new i_({ro:rr=>{Ut?Vt(iu,`Not sending because RPC '${e}' stream ${a} is closed:`,rr):(yt||(Vt(iu,`Opening RPC '${e}' stream ${a} transport.`),Ve.open(),yt=!0),Vt(iu,`RPC '${e}' stream ${a} sending:`,rr),Ve.send(rr))},oo:()=>Ve.close()}),Gn=(rr,Hi,Ts)=>{rr.listen(Hi,ds=>{try{Ts(ds)}catch(Sl){setTimeout(()=>{throw Sl},0)}})};return Gn(Ve,$.EventType.OPEN,()=>{Ut||Vt(iu,`RPC '${e}' stream ${a} transport opened.`)}),Gn(Ve,$.EventType.CLOSE,()=>{Ut||(Ut=!0,Vt(iu,`RPC '${e}' stream ${a} transport closed`),hn.wo())}),Gn(Ve,$.EventType.ERROR,rr=>{Ut||(Ut=!0,$i(iu,`RPC '${e}' stream ${a} transport errored:`,rr),hn.wo(new Bt(pt.UNAVAILABLE,"The operation could not be completed")))}),Gn(Ve,$.EventType.MESSAGE,rr=>{var Hi;if(!Ut){const Ts=rr.data[0];Ln(!!Ts);const Sl=Ts.error||(null===(Hi=Ts[0])||void 0===Hi?void 0:Hi.error);if(Sl){Vt(iu,`RPC '${e}' stream ${a} received error:`,Sl);const ja=Sl.status;let qo=function(ph){const Vp=la[ph];if(void 0!==Vp)return Ih(Vp)}(ja),Wu=Sl.message;void 0===qo&&(qo=pt.INTERNAL,Wu="Unknown error status: "+ja+" with message "+Sl.message),Ut=!0,hn.wo(new Bt(qo,Wu)),Ve.close()}else Vt(iu,`RPC '${e}' stream ${a} received:`,Ts),hn._o(Ts)}}),Gn(x,uu.STAT_EVENT,rr=>{rr.stat===k.PROXY?Vt(iu,`RPC '${e}' stream ${a} detected buffering proxy`):rr.stat===k.NOPROXY&&Vt(iu,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{hn.fo()},0),hn}}function ig(){return typeof window<"u"?window:null}function cf(){return typeof document<"u"?document:null}function df(r){return new Bn(r,!0)}class sg{constructor(e,t,s=1e3,a=1.5,p=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=p,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&Vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Hu{constructor(e,t,s,a,p,E,x,W){this.ii=e,this.$o=s,this.Oo=a,this.connection=p,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=x,this.listener=W,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new sg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,_.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,_.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,_.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===pt.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===pt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Bt(pt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,_.Z)(function*(){e.state=0,e.start()}))}tu(e){return Vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o_ extends Hu{constructor(e,t,s,a,p,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,E),this.serializer=p}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function vn(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(W=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===W?1:"REMOVE"===W?2:"CURRENT"===W?3:"RESET"===W?4:pn(),a=e.targetChange.targetIds||[],p=function(W,J){return W.useProto3Json?(Ln(void 0===J||"string"==typeof J),go.fromBase64String(J||"")):(Ln(void 0===J||J instanceof Uint8Array),go.fromUint8Array(J||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,x=E&&function(W){const J=void 0===W.code?pt.UNKNOWN:Ih(W.code);return new Bt(J,W.message||"")}(E);t=new Ee(s,a,p,x||null)}else if("documentChange"in e){const s=e.documentChange,a=wi(r,s.document.name),p=un(s.document.updateTime),E=s.document.createTime?un(s.document.createTime):ar.min(),x=new ms({mapValue:{fields:s.document.fields}}),W=Ps.newFoundDocument(a,p,E,x);t=new Q(s.targetIds||[],s.removedTargetIds||[],W.key,W)}else if("documentDelete"in e){const s=e.documentDelete,a=wi(r,s.document),p=s.readTime?un(s.readTime):ar.min(),E=Ps.newNoDocument(a,p);t=new Q([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,a=wi(r,s.document);t=new Q([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return pn();{const s=e.filter,{count:a=0,unchangedNames:p}=s,E=new ru(a,p);t=new me(s.targetId,E)}}var W;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return ar.min();const p=a.targetChange;return p.targetIds&&p.targetIds.length?ar.min():p.readTime?un(p.readTime):ar.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=Gs(this.serializer),t.addTarget=function(a,p){let E;const x=p.target;if(E=Il(x)?{documents:co(a,x)}:{query:il(a,x)},E.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){E.resumeToken=Ci(a,p.resumeToken);const W=sr(a,p.expectedCount);null!==W&&(E.expectedCount=W)}else if(p.snapshotVersion.compareTo(ar.min())>0){E.readTime=Ar(a,p.snapshotVersion.toTimestamp());const W=sr(a,p.expectedCount);null!==W&&(E.expectedCount=W)}return E}(this.serializer,e);const s=function Cl(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=Gs(this.serializer),t.removeTarget=e,this.Wo(t)}}class a_ extends Hu{constructor(e,t,s,a,p,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,E),this.serializer=p,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Ri(r,e){return r&&r.length>0?(Ln(void 0!==e),r.map(t=>function(s,a){let p=un(s.updateTime?s.updateTime:a);return p.isEqual(ar.min())&&(p=un(a)),new Gd(p,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=un(e.commitTime);return this.listener.cu(s,t)}return Ln(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Gs(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>qn(this.serializer,s))};this.Wo(t)}}class zv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Bt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,p])=>this.connection.Io(e,t,s,a,p)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Bt(pt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,E])=>this.connection.vo(e,t,s,p,E,a)).catch(p=>{throw"FirebaseError"===p.name?(p.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Bt(pt.UNKNOWN,p.toString())})}terminate(){this.lu=!0}}class l_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ir(t),this.mu=!1):Vt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class u_{constructor(e,t,s,a,p){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=p,this.Pu.Yr(x=>{s.enqueueAndForget((0,_.Z)(function*(){var W;su(E)&&(Vt("RemoteStore","Restarting streams for network reachability change."),yield(W=(0,_.Z)(function*(J){const pe=rn(J);pe.vu.add(4),yield Ah(pe),pe.bu.set("Unknown"),pe.vu.delete(4),yield hf(pe)}),function(J){return W.apply(this,arguments)})(E))}))}),this.bu=new l_(s,a)}}function hf(r){return tp.apply(this,arguments)}function tp(){return tp=(0,_.Z)(function*(r){if(su(r))for(const e of r.Ru)yield e(!0)}),tp.apply(this,arguments)}function Ah(r){return ag.apply(this,arguments)}function ag(){return ag=(0,_.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),ag.apply(this,arguments)}function Rh(r,e){const t=rn(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),cg(t)?ug(t):Oh(t).Ko()&&lg(t,e))}function ff(r,e){const t=rn(r),s=Oh(t);t.Au.delete(e),s.Ko()&&Im(t,e),0===t.Au.size&&(s.Ko()?s.jo():su(t)&&t.bu.set("Unknown"))}function lg(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ar.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oh(r).su(e)}function Im(r,e){r.Vu.qt(e),Oh(r).iu(e)}function ug(r){r.Vu=new rt({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),Oh(r).start(),r.bu.gu()}function cg(r){return su(r)&&!Oh(r).Uo()&&r.Au.size>0}function su(r){return 0===rn(r).vu.size}function np(r){r.Vu=void 0}function c_(r){return dg.apply(this,arguments)}function dg(){return dg=(0,_.Z)(function*(r){r.Au.forEach((e,t)=>{lg(r,e)})}),dg.apply(this,arguments)}function bm(r,e){return hg.apply(this,arguments)}function hg(){return hg=(0,_.Z)(function*(r,e){np(r),cg(r)?(r.bu.Iu(e),ug(r)):r.bu.set("Unknown")}),hg.apply(this,arguments)}function d_(r,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,_.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof Ee&&2===e.state&&e.cause)try{yield(s=(0,_.Z)(function*(a,p){const E=p.cause;for(const x of p.targetIds)a.Au.has(x)&&(yield a.remoteSyncer.rejectListen(x,E),a.Au.delete(x),a.Vu.removeTarget(x))}),function(a,p){return s.apply(this,arguments)})(r,e)}catch(s){Vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Mh(r,s)}else if(e instanceof Q?r.Vu.Ht(e):e instanceof me?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(ar.min()))try{const s=yield _m(r.localStore);t.compareTo(s)>=0&&(yield function(a,p){const E=a.Vu.ce(p);return E.targetChanges.forEach((x,W)=>{if(x.resumeToken.approximateByteSize()>0){const J=a.Au.get(W);J&&a.Au.set(W,J.withResumeToken(x.resumeToken,p))}}),E.targetMismatches.forEach((x,W)=>{const J=a.Au.get(x);if(!J)return;a.Au.set(x,J.withResumeToken(go.EMPTY_BYTE_STRING,J.snapshotVersion)),Im(a,x);const pe=new Bu(J.target,x,W,J.sequenceNumber);lg(a,pe)}),a.remoteSyncer.applyRemoteEvent(E)}(r,t))}catch(s){Vt("RemoteStore","Failed to raise snapshot:",s),yield Mh(r,s)}var s}),fg.apply(this,arguments)}function Mh(r,e,t){return pg.apply(this,arguments)}function pg(){return pg=(0,_.Z)(function*(r,e,t){if(!Ll(e))throw e;r.vu.add(1),yield Ah(r),r.bu.set("Offline"),t||(t=()=>_m(r.localStore)),r.asyncQueue.enqueueRetryable((0,_.Z)(function*(){Vt("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield hf(r)}))}),pg.apply(this,arguments)}function Cm(r,e){return e().catch(t=>Mh(r,t,e))}function ld(r){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,_.Z)(function*(r){const e=rn(r),t=Od(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;rp(e);)try{const a=yield e_(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Wv(e,a)}catch(a){yield Mh(e,a)}ip(e)&&h_(e)}),Ph.apply(this,arguments)}function rp(r){return su(r)&&r.Eu.length<10}function Wv(r,e){r.Eu.push(e);const t=Od(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function ip(r){return su(r)&&!Od(r).Uo()&&r.Eu.length>0}function h_(r){Od(r).start()}function Dm(r){return sp.apply(this,arguments)}function sp(){return sp=(0,_.Z)(function*(r){Od(r).hu()}),sp.apply(this,arguments)}function Tm(r){return op.apply(this,arguments)}function op(){return op=(0,_.Z)(function*(r){const e=Od(r);for(const t of r.Eu)e.uu(t.mutations)}),op.apply(this,arguments)}function gg(r,e,t){return xc.apply(this,arguments)}function xc(){return xc=(0,_.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Eh.from(s,e,t);yield Cm(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield ld(r)}),xc.apply(this,arguments)}function ap(r,e){return xh.apply(this,arguments)}function xh(){return xh=(0,_.Z)(function*(r,e){var t;e&&Od(r).ou&&(yield(t=(0,_.Z)(function*(s,a){if(Yd(p=a.code)&&p!==pt.ABORTED){const E=s.Eu.shift();Od(s).Qo(),yield Cm(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,a)),yield ld(s)}var p}),function(s,a){return t.apply(this,arguments)})(r,e)),ip(r)&&h_(r)}),xh.apply(this,arguments)}function Nh(r,e){return mg.apply(this,arguments)}function mg(){return mg=(0,_.Z)(function*(r,e){const t=rn(r);t.asyncQueue.verifyOperationInProgress(),Vt("RemoteStore","RemoteStore received new credentials");const s=su(t);t.vu.add(3),yield Ah(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield hf(t)}),mg.apply(this,arguments)}function lp(r,e){return up.apply(this,arguments)}function up(){return up=(0,_.Z)(function*(r,e){const t=rn(r);e?(t.vu.delete(2),yield hf(t)):e||(t.vu.add(2),yield Ah(t),t.bu.set("Unknown"))}),up.apply(this,arguments)}function Oh(r){return r.Su||(r.Su=function(e,t,s){const a=rn(e);return a.fu(),new o_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:c_.bind(null,r),ao:bm.bind(null,r),nu:d_.bind(null,r)}),r.Ru.push(function(){var e=(0,_.Z)(function*(t){t?(r.Su.Qo(),cg(r)?ug(r):r.bu.set("Unknown")):(yield r.Su.stop(),np(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function Od(r){return r.Du||(r.Du=function(e,t,s){const a=rn(e);return a.fu(),new a_(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:Dm.bind(null,r),ao:ap.bind(null,r),au:Tm.bind(null,r),cu:gg.bind(null,r)}),r.Ru.push(function(){var e=(0,_.Z)(function*(t){t?(r.Du.Qo(),yield ld(r)):(yield r.Du.stop(),r.Eu.length>0&&(Vt("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class ih{constructor(e,t,s,a,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=p,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,a,p){const E=Date.now()+s,x=new ih(e,t,E,a,p);return x.start(s),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kh(r,e){if(ir("AsyncQueue",`${e}: ${r}`),Ll(r))return new Bt(pt.UNAVAILABLE,`${e}: ${r}`);throw r}class pf{constructor(e){this.comparator=e?(t,s)=>e(t,s)||_n.comparator(t.key,s.key):(t,s)=>_n.comparator(t.key,s.key),this.keyedMap=bl(),this.sortedSet=new gs(this.comparator)}static emptySet(e){return new pf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,p=s.getNext().key;if(!a.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new pf;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Sm{constructor(){this.Cu=new gs(_n.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):pn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Lh{constructor(e,t,s,a,p,E,x,W,J){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=p,this.fromCache=E,this.syncStateChanged=x,this.excludesMetadataChanges=W,this.hasCachedResults=J}static fromInitialDocuments(e,t,s,a,p){const E=[];return t.forEach(x=>{E.push({type:0,doc:x})}),new Lh(e,t,pf.emptySet(t),E,s,a,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class f_{constructor(){this.Nu=void 0,this.listeners=[]}}class p_{constructor(){this.queries=new Wo(e=>Ct(e),tt),this.onlineState="Unknown",this.ku=new Set}}function yg(r,e){return _g.apply(this,arguments)}function _g(){return _g=(0,_.Z)(function*(r,e){const t=rn(r),s=e.query;let a=!1,p=t.queries.get(s);if(p||(a=!0,p=new f_),a)try{p.Nu=yield t.onListen(s)}catch(E){const x=kh(E,`Initialization of query '${ln(e.query)}' failed`);return void e.onError(x)}t.queries.set(s,p),p.listeners.push(e),e.Mu(t.onlineState),p.Nu&&e.$u(p.Nu)&&gf(t)}),_g.apply(this,arguments)}function vg(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,_.Z)(function*(r,e){const t=rn(r),s=e.query;let a=!1;const p=t.queries.get(s);if(p){const E=p.listeners.indexOf(e);E>=0&&(p.listeners.splice(E,1),a=0===p.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),cp.apply(this,arguments)}function Eg(r,e){const t=rn(r);let s=!1;for(const a of e){const E=t.queries.get(a.query);if(E){for(const x of E.listeners)x.$u(a)&&(s=!0);E.Nu=a}}s&&gf(t)}function g_(r,e,t){const s=rn(r),a=s.queries.get(e);if(a)for(const p of a.listeners)p.onError(t);s.queries.delete(e)}function gf(r){r.ku.forEach(e=>{e.next()})}class wg{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Lh(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class m_{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Am{constructor(e){this.serializer=e}rr(e){return wi(this.serializer,e)}ur(e){return e.metadata.exists?Uu(this.serializer,e.document,!1):Ps.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return un(e)}}class y_{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=wr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new Am(this.serializer);for(const a of e)if(a.metadata.queries){const p=s.rr(a.metadata.name);for(const E of a.metadata.queries){const x=(t.get(E)||di()).add(p);t.set(E,x)}}return t}complete(){var e=this;return(0,_.Z)(function*(){const t=yield function Dh(r,e,t,s){return Zf.apply(this,arguments)}(e.localStore,new Am(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield n_(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Rm(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Mm{constructor(e){this.key=e}}class Pm{constructor(e){this.key=e}}class Ig{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=di(),this.mutatedKeys=di(),this.tc=Zr(e),this.ec=new pf(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Sm,a=t?t.ec:this.ec;let p=t?t.mutatedKeys:this.mutatedKeys,E=a,x=!1;const W="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,J="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((pe,Ve)=>{const yt=a.get(pe),Ut=Mn(this.query,Ve)?Ve:null,hn=!!yt&&this.mutatedKeys.has(yt.key),Gn=!!Ut&&(Ut.hasLocalMutations||this.mutatedKeys.has(Ut.key)&&Ut.hasCommittedMutations);let rr=!1;yt&&Ut?yt.data.isEqual(Ut.data)?hn!==Gn&&(s.track({type:3,doc:Ut}),rr=!0):this.rc(yt,Ut)||(s.track({type:2,doc:Ut}),rr=!0,(W&&this.tc(Ut,W)>0||J&&this.tc(Ut,J)<0)&&(x=!0)):!yt&&Ut?(s.track({type:0,doc:Ut}),rr=!0):yt&&!Ut&&(s.track({type:1,doc:yt}),rr=!0,(W||J)&&(x=!0)),rr&&(Ut?(E=E.add(Ut),p=Gn?p.add(pe):p.delete(pe)):(E=E.delete(pe),p=p.delete(pe)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const pe="F"===this.query.limitType?E.last():E.first();E=E.delete(pe.key),p=p.delete(pe.key),s.track({type:1,doc:pe})}return{ec:E,ic:s,zi:x,mutatedKeys:p}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const p=e.ic.xu();p.sort((J,pe)=>function(Ve,yt){const Ut=hn=>{switch(hn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pn()}};return Ut(Ve)-Ut(yt)}(J.type,pe.type)||this.tc(J.doc,pe.doc)),this.oc(s);const E=t?this.uc():[],x=0===this.Zu.size&&this.current?1:0,W=x!==this.Xu;return this.Xu=x,0!==p.length||W?{snapshot:new Lh(this.query,e.ec,a,p,e.mutatedKeys,0===x,W,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:E}:{cc:E}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Sm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=di(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Pm(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Mm(s))}),t}hc(e){this.Yu=e.ir,this.Zu=di();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Lh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class xm{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class __{constructor(e){this.key=e,this.fc=!1}}class Gv{constructor(e,t,s,a,p,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=p,this.maxConcurrentLimboResolutions=E,this.dc={},this.wc=new Wo(x=>Ct(x),tt),this._c=new Map,this.mc=new Set,this.gc=new gs(_n.comparator),this.yc=new Map,this.Ic=new fm,this.Tc={},this.Ec=new Map,this.Ac=Md.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Nm(r,e){return Om.apply(this,arguments)}function Om(){return Om=(0,_.Z)(function*(r,e){const t=vp(r);let s,a;const p=t.wc.get(e);if(p)s=p.targetId,t.sharedClientState.addLocalQueryTarget(s),a=p.view.lc();else{const E=yield th(t.localStore,P(e)),x=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,a=yield Fh(t,e,s,"current"===x,E.resumeToken),t.isPrimaryClient&&Rh(t.remoteStore,E)}return a}),Om.apply(this,arguments)}function Fh(r,e,t,s,a){return bg.apply(this,arguments)}function bg(){return bg=(0,_.Z)(function*(r,e,t,s,a){r.Rc=(Ve,yt,Ut)=>{return(hn=(0,_.Z)(function*(Gn,rr,Hi,Ts){let ds=rr.view.sc(Hi);ds.zi&&(ds=yield ng(Gn.localStore,rr.query,!1).then(({documents:qo})=>rr.view.sc(qo,ds)));const Sl=Ts&&Ts.targetChanges.get(rr.targetId),ja=rr.view.applyChanges(ds,Gn.isPrimaryClient,Sl);return hp(Gn,rr.targetId,ja.cc),ja.snapshot}),function(Gn,rr,Hi,Ts){return hn.apply(this,arguments)})(r,Ve,yt,Ut);var hn};const p=yield ng(r.localStore,e,!0),E=new Ig(e,p.ir),x=E.sc(p.documents),W=U.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),J=E.applyChanges(x,r.isPrimaryClient,W);hp(r,t,J.cc);const pe=new xm(e,t,E);return r.wc.set(e,pe),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),J.snapshot}),bg.apply(this,arguments)}function v_(r,e){return mf.apply(this,arguments)}function mf(){return mf=(0,_.Z)(function*(r,e){const t=rn(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(p=>!tt(p,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield nh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),ff(t.remoteStore,s.targetId),Nc(t,s.targetId)}).catch(Ms))):(Nc(t,s.targetId),yield nh(t.localStore,s.targetId,!0))}),mf.apply(this,arguments)}function bc(){return bc=(0,_.Z)(function*(r,e,t){const s=vf(r);try{const a=yield function(p,E){const x=rn(p),W=ps.now(),J=E.reduce((yt,Ut)=>yt.add(Ut.key),di());let pe,Ve;return x.persistence.runTransaction("Locally write mutations","readwrite",yt=>{let Ut=Os(),hn=di();return x.Zi.getEntries(yt,J).next(Gn=>{Ut=Gn,Ut.forEach((rr,Hi)=>{Hi.isValidDocument()||(hn=hn.add(rr))})}).next(()=>x.localDocuments.getOverlayedDocuments(yt,Ut)).next(Gn=>{pe=Gn;const rr=[];for(const Hi of E){const Ts=Kd(Hi,pe.get(Hi.key).overlayedDocument);null!=Ts&&rr.push(new Vu(Hi.key,Ts,Tc(Ts.value.mapValue),yo.exists(!0)))}return x.mutationQueue.addMutationBatch(yt,W,rr,E)}).next(Gn=>{Ve=Gn;const rr=Gn.applyToLocalDocumentSet(pe,hn);return x.documentOverlayCache.saveOverlays(yt,Gn.batchId,rr)})}).then(()=>({batchId:Ve.batchId,changes:Lu(pe)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(p,E,x){let W=p.Tc[p.currentUser.toKey()];W||(W=new gs(Wn)),W=W.insert(E,x),p.Tc[p.currentUser.toKey()]=W}(s,a.batchId,t),yield Xc(s,a.changes),yield ld(s.remoteStore)}catch(a){const p=kh(a,"Failed to persist write");t.reject(p)}}),bc.apply(this,arguments)}function Vh(r,e){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,_.Z)(function*(r,e){const t=rn(r);try{const s=yield function Jy(r,e){const t=rn(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const E=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const x=[];e.targetChanges.forEach((pe,Ve)=>{const yt=a.get(Ve);if(!yt)return;x.push(t.Bs.removeMatchingKeys(p,pe.removedDocuments,Ve).next(()=>t.Bs.addMatchingKeys(p,pe.addedDocuments,Ve)));let Ut=yt.withSequenceNumber(p.currentSequenceNumber);var hn,Gn,rr;null!==e.targetMismatches.get(Ve)?Ut=Ut.withResumeToken(go.EMPTY_BYTE_STRING,ar.min()).withLastLimboFreeSnapshotVersion(ar.min()):pe.resumeToken.approximateByteSize()>0&&(Ut=Ut.withResumeToken(pe.resumeToken,s)),a=a.insert(Ve,Ut),Gn=Ut,rr=pe,(0===(hn=yt).resumeToken.approximateByteSize()||Gn.snapshotVersion.toMicroseconds()-hn.snapshotVersion.toMicroseconds()>=3e8||rr.addedDocuments.size+rr.modifiedDocuments.size+rr.removedDocuments.size>0)&&x.push(t.Bs.updateTargetData(p,Ut))});let W=Os(),J=di();if(e.documentUpdates.forEach(pe=>{e.resolvedLimboDocuments.has(pe)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(p,pe))}),x.push(tg(p,E,e.documentUpdates).next(pe=>{W=pe.nr,J=pe.sr})),!s.isEqual(ar.min())){const pe=t.Bs.getLastRemoteSnapshotVersion(p).next(Ve=>t.Bs.setTargetsMetadata(p,p.currentSequenceNumber,s));x.push(pe)}return ft.waitFor(x).next(()=>E.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,W,J)).next(()=>W)}).then(p=>(t.Ji=a,p))}(t.localStore,e);e.targetChanges.forEach((a,p)=>{const E=t.yc.get(p);E&&(Ln(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?E.fc=!0:a.modifiedDocuments.size>0?Ln(E.fc):a.removedDocuments.size>0&&(Ln(E.fc),E.fc=!1))}),yield Xc(t,s,e)}catch(s){yield Ms(s)}}),Kl.apply(this,arguments)}function kd(r,e,t){const s=rn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((p,E)=>{const x=E.view.Mu(e);x.snapshot&&a.push(x.snapshot)}),function(p,E){const x=rn(p);x.onlineState=E;let W=!1;x.queries.forEach((J,pe)=>{for(const Ve of pe.listeners)Ve.Mu(E)&&(W=!0)}),W&&gf(x)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function dp(r,e,t){return zu.apply(this,arguments)}function zu(){return zu=(0,_.Z)(function*(r,e,t){const s=rn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),p=a&&a.key;if(p){let E=new gs(_n.comparator);E=E.insert(p,Ps.newNoDocument(p,ar.min()));const x=di().add(p),W=new S(ar.min(),new Map,new gs(Wn),E,x);yield Vh(s,W),s.gc=s.gc.remove(p),s.yc.delete(e),fp(s)}else yield nh(s.localStore,e,!1).then(()=>Nc(s,e,t)).catch(Ms)}),zu.apply(this,arguments)}function Cg(r,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,_.Z)(function*(r,e){const t=rn(r),s=e.batch.batchId;try{const a=yield function Xy(r,e){const t=rn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),p=t.Zi.newChangeBuffer({trackRemovals:!0});return function(E,x,W,J){const pe=W.batch,Ve=pe.keys();let yt=ft.resolve();return Ve.forEach(Ut=>{yt=yt.next(()=>J.getEntry(x,Ut)).next(hn=>{const Gn=W.docVersions.get(Ut);Ln(null!==Gn),hn.version.compareTo(Gn)<0&&(pe.applyToRemoteDocument(hn,W),hn.isValidDocument()&&(hn.setReadTime(W.commitVersion),J.addEntry(hn)))})}),yt.next(()=>E.mutationQueue.removeMutationBatch(x,pe))}(t,s,e,p).next(()=>p.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let x=di();for(let W=0;W<E.mutationResults.length;++W)E.mutationResults[W].transformResults.length>0&&(x=x.add(E.batch.mutations[W].key));return x}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);Bd(t,s,null),Ud(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Xc(t,a)}catch(a){yield Ms(a)}}),Ld.apply(this,arguments)}function Uh(r,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,_.Z)(function*(r,e,t){const s=rn(r);try{const a=yield function(p,E){const x=rn(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",W=>{let J;return x.mutationQueue.lookupMutationBatch(W,E).next(pe=>(Ln(null!==pe),J=pe.keys(),x.mutationQueue.removeMutationBatch(W,pe))).next(()=>x.mutationQueue.performConsistencyCheck(W)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(W,J,E)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(W,J)).next(()=>x.localDocuments.getDocuments(W,J))})}(s.localStore,e);Bd(s,e,t),Ud(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(s,a)}catch(a){yield Ms(a)}}),Fd.apply(this,arguments)}function Vd(){return Vd=(0,_.Z)(function*(r,e){const t=rn(r);su(t.remoteStore)||Vt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const E=rn(p);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>E.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=kh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Vd.apply(this,arguments)}function Ud(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Bd(r,e,t){const s=rn(r);let a=s.Tc[s.currentUser.toKey()];if(a){const p=a.get(e);p&&(t?p.reject(t):p.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Nc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||sh(r,s)})}function sh(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(ff(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),fp(r))}function hp(r,e,t){for(const s of t)s instanceof Mm?(r.Ic.addReference(s.key,e),km(r,s)):s instanceof Pm?(Vt("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||sh(r,s.key)):pn()}function km(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(Vt("SyncEngine","New document in limbo: "+t),r.mc.add(s),fp(r))}function fp(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new _n(wr.fromString(e)),s=r.Ac.next();r.yc.set(s,new __(t)),r.gc=r.gc.insert(t,s),Rh(r.remoteStore,new Bu(P(Hl(t.path)),s,"TargetPurposeLimboResolution",Ao.ct))}}function Xc(r,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,_.Z)(function*(r,e,t){const s=rn(r),a=[],p=[],E=[];var x;s.wc.isEmpty()||(s.wc.forEach((x,W)=>{E.push(s.Rc(W,e,t).then(J=>{if((J||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(W.targetId,J?.fromCache?"not-current":"current"),J){a.push(J);const pe=Kf.Li(W.targetId,J);p.push(pe)}}))}),yield Promise.all(E),s.dc.nu(a),yield(x=(0,_.Z)(function*(W,J){const pe=rn(W);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ve=>ft.forEach(J,yt=>ft.forEach(yt.Fi,Ut=>pe.persistence.referenceDelegate.addReference(Ve,yt.targetId,Ut)).next(()=>ft.forEach(yt.Bi,Ut=>pe.persistence.referenceDelegate.removeReference(Ve,yt.targetId,Ut)))))}catch(Ve){if(!Ll(Ve))throw Ve;Vt("LocalStore","Failed to update sequence numbers: "+Ve)}for(const Ve of J){const yt=Ve.targetId;if(!Ve.fromCache){const Ut=pe.Ji.get(yt),Gn=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);pe.Ji=pe.Ji.insert(yt,Gn)}}}),function(W,J){return x.apply(this,arguments)})(s.localStore,p))}),pp.apply(this,arguments)}function Lm(r,e){return gp.apply(this,arguments)}function gp(){return gp=(0,_.Z)(function*(r,e){const t=rn(r);if(!t.currentUser.isEqual(e)){Vt("SyncEngine","User change. New user:",e.toKey());const s=yield ym(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(E=>{E.forEach(x=>{x.reject(new Bt(pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Xc(t,s.er)}var a}),gp.apply(this,arguments)}function Fm(r,e){const t=rn(r),s=t.yc.get(e);if(s&&s.fc)return di().add(s.key);{let a=di();const p=t._c.get(e);if(!p)return a;for(const E of p){const x=t.wc.get(E);a=a.unionWith(x.view.nc)}return a}}function Vm(r,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,_.Z)(function*(r,e){const t=rn(r),s=yield ng(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&hp(t,e.targetId,a.cc),a}),Dg.apply(this,arguments)}function w_(r,e){return mp.apply(this,arguments)}function mp(){return mp=(0,_.Z)(function*(r,e){const t=rn(r);return vm(t.localStore,e).then(s=>Xc(t,s))}),mp.apply(this,arguments)}function I_(r,e,t,s){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,_.Z)(function*(r,e,t,s){const a=rn(r),p=yield function(E,x){const W=rn(E),J=rn(W.mutationQueue);return W.persistence.runTransaction("Lookup mutation documents","readonly",pe=>J.Sn(pe,x).next(Ve=>Ve?W.localDocuments.getDocuments(pe,Ve):ft.resolve(null)))}(a.localStore,e);var x;null!==p?("pending"===t?yield ld(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),Ud(a,e),x=e,rn(rn(a.localStore).mutationQueue).Cn(x)):pn(),yield Xc(a,p)):Vt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Tg.apply(this,arguments)}function yf(){return yf=(0,_.Z)(function*(r,e){const t=rn(r);if(vp(t),vf(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Um(t,s.toArray());t.vc=!0,yield lp(t.remoteStore,!0);for(const p of a)Rh(t.remoteStore,p)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((p,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):a=a.then(()=>(Nc(t,E),nh(t.localStore,E,!0))),ff(t.remoteStore,E)}),yield a,yield Um(t,s),function(p){const E=rn(p);E.yc.forEach((x,W)=>{ff(E.remoteStore,W)}),E.Ic.Ts(),E.yc=new Map,E.gc=new gs(_n.comparator)}(t),t.vc=!1,yield lp(t.remoteStore,!1)}}),yf.apply(this,arguments)}function Um(r,e,t){return jh.apply(this,arguments)}function jh(){return jh=(0,_.Z)(function*(r,e,t){const s=rn(r),a=[],p=[];for(const E of e){let x;const W=s._c.get(E);if(W&&0!==W.length){x=yield th(s.localStore,P(W[0]));for(const J of W){const pe=s.wc.get(J),Ve=yield Vm(s,pe);Ve.snapshot&&p.push(Ve.snapshot)}}else{const J=yield qf(s.localStore,E);x=yield th(s.localStore,J),yield Fh(s,_f(J),E,!1,x.resumeToken)}a.push(x)}return s.dc.nu(p),a}),jh.apply(this,arguments)}function _f(r){return yc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Ag(r){const e=rn(r);return rn(rn(e.localStore).persistence).$i()}function b_(r,e,t,s){return $h.apply(this,arguments)}function $h(){return $h=(0,_.Z)(function*(r,e,t,s){const a=rn(r);if(a.vc)return void Vt("SyncEngine","Ignoring unexpected query state notification.");const p=a._c.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const E=yield vm(a.localStore,dr(p[0])),x=S.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,go.EMPTY_BYTE_STRING);yield Xc(a,E,x);break}case"rejected":yield nh(a.localStore,e,!0),Nc(a,e,s);break;default:pn()}}),$h.apply(this,arguments)}function yp(r,e,t){return _p.apply(this,arguments)}function _p(){return _p=(0,_.Z)(function*(r,e,t){const s=vp(r);if(s.vc){for(const a of e){if(s._c.has(a)){Vt("SyncEngine","Adding an already active target "+a);continue}const p=yield qf(s.localStore,a),E=yield th(s.localStore,p);yield Fh(s,_f(p),E.targetId,!1,E.resumeToken),Rh(s.remoteStore,E)}for(const a of t)s._c.has(a)&&(yield nh(s.localStore,a,!1).then(()=>{ff(s.remoteStore,a),Nc(s,a)}).catch(Ms))}}),_p.apply(this,arguments)}function vp(r){const e=rn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dp.bind(null,e),e.dc.nu=Eg.bind(null,e.eventManager),e.dc.Pc=g_.bind(null,e.eventManager),e}function vf(r){const e=rn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uh.bind(null,e),e}class Hh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_.Z)(function*(){t.serializer=df(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Jp(this.persistence,new rf,e.initialUser,this.serializer)}createPersistence(e){return new tf(Yp.zs,this.serializer)}createSharedClientState(e){return new Xf}terminate(){var e=this;return(0,_.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ep extends Hh{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,_.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield vf(s.Vc.syncEngine),yield ld(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Jp(this.persistence,new rf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new am(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new qu(t,this.persistence);return new Ql(e.asyncQueue,s)}createPersistence(e){const t=Xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?wu.withCacheSize(this.cacheSizeBytes):wu.DEFAULT;return new mm(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ig(),cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Xf}}class jm extends Ep{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,_.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Qf&&(s.sharedClientState.syncEngine={jr:I_.bind(null,a),zr:b_.bind(null,a),Wr:yp.bind(null,a),$i:Ag.bind(null,a),Qr:w_.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var p=(0,_.Z)(function*(E){yield function Sg(r,e){return yf.apply(this,arguments)}(s.Vc.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ig();if(!Qf.D(t))throw new Bt(pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class oh{initialize(e,t){var s=this;return(0,_.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>kd(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Lm.bind(null,s.syncEngine),yield lp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new p_}createDatastore(e){const t=df(e.databaseInfo.databaseId),s=new s_(e.databaseInfo);return new zv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,p=x=>kd(this.syncEngine,x,0),E=Jf.D()?new Jf:new rg,new u_(t,s,a,p,E);var t,s,a,p,E}createSyncEngine(e,t){return function(s,a,p,E,x,W,J){const pe=new Gv(s,a,p,E,x,W);return J&&(pe.vc=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_.Z)(function*(t){const s=rn(t);Vt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Ah(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mg(r,e=10240){let t=0;return{read:()=>(0,_.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ef{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $m{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Us,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,_.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,_.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,_.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const p=yield e.$c(a);return new m_(JSON.parse(p),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,_.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,_.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,_.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class C_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Bt(pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,_.Z)(function*(p,E){const x=rn(p),W=Gs(x.serializer)+"/documents",J={documents:E.map(Ut=>Ei(x.serializer,Ut))},pe=yield x.vo("BatchGetDocuments",W,J,E.length),Ve=new Map;pe.forEach(Ut=>{const hn=function rc(r,e){return"found"in e?function(t,s){Ln(!!s.found);const a=wi(t,s.found.name),p=un(s.found.updateTime),E=s.found.createTime?un(s.found.createTime):ar.min(),x=new ms({mapValue:{fields:s.found.fields}});return Ps.newFoundDocument(a,p,E,x)}(r,e):"missing"in e?function(t,s){Ln(!!s.missing),Ln(!!s.readTime);const a=wi(t,s.missing),p=un(s.readTime);return Ps.newNoDocument(a,p)}(r,e):pn()}(x.serializer,Ut);Ve.set(hn.key.toString(),hn)});const yt=[];return E.forEach(Ut=>{const hn=Ve.get(Ut.toString());Ln(!!hn),yt.push(hn)}),yt}),function(p,E){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new nu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const p=_n.fromPath(a);e.mutations.push(new Mc(p,e.precondition(p)))}),yield(s=(0,_.Z)(function*(a,p){const E=rn(a),x=Gs(E.serializer)+"/documents",W={writes:p.map(J=>qn(E.serializer,J))};yield E.Io("Commit",x,W)}),function(a,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pn();t=ar.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Bt(pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ar.min())?yo.exists(!1):yo.updateTime(t):yo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ar.min()))throw new Bt(pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yo.updateTime(t)}return yo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class D_{constructor(e,t,s,a,p){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=p,this.Bc=s.maxAttempts,this.qo=new sg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,_.Z)(function*(){const t=new C_(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(p=>{e.Uc(p)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Ns(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yd(t)}return!1}}class T_{constructor(e,t,s,a){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=sn.UNAUTHENTICATED,this.clientId=Bs.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,_.Z)(function*(x){Vt("FirestoreClient","Received user=",x.uid),yield p.authCredentialListener(x),p.user=x});return function(x){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(Vt("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,_.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=kh(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function wf(r,e){return If.apply(this,arguments)}function If(){return If=(0,_.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),Vt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,_.Z)(function*(p){s.isEqual(p)||(yield ym(e.localStore,p),s=p)});return function(p){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),If.apply(this,arguments)}function wp(r,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,_.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield bp(r);Vt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Nh(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,p)=>Nh(e.remoteStore,p)),r._onlineComponents=e}),Ip.apply(this,arguments)}function Pg(r){return"FirebaseError"===r.name?r.code===pt.FAILED_PRECONDITION||r.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function bp(r){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,_.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Vt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Pg(t))throw t;$i("Error using user provided cache. Falling back to memory cache: "+t),yield wf(r,new Hh)}}else Vt("FirestoreClient","Using default OfflineComponentProvider"),yield wf(r,new Hh);return r._offlineComponents}),Cp.apply(this,arguments)}function bf(r){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,_.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Vt("FirestoreClient","Using user provided OnlineComponentProvider"),yield wp(r,r._uninitializedComponentsProvider._online)):(Vt("FirestoreClient","Using default OnlineComponentProvider"),yield wp(r,new oh))),r._onlineComponents}),Dp.apply(this,arguments)}function xg(r){return bp(r).then(e=>e.persistence)}function ah(r){return bp(r).then(e=>e.localStore)}function ud(r){return bf(r).then(e=>e.remoteStore)}function Ng(r){return bf(r).then(e=>e.syncEngine)}function jd(r){return cd.apply(this,arguments)}function cd(){return cd=(0,_.Z)(function*(r){const e=yield bf(r),t=e.eventManager;return t.onListen=Nm.bind(null,e.syncEngine),t.onUnlisten=v_.bind(null,e.syncEngine),t}),cd.apply(this,arguments)}function A_(r,e,t={}){const s=new Us;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(a,p,E,x,W){const J=new Ef({next:Ve=>{p.enqueueAndForget(()=>vg(a,pe));const yt=Ve.docs.has(E);!yt&&Ve.fromCache?W.reject(new Bt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):yt&&Ve.fromCache&&x&&"server"===x.source?W.reject(new Bt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):W.resolve(Ve)},error:Ve=>W.reject(Ve)}),pe=new wg(Hl(E.path),J,{includeMetadataChanges:!0,Ku:!0});return yg(a,pe)}(yield jd(r),r.asyncQueue,e,t,s)})),s.promise}function zm(r,e,t={}){const s=new Us;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(a,p,E,x,W){const J=new Ef({next:Ve=>{p.enqueueAndForget(()=>vg(a,pe)),Ve.fromCache&&"server"===x.source?W.reject(new Bt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):W.resolve(Ve)},error:Ve=>W.reject(Ve)}),pe=new wg(E,J,{includeMetadataChanges:!0,Ku:!0});return yg(a,pe)}(yield jd(r),r.asyncQueue,e,t,s)})),s.promise}function Lg(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Gm=new Map;function Fg(r,e,t){if(!t)throw new Bt(pt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Vg(r,e,t,s){if(!0===e&&!0===s)throw new Bt(pt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Km(r){if(!_n.isDocumentKey(r))throw new Bt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ug(r){if(_n.isDocumentKey(r))throw new Bt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Cf(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":pn()}function ts(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Bt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(r);throw new Bt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function qm(r,e){if(e<=0)throw new Bt(pt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Zm{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Bt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Lg(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Bt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Bt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Bt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Vc;switch(t.type){case"firstParty":return new ma(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Bt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gm.get(e);t&&(Vt("ComponentProvider","Removing Datastore"),Gm.delete(e),t.terminate())}(this),Promise.resolve()}}function Ym(r,e,t,s={}){var a;const p=(r=ts(r,zh))._getSettings(),E=`${e}:${t}`;if("firestore.googleapis.com"!==p.host&&p.host!==E&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},p),{host:E,ssl:!1})),s.mockUserToken){let x,W;if("string"==typeof s.mockUserToken)x=s.mockUserToken,W=sn.MOCK_USER;else{x=(0,Se.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const J=s.mockUserToken.sub||s.mockUserToken.user_id;if(!J)throw new Bt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");W=new sn(J)}r._authCredentials=new Gu(new bu(x,W))}}class ua{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ua(this.firestore,e,this._key)}}class Iu{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Iu(this.firestore,e,this._query)}}class Oc extends Iu{constructor(e,t,s){super(e,t,Hl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ua(this.firestore,null,new _n(e))}withConverter(e){return new Oc(this.firestore,e,this._path)}}function Bg(r,e,...t){if(r=(0,Se.m9)(r),Fg("collection","path",e),r instanceof zh){const s=wr.fromString(e,...t);return Ug(s),new Oc(r,null,s)}{if(!(r instanceof ua||r instanceof Oc))throw new Bt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wr.fromString(e,...t));return Ug(s),new Oc(r.firestore,null,s)}}function kc(r,e){if(r=ts(r,zh),Fg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Bt(pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Iu(r,null,(t=e,new $l(wr.emptyPath(),t)));var t}function Qm(r,e,...t){if(r=(0,Se.m9)(r),1===arguments.length&&(e=Bs.A()),Fg("doc","path",e),r instanceof zh){const s=wr.fromString(e,...t);return Km(s),new ua(r,null,new _n(s))}{if(!(r instanceof ua||r instanceof Oc))throw new Bt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(wr.fromString(e,...t));return Km(s),new ua(r.firestore,r instanceof Oc?r.converter:null,new _n(s))}}function P_(r,e){return r=(0,Se.m9)(r),e=(0,Se.m9)(e),(r instanceof ua||r instanceof Oc)&&(e instanceof ua||e instanceof Oc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Cc(r,e){return r=(0,Se.m9)(r),e=(0,Se.m9)(e),r instanceof Iu&&e instanceof Iu&&r.firestore===e.firestore&&tt(r._query,e._query)&&r.converter===e.converter}class Lc{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new sg(this,"async_queue_retry"),this.Xc=()=>{const t=cf();t&&Vt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=cf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=cf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Us;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,_.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ll(t))throw t;Vt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,ir("INTERNAL UNHANDLED ERROR: ",function(p){let E=p.message||"";return p.stack&&(E=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),E}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=ih.createAndSchedule(this,e,t,s,p=>this.na(p));return this.zc.push(a),a}Zc(){this.Wc&&pn()}verifyOperationInProgress(){}sa(){var e=this;return(0,_.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ac(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class Xm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Us,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Jm=-1;class Ko extends zh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Lc,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Tp(this),this._firestoreClient.terminate()}}function x_(r,e){const t="object"==typeof r?r:(0,ie.getApp)(),s="string"==typeof r?r:e||"(default)",a=(0,ie._getProvider)(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const p=(0,Se.P0)("firestore");p&&Ym(a,...p)}return a}function Ba(r){return r._firestoreClient||Tp(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Tp(r){var e,t,s;const a=r._freezeSettings(),p=(x=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new gu(r._databaseId,x,r._persistenceKey,(J=a).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,Lg(J.experimentalLongPollingOptions),J.useFetchStreams));var x,J;r._firestoreClient=new T_(r._authCredentials,r._appCheckCredentials,r._queue,p),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Df(r,e){Hg(r=ts(r,Ko));const t=Ba(r);if(t._uninitializedComponentsProvider)throw new Bt(pt.FAILED_PRECONDITION,"SDK cache is already specified.");$i("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new oh;return jg(t,a,new Ep(a,s.cacheSizeBytes,e?.forceOwnership))}function N_(r){Hg(r=ts(r,Ko));const e=Ba(r);if(e._uninitializedComponentsProvider)throw new Bt(pt.FAILED_PRECONDITION,"SDK cache is already specified.");$i("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new oh;return jg(e,s,new jm(s,t.cacheSizeBytes))}function jg(r,e,t){const s=new Us;return r.asyncQueue.enqueue((0,_.Z)(function*(){try{yield wf(r,t),yield wp(r,e),s.resolve()}catch(a){const p=a;if(!Pg(p))throw p;$i("Error enabling indexeddb cache. Falling back to memory cache: "+p),s.reject(p)}})).then(()=>s.promise)}function O_(r){if(r._initialized&&!r._terminated)throw new Bt(pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Us;return r._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(t=(0,_.Z)(function*(s){if(!ci.D())return Promise.resolve();const a=s+"main";yield ci.delete(a)}),function(s){return t.apply(this,arguments)})(Xp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function k_(r){return function(e){const t=new Us;return e.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function Bh(r,e){return Vd.apply(this,arguments)}(yield Ng(e),t)})),t.promise}(Ba(r=ts(r,Ko)))}function ey(r){return function Og(r){return r.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield xg(r),t=yield ud(r);return e.setNetworkEnabled(!0),function(s){const a=rn(s);return a.vu.delete(0),hf(a)}(t)}))}(Ba(r=ts(r,Ko)))}function ty(r){return function S_(r){return r.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield xg(r),t=yield ud(r);return e.setNetworkEnabled(!1),(s=(0,_.Z)(function*(a){const p=rn(a);p.vu.add(0),yield Ah(p),p.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Ba(r=ts(r,Ko)))}function L_(r,e){const t=Ba(r=ts(r,Ko)),s=new Xm;return function Wm(r,e,t,s){const a=function(p,E){let x;return x="string"==typeof p?Cd().encode(p):p,W=function(W,J){if(W instanceof Uint8Array)return Mg(W,J);if(W instanceof ArrayBuffer)return Mg(new Uint8Array(W),J);if(W instanceof ReadableStream)return W.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new $m(W,E);var W}(t,df(e));r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function Bm(r,e,t){const s=rn(r);var a;(a=(0,_.Z)(function*(p,E,x){try{const W=yield E.getMetadata();if(yield function(yt,Ut){const hn=rn(yt),Gn=un(Ut.createTime);return hn.persistence.runTransaction("hasNewerBundle","readonly",rr=>hn.qs.getBundleMetadata(rr,Ut.id)).then(rr=>!!rr&&rr.createTime.compareTo(Gn)>=0)}(p.localStore,W))return yield E.close(),x._completeWith({taskState:"Success",documentsLoaded:(yt=W).totalDocuments,bytesLoaded:yt.totalBytes,totalDocuments:yt.totalDocuments,totalBytes:yt.totalBytes}),Promise.resolve(new Set);x._updateProgress(Rm(W));const J=new y_(W,p.localStore,E.serializer);let pe=yield E.bc();for(;pe;){const yt=yield J.zu(pe);yt&&x._updateProgress(yt),pe=yield E.bc()}const Ve=yield J.complete();return yield Xc(p,Ve.Ju,void 0),yield function(yt,Ut){const hn=rn(yt);return hn.persistence.runTransaction("Save bundle","readwrite",Gn=>hn.qs.saveBundleMetadata(Gn,Ut))}(p.localStore,W),x._completeWith(Ve.progress),Promise.resolve(Ve.Hu)}catch(W){return $i("SyncEngine",`Loading bundle failed with ${W}`),x._failWith(W),Promise.resolve(new Set)}var yt}),function(p,E,x){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Ng(r),a,s)}))}(t,r._databaseId,e,s),s}function ny(r,e){return function M_(r,e){return r.asyncQueue.enqueue((0,_.Z)(function*(){return function(t,s){const a=rn(t);return a.persistence.runTransaction("Get named query","readonly",p=>a.qs.getNamedQuery(p,s))}(yield ah(r),e)}))}(Ba(r=ts(r,Ko)),e).then(t=>t?new Iu(r,null,t.query):null)}function Hg(r){if(r._initialized||r._terminated)throw new Bt(pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dd(go.fromBase64String(e))}catch(t){throw new Bt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dd(go.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Bt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._methodName=e}}class Tf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wn(this._lat,e._lat)||Wn(this._long,e._long)}}const ry=/^__.*__$/;class iy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class zg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sy(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pn()}}class Ap{constructor(e,t,s,a,p,E){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===p&&this.ua(),this.fieldTransforms=p||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Rf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(sy(this.ca)&&ry.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class V_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||df(e)}ya(e,t,s,a=!1){return new Ap({ca:e,methodName:t,ga:s,path:zr.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uh(r){const e=r._freezeSettings(),t=df(r._databaseId);return new V_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Rp(r,e,t,s,a,p={}){const E=r.ya(p.merge||p.mergeFields?2:0,e,t,a);qg("Data must be an object, but it was:",E,s);const x=ly(s,E);let W,J;if(p.merge)W=new $o(E.fieldMask),J=E.fieldTransforms;else if(p.mergeFields){const pe=[];for(const Ve of p.mergeFields){const yt=Wh(e,Ve,t);if(!E.contains(yt))throw new Bt(pt.INVALID_ARGUMENT,`Field '${yt}' is specified in your field mask but missing from your input data.`);Zg(pe,yt)||pe.push(yt)}W=new $o(pe),J=E.fieldTransforms.filter(Ve=>W.covers(Ve.field))}else W=null,J=E.fieldTransforms;return new iy(new ms(x),W,J)}class Sf extends $d{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sf}}function oy(r,e,t){return new Ap({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wg extends $d{_toFieldTransform(e){return new Gc(e.path,new vu)}isEqual(e){return e instanceof Wg}}class U_ extends $d{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oy(this,e,!0),s=this.pa.map(p=>ch(p,t)),a=new Ru(s);return new Gc(e.path,a)}isEqual(e){return this===e}}class B_ extends $d{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oy(this,e,!0),s=this.pa.map(p=>ch(p,t)),a=new Fu(s);return new Gc(e.path,a)}isEqual(e){return this===e}}class j_ extends $d{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Mu(e.serializer,zc(e.serializer,this.Ia));return new Gc(e.path,t)}isEqual(e){return this===e}}function Gg(r,e,t,s){const a=r.ya(1,e,t);qg("Data must be an object, but it was:",a,s);const p=[],E=ms.empty();Xa(s,(W,J)=>{const pe=Af(e,W,t);J=(0,Se.m9)(J);const Ve=a.da(pe);if(J instanceof Sf)p.push(pe);else{const yt=ch(J,Ve);null!=yt&&(p.push(pe),E.set(pe,yt))}});const x=new $o(p);return new zg(E,x,a.fieldTransforms)}function Kg(r,e,t,s,a,p){const E=r.ya(1,e,t),x=[Wh(e,s,t)],W=[a];if(p.length%2!=0)throw new Bt(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let yt=0;yt<p.length;yt+=2)x.push(Wh(e,p[yt])),W.push(p[yt+1]);const J=[],pe=ms.empty();for(let yt=x.length-1;yt>=0;--yt)if(!Zg(J,x[yt])){const Ut=x[yt];let hn=W[yt];hn=(0,Se.m9)(hn);const Gn=E.da(Ut);if(hn instanceof Sf)J.push(Ut);else{const rr=ch(hn,Gn);null!=rr&&(J.push(Ut),pe.set(Ut,rr))}}const Ve=new $o(J);return new zg(pe,Ve,E.fieldTransforms)}function ay(r,e,t,s=!1){return ch(t,r.ya(s?4:3,e))}function ch(r,e){if(uy(r=(0,Se.m9)(r)))return qg("Unsupported field value:",e,r),ly(r,e);if(r instanceof $d)return function(t,s){if(!sy(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let p=0;for(const E of t){let x=ch(E,s.wa(p));null==x&&(x={nullValue:"NULL_VALUE"}),a.push(x),p++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Se.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zc(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=ps.fromDate(t);return{timestampValue:Ar(s.serializer,a)}}if(t instanceof ps){const a=new ps(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ar(s.serializer,a)}}if(t instanceof Tf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof dd)return{bytesValue:Ci(s.serializer,t._byteString)};if(t instanceof ua){const a=s.databaseId,p=t.firestore._databaseId;if(!p.isEqual(a))throw s._a(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:es(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Cf(t)}`)}(r,e)}function ly(r,e){const t={};return hc(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xa(r,(s,a)=>{const p=ch(a,e.ha(s));null!=p&&(t[s]=p)}),{mapValue:{fields:t}}}function uy(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof ps||r instanceof Tf||r instanceof dd||r instanceof ua||r instanceof $d)}function qg(r,e,t){if(!uy(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Cf(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function Wh(r,e,t){if((e=(0,Se.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return Af(r,e);throw Rf("Field path arguments must be of type string or ",r,!1,void 0,t)}const cy=new RegExp("[~\\*/\\[\\]]");function Af(r,e,t){if(e.search(cy)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Rf(r,e,t,s,a){const p=s&&!s.isEmpty(),E=void 0!==a;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let W="";return(p||E)&&(W+=" (found",p&&(W+=` in field ${s}`),E&&(W+=` in document ${a}`),W+=")"),new Bt(pt.INVALID_ARGUMENT,x+r+W)}function Zg(r,e){return r.some(t=>t.isEqual(e))}class Gh{constructor(e,t,s,a,p){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new ua(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dy extends Gh{data(){return super.data()}}function Mf(r,e){return"string"==typeof e?Af(r,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function Yg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Bt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class Kh extends Mp{}function dh(r,e,...t){let s=[];e instanceof Mp&&s.push(e),s=s.concat(t),function(a){const p=a.filter(x=>x instanceof Fc).length,E=a.filter(x=>x instanceof Pf).length;if(p>1||p>0&&E>0)throw new Bt(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Pf extends Kh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Pf(e,t,s)}_apply(e){const t=this._parse(e);return Qg(e._query,t),new Iu(e.firestore,e.converter,ne(e._query,t))}_parse(e){const t=uh(e.firestore);return function(a,p,E,x,W,J,pe){let Ve;if(W.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new Bt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){G_(pe,J);const yt=[];for(const Ut of pe)yt.push(ca(x,a,Ut));Ve={arrayValue:{values:yt}}}else Ve=ca(x,a,pe)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||G_(pe,J),Ve=ay(E,"where",pe,"in"===J||"not-in"===J);return _e.create(W,J,Ve)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $_(r,e,t){const s=e,a=Mf("where",r);return Pf._create(a,s,t)}class Fc extends Mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:ke.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let p=s;const E=a.getFlattenedFilters();for(const x of E)Qg(p,x),p=ne(p,x)}(e._query,t),new Iu(e.firestore,e.converter,ne(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fy extends Kh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fy(e,t)}_apply(e){const t=function(s,a,p){if(null!==s.startAt)throw new Bt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Bt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new M(a,p);return function(x,W){if(null===Ju(x)){const J=A(x);null!==J&&Xg(0,J,W.field)}}(s,E),E}(e._query,this._field,this._direction);return new Iu(e.firestore,e.converter,function(s,a){const p=s.explicitOrderBy.concat([a]);return new $l(s.path,s.collectionGroup,p,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function py(r,e="asc"){const t=e,s=Mf("orderBy",r);return fy._create(s,t)}class xf extends Kh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new xf(e,t,s)}_apply(e){return new Iu(e.firestore,e.converter,fe(e._query,this._limit,this._limitType))}}function Zv(r){return qm("limit",r),xf._create("limit",r,"F")}function ni(r){return qm("limitToLast",r),xf._create("limitToLast",r,"L")}class Pp extends Kh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Pp(e,t,s)}_apply(e){const t=Nf(e,this.type,this._docOrFields,this._inclusive);return new Iu(e.firestore,e.converter,(a=t,new $l((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function H_(...r){return Pp._create("startAt",r,!0)}function z_(...r){return Pp._create("startAfter",r,!1)}class fd extends Kh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new fd(e,t,s)}_apply(e){const t=Nf(e,this.type,this._docOrFields,this._inclusive);return new Iu(e.firestore,e.converter,(a=t,new $l((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function W_(...r){return fd._create("endBefore",r,!1)}function xp(...r){return fd._create("endAt",r,!0)}function Nf(r,e,t,s){if(t[0]=(0,Se.m9)(t[0]),t[0]instanceof Gh)return function(a,p,E,x,W){if(!x)throw new Bt(pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const J=[];for(const pe of w(a))if(pe.field.isKeyField())J.push(Ul(p,x.key));else{const Ve=x.data.field(pe.field);if(Jl(Ve))throw new Bt(pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ve){const yt=pe.field.canonicalString();throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${yt}' (used as the orderBy) does not exist.`)}J.push(Ve)}return new jl(J,W)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=uh(r.firestore);return function(p,E,x,W,J,pe){const Ve=p.explicitOrderBy;if(J.length>Ve.length)throw new Bt(pt.INVALID_ARGUMENT,`Too many arguments provided to ${W}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const yt=[];for(let Ut=0;Ut<J.length;Ut++){const hn=J[Ut];if(Ve[Ut].field.isKeyField()){if("string"!=typeof hn)throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${W}(), but got a ${typeof hn}`);if(!m(p)&&-1!==hn.indexOf("/"))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${W}() must be a plain document ID, but '${hn}' contains a slash.`);const Gn=p.path.child(wr.fromString(hn));if(!_n.isDocumentKey(Gn))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${W}() must result in a valid document path, but '${Gn}' is not because it contains an odd number of segments.`);const rr=new _n(Gn);yt.push(Ul(E,rr))}else{const Gn=ay(x,W,hn);yt.push(Gn)}}return new jl(yt,pe)}(r._query,r.firestore._databaseId,a,e,t,s)}}function ca(r,e,t){if("string"==typeof(t=(0,Se.m9)(t))){if(""===t)throw new Bt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m(e)&&-1!==t.indexOf("/"))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(wr.fromString(t));if(!_n.isDocumentKey(s))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ul(r,new _n(s))}if(t instanceof ua)return Ul(r,t._key);throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function G_(r,e){if(!Array.isArray(r)||0===r.length)throw new Bt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qg(r,e){if(e.isInequality()){const s=A(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const p=Ju(r);null!==p&&Xg(0,a,p)}const t=function(s,a){for(const p of s)for(const E of p.getFlattenedFilters())if(a.indexOf(E.op)>=0)return E.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Bt(pt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Xg(r,e,t){if(!t.isEqual(e))throw new Bt(pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Np{convertValue(e,t="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xa(e,(a,p)=>{s[a]=this.convertValue(p,t)}),s}convertGeoPoint(e){return new Tf(_s(e.latitude),_s(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=el(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const t=Xl(e);return new ps(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=wr.fromString(e);Ln(oc(s));const a=new Fl(s.get(1),s.get(3)),p=new _n(s.popFirst(5));return a.isEqual(t)||ir(`Document ${p} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function Of(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class my extends Np{constructor(e){super(),this.firestore=e}convertBytes(e){return new dd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ua(this.firestore,null,t)}}class hh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fh extends Gh{constructor(e,t,s,a,p,E){super(e,t,s,a,E),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Mf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class kf extends fh{data(e={}){return super.data(e)}}class Jc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new hh(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new kf(this._firestore,this._userDataWriter,s.key,s,new hh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let p=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new kf(s._firestore,s._userDataWriter,E.doc.key,E.doc,new hh(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:p++}))}{let p=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>a||3!==E.type).map(E=>{const x=new kf(s._firestore,s._userDataWriter,E.doc.key,E.doc,new hh(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let W=-1,J=-1;return 0!==E.type&&(W=p.indexOf(E.doc.key),p=p.delete(E.doc.key)),1!==E.type&&(p=p.add(E.doc),J=p.indexOf(E.doc.key)),{type:yy(E.type),doc:x,oldIndex:W,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yy(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pn()}}function _y(r,e){return r instanceof fh&&e instanceof fh?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Jc&&e instanceof Jc&&r._firestore===e._firestore&&Cc(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function vy(r){r=ts(r,ua);const e=ts(r.firestore,Ko);return A_(Ba(e),r._key).then(t=>Cy(e,r,t))}class Hd extends Np{constructor(e){super(),this.firestore=e}convertBytes(e){return new dd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ua(this.firestore,null,t)}}function Lf(r){r=ts(r,ua);const e=ts(r.firestore,Ko),t=Ba(e),s=new Hd(e);return function kg(r,e){const t=new Us;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(s=(0,_.Z)(function*(a,p,E){try{const x=yield function(W,J){const pe=rn(W);return pe.persistence.runTransaction("read document","readonly",Ve=>pe.localDocuments.getDocument(Ve,J))}(a,p);x.isFoundDocument()?E.resolve(x):x.isNoDocument()?E.resolve(null):E.reject(new Bt(pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const W=kh(x,`Failed to get document '${p} from cache`);E.reject(W)}}),function(a,p,E){return s.apply(this,arguments)})(yield ah(r),e,t);var s})),t.promise}(t,r._key).then(a=>new fh(e,s,r._key,a,new hh(null!==a&&a.hasLocalMutations,!0),r.converter))}function Ff(r){r=ts(r,ua);const e=ts(r.firestore,Ko);return A_(Ba(e),r._key,{source:"server"}).then(t=>Cy(e,r,t))}function Z_(r){r=ts(r,Iu);const e=ts(r.firestore,Ko),t=Ba(e),s=new Hd(e);return Yg(r._query),zm(t,r._query).then(a=>new Jc(e,s,r,a))}function Y_(r){r=ts(r,Iu);const e=ts(r.firestore,Ko),t=Ba(e),s=new Hd(e);return function Kv(r,e){const t=new Us;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(s=(0,_.Z)(function*(a,p,E){try{const x=yield ng(a,p,!0),W=new Ig(p,x.ir),J=W.sc(x.documents),pe=W.applyChanges(J,!1);E.resolve(pe.snapshot)}catch(x){const W=kh(x,`Failed to execute query '${p} against cache`);E.reject(W)}}),function(a,p,E){return s.apply(this,arguments)})(yield ah(r),e,t);var s})),t.promise}(t,r._query).then(a=>new Jc(e,s,r,a))}function Q_(r){r=ts(r,Iu);const e=ts(r.firestore,Ko),t=Ba(e),s=new Hd(e);return zm(t,r._query,{source:"server"}).then(a=>new Jc(e,s,r,a))}function Ey(r,e,t){r=ts(r,ua);const s=ts(r.firestore,Ko),a=Of(r.converter,e,t);return qh(s,[Rp(uh(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,yo.none())])}function wy(r,e,t,...s){r=ts(r,ua);const a=ts(r.firestore,Ko),p=uh(a);let E;return E="string"==typeof(e=(0,Se.m9)(e))||e instanceof hd?Kg(p,"updateDoc",r._key,e,t,s):Gg(p,"updateDoc",r._key,e),qh(a,[E.toMutation(r._key,yo.exists(!0))])}function Iy(r){return qh(ts(r.firestore,Ko),[new nu(r._key,yo.none())])}function X_(r,e){const t=ts(r.firestore,Ko),s=Qm(r),a=Of(r.converter,e);return qh(t,[Rp(uh(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,yo.exists(!1))]).then(()=>s)}function by(r,...e){var t,s,a;r=(0,Se.m9)(r);let p={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||ac(e[E])||(p=e[E],E++);const x={includeMetadataChanges:p.includeMetadataChanges};if(ac(e[E])){const Ve=e[E];e[E]=null===(t=Ve.next)||void 0===t?void 0:t.bind(Ve),e[E+1]=null===(s=Ve.error)||void 0===s?void 0:s.bind(Ve),e[E+2]=null===(a=Ve.complete)||void 0===a?void 0:a.bind(Ve)}let W,J,pe;if(r instanceof ua)J=ts(r.firestore,Ko),pe=Hl(r._key.path),W={next:Ve=>{e[E]&&e[E](Cy(J,r,Ve))},error:e[E+1],complete:e[E+2]};else{const Ve=ts(r,Iu);J=ts(Ve.firestore,Ko),pe=Ve._query;const yt=new Hd(J);W={next:Ut=>{e[E]&&e[E](new Jc(J,yt,Ve,Ut))},error:e[E+1],complete:e[E+2]},Yg(r._query)}return function(Ve,yt,Ut,hn){const Gn=new Ef(hn),rr=new wg(yt,Gn,Ut);return Ve.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return yg(yield jd(Ve),rr)})),()=>{Gn.Dc(),Ve.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return vg(yield jd(Ve),rr)}))}}(Ba(J),pe,x,W)}function J_(r,e){return function R_(r,e){const t=new Ef(e);return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return s=yield jd(r),a=t,rn(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return s=yield jd(r),a=t,void rn(s).ku.delete(a);var s,a}))}}(Ba(r=ts(r,Ko)),ac(e)?e:{next:e})}function qh(r,e){return function(t,s){const a=new Us;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function E_(r,e,t){return bc.apply(this,arguments)}(yield Ng(t),s,a)})),a.promise}(Ba(r),e)}function Cy(r,e,t){const s=t.docs.get(e._key),a=new Hd(r);return new fh(r,a,e._key,s,new hh(t.hasPendingWrites,t.fromCache),e.converter)}const sv={maxAttempts:5};class Jg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uh(e)}set(e,t,s){this._verifyNotCommitted();const a=zd(e,this._firestore),p=Of(a.converter,t,s),E=Rp(this._dataReader,"WriteBatch.set",a._key,p,null!==a.converter,s);return this._mutations.push(E.toMutation(a._key,yo.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const p=zd(e,this._firestore);let E;return E="string"==typeof(t=(0,Se.m9)(t))||t instanceof hd?Kg(this._dataReader,"WriteBatch.update",p._key,t,s,a):Gg(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(E.toMutation(p._key,yo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zd(e,this._firestore);return this._mutations=this._mutations.concat(new nu(t._key,yo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Bt(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zd(r,e){if((r=(0,Se.m9)(r)).firestore!==e)throw new Bt(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class ov extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=uh(e)}get(e){const t=zd(e,this._firestore),s=new my(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return pn();const p=a[0];if(p.isFoundDocument())return new Gh(this._firestore,s,p.key,p,t.converter);if(p.isNoDocument())return new Gh(this._firestore,s,t._key,null,t.converter);throw pn()})}set(e,t,s){const a=zd(e,this._firestore),p=Of(a.converter,t,s),E=Rp(this._dataReader,"Transaction.set",a._key,p,null!==a.converter,s);return this._transaction.set(a._key,E),this}update(e,t,s,...a){const p=zd(e,this._firestore);let E;return E="string"==typeof(t=(0,Se.m9)(t))||t instanceof hd?Kg(this._dataReader,"Transaction.update",p._key,t,s,a):Gg(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,E),this}delete(e){const t=zd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zd(e,this._firestore),s=new Hd(this._firestore);return super.get(e).then(a=>new fh(this._firestore,s,t._key,a._document,new hh(!1,!1),t.converter))}}function Vf(r,e,t){r=ts(r,Ko);const s=Object.assign(Object.assign({},sv),t);return function(a){if(a.maxAttempts<1)throw new Bt(pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,p,E){const x=new Us;return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const W=yield function Hm(r){return bf(r).then(e=>e.datastore)}(a);new D_(a.asyncQueue,W,E,p,x).run()})),x.promise}(Ba(r),a=>e(new ov(r,a)),s)}function av(){return new Sf("deleteField")}function Ty(){return new Wg("serverTimestamp")}function lv(...r){return new U_("arrayUnion",r)}function Sy(...r){return new B_("arrayRemove",r)}function uv(r){return new j_("increment",r)}!function(r,e=!0){Si=ie.SDK_VERSION,(0,ie._registerComponent)(new z.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const p=t.getProvider("app").getImmediate(),E=new Ko(new cu(t.getProvider("auth-internal")),new Cu(t.getProvider("app-check-internal")),function(x,W){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Bt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(x.options.projectId,W)}(p,s),p);return a=Object.assign({useFetchStreams:e},a),E._setSettings(a),E},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ft,"3.13.0",r),(0,ie.registerVersion)(Ft,"3.13.0","esm2017")}()},6961:(fn,lt,K)=>{K.d(lt,{$Y:()=>Lr,B0:()=>Bi,FN:()=>ea,IX:()=>He,Jt:()=>to,UJ:()=>si,Ym:()=>$a,a1:()=>ha,aF:()=>Pa,bm:()=>jn,cF:()=>ro,g6:()=>no,gE:()=>br,gH:()=>on,iH:()=>xo,oq:()=>vo,pb:()=>Yo,qm:()=>Yn,sd:()=>xs,y4:()=>Zt});var _=K(5861),ie=K(6881),z=K(2090),Le=K(4859);const Se="firebasestorage.googleapis.com",je="storageBucket";class he extends z.ZR{constructor(re,Te,Fe=0){super(Oe(re),`Firebase Storage: ${Te} (${Oe(re)})`),this.status_=Fe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,he.prototype)}get status(){return this.status_}set status(re){this.status_=re}_codeEquals(re){return Oe(re)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(re){this.customData.serverResponse=re,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var we=(()=>{return(X=we||(we={})).UNKNOWN="unknown",X.OBJECT_NOT_FOUND="object-not-found",X.BUCKET_NOT_FOUND="bucket-not-found",X.PROJECT_NOT_FOUND="project-not-found",X.QUOTA_EXCEEDED="quota-exceeded",X.UNAUTHENTICATED="unauthenticated",X.UNAUTHORIZED="unauthorized",X.UNAUTHORIZED_APP="unauthorized-app",X.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",X.INVALID_CHECKSUM="invalid-checksum",X.CANCELED="canceled",X.INVALID_EVENT_NAME="invalid-event-name",X.INVALID_URL="invalid-url",X.INVALID_DEFAULT_BUCKET="invalid-default-bucket",X.NO_DEFAULT_BUCKET="no-default-bucket",X.CANNOT_SLICE_BLOB="cannot-slice-blob",X.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",X.NO_DOWNLOAD_URL="no-download-url",X.INVALID_ARGUMENT="invalid-argument",X.INVALID_ARGUMENT_COUNT="invalid-argument-count",X.APP_DELETED="app-deleted",X.INVALID_ROOT_OPERATION="invalid-root-operation",X.INVALID_FORMAT="invalid-format",X.INTERNAL_ERROR="internal-error",X.UNSUPPORTED_ENVIRONMENT="unsupported-environment",we;var X})();function Oe(X){return"storage/"+X}function dt(){return new he(we.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function At(){return new he(we.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function It(){return new he(we.CANCELED,"User canceled the upload/download.")}function Lt(){return new he(we.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function on(X){return new he(we.INVALID_ARGUMENT,X)}function Yt(){return new he(we.APP_DELETED,"The Firebase app was deleted.")}function Zt(X){return new he(we.INVALID_ROOT_OPERATION,"The operation '"+X+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gt(X,re){return new he(we.INVALID_FORMAT,"String does not match format '"+X+"': "+re)}function Wr(X){throw new he(we.INTERNAL_ERROR,"Internal error: "+X)}class br{constructor(re,Te){this.bucket=re,this.path_=Te}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const re=encodeURIComponent;return"/b/"+re(this.bucket)+"/o/"+re(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(re,Te){let Fe;try{Fe=br.makeFromUrl(re,Te)}catch{return new br(re,"")}if(""===Fe.path)return Fe;throw function Pe(X){return new he(we.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+X+"'.")}(re)}static makeFromUrl(re,Te){let Fe=null;const qe="([A-Za-z0-9.\\-_]+)",xn=new RegExp("^gs://"+qe+"(/(.*))?$","i");function or(li){li.path_=decodeURIComponent(li.path)}const Gi=Te.replace(/[.]/g,"\\."),ki=[{regex:xn,indices:{bucket:1,path:3},postModify:function Tt(li){"/"===li.path.charAt(li.path.length-1)&&(li.path_=li.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Gi}/v[A-Za-z0-9_]+/b/${qe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:or},{regex:new RegExp(`^https?://${Te===Se?"(?:storage.googleapis.com|storage.cloud.google.com)":Te}/${qe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:or}];for(let li=0;li<ki.length;li++){const xr=ki[li],jr=xr.regex.exec(re);if(jr){let hs=jr[xr.indices.path];hs||(hs=""),Fe=new br(jr[xr.indices.bucket],hs),xr.postModify(Fe);break}}if(null==Fe)throw function Ze(X){return new he(we.INVALID_URL,"Invalid URL '"+X+"'.")}(re);return Fe}}class Vn{constructor(re){this.promise_=Promise.reject(re)}getPromise(){return this.promise_}cancel(re=!1){}}function mt(X){return"string"==typeof X||X instanceof String}function Ot(X){return Qt()&&X instanceof Blob}function Qt(){return typeof Blob<"u"&&!(0,z.UG)()}function Rt(X,re,Te,Fe){if(Fe<re)throw on(`Invalid value for '${X}'. Expected ${re} or greater.`);if(Fe>Te)throw on(`Invalid value for '${X}'. Expected ${Te} or less.`)}function nn(X,re,Te){let Fe=re;return null==Te&&(Fe=`https://${re}`),`${Te}://${Fe}/v0${X}`}function Cn(X){const re=encodeURIComponent;let Te="?";for(const Fe in X)X.hasOwnProperty(Fe)&&(Te=Te+(re(Fe)+"=")+re(X[Fe])+"&");return Te=Te.slice(0,-1),Te}var On=(()=>{return(X=On||(On={}))[X.NO_ERROR=0]="NO_ERROR",X[X.NETWORK_ERROR=1]="NETWORK_ERROR",X[X.ABORT=2]="ABORT",On;var X})();function gr(X,re){const Te=X>=500&&X<600,qe=-1!==[408,429].indexOf(X),Tt=-1!==re.indexOf(X);return Te||qe||Tt}class Qn{constructor(re,Te,Fe,qe,Tt,Kt,xn,dn,or,Pr,Gi,Rs=!0){this.url_=re,this.method_=Te,this.headers_=Fe,this.body_=qe,this.successCodes_=Tt,this.additionalRetryCodes_=Kt,this.callback_=xn,this.errorCallback_=dn,this.timeout_=or,this.progressCallback_=Pr,this.connectionFactory_=Gi,this.retry=Rs,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((xi,bi)=>{this.resolve_=xi,this.reject_=bi,this.start_()})}start_(){const Te=(Fe,qe)=>{const Tt=this.resolve_,Kt=this.reject_,xn=qe.connection;if(qe.wasSuccessCode)try{const dn=this.callback_(xn,xn.getResponse());!function Ye(X){return void 0!==X}(dn)?Tt():Tt(dn)}catch(dn){Kt(dn)}else if(null!==xn){const dn=dt();dn.serverResponse=xn.getErrorText(),Kt(this.errorCallback_?this.errorCallback_(xn,dn):dn)}else Kt(qe.canceled?this.appDelete_?Yt():It():At())};this.canceled_?Te(0,new _r(!1,null,!0)):this.backoffId_=function Jn(X,re,Te){let Fe=1,qe=null,Tt=null,Kt=!1,xn=0;function dn(){return 2===xn}let or=!1;function Pr(...gi){or||(or=!0,re.apply(null,gi))}function Gi(gi){qe=setTimeout(()=>{qe=null,X(xi,dn())},gi)}function Rs(){Tt&&clearTimeout(Tt)}function xi(gi,...ks){if(or)return void Rs();if(gi)return Rs(),void Pr.call(null,gi,...ks);if(dn()||Kt)return Rs(),void Pr.call(null,gi,...ks);let ki;Fe<64&&(Fe*=2),1===xn?(xn=2,ki=0):ki=1e3*(Fe+Math.random()),Gi(ki)}let bi=!1;function Vr(gi){bi||(bi=!0,Rs(),!or&&(null!==qe?(gi||(xn=2),clearTimeout(qe),Gi(0)):gi||(xn=1)))}return Gi(0),Tt=setTimeout(()=>{Kt=!0,Vr(!0)},Te),Vr}((Fe,qe)=>{if(qe)return void Fe(!1,new _r(!1,null,!0));const Tt=this.connectionFactory_();this.pendingConnection_=Tt;const Kt=xn=>{null!==this.progressCallback_&&this.progressCallback_(xn.loaded,xn.lengthComputable?xn.total:-1)};null!==this.progressCallback_&&Tt.addUploadProgressListener(Kt),Tt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Tt.removeUploadProgressListener(Kt),this.pendingConnection_=null;const xn=Tt.getErrorCode()===On.NO_ERROR,dn=Tt.getStatus();if(!xn||gr(dn,this.additionalRetryCodes_)&&this.retry){const Pr=Tt.getErrorCode()===On.ABORT;return void Fe(!1,new _r(!1,null,Pr))}const or=-1!==this.successCodes_.indexOf(dn);Fe(!0,new _r(or,Tt))})},Te,this.timeout_)}getPromise(){return this.promise_}cancel(re){this.canceled_=!0,this.appDelete_=re||!1,null!==this.backoffId_&&function Ke(X){X(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class _r{constructor(re,Te,Fe){this.wasSuccessCode=re,this.connection=Te,this.canceled=!!Fe}}function Hn(...X){const re=function Xt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==re){const Te=new re;for(let Fe=0;Fe<X.length;Fe++)Te.append(X[Fe]);return Te.getBlob()}if(Qt())return new Blob(X);throw new he(we.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ri{constructor(re,Te){this.data=re,this.contentType=Te||null}}function Yn(X,re){switch(X){case jn.RAW:return new ri(er(re));case jn.BASE64:case jn.BASE64URL:return new ri(An(X,re));case jn.DATA_URL:return new ri(function ii(X){const re=new Yr(X);return re.base64?An(jn.BASE64,re.rest):function cn(X){let re;try{re=decodeURIComponent(X)}catch{throw Gt(jn.DATA_URL,"Malformed data URL.")}return er(re)}(re.rest)}(re),function wn(X){return new Yr(X).contentType}(re))}throw dt()}function er(X){const re=[];for(let Te=0;Te<X.length;Te++){let Fe=X.charCodeAt(Te);Fe<=127?re.push(Fe):Fe<=2047?re.push(192|Fe>>6,128|63&Fe):55296==(64512&Fe)?Te<X.length-1&&56320==(64512&X.charCodeAt(Te+1))?(Fe=65536|(1023&Fe)<<10|1023&X.charCodeAt(++Te),re.push(240|Fe>>18,128|Fe>>12&63,128|Fe>>6&63,128|63&Fe)):re.push(239,191,189):56320==(64512&Fe)?re.push(239,191,189):re.push(224|Fe>>12,128|Fe>>6&63,128|63&Fe)}return new Uint8Array(re)}function An(X,re){switch(X){case jn.BASE64:{const qe=-1!==re.indexOf("-"),Tt=-1!==re.indexOf("_");if(qe||Tt)throw Gt(X,"Invalid character '"+(qe?"-":"_")+"' found: is it base64url encoded?");break}case jn.BASE64URL:{const qe=-1!==re.indexOf("+"),Tt=-1!==re.indexOf("/");if(qe||Tt)throw Gt(X,"Invalid character '"+(qe?"+":"/")+"' found: is it base64 encoded?");re=re.replace(/-/g,"+").replace(/_/g,"/");break}}let Te;try{Te=function Dr(X){if(typeof atob>"u")throw function $t(X){return new he(we.UNSUPPORTED_ENVIRONMENT,`${X} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(X)}(re)}catch(qe){throw qe.message.includes("polyfill")?qe:Gt(X,"Invalid character found")}const Fe=new Uint8Array(Te.length);for(let qe=0;qe<Te.length;qe++)Fe[qe]=Te.charCodeAt(qe);return Fe}class Yr{constructor(re){this.base64=!1,this.contentType=null;const Te=re.match(/^data:([^,]+)?,/);if(null===Te)throw Gt(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Fe=Te[1]||null;null!=Fe&&(this.base64=function Qr(X,re){return X.length>=re.length&&X.substring(X.length-re.length)===re}(Fe,";base64"),this.contentType=this.base64?Fe.substring(0,Fe.length-7):Fe),this.rest=re.substring(re.indexOf(",")+1)}}class si{constructor(re,Te){let Fe=0,qe="";Ot(re)?(this.data_=re,Fe=re.size,qe=re.type):re instanceof ArrayBuffer?(Te?this.data_=new Uint8Array(re):(this.data_=new Uint8Array(re.byteLength),this.data_.set(new Uint8Array(re))),Fe=this.data_.length):re instanceof Uint8Array&&(Te?this.data_=re:(this.data_=new Uint8Array(re.length),this.data_.set(re)),Fe=re.length),this.size_=Fe,this.type_=qe}size(){return this.size_}type(){return this.type_}slice(re,Te){if(Ot(this.data_)){const qe=function yi(X,re,Te){return X.webkitSlice?X.webkitSlice(re,Te):X.mozSlice?X.mozSlice(re,Te):X.slice?X.slice(re,Te):null}(this.data_,re,Te);return null===qe?null:new si(qe)}{const Fe=new Uint8Array(this.data_.buffer,re,Te-re);return new si(Fe,!0)}}static getBlob(...re){if(Qt()){const Te=re.map(Fe=>Fe instanceof si?Fe.data_:Fe);return new si(Hn.apply(null,Te))}{const Te=re.map(Kt=>mt(Kt)?Yn(jn.RAW,Kt).data:Kt.data_);let Fe=0;Te.forEach(Kt=>{Fe+=Kt.byteLength});const qe=new Uint8Array(Fe);let Tt=0;return Te.forEach(Kt=>{for(let xn=0;xn<Kt.length;xn++)qe[Tt++]=Kt[xn]}),new si(qe,!0)}}uploadData(){return this.data_}}function Xr(X){let re;try{re=JSON.parse(X)}catch{return null}return function ze(X){return"object"==typeof X&&!Array.isArray(X)}(re)?re:null}function $n(X){const re=X.lastIndexOf("/",X.length-2);return-1===re?X:X.slice(re+1)}function Nr(X,re){return re}class an{constructor(re,Te,Fe,qe){this.server=re,this.local=Te||re,this.writable=!!Fe,this.xform=qe||Nr}}let Jr=null;function Mi(){if(Jr)return Jr;const X=[];X.push(new an("bucket")),X.push(new an("generation")),X.push(new an("metageneration")),X.push(new an("name","fullPath",!0));const Te=new an("name");Te.xform=function re(Tt,Kt){return function Di(X){return!mt(X)||X.length<2?X:$n(X)}(Kt)},X.push(Te);const qe=new an("size");return qe.xform=function Fe(Tt,Kt){return void 0!==Kt?Number(Kt):Kt},X.push(qe),X.push(new an("timeCreated")),X.push(new an("updated")),X.push(new an("md5Hash",null,!0)),X.push(new an("cacheControl",null,!0)),X.push(new an("contentDisposition",null,!0)),X.push(new an("contentEncoding",null,!0)),X.push(new an("contentLanguage",null,!0)),X.push(new an("contentType",null,!0)),X.push(new an("metadata","customMetadata",!0)),Jr=X,Jr}function Pi(X,re,Te){const Fe=Xr(re);return null===Fe?null:function ss(X,re,Te){const Fe={type:"file"},qe=Te.length;for(let Tt=0;Tt<qe;Tt++){const Kt=Te[Tt];Fe[Kt.local]=Kt.xform(Fe,re[Kt.server])}return function Yi(X,re){Object.defineProperty(X,"ref",{get:function Te(){const Tt=new br(X.bucket,X.fullPath);return re._makeStorageReference(Tt)}})}(Fe,X),Fe}(X,Fe,Te)}function Ne(X,re){const Te={},Fe=re.length;for(let qe=0;qe<Fe;qe++){const Tt=re[qe];Tt.writable&&(Te[Tt.server]=X[Tt.local])}return JSON.stringify(Te)}const Re="prefixes",ce="items";class Be{constructor(re,Te,Fe,qe){this.url=re,this.method=Te,this.handler=Fe,this.timeout=qe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function be(X){if(!X)throw dt()}function De(X,re){return function Te(Fe,qe){const Tt=Pi(X,qe,re);return be(null!==Tt),Tt}}function it(X){return function re(Te,Fe){let qe;return qe=401===Te.getStatus()?Te.getErrorText().includes("Firebase App Check token is invalid")?function ct(){return new he(we.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function qt(){return new he(we.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Te.getStatus()?function Mt(X){return new he(we.QUOTA_EXCEEDED,"Quota for bucket '"+X+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(X.bucket):403===Te.getStatus()?function _t(X){return new he(we.UNAUTHORIZED,"User does not have permission to access '"+X+"'.")}(X.path):Fe,qe.status=Te.getStatus(),qe.serverResponse=Fe.serverResponse,qe}}function Pt(X){const re=it(X);return function Te(Fe,qe){let Tt=re(Fe,qe);return 404===Fe.getStatus()&&(Tt=function ht(X){return new he(we.OBJECT_NOT_FOUND,"Object '"+X+"' does not exist.")}(X.path)),Tt.serverResponse=qe.serverResponse,Tt}}function Dn(X,re,Te){const qe=nn(re.fullServerUrl(),X.host,X._protocol),Kt=X.maxOperationRetryTime,xn=new Be(qe,"GET",De(X,Te),Kt);return xn.errorHandler=Pt(re),xn}function Tn(X,re,Te,Fe,qe){const Tt={};Tt.prefix=re.isRoot?"":re.path+"/",Te&&Te.length>0&&(Tt.delimiter=Te),Fe&&(Tt.pageToken=Fe),qe&&(Tt.maxResults=qe);const xn=nn(re.bucketOnlyServerUrl(),X.host,X._protocol),or=X.maxOperationRetryTime,Pr=new Be(xn,"GET",function ve(X,re){return function Te(Fe,qe){const Tt=function oe(X,re,Te){const Fe=Xr(Te);return null===Fe?null:function ye(X,re,Te){const Fe={prefixes:[],items:[],nextPageToken:Te.nextPageToken};if(Te[Re])for(const qe of Te[Re]){const Tt=qe.replace(/\/$/,""),Kt=X._makeStorageReference(new br(re,Tt));Fe.prefixes.push(Kt)}if(Te[ce])for(const qe of Te[ce]){const Tt=X._makeStorageReference(new br(re,qe.name));Fe.items.push(Tt)}return Fe}(X,re,Fe)}(X,re,qe);return be(null!==Tt),Tt}}(X,re.bucket),or);return Pr.urlParams=Tt,Pr.errorHandler=it(re),Pr}function yn(X,re,Te){const Fe=Object.assign({},Te);return Fe.fullPath=X.path,Fe.size=re.size(),Fe.contentType||(Fe.contentType=function zt(X,re){return X&&X.contentType||re&&re.type()||"application/octet-stream"}(null,re)),Fe}class hr{constructor(re,Te,Fe,qe){this.current=re,this.total=Te,this.finalized=!!Fe,this.metadata=qe||null}}function In(X,re){let Te=null;try{Te=X.getResponseHeader("X-Goog-Upload-Status")}catch{be(!1)}return be(!!Te&&-1!==(re||["active"]).indexOf(Te)),Te}const ea={STATE_CHANGED:"state_changed"},Lr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ks(X){switch(X){case"running":case"pausing":case"canceling":return Lr.RUNNING;case"paused":return Lr.PAUSED;case"success":return Lr.SUCCESS;case"canceled":return Lr.CANCELED;default:return Lr.ERROR}}class Wi{constructor(re,Te,Fe){if(function ut(X){return"function"==typeof X}(re)||null!=Te||null!=Fe)this.next=re,this.error=Te??void 0,this.complete=Fe??void 0;else{const Tt=re;this.next=Tt.next,this.error=Tt.error,this.complete=Tt.complete}}}function en(X){return(...re)=>{Promise.resolve().then(()=>X(...re))}}let mr=null;class oi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=On.NO_ERROR,this.sendPromise_=new Promise(re=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=On.ABORT,re()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=On.NETWORK_ERROR,re()}),this.xhr_.addEventListener("load",()=>{re()})})}send(re,Te,Fe,qe){if(this.sent_)throw Wr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Te,re,!0),void 0!==qe)for(const Tt in qe)qe.hasOwnProperty(Tt)&&this.xhr_.setRequestHeader(Tt,qe[Tt].toString());return void 0!==Fe?this.xhr_.send(Fe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(re){return this.xhr_.getResponseHeader(re)}addUploadProgressListener(re){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",re)}removeUploadProgressListener(re){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",re)}}class ai extends oi{initXhr(){this.xhr_.responseType="text"}}function as(){return mr?mr():new ai}class He{constructor(re,Te,Fe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=re,this._blob=Te,this._metadata=Fe,this._mappings=Mi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=qe=>{if(this._request=void 0,this._chunkMultiplier=1,qe._codeEquals(we.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Tt=this.isExponentialBackoffExpired();if(gr(qe.status,[])){if(!Tt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();qe=At()}this._error=qe,this._transition("error")}},this._metadataErrorHandler=qe=>{this._request=void 0,qe._codeEquals(we.CANCELED)?this.completeTransitions_():(this._error=qe,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((qe,Tt)=>{this._resolve=qe,this._reject=Tt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const re=this._transferred;return Te=>this._updateProgress(re+Te)}_shouldDoResumable(re){return re.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(re){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Te,Fe])=>{switch(this._state){case"running":re(Te,Fe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((re,Te)=>{const Fe=function Ur(X,re,Te,Fe,qe){const Tt=re.bucketOnlyServerUrl(),Kt=yn(re,Fe,qe),xn={name:Kt.fullPath},dn=nn(Tt,X.host,X._protocol),Pr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Fe.size()}`,"X-Goog-Upload-Header-Content-Type":Kt.contentType,"Content-Type":"application/json; charset=utf-8"},Gi=Ne(Kt,Te),bi=new Be(dn,"POST",function xi(Vr){let gi;In(Vr);try{gi=Vr.getResponseHeader("X-Goog-Upload-URL")}catch{be(!1)}return be(mt(gi)),gi},X.maxUploadRetryTime);return bi.urlParams=xn,bi.headers=Pr,bi.body=Gi,bi.errorHandler=it(re),bi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(Fe,as,re,Te);this._request=qe,qe.getPromise().then(Tt=>{this._request=void 0,this._uploadUrl=Tt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const re=this._uploadUrl;this._resolveToken((Te,Fe)=>{const qe=function kr(X,re,Te,Fe){const dn=new Be(Te,"POST",function Tt(or){const Pr=In(or,["active","final"]);let Gi=null;try{Gi=or.getResponseHeader("X-Goog-Upload-Size-Received")}catch{be(!1)}Gi||be(!1);const Rs=Number(Gi);return be(!isNaN(Rs)),new hr(Rs,Fe.size(),"final"===Pr)},X.maxUploadRetryTime);return dn.headers={"X-Goog-Upload-Command":"query"},dn.errorHandler=it(re),dn}(this._ref.storage,this._ref._location,re,this._blob),Tt=this._ref.storage._makeRequest(qe,as,Te,Fe);this._request=Tt,Tt.getPromise().then(Kt=>{this._request=void 0,this._updateProgress(Kt.current),this._needToFetchStatus=!1,Kt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const re=262144*this._chunkMultiplier,Te=new hr(this._transferred,this._blob.size()),Fe=this._uploadUrl;this._resolveToken((qe,Tt)=>{let Kt;try{Kt=function ns(X,re,Te,Fe,qe,Tt,Kt,xn){const dn=new hr(0,0);if(Kt?(dn.current=Kt.current,dn.total=Kt.total):(dn.current=0,dn.total=Fe.size()),Fe.size()!==dn.total)throw function gt(){return new he(we.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const or=dn.total-dn.current;let Pr=or;qe>0&&(Pr=Math.min(Pr,qe));const Gi=dn.current;let xi="";xi=0===Pr?"finalize":or===Pr?"upload, finalize":"upload";const bi={"X-Goog-Upload-Command":xi,"X-Goog-Upload-Offset":`${dn.current}`},Vr=Fe.slice(Gi,Gi+Pr);if(null===Vr)throw Lt();const ki=new Be(Te,"POST",function gi(li,xr){const jr=In(li,["active","final"]),Ls=dn.current+Pr,hs=Fe.size();let rs;return rs="final"===jr?De(re,Tt)(li,xr):null,new hr(Ls,hs,"final"===jr,rs)},re.maxUploadRetryTime);return ki.headers=bi,ki.body=Vr.uploadData(),ki.progressCallback=xn||null,ki.errorHandler=it(X),ki}(this._ref._location,this._ref.storage,Fe,this._blob,re,this._mappings,Te,this._makeProgressCallback())}catch(dn){return this._error=dn,void this._transition("error")}const xn=this._ref.storage._makeRequest(Kt,as,qe,Tt,!1);this._request=xn,xn.getPromise().then(dn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(dn.current),dn.finalized?(this._metadata=dn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((re,Te)=>{const Fe=Dn(this._ref.storage,this._ref._location,this._mappings),qe=this._ref.storage._makeRequest(Fe,as,re,Te);this._request=qe,qe.getPromise().then(Tt=>{this._request=void 0,this._metadata=Tt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((re,Te)=>{const Fe=function zn(X,re,Te,Fe,qe){const Tt=re.bucketOnlyServerUrl(),Kt={"X-Goog-Upload-Protocol":"multipart"},dn=function xn(){let ki="";for(let li=0;li<2;li++)ki+=Math.random().toString().slice(2);return ki}();Kt["Content-Type"]="multipart/related; boundary="+dn;const or=yn(re,Fe,qe),Pr=Ne(or,Te),xi=si.getBlob("--"+dn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Pr+"\r\n--"+dn+"\r\nContent-Type: "+or.contentType+"\r\n\r\n",Fe,"\r\n--"+dn+"--");if(null===xi)throw Lt();const bi={name:or.fullPath},Vr=nn(Tt,X.host,X._protocol),ks=X.maxUploadRetryTime,hi=new Be(Vr,"POST",De(X,Te),ks);return hi.urlParams=bi,hi.headers=Kt,hi.body=xi.uploadData(),hi.errorHandler=it(re),hi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(Fe,as,re,Te);this._request=qe,qe.getPromise().then(Tt=>{this._request=void 0,this._metadata=Tt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(re){const Te=this._transferred;this._transferred=re,this._transferred!==Te&&this._notifyObservers()}_transition(re){if(this._state!==re)switch(re){case"canceling":case"pausing":this._state=re,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Te="paused"===this._state;this._state=re,Te&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=re,this._notifyObservers();break;case"canceled":this._error=It(),this._state=re,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const re=Ks(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:re,metadata:this._metadata,task:this,ref:this._ref}}on(re,Te,Fe,qe){const Tt=new Wi(Te||void 0,Fe||void 0,qe||void 0);return this._addObserver(Tt),()=>{this._removeObserver(Tt)}}then(re,Te){return this._promise.then(re,Te)}catch(re){return this.then(null,re)}_addObserver(re){this._observers.push(re),this._notifyObserver(re)}_removeObserver(re){const Te=this._observers.indexOf(re);-1!==Te&&this._observers.splice(Te,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Te=>{this._notifyObserver(Te)})}_finishPromise(){if(void 0!==this._resolve){let re=!0;switch(Ks(this._state)){case Lr.SUCCESS:en(this._resolve.bind(null,this.snapshot))();break;case Lr.CANCELED:case Lr.ERROR:en(this._reject.bind(null,this._error))();break;default:re=!1}re&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(re){switch(Ks(this._state)){case Lr.RUNNING:case Lr.PAUSED:re.next&&en(re.next.bind(re,this.snapshot))();break;case Lr.SUCCESS:re.complete&&en(re.complete.bind(re))();break;default:re.error&&en(re.error.bind(re,this._error))()}}resume(){const re="paused"===this._state||"pausing"===this._state;return re&&this._transition("running"),re}pause(){const re="running"===this._state;return re&&this._transition("pausing"),re}cancel(){const re="running"===this._state||"pausing"===this._state;return re&&this._transition("canceling"),re}}class $e{constructor(re,Te){this._service=re,this._location=Te instanceof br?Te:br.makeFromUrl(Te,re.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(re,Te){return new $e(re,Te)}get root(){const re=new br(this._location.bucket,"");return this._newRef(this._service,re)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $n(this._location.path)}get storage(){return this._service}get parent(){const re=function cr(X){if(0===X.length)return null;const re=X.lastIndexOf("/");return-1===re?"":X.slice(0,re)}(this._location.path);if(null===re)return null;const Te=new br(this._location.bucket,re);return new $e(this._service,Te)}_throwIfRoot(re){if(""===this._location.path)throw Zt(re)}}function Is(X,re,Te){return Es.apply(this,arguments)}function Es(){return(Es=(0,_.Z)(function*(X,re,Te){const qe=yield Ss(X,{pageToken:Te});re.prefixes.push(...qe.prefixes),re.items.push(...qe.items),null!=qe.nextPageToken&&(yield Is(X,re,qe.nextPageToken))})).apply(this,arguments)}function Ss(X,re){null!=re&&"number"==typeof re.maxResults&&Rt("options.maxResults",1,1e3,re.maxResults);const Te=re||{},Fe=Tn(X.storage,X._location,"/",Te.pageToken,Te.maxResults);return X.storage.makeRequestWithTokens(Fe,as)}function Hs(X){X._throwIfRoot("getDownloadURL");const re=function os(X,re,Te){const qe=nn(re.fullServerUrl(),X.host,X._protocol),Kt=X.maxOperationRetryTime,xn=new Be(qe,"GET",function We(X,re){return function Te(Fe,qe){const Tt=Pi(X,qe,re);return be(null!==Tt),function Vi(X,re,Te,Fe){const qe=Xr(re);if(null===qe||!mt(qe.downloadTokens))return null;const Tt=qe.downloadTokens;if(0===Tt.length)return null;const Kt=encodeURIComponent;return Tt.split(",").map(or=>{const Gi=X.fullPath;return nn("/b/"+Kt(X.bucket)+"/o/"+Kt(Gi),Te,Fe)+Cn({alt:"media",token:or})})[0]}(Tt,qe,X.host,X._protocol)}}(X,Te),Kt);return xn.errorHandler=Pt(re),xn}(X.storage,X._location,Mi());return X.storage.makeRequestWithTokens(re,as).then(Te=>{if(null===Te)throw function Y(){return new he(we.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Te})}function Or(X,re){const Te=function Kr(X,re){const Te=re.split("/").filter(Fe=>Fe.length>0).join("/");return 0===X.length?Te:X+"/"+Te}(X._location.path,re),Fe=new br(X._location.bucket,Te);return new $e(X.storage,Fe)}function As(X,re){if(X instanceof _i){const Te=X;if(null==Te._bucket)throw function at(){return new he(we.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+je+"' property when initializing the app?")}();const Fe=new $e(Te,Te._bucket);return null!=re?As(Fe,re):Fe}return void 0!==re?Or(X,re):X}function Mr(X,re){if(re&&function Br(X){return/^[A-Za-z]+:\/\//.test(X)}(re)){if(X instanceof _i)return function vr(X,re){return new $e(X,re)}(X,re);throw on("To use ref(service, url), the first argument must be a Storage instance.")}return As(X,re)}function da(X,re){const Te=re?.[je];return null==Te?null:br.makeFromBucketSpec(Te,X)}class _i{constructor(re,Te,Fe,qe,Tt){this.app=re,this._authProvider=Te,this._appCheckProvider=Fe,this._url=qe,this._firebaseVersion=Tt,this._bucket=null,this._host=Se,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=qe?br.makeFromBucketSpec(qe,this._host):da(this._host,this.app.options)}get host(){return this._host}set host(re){this._host=re,this._bucket=null!=this._url?br.makeFromBucketSpec(this._url,re):da(re,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(re){Rt("time",0,Number.POSITIVE_INFINITY,re),this._maxUploadRetryTime=re}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(re){Rt("time",0,Number.POSITIVE_INFINITY,re),this._maxOperationRetryTime=re}_getAuthToken(){var re=this;return(0,_.Z)(function*(){if(re._overrideAuthToken)return re._overrideAuthToken;const Te=re._authProvider.getImmediate({optional:!0});if(Te){const Fe=yield Te.getToken();if(null!==Fe)return Fe.accessToken}return null})()}_getAppCheckToken(){var re=this;return(0,_.Z)(function*(){const Te=re._appCheckProvider.getImmediate({optional:!0});return Te?(yield Te.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(re=>re.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(re){return new $e(this,re)}_makeRequest(re,Te,Fe,qe,Tt=!0){if(this._deleted)return new Vn(Yt());{const Kt=function Pn(X,re,Te,Fe,qe,Tt,Kt=!0){const xn=Cn(X.urlParams),dn=X.url+xn,or=Object.assign({},X.headers);return function Er(X,re){re&&(X["X-Firebase-GMPID"]=re)}(or,re),function Cr(X,re){null!==re&&re.length>0&&(X.Authorization="Firebase "+re)}(or,Te),function Hr(X,re){X["X-Firebase-Storage-Version"]="webjs/"+(re??"AppManager")}(or,Tt),function Gr(X,re){null!==re&&(X["X-Firebase-AppCheck"]=re)}(or,Fe),new Qn(dn,X.method,or,X.body,X.successCodes,X.additionalRetryCodes,X.handler,X.errorHandler,X.timeout,X.progressCallback,qe,Kt)}(re,this._appId,Fe,qe,Te,this._firebaseVersion,Tt);return this._requests.add(Kt),Kt.getPromise().then(()=>this._requests.delete(Kt),()=>this._requests.delete(Kt)),Kt}}makeRequestWithTokens(re,Te){var Fe=this;return(0,_.Z)(function*(){const[qe,Tt]=yield Promise.all([Fe._getAuthToken(),Fe._getAppCheckToken()]);return Fe._makeRequest(re,Te,qe,Tt).getPromise()})()}}const ys="@firebase/storage",lr="storage";function Bi(X,re,Te){return function Sr(X,re,Te){return X._throwIfRoot("uploadBytesResumable"),new He(X,new si(re),Te)}(X=(0,z.m9)(X),re,Te)}function xs(X){return function ws(X){X._throwIfRoot("getMetadata");const re=Dn(X.storage,X._location,Mi());return X.storage.makeRequestWithTokens(re,as)}(X=(0,z.m9)(X))}function $a(X,re){return function Ti(X,re){X._throwIfRoot("updateMetadata");const Te=function Et(X,re,Te,Fe){const Tt=nn(re.fullServerUrl(),X.host,X._protocol),xn=Ne(Te,Fe),or=X.maxOperationRetryTime,Pr=new Be(Tt,"PATCH",De(X,Fe),or);return Pr.headers={"Content-Type":"application/json; charset=utf-8"},Pr.body=xn,Pr.errorHandler=Pt(re),Pr}(X.storage,X._location,re,Mi());return X.storage.makeRequestWithTokens(Te,as)}(X=(0,z.m9)(X),re)}function Yo(X,re){return Ss(X=(0,z.m9)(X),re)}function Pa(X){return function ti(X){const re={prefixes:[],items:[]};return Is(X,re).then(()=>re)}(X=(0,z.m9)(X))}function to(X){return Hs(X=(0,z.m9)(X))}function vo(X){return function Zo(X){X._throwIfRoot("deleteObject");const re=function ot(X,re){const Fe=nn(re.fullServerUrl(),X.host,X._protocol),xn=new Be(Fe,"DELETE",function Kt(dn,or){},X.maxOperationRetryTime);return xn.successCodes=[200,204],xn.errorHandler=Pt(re),xn}(X.storage,X._location);return X.storage.makeRequestWithTokens(re,as)}(X=(0,z.m9)(X))}function xo(X,re){return Mr(X=(0,z.m9)(X),re)}function no(X,re){return Or(X,re)}function ro(X=(0,ie.getApp)(),re){X=(0,z.m9)(X);const Fe=(0,ie._getProvider)(X,lr).getImmediate({identifier:re}),qe=(0,z.P0)("storage");return qe&&ha(Fe,...qe),Fe}function ha(X,re,Te,Fe={}){!function bs(X,re,Te,Fe={}){X.host=`${re}:${Te}`,X._protocol="http";const{mockUserToken:qe}=Fe;qe&&(X._overrideAuthToken="string"==typeof qe?qe:(0,z.Sg)(qe,X.app.options.projectId))}(X,re,Te,Fe)}function Eo(X,{instanceIdentifier:re}){const Te=X.getProvider("app").getImmediate(),Fe=X.getProvider("auth-internal"),qe=X.getProvider("app-check-internal");return new _i(Te,Fe,qe,re,ie.SDK_VERSION)}!function zs(){(0,ie._registerComponent)(new Le.wA(lr,Eo,"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(ys,"0.11.2",""),(0,ie.registerVersion)(ys,"0.11.2","esm2017")}()},2090:(fn,lt,K)=>{K.d(lt,{$s:()=>Yi,BH:()=>at,DV:()=>Er,Dv:()=>wn,G6:()=>Jn,GJ:()=>Cr,L:()=>Qe,LL:()=>Ot,P0:()=>It,Pz:()=>Pe,Sg:()=>Lt,UG:()=>$t,UI:()=>Pn,US:()=>je,Wj:()=>Xr,Wl:()=>Cn,Yr:()=>Vn,ZB:()=>Oe,ZR:()=>mt,aH:()=>Ze,b$:()=>Zt,cI:()=>nn,dS:()=>Kr,eu:()=>Ye,g5:()=>z,gK:()=>Qr,gQ:()=>Yn,h$:()=>Ie,hl:()=>Ke,hu:()=>ie,jU:()=>on,lb:()=>cr,m9:()=>Vi,ne:()=>er,p$:()=>we,pd:()=>ri,q4:()=>At,r3:()=>Hr,ru:()=>Yt,tV:()=>he,uI:()=>Y,ug:()=>$n,vZ:()=>Xt,w1:()=>Wr,w9:()=>_r,xO:()=>Dr,xb:()=>Gr,z$:()=>gt,zI:()=>ut,zd:()=>jn});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ie=function(Ne,Re){if(!Ne)throw z(Re)},z=function(Ne){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Ne)},Le=function(Ne){const Re=[];let ce=0;for(let ye=0;ye<Ne.length;ye++){let oe=Ne.charCodeAt(ye);oe<128?Re[ce++]=oe:oe<2048?(Re[ce++]=oe>>6|192,Re[ce++]=63&oe|128):55296==(64512&oe)&&ye+1<Ne.length&&56320==(64512&Ne.charCodeAt(ye+1))?(oe=65536+((1023&oe)<<10)+(1023&Ne.charCodeAt(++ye)),Re[ce++]=oe>>18|240,Re[ce++]=oe>>12&63|128,Re[ce++]=oe>>6&63|128,Re[ce++]=63&oe|128):(Re[ce++]=oe>>12|224,Re[ce++]=oe>>6&63|128,Re[ce++]=63&oe|128)}return Re},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ne,Re){if(!Array.isArray(Ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ce=Re?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let oe=0;oe<Ne.length;oe+=3){const Be=Ne[oe],be=oe+1<Ne.length,De=be?Ne[oe+1]:0,ve=oe+2<Ne.length,We=ve?Ne[oe+2]:0;let Dn=(15&De)<<2|We>>6,Tn=63&We;ve||(Tn=64,be||(Dn=64)),ye.push(ce[Be>>2],ce[(3&Be)<<4|De>>4],ce[Dn],ce[Tn])}return ye.join("")},encodeString(Ne,Re){return this.HAS_NATIVE_SUPPORT&&!Re?btoa(Ne):this.encodeByteArray(Le(Ne),Re)},decodeString(Ne,Re){return this.HAS_NATIVE_SUPPORT&&!Re?atob(Ne):function(Ne){const Re=[];let ce=0,ye=0;for(;ce<Ne.length;){const oe=Ne[ce++];if(oe<128)Re[ye++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const Be=Ne[ce++];Re[ye++]=String.fromCharCode((31&oe)<<6|63&Be)}else if(oe>239&&oe<365){const ve=((7&oe)<<18|(63&Ne[ce++])<<12|(63&Ne[ce++])<<6|63&Ne[ce++])-65536;Re[ye++]=String.fromCharCode(55296+(ve>>10)),Re[ye++]=String.fromCharCode(56320+(1023&ve))}else{const Be=Ne[ce++],be=Ne[ce++];Re[ye++]=String.fromCharCode((15&oe)<<12|(63&Be)<<6|63&be)}}return Re.join("")}(this.decodeStringToByteArray(Ne,Re))},decodeStringToByteArray(Ne,Re){this.init_();const ce=Re?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let oe=0;oe<Ne.length;){const Be=ce[Ne.charAt(oe++)],De=oe<Ne.length?ce[Ne.charAt(oe)]:0;++oe;const We=oe<Ne.length?ce[Ne.charAt(oe)]:64;++oe;const Pt=oe<Ne.length?ce[Ne.charAt(oe)]:64;if(++oe,null==Be||null==De||null==We||null==Pt)throw new Ge;ye.push(Be<<2|De>>4),64!==We&&(ye.push(De<<4&240|We>>2),64!==Pt&&ye.push(We<<6&192|Pt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ne=0;Ne<this.ENCODED_VALS.length;Ne++)this.byteToCharMap_[Ne]=this.ENCODED_VALS.charAt(Ne),this.charToByteMap_[this.byteToCharMap_[Ne]]=Ne,this.byteToCharMapWebSafe_[Ne]=this.ENCODED_VALS_WEBSAFE.charAt(Ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ne]]=Ne,Ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ne)]=Ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ne)]=Ne)}}};class Ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(Ne){const Re=Le(Ne);return je.encodeByteArray(Re,!0)},Qe=function(Ne){return Ie(Ne).replace(/\./g,"")},he=function(Ne){try{return je.decodeString(Ne,!0)}catch(Re){console.error("base64Decode failed: ",Re)}return null};function we(Ne){return Oe(void 0,Ne)}function Oe(Ne,Re){if(!(Re instanceof Object))return Re;switch(Re.constructor){case Date:return new Date(Re.getTime());case Object:void 0===Ne&&(Ne={});break;case Array:Ne=[];break;default:return Re}for(const ce in Re)!Re.hasOwnProperty(ce)||!dt(ce)||(Ne[ce]=Oe(Ne[ce],Re[ce]));return Ne}function dt(Ne){return"__proto__"!==Ne}const _t=()=>{try{return function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ne=process.env.__FIREBASE_DEFAULTS__;return Ne?JSON.parse(Ne):void 0})()||(()=>{if(typeof document>"u")return;let Ne;try{Ne=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Re=Ne&&he(Ne[1]);return Re&&JSON.parse(Re)})()}catch(Ne){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ne}`)}},At=Ne=>{var Re,ce;return null===(ce=null===(Re=_t())||void 0===Re?void 0:Re.emulatorHosts)||void 0===ce?void 0:ce[Ne]},It=Ne=>{const Re=At(Ne);if(!Re)return;const ce=Re.lastIndexOf(":");if(ce<=0||ce+1===Re.length)throw new Error(`Invalid host ${Re} with no separate hostname and port!`);const ye=parseInt(Re.substring(ce+1),10);return"["===Re[0]?[Re.substring(1,ce-1),ye]:[Re.substring(0,ce),ye]},Ze=()=>{var Ne;return null===(Ne=_t())||void 0===Ne?void 0:Ne.config},Pe=Ne=>{var Re;return null===(Re=_t())||void 0===Re?void 0:Re[`_${Ne}`]};class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Re,ce)=>{this.resolve=Re,this.reject=ce})}wrapCallback(Re){return(ce,ye)=>{ce?this.reject(ce):this.resolve(ye),"function"==typeof Re&&(this.promise.catch(()=>{}),1===Re.length?Re(ce):Re(ce,ye))}}}function Lt(Ne,Re){if(Ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=Re||"demo-project",oe=Ne.iat||0,Be=Ne.sub||Ne.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:oe,exp:oe+3600,auth_time:oe,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},Ne);return[Qe(JSON.stringify({alg:"none",type:"JWT"})),Qe(JSON.stringify(be)),""].join(".")}function gt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function $t(){var Ne;const Re=null===(Ne=_t())||void 0===Ne?void 0:Ne.forceEnvironment;if("node"===Re)return!0;if("browser"===Re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function on(){return"object"==typeof self&&self.self===self}function Yt(){const Ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ne&&void 0!==Ne.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wr(){const Ne=gt();return Ne.indexOf("MSIE ")>=0||Ne.indexOf("Trident/")>=0}function Vn(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Jn(){return!$t()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){try{return"object"==typeof indexedDB}catch{return!1}}function Ye(){return new Promise((Ne,Re)=>{try{let ce=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(ye);oe.onsuccess=()=>{oe.result.close(),ce||self.indexedDB.deleteDatabase(ye),Ne(!0)},oe.onupgradeneeded=()=>{ce=!1},oe.onerror=()=>{var Be;Re((null===(Be=oe.error)||void 0===Be?void 0:Be.message)||"")}}catch(ce){Re(ce)}})}function ut(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class mt extends Error{constructor(Re,ce,ye){super(ce),this.code=Re,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}}class Ot{constructor(Re,ce,ye){this.service=Re,this.serviceName=ce,this.errors=ye}create(Re,...ce){const ye=ce[0]||{},oe=`${this.service}/${Re}`,Be=this.errors[Re],be=Be?function Qt(Ne,Re){return Ne.replace(Rt,(ce,ye)=>{const oe=Re[ye];return null!=oe?String(oe):`<${ye}?>`})}(Be,ye):"Error";return new mt(oe,`${this.serviceName}: ${be} (${oe}).`,ye)}}const Rt=/\{\$([^}]+)}/g;function nn(Ne){return JSON.parse(Ne)}function Cn(Ne){return JSON.stringify(Ne)}const On=function(Ne){let Re={},ce={},ye={},oe="";try{const Be=Ne.split(".");Re=nn(he(Be[0])||""),ce=nn(he(Be[1])||""),oe=Be[2],ye=ce.d||{},delete ce.d}catch{}return{header:Re,claims:ce,data:ye,signature:oe}},_r=function(Ne){const ce=On(Ne).claims;return!!ce&&"object"==typeof ce&&ce.hasOwnProperty("iat")},Cr=function(Ne){const Re=On(Ne).claims;return"object"==typeof Re&&!0===Re.admin};function Hr(Ne,Re){return Object.prototype.hasOwnProperty.call(Ne,Re)}function Er(Ne,Re){if(Object.prototype.hasOwnProperty.call(Ne,Re))return Ne[Re]}function Gr(Ne){for(const Re in Ne)if(Object.prototype.hasOwnProperty.call(Ne,Re))return!1;return!0}function Pn(Ne,Re,ce){const ye={};for(const oe in Ne)Object.prototype.hasOwnProperty.call(Ne,oe)&&(ye[oe]=Re.call(ce,Ne[oe],oe,Ne));return ye}function Xt(Ne,Re){if(Ne===Re)return!0;const ce=Object.keys(Ne),ye=Object.keys(Re);for(const oe of ce){if(!ye.includes(oe))return!1;const Be=Ne[oe],be=Re[oe];if(Hn(Be)&&Hn(be)){if(!Xt(Be,be))return!1}else if(Be!==be)return!1}for(const oe of ye)if(!ce.includes(oe))return!1;return!0}function Hn(Ne){return null!==Ne&&"object"==typeof Ne}function Dr(Ne){const Re=[];for(const[ce,ye]of Object.entries(Ne))Array.isArray(ye)?ye.forEach(oe=>{Re.push(encodeURIComponent(ce)+"="+encodeURIComponent(oe))}):Re.push(encodeURIComponent(ce)+"="+encodeURIComponent(ye));return Re.length?"&"+Re.join("&"):""}function jn(Ne){const Re={};return Ne.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[oe,Be]=ye.split("=");Re[decodeURIComponent(oe)]=decodeURIComponent(Be)}}),Re}function ri(Ne){const Re=Ne.indexOf("?");if(!Re)return"";const ce=Ne.indexOf("#",Re);return Ne.substring(Re,ce>0?ce:void 0)}class Yn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Re=1;Re<this.blockSize;++Re)this.pad_[Re]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Re,ce){ce||(ce=0);const ye=this.W_;if("string"==typeof Re)for(let Pt=0;Pt<16;Pt++)ye[Pt]=Re.charCodeAt(ce)<<24|Re.charCodeAt(ce+1)<<16|Re.charCodeAt(ce+2)<<8|Re.charCodeAt(ce+3),ce+=4;else for(let Pt=0;Pt<16;Pt++)ye[Pt]=Re[ce]<<24|Re[ce+1]<<16|Re[ce+2]<<8|Re[ce+3],ce+=4;for(let Pt=16;Pt<80;Pt++){const Dn=ye[Pt-3]^ye[Pt-8]^ye[Pt-14]^ye[Pt-16];ye[Pt]=4294967295&(Dn<<1|Dn>>>31)}let We,it,oe=this.chain_[0],Be=this.chain_[1],be=this.chain_[2],De=this.chain_[3],ve=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(We=De^Be&(be^De),it=1518500249):(We=Be^be^De,it=1859775393):Pt<60?(We=Be&be|De&(Be|be),it=2400959708):(We=Be^be^De,it=3395469782);const Dn=(oe<<5|oe>>>27)+We+ve+it+ye[Pt]&4294967295;ve=De,De=be,be=4294967295&(Be<<30|Be>>>2),Be=oe,oe=Dn}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+Be&4294967295,this.chain_[2]=this.chain_[2]+be&4294967295,this.chain_[3]=this.chain_[3]+De&4294967295,this.chain_[4]=this.chain_[4]+ve&4294967295}update(Re,ce){if(null==Re)return;void 0===ce&&(ce=Re.length);const ye=ce-this.blockSize;let oe=0;const Be=this.buf_;let be=this.inbuf_;for(;oe<ce;){if(0===be)for(;oe<=ye;)this.compress_(Re,oe),oe+=this.blockSize;if("string"==typeof Re){for(;oe<ce;)if(Be[be]=Re.charCodeAt(oe),++be,++oe,be===this.blockSize){this.compress_(Be),be=0;break}}else for(;oe<ce;)if(Be[be]=Re[oe],++be,++oe,be===this.blockSize){this.compress_(Be),be=0;break}}this.inbuf_=be,this.total_+=ce}digest(){const Re=[];let ce=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&ce,ce/=256;this.compress_(this.buf_);let ye=0;for(let oe=0;oe<5;oe++)for(let Be=24;Be>=0;Be-=8)Re[ye]=this.chain_[oe]>>Be&255,++ye;return Re}}function er(Ne,Re){const ce=new cn(Ne,Re);return ce.subscribe.bind(ce)}class cn{constructor(Re,ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ce,this.task.then(()=>{Re(this)}).catch(ye=>{this.error(ye)})}next(Re){this.forEachObserver(ce=>{ce.next(Re)})}error(Re){this.forEachObserver(ce=>{ce.error(Re)}),this.close(Re)}complete(){this.forEachObserver(Re=>{Re.complete()}),this.close()}subscribe(Re,ce,ye){let oe;if(void 0===Re&&void 0===ce&&void 0===ye)throw new Error("Missing Observer.");oe=function Yr(Ne,Re){if("object"!=typeof Ne||null===Ne)return!1;for(const ce of Re)if(ce in Ne&&"function"==typeof Ne[ce])return!0;return!1}(Re,["next","error","complete"])?Re:{next:Re,error:ce,complete:ye},void 0===oe.next&&(oe.next=ii),void 0===oe.error&&(oe.error=ii),void 0===oe.complete&&(oe.complete=ii);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch{}}),this.observers.push(oe),Be}unsubscribeOne(Re){void 0===this.observers||void 0===this.observers[Re]||(delete this.observers[Re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Re){if(!this.finalized)for(let ce=0;ce<this.observers.length;ce++)this.sendOne(ce,Re)}sendOne(Re,ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Re])try{ce(this.observers[Re])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(Re){this.finalized||(this.finalized=!0,void 0!==Re&&(this.finalError=Re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ii(){}const wn=function(Ne,Re,ce,ye){let oe;if(ye<Re?oe="at least "+Re:ye>ce&&(oe=0===ce?"none":"no more than "+ce),oe)throw new Error(Ne+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+oe+".")};function Qr(Ne,Re){return`${Ne} failed: ${Re} argument `}function Xr(Ne,Re,ce,ye){if((!ye||ce)&&"function"!=typeof ce)throw new Error(Qr(Ne,Re)+"must be a valid function.")}function cr(Ne,Re,ce,ye){if((!ye||ce)&&("object"!=typeof ce||null===ce))throw new Error(Qr(Ne,Re)+"must be a valid context object.")}const Kr=function(Ne){const Re=[];let ce=0;for(let ye=0;ye<Ne.length;ye++){let oe=Ne.charCodeAt(ye);if(oe>=55296&&oe<=56319){const Be=oe-55296;ye++,ie(ye<Ne.length,"Surrogate pair missing trail surrogate."),oe=65536+(Be<<10)+(Ne.charCodeAt(ye)-56320)}oe<128?Re[ce++]=oe:oe<2048?(Re[ce++]=oe>>6|192,Re[ce++]=63&oe|128):oe<65536?(Re[ce++]=oe>>12|224,Re[ce++]=oe>>6&63|128,Re[ce++]=63&oe|128):(Re[ce++]=oe>>18|240,Re[ce++]=oe>>12&63|128,Re[ce++]=oe>>6&63|128,Re[ce++]=63&oe|128)}return Re},$n=function(Ne){let Re=0;for(let ce=0;ce<Ne.length;ce++){const ye=Ne.charCodeAt(ce);ye<128?Re++:ye<2048?Re+=2:ye>=55296&&ye<=56319?(Re+=4,ce++):Re+=3}return Re},an=1e3,Jr=2,Di=144e5,Mi=.5;function Yi(Ne,Re=an,ce=Jr){const ye=Re*Math.pow(ce,Ne),oe=Math.round(Mi*ye*(Math.random()-.5)*2);return Math.min(Di,ye+oe)}function Vi(Ne){return Ne&&Ne._delegate?Ne._delegate:Ne}},3702:(fn,lt,K)=>{K.d(lt,{e:()=>Ge});var _=K(5861),ie=K(7158),z=K(4322),Le=K(7579),Se=K(4650),je=K(3375);let Ge=(()=>{class Ie{constructor(he,we){this.auth=he,this.router=we}emailSignIn(he,we){var Oe=this;return(0,_.Z)(function*(){(0,ie.e5)(Oe.auth,he,we).then(dt=>{Oe.user=dt.user,Oe.gravarUsuario(Oe.user),Oe.router.navigate(["/todoapp"]),Oe.credential=dt}).catch(dt=>{Oe.error=dt})})()}googleSignIn(){var he=this;return(0,_.Z)(function*(){(0,ie.rh)(he.auth,new z.hJ).then(we=>{he.user=we.user,he.gravarUsuario(he.user),he.router.navigate(["/todoapp"])}).catch(we=>{he.error=we})})()}signOut(){var he=this;return(0,_.Z)(function*(){yield he.auth.signOut(),he.router.navigate(["/"]),sessionStorage.clear(),he.user=null})()}isLogged(){return!!sessionStorage.getItem("user")}gravarUsuario(he){sessionStorage.setItem("user",JSON.stringify(he))}getUser(){console.log("busca");let he=new Le.x;return this.auth.onAuthStateChanged(we=>{we&&(this.user=we,he.next(we))}),he.asObservable()}get userLogged(){return this.user}updatePhoneNumber(he){(0,ie.SF)(this.auth,{...this.user,phoneNumber:he})}}return Ie.\u0275fac=function(he){return new(he||Ie)(Se.LFG(ie.gx),Se.LFG(je.F0))},Ie.\u0275prov=Se.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},9713:(fn,lt,K)=>{var _=K(1481),ie=K(3375),z=K(4650),Le=K(3702);let Se=(()=>{class I{constructor(g,S){this.authService=g,this.router=S}canActivate(){let g=this.authService.isLogged();return g||this.router.navigate(["/"]),g}}return I.\u0275fac=function(g){return new(g||I)(z.LFG(Le.e),z.LFG(ie.F0))},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const je=[{path:"todoapp",loadChildren:()=>K.e(85).then(K.bind(K,5085)).then(I=>I.DashboadModule),canActivate:[Se]},{path:"",loadChildren:()=>K.e(655).then(K.bind(K,2655)).then(I=>I.LoginModule)},{path:"**",redirectTo:"/"}];let Ge=(()=>{class I{}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[ie.Bz.forRoot(je),ie.Bz]}),I})();const Qe=function(){function I(d,g){void 0===g&&(g=[]),this._eventType=d,this._eventFunctions=g}return I.prototype.init=function(){var d=this;this._eventFunctions.forEach(function(g){typeof window<"u"&&window.addEventListener(d._eventType,g)})},I}();var he=function(){return he=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},he.apply(this,arguments)},we={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},Oe=function(){function I(d,g){void 0===d&&(d=[]),void 0===g&&(g=we),this._items=d,this._options=he(he({},we),g),this._init()}return I.prototype._init=function(){var d=this;this._items.length&&this._items.map(function(g){g.active&&d.open(g.id),g.triggerEl.addEventListener("click",function(){d.toggle(g.id)})})},I.prototype.getItem=function(d){return this._items.filter(function(g){return g.id===d})[0]},I.prototype.open=function(d){var g,S,U=this,Q=this.getItem(d);this._options.alwaysOpen||this._items.map(function(me){var Ee,xe;me!==Q&&((Ee=me.triggerEl.classList).remove.apply(Ee,U._options.activeClasses.split(" ")),(xe=me.triggerEl.classList).add.apply(xe,U._options.inactiveClasses.split(" ")),me.targetEl.classList.add("hidden"),me.triggerEl.setAttribute("aria-expanded","false"),me.active=!1,me.iconEl&&me.iconEl.classList.remove("rotate-180"))}),(g=Q.triggerEl.classList).add.apply(g,this._options.activeClasses.split(" ")),(S=Q.triggerEl.classList).remove.apply(S,this._options.inactiveClasses.split(" ")),Q.triggerEl.setAttribute("aria-expanded","true"),Q.targetEl.classList.remove("hidden"),Q.active=!0,Q.iconEl&&Q.iconEl.classList.add("rotate-180"),this._options.onOpen(this,Q)},I.prototype.toggle=function(d){var g=this.getItem(d);g.active?this.close(d):this.open(d),this._options.onToggle(this,g)},I.prototype.close=function(d){var g,S,U=this.getItem(d);(g=U.triggerEl.classList).remove.apply(g,this._options.activeClasses.split(" ")),(S=U.triggerEl.classList).add.apply(S,this._options.inactiveClasses.split(" ")),U.targetEl.classList.add("hidden"),U.triggerEl.setAttribute("aria-expanded","false"),U.active=!1,U.iconEl&&U.iconEl.classList.remove("rotate-180"),this._options.onClose(this,U)},I}();function dt(){document.querySelectorAll("[data-accordion]").forEach(function(I){var d=I.getAttribute("data-accordion"),g=I.getAttribute("data-active-classes"),S=I.getAttribute("data-inactive-classes"),U=[];I.querySelectorAll("[data-accordion-target]").forEach(function(Q){if(Q.closest("[data-accordion]")===I){var me={id:Q.getAttribute("data-accordion-target"),triggerEl:Q,targetEl:document.querySelector(Q.getAttribute("data-accordion-target")),iconEl:Q.querySelector("[data-accordion-icon]"),active:"true"===Q.getAttribute("aria-expanded")};U.push(me)}}),new Oe(U,{alwaysOpen:"open"===d,activeClasses:g||we.activeClasses,inactiveClasses:S||we.inactiveClasses})})}typeof window<"u"&&(window.Accordion=Oe,window.initAccordions=dt);var Mt=function(){return Mt=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},Mt.apply(this,arguments)},qt={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},ct=function(){function I(d,g,S){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=qt),this._targetEl=d,this._triggerEl=g,this._options=Mt(Mt({},qt),S),this._visible=!1,this._init()}return I.prototype._init=function(){var d=this;this._triggerEl&&(this._visible=this._triggerEl.hasAttribute("aria-expanded")?"true"===this._triggerEl.getAttribute("aria-expanded"):!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",function(){d.toggle()}))},I.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},I.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},I.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},I}();function _t(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(I){var d=I.getAttribute("data-collapse-toggle"),g=document.getElementById(d);g?new ct(g,I):console.error('The target element with id "'.concat(d,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=ct,window.initCollapses=_t);var It=function(){return It=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},It.apply(this,arguments)},Ze={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},Pe=function(){function I(d,g){void 0===d&&(d=[]),void 0===g&&(g=Ze),this._items=d,this._options=It(It(It({},Ze),g),{indicators:It(It({},Ze.indicators),g.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._init()}return I.prototype._init=function(){var d=this;this._items.map(function(g){g.el.classList.add("absolute","inset-0","transition-transform","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(g,S){g.el.addEventListener("click",function(){d.slideTo(S)})})},I.prototype.getItem=function(d){return this._items[d]},I.prototype.slideTo=function(d){var g=this._items[d];this._rotate({left:0===g.position?this._items[this._items.length-1]:this._items[g.position-1],middle:g,right:g.position===this._items.length-1?this._items[0]:this._items[g.position+1]}),this._setActiveItem(g),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},I.prototype.next=function(){var d=this._getActiveItem();this.slideTo((d.position===this._items.length-1?this._items[0]:this._items[d.position+1]).position),this._options.onNext(this)},I.prototype.prev=function(){var d=this._getActiveItem();this.slideTo((0===d.position?this._items[this._items.length-1]:this._items[d.position-1]).position),this._options.onPrev(this)},I.prototype._rotate=function(d){this._items.map(function(g){g.el.classList.add("hidden")}),d.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),d.left.el.classList.add("-translate-x-full","z-10"),d.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),d.middle.el.classList.add("translate-x-0","z-20"),d.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),d.right.el.classList.add("translate-x-full","z-10")},I.prototype.cycle=function(){var d=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){d.next()},this._intervalDuration))},I.prototype.pause=function(){clearInterval(this._intervalInstance)},I.prototype._getActiveItem=function(){return this._activeItem},I.prototype._setActiveItem=function(d){var g,S,U=this;this._activeItem=d;var Q=d.position;this._indicators.length&&(this._indicators.map(function(me){var Ee,xe;me.el.setAttribute("aria-current","false"),(Ee=me.el.classList).remove.apply(Ee,U._options.indicators.activeClasses.split(" ")),(xe=me.el.classList).add.apply(xe,U._options.indicators.inactiveClasses.split(" "))}),(g=this._indicators[Q].el.classList).add.apply(g,this._options.indicators.activeClasses.split(" ")),(S=this._indicators[Q].el.classList).remove.apply(S,this._options.indicators.inactiveClasses.split(" ")),this._indicators[Q].el.setAttribute("aria-current","true"))},I}();function at(){document.querySelectorAll("[data-carousel]").forEach(function(I){var d=I.getAttribute("data-carousel-interval"),g="slide"===I.getAttribute("data-carousel"),S=[],U=0;I.querySelectorAll("[data-carousel-item]").length&&Array.from(I.querySelectorAll("[data-carousel-item]")).map(function(rt,bt){S.push({position:bt,el:rt}),"active"===rt.getAttribute("data-carousel-item")&&(U=bt)});var Q=[];I.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(I.querySelectorAll("[data-carousel-slide-to]")).map(function(rt){Q.push({position:parseInt(rt.getAttribute("data-carousel-slide-to")),el:rt})});var me=new Pe(S,{defaultPosition:U,indicators:{items:Q},interval:d||Ze.interval});g&&me.cycle();var Ee=I.querySelector("[data-carousel-next]"),xe=I.querySelector("[data-carousel-prev]");Ee&&Ee.addEventListener("click",function(){me.next()}),xe&&xe.addEventListener("click",function(){me.prev()})})}typeof window<"u"&&(window.Carousel=Pe,window.initCarousels=at);var gt=function(){return gt=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},gt.apply(this,arguments)},Y={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},$t=function(){function I(d,g,S){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=Y),this._targetEl=d,this._triggerEl=g,this._options=gt(gt({},Y),S),this._init()}return I.prototype._init=function(){var d=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){d.hide()})},I.prototype.hide=function(){var d=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){d._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},I}();function on(){document.querySelectorAll("[data-dismiss-target]").forEach(function(I){var d=I.getAttribute("data-dismiss-target"),g=document.querySelector(d);g?new $t(g,I):console.error('The dismiss element with id "'.concat(d,'" does not exist. Please check the data-dismiss-target attribute.'))})}function Zt(I){if(null==I)return window;if("[object Window]"!==I.toString()){var d=I.ownerDocument;return d&&d.defaultView||window}return I}function Gt(I){return I instanceof Zt(I).Element||I instanceof Element}function Wr(I){return I instanceof Zt(I).HTMLElement||I instanceof HTMLElement}function br(I){return!(typeof ShadowRoot>"u")&&(I instanceof Zt(I).ShadowRoot||I instanceof ShadowRoot)}typeof window<"u"&&(window.Dismiss=$t,window.initDismisses=on);var Vn=Math.max,Jn=Math.min,Ke=Math.round;function Ye(){var I=navigator.userAgentData;return null!=I&&I.brands&&Array.isArray(I.brands)?I.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function ut(){return!/^((?!chrome|android).)*safari/i.test(Ye())}function ze(I,d,g){void 0===d&&(d=!1),void 0===g&&(g=!1);var S=I.getBoundingClientRect(),U=1,Q=1;d&&Wr(I)&&(U=I.offsetWidth>0&&Ke(S.width)/I.offsetWidth||1,Q=I.offsetHeight>0&&Ke(S.height)/I.offsetHeight||1);var Ee=(Gt(I)?Zt(I):window).visualViewport,xe=!ut()&&g,rt=(S.left+(xe&&Ee?Ee.offsetLeft:0))/U,bt=(S.top+(xe&&Ee?Ee.offsetTop:0))/Q,Jt=S.width/U,nr=S.height/Q;return{width:Jt,height:nr,top:bt,right:rt+Jt,bottom:bt+nr,left:rt,x:rt,y:bt}}function mt(I){var d=Zt(I);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function Rt(I){return I?(I.nodeName||"").toLowerCase():null}function nn(I){return((Gt(I)?I.ownerDocument:I.document)||window.document).documentElement}function Cn(I){return ze(nn(I)).left+mt(I).scrollLeft}function On(I){return Zt(I).getComputedStyle(I)}function gr(I){var d=On(I);return/auto|scroll|overlay|hidden/.test(d.overflow+d.overflowY+d.overflowX)}function _r(I,d,g){void 0===g&&(g=!1);var S=Wr(d),U=Wr(d)&&function Qn(I){var d=I.getBoundingClientRect(),g=Ke(d.width)/I.offsetWidth||1,S=Ke(d.height)/I.offsetHeight||1;return 1!==g||1!==S}(d),Q=nn(d),me=ze(I,U,g),Ee={scrollLeft:0,scrollTop:0},xe={x:0,y:0};return(S||!S&&!g)&&(("body"!==Rt(d)||gr(Q))&&(Ee=function Qt(I){return I!==Zt(I)&&Wr(I)?function Ot(I){return{scrollLeft:I.scrollLeft,scrollTop:I.scrollTop}}(I):mt(I)}(d)),Wr(d)?((xe=ze(d,!0)).x+=d.clientLeft,xe.y+=d.clientTop):Q&&(xe.x=Cn(Q))),{x:me.left+Ee.scrollLeft-xe.x,y:me.top+Ee.scrollTop-xe.y,width:me.width,height:me.height}}function Cr(I){var d=ze(I),g=I.offsetWidth,S=I.offsetHeight;return Math.abs(d.width-g)<=1&&(g=d.width),Math.abs(d.height-S)<=1&&(S=d.height),{x:I.offsetLeft,y:I.offsetTop,width:g,height:S}}function Hr(I){return"html"===Rt(I)?I:I.assignedSlot||I.parentNode||(br(I)?I.host:null)||nn(I)}function Er(I){return["html","body","#document"].indexOf(Rt(I))>=0?I.ownerDocument.body:Wr(I)&&gr(I)?I:Er(Hr(I))}function Gr(I,d){var g;void 0===d&&(d=[]);var S=Er(I),U=S===(null==(g=I.ownerDocument)?void 0:g.body),Q=Zt(S),me=U?[Q].concat(Q.visualViewport||[],gr(S)?S:[]):S,Ee=d.concat(me);return U?Ee:Ee.concat(Gr(Hr(me)))}function Pn(I){return["table","td","th"].indexOf(Rt(I))>=0}function Xt(I){return Wr(I)&&"fixed"!==On(I).position?I.offsetParent:null}function yi(I){for(var d=Zt(I),g=Xt(I);g&&Pn(g)&&"static"===On(g).position;)g=Xt(g);return g&&("html"===Rt(g)||"body"===Rt(g)&&"static"===On(g).position)?d:g||function Hn(I){var d=/firefox/i.test(Ye());if(/Trident/i.test(Ye())&&Wr(I)&&"fixed"===On(I).position)return null;var U=Hr(I);for(br(U)&&(U=U.host);Wr(U)&&["html","body"].indexOf(Rt(U))<0;){var Q=On(U);if("none"!==Q.transform||"none"!==Q.perspective||"paint"===Q.contain||-1!==["transform","perspective"].indexOf(Q.willChange)||d&&"filter"===Q.willChange||d&&Q.filter&&"none"!==Q.filter)return U;U=U.parentNode}return null}(I)||d}var Dr="top",jn="bottom",ri="right",Yn="left",er="auto",cn=[Dr,jn,ri,Yn],An="start",Yr="end",ii="clippingParents",wn="viewport",Qr="popper",si="reference",Xr=cn.reduce(function(I,d){return I.concat([d+"-"+An,d+"-"+Yr])},[]),cr=[].concat(cn,[er]).reduce(function(I,d){return I.concat([d,d+"-"+An,d+"-"+Yr])},[]),Pi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Vi(I){var d=new Map,g=new Set,S=[];function U(Q){g.add(Q.name),[].concat(Q.requires||[],Q.requiresIfExists||[]).forEach(function(Ee){if(!g.has(Ee)){var xe=d.get(Ee);xe&&U(xe)}}),S.push(Q)}return I.forEach(function(Q){d.set(Q.name,Q)}),I.forEach(function(Q){g.has(Q.name)||U(Q)}),S}function Re(I){var d;return function(){return d||(d=new Promise(function(g){Promise.resolve().then(function(){d=void 0,g(I())})})),d}}var ye={placement:"bottom",modifiers:[],strategy:"absolute"};function oe(){for(var I=arguments.length,d=new Array(I),g=0;g<I;g++)d[g]=arguments[g];return!d.some(function(S){return!(S&&"function"==typeof S.getBoundingClientRect)})}function Be(I){void 0===I&&(I={});var g=I.defaultModifiers,S=void 0===g?[]:g,U=I.defaultOptions,Q=void 0===U?ye:U;return function(Ee,xe,rt){void 0===rt&&(rt=Q);var bt={placement:"bottom",orderedModifiers:[],options:Object.assign({},ye,Q),modifiersData:{},elements:{reference:Ee,popper:xe},attributes:{},styles:{}},Jt=[],nr=!1,bn={state:bt,setOptions:function(Ar){var Ci="function"==typeof Ar?Ar(bt.options):Ar;Bn(),bt.options=Object.assign({},Q,bt.options,Ci),bt.scrollParents={reference:Gt(Ee)?Gr(Ee):Ee.contextElement?Gr(Ee.contextElement):[],popper:Gr(xe)};var qi=function Ne(I){var d=Vi(I);return Pi.reduce(function(g,S){return g.concat(d.filter(function(U){return U.phase===S}))},[])}(function ce(I){var d=I.reduce(function(g,S){var U=g[S.name];return g[S.name]=U?Object.assign({},U,S,{options:Object.assign({},U.options,S.options),data:Object.assign({},U.data,S.data)}):S,g},{});return Object.keys(d).map(function(g){return d[g]})}([].concat(S,bt.options.modifiers)));return bt.orderedModifiers=qi.filter(function(un){return un.enabled}),function Un(){bt.orderedModifiers.forEach(function(sr){var Ci=sr.options,un=sr.effect;if("function"==typeof un){var es=un({state:bt,name:sr.name,instance:bn,options:void 0===Ci?{}:Ci});Jt.push(es||function(){})}})}(),bn.update()},forceUpdate:function(){if(!nr){var Ar=bt.elements,Ci=Ar.reference,qi=Ar.popper;if(oe(Ci,qi)){bt.rects={reference:_r(Ci,yi(qi),"fixed"===bt.options.strategy),popper:Cr(qi)},bt.reset=!1,bt.placement=bt.options.placement,bt.orderedModifiers.forEach(function(Ai){return bt.modifiersData[Ai.name]=Object.assign({},Ai.data)});for(var un=0;un<bt.orderedModifiers.length;un++)if(!0!==bt.reset){var es=bt.orderedModifiers[un],Fi=es.fn,Ei=es.options;"function"==typeof Fi&&(bt=Fi({state:bt,options:void 0===Ei?{}:Ei,name:es.name,instance:bn})||bt)}else bt.reset=!1,un=-1}}},update:Re(function(){return new Promise(function(sr){bn.forceUpdate(),sr(bt)})}),destroy:function(){Bn(),nr=!0}};if(!oe(Ee,xe))return bn;function Bn(){Jt.forEach(function(sr){return sr()}),Jt=[]}return bn.setOptions(rt).then(function(sr){!nr&&rt.onFirstUpdate&&rt.onFirstUpdate(sr)}),bn}}var De={passive:!0};function it(I){return I.split("-")[0]}function Pt(I){return I.split("-")[1]}function Dn(I){return["top","bottom"].indexOf(I)>=0?"x":"y"}function Tn(I){var xe,d=I.reference,g=I.element,S=I.placement,U=S?it(S):null,Q=S?Pt(S):null,me=d.x+d.width/2-g.width/2,Ee=d.y+d.height/2-g.height/2;switch(U){case Dr:xe={x:me,y:d.y-g.height};break;case jn:xe={x:me,y:d.y+d.height};break;case ri:xe={x:d.x+d.width,y:Ee};break;case Yn:xe={x:d.x-g.width,y:Ee};break;default:xe={x:d.x,y:d.y}}var rt=U?Dn(U):null;if(null!=rt){var bt="y"===rt?"height":"width";switch(Q){case An:xe[rt]=xe[rt]-(d[bt]/2-g[bt]/2);break;case Yr:xe[rt]=xe[rt]+(d[bt]/2-g[bt]/2)}}return xe}var Et={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zt(I){var d,g=I.popper,S=I.popperRect,U=I.placement,Q=I.variation,me=I.offsets,Ee=I.position,xe=I.gpuAcceleration,rt=I.adaptive,bt=I.roundOffsets,Jt=I.isFixed,nr=me.x,bn=void 0===nr?0:nr,Un=me.y,Bn=void 0===Un?0:Un,sr="function"==typeof bt?bt({x:bn,y:Bn}):{x:bn,y:Bn};bn=sr.x,Bn=sr.y;var Ar=me.hasOwnProperty("x"),Ci=me.hasOwnProperty("y"),qi=Yn,un=Dr,es=window;if(rt){var Fi=yi(g),Ei="clientHeight",wi="clientWidth";Fi===Zt(g)&&"static"!==On(Fi=nn(g)).position&&"absolute"===Ee&&(Ei="scrollHeight",wi="scrollWidth"),(U===Dr||(U===Yn||U===ri)&&Q===Yr)&&(un=jn,Bn-=(Jt&&Fi===es&&es.visualViewport?es.visualViewport.height:Fi[Ei])-S.height,Bn*=xe?1:-1),U!==Yn&&(U!==Dr&&U!==jn||Q!==Yr)||(qi=ri,bn-=(Jt&&Fi===es&&es.visualViewport?es.visualViewport.width:Fi[wi])-S.width,bn*=xe?1:-1)}var uo,Gs=Object.assign({position:Ee},rt&&Et),Aa=!0===bt?function ot(I,d){var S=I.y,U=d.devicePixelRatio||1;return{x:Ke(I.x*U)/U||0,y:Ke(S*U)/U||0}}({x:bn,y:Bn},Zt(g)):{x:bn,y:Bn};return bn=Aa.x,Bn=Aa.y,Object.assign({},Gs,xe?((uo={})[un]=Ci?"0":"",uo[qi]=Ar?"0":"",uo.transform=(es.devicePixelRatio||1)<=1?"translate("+bn+"px, "+Bn+"px)":"translate3d("+bn+"px, "+Bn+"px, 0)",uo):((d={})[un]=Ci?Bn+"px":"",d[qi]=Ar?bn+"px":"",d.transform="",d))}var ea={left:"right",right:"left",bottom:"top",top:"bottom"};function Lr(I){return I.replace(/left|right|bottom|top/g,function(d){return ea[d]})}var Ks={start:"end",end:"start"};function Wi(I){return I.replace(/start|end/g,function(d){return Ks[d]})}function oi(I,d){var g=d.getRootNode&&d.getRootNode();if(I.contains(d))return!0;if(g&&br(g)){var S=d;do{if(S&&I.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function ai(I){return Object.assign({},I,{left:I.x,top:I.y,right:I.x+I.width,bottom:I.y+I.height})}function Qi(I,d,g){return d===wn?ai(function en(I,d){var g=Zt(I),S=nn(I),U=g.visualViewport,Q=S.clientWidth,me=S.clientHeight,Ee=0,xe=0;if(U){Q=U.width,me=U.height;var rt=ut();(rt||!rt&&"fixed"===d)&&(Ee=U.offsetLeft,xe=U.offsetTop)}return{width:Q,height:me,x:Ee+Cn(I),y:xe}}(I,g)):Gt(d)?function as(I,d){var g=ze(I,!1,"fixed"===d);return g.top=g.top+I.clientTop,g.left=g.left+I.clientLeft,g.bottom=g.top+I.clientHeight,g.right=g.left+I.clientWidth,g.width=I.clientWidth,g.height=I.clientHeight,g.x=g.left,g.y=g.top,g}(d,g):ai(function mr(I){var d,g=nn(I),S=mt(I),U=null==(d=I.ownerDocument)?void 0:d.body,Q=Vn(g.scrollWidth,g.clientWidth,U?U.scrollWidth:0,U?U.clientWidth:0),me=Vn(g.scrollHeight,g.clientHeight,U?U.scrollHeight:0,U?U.clientHeight:0),Ee=-S.scrollLeft+Cn(I),xe=-S.scrollTop;return"rtl"===On(U||g).direction&&(Ee+=Vn(g.clientWidth,U?U.clientWidth:0)-Q),{width:Q,height:me,x:Ee,y:xe}}(nn(I)))}function He(I){return Object.assign({},{top:0,right:0,bottom:0,left:0},I)}function $e(I,d){return d.reduce(function(g,S){return g[S]=I,g},{})}function St(I,d){void 0===d&&(d={});var S=d.placement,U=void 0===S?I.placement:S,Q=d.strategy,me=void 0===Q?I.strategy:Q,Ee=d.boundary,xe=void 0===Ee?ii:Ee,rt=d.rootBoundary,bt=void 0===rt?wn:rt,Jt=d.elementContext,nr=void 0===Jt?Qr:Jt,bn=d.altBoundary,Un=void 0!==bn&&bn,Bn=d.padding,sr=void 0===Bn?0:Bn,Ar=He("number"!=typeof sr?sr:$e(sr,cn)),qi=I.rects.popper,un=I.elements[Un?nr===Qr?si:Qr:nr],es=function ei(I,d,g,S){var U="clippingParents"===d?function qs(I){var d=Gr(Hr(I)),S=["absolute","fixed"].indexOf(On(I).position)>=0&&Wr(I)?yi(I):I;return Gt(S)?d.filter(function(U){return Gt(U)&&oi(U,S)&&"body"!==Rt(U)}):[]}(I):[].concat(d),Q=[].concat(U,[g]),Ee=Q.reduce(function(xe,rt){var bt=Qi(I,rt,S);return xe.top=Vn(bt.top,xe.top),xe.right=Jn(bt.right,xe.right),xe.bottom=Jn(bt.bottom,xe.bottom),xe.left=Vn(bt.left,xe.left),xe},Qi(I,Q[0],S));return Ee.width=Ee.right-Ee.left,Ee.height=Ee.bottom-Ee.top,Ee.x=Ee.left,Ee.y=Ee.top,Ee}(Gt(un)?un:un.contextElement||nn(I.elements.popper),xe,bt,me),Fi=ze(I.elements.reference),Ei=Tn({reference:Fi,element:qi,strategy:"absolute",placement:U}),wi=ai(Object.assign({},qi,Ei)),pi=nr===Qr?wi:Fi,Ai={top:es.top-pi.top+Ar.top,bottom:pi.bottom-es.bottom+Ar.bottom,left:es.left-pi.left+Ar.left,right:pi.right-es.right+Ar.right},Gs=I.modifiersData.offset;if(nr===Qr&&Gs){var Aa=Gs[U];Object.keys(Ai).forEach(function(uo){var Uu=[ri,jn].indexOf(uo)>=0?1:-1,rc=[Dr,jn].indexOf(uo)>=0?"y":"x";Ai[uo]+=Aa[rc]*Uu})}return Ai}function Is(I,d,g){return Vn(I,Jn(d,g))}function Br(I,d,g){return void 0===g&&(g={x:0,y:0}),{top:I.top-d.height-g.y,right:I.right-d.width+g.x,bottom:I.bottom-d.height+g.y,left:I.left-d.width-g.x}}function vr(I){return[Dr,ri,jn,Yn].some(function(d){return I[d]>=0})}var bs=Be({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function ve(I){var d=I.state,g=I.instance,S=I.options,U=S.scroll,Q=void 0===U||U,me=S.resize,Ee=void 0===me||me,xe=Zt(d.elements.popper),rt=[].concat(d.scrollParents.reference,d.scrollParents.popper);return Q&&rt.forEach(function(bt){bt.addEventListener("scroll",g.update,De)}),Ee&&xe.addEventListener("resize",g.update,De),function(){Q&&rt.forEach(function(bt){bt.removeEventListener("scroll",g.update,De)}),Ee&&xe.removeEventListener("resize",g.update,De)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function qr(I){var d=I.state;d.modifiersData[I.name]=Tn({reference:d.rects.reference,element:d.rects.popper,strategy:"absolute",placement:d.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function yn(I){var d=I.state,g=I.options,S=g.gpuAcceleration,U=void 0===S||S,Q=g.adaptive,me=void 0===Q||Q,Ee=g.roundOffsets,xe=void 0===Ee||Ee,rt={placement:it(d.placement),variation:Pt(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:U,isFixed:"fixed"===d.options.strategy};null!=d.modifiersData.popperOffsets&&(d.styles.popper=Object.assign({},d.styles.popper,zt(Object.assign({},rt,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:me,roundOffsets:xe})))),null!=d.modifiersData.arrow&&(d.styles.arrow=Object.assign({},d.styles.arrow,zt(Object.assign({},rt,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:xe})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function hr(I){var d=I.state;Object.keys(d.elements).forEach(function(g){var S=d.styles[g]||{},U=d.attributes[g]||{},Q=d.elements[g];!Wr(Q)||!Rt(Q)||(Object.assign(Q.style,S),Object.keys(U).forEach(function(me){var Ee=U[me];!1===Ee?Q.removeAttribute(me):Q.setAttribute(me,!0===Ee?"":Ee)}))})},effect:function In(I){var d=I.state,g={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,g.popper),d.styles=g,d.elements.arrow&&Object.assign(d.elements.arrow.style,g.arrow),function(){Object.keys(d.elements).forEach(function(S){var U=d.elements[S],Q=d.attributes[S]||{},Ee=Object.keys(d.styles.hasOwnProperty(S)?d.styles[S]:g[S]).reduce(function(xe,rt){return xe[rt]="",xe},{});!Wr(U)||!Rt(U)||(Object.assign(U.style,Ee),Object.keys(Q).forEach(function(xe){U.removeAttribute(xe)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Ui(I){var d=I.state,S=I.name,U=I.options.offset,Q=void 0===U?[0,0]:U,me=cr.reduce(function(bt,Jt){return bt[Jt]=function kr(I,d,g){var S=it(I),U=[Yn,Dr].indexOf(S)>=0?-1:1,Q="function"==typeof g?g(Object.assign({},d,{placement:I})):g,me=Q[0],Ee=Q[1];return me=me||0,Ee=(Ee||0)*U,[Yn,ri].indexOf(S)>=0?{x:Ee,y:me}:{x:me,y:Ee}}(Jt,d.rects,Q),bt},{}),Ee=me[d.placement],rt=Ee.y;null!=d.modifiersData.popperOffsets&&(d.modifiersData.popperOffsets.x+=Ee.x,d.modifiersData.popperOffsets.y+=rt),d.modifiersData[S]=me}},{name:"flip",enabled:!0,phase:"main",fn:function Sr(I){var d=I.state,g=I.options,S=I.name;if(!d.modifiersData[S]._skip){for(var U=g.mainAxis,Q=void 0===U||U,me=g.altAxis,Ee=void 0===me||me,xe=g.fallbackPlacements,rt=g.padding,bt=g.boundary,Jt=g.rootBoundary,nr=g.altBoundary,bn=g.flipVariations,Un=void 0===bn||bn,Bn=g.allowedAutoPlacements,sr=d.options.placement,Ar=it(sr),qi=xe||(Ar!==sr&&Un?function Kn(I){if(it(I)===er)return[];var d=Lr(I);return[Wi(I),d,Wi(d)]}(sr):[Lr(sr)]),un=[sr].concat(qi).reduce(function(vs,Ua){return vs.concat(it(Ua)===er?function Ht(I,d){void 0===d&&(d={});var U=d.boundary,Q=d.rootBoundary,me=d.padding,Ee=d.flipVariations,xe=d.allowedAutoPlacements,rt=void 0===xe?cr:xe,bt=Pt(d.placement),Jt=bt?Ee?Xr:Xr.filter(function(Un){return Pt(Un)===bt}):cn,nr=Jt.filter(function(Un){return rt.indexOf(Un)>=0});0===nr.length&&(nr=Jt);var bn=nr.reduce(function(Un,Bn){return Un[Bn]=St(I,{placement:Bn,boundary:U,rootBoundary:Q,padding:me})[it(Bn)],Un},{});return Object.keys(bn).sort(function(Un,Bn){return bn[Un]-bn[Bn]})}(d,{placement:Ua,boundary:bt,rootBoundary:Jt,padding:rt,flipVariations:Un,allowedAutoPlacements:Bn}):Ua)},[]),es=d.rects.reference,Fi=d.rects.popper,Ei=new Map,wi=!0,pi=un[0],Ai=0;Ai<un.length;Ai++){var Gs=un[Ai],Aa=it(Gs),uo=Pt(Gs)===An,Uu=[Dr,jn].indexOf(Aa)>=0,rc=Uu?"width":"height",vn=St(d,{placement:Gs,boundary:bt,rootBoundary:Jt,altBoundary:nr,padding:rt}),qn=Uu?uo?ri:Yn:uo?jn:Dr;es[rc]>Fi[rc]&&(qn=Lr(qn));var Rr=Lr(qn),Ri=[];if(Q&&Ri.push(vn[Aa]<=0),Ee&&Ri.push(vn[qn]<=0,vn[Rr]<=0),Ri.every(function(vs){return vs})){pi=Gs,wi=!1;break}Ei.set(Gs,Ri)}if(wi)for(var il=function(Ua){var qc=un.find(function(_o){var Po=Ei.get(_o);if(Po)return Po.slice(0,Ua).every(function(Co){return Co})});if(qc)return pi=qc,"break"},Go=Un?3:1;Go>0&&"break"!==il(Go);Go--);d.placement!==pi&&(d.modifiersData[S]._skip=!0,d.placement=pi,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function Ss(I){var d=I.state,g=I.options,S=I.name,U=g.mainAxis,Q=void 0===U||U,me=g.altAxis,Ee=void 0!==me&&me,nr=g.tether,bn=void 0===nr||nr,Un=g.tetherOffset,Bn=void 0===Un?0:Un,sr=St(d,{boundary:g.boundary,rootBoundary:g.rootBoundary,padding:g.padding,altBoundary:g.altBoundary}),Ar=it(d.placement),Ci=Pt(d.placement),qi=!Ci,un=Dn(Ar),es=function ti(I){return"x"===I?"y":"x"}(un),Fi=d.modifiersData.popperOffsets,Ei=d.rects.reference,wi=d.rects.popper,pi="function"==typeof Bn?Bn(Object.assign({},d.rects,{placement:d.placement})):Bn,Ai="number"==typeof pi?{mainAxis:pi,altAxis:pi}:Object.assign({mainAxis:0,altAxis:0},pi),Gs=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,Aa={x:0,y:0};if(Fi){if(Q){var uo,Uu="y"===un?Dr:Yn,rc="y"===un?jn:ri,vn="y"===un?"height":"width",qn=Fi[un],Rr=qn+sr[Uu],Ri=qn-sr[rc],co=bn?-wi[vn]/2:0,il=Ci===An?Ei[vn]:wi[vn],Go=Ci===An?-wi[vn]:-Ei[vn],Cl=d.elements.arrow,vs=bn&&Cl?Cr(Cl):{width:0,height:0},Ua=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},qc=Ua[Uu],_o=Ua[rc],Po=Is(0,Ei[vn],vs[vn]),Co=qi?Ei[vn]/2-co-Po-qc-Ai.mainAxis:il-Po-qc-Ai.mainAxis,ic=qi?-Ei[vn]/2+co+Po+_o+Ai.mainAxis:Go+Po+_o+Ai.mainAxis,sc=d.elements.arrow&&yi(d.elements.arrow),Bu=null!=(uo=Gs?.[un])?uo:0,Td=qn+ic-Bu,Sd=Is(bn?Jn(Rr,qn+Co-Bu-(sc?"y"===un?sc.clientTop||0:sc.clientLeft||0:0)):Rr,qn,bn?Vn(Ri,Td):Ri);Fi[un]=Sd,Aa[un]=Sd-qn}if(Ee){var Pc,Gl=Fi[es],$u="y"===es?"height":"width",Xd=Gl+sr["x"===un?Dr:Yn],id=Gl-sr["x"===un?jn:ri],Zc=-1!==[Dr,Yn].indexOf(Ar),h=null!=(Pc=Gs?.[es])?Pc:0,u=Zc?Xd:Gl-Ei[$u]-wi[$u]-h+Ai.altAxis,c=Zc?Gl+Ei[$u]+wi[$u]-h-Ai.altAxis:id,y=bn&&Zc?function Es(I,d,g){var S=Is(I,d,g);return S>g?g:S}(u,Gl,c):Is(bn?u:Xd,Gl,bn?c:id);Fi[es]=y,Aa[es]=y-Gl}d.modifiersData[S]=Aa}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function Hs(I){var d,g=I.state,S=I.name,U=I.options,Q=g.elements.arrow,me=g.modifiersData.popperOffsets,Ee=it(g.placement),xe=Dn(Ee),bt=[Yn,ri].indexOf(Ee)>=0?"height":"width";if(Q&&me){var Jt=function(d,g){return He("number"!=typeof(d="function"==typeof d?d(Object.assign({},g.rects,{placement:g.placement})):d)?d:$e(d,cn))}(U.padding,g),nr=Cr(Q),bn="y"===xe?Dr:Yn,Un="y"===xe?jn:ri,Bn=g.rects.reference[bt]+g.rects.reference[xe]-me[xe]-g.rects.popper[bt],sr=me[xe]-g.rects.reference[xe],Ar=yi(Q),Ci=Ar?"y"===xe?Ar.clientHeight||0:Ar.clientWidth||0:0,Fi=Ci/2-nr[bt]/2+(Bn/2-sr/2),Ei=Is(Jt[bn],Fi,Ci-nr[bt]-Jt[Un]);g.modifiersData[S]=((d={})[xe]=Ei,d.centerOffset=Ei-Fi,d)}},effect:function Zo(I){var d=I.state,S=I.options.element,U=void 0===S?"[data-popper-arrow]":S;null!=U&&("string"==typeof U&&!(U=d.elements.popper.querySelector(U))||oi(d.elements.popper,U)&&(d.elements.arrow=U))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function As(I){var d=I.state,g=I.name,S=d.rects.reference,U=d.rects.popper,Q=d.modifiersData.preventOverflow,me=St(d,{elementContext:"reference"}),Ee=St(d,{altBoundary:!0}),xe=Br(me,S),rt=Br(Ee,U,Q),bt=vr(xe),Jt=vr(rt);d.modifiersData[g]={referenceClippingOffsets:xe,popperEscapeOffsets:rt,isReferenceHidden:bt,hasPopperEscaped:Jt},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":bt,"data-popper-escaped":Jt})}}]}),_i=function(){return _i=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},_i.apply(this,arguments)},ys=function(I,d,g){if(g||2===arguments.length)for(var Q,S=0,U=d.length;S<U;S++)(Q||!(S in d))&&(Q||(Q=Array.prototype.slice.call(d,0,S)),Q[S]=d[S]);return I.concat(Q||Array.prototype.slice.call(d))},Tr={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,onShow:function(){},onHide:function(){},onToggle:function(){}},lr=function(){function I(d,g,S){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=Tr),this._targetEl=d,this._triggerEl=g,this._options=_i(_i({},Tr),S),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return I.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},I.prototype._setupEventListeners=function(){var d=this,g=this._getTriggerEvents();"click"===this._options.triggerType&&g.showEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){d.toggle()})}),"hover"===this._options.triggerType&&(g.showEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){"click"===S?d.toggle():setTimeout(function(){d.show()},d._options.delay)}),d._targetEl.addEventListener(S,function(){d.show()})}),g.hideEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){setTimeout(function(){d._targetEl.matches(":hover")||d.hide()},d._options.delay)}),d._targetEl.addEventListener(S,function(){setTimeout(function(){d._triggerEl.matches(":hover")||d.hide()},d._options.delay)})}))},I.prototype._createPopperInstance=function(){return bs(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},I.prototype._setupClickOutsideListener=function(){var d=this;this._clickOutsideEventListener=function(g){d._handleClickOutside(g,d._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._handleClickOutside=function(d,g){var S=d.target;S!==g&&!g.contains(S)&&!this._triggerEl.contains(S)&&this.isVisible()&&this.hide()},I.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},I.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},I.prototype.isVisible=function(){return this._visible},I.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(d){return _i(_i({},d),{modifiers:ys(ys([],d.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},I.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(d){return _i(_i({},d),{modifiers:ys(ys([],d.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},I}();function vi(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(I){var d=I.getAttribute("data-dropdown-toggle"),g=document.getElementById(d);if(g){var S=I.getAttribute("data-dropdown-placement"),U=I.getAttribute("data-dropdown-offset-skidding"),Q=I.getAttribute("data-dropdown-offset-distance"),me=I.getAttribute("data-dropdown-trigger"),Ee=I.getAttribute("data-dropdown-delay");new lr(g,I,{placement:S||Tr.placement,triggerType:me||Tr.triggerType,offsetSkidding:U?parseInt(U):Tr.offsetSkidding,offsetDistance:Q?parseInt(Q):Tr.offsetDistance,delay:Ee?parseInt(Ee):Tr.delay})}else console.error('The dropdown element with id "'.concat(d,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=lr,window.initDropdowns=vi);var eo=function(){return eo=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},eo.apply(this,arguments)},Bi={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},xs=function(){function I(d,g){void 0===d&&(d=null),void 0===g&&(g=Bi),this._targetEl=d,this._options=eo(eo({},Bi),g),this._isHidden=!0,this._backdropEl=null,this._init()}return I.prototype._init=function(){var d=this;this._targetEl&&this._getPlacementClasses().map(function(g){d._targetEl.classList.add(g)})},I.prototype._createBackdrop=function(){var d;if(this._isHidden){var g=document.createElement("div");g.setAttribute("modal-backdrop",""),(d=g.classList).add.apply(d,this._options.backdropClasses.split(" ")),document.querySelector("body").append(g),this._backdropEl=g}},I.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},I.prototype._setupModalCloseEventListeners=function(){var d=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(g){d._handleOutsideClick(g.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(g){"Escape"===g.key&&d.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},I.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},I.prototype._handleOutsideClick=function(d){(d===this._targetEl||d===this._backdropEl&&this.isVisible())&&this.hide()},I.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},I.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},I.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),this._options.closable&&this._setupModalCloseEventListeners(),this._options.onShow(this))},I.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},I.prototype.isVisible=function(){return!this._isHidden},I.prototype.isHidden=function(){return this._isHidden},I}(),$a=function(I,d){return d.some(function(g){return g.id===I})?d.find(function(g){return g.id===I}):null};function Yo(){var I=[];document.querySelectorAll("[data-modal-target]").forEach(function(d){var g=d.getAttribute("data-modal-target"),S=document.getElementById(g);if(S){var U=S.getAttribute("data-modal-placement"),Q=S.getAttribute("data-modal-backdrop");$a(g,I)||I.push({id:g,object:new xs(S,{placement:U||Bi.placement,backdrop:Q||Bi.backdrop})})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(d){var g=d.getAttribute("data-modal-toggle"),S=document.getElementById(g);if(S){var U=S.getAttribute("data-modal-placement"),Q=S.getAttribute("data-modal-backdrop"),me=$a(g,I);me||(me={id:g,object:new xs(S,{placement:U||Bi.placement,backdrop:Q||Bi.backdrop})},I.push(me)),d.addEventListener("click",function(){me.object.toggle()})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(d){var g=d.getAttribute("data-modal-show");if(document.getElementById(g)){var U=$a(g,I);U?d.addEventListener("click",function(){U.object.isHidden&&U.object.show()}):console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(d){var g=d.getAttribute("data-modal-hide");if(document.getElementById(g)){var U=$a(g,I);U?d.addEventListener("click",function(){U.object.isVisible&&U.object.hide()}):console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=xs,window.initModals=Yo);var to=function(){return to=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},to.apply(this,arguments)},vo={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},xo=function(){function I(d,g){void 0===d&&(d=null),void 0===g&&(g=vo),this._targetEl=d,this._options=to(to({},vo),g),this._visible=!1,this._init()}return I.prototype._init=function(){var d=this;this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(function(g){d._targetEl.classList.add(g)}),document.addEventListener("keydown",function(g){"Escape"===g.key&&d.isVisible()&&d.hide()})},I.prototype.hide=function(){var d=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){d._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){d._targetEl.classList.add(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){d._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){d._targetEl.classList.add(g)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},I.prototype.show=function(){var d=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){d._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){d._targetEl.classList.remove(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){d._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){d._targetEl.classList.remove(g)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},I.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},I.prototype._createBackdrop=function(){var d,g=this;if(!this._visible){var S=document.createElement("div");S.setAttribute("drawer-backdrop",""),(d=S.classList).add.apply(d,this._options.backdropClasses.split(" ")),document.querySelector("body").append(S),S.addEventListener("click",function(){g.hide()})}},I.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()},I.prototype._getPlacementClasses=function(d){switch(d){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},I.prototype.isHidden=function(){return!this._visible},I.prototype.isVisible=function(){return this._visible},I}(),no=function(I,d){if(d.some(function(g){return g.id===I}))return d.find(function(g){return g.id===I})};function ro(){var I=[];document.querySelectorAll("[data-drawer-target]").forEach(function(d){var g=d.getAttribute("data-drawer-target"),S=document.getElementById(g);if(S){var U=d.getAttribute("data-drawer-placement"),Q=d.getAttribute("data-drawer-body-scrolling"),me=d.getAttribute("data-drawer-backdrop"),Ee=d.getAttribute("data-drawer-edge"),xe=d.getAttribute("data-drawer-edge-offset");no(g,I)||I.push({id:g,object:new xo(S,{placement:U||vo.placement,bodyScrolling:Q?"true"===Q:vo.bodyScrolling,backdrop:me?"true"===me:vo.backdrop,edge:Ee?"true"===Ee:vo.edge,edgeOffset:xe||vo.edgeOffset})})}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(d){var g=d.getAttribute("data-drawer-toggle");if(document.getElementById(g)){var U=no(g,I);U?d.addEventListener("click",function(){U.object.toggle()}):console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(d){var g=d.getAttribute("data-drawer-dismiss")?d.getAttribute("data-drawer-dismiss"):d.getAttribute("data-drawer-hide");if(document.getElementById(g)){var U=no(g,I);U?d.addEventListener("click",function(){U.object.hide()}):console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(d){var g=d.getAttribute("data-drawer-show");if(document.getElementById(g)){var U=no(g,I);U?d.addEventListener("click",function(){U.object.show()}):console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=xo,window.initDrawers=ro);var io=function(){return io=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},io.apply(this,arguments)},ta={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},Eo=function(){function I(d,g){void 0===d&&(d=[]),void 0===g&&(g=ta),this._items=d,this._activeTab=g?this.getTab(g.defaultTabId):null,this._options=io(io({},ta),g),this._init()}return I.prototype._init=function(){var d=this;this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(g){g.triggerEl.addEventListener("click",function(){d.show(g.id)})}))},I.prototype.getActiveTab=function(){return this._activeTab},I.prototype._setActiveTab=function(d){this._activeTab=d},I.prototype.getTab=function(d){return this._items.filter(function(g){return g.id===d})[0]},I.prototype.show=function(d,g){var S,U,Q=this;void 0===g&&(g=!1);var me=this.getTab(d);me===this._activeTab&&!g||(this._items.map(function(Ee){var xe,rt;Ee!==me&&((xe=Ee.triggerEl.classList).remove.apply(xe,Q._options.activeClasses.split(" ")),(rt=Ee.triggerEl.classList).add.apply(rt,Q._options.inactiveClasses.split(" ")),Ee.targetEl.classList.add("hidden"),Ee.triggerEl.setAttribute("aria-selected","false"))}),(S=me.triggerEl.classList).add.apply(S,this._options.activeClasses.split(" ")),(U=me.triggerEl.classList).remove.apply(U,this._options.inactiveClasses.split(" ")),me.triggerEl.setAttribute("aria-selected","true"),me.targetEl.classList.remove("hidden"),this._setActiveTab(me),this._options.onShow(this,me))},I}();function zs(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(I){var d=[],g=null;I.querySelectorAll('[role="tab"]').forEach(function(S){var U="true"===S.getAttribute("aria-selected"),Q={id:S.getAttribute("data-tabs-target"),triggerEl:S,targetEl:document.querySelector(S.getAttribute("data-tabs-target"))};d.push(Q),U&&(g=Q.id)}),new Eo(d,{defaultTabId:g})})}typeof window<"u"&&(window.Tabs=Eo,window.initTabs=zs);var re=function(){return re=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},re.apply(this,arguments)},Te=function(I,d,g){if(g||2===arguments.length)for(var Q,S=0,U=d.length;S<U;S++)(Q||!(S in d))&&(Q||(Q=Array.prototype.slice.call(d,0,S)),Q[S]=d[S]);return I.concat(Q||Array.prototype.slice.call(d))},Fe={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},qe=function(){function I(d,g,S){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=Fe),this._targetEl=d,this._triggerEl=g,this._options=re(re({},Fe),S),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return I.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},I.prototype._setupEventListeners=function(){var d=this,g=this._getTriggerEvents();g.showEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){d.show()})}),g.hideEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){d.hide()})})},I.prototype._createPopperInstance=function(){return bs(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},I.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},I.prototype._setupKeydownListener=function(){var d=this;this._keydownEventListener=function(g){"Escape"===g.key&&d.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},I.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},I.prototype._setupClickOutsideListener=function(){var d=this;this._clickOutsideEventListener=function(g){d._handleClickOutside(g,d._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._handleClickOutside=function(d,g){var S=d.target;S!==g&&!g.contains(S)&&!this._triggerEl.contains(S)&&this.isVisible()&&this.hide()},I.prototype.isVisible=function(){return this._visible},I.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},I.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(d){return re(re({},d),{modifiers:Te(Te([],d.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},I.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(d){return re(re({},d),{modifiers:Te(Te([],d.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},I}();function Tt(){document.querySelectorAll("[data-tooltip-target]").forEach(function(I){var d=I.getAttribute("data-tooltip-target"),g=document.getElementById(d);if(g){var S=I.getAttribute("data-tooltip-trigger"),U=I.getAttribute("data-tooltip-placement");new qe(g,I,{placement:U||Fe.placement,triggerType:S||Fe.triggerType})}else console.error('The tooltip element with id "'.concat(d,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=qe,window.initTooltips=Tt);var xn=function(){return xn=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},xn.apply(this,arguments)},dn=function(I,d,g){if(g||2===arguments.length)for(var Q,S=0,U=d.length;S<U;S++)(Q||!(S in d))&&(Q||(Q=Array.prototype.slice.call(d,0,S)),Q[S]=d[S]);return I.concat(Q||Array.prototype.slice.call(d))},or={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Pr=function(){function I(d,g,S){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=or),this._targetEl=d,this._triggerEl=g,this._options=xn(xn({},or),S),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return I.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},I.prototype._setupEventListeners=function(){var d=this,g=this._getTriggerEvents();g.showEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){d.show()}),d._targetEl.addEventListener(S,function(){d.show()})}),g.hideEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){setTimeout(function(){d._targetEl.matches(":hover")||d.hide()},100)}),d._targetEl.addEventListener(S,function(){setTimeout(function(){d._triggerEl.matches(":hover")||d.hide()},100)})})},I.prototype._createPopperInstance=function(){return bs(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},I.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},I.prototype._setupKeydownListener=function(){var d=this;this._keydownEventListener=function(g){"Escape"===g.key&&d.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},I.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},I.prototype._setupClickOutsideListener=function(){var d=this;this._clickOutsideEventListener=function(g){d._handleClickOutside(g,d._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},I.prototype._handleClickOutside=function(d,g){var S=d.target;S!==g&&!g.contains(S)&&!this._triggerEl.contains(S)&&this.isVisible()&&this.hide()},I.prototype.isVisible=function(){return this._visible},I.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},I.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(d){return xn(xn({},d),{modifiers:dn(dn([],d.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},I.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(d){return xn(xn({},d),{modifiers:dn(dn([],d.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},I}();function Gi(){document.querySelectorAll("[data-popover-target]").forEach(function(I){var d=I.getAttribute("data-popover-target"),g=document.getElementById(d);if(g){var S=I.getAttribute("data-popover-trigger"),U=I.getAttribute("data-popover-placement"),Q=I.getAttribute("data-popover-offset");new Pr(g,I,{placement:U||or.placement,offset:Q?parseInt(Q):or.offset,triggerType:S||or.triggerType})}else console.error('The popover element with id "'.concat(d,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=Pr,window.initPopovers=Gi);var xi=function(){return xi=Object.assign||function(I){for(var d,g=1,S=arguments.length;g<S;g++)for(var U in d=arguments[g])Object.prototype.hasOwnProperty.call(d,U)&&(I[U]=d[U]);return I},xi.apply(this,arguments)},bi={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Vr=function(){function I(d,g,S,U){void 0===d&&(d=null),void 0===g&&(g=null),void 0===S&&(S=null),void 0===U&&(U=bi),this._parentEl=d,this._triggerEl=g,this._targetEl=S,this._options=xi(xi({},bi),U),this._visible=!1,this._init()}return I.prototype._init=function(){var d=this;if(this._triggerEl){var g=this._getTriggerEventTypes(this._options.triggerType);g.showEvents.forEach(function(S){d._triggerEl.addEventListener(S,function(){d.show()}),d._targetEl.addEventListener(S,function(){d.show()})}),g.hideEvents.forEach(function(S){d._parentEl.addEventListener(S,function(){d._parentEl.matches(":hover")||d.hide()})})}},I.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},I.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},I.prototype.toggle=function(){this._visible?this.hide():this.show()},I.prototype.isHidden=function(){return!this._visible},I.prototype.isVisible=function(){return this._visible},I.prototype._getTriggerEventTypes=function(d){switch(d){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},I}();function gi(){document.querySelectorAll("[data-dial-init]").forEach(function(I){var d=I.querySelector("[data-dial-toggle]");if(d){var g=d.getAttribute("data-dial-toggle"),S=document.getElementById(g);if(S){var U=d.getAttribute("data-dial-trigger");new Vr(I,d,S,{triggerType:U||bi.triggerType})}else console.error("Dial with id ".concat(g," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(I.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}function hi(){dt(),_t(),at(),on(),vi(),Yo(),ro(),zs(),Tt(),Gi(),gi()}typeof window<"u"&&(window.Dial=Vr,window.initDials=gi),typeof window<"u"&&(window.initFlowbite=hi),new Qe("load",[dt,_t,at,on,vi,Yo,ro,zs,Tt,Gi,gi]).init();let li=(()=>{class I{constructor(){this.title="task-angular"}ngOnInit(){hi()}}return I.\u0275fac=function(g){return new(g||I)},I.\u0275cmp=z.Xpm({type:I,selectors:[["app-root"]],decls:1,vars:0,template:function(g,S){1&g&&z._UZ(0,"router-outlet")},dependencies:[ie.lC]}),I})();var xr=K(433),jr=K(3692),Ls=K(4976),hs=K(7158),rs=K(259),wo=K(2313),Io=K(2810);class Do{constructor(d){return d}}const Cs="firestore",pr=new z.OlP("angularfire2.firestore-instances");function ji(I){return(d,g)=>{const S=d.runOutsideAngular(()=>I(g));return new Do(S)}}const Na={provide:class fr{constructor(){return(0,Ls.vb)(Cs)}},deps:[[new z.FiY,pr]]},Ha={provide:Do,useFactory:function xa(I,d){const g=(0,Ls.JM)(Cs,I,d);return g&&new Do(g)},deps:[[new z.FiY,pr],jr.Ot]};let sl=(()=>{class I{constructor(){(0,rs.KN)("angularfire",Ls.q4.full,"fst")}}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({providers:[Ha,Na]}),I})();function Rl(I,...d){return{ngModule:sl,providers:[{provide:pr,useFactory:ji(I),multi:!0,deps:[z.R0b,z.zs3,Ls.HU,jr.z6,[new z.FiY,hs.dh],[new z.FiY,wo.nm],...d]}]}}const Fo=(0,Ls.u3)(Io.ad,!0);var sn=K(1205),Si=K(5197),yr=K(2011);const ui={firebaseConfig:{apiKey:"AIzaSyB7SGEPnROILjRHEc3FXbFT_jndZCHeZ1E",authDomain:"angularmemorando.firebaseapp.com",databaseURL:"https://angularmemorando-default-rtdb.firebaseio.com",projectId:"angularmemorando",storageBucket:"angularmemorando.appspot.com",messagingSenderId:"988276496590",appId:"1:988276496590:web:b11d2ae472455bcf53d89f"},production:!1};var kn=K(7340);function ir(I){return new z.vHH(3e3,!1)}function ra(){return typeof window<"u"&&typeof window.document<"u"}function ia(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ya(I){switch(I.length){case 0:return new kn.ZN;case 1:return I[0];default:return new kn.ZE(I)}}function po(I,d,g,S,U=new Map,Q=new Map){const me=[],Ee=[];let xe=-1,rt=null;if(S.forEach(bt=>{const Jt=bt.get("offset"),nr=Jt==xe,bn=nr&&rt||new Map;bt.forEach((Un,Bn)=>{let sr=Bn,Ar=Un;if("offset"!==Bn)switch(sr=d.normalizePropertyName(sr,me),Ar){case kn.k1:Ar=U.get(Bn);break;case kn.l3:Ar=Q.get(Bn);break;default:Ar=d.normalizeStyleValue(Bn,sr,Ar,me)}bn.set(sr,Ar)}),nr||Ee.push(bn),rt=bn,xe=Jt}),me.length)throw function ps(I){return new z.vHH(3502,!1)}();return Ee}function dl(I,d,g,S){switch(d){case"start":I.onStart(()=>S(g&&hl(g,"start",I)));break;case"done":I.onDone(()=>S(g&&hl(g,"done",I)));break;case"destroy":I.onDestroy(()=>S(g&&hl(g,"destroy",I)))}}function hl(I,d,g){const Q=Yl(I.element,I.triggerName,I.fromState,I.toState,d||I.phaseName,g.totalTime??I.totalTime,!!g.disabled),me=I._data;return null!=me&&(Q._data=me),Q}function Yl(I,d,g,S,U="",Q=0,me){return{element:I,triggerName:d,fromState:g,toState:S,phaseName:U,totalTime:Q,disabled:!!me}}function Ms(I,d,g){let S=I.get(d);return S||I.set(d,S=g),S}function qa(I){const d=I.indexOf(":");return[I.substring(1,d),I.slice(d+1)]}let ft=(I,d)=>!1,Du=(I,d,g)=>[],ci=null;function fu(I){const d=I.parentNode||I.host;return d===ci?null:d}(ia()||typeof Element<"u")&&(ra()?(ci=(()=>document.documentElement)(),ft=(I,d)=>{for(;d;){if(d===I)return!0;d=fu(d)}return!1}):ft=(I,d)=>I.contains(d),Du=(I,d,g)=>{if(g)return Array.from(I.querySelectorAll(d));const S=I.querySelector(d);return S?[S]:[]});let Za=null,Xo=!1;const qu=ft,Ao=Du;let Ya=(()=>{class I{validateStyleProperty(g){return function Uc(I){Za||(Za=function Ql(){return typeof document<"u"?document.body:null}()||{},Xo=!!Za.style&&"WebkitAppearance"in Za.style);let d=!0;return Za.style&&!function Ll(I){return"ebkit"==I.substring(1,6)}(I)&&(d=I in Za.style,!d&&Xo&&(d="Webkit"+I.charAt(0).toUpperCase()+I.slice(1)in Za.style)),d}(g)}matchesElement(g,S){return!1}containsElement(g,S){return qu(g,S)}getParentElement(g){return fu(g)}query(g,S,U){return Ao(g,S,U)}computeStyle(g,S,U){return U||""}animate(g,S,U,Q,me,Ee=[],xe){return new kn.ZN(U,Q)}}return I.\u0275fac=function(g){return new(g||I)},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac}),I})(),fl=(()=>{class I{}return I.NOOP=new Ya,I})();const Ds=1e3,js="ng-enter",va="ng-leave",D="ng-trigger",R=".ng-trigger",b="ng-animating",O=".ng-animating";function G(I){if("number"==typeof I)return I;const d=I.match(/^(-?[\.\d]+)(m?s)/);return!d||d.length<2?0:se(parseFloat(d[1]),d[2])}function se(I,d){return"s"===d?I*Ds:I}function ge(I,d,g){return I.hasOwnProperty("duration")?I:function et(I,d,g){let U,Q=0,me="";if("string"==typeof I){const Ee=I.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ee)return d.push(ir()),{duration:0,delay:0,easing:""};U=se(parseFloat(Ee[1]),Ee[2]);const xe=Ee[3];null!=xe&&(Q=se(parseFloat(xe),Ee[4]));const rt=Ee[5];rt&&(me=rt)}else U=I;if(!g){let Ee=!1,xe=d.length;U<0&&(d.push(function $i(){return new z.vHH(3100,!1)}()),Ee=!0),Q<0&&(d.push(function Uo(){return new z.vHH(3101,!1)}()),Ee=!0),Ee&&d.splice(xe,0,ir())}return{duration:U,delay:Q,easing:me}}(I,d,g)}function Nt(I,d={}){return Object.keys(I).forEach(g=>{d[g]=I[g]}),d}function Rn(I){const d=new Map;return Object.keys(I).forEach(g=>{d.set(g,I[g])}),d}function us(I,d=new Map,g){if(g)for(let[S,U]of g)d.set(S,U);for(let[S,U]of I)d.set(S,U);return d}function jo(I,d,g){return g?d+":"+g+";":""}function Ea(I){let d="";for(let g=0;g<I.style.length;g++){const S=I.style.item(g);d+=jo(0,S,I.style.getPropertyValue(S))}for(const g in I.style)I.style.hasOwnProperty(g)&&!g.startsWith("_")&&(d+=jo(0,Xa(g),I.style[g]));I.setAttribute("style",d)}function ao(I,d,g){I.style&&(d.forEach((S,U)=>{const Q=Jo(U);g&&!g.has(U)&&g.set(U,I.style[Q]),I.style[Q]=S}),ia()&&Ea(I))}function Xi(I,d){I.style&&(d.forEach((g,S)=>{const U=Jo(S);I.style[U]=""}),ia()&&Ea(I))}function wa(I){return Array.isArray(I)?1==I.length?I[0]:(0,kn.vP)(I):I}const Fa=new RegExp("{{\\s*(.+?)\\s*}}","g");function Zu(I){let d=[];if("string"==typeof I){let g;for(;g=Fa.exec(I);)d.push(g[1]);Fa.lastIndex=0}return d}function gl(I,d,g){const S=I.toString(),U=S.replace(Fa,(Q,me)=>{let Ee=d[me];return null==Ee&&(g.push(function Ln(I){return new z.vHH(3003,!1)}()),Ee=""),Ee.toString()});return U==S?I:U}function Qa(I){const d=[];let g=I.next();for(;!g.done;)d.push(g.value),g=I.next();return d}const Qs=/-+([a-z0-9])/g;function Jo(I){return I.replace(Qs,(...d)=>d[1].toUpperCase())}function Xa(I){return I.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lo(I,d,g){switch(d.type){case 7:return I.visitTrigger(d,g);case 0:return I.visitState(d,g);case 1:return I.visitTransition(d,g);case 2:return I.visitSequence(d,g);case 3:return I.visitGroup(d,g);case 4:return I.visitAnimate(d,g);case 5:return I.visitKeyframes(d,g);case 6:return I.visitStyle(d,g);case 8:return I.visitReference(d,g);case 9:return I.visitAnimateChild(d,g);case 10:return I.visitAnimateRef(d,g);case 11:return I.visitQuery(d,g);case 12:return I.visitStagger(d,g);default:throw function Ws(I){return new z.vHH(3004,!1)}()}}function $s(I,d){return window.getComputedStyle(I)[d]}const fc="*";function Xl(I,d){const g=[];return"string"==typeof I?I.split(/\s*,\s*/).forEach(S=>function _s(I,d,g){if(":"==I[0]){const xe=function Ja(I,d){switch(I){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(g,S)=>parseFloat(S)>parseFloat(g);case":decrement":return(g,S)=>parseFloat(S)<parseFloat(g);default:return d.push(function Bs(I){return new z.vHH(3016,!1)}()),"* => *"}}(I,g);if("function"==typeof xe)return void d.push(xe);I=xe}const S=I.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==S||S.length<4)return g.push(function Pu(I){return new z.vHH(3015,!1)}()),d;const U=S[1],Q=S[2],me=S[3];d.push(ml(U,me));"<"==Q[0]&&!(U==fc&&me==fc)&&d.push(ml(me,U))}(S,g,d)):g.push(I),g}const Jl=new Set(["true","1"]),el=new Set(["false","0"]);function ml(I,d){const g=Jl.has(I)||el.has(I),S=Jl.has(d)||el.has(d);return(U,Q)=>{let me=I==fc||I==U,Ee=d==fc||d==Q;return!me&&g&&"boolean"==typeof U&&(me=U?Jl.has(I):el.has(I)),!Ee&&S&&"boolean"==typeof Q&&(Ee=Q?Jl.has(d):el.has(d)),me&&Ee}}const Fl=new RegExp("s*:selfs*,?","g");function Ia(I,d,g,S){return new Va(I).build(d,g,S)}class Va{constructor(d){this._driver=d}build(d,g,S){const U=new sa(g);return this._resetContextStyleTimingState(U),lo(this,wa(d),U)}_resetContextStyleTimingState(d){d.currentQuerySelector="",d.collectedStyles=new Map,d.collectedStyles.set("",new Map),d.currentTime=0}visitTrigger(d,g){let S=g.queryCount=0,U=g.depCount=0;const Q=[],me=[];return"@"==d.name.charAt(0)&&g.errors.push(function pt(){return new z.vHH(3006,!1)}()),d.definitions.forEach(Ee=>{if(this._resetContextStyleTimingState(g),0==Ee.type){const xe=Ee,rt=xe.name;rt.toString().split(/\s*,\s*/).forEach(bt=>{xe.name=bt,Q.push(this.visitState(xe,g))}),xe.name=rt}else if(1==Ee.type){const xe=this.visitTransition(Ee,g);S+=xe.queryCount,U+=xe.depCount,me.push(xe)}else g.errors.push(function Bt(){return new z.vHH(3007,!1)}())}),{type:7,name:d.name,states:Q,transitions:me,queryCount:S,depCount:U,options:null}}visitState(d,g){const S=this.visitStyle(d.styles,g),U=d.options&&d.options.params||null;if(S.containsDynamicStyles){const Q=new Set,me=U||{};S.styles.forEach(Ee=>{Ee instanceof Map&&Ee.forEach(xe=>{Zu(xe).forEach(rt=>{me.hasOwnProperty(rt)||Q.add(rt)})})}),Q.size&&(Qa(Q.values()),g.errors.push(function Us(I,d){return new z.vHH(3008,!1)}()))}return{type:0,name:d.name,style:S,options:U?{params:U}:null}}visitTransition(d,g){g.queryCount=0,g.depCount=0;const S=lo(this,wa(d.animation),g);return{type:1,matchers:Xl(d.expr,g.errors),animation:S,queryCount:g.queryCount,depCount:g.depCount,options:vl(d.options)}}visitSequence(d,g){return{type:2,steps:d.steps.map(S=>lo(this,S,g)),options:vl(d.options)}}visitGroup(d,g){const S=g.currentTime;let U=0;const Q=d.steps.map(me=>{g.currentTime=S;const Ee=lo(this,me,g);return U=Math.max(U,g.currentTime),Ee});return g.currentTime=U,{type:3,steps:Q,options:vl(d.options)}}visitAnimate(d,g){const S=function Tu(I,d){if(I.hasOwnProperty("duration"))return I;if("number"==typeof I)return El(ge(I,d).duration,0,"");const g=I;if(g.split(/\s+/).some(Q=>"{"==Q.charAt(0)&&"{"==Q.charAt(1))){const Q=El(0,0,"");return Q.dynamic=!0,Q.strValue=g,Q}const U=ge(g,d);return El(U.duration,U.delay,U.easing)}(d.timings,g.errors);g.currentAnimateTimings=S;let U,Q=d.styles?d.styles:(0,kn.oB)({});if(5==Q.type)U=this.visitKeyframes(Q,g);else{let me=d.styles,Ee=!1;if(!me){Ee=!0;const rt={};S.easing&&(rt.easing=S.easing),me=(0,kn.oB)(rt)}g.currentTime+=S.duration+S.delay;const xe=this.visitStyle(me,g);xe.isEmptyStep=Ee,U=xe}return g.currentAnimateTimings=null,{type:4,timings:S,style:U,options:null}}visitStyle(d,g){const S=this._makeStyleAst(d,g);return this._validateStyleAst(S,g),S}_makeStyleAst(d,g){const S=[],U=Array.isArray(d.styles)?d.styles:[d.styles];for(let Ee of U)"string"==typeof Ee?Ee===kn.l3?S.push(Ee):g.errors.push(new z.vHH(3002,!1)):S.push(Rn(Ee));let Q=!1,me=null;return S.forEach(Ee=>{if(Ee instanceof Map&&(Ee.has("easing")&&(me=Ee.get("easing"),Ee.delete("easing")),!Q))for(let xe of Ee.values())if(xe.toString().indexOf("{{")>=0){Q=!0;break}}),{type:6,styles:S,easing:me,offset:d.offset,containsDynamicStyles:Q,options:null}}_validateStyleAst(d,g){const S=g.currentAnimateTimings;let U=g.currentTime,Q=g.currentTime;S&&Q>0&&(Q-=S.duration+S.delay),d.styles.forEach(me=>{"string"!=typeof me&&me.forEach((Ee,xe)=>{const rt=g.collectedStyles.get(g.currentQuerySelector),bt=rt.get(xe);let Jt=!0;bt&&(Q!=U&&Q>=bt.startTime&&U<=bt.endTime&&(g.errors.push(function Gu(I,d,g,S,U){return new z.vHH(3010,!1)}()),Jt=!1),Q=bt.startTime),Jt&&rt.set(xe,{startTime:Q,endTime:U}),g.options&&function pl(I,d,g){const S=d.params||{},U=Zu(I);U.length&&U.forEach(Q=>{S.hasOwnProperty(Q)||g.push(function pn(I){return new z.vHH(3001,!1)}())})}(Ee,g.options,g.errors)})})}visitKeyframes(d,g){const S={type:5,styles:[],options:null};if(!g.currentAnimateTimings)return g.errors.push(function cu(){return new z.vHH(3011,!1)}()),S;let Q=0;const me=[];let Ee=!1,xe=!1,rt=0;const bt=d.steps.map(Ar=>{const Ci=this._makeStyleAst(Ar,g);let qi=null!=Ci.offset?Ci.offset:function pc(I){if("string"==typeof I)return null;let d=null;if(Array.isArray(I))I.forEach(g=>{if(g instanceof Map&&g.has("offset")){const S=g;d=parseFloat(S.get("offset")),S.delete("offset")}});else if(I instanceof Map&&I.has("offset")){const g=I;d=parseFloat(g.get("offset")),g.delete("offset")}return d}(Ci.styles),un=0;return null!=qi&&(Q++,un=Ci.offset=qi),xe=xe||un<0||un>1,Ee=Ee||un<rt,rt=un,me.push(un),Ci});xe&&g.errors.push(function cc(){return new z.vHH(3012,!1)}()),Ee&&g.errors.push(function ma(){return new z.vHH(3200,!1)}());const Jt=d.steps.length;let nr=0;Q>0&&Q<Jt?g.errors.push(function du(){return new z.vHH(3202,!1)}()):0==Q&&(nr=1/(Jt-1));const bn=Jt-1,Un=g.currentTime,Bn=g.currentAnimateTimings,sr=Bn.duration;return bt.forEach((Ar,Ci)=>{const qi=nr>0?Ci==bn?1:nr*Ci:me[Ci],un=qi*sr;g.currentTime=Un+Bn.delay+un,Bn.duration=un,this._validateStyleAst(Ar,g),Ar.offset=qi,S.styles.push(Ar)}),S}visitReference(d,g){return{type:8,animation:lo(this,wa(d.animation),g),options:vl(d.options)}}visitAnimateChild(d,g){return g.depCount++,{type:9,options:vl(d.options)}}visitAnimateRef(d,g){return{type:10,animation:this.visitReference(d.animation,g),options:vl(d.options)}}visitQuery(d,g){const S=g.currentQuerySelector,U=d.options||{};g.queryCount++,g.currentQuery=d;const[Q,me]=function yl(I){const d=!!I.split(/\s*,\s*/).find(g=>":self"==g);return d&&(I=I.replace(Fl,"")),I=I.replace(/@\*/g,R).replace(/@\w+/g,g=>R+"-"+g.slice(1)).replace(/:animating/g,O),[I,d]}(d.selector);g.currentQuerySelector=S.length?S+" "+Q:Q,Ms(g.collectedStyles,g.currentQuerySelector,new Map);const Ee=lo(this,wa(d.animation),g);return g.currentQuery=null,g.currentQuerySelector=S,{type:11,selector:Q,limit:U.limit||0,optional:!!U.optional,includeSelf:me,animation:Ee,originalSelector:d.selector,options:vl(d.options)}}visitStagger(d,g){g.currentQuery||g.errors.push(function Cu(){return new z.vHH(3013,!1)}());const S="full"===d.timings?{duration:0,delay:0,easing:"full"}:ge(d.timings,g.errors,!0);return{type:12,animation:lo(this,wa(d.animation),g),timings:S,options:null}}}class sa{constructor(d){this.errors=d,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vl(I){return I?(I=Nt(I)).params&&(I.params=function _l(I){return I?Nt(I):null}(I.params)):I={},I}function El(I,d,g){return{duration:I,delay:d,easing:g}}function Ul(I,d,g,S,U,Q,me=null,Ee=!1){return{type:1,element:I,keyframes:d,preStyleProps:g,postStyleProps:S,duration:U,delay:Q,totalTime:U+Q,easing:me,subTimeline:Ee}}class Nu{constructor(){this._map=new Map}get(d){return this._map.get(d)||[]}append(d,g){let S=this._map.get(d);S||this._map.set(d,S=[]),S.push(...g)}has(d){return this._map.has(d)}clear(){this._map.clear()}}const tl=new RegExp(":enter","g"),mu=new RegExp(":leave","g");function Ca(I,d,g,S,U,Q=new Map,me=new Map,Ee,xe,rt=[]){return(new Ou).buildKeyframes(I,d,g,S,U,Q,me,Ee,xe,rt)}class Ou{buildKeyframes(d,g,S,U,Q,me,Ee,xe,rt,bt=[]){rt=rt||new Nu;const Jt=new yu(d,g,rt,U,Q,bt,[]);Jt.options=xe;const nr=xe.delay?G(xe.delay):0;Jt.currentTimeline.delayNextStep(nr),Jt.currentTimeline.setStyles([me],null,Jt.errors,xe),lo(this,S,Jt);const bn=Jt.timelines.filter(Un=>Un.containsAnimation());if(bn.length&&Ee.size){let Un;for(let Bn=bn.length-1;Bn>=0;Bn--){const sr=bn[Bn];if(sr.element===g){Un=sr;break}}Un&&!Un.allowOnlyTimelineStyles()&&Un.setStyles([Ee],null,Jt.errors,xe)}return bn.length?bn.map(Un=>Un.buildKeyframes()):[Ul(g,[],[],[],0,nr,"",!1)]}visitTrigger(d,g){}visitState(d,g){}visitTransition(d,g){}visitAnimateChild(d,g){const S=g.subInstructions.get(g.element);if(S){const U=g.createSubContext(d.options),Q=g.currentTimeline.currentTime,me=this._visitSubInstructions(S,U,U.options);Q!=me&&g.transformIntoNewTimeline(me)}g.previousNode=d}visitAnimateRef(d,g){const S=g.createSubContext(d.options);S.transformIntoNewTimeline(),this._applyAnimationRefDelays([d.options,d.animation.options],g,S),this.visitReference(d.animation,S),g.transformIntoNewTimeline(S.currentTimeline.currentTime),g.previousNode=d}_applyAnimationRefDelays(d,g,S){for(const U of d){const Q=U?.delay;if(Q){const me="number"==typeof Q?Q:G(gl(Q,U?.params??{},g.errors));S.delayNextStep(me)}}}_visitSubInstructions(d,g,S){let Q=g.currentTimeline.currentTime;const me=null!=S.duration?G(S.duration):null,Ee=null!=S.delay?G(S.delay):null;return 0!==me&&d.forEach(xe=>{const rt=g.appendInstructionToTimeline(xe,me,Ee);Q=Math.max(Q,rt.duration+rt.delay)}),Q}visitReference(d,g){g.updateOptions(d.options,!0),lo(this,d.animation,g),g.previousNode=d}visitSequence(d,g){const S=g.subContextCount;let U=g;const Q=d.options;if(Q&&(Q.params||Q.delay)&&(U=g.createSubContext(Q),U.transformIntoNewTimeline(),null!=Q.delay)){6==U.previousNode.type&&(U.currentTimeline.snapshotCurrentStyles(),U.previousNode=Da);const me=G(Q.delay);U.delayNextStep(me)}d.steps.length&&(d.steps.forEach(me=>lo(this,me,U)),U.currentTimeline.applyStylesToKeyframe(),U.subContextCount>S&&U.transformIntoNewTimeline()),g.previousNode=d}visitGroup(d,g){const S=[];let U=g.currentTimeline.currentTime;const Q=d.options&&d.options.delay?G(d.options.delay):0;d.steps.forEach(me=>{const Ee=g.createSubContext(d.options);Q&&Ee.delayNextStep(Q),lo(this,me,Ee),U=Math.max(U,Ee.currentTimeline.currentTime),S.push(Ee.currentTimeline)}),S.forEach(me=>g.currentTimeline.mergeTimelineCollectedStyles(me)),g.transformIntoNewTimeline(U),g.previousNode=d}_visitTiming(d,g){if(d.dynamic){const S=d.strValue;return ge(g.params?gl(S,g.params,g.errors):S,g.errors)}return{duration:d.duration,delay:d.delay,easing:d.easing}}visitAnimate(d,g){const S=g.currentAnimateTimings=this._visitTiming(d.timings,g),U=g.currentTimeline;S.delay&&(g.incrementTime(S.delay),U.snapshotCurrentStyles());const Q=d.style;5==Q.type?this.visitKeyframes(Q,g):(g.incrementTime(S.duration),this.visitStyle(Q,g),U.applyStylesToKeyframe()),g.currentAnimateTimings=null,g.previousNode=d}visitStyle(d,g){const S=g.currentTimeline,U=g.currentAnimateTimings;!U&&S.hasCurrentStyleProperties()&&S.forwardFrame();const Q=U&&U.easing||d.easing;d.isEmptyStep?S.applyEmptyStep(Q):S.setStyles(d.styles,Q,g.errors,g.options),g.previousNode=d}visitKeyframes(d,g){const S=g.currentAnimateTimings,U=g.currentTimeline.duration,Q=S.duration,Ee=g.createSubContext().currentTimeline;Ee.easing=S.easing,d.styles.forEach(xe=>{Ee.forwardTime((xe.offset||0)*Q),Ee.setStyles(xe.styles,xe.easing,g.errors,g.options),Ee.applyStylesToKeyframe()}),g.currentTimeline.mergeTimelineCollectedStyles(Ee),g.transformIntoNewTimeline(U+Q),g.previousNode=d}visitQuery(d,g){const S=g.currentTimeline.currentTime,U=d.options||{},Q=U.delay?G(U.delay):0;Q&&(6===g.previousNode.type||0==S&&g.currentTimeline.hasCurrentStyleProperties())&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=Da);let me=S;const Ee=g.invokeQuery(d.selector,d.originalSelector,d.limit,d.includeSelf,!!U.optional,g.errors);g.currentQueryTotal=Ee.length;let xe=null;Ee.forEach((rt,bt)=>{g.currentQueryIndex=bt;const Jt=g.createSubContext(d.options,rt);Q&&Jt.delayNextStep(Q),rt===g.element&&(xe=Jt.currentTimeline),lo(this,d.animation,Jt),Jt.currentTimeline.applyStylesToKeyframe(),me=Math.max(me,Jt.currentTimeline.currentTime)}),g.currentQueryIndex=0,g.currentQueryTotal=0,g.transformIntoNewTimeline(me),xe&&(g.currentTimeline.mergeTimelineCollectedStyles(xe),g.currentTimeline.snapshotCurrentStyles()),g.previousNode=d}visitStagger(d,g){const S=g.parentContext,U=g.currentTimeline,Q=d.timings,me=Math.abs(Q.duration),Ee=me*(g.currentQueryTotal-1);let xe=me*g.currentQueryIndex;switch(Q.duration<0?"reverse":Q.easing){case"reverse":xe=Ee-xe;break;case"full":xe=S.currentStaggerTime}const bt=g.currentTimeline;xe&&bt.delayNextStep(xe);const Jt=bt.currentTime;lo(this,d.animation,g),g.previousNode=d,S.currentStaggerTime=U.currentTime-Jt+(U.startTime-S.currentTimeline.startTime)}}const Da={};class yu{constructor(d,g,S,U,Q,me,Ee,xe){this._driver=d,this.element=g,this.subInstructions=S,this._enterClassName=U,this._leaveClassName=Q,this.errors=me,this.timelines=Ee,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Da,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=xe||new nl(this._driver,g,0),Ee.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(d,g){if(!d)return;const S=d;let U=this.options;null!=S.duration&&(U.duration=G(S.duration)),null!=S.delay&&(U.delay=G(S.delay));const Q=S.params;if(Q){let me=U.params;me||(me=this.options.params={}),Object.keys(Q).forEach(Ee=>{(!g||!me.hasOwnProperty(Ee))&&(me[Ee]=gl(Q[Ee],me,this.errors))})}}_copyOptions(){const d={};if(this.options){const g=this.options.params;if(g){const S=d.params={};Object.keys(g).forEach(U=>{S[U]=g[U]})}}return d}createSubContext(d=null,g,S){const U=g||this.element,Q=new yu(this._driver,U,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(U,S||0));return Q.previousNode=this.previousNode,Q.currentAnimateTimings=this.currentAnimateTimings,Q.options=this._copyOptions(),Q.updateOptions(d),Q.currentQueryIndex=this.currentQueryIndex,Q.currentQueryTotal=this.currentQueryTotal,Q.parentContext=this,this.subContextCount++,Q}transformIntoNewTimeline(d){return this.previousNode=Da,this.currentTimeline=this.currentTimeline.fork(this.element,d),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(d,g,S){const U={duration:g??d.duration,delay:this.currentTimeline.currentTime+(S??0)+d.delay,easing:""},Q=new ms(this._driver,d.element,d.keyframes,d.preStyleProps,d.postStyleProps,U,d.stretchStartingKeyframe);return this.timelines.push(Q),U}incrementTime(d){this.currentTimeline.forwardTime(this.currentTimeline.duration+d)}delayNextStep(d){d>0&&this.currentTimeline.delayNextStep(d)}invokeQuery(d,g,S,U,Q,me){let Ee=[];if(U&&Ee.push(this.element),d.length>0){d=(d=d.replace(tl,"."+this._enterClassName)).replace(mu,"."+this._leaveClassName);let rt=this._driver.query(this.element,d,1!=S);0!==S&&(rt=S<0?rt.slice(rt.length+S,rt.length):rt.slice(0,S)),Ee.push(...rt)}return!Q&&0==Ee.length&&me.push(function ll(I){return new z.vHH(3014,!1)}()),Ee}}class nl{constructor(d,g,S,U){this._driver=d,this.element=g,this.startTime=S,this._elementTimelineStylesLookup=U,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(g),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(g,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(d){const g=1===this._keyframes.size&&this._pendingStyles.size;this.duration||g?(this.forwardTime(this.currentTime+d),g&&this.snapshotCurrentStyles()):this.startTime+=d}fork(d,g){return this.applyStylesToKeyframe(),new nl(this._driver,d,g||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(d){this.applyStylesToKeyframe(),this.duration=d,this._loadKeyframe()}_updateStyle(d,g){this._localTimelineStyles.set(d,g),this._globalTimelineStyles.set(d,g),this._styleSummary.set(d,{time:this.currentTime,value:g})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(d){d&&this._previousKeyframe.set("easing",d);for(let[g,S]of this._globalTimelineStyles)this._backFill.set(g,S||kn.l3),this._currentKeyframe.set(g,kn.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(d,g,S,U){g&&this._previousKeyframe.set("easing",g);const Q=U&&U.params||{},me=function Ps(I,d){const g=new Map;let S;return I.forEach(U=>{if("*"===U){S=S||d.keys();for(let Q of S)g.set(Q,kn.l3)}else us(U,g)}),g}(d,this._globalTimelineStyles);for(let[Ee,xe]of me){const rt=gl(xe,Q,S);this._pendingStyles.set(Ee,rt),this._localTimelineStyles.has(Ee)||this._backFill.set(Ee,this._globalTimelineStyles.get(Ee)??kn.l3),this._updateStyle(Ee,rt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((d,g)=>{this._currentKeyframe.set(g,d)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((d,g)=>{this._currentKeyframe.has(g)||this._currentKeyframe.set(g,d)}))}snapshotCurrentStyles(){for(let[d,g]of this._localTimelineStyles)this._pendingStyles.set(d,g),this._updateStyle(d,g)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const d=[];for(let g in this._currentKeyframe)d.push(g);return d}mergeTimelineCollectedStyles(d){d._styleSummary.forEach((g,S)=>{const U=this._styleSummary.get(S);(!U||g.time>U.time)&&this._updateStyle(S,g.value)})}buildKeyframes(){this.applyStylesToKeyframe();const d=new Set,g=new Set,S=1===this._keyframes.size&&0===this.duration;let U=[];this._keyframes.forEach((Ee,xe)=>{const rt=us(Ee,new Map,this._backFill);rt.forEach((bt,Jt)=>{bt===kn.k1?d.add(Jt):bt===kn.l3&&g.add(Jt)}),S||rt.set("offset",xe/this.duration),U.push(rt)});const Q=d.size?Qa(d.values()):[],me=g.size?Qa(g.values()):[];if(S){const Ee=U[0],xe=new Map(Ee);Ee.set("offset",0),xe.set("offset",1),U=[Ee,xe]}return Ul(this.element,U,Q,me,this.duration,this.startTime,this.easing,!1)}}class ms extends nl{constructor(d,g,S,U,Q,me,Ee=!1){super(d,g,me.delay),this.keyframes=S,this.preStyleProps=U,this.postStyleProps=Q,this._stretchStartingKeyframe=Ee,this.timings={duration:me.duration,delay:me.delay,easing:me.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let d=this.keyframes,{delay:g,duration:S,easing:U}=this.timings;if(this._stretchStartingKeyframe&&g){const Q=[],me=S+g,Ee=g/me,xe=us(d[0]);xe.set("offset",0),Q.push(xe);const rt=us(d[0]);rt.set("offset",Tc(Ee)),Q.push(rt);const bt=d.length-1;for(let Jt=1;Jt<=bt;Jt++){let nr=us(d[Jt]);const bn=nr.get("offset");nr.set("offset",Tc((g+bn*S)/me)),Q.push(nr)}S=me,g=0,U="",d=Q}return Ul(this.element,d,this.preStyleProps,this.postStyleProps,S,g,U,!0)}}function Tc(I,d=3){const g=Math.pow(10,d-1);return Math.round(I*g)/g}class ku{}const M=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class V extends ku{normalizePropertyName(d,g){return Jo(d)}normalizeStyleValue(d,g,S,U){let Q="";const me=S.toString().trim();if(M.has(g)&&0!==S&&"0"!==S)if("number"==typeof S)Q="px";else{const Ee=S.match(/^[+-]?[\d\.]+([a-z]*)$/);Ee&&0==Ee[1].length&&U.push(function rn(I,d){return new z.vHH(3005,!1)}())}return me+Q}}function te(I,d,g,S,U,Q,me,Ee,xe,rt,bt,Jt,nr){return{type:0,element:I,triggerName:d,isRemovalTransition:U,fromState:g,fromStyles:Q,toState:S,toStyles:me,timelines:Ee,queriedElements:xe,preStyleProps:rt,postStyleProps:bt,totalTime:Jt,errors:nr}}const _e={};class ke{constructor(d,g,S){this._triggerName=d,this.ast=g,this._stateStyles=S}match(d,g,S,U){return function Dt(I,d,g,S,U){return I.some(Q=>Q(d,g,S,U))}(this.ast.matchers,d,g,S,U)}buildStyles(d,g,S){let U=this._stateStyles.get("*");return void 0!==d&&(U=this._stateStyles.get(d?.toString())||U),U?U.buildStyles(g,S):new Map}build(d,g,S,U,Q,me,Ee,xe,rt,bt){const Jt=[],nr=this.ast.options&&this.ast.options.params||_e,Un=this.buildStyles(S,Ee&&Ee.params||_e,Jt),Bn=xe&&xe.params||_e,sr=this.buildStyles(U,Bn,Jt),Ar=new Set,Ci=new Map,qi=new Map,un="void"===U,es={params:mn(Bn,nr),delay:this.ast.options?.delay},Fi=bt?[]:Ca(d,g,this.ast.animation,Q,me,Un,sr,es,rt,Jt);let Ei=0;if(Fi.forEach(pi=>{Ei=Math.max(pi.duration+pi.delay,Ei)}),Jt.length)return te(g,this._triggerName,S,U,un,Un,sr,[],[],Ci,qi,Ei,Jt);Fi.forEach(pi=>{const Ai=pi.element,Gs=Ms(Ci,Ai,new Set);pi.preStyleProps.forEach(uo=>Gs.add(uo));const Aa=Ms(qi,Ai,new Set);pi.postStyleProps.forEach(uo=>Aa.add(uo)),Ai!==g&&Ar.add(Ai)});const wi=Qa(Ar.values());return te(g,this._triggerName,S,U,un,Un,sr,Fi,wi,Ci,qi,Ei)}}function mn(I,d){const g=Nt(d);for(const S in I)I.hasOwnProperty(S)&&null!=I[S]&&(g[S]=I[S]);return g}class gn{constructor(d,g,S){this.styles=d,this.defaultParams=g,this.normalizer=S}buildStyles(d,g){const S=new Map,U=Nt(this.defaultParams);return Object.keys(d).forEach(Q=>{const me=d[Q];null!==me&&(U[Q]=me)}),this.styles.styles.forEach(Q=>{"string"!=typeof Q&&Q.forEach((me,Ee)=>{me&&(me=gl(me,U,g));const xe=this.normalizer.normalizePropertyName(Ee,g);me=this.normalizer.normalizeStyleValue(Ee,xe,me,g),S.set(Ee,me)})}),S}}class $r{constructor(d,g,S){this.name=d,this.ast=g,this._normalizer=S,this.transitionFactories=[],this.states=new Map,g.states.forEach(U=>{this.states.set(U.name,new gn(U.style,U.options&&U.options.params||{},S))}),mo(this.states,"true","1"),mo(this.states,"false","0"),g.transitions.forEach(U=>{this.transitionFactories.push(new ke(d,U,this.states))}),this.fallbackTransition=function Fr(I,d,g){return new ke(I,{type:1,animation:{type:2,steps:[],options:null},matchers:[(me,Ee)=>!0],options:null,queryCount:0,depCount:0},d)}(d,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(d,g,S,U){return this.transitionFactories.find(me=>me.match(d,g,S,U))||null}matchStyles(d,g,S){return this.fallbackTransition.buildStyles(d,g,S)}}function mo(I,d,g){I.has(d)?I.has(g)||I.set(g,I.get(d)):I.has(g)&&I.set(d,I.get(g))}const Ho=new Nu;class eu{constructor(d,g,S){this.bodyNode=d,this._driver=g,this._normalizer=S,this._animations=new Map,this._playersById=new Map,this.players=[]}register(d,g){const S=[],U=[],Q=Ia(this._driver,g,S,U);if(S.length)throw function ar(I){return new z.vHH(3503,!1)}();this._animations.set(d,Q)}_buildPlayer(d,g,S){const U=d.element,Q=po(0,this._normalizer,0,d.keyframes,g,S);return this._driver.animate(U,Q,d.duration,d.delay,d.easing,[],!0)}create(d,g,S={}){const U=[],Q=this._animations.get(d);let me;const Ee=new Map;if(Q?(me=Ca(this._driver,g,Q,js,va,new Map,new Map,S,Ho,U),me.forEach(bt=>{const Jt=Ms(Ee,bt.element,new Map);bt.postStyleProps.forEach(nr=>Jt.set(nr,null))})):(U.push(function Ka(){return new z.vHH(3300,!1)}()),me=[]),U.length)throw function wr(I){return new z.vHH(3504,!1)}();Ee.forEach((bt,Jt)=>{bt.forEach((nr,bn)=>{bt.set(bn,this._driver.computeStyle(Jt,bn,kn.l3))})});const rt=ya(me.map(bt=>{const Jt=Ee.get(bt.element);return this._buildPlayer(bt,new Map,Jt)}));return this._playersById.set(d,rt),rt.onDestroy(()=>this.destroy(d)),this.players.push(rt),rt}destroy(d){const g=this._getPlayer(d);g.destroy(),this._playersById.delete(d);const S=this.players.indexOf(g);S>=0&&this.players.splice(S,1)}_getPlayer(d){const g=this._playersById.get(d);if(!g)throw function Ku(I){return new z.vHH(3301,!1)}();return g}listen(d,g,S,U){const Q=Yl(g,"","","");return dl(this._getPlayer(d),S,Q,U),()=>{}}command(d,g,S,U){if("register"==S)return void this.register(d,U[0]);if("create"==S)return void this.create(d,g,U[0]||{});const Q=this._getPlayer(d);switch(S){case"play":Q.play();break;case"pause":Q.pause();break;case"reset":Q.reset();break;case"restart":Q.restart();break;case"finish":Q.finish();break;case"init":Q.init();break;case"setPosition":Q.setPosition(parseFloat(U[0]));break;case"destroy":this.destroy(d)}}}const gc="ng-animate-queued",aa="ng-animate-disabled",nd=[],Xu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zo="__ng_removed";class Il{get params(){return this.options.params}constructor(d,g=""){this.namespaceId=g;const S=d&&d.hasOwnProperty("value");if(this.value=function gd(I){return I??null}(S?d.value:d),S){const Q=Nt(d);delete Q.value,this.options=Q}else this.options={};this.options.params||(this.options.params={})}absorbOptions(d){const g=d.params;if(g){const S=this.options.params;Object.keys(g).forEach(U=>{null==S[U]&&(S[U]=g[U])})}}}const Mo="void",mc=new Il(Mo);class Sc{constructor(d,g,S){this.id=d,this.hostElement=g,this._engine=S,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+d,ne(g,this._hostClassName)}listen(d,g,S,U){if(!this._triggers.has(g))throw function zr(I,d){return new z.vHH(3302,!1)}();if(null==S||0==S.length)throw function _n(I){return new z.vHH(3303,!1)}();if(!function A(I){return"start"==I||"done"==I}(S))throw function La(I,d){return new z.vHH(3400,!1)}();const Q=Ms(this._elementListeners,d,[]),me={name:g,phase:S,callback:U};Q.push(me);const Ee=Ms(this._engine.statesByElement,d,new Map);return Ee.has(g)||(ne(d,D),ne(d,D+"-"+g),Ee.set(g,mc)),()=>{this._engine.afterFlush(()=>{const xe=Q.indexOf(me);xe>=0&&Q.splice(xe,1),this._triggers.has(g)||Ee.delete(g)})}}register(d,g){return!this._triggers.has(d)&&(this._triggers.set(d,g),!0)}_getTrigger(d){const g=this._triggers.get(d);if(!g)throw function Ys(I){return new z.vHH(3401,!1)}();return g}trigger(d,g,S,U=!0){const Q=this._getTrigger(g),me=new yc(this.id,g,d);let Ee=this._engine.statesByElement.get(d);Ee||(ne(d,D),ne(d,D+"-"+g),this._engine.statesByElement.set(d,Ee=new Map));let xe=Ee.get(g);const rt=new Il(S,this.id);if(!(S&&S.hasOwnProperty("value"))&&xe&&rt.absorbOptions(xe.options),Ee.set(g,rt),xe||(xe=mc),rt.value!==Mo&&xe.value===rt.value){if(!function Mn(I,d){const g=Object.keys(I),S=Object.keys(d);if(g.length!=S.length)return!1;for(let U=0;U<g.length;U++){const Q=g[U];if(!d.hasOwnProperty(Q)||I[Q]!==d[Q])return!1}return!0}(xe.params,rt.params)){const Bn=[],sr=Q.matchStyles(xe.value,xe.params,Bn),Ar=Q.matchStyles(rt.value,rt.params,Bn);Bn.length?this._engine.reportError(Bn):this._engine.afterFlush(()=>{Xi(d,sr),ao(d,Ar)})}return}const nr=Ms(this._engine.playersByElement,d,[]);nr.forEach(Bn=>{Bn.namespaceId==this.id&&Bn.triggerName==g&&Bn.queued&&Bn.destroy()});let bn=Q.matchTransition(xe.value,rt.value,d,rt.params),Un=!1;if(!bn){if(!U)return;bn=Q.fallbackTransition,Un=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:g,transition:bn,fromState:xe,toState:rt,player:me,isFallbackTransition:Un}),Un||(ne(d,gc),me.onStart(()=>{fe(d,gc)})),me.onDone(()=>{let Bn=this.players.indexOf(me);Bn>=0&&this.players.splice(Bn,1);const sr=this._engine.playersByElement.get(d);if(sr){let Ar=sr.indexOf(me);Ar>=0&&sr.splice(Ar,1)}}),this.players.push(me),nr.push(me),me}deregister(d){this._triggers.delete(d),this._engine.statesByElement.forEach(g=>g.delete(d)),this._elementListeners.forEach((g,S)=>{this._elementListeners.set(S,g.filter(U=>U.name!=d))})}clearElementCache(d){this._engine.statesByElement.delete(d),this._elementListeners.delete(d);const g=this._engine.playersByElement.get(d);g&&(g.forEach(S=>S.destroy()),this._engine.playersByElement.delete(d))}_signalRemovalForInnerTriggers(d,g){const S=this._engine.driver.query(d,R,!0);S.forEach(U=>{if(U[zo])return;const Q=this._engine.fetchNamespacesByElement(U);Q.size?Q.forEach(me=>me.triggerLeaveAnimation(U,g,!1,!0)):this.clearElementCache(U)}),this._engine.afterFlushAnimationsDone(()=>S.forEach(U=>this.clearElementCache(U)))}triggerLeaveAnimation(d,g,S,U){const Q=this._engine.statesByElement.get(d),me=new Map;if(Q){const Ee=[];if(Q.forEach((xe,rt)=>{if(me.set(rt,xe.value),this._triggers.has(rt)){const bt=this.trigger(d,rt,Mo,U);bt&&Ee.push(bt)}}),Ee.length)return this._engine.markElementAsRemoved(this.id,d,!0,g,me),S&&ya(Ee).onDone(()=>this._engine.processLeaveNode(d)),!0}return!1}prepareLeaveAnimationListeners(d){const g=this._elementListeners.get(d),S=this._engine.statesByElement.get(d);if(g&&S){const U=new Set;g.forEach(Q=>{const me=Q.name;if(U.has(me))return;U.add(me);const xe=this._triggers.get(me).fallbackTransition,rt=S.get(me)||mc,bt=new Il(Mo),Jt=new yc(this.id,me,d);this._engine.totalQueuedPlayers++,this._queue.push({element:d,triggerName:me,transition:xe,fromState:rt,toState:bt,player:Jt,isFallbackTransition:!0})})}}removeNode(d,g){const S=this._engine;if(d.childElementCount&&this._signalRemovalForInnerTriggers(d,g),this.triggerLeaveAnimation(d,g,!0))return;let U=!1;if(S.totalAnimations){const Q=S.players.length?S.playersByQueriedElement.get(d):[];if(Q&&Q.length)U=!0;else{let me=d;for(;me=me.parentNode;)if(S.statesByElement.get(me)){U=!0;break}}}if(this.prepareLeaveAnimationListeners(d),U)S.markElementAsRemoved(this.id,d,!1,g);else{const Q=d[zo];(!Q||Q===Xu)&&(S.afterFlush(()=>this.clearElementCache(d)),S.destroyInnerAnimations(d),S._onRemovalComplete(d,g))}}insertNode(d,g){ne(d,this._hostClassName)}drainQueuedTransitions(d){const g=[];return this._queue.forEach(S=>{const U=S.player;if(U.destroyed)return;const Q=S.element,me=this._elementListeners.get(Q);me&&me.forEach(Ee=>{if(Ee.name==S.triggerName){const xe=Yl(Q,S.triggerName,S.fromState.value,S.toState.value);xe._data=d,dl(S.player,Ee.phase,xe,Ee.callback)}}),U.markedForDestroy?this._engine.afterFlush(()=>{U.destroy()}):g.push(S)}),this._queue=[],g.sort((S,U)=>{const Q=S.transition.ast.depCount,me=U.transition.ast.depCount;return 0==Q||0==me?Q-me:this._engine.driver.containsElement(S.element,U.element)?1:-1})}destroy(d){this.players.forEach(g=>g.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,d)}elementContainsData(d){let g=!1;return this._elementListeners.has(d)&&(g=!0),g=!!this._queue.find(S=>S.element===d)||g,g}}class $l{_onRemovalComplete(d,g){this.onRemovalComplete(d,g)}constructor(d,g,S){this.bodyNode=d,this.driver=g,this._normalizer=S,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(U,Q)=>{}}get queuedPlayers(){const d=[];return this._namespaceList.forEach(g=>{g.players.forEach(S=>{S.queued&&d.push(S)})}),d}createNamespace(d,g){const S=new Sc(d,g,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,g)?this._balanceNamespaceList(S,g):(this.newHostElements.set(g,S),this.collectEnterElement(g)),this._namespaceLookup[d]=S}_balanceNamespaceList(d,g){const S=this._namespaceList,U=this.namespacesByHostElement;if(S.length-1>=0){let me=!1,Ee=this.driver.getParentElement(g);for(;Ee;){const xe=U.get(Ee);if(xe){const rt=S.indexOf(xe);S.splice(rt+1,0,d),me=!0;break}Ee=this.driver.getParentElement(Ee)}me||S.unshift(d)}else S.push(d);return U.set(g,d),d}register(d,g){let S=this._namespaceLookup[d];return S||(S=this.createNamespace(d,g)),S}registerTrigger(d,g,S){let U=this._namespaceLookup[d];U&&U.register(g,S)&&this.totalAnimations++}destroy(d,g){if(!d)return;const S=this._fetchNamespace(d);this.afterFlush(()=>{this.namespacesByHostElement.delete(S.hostElement),delete this._namespaceLookup[d];const U=this._namespaceList.indexOf(S);U>=0&&this._namespaceList.splice(U,1)}),this.afterFlushAnimationsDone(()=>S.destroy(g))}_fetchNamespace(d){return this._namespaceLookup[d]}fetchNamespacesByElement(d){const g=new Set,S=this.statesByElement.get(d);if(S)for(let U of S.values())if(U.namespaceId){const Q=this._fetchNamespace(U.namespaceId);Q&&g.add(Q)}return g}trigger(d,g,S,U){if(Ju(g)){const Q=this._fetchNamespace(d);if(Q)return Q.trigger(g,S,U),!0}return!1}insertNode(d,g,S,U){if(!Ju(g))return;const Q=g[zo];if(Q&&Q.setForRemoval){Q.setForRemoval=!1,Q.setForMove=!0;const me=this.collectedLeaveElements.indexOf(g);me>=0&&this.collectedLeaveElements.splice(me,1)}if(d){const me=this._fetchNamespace(d);me&&me.insertNode(g,S)}U&&this.collectEnterElement(g)}collectEnterElement(d){this.collectedEnterElements.push(d)}markElementAsDisabled(d,g){g?this.disabledNodes.has(d)||(this.disabledNodes.add(d),ne(d,aa)):this.disabledNodes.has(d)&&(this.disabledNodes.delete(d),fe(d,aa))}removeNode(d,g,S,U){if(Ju(g)){const Q=d?this._fetchNamespace(d):null;if(Q?Q.removeNode(g,U):this.markElementAsRemoved(d,g,!1,U),S){const me=this.namespacesByHostElement.get(g);me&&me.id!==d&&me.removeNode(g,U)}}else this._onRemovalComplete(g,U)}markElementAsRemoved(d,g,S,U,Q){this.collectedLeaveElements.push(g),g[zo]={namespaceId:d,setForRemoval:U,hasAnimation:S,removedBeforeQueried:!1,previousTriggersValues:Q}}listen(d,g,S,U,Q){return Ju(g)?this._fetchNamespace(d).listen(g,S,U,Q):()=>{}}_buildInstruction(d,g,S,U,Q){return d.transition.build(this.driver,d.element,d.fromState.value,d.toState.value,S,U,d.fromState.options,d.toState.options,g,Q)}destroyInnerAnimations(d){let g=this.driver.query(d,R,!0);g.forEach(S=>this.destroyActiveAnimationsForElement(S)),0!=this.playersByQueriedElement.size&&(g=this.driver.query(d,O,!0),g.forEach(S=>this.finishActiveQueriedAnimationOnElement(S)))}destroyActiveAnimationsForElement(d){const g=this.playersByElement.get(d);g&&g.forEach(S=>{S.queued?S.markedForDestroy=!0:S.destroy()})}finishActiveQueriedAnimationOnElement(d){const g=this.playersByQueriedElement.get(d);g&&g.forEach(S=>S.finish())}whenRenderingDone(){return new Promise(d=>{if(this.players.length)return ya(this.players).onDone(()=>d());d()})}processLeaveNode(d){const g=d[zo];if(g&&g.setForRemoval){if(d[zo]=Xu,g.namespaceId){this.destroyInnerAnimations(d);const S=this._fetchNamespace(g.namespaceId);S&&S.clearElementCache(d)}this._onRemovalComplete(d,g.setForRemoval)}d.classList?.contains(aa)&&this.markElementAsDisabled(d,!1),this.driver.query(d,".ng-animate-disabled",!0).forEach(S=>{this.markElementAsDisabled(S,!1)})}flush(d=-1){let g=[];if(this.newHostElements.size&&(this.newHostElements.forEach((S,U)=>this._balanceNamespaceList(S,U)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let S=0;S<this.collectedEnterElements.length;S++)ne(this.collectedEnterElements[S],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const S=[];try{g=this._flushAnimations(S,d)}finally{for(let U=0;U<S.length;U++)S[U]()}}else for(let S=0;S<this.collectedLeaveElements.length;S++)this.processLeaveNode(this.collectedLeaveElements[S]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(S=>S()),this._flushFns=[],this._whenQuietFns.length){const S=this._whenQuietFns;this._whenQuietFns=[],g.length?ya(g).onDone(()=>{S.forEach(U=>U())}):S.forEach(U=>U())}}reportError(d){throw function Bo(I){return new z.vHH(3402,!1)}()}_flushAnimations(d,g){const S=new Nu,U=[],Q=new Map,me=[],Ee=new Map,xe=new Map,rt=new Map,bt=new Set;this.disabledNodes.forEach(vn=>{bt.add(vn);const qn=this.driver.query(vn,".ng-animate-queued",!0);for(let Rr=0;Rr<qn.length;Rr++)bt.add(qn[Rr])});const Jt=this.bodyNode,nr=Array.from(this.statesByElement.keys()),bn=P(nr,this.collectedEnterElements),Un=new Map;let Bn=0;bn.forEach((vn,qn)=>{const Rr=js+Bn++;Un.set(qn,Rr),vn.forEach(Ri=>ne(Ri,Rr))});const sr=[],Ar=new Set,Ci=new Set;for(let vn=0;vn<this.collectedLeaveElements.length;vn++){const qn=this.collectedLeaveElements[vn],Rr=qn[zo];Rr&&Rr.setForRemoval&&(sr.push(qn),Ar.add(qn),Rr.hasAnimation?this.driver.query(qn,".ng-star-inserted",!0).forEach(Ri=>Ar.add(Ri)):Ci.add(qn))}const qi=new Map,un=P(nr,Array.from(Ar));un.forEach((vn,qn)=>{const Rr=va+Bn++;qi.set(qn,Rr),vn.forEach(Ri=>ne(Ri,Rr))}),d.push(()=>{bn.forEach((vn,qn)=>{const Rr=Un.get(qn);vn.forEach(Ri=>fe(Ri,Rr))}),un.forEach((vn,qn)=>{const Rr=qi.get(qn);vn.forEach(Ri=>fe(Ri,Rr))}),sr.forEach(vn=>{this.processLeaveNode(vn)})});const es=[],Fi=[];for(let vn=this._namespaceList.length-1;vn>=0;vn--)this._namespaceList[vn].drainQueuedTransitions(g).forEach(Rr=>{const Ri=Rr.player,co=Rr.element;if(es.push(Ri),this.collectedEnterElements.length){const _o=co[zo];if(_o&&_o.setForMove){if(_o.previousTriggersValues&&_o.previousTriggersValues.has(Rr.triggerName)){const Po=_o.previousTriggersValues.get(Rr.triggerName),Co=this.statesByElement.get(Rr.element);if(Co&&Co.has(Rr.triggerName)){const ic=Co.get(Rr.triggerName);ic.value=Po,Co.set(Rr.triggerName,ic)}}return void Ri.destroy()}}const il=!Jt||!this.driver.containsElement(Jt,co),Go=qi.get(co),Cl=Un.get(co),vs=this._buildInstruction(Rr,S,Cl,Go,il);if(vs.errors&&vs.errors.length)return void Fi.push(vs);if(il)return Ri.onStart(()=>Xi(co,vs.fromStyles)),Ri.onDestroy(()=>ao(co,vs.toStyles)),void U.push(Ri);if(Rr.isFallbackTransition)return Ri.onStart(()=>Xi(co,vs.fromStyles)),Ri.onDestroy(()=>ao(co,vs.toStyles)),void U.push(Ri);const Ua=[];vs.timelines.forEach(_o=>{_o.stretchStartingKeyframe=!0,this.disabledNodes.has(_o.element)||Ua.push(_o)}),vs.timelines=Ua,S.append(co,vs.timelines),me.push({instruction:vs,player:Ri,element:co}),vs.queriedElements.forEach(_o=>Ms(Ee,_o,[]).push(Ri)),vs.preStyleProps.forEach((_o,Po)=>{if(_o.size){let Co=xe.get(Po);Co||xe.set(Po,Co=new Set),_o.forEach((ic,sc)=>Co.add(sc))}}),vs.postStyleProps.forEach((_o,Po)=>{let Co=rt.get(Po);Co||rt.set(Po,Co=new Set),_o.forEach((ic,sc)=>Co.add(sc))})});if(Fi.length){const vn=[];Fi.forEach(qn=>{vn.push(function hu(I,d){return new z.vHH(3505,!1)}())}),es.forEach(qn=>qn.destroy()),this.reportError(vn)}const Ei=new Map,wi=new Map;me.forEach(vn=>{const qn=vn.element;S.has(qn)&&(wi.set(qn,qn),this._beforeAnimationBuild(vn.player.namespaceId,vn.instruction,Ei))}),U.forEach(vn=>{const qn=vn.element;this._getPreviousPlayers(qn,!1,vn.namespaceId,vn.triggerName,null).forEach(Ri=>{Ms(Ei,qn,[]).push(Ri),Ri.destroy()})});const pi=sr.filter(vn=>dr(vn,xe,rt)),Ai=new Map;w(Ai,this.driver,Ci,rt,kn.l3).forEach(vn=>{dr(vn,xe,rt)&&pi.push(vn)});const Aa=new Map;bn.forEach((vn,qn)=>{w(Aa,this.driver,new Set(vn),xe,kn.k1)}),pi.forEach(vn=>{const qn=Ai.get(vn),Rr=Aa.get(vn);Ai.set(vn,new Map([...Array.from(qn?.entries()??[]),...Array.from(Rr?.entries()??[])]))});const uo=[],Uu=[],rc={};me.forEach(vn=>{const{element:qn,player:Rr,instruction:Ri}=vn;if(S.has(qn)){if(bt.has(qn))return Rr.onDestroy(()=>ao(qn,Ri.toStyles)),Rr.disabled=!0,Rr.overrideTotalTime(Ri.totalTime),void U.push(Rr);let co=rc;if(wi.size>1){let Go=qn;const Cl=[];for(;Go=Go.parentNode;){const vs=wi.get(Go);if(vs){co=vs;break}Cl.push(Go)}Cl.forEach(vs=>wi.set(vs,co))}const il=this._buildAnimation(Rr.namespaceId,Ri,Ei,Q,Aa,Ai);if(Rr.setRealPlayer(il),co===rc)uo.push(Rr);else{const Go=this.playersByElement.get(co);Go&&Go.length&&(Rr.parentPlayer=ya(Go)),U.push(Rr)}}else Xi(qn,Ri.fromStyles),Rr.onDestroy(()=>ao(qn,Ri.toStyles)),Uu.push(Rr),bt.has(qn)&&U.push(Rr)}),Uu.forEach(vn=>{const qn=Q.get(vn.element);if(qn&&qn.length){const Rr=ya(qn);vn.setRealPlayer(Rr)}}),U.forEach(vn=>{vn.parentPlayer?vn.syncPlayerEvents(vn.parentPlayer):vn.destroy()});for(let vn=0;vn<sr.length;vn++){const qn=sr[vn],Rr=qn[zo];if(fe(qn,va),Rr&&Rr.hasAnimation)continue;let Ri=[];if(Ee.size){let il=Ee.get(qn);il&&il.length&&Ri.push(...il);let Go=this.driver.query(qn,O,!0);for(let Cl=0;Cl<Go.length;Cl++){let vs=Ee.get(Go[Cl]);vs&&vs.length&&Ri.push(...vs)}}const co=Ri.filter(il=>!il.destroyed);co.length?tt(this,qn,co):this.processLeaveNode(qn)}return sr.length=0,uo.forEach(vn=>{this.players.push(vn),vn.onDone(()=>{vn.destroy();const qn=this.players.indexOf(vn);this.players.splice(qn,1)}),vn.play()}),uo}elementContainsData(d,g){let S=!1;const U=g[zo];return U&&U.setForRemoval&&(S=!0),this.playersByElement.has(g)&&(S=!0),this.playersByQueriedElement.has(g)&&(S=!0),this.statesByElement.has(g)&&(S=!0),this._fetchNamespace(d).elementContainsData(g)||S}afterFlush(d){this._flushFns.push(d)}afterFlushAnimationsDone(d){this._whenQuietFns.push(d)}_getPreviousPlayers(d,g,S,U,Q){let me=[];if(g){const Ee=this.playersByQueriedElement.get(d);Ee&&(me=Ee)}else{const Ee=this.playersByElement.get(d);if(Ee){const xe=!Q||Q==Mo;Ee.forEach(rt=>{rt.queued||!xe&&rt.triggerName!=U||me.push(rt)})}}return(S||U)&&(me=me.filter(Ee=>!(S&&S!=Ee.namespaceId||U&&U!=Ee.triggerName))),me}_beforeAnimationBuild(d,g,S){const Q=g.element,me=g.isRemovalTransition?void 0:d,Ee=g.isRemovalTransition?void 0:g.triggerName;for(const xe of g.timelines){const rt=xe.element,bt=rt!==Q,Jt=Ms(S,rt,[]);this._getPreviousPlayers(rt,bt,me,Ee,g.toState).forEach(bn=>{const Un=bn.getRealPlayer();Un.beforeDestroy&&Un.beforeDestroy(),bn.destroy(),Jt.push(bn)})}Xi(Q,g.fromStyles)}_buildAnimation(d,g,S,U,Q,me){const Ee=g.triggerName,xe=g.element,rt=[],bt=new Set,Jt=new Set,nr=g.timelines.map(Un=>{const Bn=Un.element;bt.add(Bn);const sr=Bn[zo];if(sr&&sr.removedBeforeQueried)return new kn.ZN(Un.duration,Un.delay);const Ar=Bn!==xe,Ci=function Ct(I){const d=[];return ln(I,d),d}((S.get(Bn)||nd).map(Ei=>Ei.getRealPlayer())).filter(Ei=>!!Ei.element&&Ei.element===Bn),qi=Q.get(Bn),un=me.get(Bn),es=po(0,this._normalizer,0,Un.keyframes,qi,un),Fi=this._buildPlayer(Un,es,Ci);if(Un.subTimeline&&U&&Jt.add(Bn),Ar){const Ei=new yc(d,Ee,Bn);Ei.setRealPlayer(Fi),rt.push(Ei)}return Fi});rt.forEach(Un=>{Ms(this.playersByQueriedElement,Un.element,[]).push(Un),Un.onDone(()=>function Hl(I,d,g){let S=I.get(d);if(S){if(S.length){const U=S.indexOf(g);S.splice(U,1)}0==S.length&&I.delete(d)}return S}(this.playersByQueriedElement,Un.element,Un))}),bt.forEach(Un=>ne(Un,b));const bn=ya(nr);return bn.onDestroy(()=>{bt.forEach(Un=>fe(Un,b)),ao(xe,g.toStyles)}),Jt.forEach(Un=>{Ms(U,Un,[]).push(bn)}),bn}_buildPlayer(d,g,S){return g.length>0?this.driver.animate(d.element,g,d.duration,d.delay,d.easing,S):new kn.ZN(d.duration,d.delay)}}class yc{constructor(d,g,S){this.namespaceId=d,this.triggerName=g,this.element=S,this._player=new kn.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(d){this._containsRealPlayer||(this._player=d,this._queuedCallbacks.forEach((g,S)=>{g.forEach(U=>dl(d,S,void 0,U))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(d.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(d){this.totalTime=d}syncPlayerEvents(d){const g=this._player;g.triggerCallback&&d.onStart(()=>g.triggerCallback("start")),d.onDone(()=>this.finish()),d.onDestroy(()=>this.destroy())}_queueEvent(d,g){Ms(this._queuedCallbacks,d,[]).push(g)}onDone(d){this.queued&&this._queueEvent("done",d),this._player.onDone(d)}onStart(d){this.queued&&this._queueEvent("start",d),this._player.onStart(d)}onDestroy(d){this.queued&&this._queueEvent("destroy",d),this._player.onDestroy(d)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(d){this.queued||this._player.setPosition(d)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(d){const g=this._player;g.triggerCallback&&g.triggerCallback(d)}}function Ju(I){return I&&1===I.nodeType}function m(I,d){const g=I.style.display;return I.style.display=d??"none",g}function w(I,d,g,S,U){const Q=[];g.forEach(xe=>Q.push(m(xe)));const me=[];S.forEach((xe,rt)=>{const bt=new Map;xe.forEach(Jt=>{const nr=d.computeStyle(rt,Jt,U);bt.set(Jt,nr),(!nr||0==nr.length)&&(rt[zo]=wl,me.push(rt))}),I.set(rt,bt)});let Ee=0;return g.forEach(xe=>m(xe,Q[Ee++])),me}function P(I,d){const g=new Map;if(I.forEach(Ee=>g.set(Ee,[])),0==d.length)return g;const S=1,U=new Set(d),Q=new Map;function me(Ee){if(!Ee)return S;let xe=Q.get(Ee);if(xe)return xe;const rt=Ee.parentNode;return xe=g.has(rt)?rt:U.has(rt)?S:me(rt),Q.set(Ee,xe),xe}return d.forEach(Ee=>{const xe=me(Ee);xe!==S&&g.get(xe).push(Ee)}),g}function ne(I,d){I.classList?.add(d)}function fe(I,d){I.classList?.remove(d)}function tt(I,d,g){ya(g).onDone(()=>I.processLeaveNode(d))}function ln(I,d){for(let g=0;g<I.length;g++){const S=I[g];S instanceof kn.ZE?ln(S.players,d):d.push(S)}}function dr(I,d,g){const S=g.get(I);if(!S)return!1;let U=d.get(I);return U?S.forEach(Q=>U.add(Q)):d.set(I,S),g.delete(I),!0}class Zr{constructor(d,g,S){this.bodyNode=d,this._driver=g,this._normalizer=S,this._triggerCache={},this.onRemovalComplete=(U,Q)=>{},this._transitionEngine=new $l(d,g,S),this._timelineEngine=new eu(d,g,S),this._transitionEngine.onRemovalComplete=(U,Q)=>this.onRemovalComplete(U,Q)}registerTrigger(d,g,S,U,Q){const me=d+"-"+U;let Ee=this._triggerCache[me];if(!Ee){const xe=[],rt=[],bt=Ia(this._driver,Q,xe,rt);if(xe.length)throw function Zl(I,d){return new z.vHH(3404,!1)}();Ee=function Xn(I,d,g){return new $r(I,d,g)}(U,bt,this._normalizer),this._triggerCache[me]=Ee}this._transitionEngine.registerTrigger(g,U,Ee)}register(d,g){this._transitionEngine.register(d,g)}destroy(d,g){this._transitionEngine.destroy(d,g)}onInsert(d,g,S,U){this._transitionEngine.insertNode(d,g,S,U)}onRemove(d,g,S,U){this._transitionEngine.removeNode(d,g,U||!1,S)}disableAnimations(d,g){this._transitionEngine.markElementAsDisabled(d,g)}process(d,g,S,U){if("@"==S.charAt(0)){const[Q,me]=qa(S);this._timelineEngine.command(Q,g,me,U)}else this._transitionEngine.trigger(d,g,S,U)}listen(d,g,S,U,Q){if("@"==S.charAt(0)){const[me,Ee]=qa(S);return this._timelineEngine.listen(me,g,Ee,Q)}return this._transitionEngine.listen(d,g,S,U,Q)}flush(d=-1){this._transitionEngine.flush(d)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Wo=(()=>{class I{constructor(g,S,U){this._element=g,this._startStyles=S,this._endStyles=U,this._state=0;let Q=I.initialStylesByElement.get(g);Q||I.initialStylesByElement.set(g,Q=new Map),this._initialStyles=Q}start(){this._state<1&&(this._startStyles&&ao(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ao(this._element,this._initialStyles),this._endStyles&&(ao(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(I.initialStylesByElement.delete(this._element),this._startStyles&&(Xi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xi(this._element,this._endStyles),this._endStyles=null),ao(this._element,this._initialStyles),this._state=3)}}return I.initialStylesByElement=new WeakMap,I})();function ec(I){let d=null;return I.forEach((g,S)=>{(function Os(I){return"display"===I||"position"===I})(S)&&(d=d||new Map,d.set(S,g))}),d}class tu{constructor(d,g,S,U){this.element=d,this.keyframes=g,this.options=S,this._specialStyles=U,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=S.duration,this._delay=S.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(d=>d()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const d=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,d,this.options),this._finalKeyframe=d.length?d[d.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(d){const g=[];return d.forEach(S=>{g.push(Object.fromEntries(S))}),g}_triggerWebAnimation(d,g,S){return d.animate(this._convertKeyframesToObject(g),S)}onStart(d){this._originalOnStartFns.push(d),this._onStartFns.push(d)}onDone(d){this._originalOnDoneFns.push(d),this._onDoneFns.push(d)}onDestroy(d){this._onDestroyFns.push(d)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(d=>d()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(d=>d()),this._onDestroyFns=[])}setPosition(d){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=d*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const d=new Map;this.hasStarted()&&this._finalKeyframe.forEach((S,U)=>{"offset"!==U&&d.set(U,this._finished?S:$s(this.element,U))}),this.currentSnapshot=d}triggerCallback(d){const g="start"===d?this._onStartFns:this._onDoneFns;g.forEach(S=>S()),g.length=0}}class bl{validateStyleProperty(d){return!0}validateAnimatableStyleProperty(d){return!0}matchesElement(d,g){return!1}containsElement(d,g){return qu(d,g)}getParentElement(d){return fu(d)}query(d,g,S){return Ao(d,g,S)}computeStyle(d,g,S){return window.getComputedStyle(d)[g]}animate(d,g,S,U,Q,me=[]){const xe={duration:S,delay:U,fill:0==U?"both":"forwards"};Q&&(xe.easing=Q);const rt=new Map,bt=me.filter(bn=>bn instanceof tu);(function hc(I,d){return 0===I||0===d})(S,U)&&bt.forEach(bn=>{bn.currentSnapshot.forEach((Un,Bn)=>rt.set(Bn,Un))});let Jt=function Sn(I){return I.length?I[0]instanceof Map?I:I.map(d=>Rn(d)):[]}(g).map(bn=>us(bn));Jt=function gs(I,d,g){if(g.size&&d.length){let S=d[0],U=[];if(g.forEach((Q,me)=>{S.has(me)||U.push(me),S.set(me,Q)}),U.length)for(let Q=1;Q<d.length;Q++){let me=d[Q];U.forEach(Ee=>me.set(Ee,$s(I,Ee)))}}return d}(d,Jt,rt);const nr=function Sa(I,d){let g=null,S=null;return Array.isArray(d)&&d.length?(g=ec(d[0]),d.length>1&&(S=ec(d[d.length-1]))):d instanceof Map&&(g=ec(d)),g||S?new Wo(I,g,S):null}(d,Jt);return new tu(d,Jt,xe,nr)}}var Lu=K(6895);let Xs=(()=>{class I extends kn._j{constructor(g,S){super(),this._nextAnimationId=0,this._renderer=g.createRenderer(S.body,{id:"0",encapsulation:z.ifc.None,styles:[],data:{animation:[]}})}build(g){const S=this._nextAnimationId.toString();this._nextAnimationId++;const U=Array.isArray(g)?(0,kn.vP)(g):g;return _c(this._renderer,null,S,"register",[U]),new _u(S,this._renderer)}}return I.\u0275fac=function(g){return new(g||I)(z.LFG(z.FYo),z.LFG(Lu.K0))},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac}),I})();class _u extends kn.LC{constructor(d,g){super(),this._id=d,this._renderer=g}create(d,g){return new Au(this._id,d,g||{},this._renderer)}}class Au{constructor(d,g,S,U){this.id=d,this.element=g,this._renderer=U,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",S)}_listen(d,g){return this._renderer.listen(this.element,`@@${this.id}:${d}`,g)}_command(d,...g){return _c(this._renderer,this.element,this.id,d,g)}onDone(d){this._listen("done",d)}onStart(d){this._listen("start",d)}onDestroy(d){this._listen("destroy",d)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(d){this._command("setPosition",d)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function _c(I,d,g,S,U){return I.setProperty(d,`@@${g}:${S}`,U)}const di="@.disabled";let $c=(()=>{class I{constructor(g,S,U){this.delegate=g,this.engine=S,this._zone=U,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),S.onRemovalComplete=(Q,me)=>{const Ee=me?.parentNode(Q);Ee&&me.removeChild(Ee,Q)}}createRenderer(g,S){const Q=this.delegate.createRenderer(g,S);if(!(g&&S&&S.data&&S.data.animation)){let bt=this._rendererCache.get(Q);return bt||(bt=new vc("",Q,this.engine,()=>this._rendererCache.delete(Q)),this._rendererCache.set(Q,bt)),bt}const me=S.id,Ee=S.id+"-"+this._currentId;this._currentId++,this.engine.register(Ee,g);const xe=bt=>{Array.isArray(bt)?bt.forEach(xe):this.engine.registerTrigger(me,Ee,g,bt.name,bt)};return S.data.animation.forEach(xe),new Hc(this,Ee,Q,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(g,S,U){g>=0&&g<this._microtaskId?this._zone.run(()=>S(U)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Q=>{const[me,Ee]=Q;me(Ee)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([S,U]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return I.\u0275fac=function(g){return new(g||I)(z.LFG(z.FYo),z.LFG(Zr),z.LFG(z.R0b))},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac}),I})();class vc{constructor(d,g,S,U){this.namespaceId=d,this.delegate=g,this.engine=S,this._onDestroy=U,this.destroyNode=this.delegate.destroyNode?Q=>g.destroyNode(Q):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(d,g){return this.delegate.createElement(d,g)}createComment(d){return this.delegate.createComment(d)}createText(d){return this.delegate.createText(d)}appendChild(d,g){this.delegate.appendChild(d,g),this.engine.onInsert(this.namespaceId,g,d,!1)}insertBefore(d,g,S,U=!0){this.delegate.insertBefore(d,g,S),this.engine.onInsert(this.namespaceId,g,d,U)}removeChild(d,g,S){this.engine.onRemove(this.namespaceId,g,this.delegate,S)}selectRootElement(d,g){return this.delegate.selectRootElement(d,g)}parentNode(d){return this.delegate.parentNode(d)}nextSibling(d){return this.delegate.nextSibling(d)}setAttribute(d,g,S,U){this.delegate.setAttribute(d,g,S,U)}removeAttribute(d,g,S){this.delegate.removeAttribute(d,g,S)}addClass(d,g){this.delegate.addClass(d,g)}removeClass(d,g){this.delegate.removeClass(d,g)}setStyle(d,g,S,U){this.delegate.setStyle(d,g,S,U)}removeStyle(d,g,S){this.delegate.removeStyle(d,g,S)}setProperty(d,g,S){"@"==g.charAt(0)&&g==di?this.disableAnimations(d,!!S):this.delegate.setProperty(d,g,S)}setValue(d,g){this.delegate.setValue(d,g)}listen(d,g,S){return this.delegate.listen(d,g,S)}disableAnimations(d,g){this.engine.disableAnimations(d,g)}}class Hc extends vc{constructor(d,g,S,U,Q){super(g,S,U,Q),this.factory=d,this.namespaceId=g}setProperty(d,g,S){"@"==g.charAt(0)?"."==g.charAt(1)&&g==di?this.disableAnimations(d,S=void 0===S||!!S):this.engine.process(this.namespaceId,d,g.slice(1),S):this.delegate.setProperty(d,g,S)}listen(d,g,S){if("@"==g.charAt(0)){const U=function md(I){switch(I){case"body":return document.body;case"document":return document;case"window":return window;default:return I}}(d);let Q=g.slice(1),me="";return"@"!=Q.charAt(0)&&([Q,me]=function zc(I){const d=I.indexOf(".");return[I.substring(0,d),I.slice(d+1)]}(Q)),this.engine.listen(this.namespaceId,U,Q,me,Ee=>{this.factory.scheduleListenerCallback(Ee._data||-1,S,Ee)})}return this.delegate.listen(d,g,S)}}const Wc=[{provide:kn._j,useClass:Xs},{provide:ku,useFactory:function mh(){return new V}},{provide:Zr,useClass:(()=>{class I extends Zr{constructor(g,S,U,Q){super(g.body,S,U)}ngOnDestroy(){this.flush()}}return I.\u0275fac=function(g){return new(g||I)(z.LFG(Lu.K0),z.LFG(fl),z.LFG(ku),z.LFG(z.z2F))},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac}),I})()},{provide:z.FYo,useFactory:function rd(I,d,g){return new $c(I,d,g)},deps:[_.se,Zr,z.R0b]}],vu=[{provide:fl,useFactory:()=>new bl},{provide:z.QbO,useValue:"BrowserAnimations"},...Wc],Ru=[{provide:fl,useClass:Ya},{provide:z.QbO,useValue:"NoopAnimations"},...Wc];let _d=(()=>{class I{static withConfig(g){return{ngModule:I,providers:g.disableAnimations?Ru:vu}}}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({providers:vu,imports:[_.b2]}),I})();var Ed=K(7512),Eu=K(9751),Gc=K(9646),wd=K(8996),Gd=K(8372),yo=K(4004),Ac=K(3900),Rc=K(3942),Js=K(6961),yh=K(4859);class tc{constructor(d,g,S){this._delegate=d,this.task=g,this.ref=S}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Kd{constructor(d,g){this._delegate=d,this._ref=g,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tc(this._delegate.snapshot,this,this._ref)}then(d,g){return this._delegate.then(S=>{if(d)return d(new tc(S,this,this._ref))},g)}on(d,g,S,U){let Q;return g&&(Q="function"==typeof g?me=>g(new tc(me,this,this._ref)):{next:g.next?me=>g.next(new tc(me,this,this._ref)):void 0,complete:g.complete||void 0,error:g.error||void 0}),this._delegate.on(d,Q,S||void 0,U||void 0)}}class Id{constructor(d,g){this._delegate=d,this._service=g}get prefixes(){return this._delegate.prefixes.map(d=>new zl(d,this._service))}get items(){return this._delegate.items.map(d=>new zl(d,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zl{constructor(d,g){this._delegate=d,this.storage=g}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(d){const g=(0,Js.g6)(this._delegate,d);return new zl(g,this.storage)}get root(){return new zl(this._delegate.root,this.storage)}get parent(){const d=this._delegate.parent;return null==d?null:new zl(d,this.storage)}put(d,g){return this._throwIfRoot("put"),new Kd((0,Js.B0)(this._delegate,d,g),this)}putString(d,g=Js.bm.RAW,S){this._throwIfRoot("putString");const U=(0,Js.qm)(g,d),Q=Object.assign({},S);return null==Q.contentType&&null!=U.contentType&&(Q.contentType=U.contentType),new Kd(new Js.IX(this._delegate,new Js.UJ(U.data,!0),Q),this)}listAll(){return(0,Js.aF)(this._delegate).then(d=>new Id(d,this.storage))}list(d){return(0,Js.pb)(this._delegate,d||void 0).then(g=>new Id(g,this.storage))}getMetadata(){return(0,Js.sd)(this._delegate)}updateMetadata(d){return(0,Js.Ym)(this._delegate,d)}getDownloadURL(){return(0,Js.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,Js.oq)(this._delegate)}_throwIfRoot(d){if(""===this._delegate._location.path)throw(0,Js.y4)(d)}}class Vu{constructor(d,g){this.app=d,this._delegate=g}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(d){if(qd(d))throw(0,Js.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new zl((0,Js.iH)(this._delegate,d),this)}refFromURL(d){if(!qd(d))throw(0,Js.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Js.gE.makeFromUrl(d,this._delegate.host)}catch{throw(0,Js.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new zl((0,Js.iH)(this._delegate,d),this)}setMaxUploadRetryTime(d){this._delegate.maxUploadRetryTime=d}setMaxOperationRetryTime(d){this._delegate.maxOperationRetryTime=d}useEmulator(d,g,S={}){(0,Js.a1)(this._delegate,d,g,S)}}function qd(I){return/^[A-Za-z]+:\/\//.test(I)}function Mc(I,{instanceIdentifier:d}){const g=I.getProvider("app-compat").getImmediate(),S=I.getProvider("storage").getImmediate({identifier:d});return new Vu(g,S)}!function Zd(I){const d={TaskState:Js.$Y,TaskEvent:Js.FN,StringFormat:Js.bm,Storage:Vu,Reference:zl};I.INTERNAL.registerComponent(new yh.wA("storage-compat",Mc,"PUBLIC").setServiceProps(d).setMultipleInstances(!0)),I.registerVersion("@firebase/storage-compat","0.3.2")}(Rc.Z);var Eh=K(9260);function Yh(I){const d=function wh(I){return new Eu.y(d=>{const g=me=>d.next(me);g(I.snapshot);const Q=I.on("state_changed",g);return I.then(me=>{g(me),d.complete()},me=>{g(I.snapshot),(me=>{d.error(me)})(me)}),function(){Q()}}).pipe((0,Gd.b)(0))}(I);return{task:I,then:I.then.bind(I),catch:I.catch.bind(I),pause:I.pause.bind(I),cancel:I.cancel.bind(I),resume:I.resume.bind(I),snapshotChanges:()=>d,percentageChanges:()=>d.pipe((0,yo.U)(g=>g.bytesTransferred/g.totalBytes*100))}}function ru(I){return{getDownloadURL:()=>(0,Gc.of)(void 0).pipe(Ls.fc,(0,Ac.w)(()=>I.getDownloadURL()),Ls.iC),getMetadata:()=>(0,Gc.of)(void 0).pipe(Ls.fc,(0,Ac.w)(()=>I.getMetadata()),Ls.iC),delete:()=>(0,wd.D)(I.delete()),child:d=>ru(I.child(d)),updateMetadata:d=>(0,wd.D)(I.updateMetadata(d)),put:(d,g)=>Yh(I.put(d,g)),putString:(d,g,S)=>Yh(I.putString(d,g,S)),list:d=>(0,wd.D)(I.list(d)),listAll:()=>(0,wd.D)(I.listAll())}}const la=new z.OlP("angularfire2.storageBucket"),Ji=new z.OlP("angularfire2.storage.maxUploadRetryTime"),Yd=new z.OlP("angularfire2.storage.maxOperationRetryTime"),Ih=new z.OlP("angularfire2.storage.use-emulator");let bd=(()=>{class I{constructor(g,S,U,Q,me,Ee,xe,rt,bt,Jt){const nr=(0,yr.on)(g,me,S);this.storage=(0,yr.cc)(`${nr.name}.storage.${U}`,"AngularFireStorage",nr.name,()=>{const bn=me.runOutsideAngular(()=>nr.storage(U||void 0)),Un=bt;return Un&&bn.useEmulator(...Un),xe&&bn.setMaxUploadRetryTime(xe),rt&&bn.setMaxOperationRetryTime(rt),bn},[xe,rt])}ref(g){return ru(this.storage.ref(g))}refFromURL(g){return ru(this.storage.refFromURL(g))}upload(g,S,U){return ru(this.storage.ref(g)).put(S,U)}}return I.\u0275fac=function(g){return new(g||I)(z.LFG(yr.Dh),z.LFG(yr.xv,8),z.LFG(la,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(Ls.HU),z.LFG(Ji,8),z.LFG(Yd,8),z.LFG(Ih,8),z.LFG(wo.nm,8))},I.\u0275prov=z.Yz7({token:I,factory:I.\u0275fac,providedIn:"any"}),I})(),Cd=(()=>{class I{}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({}),I})(),nc=(()=>{class I{constructor(){Eh.Z.registerVersion("angularfire",Ls.q4.full,"gcs-compat")}}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({providers:[bd],imports:[Cd]}),I})();yr.hO.initializeApp(ui.firebaseConfig);let Kc=(()=>{class I{}return I.\u0275fac=function(g){return new(g||I)},I.\u0275mod=z.oAB({type:I,bootstrap:[li]}),I.\u0275inj=z.cJS({providers:[Le.e,{provide:yr.Dh,useValue:ui.firebaseConfig},Se],imports:[_.b2,Ge,_d,ie.Bz,xr.u5,(0,jr.hX)(()=>(0,jr.ZF)(ui.firebaseConfig)),(0,hs.AR)(()=>(0,hs.v0)()),Rl(()=>Fo()),(0,Ed.Vq)(()=>(0,Ed.cF)()),sn.ww,Si.JS,nc]}),I})();_.q6().bootstrapModule(Kc).catch(I=>console.error(I))},9751:(fn,lt,K)=>{K.d(lt,{y:()=>Ie});var _=K(930),ie=K(727),z=K(8822),Le=K(9635),Se=K(2416),je=K(576),Ge=K(2806);let Ie=(()=>{class Oe{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const Mt=new Oe;return Mt.source=this,Mt.operator=ht,Mt}subscribe(ht,Mt,qt){const ct=function we(Oe){return Oe&&Oe instanceof _.Lv||function he(Oe){return Oe&&(0,je.m)(Oe.next)&&(0,je.m)(Oe.error)&&(0,je.m)(Oe.complete)}(Oe)&&(0,ie.Nn)(Oe)}(ht)?ht:new _.Hp(ht,Mt,qt);return(0,Ge.x)(()=>{const{operator:_t,source:At}=this;ct.add(_t?_t.call(ct,At):At?this._subscribe(ct):this._trySubscribe(ct))}),ct}_trySubscribe(ht){try{return this._subscribe(ht)}catch(Mt){ht.error(Mt)}}forEach(ht,Mt){return new(Mt=Qe(Mt))((qt,ct)=>{const _t=new _.Hp({next:At=>{try{ht(At)}catch(It){ct(It),_t.unsubscribe()}},error:ct,complete:qt});this.subscribe(_t)})}_subscribe(ht){var Mt;return null===(Mt=this.source)||void 0===Mt?void 0:Mt.subscribe(ht)}[z.L](){return this}pipe(...ht){return(0,Le.U)(ht)(this)}toPromise(ht){return new(ht=Qe(ht))((Mt,qt)=>{let ct;this.subscribe(_t=>ct=_t,_t=>qt(_t),()=>Mt(ct))})}}return Oe.create=dt=>new Oe(dt),Oe})();function Qe(Oe){var dt;return null!==(dt=Oe??Se.v.Promise)&&void 0!==dt?dt:Promise}},7579:(fn,lt,K)=>{K.d(lt,{x:()=>Ge});var _=K(9751),ie=K(727);const Le=(0,K(3888).d)(Qe=>function(){Qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=K(8737),je=K(2806);let Ge=(()=>{class Qe extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const Oe=new Ie(this,this);return Oe.operator=we,Oe}_throwIfClosed(){if(this.closed)throw new Le}next(we){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(we)}})}error(we){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(we)}})}complete(){(0,je.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:Oe,isStopped:dt,observers:ht}=this;return Oe||dt?ie.Lc:(this.currentObservers=null,ht.push(we),new ie.w0(()=>{this.currentObservers=null,(0,Se.P)(ht,we)}))}_checkFinalizedStatuses(we){const{hasError:Oe,thrownError:dt,isStopped:ht}=this;Oe?we.error(dt):ht&&we.complete()}asObservable(){const we=new _.y;return we.source=this,we}}return Qe.create=(he,we)=>new Ie(he,we),Qe})();class Ie extends Ge{constructor(he,we){super(),this.destination=he,this.source=we}next(he){var we,Oe;null===(Oe=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===Oe||Oe.call(we,he)}error(he){var we,Oe;null===(Oe=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===Oe||Oe.call(we,he)}complete(){var he,we;null===(we=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===we||we.call(he)}_subscribe(he){var we,Oe;return null!==(Oe=null===(we=this.source)||void 0===we?void 0:we.subscribe(he))&&void 0!==Oe?Oe:ie.Lc}}},930:(fn,lt,K)=>{K.d(lt,{Hp:()=>qt,Lv:()=>Oe});var _=K(576),ie=K(727),z=K(2416),Le=K(7849),Se=K(5032);const je=Qe("C",void 0,void 0);function Qe(Ze,Pe,at){return{kind:Ze,value:Pe,error:at}}var he=K(3410),we=K(2806);class Oe extends ie.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,ie.Nn)(Pe)&&Pe.add(this)):this.destination=It}static create(Pe,at,Lt){return new qt(Pe,at,Lt)}next(Pe){this.isStopped?At(function Ie(Ze){return Qe("N",Ze,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?At(function Ge(Ze){return Qe("E",void 0,Ze)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?At(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function ht(Ze,Pe){return dt.call(Ze,Pe)}class Mt{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:at}=this;if(at.next)try{at.next(Pe)}catch(Lt){ct(Lt)}}error(Pe){const{partialObserver:at}=this;if(at.error)try{at.error(Pe)}catch(Lt){ct(Lt)}else ct(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(at){ct(at)}}}class qt extends Oe{constructor(Pe,at,Lt){let gt;if(super(),(0,_.m)(Pe)||!Pe)gt={next:Pe??void 0,error:at??void 0,complete:Lt??void 0};else{let Y;this&&z.v.useDeprecatedNextContext?(Y=Object.create(Pe),Y.unsubscribe=()=>this.unsubscribe(),gt={next:Pe.next&&ht(Pe.next,Y),error:Pe.error&&ht(Pe.error,Y),complete:Pe.complete&&ht(Pe.complete,Y)}):gt=Pe}this.destination=new Mt(gt)}}function ct(Ze){z.v.useDeprecatedSynchronousErrorHandling?(0,we.O)(Ze):(0,Le.h)(Ze)}function At(Ze,Pe){const{onStoppedNotification:at}=z.v;at&&he.z.setTimeout(()=>at(Ze,Pe))}const It={closed:!0,next:Se.Z,error:function _t(Ze){throw Ze},complete:Se.Z}},727:(fn,lt,K)=>{K.d(lt,{Lc:()=>je,w0:()=>Se,Nn:()=>Ge});var _=K(576);const z=(0,K(3888).d)(Qe=>function(we){Qe(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((Oe,dt)=>`${dt+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var Le=K(8737);class Se{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const ht of we)ht.remove(this);else we.remove(this);const{initialTeardown:Oe}=this;if((0,_.m)(Oe))try{Oe()}catch(ht){he=ht instanceof z?ht.errors:[ht]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const ht of dt)try{Ie(ht)}catch(Mt){he=he??[],Mt instanceof z?he=[...he,...Mt.errors]:he.push(Mt)}}if(he)throw new z(he)}}add(he){var we;if(he&&he!==this)if(this.closed)Ie(he);else{if(he instanceof Se){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(he)}}_hasParent(he){const{_parentage:we}=this;return we===he||Array.isArray(we)&&we.includes(he)}_addParent(he){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(he),we):we?[we,he]:he}_removeParent(he){const{_parentage:we}=this;we===he?this._parentage=null:Array.isArray(we)&&(0,Le.P)(we,he)}remove(he){const{_finalizers:we}=this;we&&(0,Le.P)(we,he),he instanceof Se&&he._removeParent(this)}}Se.EMPTY=(()=>{const Qe=new Se;return Qe.closed=!0,Qe})();const je=Se.EMPTY;function Ge(Qe){return Qe instanceof Se||Qe&&"closed"in Qe&&(0,_.m)(Qe.remove)&&(0,_.m)(Qe.add)&&(0,_.m)(Qe.unsubscribe)}function Ie(Qe){(0,_.m)(Qe)?Qe():Qe.unsubscribe()}},2416:(fn,lt,K)=>{K.d(lt,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(fn,lt,K)=>{K.d(lt,{a:()=>he});var _=K(9751),ie=K(4742),z=K(8996),Le=K(4671),Se=K(3268),je=K(7669),Ge=K(1810),Ie=K(5403),Qe=K(9672);function he(...dt){const ht=(0,je.yG)(dt),Mt=(0,je.jO)(dt),{args:qt,keys:ct}=(0,ie.D)(dt);if(0===qt.length)return(0,z.D)([],ht);const _t=new _.y(function we(dt,ht,Mt=Le.y){return qt=>{Oe(ht,()=>{const{length:ct}=dt,_t=new Array(ct);let At=ct,It=ct;for(let Ze=0;Ze<ct;Ze++)Oe(ht,()=>{const Pe=(0,z.D)(dt[Ze],ht);let at=!1;Pe.subscribe((0,Ie.x)(qt,Lt=>{_t[Ze]=Lt,at||(at=!0,It--),It||qt.next(Mt(_t.slice()))},()=>{--At||qt.complete()}))},qt)},qt)}}(qt,ht,ct?At=>(0,Ge.n)(ct,At):Le.y));return Mt?_t.pipe((0,Se.Z)(Mt)):_t}function Oe(dt,ht,Mt){dt?(0,Qe.f)(Mt,dt,ht):ht()}},7272:(fn,lt,K)=>{K.d(lt,{z:()=>Se});var _=K(8189),z=K(7669),Le=K(8996);function Se(...je){return function ie(){return(0,_.J)(1)}()((0,Le.D)(je,(0,z.yG)(je)))}},515:(fn,lt,K)=>{K.d(lt,{E:()=>ie});const ie=new(K(9751).y)(Se=>Se.complete())},8996:(fn,lt,K)=>{K.d(lt,{D:()=>Pe});var _=K(8421),ie=K(5363),z=K(9468),je=K(9751),Ie=K(2202),Qe=K(576),he=K(9672);function Oe(at,Lt){if(!at)throw new Error("Iterable cannot be null");return new je.y(gt=>{(0,he.f)(gt,Lt,()=>{const Y=at[Symbol.asyncIterator]();(0,he.f)(gt,Lt,()=>{Y.next().then($t=>{$t.done?gt.complete():gt.next($t.value)})},0,!0)})})}var dt=K(3670),ht=K(8239),Mt=K(1144),qt=K(6495),ct=K(2206),_t=K(4532),At=K(3260);function Pe(at,Lt){return Lt?function Ze(at,Lt){if(null!=at){if((0,dt.c)(at))return function Le(at,Lt){return(0,_.Xf)(at).pipe((0,z.R)(Lt),(0,ie.Q)(Lt))}(at,Lt);if((0,Mt.z)(at))return function Ge(at,Lt){return new je.y(gt=>{let Y=0;return Lt.schedule(function(){Y===at.length?gt.complete():(gt.next(at[Y++]),gt.closed||this.schedule())})})}(at,Lt);if((0,ht.t)(at))return function Se(at,Lt){return(0,_.Xf)(at).pipe((0,z.R)(Lt),(0,ie.Q)(Lt))}(at,Lt);if((0,ct.D)(at))return Oe(at,Lt);if((0,qt.T)(at))return function we(at,Lt){return new je.y(gt=>{let Y;return(0,he.f)(gt,Lt,()=>{Y=at[Ie.h](),(0,he.f)(gt,Lt,()=>{let $t,on;try{({value:$t,done:on}=Y.next())}catch(Yt){return void gt.error(Yt)}on?gt.complete():gt.next($t)},0,!0)}),()=>(0,Qe.m)(Y?.return)&&Y.return()})}(at,Lt);if((0,At.L)(at))return function It(at,Lt){return Oe((0,At.Q)(at),Lt)}(at,Lt)}throw(0,_t.z)(at)}(at,Lt):(0,_.Xf)(at)}},8421:(fn,lt,K)=>{K.d(lt,{Xf:()=>dt});var _=K(7582),ie=K(1144),z=K(8239),Le=K(9751),Se=K(3670),je=K(2206),Ge=K(4532),Ie=K(6495),Qe=K(3260),he=K(576),we=K(7849),Oe=K(8822);function dt(Ze){if(Ze instanceof Le.y)return Ze;if(null!=Ze){if((0,Se.c)(Ze))return function ht(Ze){return new Le.y(Pe=>{const at=Ze[Oe.L]();if((0,he.m)(at.subscribe))return at.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ze);if((0,ie.z)(Ze))return function Mt(Ze){return new Le.y(Pe=>{for(let at=0;at<Ze.length&&!Pe.closed;at++)Pe.next(Ze[at]);Pe.complete()})}(Ze);if((0,z.t)(Ze))return function qt(Ze){return new Le.y(Pe=>{Ze.then(at=>{Pe.closed||(Pe.next(at),Pe.complete())},at=>Pe.error(at)).then(null,we.h)})}(Ze);if((0,je.D)(Ze))return _t(Ze);if((0,Ie.T)(Ze))return function ct(Ze){return new Le.y(Pe=>{for(const at of Ze)if(Pe.next(at),Pe.closed)return;Pe.complete()})}(Ze);if((0,Qe.L)(Ze))return function At(Ze){return _t((0,Qe.Q)(Ze))}(Ze)}throw(0,Ge.z)(Ze)}function _t(Ze){return new Le.y(Pe=>{(function It(Ze,Pe){var at,Lt,gt,Y;return(0,_.mG)(this,void 0,void 0,function*(){try{for(at=(0,_.KL)(Ze);!(Lt=yield at.next()).done;)if(Pe.next(Lt.value),Pe.closed)return}catch($t){gt={error:$t}}finally{try{Lt&&!Lt.done&&(Y=at.return)&&(yield Y.call(at))}finally{if(gt)throw gt.error}}Pe.complete()})})(Ze,Pe).catch(at=>Pe.error(at))})}},6451:(fn,lt,K)=>{K.d(lt,{T:()=>je});var _=K(8189),ie=K(8421),z=K(515),Le=K(7669),Se=K(8996);function je(...Ge){const Ie=(0,Le.yG)(Ge),Qe=(0,Le._6)(Ge,1/0),he=Ge;return he.length?1===he.length?(0,ie.Xf)(he[0]):(0,_.J)(Qe)((0,Se.D)(he,Ie)):z.E}},9646:(fn,lt,K)=>{K.d(lt,{of:()=>z});var _=K(7669),ie=K(8996);function z(...Le){const Se=(0,_.yG)(Le);return(0,ie.D)(Le,Se)}},5403:(fn,lt,K)=>{K.d(lt,{Q:()=>z,x:()=>ie});var _=K(930);function ie(Le,Se,je,Ge,Ie){return new z(Le,Se,je,Ge,Ie)}class z extends _.Lv{constructor(Se,je,Ge,Ie,Qe,he){super(Se),this.onFinalize=Qe,this.shouldUnsubscribe=he,this._next=je?function(we){try{je(we)}catch(Oe){Se.error(Oe)}}:super._next,this._error=Ie?function(we){try{Ie(we)}catch(Oe){Se.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Ge?function(){try{Ge()}catch(we){Se.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:je}=this;super.unsubscribe(),!je&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},8372:(fn,lt,K)=>{K.d(lt,{b:()=>Le});var _=K(4986),ie=K(4482),z=K(5403);function Le(Se,je=_.z){return(0,ie.e)((Ge,Ie)=>{let Qe=null,he=null,we=null;const Oe=()=>{if(Qe){Qe.unsubscribe(),Qe=null;const ht=he;he=null,Ie.next(ht)}};function dt(){const ht=we+Se,Mt=je.now();if(Mt<ht)return Qe=this.schedule(void 0,ht-Mt),void Ie.add(Qe);Oe()}Ge.subscribe((0,z.x)(Ie,ht=>{he=ht,we=je.now(),Qe||(Qe=je.schedule(dt,Se),Ie.add(Qe))},()=>{Oe(),Ie.complete()},void 0,()=>{he=Qe=null}))})}},6590:(fn,lt,K)=>{K.d(lt,{d:()=>z});var _=K(4482),ie=K(5403);function z(Le){return(0,_.e)((Se,je)=>{let Ge=!1;Se.subscribe((0,ie.x)(je,Ie=>{Ge=!0,je.next(Ie)},()=>{Ge||je.next(Le),je.complete()}))})}},1884:(fn,lt,K)=>{K.d(lt,{x:()=>Le});var _=K(4671),ie=K(4482),z=K(5403);function Le(je,Ge=_.y){return je=je??Se,(0,ie.e)((Ie,Qe)=>{let he,we=!0;Ie.subscribe((0,z.x)(Qe,Oe=>{const dt=Ge(Oe);(we||!je(he,dt))&&(we=!1,he=dt,Qe.next(Oe))}))})}function Se(je,Ge){return je===Ge}},9300:(fn,lt,K)=>{K.d(lt,{h:()=>z});var _=K(4482),ie=K(5403);function z(Le,Se){return(0,_.e)((je,Ge)=>{let Ie=0;je.subscribe((0,ie.x)(Ge,Qe=>Le.call(Se,Qe,Ie++)&&Ge.next(Qe)))})}},590:(fn,lt,K)=>{K.d(lt,{P:()=>Ge});var _=K(6805),ie=K(9300),z=K(5698),Le=K(6590),Se=K(8068),je=K(4671);function Ge(Ie,Qe){const he=arguments.length>=2;return we=>we.pipe(Ie?(0,ie.h)((Oe,dt)=>Ie(Oe,dt,we)):je.y,(0,z.q)(1),he?(0,Le.d)(Qe):(0,Se.T)(()=>new _.K))}},4004:(fn,lt,K)=>{K.d(lt,{U:()=>z});var _=K(4482),ie=K(5403);function z(Le,Se){return(0,_.e)((je,Ge)=>{let Ie=0;je.subscribe((0,ie.x)(Ge,Qe=>{Ge.next(Le.call(Se,Qe,Ie++))}))})}},8189:(fn,lt,K)=>{K.d(lt,{J:()=>z});var _=K(5577),ie=K(4671);function z(Le=1/0){return(0,_.z)(ie.y,Le)}},5577:(fn,lt,K)=>{K.d(lt,{z:()=>Ie});var _=K(4004),ie=K(8421),z=K(4482),Le=K(9672),Se=K(5403),Ge=K(576);function Ie(Qe,he,we=1/0){return(0,Ge.m)(he)?Ie((Oe,dt)=>(0,_.U)((ht,Mt)=>he(Oe,ht,dt,Mt))((0,ie.Xf)(Qe(Oe,dt))),we):("number"==typeof he&&(we=he),(0,z.e)((Oe,dt)=>function je(Qe,he,we,Oe,dt,ht,Mt,qt){const ct=[];let _t=0,At=0,It=!1;const Ze=()=>{It&&!ct.length&&!_t&&he.complete()},Pe=Lt=>_t<Oe?at(Lt):ct.push(Lt),at=Lt=>{ht&&he.next(Lt),_t++;let gt=!1;(0,ie.Xf)(we(Lt,At++)).subscribe((0,Se.x)(he,Y=>{dt?.(Y),ht?Pe(Y):he.next(Y)},()=>{gt=!0},void 0,()=>{if(gt)try{for(_t--;ct.length&&_t<Oe;){const Y=ct.shift();Mt?(0,Le.f)(he,Mt,()=>at(Y)):at(Y)}Ze()}catch(Y){he.error(Y)}}))};return Qe.subscribe((0,Se.x)(he,Pe,()=>{It=!0,Ze()})),()=>{qt?.()}}(Oe,dt,Qe,we)))}},5363:(fn,lt,K)=>{K.d(lt,{Q:()=>Le});var _=K(9672),ie=K(4482),z=K(5403);function Le(Se,je=0){return(0,ie.e)((Ge,Ie)=>{Ge.subscribe((0,z.x)(Ie,Qe=>(0,_.f)(Ie,Se,()=>Ie.next(Qe),je),()=>(0,_.f)(Ie,Se,()=>Ie.complete(),je),Qe=>(0,_.f)(Ie,Se,()=>Ie.error(Qe),je)))})}},2940:(fn,lt,K)=>{K.d(lt,{R:()=>z});var _=K(4482),ie=K(7359);function z(Le,Se){return(0,_.e)((0,ie.U)(Le,Se,arguments.length>=2,!0))}},7359:(fn,lt,K)=>{K.d(lt,{U:()=>ie});var _=K(5403);function ie(z,Le,Se,je,Ge){return(Ie,Qe)=>{let he=Se,we=Le,Oe=0;Ie.subscribe((0,_.x)(Qe,dt=>{const ht=Oe++;we=he?z(we,dt,ht):(he=!0,dt),je&&Qe.next(we)},Ge&&(()=>{he&&Qe.next(we),Qe.complete()})))}}},3099:(fn,lt,K)=>{K.d(lt,{B:()=>Se});var _=K(8421),ie=K(7579),z=K(930),Le=K(4482);function Se(Ge={}){const{connector:Ie=(()=>new ie.x),resetOnError:Qe=!0,resetOnComplete:he=!0,resetOnRefCountZero:we=!0}=Ge;return Oe=>{let dt,ht,Mt,qt=0,ct=!1,_t=!1;const At=()=>{ht?.unsubscribe(),ht=void 0},It=()=>{At(),dt=Mt=void 0,ct=_t=!1},Ze=()=>{const Pe=dt;It(),Pe?.unsubscribe()};return(0,Le.e)((Pe,at)=>{qt++,!_t&&!ct&&At();const Lt=Mt=Mt??Ie();at.add(()=>{qt--,0===qt&&!_t&&!ct&&(ht=je(Ze,we))}),Lt.subscribe(at),!dt&&qt>0&&(dt=new z.Hp({next:gt=>Lt.next(gt),error:gt=>{_t=!0,At(),ht=je(It,Qe,gt),Lt.error(gt)},complete:()=>{ct=!0,At(),ht=je(It,he),Lt.complete()}}),(0,_.Xf)(Pe).subscribe(dt))})(Oe)}}function je(Ge,Ie,...Qe){if(!0===Ie)return void Ge();if(!1===Ie)return;const he=new z.Hp({next:()=>{he.unsubscribe(),Ge()}});return(0,_.Xf)(Ie(...Qe)).subscribe(he)}},8675:(fn,lt,K)=>{K.d(lt,{O:()=>Le});var _=K(7272),ie=K(7669),z=K(4482);function Le(...Se){const je=(0,ie.yG)(Se);return(0,z.e)((Ge,Ie)=>{(je?(0,_.z)(Se,Ge,je):(0,_.z)(Se,Ge)).subscribe(Ie)})}},9468:(fn,lt,K)=>{K.d(lt,{R:()=>ie});var _=K(4482);function ie(z,Le=0){return(0,_.e)((Se,je)=>{je.add(z.schedule(()=>Se.subscribe(je),Le))})}},3900:(fn,lt,K)=>{K.d(lt,{w:()=>Le});var _=K(8421),ie=K(4482),z=K(5403);function Le(Se,je){return(0,ie.e)((Ge,Ie)=>{let Qe=null,he=0,we=!1;const Oe=()=>we&&!Qe&&Ie.complete();Ge.subscribe((0,z.x)(Ie,dt=>{Qe?.unsubscribe();let ht=0;const Mt=he++;(0,_.Xf)(Se(dt,Mt)).subscribe(Qe=(0,z.x)(Ie,qt=>Ie.next(je?je(dt,qt,Mt,ht++):qt),()=>{Qe=null,Oe()}))},()=>{we=!0,Oe()}))})}},5698:(fn,lt,K)=>{K.d(lt,{q:()=>Le});var _=K(515),ie=K(4482),z=K(5403);function Le(Se){return Se<=0?()=>_.E:(0,ie.e)((je,Ge)=>{let Ie=0;je.subscribe((0,z.x)(Ge,Qe=>{++Ie<=Se&&(Ge.next(Qe),Se<=Ie&&Ge.complete())}))})}},8505:(fn,lt,K)=>{K.d(lt,{b:()=>Se});var _=K(576),ie=K(4482),z=K(5403),Le=K(4671);function Se(je,Ge,Ie){const Qe=(0,_.m)(je)||Ge||Ie?{next:je,error:Ge,complete:Ie}:je;return Qe?(0,ie.e)((he,we)=>{var Oe;null===(Oe=Qe.subscribe)||void 0===Oe||Oe.call(Qe);let dt=!0;he.subscribe((0,z.x)(we,ht=>{var Mt;null===(Mt=Qe.next)||void 0===Mt||Mt.call(Qe,ht),we.next(ht)},()=>{var ht;dt=!1,null===(ht=Qe.complete)||void 0===ht||ht.call(Qe),we.complete()},ht=>{var Mt;dt=!1,null===(Mt=Qe.error)||void 0===Mt||Mt.call(Qe,ht),we.error(ht)},()=>{var ht,Mt;dt&&(null===(ht=Qe.unsubscribe)||void 0===ht||ht.call(Qe)),null===(Mt=Qe.finalize)||void 0===Mt||Mt.call(Qe)}))}):Le.y}},8068:(fn,lt,K)=>{K.d(lt,{T:()=>Le});var _=K(6805),ie=K(4482),z=K(5403);function Le(je=Se){return(0,ie.e)((Ge,Ie)=>{let Qe=!1;Ge.subscribe((0,z.x)(Ie,he=>{Qe=!0,Ie.next(he)},()=>Qe?Ie.complete():Ie.error(je())))})}function Se(){return new _.K}},4408:(fn,lt,K)=>{K.d(lt,{o:()=>Se});var _=K(727);class ie extends _.w0{constructor(Ge,Ie){super()}schedule(Ge,Ie=0){return this}}const z={setInterval(je,Ge,...Ie){const{delegate:Qe}=z;return Qe?.setInterval?Qe.setInterval(je,Ge,...Ie):setInterval(je,Ge,...Ie)},clearInterval(je){const{delegate:Ge}=z;return(Ge?.clearInterval||clearInterval)(je)},delegate:void 0};var Le=K(8737);class Se extends ie{constructor(Ge,Ie){super(Ge,Ie),this.scheduler=Ge,this.work=Ie,this.pending=!1}schedule(Ge,Ie=0){var Qe;if(this.closed)return this;this.state=Ge;const he=this.id,we=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(we,he,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(Qe=this.id)&&void 0!==Qe?Qe:this.requestAsyncId(we,this.id,Ie),this}requestAsyncId(Ge,Ie,Qe=0){return z.setInterval(Ge.flush.bind(Ge,this),Qe)}recycleAsyncId(Ge,Ie,Qe=0){if(null!=Qe&&this.delay===Qe&&!1===this.pending)return Ie;null!=Ie&&z.clearInterval(Ie)}execute(Ge,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Qe=this._execute(Ge,Ie);if(Qe)return Qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,Ie){let he,Qe=!1;try{this.work(Ge)}catch(we){Qe=!0,he=we||new Error("Scheduled action threw falsy error")}if(Qe)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:Ie}=this,{actions:Qe}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Le.P)(Qe,this),null!=Ge&&(this.id=this.recycleAsyncId(Ie,Ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(fn,lt,K)=>{K.d(lt,{v:()=>z});var _=K(6063);class ie{constructor(Se,je=ie.now){this.schedulerActionCtor=Se,this.now=je}schedule(Se,je=0,Ge){return new this.schedulerActionCtor(this,Se).schedule(Ge,je)}}ie.now=_.l.now;class z extends ie{constructor(Se,je=ie.now){super(Se,je),this.actions=[],this._active=!1}flush(Se){const{actions:je}=this;if(this._active)return void je.push(Se);let Ge;this._active=!0;do{if(Ge=Se.execute(Se.state,Se.delay))break}while(Se=je.shift());if(this._active=!1,Ge){for(;Se=je.shift();)Se.unsubscribe();throw Ge}}}},4986:(fn,lt,K)=>{K.d(lt,{z:()=>z});var _=K(4408);const z=new(K(7565).v)(_.o)},6063:(fn,lt,K)=>{K.d(lt,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(fn,lt,K)=>{K.d(lt,{z:()=>_});const _={setTimeout(ie,z,...Le){const{delegate:Se}=_;return Se?.setTimeout?Se.setTimeout(ie,z,...Le):setTimeout(ie,z,...Le)},clearTimeout(ie){const{delegate:z}=_;return(z?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},2202:(fn,lt,K)=>{K.d(lt,{h:()=>ie});const ie=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(fn,lt,K)=>{K.d(lt,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(fn,lt,K)=>{K.d(lt,{K:()=>ie});const ie=(0,K(3888).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(fn,lt,K)=>{K.d(lt,{_6:()=>je,jO:()=>Le,yG:()=>Se});var _=K(576);function z(Ge){return Ge[Ge.length-1]}function Le(Ge){return(0,_.m)(z(Ge))?Ge.pop():void 0}function Se(Ge){return function ie(Ge){return Ge&&(0,_.m)(Ge.schedule)}(z(Ge))?Ge.pop():void 0}function je(Ge,Ie){return"number"==typeof z(Ge)?Ge.pop():Ie}},4742:(fn,lt,K)=>{K.d(lt,{D:()=>Se});const{isArray:_}=Array,{getPrototypeOf:ie,prototype:z,keys:Le}=Object;function Se(Ge){if(1===Ge.length){const Ie=Ge[0];if(_(Ie))return{args:Ie,keys:null};if(function je(Ge){return Ge&&"object"==typeof Ge&&ie(Ge)===z}(Ie)){const Qe=Le(Ie);return{args:Qe.map(he=>Ie[he]),keys:Qe}}}return{args:Ge,keys:null}}},8737:(fn,lt,K)=>{function _(ie,z){if(ie){const Le=ie.indexOf(z);0<=Le&&ie.splice(Le,1)}}K.d(lt,{P:()=>_})},3888:(fn,lt,K)=>{function _(ie){const Le=ie(Se=>{Error.call(Se),Se.stack=(new Error).stack});return Le.prototype=Object.create(Error.prototype),Le.prototype.constructor=Le,Le}K.d(lt,{d:()=>_})},1810:(fn,lt,K)=>{function _(ie,z){return ie.reduce((Le,Se,je)=>(Le[Se]=z[je],Le),{})}K.d(lt,{n:()=>_})},2806:(fn,lt,K)=>{K.d(lt,{O:()=>Le,x:()=>z});var _=K(2416);let ie=null;function z(Se){if(_.v.useDeprecatedSynchronousErrorHandling){const je=!ie;if(je&&(ie={errorThrown:!1,error:null}),Se(),je){const{errorThrown:Ge,error:Ie}=ie;if(ie=null,Ge)throw Ie}}else Se()}function Le(Se){_.v.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=Se)}},9672:(fn,lt,K)=>{function _(ie,z,Le,Se=0,je=!1){const Ge=z.schedule(function(){Le(),je?ie.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(ie.add(Ge),!je)return Ge}K.d(lt,{f:()=>_})},4671:(fn,lt,K)=>{function _(ie){return ie}K.d(lt,{y:()=>_})},1144:(fn,lt,K)=>{K.d(lt,{z:()=>_});const _=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},2206:(fn,lt,K)=>{K.d(lt,{D:()=>ie});var _=K(576);function ie(z){return Symbol.asyncIterator&&(0,_.m)(z?.[Symbol.asyncIterator])}},576:(fn,lt,K)=>{function _(ie){return"function"==typeof ie}K.d(lt,{m:()=>_})},3670:(fn,lt,K)=>{K.d(lt,{c:()=>z});var _=K(8822),ie=K(576);function z(Le){return(0,ie.m)(Le[_.L])}},6495:(fn,lt,K)=>{K.d(lt,{T:()=>z});var _=K(2202),ie=K(576);function z(Le){return(0,ie.m)(Le?.[_.h])}},8239:(fn,lt,K)=>{K.d(lt,{t:()=>ie});var _=K(576);function ie(z){return(0,_.m)(z?.then)}},3260:(fn,lt,K)=>{K.d(lt,{L:()=>Le,Q:()=>z});var _=K(7582),ie=K(576);function z(Se){return(0,_.FC)(this,arguments,function*(){const Ge=Se.getReader();try{for(;;){const{value:Ie,done:Qe}=yield(0,_.qq)(Ge.read());if(Qe)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Ie)}}finally{Ge.releaseLock()}})}function Le(Se){return(0,ie.m)(Se?.getReader)}},4482:(fn,lt,K)=>{K.d(lt,{A:()=>ie,e:()=>z});var _=K(576);function ie(Le){return(0,_.m)(Le?.lift)}function z(Le){return Se=>{if(ie(Se))return Se.lift(function(je){try{return Le(je,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(fn,lt,K)=>{K.d(lt,{Z:()=>Le});var _=K(4004);const{isArray:ie}=Array;function Le(Se){return(0,_.U)(je=>function z(Se,je){return ie(je)?Se(...je):Se(je)}(Se,je))}},5032:(fn,lt,K)=>{function _(){}K.d(lt,{Z:()=>_})},9635:(fn,lt,K)=>{K.d(lt,{U:()=>z,z:()=>ie});var _=K(4671);function ie(...Le){return z(Le)}function z(Le){return 0===Le.length?_.y:1===Le.length?Le[0]:function(je){return Le.reduce((Ge,Ie)=>Ie(Ge),je)}}},7849:(fn,lt,K)=>{K.d(lt,{h:()=>z});var _=K(2416),ie=K(3410);function z(Le){ie.z.setTimeout(()=>{const{onUnhandledError:Se}=_.v;if(!Se)throw Le;Se(Le)})}},4532:(fn,lt,K)=>{function _(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}K.d(lt,{z:()=>_})},7340:(fn,lt,K)=>{K.d(lt,{F4:()=>he,IO:()=>Mt,LC:()=>ie,X$:()=>Le,ZE:()=>At,ZN:()=>_t,_7:()=>ht,_j:()=>_,eR:()=>we,jt:()=>Se,k1:()=>It,l3:()=>z,oB:()=>Ie,oQ:()=>Oe,pV:()=>dt,ru:()=>je,vP:()=>Ge});class _{}class ie{}const z="*";function Le(Ze,Pe){return{type:7,name:Ze,definitions:Pe,options:{}}}function Se(Ze,Pe=null){return{type:4,styles:Pe,timings:Ze}}function je(Ze,Pe=null){return{type:3,steps:Ze,options:Pe}}function Ge(Ze,Pe=null){return{type:2,steps:Ze,options:Pe}}function Ie(Ze){return{type:6,styles:Ze,offset:null}}function he(Ze){return{type:5,steps:Ze}}function we(Ze,Pe,at=null){return{type:1,expr:Ze,animation:Pe,options:at}}function Oe(Ze,Pe=null){return{type:8,animation:Ze,options:Pe}}function dt(Ze=null){return{type:9,options:Ze}}function ht(Ze,Pe=null){return{type:10,animation:Ze,options:Pe}}function Mt(Ze,Pe,at=null){return{type:11,selector:Ze,animation:Pe,options:at}}function ct(Ze){Promise.resolve().then(Ze)}class _t{constructor(Pe=0,at=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Pe+at}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Pe=>Pe()),this._onDoneFns=[])}onStart(Pe){this._originalOnStartFns.push(Pe),this._onStartFns.push(Pe)}onDone(Pe){this._originalOnDoneFns.push(Pe),this._onDoneFns.push(Pe)}onDestroy(Pe){this._onDestroyFns.push(Pe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ct(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Pe=>Pe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Pe=>Pe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Pe){this._position=this.totalTime?Pe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Pe){const at="start"==Pe?this._onStartFns:this._onDoneFns;at.forEach(Lt=>Lt()),at.length=0}}class At{constructor(Pe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Pe;let at=0,Lt=0,gt=0;const Y=this.players.length;0==Y?ct(()=>this._onFinish()):this.players.forEach($t=>{$t.onDone(()=>{++at==Y&&this._onFinish()}),$t.onDestroy(()=>{++Lt==Y&&this._onDestroy()}),$t.onStart(()=>{++gt==Y&&this._onStart()})}),this.totalTime=this.players.reduce(($t,on)=>Math.max($t,on.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Pe=>Pe()),this._onDoneFns=[])}init(){this.players.forEach(Pe=>Pe.init())}onStart(Pe){this._onStartFns.push(Pe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Pe=>Pe()),this._onStartFns=[])}onDone(Pe){this._onDoneFns.push(Pe)}onDestroy(Pe){this._onDestroyFns.push(Pe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Pe=>Pe.play())}pause(){this.players.forEach(Pe=>Pe.pause())}restart(){this.players.forEach(Pe=>Pe.restart())}finish(){this._onFinish(),this.players.forEach(Pe=>Pe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Pe=>Pe.destroy()),this._onDestroyFns.forEach(Pe=>Pe()),this._onDestroyFns=[])}reset(){this.players.forEach(Pe=>Pe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Pe){const at=Pe*this.totalTime;this.players.forEach(Lt=>{const gt=Lt.totalTime?Math.min(1,at/Lt.totalTime):1;Lt.setPosition(gt)})}getPosition(){const Pe=this.players.reduce((at,Lt)=>null===at||Lt.totalTime>at.totalTime?Lt:at,null);return null!=Pe?Pe.getPosition():0}beforeDestroy(){this.players.forEach(Pe=>{Pe.beforeDestroy&&Pe.beforeDestroy()})}triggerCallback(Pe){const at="start"==Pe?this._onStartFns:this._onDoneFns;at.forEach(Lt=>Lt()),at.length=0}}const It="!"},6895:(fn,lt,K)=>{K.d(lt,{Do:()=>At,EM:()=>xn,HT:()=>Le,JF:()=>Rs,K0:()=>je,Mx:()=>Ks,NF:()=>Te,O5:()=>He,Ov:()=>As,PM:()=>Fe,S$:()=>qt,V_:()=>Qe,Ye:()=>It,b0:()=>_t,bD:()=>Eo,ez:()=>ta,mk:()=>mr,q:()=>z,sg:()=>qs,w_:()=>Se});var _=K(4650);let ie=null;function z(){return ie}function Le(k){ie||(ie=k)}class Se{}const je=new _.OlP("DocumentToken");let Ge=(()=>{class k{historyGo($){throw new Error("Not implemented")}}return k.\u0275fac=function($){return new($||k)},k.\u0275prov=_.Yz7({token:k,factory:function(){return function Ie(){return(0,_.LFG)(he)}()},providedIn:"platform"}),k})();const Qe=new _.OlP("Location Initialized");let he=(()=>{class k extends Ge{constructor($){super(),this._doc=$,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState($){const ae=z().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",$,!1),()=>ae.removeEventListener("popstate",$)}onHashChange($){const ae=z().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",$,!1),()=>ae.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,ae,Me){we()?this._history.pushState($,ae,Me):this._location.hash=Me}replaceState($,ae,Me){we()?this._history.replaceState($,ae,Me):this._location.hash=Me}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return k.\u0275fac=function($){return new($||k)(_.LFG(je))},k.\u0275prov=_.Yz7({token:k,factory:function(){return function Oe(){return new he((0,_.LFG)(je))}()},providedIn:"platform"}),k})();function we(){return!!window.history.pushState}function dt(k,Z){if(0==k.length)return Z;if(0==Z.length)return k;let $=0;return k.endsWith("/")&&$++,Z.startsWith("/")&&$++,2==$?k+Z.substring(1):1==$?k+Z:k+"/"+Z}function ht(k){const Z=k.match(/#|\?|$/),$=Z&&Z.index||k.length;return k.slice(0,$-("/"===k[$-1]?1:0))+k.slice($)}function Mt(k){return k&&"?"!==k[0]?"?"+k:k}let qt=(()=>{class k{historyGo($){throw new Error("Not implemented")}}return k.\u0275fac=function($){return new($||k)},k.\u0275prov=_.Yz7({token:k,factory:function(){return(0,_.f3M)(_t)},providedIn:"root"}),k})();const ct=new _.OlP("appBaseHref");let _t=(()=>{class k extends qt{constructor($,ae){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=ae??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return dt(this._baseHref,$)}path($=!1){const ae=this._platformLocation.pathname+Mt(this._platformLocation.search),Me=this._platformLocation.hash;return Me&&$?`${ae}${Me}`:ae}pushState($,ae,Me,wt){const Ft=this.prepareExternalUrl(Me+Mt(wt));this._platformLocation.pushState($,ae,Ft)}replaceState($,ae,Me,wt){const Ft=this.prepareExternalUrl(Me+Mt(wt));this._platformLocation.replaceState($,ae,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return k.\u0275fac=function($){return new($||k)(_.LFG(Ge),_.LFG(ct,8))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),At=(()=>{class k extends qt{constructor($,ae){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ae=this._platformLocation.hash;return null==ae&&(ae="#"),ae.length>0?ae.substring(1):ae}prepareExternalUrl($){const ae=dt(this._baseHref,$);return ae.length>0?"#"+ae:ae}pushState($,ae,Me,wt){let Ft=this.prepareExternalUrl(Me+Mt(wt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.pushState($,ae,Ft)}replaceState($,ae,Me,wt){let Ft=this.prepareExternalUrl(Me+Mt(wt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.replaceState($,ae,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return k.\u0275fac=function($){return new($||k)(_.LFG(Ge),_.LFG(ct,8))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})(),It=(()=>{class k{constructor($){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ae=this._locationStrategy.getBaseHref();this._basePath=function Lt(k){if(new RegExp("^(https?:)?//").test(k)){const[,$]=k.split(/\/\/[^\/]+/);return $}return k}(ht(at(ae))),this._locationStrategy.onPopState(Me=>{this._subject.emit({url:this.path(!0),pop:!0,state:Me.state,type:Me.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ae=""){return this.path()==this.normalize($+Mt(ae))}normalize($){return k.stripTrailingSlash(function Pe(k,Z){if(!k||!Z.startsWith(k))return Z;const $=Z.substring(k.length);return""===$||["/",";","?","#"].includes($[0])?$:Z}(this._basePath,at($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ae="",Me=null){this._locationStrategy.pushState(Me,"",$,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Mt(ae)),Me)}replaceState($,ae="",Me=null){this._locationStrategy.replaceState(Me,"",$,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Mt(ae)),Me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)})),()=>{const ae=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(ae,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ae){this._urlChangeListeners.forEach(Me=>Me($,ae))}subscribe($,ae,Me){return this._subject.subscribe({next:$,error:ae,complete:Me})}}return k.normalizeQueryParams=Mt,k.joinWithSlash=dt,k.stripTrailingSlash=ht,k.\u0275fac=function($){return new($||k)(_.LFG(qt))},k.\u0275prov=_.Yz7({token:k,factory:function(){return function Ze(){return new It((0,_.LFG)(qt))}()},providedIn:"root"}),k})();function at(k){return k.replace(/\/index.html$/,"")}function Ks(k,Z){Z=encodeURIComponent(Z);for(const $ of k.split(";")){const ae=$.indexOf("="),[Me,wt]=-1==ae?[$,""]:[$.slice(0,ae),$.slice(ae+1)];if(Me.trim()===Z)return decodeURIComponent(wt)}return null}const Wi=/\s+/,en=[];let mr=(()=>{class k{constructor($,ae,Me,wt){this._iterableDiffers=$,this._keyValueDiffers=ae,this._ngEl=Me,this._renderer=wt,this.initialClasses=en,this.stateMap=new Map}set klass($){this.initialClasses=null!=$?$.trim().split(Wi):en}set ngClass($){this.rawClass="string"==typeof $?$.trim().split(Wi):$}ngDoCheck(){for(const ae of this.initialClasses)this._updateState(ae,!0);const $=this.rawClass;if(Array.isArray($)||$ instanceof Set)for(const ae of $)this._updateState(ae,!0);else if(null!=$)for(const ae of Object.keys($))this._updateState(ae,Boolean($[ae]));this._applyStateDiff()}_updateState($,ae){const Me=this.stateMap.get($);void 0!==Me?(Me.enabled!==ae&&(Me.changed=!0,Me.enabled=ae),Me.touched=!0):this.stateMap.set($,{enabled:ae,changed:!0,touched:!0})}_applyStateDiff(){for(const $ of this.stateMap){const ae=$[0],Me=$[1];Me.changed?(this._toggleClass(ae,Me.enabled),Me.changed=!1):Me.touched||(Me.enabled&&this._toggleClass(ae,!1),this.stateMap.delete(ae)),Me.touched=!1}}_toggleClass($,ae){($=$.trim()).length>0&&$.split(Wi).forEach(Me=>{ae?this._renderer.addClass(this._ngEl.nativeElement,Me):this._renderer.removeClass(this._ngEl.nativeElement,Me)})}}return k.\u0275fac=function($){return new($||k)(_.Y36(_.ZZ4),_.Y36(_.aQg),_.Y36(_.SBq),_.Y36(_.Qsj))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class Qi{constructor(Z,$,ae,Me){this.$implicit=Z,this.ngForOf=$,this.index=ae,this.count=Me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qs=(()=>{class k{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,ae,Me){this._viewContainer=$,this._template=ae,this._differs=Me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ae=this._viewContainer;$.forEachOperation((Me,wt,Ft)=>{if(null==Me.previousIndex)ae.createEmbeddedView(this._template,new Qi(Me.item,this._ngForOf,-1,-1),null===Ft?void 0:Ft);else if(null==Ft)ae.remove(null===wt?void 0:wt);else if(null!==wt){const sn=ae.get(wt);ae.move(sn,Ft),ei(sn,Me)}});for(let Me=0,wt=ae.length;Me<wt;Me++){const sn=ae.get(Me).context;sn.index=Me,sn.count=wt,sn.ngForOf=this._ngForOf}$.forEachIdentityChange(Me=>{ei(ae.get(Me.currentIndex),Me)})}static ngTemplateContextGuard($,ae){return!0}}return k.\u0275fac=function($){return new($||k)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function ei(k,Z){k.context.$implicit=Z.item}let He=(()=>{class k{constructor($,ae){this._viewContainer=$,this._context=new $e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){St("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){St("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ae){return!0}}return k.\u0275fac=function($){return new($||k)(_.Y36(_.s_b),_.Y36(_.Rgc))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class $e{constructor(){this.$implicit=null,this.ngIf=null}}function St(k,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,_.AaK)(Z)}'.`)}class Zo{createSubscription(Z,$){return Z.subscribe({next:$,error:ae=>{throw ae}})}dispose(Z){Z.unsubscribe()}}class Or{createSubscription(Z,$){return Z.then($,ae=>{throw ae})}dispose(Z){}}const Br=new Or,vr=new Zo;let As=(()=>{class k{constructor($){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=$}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform($){return this._obj?$!==this._obj?(this._dispose(),this.transform($)):this._latestValue:($&&this._subscribe($),this._latestValue)}_subscribe($){this._obj=$,this._strategy=this._selectStrategy($),this._subscription=this._strategy.createSubscription($,ae=>this._updateLatestValue($,ae))}_selectStrategy($){if((0,_.QGY)($))return Br;if((0,_.F4k)($))return vr;throw function Hs(k,Z){return new _.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue($,ae){$===this._obj&&(this._latestValue=ae,this._ref.markForCheck())}}return k.\u0275fac=function($){return new($||k)(_.Y36(_.sBO,16))},k.\u0275pipe=_.Yjl({name:"async",type:k,pure:!1,standalone:!0}),k})(),ta=(()=>{class k{}return k.\u0275fac=function($){return new($||k)},k.\u0275mod=_.oAB({type:k}),k.\u0275inj=_.cJS({}),k})();const Eo="browser",zs="server";function Te(k){return k===Eo}function Fe(k){return k===zs}let xn=(()=>{class k{}return k.\u0275prov=(0,_.Yz7)({token:k,providedIn:"root",factory:()=>new dn((0,_.LFG)(je),window)}),k})();class dn{constructor(Z,$){this.document=Z,this.window=$,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const $=function Pr(k,Z){const $=k.getElementById(Z)||k.getElementsByName(Z)[0];if($)return $;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const ae=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let Me=ae.currentNode;for(;Me;){const wt=Me.shadowRoot;if(wt){const Ft=wt.getElementById(Z)||wt.querySelector(`[name="${Z}"]`);if(Ft)return Ft}Me=ae.nextNode()}}return null}(this.document,Z);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=Z)}}scrollToElement(Z){const $=Z.getBoundingClientRect(),ae=$.left+this.window.pageXOffset,Me=$.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(ae-wt[0],Me-wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=or(this.window.history)||or(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function or(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Rs{}},4650:(fn,lt,K)=>{K.d(lt,{$8M:()=>ya,$WT:()=>Ui,$Z:()=>Zf,AFp:()=>e0,ALo:()=>IE,AaK:()=>Ie,Akn:()=>kc,BQk:()=>yp,CHM:()=>B,CRH:()=>xE,CZH:()=>xy,CqO:()=>Hh,D6c:()=>SI,DdM:()=>pE,EJc:()=>Hw,EpF:()=>vp,F4k:()=>Bm,FYo:()=>Ra,FiY:()=>Fa,Gf:()=>ME,GfV:()=>bh,Gpc:()=>we,JOm:()=>Ca,KtG:()=>le,LFG:()=>an,LSH:()=>Ei,Lbi:()=>Uw,Lck:()=>F0,MMx:()=>gv,NdJ:()=>Rg,O4$:()=>ga,OlP:()=>ci,Oqu:()=>lh,P3R:()=>uo,PXZ:()=>iI,Q6J:()=>Sg,QGY:()=>vf,QbO:()=>Bw,Qsj:()=>Ec,R0b:()=>ed,RDi:()=>yo,Rgc:()=>nm,SBq:()=>ur,Sil:()=>Ww,Suo:()=>PE,TTD:()=>Kt,TgZ:()=>jh,VKq:()=>gE,WLB:()=>mE,X6Q:()=>uI,XFs:()=>Xt,Xpm:()=>Tn,Xts:()=>qn,Y36:()=>Dh,YKP:()=>sE,YNc:()=>mp,Yjl:()=>hr,Yz7:()=>Rt,Z0I:()=>gr,ZZ4:()=>jv,_Bn:()=>iE,_UZ:()=>Ag,_Vd:()=>kt,_c5:()=>DI,_uU:()=>Hg,aQg:()=>$v,c2e:()=>jw,cJS:()=>Cn,cg1:()=>hy,dDg:()=>eI,dqk:()=>Yn,eFA:()=>p0,eJc:()=>Dv,ekj:()=>Bg,eoX:()=>c0,f3M:()=>Di,g9A:()=>n0,h0i:()=>Up,hGG:()=>TI,hij:()=>Sp,iGM:()=>RE,ifc:()=>ye,ip1:()=>JE,jDz:()=>aE,kL8:()=>py,kcU:()=>lu,lG2:()=>zn,lcZ:()=>bE,lqb:()=>Wl,lri:()=>l0,n5z:()=>hu,oAB:()=>ot,oxw:()=>$m,q4F:()=>Bf,qLn:()=>Rd,qOj:()=>Eg,qZA:()=>_f,rWj:()=>u0,sBO:()=>cI,s_b:()=>Ry,soG:()=>Ny,tb:()=>h0,tp0:()=>gl,uIk:()=>Cg,vHH:()=>ct,vpe:()=>Wd,wAp:()=>ni,xp6:()=>dm,ynx:()=>$h,z2F:()=>Oy,zSh:()=>Dd,zs3:()=>eh});var _=K(7579),ie=K(727),z=K(9751),Le=K(6451),Se=K(3099);function je(n){for(let i in n)if(n[i]===je)return i;throw Error("Could not find renamed property on target object.")}function Ge(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Ie(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ie).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Qe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const he=je({__forward_ref__:je});function we(n){return n.__forward_ref__=we,n.toString=function(){return Ie(this())},n}function Oe(n){return dt(n)?n():n}function dt(n){return"function"==typeof n&&n.hasOwnProperty(he)&&n.__forward_ref__===we}function ht(n){return n&&!!n.\u0275providers}const qt="https://g.co/ng/security#xss";class ct extends Error{constructor(i,o){super(_t(i,o)),this.code=i}}function _t(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function At(n){return"string"==typeof n?n:null==n?"":String(n)}function Lt(n,i){throw new ct(-201,!1)}function ut(n,i){null==n&&function ze(n,i,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Rt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cn(n){return{providers:n.providers||[],imports:n.imports||[]}}function On(n){return Qn(n,Hr)||Qn(n,Gr)}function gr(n){return null!==On(n)}function Qn(n,i){return n.hasOwnProperty(i)?n[i]:null}function Cr(n){return n&&(n.hasOwnProperty(Er)||n.hasOwnProperty(Pn))?n[Er]:null}const Hr=je({\u0275prov:je}),Er=je({\u0275inj:je}),Gr=je({ngInjectableDef:je}),Pn=je({ngInjectorDef:je});var Xt=(()=>((Xt=Xt||{})[Xt.Default=0]="Default",Xt[Xt.Host=1]="Host",Xt[Xt.Self=2]="Self",Xt[Xt.SkipSelf=4]="SkipSelf",Xt[Xt.Optional=8]="Optional",Xt))();let Hn;function Dr(n){const i=Hn;return Hn=n,i}function jn(n,i,o){const l=On(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Xt.Optional?null:void 0!==i?i:void Lt(Ie(n))}const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yr={},ii="__NG_DI_FLAG__",wn="ngTempTokenPath",Qr="ngTokenPath",si=/\n/gm,Xr="\u0275",cr="__source";let Kr;function $n(n){const i=Kr;return Kr=n,i}function Nr(n,i=Xt.Default){if(void 0===Kr)throw new ct(-203,!1);return null===Kr?jn(n,void 0,i):Kr.get(n,i&Xt.Optional?null:void 0,i)}function an(n,i=Xt.Default){return(function yi(){return Hn}()||Nr)(Oe(n),i)}function Di(n,i=Xt.Default){return an(n,Mi(i))}function Mi(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Yi(n){const i=[];for(let o=0;o<n.length;o++){const l=Oe(n[o]);if(Array.isArray(l)){if(0===l.length)throw new ct(900,!1);let f,v=Xt.Default;for(let C=0;C<l.length;C++){const N=l[C],j=Pi(N);"number"==typeof j?-1===j?f=N.token:v|=j:f=N}i.push(an(f,v))}else i.push(an(l))}return i}function ss(n,i){return n[ii]=i,n.prototype[ii]=i,n}function Pi(n){return n[ii]}function Re(n){return{toString:n}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),ye=(()=>{return(n=ye||(ye={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ye;var n})();const oe={},Be=[],be=je({\u0275cmp:je}),De=je({\u0275dir:je}),ve=je({\u0275pipe:je}),We=je({\u0275mod:je}),it=je({\u0275fac:je}),Pt=je({__NG_ELEMENT_ID__:je});let Dn=0;function Tn(n){return Re(()=>{const i=ea(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ye.Emulated,id:"c"+Dn++,styles:n.styles||Be,_:null,schemas:n.schemas||null,tView:null};Lr(o);const l=n.dependencies;return o.directiveDefs=Ks(l,!1),o.pipeDefs=Ks(l,!0),o})}function os(n){return In(n)||Ur(n)}function Et(n){return null!==n}function ot(n){return Re(()=>({type:n.type,bootstrap:n.bootstrap||Be,declarations:n.declarations||Be,imports:n.imports||Be,exports:n.exports||Be,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yn(n,i){if(null==n)return oe;const o={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),o[f]=l,i&&(i[f]=v)}return o}function zn(n){return Re(()=>{const i=ea(n);return Lr(i),i})}function hr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function In(n){return n[be]||null}function Ur(n){return n[De]||null}function kr(n){return n[ve]||null}function Ui(n){const i=In(n)||Ur(n)||kr(n);return null!==i&&i.standalone}function ns(n,i){const o=n[We]||null;if(!o&&!0===i)throw new Error(`Type ${Ie(n)} does not have '\u0275mod' property.`);return o}function ea(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Be,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yn(n.inputs,i),outputs:yn(n.outputs)}}function Lr(n){n.features?.forEach(i=>i(n))}function Ks(n,i){if(!n)return null;const o=i?kr:os;return()=>("function"==typeof n?n():n).map(l=>o(l)).filter(Et)}const Wi=0,en=1,mr=2,oi=3,ai=4,as=5,Qi=6,qs=7,ei=8,Je=9,He=10,$e=11,St=12,Ht=13,Kn=14,Sr=15,tr=16,ti=17,Is=18,Es=19,Ss=20,ws=21,Ti=22,Zo=1,Or=2,Br=7,vr=8,As=9,Mr=10;function bs(n){return Array.isArray(n)&&"object"==typeof n[Zo]}function _i(n){return Array.isArray(n)&&!0===n[Zo]}function ys(n){return 0!=(4&n.flags)}function Tr(n){return n.componentOffset>-1}function lr(n){return 1==(1&n.flags)}function vi(n){return!!n.template}function Ii(n){return 0!=(256&n[mr])}function qe(n,i){return n.hasOwnProperty(it)?n[it]:null}class Tt{constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function Kt(){return xn}function xn(n){return n.type.prototype.ngOnChanges&&(n.setInput=or),dn}function dn(){const n=Gi(this),i=n?.current;if(i){const o=n.previous;if(o===oe)n.previous=i;else for(let l in i)o[l]=i[l];n.current=null,this.ngOnChanges(i)}}function or(n,i,o,l){const f=this.declaredInputs[o],v=Gi(n)||function Rs(n,i){return n[Pr]=i}(n,{previous:oe,current:null}),C=v.current||(v.current={}),N=v.previous,j=N[f];C[f]=new Tt(j&&j.currentValue,i,N===oe),n[l]=i}Kt.ngInherit=!0;const Pr="__ngSimpleChanges__";function Gi(n){return n[Pr]||null}const Vr=function(n,i,o){},gi="svg";function hi(n){for(;Array.isArray(n);)n=n[Wi];return n}function li(n,i){return hi(i[n])}function xr(n,i){return hi(i[n.index])}function Ls(n,i){return n.data[i]}function rs(n,i){const o=i[n];return bs(o)?o:o[Wi]}function Io(n){return 64==(64&n[mr])}function Cs(n,i){return null==i?null:n[i]}function fr(n){n[Is]=0}function so(n,i){n[as]+=i;let o=n,l=n[oi];for(;null!==l&&(1===i&&1===o[as]||-1===i&&0===o[as]);)l[as]+=i,o=l,l=l[oi]}const pr={lFrame:Fo(null),bindingsEnabled:!0};function Rl(){return pr.bindingsEnabled}function L(){return pr.lFrame.lView}function H(){return pr.lFrame.tView}function B(n){return pr.lFrame.contextLView=n,n[ei]}function le(n){return pr.lFrame.contextLView=null,n}function st(){let n=Nn();for(;null!==n&&64===n.type;)n=n.parent;return n}function Nn(){return pr.lFrame.currentTNode}function ls(n,i){const o=pr.lFrame;o.currentTNode=n,o.isParent=i}function Qo(){return pr.lFrame.isParent}function No(){pr.lFrame.isParent=!1}function Fs(){const n=pr.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function So(){return pr.lFrame.bindingIndex++}function ko(n){const i=pr.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function ou(n,i){const o=pr.lFrame;o.bindingIndex=o.bindingRootIndex=n,Vs(i)}function Vs(n){pr.lFrame.currentDirectiveIndex=n}function fa(){return pr.lFrame.currentQueryIndex}function Ki(n){pr.lFrame.currentQueryIndex=n}function au(n){const i=n[en];return 2===i.type?i.declTNode:1===i.type?n[Qi]:null}function xl(n,i,o){if(o&Xt.SkipSelf){let f=i,v=n;for(;!(f=f.parent,null!==f||o&Xt.Host||(f=au(v),null===f||(v=v[Sr],10&f.type))););if(null===f)return!1;i=f,n=v}const l=pr.lFrame=Nl();return l.currentTNode=i,l.lView=n,!0}function is(n){const i=Nl(),o=n[en];pr.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Nl(){const n=pr.lFrame,i=null===n?null:n.child;return null===i?Fo(n):i}function Fo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function pa(){const n=pr.lFrame;return pr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const za=pa;function Ol(){const n=pa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fi(){return pr.lFrame.selectedIndex}function Vo(n){pr.lFrame.selectedIndex=n}function fs(){const n=pr.lFrame;return Ls(n.tView,n.selectedIndex)}function ga(){pr.lFrame.currentNamespace=gi}function lu(){!function al(){pr.lFrame.currentNamespace=null}()}function ka(n,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const v=n.data[o].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:N,ngAfterViewInit:j,ngAfterViewChecked:ee,ngOnDestroy:de}=v;C&&(n.contentHooks??(n.contentHooks=[])).push(-o,C),N&&((n.contentHooks??(n.contentHooks=[])).push(o,N),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,N)),j&&(n.viewHooks??(n.viewHooks=[])).push(-o,j),ee&&((n.viewHooks??(n.viewHooks=[])).push(o,ee),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,ee)),null!=de&&(n.destroyHooks??(n.destroyHooks=[])).push(o,de)}}function Ga(n,i,o){Z(n,i,3,o)}function uu(n,i,o,l){(3&n[mr])===o&&Z(n,i,o,l)}function k(n,i){let o=n[mr];(3&o)===i&&(o&=2047,o+=1,n[mr]=o)}function Z(n,i,o,l){const v=l??-1,C=i.length-1;let N=0;for(let j=void 0!==l?65535&n[Is]:0;j<C;j++)if("number"==typeof i[j+1]){if(N=i[j],null!=l&&N>=l)break}else i[j]<0&&(n[Is]+=65536),(N<v||-1==v)&&($(n,o,i,j),n[Is]=(4294901760&n[Is])+j+2),j++}function $(n,i,o,l){const f=o[l]<0,v=o[l+1],N=n[f?-o[l]:o[l]];if(f){if(n[mr]>>11<n[Is]>>16&&(3&n[mr])===i){n[mr]+=2048,Vr(4,N,v);try{v.call(N)}finally{Vr(5,N,v)}}}else{Vr(4,N,v);try{v.call(N)}finally{Vr(5,N,v)}}}const ae=-1;class Me{constructor(i,o,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function ir(n,i,o){let l=0;for(;l<o.length;){const f=o[l];if("number"==typeof f){if(0!==f)break;l++;const v=o[l++],C=o[l++],N=o[l++];n.setAttribute(i,C,N,v)}else{const v=f,C=o[++l];Uo(v)?n.setProperty(i,v,C):n.setAttribute(i,v,C),l++}}return l}function $i(n){return 3===n||4===n||6===n}function Uo(n){return 64===n.charCodeAt(0)}function pn(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const f=i[l];"number"==typeof f?o=f:0===o||Ln(n,o,f,null,-1===o||2===o?i[++l]:null)}}return n}function Ln(n,i,o,l,f){let v=0,C=n.length;if(-1===i)C=-1;else for(;v<n.length;){const N=n[v++];if("number"==typeof N){if(N===i){C=-1;break}if(N>i){C=v-1;break}}}for(;v<n.length;){const N=n[v];if("number"==typeof N)break;if(N===o){if(null===l)return void(null!==f&&(n[v+1]=f));if(l===n[v+1])return void(n[v+2]=f)}v++,null!==l&&v++,null!==f&&v++}-1!==C&&(n.splice(C,0,i),v=C+1),n.splice(v++,0,o),null!==l&&n.splice(v++,0,l),null!==f&&n.splice(v++,0,f)}function Ws(n){return n!==ae}function rn(n){return 32767&n}function Bt(n,i){let o=function pt(n){return n>>16}(n),l=i;for(;o>0;)l=l[Sr],o--;return l}let Us=!0;function bu(n){const i=Us;return Us=n,i}const Gu=255,cu=5;let cc=0;const ma={};function Cu(n,i){const o=Pu(n,i);if(-1!==o)return o;const l=i[en];l.firstCreatePass&&(n.injectorIndex=i.length,ll(l.data,n),ll(i,null),ll(l.blueprint,null));const f=Bs(n,i),v=n.injectorIndex;if(Ws(f)){const C=rn(f),N=Bt(f,i),j=N[en].data;for(let ee=0;ee<8;ee++)i[v+ee]=N[C+ee]|j[C+ee]}return i[v+8]=f,v}function ll(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Pu(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Bs(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,f=i;for(;null!==f;){if(l=ia(f),null===l)return ae;if(o++,f=f[Sr],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return ae}function Wn(n,i,o){!function du(n,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(Pt)&&(l=o[Pt]),null==l&&(l=o[Pt]=cc++);const f=l&Gu;i.data[n+(f>>cu)]|=1<<f}(n,i,o)}function Zl(n,i,o){if(o&Xt.Optional||void 0!==n)return n;Lt()}function ps(n,i,o,l){if(o&Xt.Optional&&void 0===l&&(l=null),!(o&(Xt.Self|Xt.Host))){const f=n[Je],v=Dr(void 0);try{return f?f.get(i,l,o&Xt.Optional):jn(i,l,o&Xt.Optional)}finally{Dr(v)}}return Zl(l,0,o)}function ar(n,i,o,l=Xt.Default,f){if(null!==n){if(1024&i[mr]){const C=function ra(n,i,o,l,f){let v=n,C=i;for(;null!==v&&null!==C&&1024&C[mr]&&!(256&C[mr]);){const N=Ka(v,C,o,l|Xt.Self,ma);if(N!==ma)return N;let j=v.parent;if(!j){const ee=C[ws];if(ee){const de=ee.get(o,ma,l);if(de!==ma)return de}j=ia(C),C=C[Sr]}v=j}return f}(n,i,o,l,ma);if(C!==ma)return C}const v=Ka(n,i,o,l,ma);if(v!==ma)return v}return ps(i,o,l,f)}function Ka(n,i,o,l,f){const v=function _n(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Pt)?n[Pt]:void 0;return"number"==typeof i?i>=0?i&Gu:cl:i}(o);if("function"==typeof v){if(!xl(i,n,l))return l&Xt.Host?Zl(f,0,l):ps(i,o,l,f);try{const C=v(l);if(null!=C||l&Xt.Optional)return C;Lt()}finally{za()}}else if("number"==typeof v){let C=null,N=Pu(n,i),j=ae,ee=l&Xt.Host?i[tr][Qi]:null;for((-1===N||l&Xt.SkipSelf)&&(j=-1===N?Bs(n,i):i[N+8],j!==ae&&Ys(l,!1)?(C=i[en],N=rn(j),i=Bt(j,i)):N=-1);-1!==N;){const de=i[en];if(La(v,N,de.data)){const Ae=wr(N,i,o,C,l,ee);if(Ae!==ma)return Ae}j=i[N+8],j!==ae&&Ys(l,i[en].data[N+8]===ee)&&La(v,N,i)?(C=de,N=rn(j),i=Bt(j,i)):N=-1}}return f}function wr(n,i,o,l,f,v){const C=i[en],N=C.data[n+8],de=Ku(N,C,o,null==l?Tr(N)&&Us:l!=C&&0!=(3&N.type),f&Xt.Host&&v===N);return null!==de?zr(i,C,de,N):ma}function Ku(n,i,o,l,f){const v=n.providerIndexes,C=i.data,N=1048575&v,j=n.directiveStart,de=v>>20,nt=f?N+de:n.directiveEnd;for(let vt=l?N:N+de;vt<nt;vt++){const jt=C[vt];if(vt<j&&o===jt||vt>=j&&jt.type===o)return vt}if(f){const vt=C[j];if(vt&&vi(vt)&&vt.type===o)return j}return null}function zr(n,i,o,l){let f=n[o];const v=i.data;if(function wt(n){return n instanceof Me}(f)){const C=f;C.resolving&&function Ze(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ct(-200,`Circular dependency in DI detected for ${n}${o}`)}(function It(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():At(n)}(v[o]));const N=bu(C.canSeeViewProviders);C.resolving=!0;const j=C.injectImpl?Dr(C.injectImpl):null;xl(n,l,Xt.Default);try{f=n[o]=C.factory(void 0,v,n,l),i.firstCreatePass&&o>=l.directiveStart&&function uc(n,i,o){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:v}=i.type.prototype;if(l){const C=xn(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,C),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,C)}f&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,f),v&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,v))}(o,v[o],i)}finally{null!==j&&Dr(j),bu(N),C.resolving=!1,za()}}return f}function La(n,i,o){return!!(o[i+(n>>cu)]&1<<n)}function Ys(n,i){return!(n&Xt.Self||n&Xt.Host&&i)}class Bo{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return ar(this._tNode,this._lView,i,Mi(l),o)}}function cl(){return new Bo(st(),L())}function hu(n){return Re(()=>{const i=n.prototype.constructor,o=i[it]||kl(i),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const v=f[it]||kl(f);if(v&&v!==o)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function kl(n){return dt(n)?()=>{const i=kl(Oe(n));return i&&i()}:qe(n)}function ia(n){const i=n[en],o=i.type;return 2===o?i.declTNode:1===o?n[Qi]:null}function ya(n){return function ul(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const l=o.length;let f=0;for(;f<l;){const v=o[f];if($i(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<l&&"string"==typeof o[f];)f++;else{if(v===i)return o[f+1];f+=2}}}return null}(st(),n)}const dl="__parameters__";function qa(n,i,o){return Re(()=>{const l=function Ms(n){return function(...o){if(n){const l=n(...o);for(const f in l)this[f]=l[f]}}}(i);function f(...v){if(this instanceof f)return l.apply(this,v),this;const C=new f(...v);return N.annotation=C,N;function N(j,ee,de){const Ae=j.hasOwnProperty(dl)?j[dl]:Object.defineProperty(j,dl,{value:[]})[dl];for(;Ae.length<=de;)Ae.push(null);return(Ae[de]=Ae[de]||[]).push(C),j}}return o&&(f.prototype=Object.create(o.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class ci{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Rt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _a(n,i){n.forEach(o=>Array.isArray(o)?_a(o,i):i(o))}function js(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function va(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function se(n,i,o){let l=et(n,i);return l>=0?n[1|l]=o:(l=~l,function O(n,i,o,l){let f=n.length;if(f==i)n.push(o,l);else if(1===f)n.push(l,n[0]),n[0]=o;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=o,n[i+1]=l}}(n,l,i,o)),l}function ge(n,i){const o=et(n,i);if(o>=0)return n[1|o]}function et(n,i){return function Rn(n,i,o){let l=0,f=n.length>>o;for(;f!==l;){const v=l+(f-l>>1),C=n[v<<o];if(i===C)return v<<o;C>i?f=v:l=v+1}return~(f<<o)}(n,i,1)}const Fa=ss(qa("Optional"),8),gl=ss(qa("SkipSelf"),4);var Ca=(()=>((Ca=Ca||{})[Ca.Important=1]="Important",Ca[Ca.DashCase=2]="DashCase",Ca))();const ms=new Map;let Tc=0;const ke="__ngContext__";function Xe(n,i){bs(i)?(n[ke]=i[Ss],function jl(n){ms.set(n[Ss],n)}(i)):n[ke]=i}let aa;function Ta(n,i){return aa(n,i)}function jc(n){const i=n[oi];return _i(i)?i[oi]:i}function wl(n){return Il(n[Ht])}function zo(n){return Il(n[ai])}function Il(n){for(;null!==n&&!_i(n);)n=n[ai];return n}function Mo(n,i,o,l,f){if(null!=l){let v,C=!1;_i(l)?v=l:bs(l)&&(C=!0,l=l[Wi]);const N=hi(l);0===n&&null!==o?null==f?Sa(i,o,N):Zr(i,o,N,f||null,!0):1===n&&null!==o?Zr(i,o,N,f||null,!0):2===n?function Hc(n,i,o){const l=tu(n,i);l&&function ec(n,i,o,l){n.removeChild(i,o,l)}(n,l,i,o)}(i,N,C):3===n&&i.destroyNode(N),null!=v&&function rd(n,i,o,l,f){const v=o[Br];v!==hi(o)&&Mo(i,n,l,v,f);for(let N=Mr;N<o.length;N++){const j=o[N];zc(j[en],j,n,i,l,v)}}(i,n,v,o,f)}}function yc(n,i,o){return n.createElement(i,o)}function P(n,i){const o=n[As],l=o.indexOf(i),f=i[oi];512&i[mr]&&(i[mr]&=-513,so(f,-1)),o.splice(l,1)}function ne(n,i){if(n.length<=Mr)return;const o=Mr+i,l=n[o];if(l){const f=l[ti];null!==f&&f!==n&&P(f,l),i>0&&(n[o-1][ai]=l[ai]);const v=va(n,Mr+i);!function Hl(n,i){zc(n,i,i[$e],2,null,null),i[Wi]=null,i[Qi]=null}(l[en],l);const C=v[Es];null!==C&&C.detachView(v[en]),l[oi]=null,l[ai]=null,l[mr]&=-65}return l}function fe(n,i){if(!(128&i[mr])){const o=i[$e];o.destroyNode&&zc(n,i,o,3,null,null),function A(n){let i=n[Ht];if(!i)return tt(n[en],n);for(;i;){let o=null;if(bs(i))o=i[Ht];else{const l=i[Mr];l&&(o=l)}if(!o){for(;i&&!i[ai]&&i!==n;)bs(i)&&tt(i[en],i),i=i[oi];null===i&&(i=n),bs(i)&&tt(i[en],i),o=i&&i[ai]}i=o}}(i)}}function tt(n,i){if(!(128&i[mr])){i[mr]&=-65,i[mr]|=128,function ln(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const f=i[o[l]];if(!(f instanceof Me)){const v=o[l+1];if(Array.isArray(v))for(let C=0;C<v.length;C+=2){const N=f[v[C]],j=v[C+1];Vr(4,N,j);try{j.call(N)}finally{Vr(5,N,j)}}else{Vr(4,f,v);try{v.call(f)}finally{Vr(5,f,v)}}}}}(n,i),function Ct(n,i){const o=n.cleanup,l=i[qs];let f=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const C=o[v+3];C>=0?l[f=C]():l[f=-C].unsubscribe(),v+=2}else{const C=l[f=o[v+1]];o[v].call(C)}if(null!==l){for(let v=f+1;v<l.length;v++)(0,l[v])();i[qs]=null}}(n,i),1===i[en].type&&i[$e].destroy();const o=i[ti];if(null!==o&&_i(i[oi])){o!==i[oi]&&P(o,i);const l=i[Es];null!==l&&l.detachView(n)}!function oa(n){ms.delete(n[Ss])}(i)}}function Mn(n,i,o){return function dr(n,i,o){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return o[Wi];{const{componentOffset:f}=l;if(f>-1){const{encapsulation:v}=n.data[l.directiveStart+f];if(v===ye.None||v===ye.Emulated)return null}return xr(l,o)}}(n,i.parent,o)}function Zr(n,i,o,l,f){n.insertBefore(i,o,l,f)}function Sa(n,i,o){n.appendChild(i,o)}function Wo(n,i,o,l,f){null!==l?Zr(n,i,o,l,f):Sa(n,i,o)}function tu(n,i){return n.parentNode(i)}let Au,Gd,Rc,_u=function Xs(n,i,o){return 40&n.type?xr(n,o):null};function rl(n,i,o,l){const f=Mn(n,l,i),v=i[$e],N=function Lu(n,i,o){return _u(n,i,o)}(l.parent||i[Qi],l,i);if(null!=f)if(Array.isArray(o))for(let j=0;j<o.length;j++)Wo(v,f,o[j],N,!1);else Wo(v,f,o,N,!1);void 0!==Au&&Au(v,l,i,o,f)}function di(n,i){if(null!==i){const o=i.type;if(3&o)return xr(i,n);if(4&o)return vc(-1,n[i.index]);if(8&o){const l=i.child;if(null!==l)return di(n,l);{const f=n[i.index];return _i(f)?vc(-1,f):hi(f)}}if(32&o)return Ta(i,n)()||hi(n[i.index]);{const l=$c(n,i);return null!==l?Array.isArray(l)?l[0]:di(jc(n[tr]),l):di(n,i.next)}}return null}function $c(n,i){return null!==i?n[tr][Qi].projection[i.projection]:null}function vc(n,i){const o=Mr+n+1;if(o<i.length){const l=i[o],f=l[en].firstChild;if(null!==f)return di(l,f)}return i[Br]}function md(n,i,o,l,f,v,C){for(;null!=o;){const N=l[o.index],j=o.type;if(C&&0===i&&(N&&Xe(hi(N),l),o.flags|=2),32!=(32&o.flags))if(8&j)md(n,i,o.child,l,f,v,!1),Mo(i,n,f,N,v);else if(32&j){const ee=Ta(o,l);let de;for(;de=ee();)Mo(i,n,f,de,v);Mo(i,n,f,N,v)}else 16&j?mh(n,i,l,o,f,v):Mo(i,n,f,N,v);o=C?o.projectionNext:o.next}}function zc(n,i,o,l,f,v){md(o,l,n.firstChild,i,f,v,!1)}function mh(n,i,o,l,f,v){const C=o[tr],j=C[Qi].projection[l.projection];if(Array.isArray(j))for(let ee=0;ee<j.length;ee++)Mo(i,n,f,j[ee],v);else md(n,i,j,C[oi],f,v,!0)}function Ru(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function _d(n,i,o){const{mergedAttrs:l,classes:f,styles:v}=o;null!==l&&ir(n,i,l),null!==f&&Ru(n,i,f),null!==v&&function vu(n,i,o){n.setAttribute(i,"style",o)}(n,i,v)}function yo(n){Gd=n}function Kd(n){return function Js(){if(void 0===Rc&&(Rc=null,Yn.trustedTypes))try{Rc=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rc}()?.createScriptURL(n)||n}class Id{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qt})`}}function nu(n){return n instanceof Id?n.changingThisBreaksApplicationSecurity:n}function Mc(n,i){const o=function Zd(n){return n instanceof Id&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${qt})`)}return o===i}const Qd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var un=(()=>((un=un||{})[un.NONE=0]="NONE",un[un.HTML=1]="HTML",un[un.STYLE=2]="STYLE",un[un.SCRIPT=3]="SCRIPT",un[un.URL=4]="URL",un[un.RESOURCE_URL=5]="RESOURCE_URL",un))();function Ei(n){const i=vn();return i?i.sanitize(un.URL,n)||"":Mc(n,"URL")?nu(n):function Cd(n){return(n=String(n)).match(Qd)?n:"unsafe:"+n}(At(n))}function wi(n){const i=vn();if(i)return Kd(i.sanitize(un.RESOURCE_URL,n)||"");if(Mc(n,"ResourceURL"))return Kd(nu(n));throw new ct(904,!1)}function uo(n,i,o){return function Aa(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?wi:Ei}(i,o)(n)}function vn(){const n=L();return n&&n[St]}const qn=new ci("ENVIRONMENT_INITIALIZER"),Rr=new ci("INJECTOR",-1),Ri=new ci("INJECTOR_DEF_TYPES");class co{get(i,o=Yr){if(o===Yr){const l=new Error(`NullInjectorError: No provider for ${Ie(i)}!`);throw l.name="NullInjectorError",l}return o}}function Go(...n){return{\u0275providers:Cl(0,n),\u0275fromNgModule:!0}}function Cl(n,...i){const o=[],l=new Set;let f;return _a(i,v=>{const C=v;Ua(C,o,[],l)&&(f||(f=[]),f.push(C))}),void 0!==f&&vs(f,o),o}function vs(n,i){for(let o=0;o<n.length;o++){const{providers:f}=n[o];_o(f,v=>{i.push(v)})}}function Ua(n,i,o,l){if(!(n=Oe(n)))return!1;let f=null,v=Cr(n);const C=!v&&In(n);if(v||C){if(C&&!C.standalone)return!1;f=n}else{const j=n.ngModule;if(v=Cr(j),!v)return!1;f=j}const N=l.has(f);if(C){if(N)return!1;if(l.add(f),C.dependencies){const j="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const ee of j)Ua(ee,i,o,l)}}else{if(!v)return!1;{if(null!=v.imports&&!N){let ee;l.add(f);try{_a(v.imports,de=>{Ua(de,i,o,l)&&(ee||(ee=[]),ee.push(de))})}finally{}void 0!==ee&&vs(ee,i)}if(!N){const ee=qe(f)||(()=>new f);i.push({provide:f,useFactory:ee,deps:Be},{provide:Ri,useValue:f,multi:!0},{provide:qn,useValue:()=>an(f),multi:!0})}const j=v.providers;null==j||N||_o(j,de=>{i.push(de)})}}return f!==n&&void 0!==n.providers}function _o(n,i){for(let o of n)ht(o)&&(o=o.\u0275providers),Array.isArray(o)?_o(o,i):i(o)}const Po=je({provide:String,useValue:je});function Co(n){return null!==n&&"object"==typeof n&&Po in n}function oc(n){return"function"==typeof n}const Dd=new ci("Set Injector scope."),Td={},Sd={};let Pc;function ju(){return void 0===Pc&&(Pc=new co),Pc}class Wl{}class Gl extends Wl{get destroyed(){return this._destroyed}constructor(i,o,l,f){super(),this.parent=o,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,T(i,C=>this.processProvider(C)),this.records.set(Rr,h(void 0,this)),f.has("environment")&&this.records.set(Wl,h(void 0,this));const v=this.records.get(Dd);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Ri.multi,Be,Xt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=$n(this),l=Dr(void 0);try{return i()}finally{$n(o),Dr(l)}}get(i,o=Yr,l=Xt.Default){this.assertNotDestroyed(),l=Mi(l);const f=$n(this),v=Dr(void 0);try{if(!(l&Xt.SkipSelf)){let N=this.records.get(i);if(void 0===N){const j=function y(n){return"function"==typeof n||"object"==typeof n&&n instanceof ci}(i)&&On(i);N=j&&this.injectableDefInScope(j)?h($u(i),Td):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(l&Xt.Self?ju():this.parent).get(i,o=l&Xt.Optional&&o===Yr?null:o)}catch(C){if("NullInjectorError"===C.name){if((C[wn]=C[wn]||[]).unshift(Ie(i)),f)throw C;return function Vi(n,i,o,l){const f=n[wn];throw i[cr]&&f.unshift(i[cr]),n.message=function Ne(n,i,o,l=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Xr?n.slice(2):n;let f=Ie(i);if(Array.isArray(i))f=i.map(Ie).join(" -> ");else if("object"==typeof i){let v=[];for(let C in i)if(i.hasOwnProperty(C)){let N=i[C];v.push(C+":"+("string"==typeof N?JSON.stringify(N):Ie(N)))}f=`{${v.join(", ")}}`}return`${o}${l?"("+l+")":""}[${f}]: ${n.replace(si,"\n  ")}`}("\n"+n.message,f,o,l),n[Qr]=f,n[wn]=null,n}(C,i,"R3InjectorError",this.source)}throw C}finally{Dr(v),$n(f)}}resolveInjectorInitializers(){const i=$n(this),o=Dr(void 0);try{const l=this.get(qn.multi,Be,Xt.Self);for(const f of l)f()}finally{$n(i),Dr(o)}}toString(){const i=[],o=this.records;for(const l of o.keys())i.push(Ie(l));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ct(205,!1)}processProvider(i){let o=oc(i=Oe(i))?i:Oe(i&&i.provide);const l=function id(n){return Co(n)?h(void 0,n.useValue):h(Zc(n),Td)}(i);if(oc(i)||!0!==i.multi)this.records.get(o);else{let f=this.records.get(o);f||(f=h(void 0,Td,!0),f.factory=()=>Yi(f.multi),this.records.set(o,f)),o=i,f.multi.push(i)}this.records.set(o,l)}hydrate(i,o){return o.value===Td&&(o.value=Sd,o.value=o.factory()),"object"==typeof o.value&&o.value&&function c(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Oe(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function $u(n){const i=On(n),o=null!==i?i.factory:qe(n);if(null!==o)return o;if(n instanceof ci)throw new ct(204,!1);if(n instanceof Function)return function Xd(n){const i=n.length;if(i>0)throw function D(n,i){const o=[];for(let l=0;l<n;l++)o.push(i);return o}(i,"?"),new ct(204,!1);const o=function _r(n){return n&&(n[Hr]||n[Gr])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ct(204,!1)}function Zc(n,i,o){let l;if(oc(n)){const f=Oe(n);return qe(f)||$u(f)}if(Co(n))l=()=>Oe(n.useValue);else if(function sc(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Yi(n.deps||[]));else if(function ic(n){return!(!n||!n.useExisting)}(n))l=()=>an(Oe(n.useExisting));else{const f=Oe(n&&(n.useClass||n.provide));if(!function u(n){return!!n.deps}(n))return qe(f)||$u(f);l=()=>new f(...Yi(n.deps))}return l}function h(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function T(n,i){for(const o of n)Array.isArray(o)?T(o,i):o&&ht(o)?T(o.\u0275providers,i):i(o)}class F{}class q{}class xt{resolveComponentFactory(i){throw function ue(n){const i=Error(`No component factory found for ${Ie(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let kt=(()=>{class n{}return n.NULL=new xt,n})();function Wt(){return Fn(st(),L())}function Fn(n,i){return new ur(xr(n,i))}let ur=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Wt,n})();function Zi(n){return n instanceof ur?n.nativeElement:n}class Ra{}let Ec=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wc(){const n=L(),o=rs(st().index,n);return(bs(o)?o:n)[$e]}(),n})(),Ad=(()=>{class n{}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:()=>null}),n})();class bh{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Bf=new bh("15.2.9"),jf={},Qh="ngOriginalError";function $f(n){return n[Qh]}class Rd{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&$f(i);for(;o&&$f(o);)o=$f(o);return o||null}}function Qc(n){return n instanceof Function?n():n}function sd(n,i,o){let l=n.length;for(;;){const f=n.indexOf(i,o);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=i.length;if(f+v===l||n.charCodeAt(f+v)<=32)return f}o=f+1}}const Jd="ng-template";function om(n,i,o){let l=0,f=!0;for(;l<n.length;){let v=n[l++];if("string"==typeof v&&f){const C=n[l++];if(o&&"class"===v&&-1!==sd(C.toLowerCase(),i,0))return!0}else{if(1===v){for(;l<n.length&&"string"==typeof(v=n[l++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(f=!1)}}return!1}function Md(n){return 4===n.type&&n.value!==Jd}function $y(n,i,o){return i===(4!==n.type||o?n.value:Jd)}function Ch(n,i,o){let l=4;const f=n.attrs||[],v=function am(n){for(let i=0;i<n.length;i++)if($i(n[i]))return i;return n.length}(f);let C=!1;for(let N=0;N<i.length;N++){const j=i[N];if("number"!=typeof j){if(!C)if(4&l){if(l=2|1&l,""!==j&&!$y(n,j,o)||""===j&&1===i.length){if(Ic(l))return!1;C=!0}}else{const ee=8&l?j:i[++N];if(8&l&&null!==n.attrs){if(!om(n.attrs,ee,o)){if(Ic(l))return!1;C=!0}continue}const Ae=Pd(8&l?"class":j,f,Md(n),o);if(-1===Ae){if(Ic(l))return!1;C=!0;continue}if(""!==ee){let nt;nt=Ae>v?"":f[Ae+1].toLowerCase();const vt=8&l?nt:null;if(vt&&-1!==sd(vt,ee,0)||2&l&&ee!==nt){if(Ic(l))return!1;C=!0}}}}else{if(!C&&!Ic(l)&&!Ic(j))return!1;if(C&&Ic(j))continue;C=!1,l=j|1&l}}return Ic(l)||C}function Ic(n){return 0==(1&n)}function Pd(n,i,o,l){if(null===i)return-1;let f=0;if(l||!o){let v=!1;for(;f<i.length;){const C=i[f];if(C===n)return f;if(3===C||6===C)v=!0;else{if(1===C||2===C){let N=i[++f];for(;"string"==typeof N;)N=i[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=v?1:2}return-1}return function zy(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,n)}function Wp(n,i,o=!1){for(let l=0;l<i.length;l++)if(Ch(n,i[l],o))return!0;return!1}function um(n,i){return n?":not("+i.trim()+")":i}function Wf(n){let i=n[0],o=1,l=2,f="",v=!1;for(;o<n.length;){let C=n[o];if("string"==typeof C)if(2&l){const N=n[++o];f+="["+C+(N.length>0?'="'+N+'"':"")+"]"}else 8&l?f+="."+C:4&l&&(f+=" "+C);else""!==f&&!Ic(C)&&(i+=um(v,f),f=""),l=C,v=v||!Ic(l);o++}return""!==f&&(i+=um(v,f)),i}const Oi={};function dm(n){Gp(H(),L(),fi()+n,!1)}function Gp(n,i,o,l){if(!l)if(3==(3&i[mr])){const v=n.preOrderCheckHooks;null!==v&&Ga(i,v,o)}else{const v=n.preOrderHooks;null!==v&&uu(i,v,0,o)}Vo(o)}function Dl(n,i=null,o=null,l){const f=pm(n,i,o,l);return f.resolveInjectorInitializers(),f}function pm(n,i=null,o=null,l,f=new Set){const v=[o||Be,Go(n)];return l=l||("object"==typeof n?void 0:Ie(n)),new Gl(v,i||ju(),l||null,f)}let eh=(()=>{class n{static create(o,l){if(Array.isArray(o))return Dl({name:""},l,o,"");{const f=o.name??"";return Dl({name:f},o.parent,o.providers,f)}}}return n.THROW_IF_NOT_FOUND=Yr,n.NULL=new co,n.\u0275prov=Rt({token:n,providedIn:"any",factory:()=>an(Rr)}),n.__NG_ELEMENT_ID__=-1,n})();function Dh(n,i=Xt.Default){const o=L();return null===o?an(n,i):ar(st(),o,Oe(n),i)}function Zf(){throw new Error("invalid")}function Yf(n,i){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const v=o[l+1];if(-1!==v){const C=n.data[v];Ki(o[l]),C.contentQueries(2,i[v],v)}}}function Th(n,i,o,l,f,v,C,N,j,ee,de){const Ae=i.blueprint.slice();return Ae[Wi]=f,Ae[mr]=76|l,(null!==de||n&&1024&n[mr])&&(Ae[mr]|=1024),fr(Ae),Ae[oi]=Ae[Sr]=n,Ae[ei]=o,Ae[He]=C||n&&n[He],Ae[$e]=N||n&&n[$e],Ae[St]=j||n&&n[St]||null,Ae[Je]=ee||n&&n[Je]||null,Ae[Qi]=v,Ae[Ss]=function Ps(){return Tc++}(),Ae[ws]=de,Ae[tr]=2==i.type?n[tr]:Ae,Ae}function ad(n,i,o,l,f){let v=n.data[i];if(null===v)v=function rh(n,i,o,l,f){const v=Nn(),C=Qo(),j=n.data[i]=function s_(n,i,o,l,f,v){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?v:v&&v.parent,o,i,l,f);return null===n.firstChild&&(n.firstChild=j),null!==v&&(C?null==v.child&&null!==j.parent&&(v.child=j):null===v.next&&(v.next=j,j.prev=v)),j}(n,i,o,l,f),function Zs(){return pr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=l,v.attrs=f;const C=function Ni(){const n=pr.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===C?-1:C.injectorIndex}return ls(v,!0),v}function Nd(n,i,o,l){if(0===o)return-1;const f=i.length;for(let v=0;v<o;v++)i.push(l),n.blueprint.push(l),n.data.push(null);return f}function af(n,i,o){is(i);try{const l=n.viewQuery;null!==l&&ip(1,l,o);const f=n.template;null!==f&&Qf(n,i,f,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Yf(n,i),n.staticViewQueries&&ip(2,n.viewQuery,o);const v=n.components;null!==v&&function wm(n,i){for(let o=0;o<i.length;o++)pg(n,i[o])}(i,v)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[mr]&=-5,Ol()}}function Sh(n,i,o,l){const f=i[mr];if(128!=(128&f)){is(i);try{fr(i),function Oa(n){return pr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Qf(n,i,o,2,l);const C=3==(3&f);if(C){const ee=n.preOrderCheckHooks;null!==ee&&Ga(i,ee,null)}else{const ee=n.preOrderHooks;null!==ee&&uu(i,ee,0,null),k(i,0)}if(function d_(n){for(let i=wl(n);null!==i;i=zo(i)){if(!i[Or])continue;const o=i[As];for(let l=0;l<o.length;l++){const f=o[l];512&f[mr]||so(f[oi],1),f[mr]|=512}}}(i),function hg(n){for(let i=wl(n);null!==i;i=zo(i))for(let o=Mr;o<i.length;o++){const l=i[o],f=l[en];Io(l)&&Sh(f,l,f.template,l[ei])}}(i),null!==n.contentQueries&&Yf(n,i),C){const ee=n.contentCheckHooks;null!==ee&&Ga(i,ee)}else{const ee=n.contentHooks;null!==ee&&uu(i,ee,1),k(i,1)}!function n_(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const f=o[l];if(f<0)Vo(~f);else{const v=f,C=o[++l],N=o[++l];ou(C,v),N(2,i[v])}}}finally{Vo(-1)}}(n,i);const N=n.components;null!==N&&function Em(n,i){for(let o=0;o<i.length;o++)fg(n,i[o])}(i,N);const j=n.viewQuery;if(null!==j&&ip(2,j,l),C){const ee=n.viewCheckHooks;null!==ee&&Ga(i,ee)}else{const ee=n.viewHooks;null!==ee&&uu(i,ee,2),k(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[mr]&=-41,512&i[mr]&&(i[mr]&=-513,so(i[oi],-1))}finally{Ol()}}}function Qf(n,i,o,l,f){const v=fi(),C=2&l;try{Vo(-1),C&&i.length>Ti&&Gp(n,i,Ti,!1),Vr(C?2:0,f),o(l,f)}finally{Vo(v),Vr(C?3:1,f)}}function Xf(n,i,o){if(ys(i)){const f=i.directiveEnd;for(let v=i.directiveStart;v<f;v++){const C=n.data[v];C.contentQueries&&C.contentQueries(1,o[v],v)}}}function rg(n,i,o){Rl()&&(function hf(n,i,o,l){const f=o.directiveStart,v=o.directiveEnd;Tr(o)&&function cg(n,i,o){const l=xr(i,n),f=lf(o),v=n[He],C=ld(n,Th(n,f,null,o.onPush?32:16,l,i,v,v.createRenderer(l,o),null,null,null));n[i.index]=C}(i,o,n.data[f+o.componentOffset]),n.firstCreatePass||Cu(o,i),Xe(l,i);const C=o.initialInputs;for(let N=f;N<v;N++){const j=n.data[N],ee=zr(i,n,N,o);Xe(ee,i),null!==C&&c_(0,N-f,ee,j,0,C),vi(j)&&(rs(o.index,i)[ei]=zr(i,n,N,o))}}(n,i,o,xr(o,i)),64==(64&o.flags)&&tp(n,i,o))}function Jf(n,i,o=xr){const l=i.localNames;if(null!==l){let f=i.index+1;for(let v=0;v<l.length;v+=2){const C=l[v+1],N=-1===C?o(i,n):n[C];n[f++]=N}}}function lf(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=uf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function uf(n,i,o,l,f,v,C,N,j,ee){const de=Ti+l,Ae=de+f,nt=function r_(n,i){const o=[];for(let l=0;l<i;l++)o.push(l<n?null:Oi);return o}(de,Ae),vt="function"==typeof ee?ee():ee;return nt[en]={type:n,blueprint:nt,template:o,queries:null,viewQuery:N,declTNode:i,data:nt.slice().fill(null,de),bindingStartIndex:de,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:j,consts:vt,incompleteFirstPass:!1}}function iu(n,i,o,l){const f=Dm(i);null===o?f.push(l):(f.push(o),n.firstCreatePass&&sp(n).push(l,f.length-1))}function ig(n,i,o,l){for(let f in n)if(n.hasOwnProperty(f)){o=null===o?{}:o;const v=n[f];null===l?cf(o,i,f,v):l.hasOwnProperty(f)&&cf(o,i,l[f],v)}return o}function cf(n,i,o,l){n.hasOwnProperty(o)?n[o].push(i,l):n[o]=[i,l]}function og(n,i,o,l){if(Rl()){const f=null===l?null:{"":-1},v=function ag(n,i){const o=n.directiveRegistry;let l=null,f=null;if(o)for(let v=0;v<o.length;v++){const C=o[v];if(Wp(i,C.selectors,!1))if(l||(l=[]),vi(C))if(null!==C.findHostDirectiveDefs){const N=[];f=f||new Map,C.findHostDirectiveDefs(C,N,f),l.unshift(...N,C),Rh(n,i,N.length)}else l.unshift(C),Rh(n,i,0);else f=f||new Map,C.findHostDirectiveDefs?.(C,l,f),l.push(C)}return null===l?null:[l,f]}(n,o);let C,N;null===v?C=N=null:[C,N]=v,null!==C&&ep(n,i,o,C,f,N),f&&function ff(n,i,o){if(i){const l=n.localNames=[];for(let f=0;f<i.length;f+=2){const v=o[i[f+1]];if(null==v)throw new ct(-301,!1);l.push(i[f],v)}}}(o,l,f)}o.mergedAttrs=pn(o.mergedAttrs,o.attrs)}function ep(n,i,o,l,f,v){for(let ee=0;ee<l.length;ee++)Wn(Cu(o,i),n,l[ee].type);!function Im(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,l.length);for(let ee=0;ee<l.length;ee++){const de=l[ee];de.providersResolver&&de.providersResolver(de)}let C=!1,N=!1,j=Nd(n,i,l.length,null);for(let ee=0;ee<l.length;ee++){const de=l[ee];o.mergedAttrs=pn(o.mergedAttrs,de.hostAttrs),ug(n,o,i,j,de),lg(j,de,f),null!==de.contentQueries&&(o.flags|=4),(null!==de.hostBindings||null!==de.hostAttrs||0!==de.hostVars)&&(o.flags|=64);const Ae=de.type.prototype;!C&&(Ae.ngOnChanges||Ae.ngOnInit||Ae.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),C=!0),!N&&(Ae.ngOnChanges||Ae.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),N=!0),j++}!function df(n,i,o){const f=i.directiveEnd,v=n.data,C=i.attrs,N=[];let j=null,ee=null;for(let de=i.directiveStart;de<f;de++){const Ae=v[de],nt=o?o.get(Ae):null,jt=nt?nt.outputs:null;j=ig(Ae.inputs,de,j,nt?nt.inputs:null),ee=ig(Ae.outputs,de,ee,jt);const En=null===j||null===C||Md(i)?null:dg(j,de,C);N.push(En)}null!==j&&(j.hasOwnProperty("class")&&(i.flags|=8),j.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=j,i.outputs=ee}(n,o,v)}function tp(n,i,o){const l=o.directiveStart,f=o.directiveEnd,v=o.index,C=function Pl(){return pr.lFrame.currentDirectiveIndex}();try{Vo(v);for(let N=l;N<f;N++){const j=n.data[N],ee=i[N];Vs(N),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Ah(j,ee)}}finally{Vo(-1),Vs(C)}}function Ah(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Rh(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function lg(n,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=n;vi(i)&&(o[""]=n)}}function ug(n,i,o,l,f){n.data[l]=f;const v=f.factory||(f.factory=qe(f.type)),C=new Me(v,vi(f),Dh);n.blueprint[l]=C,o[l]=C,function l_(n,i,o,l,f){const v=f.hostBindings;if(v){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const N=~i.index;(function u_(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(C)!=N&&C.push(N),C.push(o,l,v)}}(n,i,l,Nd(n,o,f.hostVars,Oi),f)}function su(n,i,o,l,f,v){const C=xr(n,i);!function np(n,i,o,l,f,v,C){if(null==v)n.removeAttribute(i,f,o);else{const N=null==C?At(v):C(v,l||"",f);n.setAttribute(i,f,N,o)}}(i[$e],C,v,n.value,o,l,f)}function c_(n,i,o,l,f,v){const C=v[i];if(null!==C){const N=l.setInput;for(let j=0;j<C.length;){const ee=C[j++],de=C[j++],Ae=C[j++];null!==N?l.setInput(o,Ae,ee,de):o[de]=Ae}}}function dg(n,i,o){let l=null,f=0;for(;f<o.length;){const v=o[f];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===l&&(l=[]);const C=n[v];for(let N=0;N<C.length;N+=2)if(C[N]===i){l.push(v,C[N+1],o[f+1]);break}}f+=2}else f+=2;else f+=4}return l}function bm(n,i,o,l){return[n,!0,!1,i,null,0,l,o,null,null]}function fg(n,i){const o=rs(i,n);if(Io(o)){const l=o[en];48&o[mr]?Sh(l,o,l.template,o[ei]):o[as]>0&&Mh(o)}}function Mh(n){for(let l=wl(n);null!==l;l=zo(l))for(let f=Mr;f<l.length;f++){const v=l[f];if(Io(v))if(512&v[mr]){const C=v[en];Sh(C,v,C.template,v[ei])}else v[as]>0&&Mh(v)}const o=n[en].components;if(null!==o)for(let l=0;l<o.length;l++){const f=rs(o[l],n);Io(f)&&f[as]>0&&Mh(f)}}function pg(n,i){const o=rs(i,n),l=o[en];(function Cm(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(l,o),af(l,o,o[ei])}function ld(n,i){return n[Ht]?n[Kn][ai]=i:n[Ht]=i,n[Kn]=i,i}function Ph(n){for(;n;){n[mr]|=32;const i=jc(n);if(Ii(n)&&!i)return n;n=i}return null}function rp(n,i,o,l=!0){const f=i[He];f.begin&&f.begin();try{Sh(n,i,n.template,o)}catch(C){throw l&&op(i,C),C}finally{f.end&&f.end()}}function ip(n,i,o){Ki(0),i(n,o)}function Dm(n){return n[qs]||(n[qs]=[])}function sp(n){return n.cleanup||(n.cleanup=[])}function op(n,i){const o=n[Je],l=o?o.get(Rd,null):null;l&&l.handleError(i)}function gg(n,i,o,l,f){for(let v=0;v<o.length;){const C=o[v++],N=o[v++],j=i[C],ee=n.data[C];null!==ee.setInput?ee.setInput(j,f,l,N):j[N]=f}}function ap(n,i,o){let l=o?n.styles:null,f=o?n.classes:null,v=0;if(null!==i)for(let C=0;C<i.length;C++){const N=i[C];"number"==typeof N?v=N:1==v?f=Qe(f,N):2==v&&(l=Qe(l,N+": "+i[++C]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=f:n.classesWithoutHost=f}function xh(n,i,o,l,f=!1){for(;null!==o;){const v=i[o.index];if(null!==v&&l.push(hi(v)),_i(v))for(let N=Mr;N<v.length;N++){const j=v[N],ee=j[en].firstChild;null!==ee&&xh(j[en],j,ee,l)}const C=o.type;if(8&C)xh(n,i,o.child,l);else if(32&C){const N=Ta(o,i);let j;for(;j=N();)l.push(j)}else if(16&C){const N=$c(i,o);if(Array.isArray(N))l.push(...N);else{const j=jc(i[tr]);xh(j[en],j,N,l,!0)}}o=f?o.projectionNext:o.next}return l}class Nh{get rootNodes(){const i=this._lView,o=i[en];return xh(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ei]}set context(i){this._lView[ei]=i}get destroyed(){return 128==(128&this._lView[mr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[oi];if(_i(i)){const o=i[vr],l=o?o.indexOf(this):-1;l>-1&&(ne(i,l),va(o,l))}this._attachedToViewContainer=!1}fe(this._lView[en],this._lView)}onDestroy(i){iu(this._lView[en],this._lView,null,i)}markForCheck(){Ph(this._cdRefInjectingView||this._lView)}detach(){this._lView[mr]&=-65}reattach(){this._lView[mr]|=64}detectChanges(){rp(this._lView[en],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ju(n,i){zc(n,i,i[$e],2,null,null)}(this._lView[en],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=i}}class mg extends Nh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;rp(i[en],i,i[ei],!1)}checkNoChanges(){}get context(){return null}}class lp extends kt{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=In(i);return new ih(o,this.ngModule)}}function up(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Od{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,l){l=Mi(l);const f=this.injector.get(i,jf,l);return f!==jf||o===jf?f:this.parentInjector.get(i,o,l)}}class ih extends q{get inputs(){return up(this.componentDef.inputs)}get outputs(){return up(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function cm(n){return n.map(Wf).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,l,f){let v=(f=f||this.ngModule)instanceof Wl?f:f?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const C=v?new Od(i,v):i,N=C.get(Ra,null);if(null===N)throw new ct(407,!1);const j=C.get(Ad,null),ee=N.createRenderer(null,this.componentDef),de=this.componentDef.selectors[0][0]||"div",Ae=l?function i_(n,i,o){return n.selectRootElement(i,o===ye.ShadowDom)}(ee,l,this.componentDef.encapsulation):yc(ee,de,function Oh(n){const i=n.toLowerCase();return"svg"===i?gi:"math"===i?"math":null}(de)),nt=this.componentDef.onPush?288:272,vt=uf(0,null,null,1,0,null,null,null,null,null),jt=Th(null,vt,null,nt,null,null,N,ee,j,C,null);let En,Zn;is(jt);try{const Ir=this.componentDef;let mi,tn=null;Ir.findHostDirectiveDefs?(mi=[],tn=new Map,Ir.findHostDirectiveDefs(Ir,mi,tn),mi.push(Ir)):mi=[Ir];const zi=function Sm(n,i){const o=n[en],l=Ti;return n[l]=i,ad(o,l,2,"#host",null)}(jt,Ae),Ma=function Lh(n,i,o,l,f,v,C,N){const j=f[en];!function f_(n,i,o,l){for(const f of n)i.mergedAttrs=pn(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(ap(i,i.mergedAttrs,!0),null!==o&&_d(l,o,i))}(l,n,i,C);const ee=v.createRenderer(i,o),de=Th(f,lf(o),null,o.onPush?32:16,f[n.index],n,v,ee,N||null,null,null);return j.firstCreatePass&&Rh(j,n,l.length-1),ld(f,de),f[n.index]=de}(zi,Ae,Ir,mi,jt,N,ee);Zn=Ls(vt,Ti),Ae&&function yg(n,i,o,l){if(l)ir(n,o,["ng-version",Bf.full]);else{const{attrs:f,classes:v}=function Wy(n){const i=[],o=[];let l=1,f=2;for(;l<n.length;){let v=n[l];if("string"==typeof v)2===f?""!==v&&i.push(v,n[++l]):8===f&&o.push(v);else{if(!Ic(f))break;f=v}l++}return{attrs:i,classes:o}}(i.selectors[0]);f&&ir(n,o,f),v&&v.length>0&&Ru(n,o,v.join(" "))}}(ee,Ir,Ae,l),void 0!==o&&function _g(n,i,o){const l=n.projection=[];for(let f=0;f<i.length;f++){const v=o[f];l.push(null!=v?Array.from(v):null)}}(Zn,this.ngContentSelectors,o),En=function p_(n,i,o,l,f,v){const C=st(),N=f[en],j=xr(C,f);ep(N,f,C,o,null,l);for(let de=0;de<o.length;de++)Xe(zr(f,N,C.directiveStart+de,C),f);tp(N,f,C),j&&Xe(j,f);const ee=zr(f,N,C.directiveStart+C.componentOffset,C);if(n[ei]=f[ei]=ee,null!==v)for(const de of v)de(ee,i);return Xf(N,C,n),ee}(Ma,Ir,mi,tn,jt,[vg]),af(vt,jt,null)}finally{Ol()}return new kh(this.componentType,En,Fn(Zn,jt),jt,Zn)}}class kh extends F{constructor(i,o,l,f,v){super(),this.location=l,this._rootLView=f,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new mg(f),this.componentType=i}setInput(i,o){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[i])){const v=this._rootLView;gg(v[en],v,f,i,o),Ph(rs(this._tNode.index,v))}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function vg(){const n=st();ka(L()[en],n)}function Eg(n){let i=function cp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;i;){let f;if(vi(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ct(903,!1);f=i.\u0275dir}if(f){if(o){l.push(f);const C=n;C.inputs=gf(n.inputs),C.declaredInputs=gf(n.declaredInputs),C.outputs=gf(n.outputs);const N=f.hostBindings;N&&Am(n,N);const j=f.viewQuery,ee=f.contentQueries;if(j&&wg(n,j),ee&&m_(n,ee),Ge(n.inputs,f.inputs),Ge(n.declaredInputs,f.declaredInputs),Ge(n.outputs,f.outputs),vi(f)&&f.data.animation){const de=n.data;de.animation=(de.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let C=0;C<v.length;C++){const N=v[C];N&&N.ngInherit&&N(n),N===Eg&&(o=!1)}}i=Object.getPrototypeOf(i)}!function g_(n){let i=0,o=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=i+=f.hostVars,f.hostAttrs=pn(f.hostAttrs,o=pn(o,f.hostAttrs))}}(l)}function gf(n){return n===oe?{}:n===Be?[]:n}function wg(n,i){const o=n.viewQuery;n.viewQuery=o?(l,f)=>{i(l,f),o(l,f)}:i}function m_(n,i){const o=n.contentQueries;n.contentQueries=o?(l,f,v)=>{i(l,f,v),o(l,f,v)}:i}function Am(n,i){const o=n.hostBindings;n.hostBindings=o?(l,f)=>{i(l,f),o(l,f)}:i}function Fh(n){return!!mf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function mf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function bc(n,i,o){return n[i]=o}function Kl(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Cg(n,i,o,l){const f=L();return Kl(f,So(),i)&&(H(),su(fs(),f,n,i,o,l)),Cg}function mp(n,i,o,l,f,v,C,N){const j=L(),ee=H(),de=n+Ti,Ae=ee.firstCreatePass?function w_(n,i,o,l,f,v,C,N,j){const ee=i.consts,de=ad(i,n,4,C||null,Cs(ee,N));og(i,o,de,Cs(ee,j)),ka(i,de);const Ae=de.tView=uf(2,de,l,f,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ee);return null!==i.queries&&(i.queries.template(i,de),Ae.queries=i.queries.embeddedTView(de)),de}(de,ee,j,i,o,l,f,v,C):ee.data[de];ls(Ae,!1);const nt=j[$e].createComment("");rl(ee,j,nt,Ae),Xe(nt,j),ld(j,j[de]=bm(nt,j,nt,Ae)),lr(Ae)&&rg(ee,j,Ae),null!=C&&Jf(j,Ae,N)}function Sg(n,i,o){const l=L();return Kl(l,So(),i)&&function Hu(n,i,o,l,f,v,C,N){const j=xr(i,o);let de,ee=i.inputs;!N&&null!=ee&&(de=ee[l])?(gg(n,o,de,l,f),Tr(i)&&function o_(n,i){const o=rs(i,n);16&o[mr]||(o[mr]|=32)}(o,i.index)):3&i.type&&(l=function sg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=C?C(f,i.value||"",l):f,v.setProperty(j,l,f))}(H(),fs(),l,n,i,l[$e],o,!1),Sg}function yf(n,i,o,l,f){const C=f?"class":"style";gg(n,o,i.inputs[C],C,l)}function jh(n,i,o,l){const f=L(),v=H(),C=Ti+n,N=f[$e],j=v.firstCreatePass?function Um(n,i,o,l,f,v){const C=i.consts,j=ad(i,n,2,l,Cs(C,f));return og(i,o,j,Cs(C,v)),null!==j.attrs&&ap(j,j.attrs,!1),null!==j.mergedAttrs&&ap(j,j.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,j),j}(C,v,f,i,o,l):v.data[C],ee=f[C]=yc(N,i,function ql(){return pr.lFrame.currentNamespace}()),de=lr(j);return ls(j,!0),_d(N,ee,j),32!=(32&j.flags)&&rl(v,f,ee,j),0===function Na(){return pr.lFrame.elementDepthCount}()&&Xe(ee,f),function Ha(){pr.lFrame.elementDepthCount++}(),de&&(rg(v,f,j),Xf(v,j,f)),null!==l&&Jf(f,j),jh}function _f(){let n=st();Qo()?No():(n=n.parent,ls(n,!1));const i=n;!function sl(){pr.lFrame.elementDepthCount--}();const o=H();return o.firstCreatePass&&(ka(o,n),ys(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function yr(n){return 0!=(8&n.flags)}(i)&&yf(o,i,L(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ui(n){return 0!=(16&n.flags)}(i)&&yf(o,i,L(),i.stylesWithoutHost,!1),_f}function Ag(n,i,o,l){return jh(n,i,o,l),_f(),Ag}function $h(n,i,o){const l=L(),f=H(),v=n+Ti,C=f.firstCreatePass?function b_(n,i,o,l,f){const v=i.consts,C=Cs(v,l),N=ad(i,n,8,"ng-container",C);return null!==C&&ap(N,C,!0),og(i,o,N,Cs(v,f)),null!==i.queries&&i.queries.elementStart(i,N),N}(v,f,l,i,o):f.data[v];ls(C,!0);const N=l[v]=l[$e].createComment("");return rl(f,l,N,C),Xe(N,l),lr(C)&&(rg(f,l,C),Xf(f,C,l)),null!=o&&Jf(l,C),$h}function yp(){let n=st();const i=H();return Qo()?No():(n=n.parent,ls(n,!1)),i.firstCreatePass&&(ka(i,n),ys(n)&&i.queries.elementEnd(n)),yp}function vp(){return L()}function vf(n){return!!n&&"function"==typeof n.then}function Bm(n){return!!n&&"function"==typeof n.subscribe}const Hh=Bm;function Rg(n,i,o,l){const f=L(),v=H(),C=st();return function oh(n,i,o,l,f,v,C){const N=lr(l),ee=n.firstCreatePass&&sp(n),de=i[ei],Ae=Dm(i);let nt=!0;if(3&l.type||C){const En=xr(l,i),Zn=C?C(En):En,Ir=Ae.length,mi=C?zi=>C(hi(zi[l.index])):l.index;let tn=null;if(!C&&N&&(tn=function jm(n,i,o,l){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const C=f[v];if(C===o&&f[v+1]===l){const N=i[qs],j=f[v+2];return N.length>j?N[j]:null}"string"==typeof C&&(v+=2)}return null}(n,i,f,l.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=v,tn.__ngLastListenerFn__=v,nt=!1;else{v=Ef(l,i,de,v,!1);const zi=o.listen(Zn,f,v);Ae.push(v,zi),ee&&ee.push(f,mi,Ir,Ir+1)}}else v=Ef(l,i,de,v,!1);const vt=l.outputs;let jt;if(nt&&null!==vt&&(jt=vt[f])){const En=jt.length;if(En)for(let Zn=0;Zn<En;Zn+=2){const Ma=i[jt[Zn]][jt[Zn+1]].subscribe(v),Al=Ae.length;Ae.push(v,Ma),ee&&ee.push(f,l.index,Al,-(Al+1))}}}(v,f,f[$e],C,n,i,l),Rg}function Mg(n,i,o,l){try{return Vr(6,i,o),!1!==o(l)}catch(f){return op(n,f),!1}finally{Vr(7,i,o)}}function Ef(n,i,o,l,f){return function v(C){if(C===Function)return l;Ph(n.componentOffset>-1?rs(n.index,i):i);let j=Mg(i,o,l,C),ee=v.__ngNextListenerFn__;for(;ee;)j=Mg(i,o,ee,C)&&j,ee=ee.__ngNextListenerFn__;return f&&!1===j&&(C.preventDefault(),C.returnValue=!1),j}}function $m(n=1){return function fo(n){return(pr.lFrame.contextLView=function oo(n,i){for(;n>0;)i=i[Sr],n--;return i}(n,pr.lFrame.contextLView))[ei]}(n)}function ah(n,i){return n<<17|i<<2}function ud(n){return n>>17&32767}function jd(n){return 2|n}function cd(n){return(131068&n)>>2}function Og(n,i){return-131069&n|i<<2}function kg(n){return 1|n}function Wm(n,i,o,l,f){const v=n[o+1],C=null===i;let N=l?ud(v):cd(v),j=!1;for(;0!==N&&(!1===j||C);){const de=n[N+1];M_(n[N],i)&&(j=!0,n[N+1]=l?kg(de):jd(de)),N=l?ud(de):cd(de)}j&&(n[o+1]=l?jd(v):kg(v))}function M_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&et(n,i)>=0}const Tl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Lg(n){return n.substring(Tl.key,Tl.keyEnd)}function Gm(n){return n.substring(Tl.value,Tl.valueEnd)}function Ug(n,i){const o=Tl.textEnd;let l=Tl.key=ts(n,i,o);return o===l?-1:(l=Tl.keyEnd=function Zm(n,i,o){let l;for(;i<o&&(45===(l=n.charCodeAt(i))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)i++;return i}(n,l,o),l=zh(n,l,o),l=Tl.value=ts(n,l,o),l=Tl.valueEnd=function Ym(n,i,o){let l=-1,f=-1,v=-1,C=i,N=C;for(;C<o;){const j=n.charCodeAt(C++);if(59===j)return N;34===j||39===j?N=C=ua(n,j,C,o):i===C-4&&85===v&&82===f&&76===l&&40===j?N=C=ua(n,41,C,o):j>32&&(N=C),v=f,f=l,l=-33&j}return N}(n,l,o),zh(n,l,o))}function ts(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function zh(n,i,o,l){return(i=ts(n,i,o))<o&&i++,i}function ua(n,i,o,l){let f=-1,v=o;for(;v<l;){const C=n.charCodeAt(v++);if(C==i&&92!==f)return v;f=92==C&&92===f?0:C}throw new Error}function Bg(n,i){return function Lc(n,i,o,l){const f=L(),v=H(),C=ko(2);v.firstUpdatePass&&Jm(v,n,C,l),i!==Oi&&Kl(f,C,i)&&ey(v,v.data[fi()],f,f[$e],n,f[C+1]=function L_(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ie(nu(n)))),n}(i,o),l,C)}(n,i,null,!0),Bg}function kc(n){!function ac(n,i,o,l){const f=H(),v=ko(2);f.firstUpdatePass&&Jm(f,null,v,l);const C=L();if(o!==Oi&&Kl(C,v,o)){const N=f.data[fi()];if(ny(N,l)&&!Xm(f,v)){let j=l?N.classesWithoutHost:N.stylesWithoutHost;null!==j&&(o=Qe(j,o||"")),yf(f,N,C,o,l)}else!function k_(n,i,o,l,f,v,C,N){f===Oi&&(f=Be);let j=0,ee=0,de=0<f.length?f[0]:null,Ae=0<v.length?v[0]:null;for(;null!==de||null!==Ae;){const nt=j<f.length?f[j+1]:void 0,vt=ee<v.length?v[ee+1]:void 0;let En,jt=null;de===Ae?(j+=2,ee+=2,nt!==vt&&(jt=Ae,En=vt)):null===Ae||null!==de&&de<Ae?(j+=2,jt=de):(ee+=2,jt=Ae,En=vt),null!==jt&&ey(n,i,o,l,jt,En,C,N),de=j<f.length?f[j]:null,Ae=ee<v.length?v[ee]:null}}(f,N,C,C[$e],C[v+1],C[v+1]=function N_(n,i,o){if(null==o||""===o)return Be;const l=[],f=nu(o);if(Array.isArray(f))for(let v=0;v<f.length;v++)n(l,f[v],!0);else if("object"==typeof f)for(const v in f)f.hasOwnProperty(v)&&n(l,v,f[v]);else"string"==typeof f&&i(l,f);return l}(n,i,o),l,v)}}(jg,Qm,n,!1)}function Qm(n,i){for(let o=function Km(n){return function Cf(n){Tl.key=0,Tl.keyEnd=0,Tl.value=0,Tl.valueEnd=0,Tl.textEnd=n.length}(n),Ug(n,ts(n,0,Tl.textEnd))}(i);o>=0;o=Ug(i,o))jg(n,Lg(i),Gm(i))}function Xm(n,i){return i>=n.expandoStartIndex}function Jm(n,i,o,l){const f=n.data;if(null===f[o+1]){const v=f[fi()],C=Xm(n,o);ny(v,l)&&null===i&&!C&&(i=!1),i=function Ko(n,i,o,l){const f=function Lo(n){const i=pr.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=l?i.residualClasses:i.residualStyles;if(null===f)0===(l?i.classBindings:i.styleBindings)&&(o=Df(o=Tp(null,n,i,o,l),i.attrs,l),v=null);else{const C=i.directiveStylingLast;if(-1===C||n[C]!==f)if(o=Tp(f,n,i,o,l),null===v){let j=function qv(n,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==cd(l))return n[ud(l)]}(n,i,l);void 0!==j&&Array.isArray(j)&&(j=Tp(null,n,i,j[1],l),j=Df(j,i.attrs,l),function x_(n,i,o,l){n[ud(o?i.classBindings:i.styleBindings)]=l}(n,i,l,j))}else v=function Ba(n,i,o){let l;const f=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<f;v++)l=Df(l,n[v].hostAttrs,o);return Df(l,i.attrs,o)}(n,i,l)}return void 0!==v&&(l?i.residualClasses=v:i.residualStyles=v),o}(f,v,i,l),function zm(n,i,o,l,f,v){let C=v?i.classBindings:i.styleBindings,N=ud(C),j=cd(C);n[l]=o;let de,ee=!1;if(Array.isArray(o)?(de=o[1],(null===de||et(o,de)>0)&&(ee=!0)):de=o,f)if(0!==j){const nt=ud(n[N+1]);n[l+1]=ah(nt,N),0!==nt&&(n[nt+1]=Og(n[nt+1],l)),n[N+1]=function Hm(n,i){return 131071&n|i<<17}(n[N+1],l)}else n[l+1]=ah(N,0),0!==N&&(n[N+1]=Og(n[N+1],l)),N=l;else n[l+1]=ah(j,0),0===N?N=l:n[j+1]=Og(n[j+1],l),j=l;ee&&(n[l+1]=jd(n[l+1])),Wm(n,de,l,!0),Wm(n,de,l,!1),function R_(n,i,o,l,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&et(v,i)>=0&&(o[l+1]=kg(o[l+1]))}(i,de,n,l,v),C=ah(N,j),v?i.classBindings=C:i.styleBindings=C}(f,v,i,o,C,l)}}function Tp(n,i,o,l,f){let v=null;const C=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<C&&(v=i[N],l=Df(l,v.hostAttrs,f),v!==n);)N++;return null!==n&&(o.directiveStylingLast=N),l}function Df(n,i,o){const l=o?1:2;let f=-1;if(null!==i)for(let v=0;v<i.length;v++){const C=i[v];"number"==typeof C?f=C:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),se(n,C,!!o||i[++v]))}return void 0===n?null:n}function jg(n,i,o){se(n,i,nu(o))}function ey(n,i,o,l,f,v,C,N){if(!(3&i.type))return;const j=n.data,ee=j[N+1],de=function S_(n){return 1==(1&n)}(ee)?ty(j,i,o,f,cd(ee),C):void 0;$g(de)||($g(v)||function Ng(n){return 2==(2&n)}(ee)&&(v=ty(j,null,o,f,N,C)),function Wc(n,i,o,l,f){if(i)f?n.addClass(o,l):n.removeClass(o,l);else{let v=-1===l.indexOf("-")?void 0:Ca.DashCase;null==f?n.removeStyle(o,l,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=Ca.Important),n.setStyle(o,l,f,v))}}(l,C,li(fi(),o),f,v))}function ty(n,i,o,l,f,v){const C=null===i;let N;for(;f>0;){const j=n[f],ee=Array.isArray(j),de=ee?j[1]:j,Ae=null===de;let nt=o[f+1];nt===Oi&&(nt=Ae?Be:void 0);let vt=Ae?ge(nt,l):de===l?nt:void 0;if(ee&&!$g(vt)&&(vt=ge(j,l)),$g(vt)&&(N=vt,C))return N;const jt=n[f+1];f=C?ud(jt):cd(jt)}if(null!==i){let j=v?i.residualClasses:i.residualStyles;null!=j&&(N=ge(j,l))}return N}function $g(n){return void 0!==n}function ny(n,i){return 0!=(n.flags&(i?8:16))}function Hg(n,i=""){const o=L(),l=H(),f=n+Ti,v=l.firstCreatePass?ad(l,f,1,i,null):l.data[f],C=o[f]=function mc(n,i){return n.createText(i)}(o[$e],i);rl(l,o,C,v),ls(v,!1)}function lh(n){return Sp("",n,""),lh}function Sp(n,i,o){const l=L(),f=function Uh(n,i,o,l){return Kl(n,So(),o)?i+At(o)+l:Oi}(l,n,i,o);return f!==Oi&&function xc(n,i,o){const l=li(i,n);!function Sc(n,i,o){n.setValue(i,o)}(n[$e],l,o)}(l,fi(),f),Sp}const dh=void 0;var $_=["en",[["a","p"],["AM","PM"],dh],[["AM","PM"],dh,dh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dh,"{1} 'at' {0}",dh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pf(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let Fc={};function hy(n){const i=function Pp(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=xf(i);if(o)return o;const l=i.split("-")[0];if(o=xf(l),o)return o;if("en"===l)return $_;throw new ct(701,!1)}function py(n){return hy(n)[ni.PluralCase]}function xf(n){return n in Fc||(Fc[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),Fc[n]}var ni=(()=>((ni=ni||{})[ni.LocaleId=0]="LocaleId",ni[ni.DayPeriodsFormat=1]="DayPeriodsFormat",ni[ni.DayPeriodsStandalone=2]="DayPeriodsStandalone",ni[ni.DaysFormat=3]="DaysFormat",ni[ni.DaysStandalone=4]="DaysStandalone",ni[ni.MonthsFormat=5]="MonthsFormat",ni[ni.MonthsStandalone=6]="MonthsStandalone",ni[ni.Eras=7]="Eras",ni[ni.FirstDayOfWeek=8]="FirstDayOfWeek",ni[ni.WeekendRange=9]="WeekendRange",ni[ni.DateFormat=10]="DateFormat",ni[ni.TimeFormat=11]="TimeFormat",ni[ni.DateTimeFormat=12]="DateTimeFormat",ni[ni.NumberSymbols=13]="NumberSymbols",ni[ni.NumberFormats=14]="NumberFormats",ni[ni.CurrencyCode=15]="CurrencyCode",ni[ni.CurrencySymbol=16]="CurrencySymbol",ni[ni.CurrencyName=17]="CurrencyName",ni[ni.Currencies=18]="Currencies",ni[ni.Directionality=19]="Directionality",ni[ni.PluralCase=20]="PluralCase",ni[ni.ExtraData=21]="ExtraData",ni))();const fd="en-US";let Qg=fd;function Vp(n,i,o,l,f){if(n=Oe(n),Array.isArray(n))for(let v=0;v<n.length;v++)Vp(n[v],i,o,l,f);else{const v=H(),C=L();let N=oc(n)?n:Oe(n.provide),j=Zc(n);const ee=st(),de=1048575&ee.providerIndexes,Ae=ee.directiveStart,nt=ee.providerIndexes>>20;if(oc(n)||!n.multi){const vt=new Me(j,f,Dh),jt=hv(N,i,f?de:de+nt,Ae);-1===jt?(Wn(Cu(ee,C),v,N),dv(v,n,i.length),i.push(N),ee.directiveStart++,ee.directiveEnd++,f&&(ee.providerIndexes+=1048576),o.push(vt),C.push(vt)):(o[jt]=vt,C[jt]=vt)}else{const vt=hv(N,i,de+nt,Ae),jt=hv(N,i,de,de+nt),Zn=jt>=0&&o[jt];if(f&&!Zn||!f&&!(vt>=0&&o[vt])){Wn(Cu(ee,C),v,N);const Ir=function L0(n,i,o,l,f){const v=new Me(n,o,Dh);return v.multi=[],v.index=i,v.componentProviders=0,rE(v,f,l&&!o),v}(f?k0:O0,o.length,f,l,j);!f&&Zn&&(o[jt].providerFactory=Ir),dv(v,n,i.length,0),i.push(N),ee.directiveStart++,ee.directiveEnd++,f&&(ee.providerIndexes+=1048576),o.push(Ir),C.push(Ir)}else dv(v,n,vt>-1?vt:jt,rE(o[f?jt:vt],j,!f&&l));!f&&l&&Zn&&o[jt].componentProviders++}}}function dv(n,i,o,l){const f=oc(i),v=function Bu(n){return!!n.useClass}(i);if(f||v){const j=(v?Oe(i.useClass):i).prototype.ngOnDestroy;if(j){const ee=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const de=ee.indexOf(o);-1===de?ee.push(o,[l,j]):ee[de+1].push(l,j)}else ee.push(o,j)}}}function rE(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function hv(n,i,o,l){for(let f=o;f<l;f++)if(i[f]===n)return f;return-1}function O0(n,i,o,l){return fv(this.multi,[])}function k0(n,i,o,l){const f=this.multi;let v;if(this.providerFactory){const C=this.providerFactory.componentProviders,N=zr(o,o[en],this.providerFactory.index,l);v=N.slice(0,C),fv(f,v);for(let j=C;j<N.length;j++)v.push(N[j])}else v=[],fv(f,v);return v}function fv(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function iE(n,i=[]){return o=>{o.providersResolver=(l,f)=>function ph(n,i,o){const l=H();if(l.firstCreatePass){const f=vi(n);Vp(o,l.data,l.blueprint,f,!0),Vp(i,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,i)}}class Up{}class sE{}function F0(n,i){return new oE(n,i??null)}class oE extends Up{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lp(this);const l=ns(i);this._bootstrapComponents=Qc(l.bootstrap),this._r3Injector=pm(i,o,[{provide:Up,useValue:this},{provide:kt,useValue:this.componentFactoryResolver}],Ie(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class pv extends sE{constructor(i){super(),this.moduleType=i}create(i){return new oE(this.moduleType,i)}}class V0 extends Up{constructor(i,o,l){super(),this.componentFactoryResolver=new lp(this),this.instance=null;const f=new Gl([...i,{provide:Up,useValue:this},{provide:kt,useValue:this.componentFactoryResolver}],o||ju(),l,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function gv(n,i,o=null){return new V0(n,i,o).injector}let U0=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const l=Cl(0,o.type),f=l.length>0?gv([l],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,f)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Rt({token:n,providedIn:"environment",factory:()=>new n(an(Wl))}),n})();function aE(n){n.getStandaloneInjector=i=>i.get(U0).getOrCreateStandaloneInjector(n)}function pE(n,i,o){const l=Fs()+n,f=L();return f[l]===Oi?bc(f,l,o?i.call(o):i()):function Vh(n,i){return n[i]}(f,l)}function gE(n,i,o,l){return yE(L(),Fs(),n,i,o,l)}function mE(n,i,o,l,f){return function _E(n,i,o,l,f,v,C){const N=i+o;return function kd(n,i,o,l){const f=Kl(n,i,o);return Kl(n,i+1,l)||f}(n,N,f,v)?bc(n,N+2,C?l.call(C,f,v):l(f,v)):em(n,N+2)}(L(),Fs(),n,i,o,l,f)}function em(n,i){const o=n[i];return o===Oi?void 0:o}function yE(n,i,o,l,f,v){const C=i+o;return Kl(n,C,f)?bc(n,C+1,v?l.call(v,f):l(f)):em(n,C+1)}function IE(n,i){const o=H();let l;const f=n+Ti;o.firstCreatePass?(l=function tw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const l=i[o];if(n===l.name)return l}}(i,o.pipeRegistry),o.data[f]=l,l.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(f,l.onDestroy)):l=o.data[f];const v=l.factory||(l.factory=qe(l.type)),C=Dr(Dh);try{const N=bu(!1),j=v();return bu(N),function I_(n,i,o,l){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=l}(o,L(),f,j),j}finally{Dr(C)}}function bE(n,i,o){const l=n+Ti,f=L(),v=function hs(n,i){return n[i]}(f,l);return function tm(n,i){return n[en].data[i].pure}(f,l)?yE(f,Fs(),i,v.transform,o,v):v.transform(o)}function yv(n){return i=>{setTimeout(n,void 0,i)}}const Wd=class ow extends _.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,l){let f=i,v=o||(()=>null),C=l;if(i&&"object"==typeof i){const j=i;f=j.next?.bind(j),v=j.error?.bind(j),C=j.complete?.bind(j)}this.__isAsync&&(v=yv(v),f&&(f=yv(f)),C&&(C=yv(C)));const N=super.subscribe({next:f,error:v,complete:C});return i instanceof ie.w0&&i.add(N),N}};function aw(){return this._results[Symbol.iterator]()}class _v{get changes(){return this._changes||(this._changes=new Wd)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=_v.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=aw)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const l=this;l.dirty=!1;const f=function Ro(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ds(n,i,o){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],v=i[l];if(o&&(f=o(f),v=o(v)),v!==f)return!1}return!0}(l._results,f,o))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let nm=(()=>{class n{}return n.__NG_ELEMENT_ID__=cw,n})();const lw=nm,uw=class extends lw{constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(i,o){const l=this._declarationTContainer.tView,f=Th(this._declarationLView,l,i,16,null,l.declTNode,null,null,null,null,o||null);f[ti]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[Es];return null!==C&&(f[Es]=C.createEmbeddedView(l)),af(l,f,i),new Nh(f)}};function cw(){return Ay(st(),L())}function Ay(n,i){return 4&n.type?new uw(i,n,Fn(n,i)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();function dw(){return TE(st(),L())}const hw=Ry,CE=class extends hw{constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return Fn(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const i=Bs(this._hostTNode,this._hostLView);if(Ws(i)){const o=Bt(i,this._hostLView),l=rn(i);return new Bo(o[en].data[l+8],o)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=DE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(i,o,l){let f,v;"number"==typeof l?f=l:null!=l&&(f=l.index,v=l.injector);const C=i.createEmbeddedView(o||{},v);return this.insert(C,f),C}createComponent(i,o,l,f,v){const C=i&&!function fl(n){return"function"==typeof n}(i);let N;if(C)N=o;else{const Ae=o||{};N=Ae.index,l=Ae.injector,f=Ae.projectableNodes,v=Ae.environmentInjector||Ae.ngModuleRef}const j=C?i:new ih(In(i)),ee=l||this.parentInjector;if(!v&&null==j.ngModule){const nt=(C?ee:this.parentInjector).get(Wl,null);nt&&(v=nt)}const de=j.create(ee,f,void 0,v);return this.insert(de.hostView,N),de}insert(i,o){const l=i._lView,f=l[en];if(function Do(n){return _i(n[oi])}(l)){const de=this.indexOf(i);if(-1!==de)this.detach(de);else{const Ae=l[oi],nt=new CE(Ae,Ae[Qi],Ae[oi]);nt.detach(nt.indexOf(i))}}const v=this._adjustIndex(o),C=this._lContainer;!function m(n,i,o,l){const f=Mr+l,v=o.length;l>0&&(o[f-1][ai]=i),l<v-Mr?(i[ai]=o[f],js(o,Mr+l,i)):(o.push(i),i[ai]=null),i[oi]=o;const C=i[ti];null!==C&&o!==C&&function w(n,i){const o=n[As];i[tr]!==i[oi][oi][tr]&&(n[Or]=!0),null===o?n[As]=[i]:o.push(i)}(C,i);const N=i[Es];null!==N&&N.insertView(n),i[mr]|=64}(f,l,C,v);const N=vc(v,C),j=l[$e],ee=tu(j,C[Br]);return null!==ee&&function gd(n,i,o,l,f,v){l[Wi]=f,l[Qi]=i,zc(n,l,o,1,f,v)}(f,C[Qi],j,l,ee,N),i.attachToViewContainerRef(),js(vv(C),v,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=DE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=ne(this._lContainer,o);l&&(va(vv(this._lContainer),o),fe(l[en],l))}detach(i){const o=this._adjustIndex(i,-1),l=ne(this._lContainer,o);return l&&null!=va(vv(this._lContainer),o)?new Nh(l):null}_adjustIndex(i,o=0){return i??this.length+o}};function DE(n){return n[vr]}function vv(n){return n[vr]||(n[vr]=[])}function TE(n,i){let o;const l=i[n.index];if(_i(l))o=l;else{let f;if(8&n.type)f=hi(l);else{const v=i[$e];f=v.createComment("");const C=xr(n,i);Zr(v,tu(v,C),f,function bl(n,i){return n.nextSibling(i)}(v,C),!1)}i[n.index]=o=bm(l,i,f,n),ld(i,o)}return new CE(o,n,i)}class Ev{constructor(i){this.queryList=i,this.matches=null}clone(){return new Ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class wv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,f=[];for(let v=0;v<l;v++){const C=o.getByIndex(v);f.push(this.queries[C.indexInDeclarationView].clone())}return new wv(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==kE(i,o).matches&&this.queries[o].setDirty()}}class SE{constructor(i,o,l=null){this.predicate=i,this.flags=o,this.read=l}}class Iv{constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const f=null!==o?o.length:0,v=this.getByIndex(l).embeddedTView(i,f);v&&(v.indexInDeclarationView=l,null!==o?o.push(v):o=[v])}return null!==o?new Iv(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class bv{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new bv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const v=l[f];this.matchTNodeWithReadOption(i,o,fw(o,v)),this.matchTNodeWithReadOption(i,o,Ku(o,i,v,!1,!1))}else l===nm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Ku(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===ur||f===Ry||f===nm&&4&o.type)this.addMatch(o.index,-2);else{const v=Ku(o,i,f,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function fw(n,i){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function gw(n,i,o,l){return-1===o?function pw(n,i){return 11&n.type?Fn(n,i):4&n.type?Ay(n,i):null}(i,n):-2===o?function mw(n,i,o){return o===ur?Fn(i,n):o===nm?Ay(i,n):o===Ry?TE(i,n):void 0}(n,i,l):zr(n,n[en],o,i)}function AE(n,i,o,l){const f=i[Es].queries[l];if(null===f.matches){const v=n.data,C=o.matches,N=[];for(let j=0;j<C.length;j+=2){const ee=C[j];N.push(ee<0?null:gw(i,v[ee],C[j+1],o.metadata.read))}f.matches=N}return f.matches}function Cv(n,i,o,l){const f=n.queries.getByIndex(o),v=f.matches;if(null!==v){const C=AE(n,i,f,o);for(let N=0;N<v.length;N+=2){const j=v[N];if(j>0)l.push(C[N/2]);else{const ee=v[N+1],de=i[-j];for(let Ae=Mr;Ae<de.length;Ae++){const nt=de[Ae];nt[ti]===nt[oi]&&Cv(nt[en],nt,ee,l)}if(null!==de[As]){const Ae=de[As];for(let nt=0;nt<Ae.length;nt++){const vt=Ae[nt];Cv(vt[en],vt,ee,l)}}}}}return l}function RE(n){const i=L(),o=H(),l=fa();Ki(l+1);const f=kE(o,l);if(n.dirty&&function wo(n){return 4==(4&n[mr])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?Cv(o,i,l,[]):AE(o,i,f,l);n.reset(v,Zi),n.notifyOnChanges()}return!0}return!1}function ME(n,i,o){const l=H();l.firstCreatePass&&(OE(l,new SE(n,i,o),-1),2==(2&i)&&(l.staticViewQueries=!0)),NE(l,L(),i)}function PE(n,i,o,l){const f=H();if(f.firstCreatePass){const v=st();OE(f,new SE(i,o,l),v.index),function _w(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(f,n),2==(2&o)&&(f.staticContentQueries=!0)}NE(f,L(),o)}function xE(){return function yw(n,i){return n[Es].queries[i].queryList}(L(),fa())}function NE(n,i,o){const l=new _v(4==(4&o));iu(n,i,l,l.destroy),null===i[Es]&&(i[Es]=new wv),i[Es].queries.push(new Ev(l))}function OE(n,i,o){null===n.queries&&(n.queries=new Iv),n.queries.track(new bv(i,o))}function kE(n,i){return n.queries.getByIndex(i)}function Dv(n){return!!ns(n)}function Py(...n){}const JE=new ci("Application Initializer");let xy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Py,this.reject=Py,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(vf(v))o.push(v);else if(Hh(v)){const C=new Promise((N,j)=>{v.subscribe({complete:N,error:j})});o.push(C)}}Promise.all(o).then(()=>{l()}).catch(f=>{this.reject(f)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(an(JE,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e0=new ci("AppId",{providedIn:"root",factory:function t0(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n0=new ci("Platform Initializer"),Uw=new ci("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bw=new ci("AnimationModuleType");let jw=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ny=new ci("LocaleId",{providedIn:"root",factory:()=>Di(Ny,Xt.Optional|Xt.SkipSelf)||function $w(){return typeof $localize<"u"&&$localize.locale||fd}()}),Hw=new ci("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zw{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let Ww=(()=>{class n{compileModuleSync(o){return new pv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),v=Qc(ns(o).declarations).reduce((C,N)=>{const j=In(N);return j&&C.push(new ih(j)),C},[]);return new zw(l,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qw=(()=>Promise.resolve(0))();function Pv(n){typeof Zone>"u"?qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ed{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wd(!1),this.onMicrotaskEmpty=new Wd(!1),this.onStable=new Wd(!1),this.onError=new Wd(!1),typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&o,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Zw(){let n=Yn.requestAnimationFrame,i=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xw(n){const i=()=>{!function Qw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Nv(n),n.isCheckStableRunning=!0,xv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Nv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,f,v,C,N)=>{try{return o0(n),o.invokeTask(f,v,C,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),a0(n)}},onInvoke:(o,l,f,v,C,N,j)=>{try{return o0(n),o.invoke(f,v,C,N,j)}finally{n.shouldCoalesceRunChangeDetection&&i(),a0(n)}},onHasTask:(o,l,f,v)=>{o.hasTask(f,v),l===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,Nv(n),xv(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,l,f,v)=>(o.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ed.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(ed.isInAngularZone())throw new ct(909,!1)}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,f){const v=this._inner,C=v.scheduleEventTask("NgZoneEvent: "+f,i,Yw,Py,Py);try{return v.runTask(C,o,l)}finally{v.cancelTask(C)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const Yw={};function xv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Nv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function o0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function a0(n){n._nesting--,xv(n)}class Jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wd,this.onMicrotaskEmpty=new Wd,this.onStable=new Wd,this.onError=new Wd}run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,f){return i.apply(o,l)}}const l0=new ci(""),u0=new ci("");let Ov,eI=(()=>{class n{constructor(o,l,f){this._ngZone=o,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ov||(function tI(n){Ov=n}(f),f.addToWindow(l)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ed.assertNotInAngularZone(),Pv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,f){let v=-1;l&&l>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:f})}whenStable(o,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,l,f){return[]}}return n.\u0275fac=function(o){return new(o||n)(an(ed),an(c0),an(u0))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),c0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return Ov?.findTestabilityInTree(this,o,l)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const gh=!1;let Zh=null;const d0=new ci("AllowMultipleToken"),kv=new ci("PlatformDestroyListeners"),h0=new ci("appBootstrapListener");class iI{constructor(i,o){this.name=i,this.token=o}}function p0(n,i,o=[]){const l=`Platform: ${i}`,f=new ci(l);return(v=[])=>{let C=Lv();if(!C||C.injector.get(d0,!1)){const N=[...o,...v,{provide:f,useValue:!0}];n?n(N):function sI(n){if(Zh&&!Zh.get(d0,!1))throw new ct(400,!1);Zh=n;const i=n.get(m0);(function f0(n){const i=n.get(n0,null);i&&i.forEach(o=>o())})(n)}(function g0(n=[],i){return eh.create({name:i,providers:[{provide:Dd,useValue:"platform"},{provide:kv,useValue:new Set([()=>Zh=null])},...n]})}(N,l))}return function aI(n){const i=Lv();if(!i)throw new ct(401,!1);return i}()}}function Lv(){return Zh?.get(m0)??null}let m0=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const f=function _0(n,i){let o;return o="noop"===n?new Jw:("zone.js"===n?void 0:n)||new ed(i),o}(l?.ngZone,function y0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),v=[{provide:ed,useValue:f}];return f.run(()=>{const C=eh.create({providers:v,parent:this.injector,name:o.moduleType.name}),N=o.create(C),j=N.injector.get(Rd,null);if(!j)throw new ct(402,!1);return f.runOutsideAngular(()=>{const ee=f.onError.subscribe({next:de=>{j.handleError(de)}});N.onDestroy(()=>{ky(this._modules,N),ee.unsubscribe()})}),function v0(n,i,o){try{const l=o();return vf(l)?l.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(j,f,()=>{const ee=N.injector.get(xy);return ee.runInitializers(),ee.donePromise.then(()=>(function Xg(n){ut(n,"Expected localeId to be defined"),"string"==typeof n&&(Qg=n.toLowerCase().replace(/_/g,"-"))}(N.injector.get(Ny,fd)||fd),this._moduleDoBootstrap(N),N))})})}bootstrapModule(o,l=[]){const f=E0({},l);return function nI(n,i,o){const l=new pv(o);return Promise.resolve(l)}(0,0,o).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(o){const l=o.injector.get(Oy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!o.instance.ngDoBootstrap)throw new ct(-403,!1);o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ct(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(kv,null);o&&(o.forEach(l=>l()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(an(eh))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function E0(n,i){return Array.isArray(i)?i.reduce(E0,n):{...n,...i}}let Oy=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,l,f){this._zone=o,this._injector=l,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),C=new z.y(N=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{ed.assertNotInAngularZone(),Pv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const ee=this._zone.onUnstable.subscribe(()=>{ed.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{j.unsubscribe(),ee.unsubscribe()}});this.isStable=(0,Le.T)(v,C.pipe((0,Se.B)()))}bootstrap(o,l){const f=o instanceof q;if(!this._injector.get(xy).done){!f&&Ui(o);throw new ct(405,gh)}let C;C=f?o:this._injector.get(kt).resolveComponentFactory(o),this.componentTypes.push(C.componentType);const N=function rI(n){return n.isBoundToModule}(C)?void 0:this._injector.get(Up),ee=C.create(eh.NULL,[],l||C.selector,N),de=ee.location.nativeElement,Ae=ee.injector.get(l0,null);return Ae?.registerApplication(de),ee.onDestroy(()=>{this.detachView(ee.hostView),ky(this.components,ee),Ae?.unregisterApplication(de)}),this._loadComponent(ee),ee}tick(){if(this._runningTick)throw new ct(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;ky(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const l=this._injector.get(h0,[]);l.push(...this._bootstrapListeners),l.forEach(f=>f(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ky(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ct(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(an(ed),an(Wl),an(Rd))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ky(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function uI(){return!1}let cI=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();function dI(n){return function hI(n,i,o){if(Tr(n)&&!o){const l=rs(n.index,i);return new Nh(l,l)}return 47&n.type?new Nh(i[tr],i):null}(st(),L(),16==(16&n))}class D0{constructor(){}supports(i){return Fh(i)}create(i){return new _I(i)}}const yI=(n,i)=>i;class _I{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||yI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,f=0,v=null;for(;o||l;){const C=!l||o&&o.currentIndex<S0(l,f,v)?o:l,N=S0(C,f,v),j=C.currentIndex;if(C===l)f--,l=l._nextRemoved;else if(o=o._next,null==C.previousIndex)f++;else{v||(v=[]);const ee=N-f,de=j-f;if(ee!=de){for(let nt=0;nt<ee;nt++){const vt=nt<v.length?v[nt]:v[nt]=0,jt=vt+nt;de<=jt&&jt<ee&&(v[nt]=vt+1)}v[C.previousIndex]=de-ee}}N!==j&&i(C,N,j)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Fh(i))throw new ct(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,v,C,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)v=i[N],C=this._trackByFn(N,v),null!==o&&Object.is(o.trackById,C)?(l&&(o=this._verifyReinsertion(o,v,C,N)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,C,N),l=!0),o=o._next}else f=0,function v_(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,N=>{C=this._trackByFn(f,N),null!==o&&Object.is(o.trackById,C)?(l&&(o=this._verifyReinsertion(o,N,C,f)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,C,f),l=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,f){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,v,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,v,f)):i=this._addAfter(new vI(o,l),v,f),i}_verifyReinsertion(i,o,l,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==v?i=this._reinsertAfter(v,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,v=i._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const f=null===o?this._itHead:o._next;return i._next=f,i._prev=o,null===f?this._itTail=i:f._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new T0),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new T0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class vI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class T0{constructor(){this.map=new Map}put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new EI,this.map.set(o,l)),l.add(i)}get(i,o){const f=this.map.get(i);return f?f.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function S0(n,i,o){const l=n.previousIndex;if(null===l)return l;let f=0;return o&&l<o.length&&(f=o[l]),l+i+f}class A0{constructor(){}supports(i){return i instanceof Map||mf(i)}create(){return new wI}}class wI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||mf(i)))throw new ct(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,f)=>{if(o&&o.key===f)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(f,l);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,o);const v=f._prev,C=f._next;return v&&(v._next=C),C&&(C._prev=v),f._next=null,f._prev=null,f}const l=new II(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class II{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function R0(){return new jv([new D0])}let jv=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const f=l.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||R0()),deps:[[n,new gl,new Fa]]}}find(o){const l=this.factories.find(f=>f.supports(o));if(null!=l)return l;throw new ct(901,!1)}}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:R0}),n})();function M0(){return new $v([new A0])}let $v=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const f=l.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||M0()),deps:[[n,new gl,new Fa]]}}find(o){const l=this.factories.find(f=>f.supports(o));if(l)return l;throw new ct(901,!1)}}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:M0}),n})();const DI=p0(null,"core",[]);let TI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(an(Oy))},n.\u0275mod=ot({type:n}),n.\u0275inj=Cn({}),n})();function SI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(fn,lt,K)=>{K.d(lt,{Fj:()=>Ze,qu:()=>Na,u:()=>io,sg:()=>Pa,u5:()=>na,JJ:()=>Yn,JL:()=>er,On:()=>As,YN:()=>re,UX:()=>Ml,Q7:()=>ks,EJ:()=>X,kI:()=>on,_Y:()=>Mr,Kr:()=>xn});var _=K(4650),ie=K(6895),z=K(8996),Le=K(9751),Se=K(4742),je=K(8421),Ge=K(7669),Ie=K(5403),Qe=K(3268),he=K(1810),Oe=K(4004);let dt=(()=>{class L{constructor(B,le){this._renderer=B,this._elementRef=le,this.onChange=st=>{},this.onTouched=()=>{}}setProperty(B,le){this._renderer.setProperty(this._elementRef.nativeElement,B,le)}registerOnTouched(B){this.onTouched=B}registerOnChange(B){this.onChange=B}setDisabledState(B){this.setProperty("disabled",B)}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(_.Qsj),_.Y36(_.SBq))},L.\u0275dir=_.lG2({type:L}),L})(),ht=(()=>{class L extends dt{}return L.\u0275fac=function(){let H;return function(le){return(H||(H=_.n5z(L)))(le||L)}}(),L.\u0275dir=_.lG2({type:L,features:[_.qOj]}),L})();const Mt=new _.OlP("NgValueAccessor"),_t={provide:Mt,useExisting:(0,_.Gpc)(()=>Ze),multi:!0},It=new _.OlP("CompositionEventMode");let Ze=(()=>{class L extends dt{constructor(B,le,st){super(B,le),this._compositionMode=st,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function At(){const L=(0,ie.q)()?(0,ie.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(B){this.setProperty("value",B??"")}_handleInput(B){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(B)}_compositionStart(){this._composing=!0}_compositionEnd(B){this._composing=!1,this._compositionMode&&this.onChange(B)}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(It,8))},L.\u0275dir=_.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(B,le){1&B&&_.NdJ("input",function(Nn){return le._handleInput(Nn.target.value)})("blur",function(){return le.onTouched()})("compositionstart",function(){return le._compositionStart()})("compositionend",function(Nn){return le._compositionEnd(Nn.target.value)})},features:[_._Bn([_t]),_.qOj]}),L})();const Pe=!1;function at(L){return null==L||("string"==typeof L||Array.isArray(L))&&0===L.length}function Lt(L){return null!=L&&"number"==typeof L.length}const gt=new _.OlP("NgValidators"),Y=new _.OlP("NgAsyncValidators"),$t=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class on{static min(H){return function Yt(L){return H=>{if(at(H.value)||at(L))return null;const B=parseFloat(H.value);return!isNaN(B)&&B<L?{min:{min:L,actual:H.value}}:null}}(H)}static max(H){return function Zt(L){return H=>{if(at(H.value)||at(L))return null;const B=parseFloat(H.value);return!isNaN(B)&&B>L?{max:{max:L,actual:H.value}}:null}}(H)}static required(H){return Gt(H)}static requiredTrue(H){return function Wr(L){return!0===L.value?null:{required:!0}}(H)}static email(H){return function br(L){return at(L.value)||$t.test(L.value)?null:{email:!0}}(H)}static minLength(H){return function Vn(L){return H=>at(H.value)||!Lt(H.value)?null:H.value.length<L?{minlength:{requiredLength:L,actualLength:H.value.length}}:null}(H)}static maxLength(H){return function Jn(L){return H=>Lt(H.value)&&H.value.length>L?{maxlength:{requiredLength:L,actualLength:H.value.length}}:null}(H)}static pattern(H){return function Ke(L){if(!L)return Ye;let H,B;return"string"==typeof L?(B="","^"!==L.charAt(0)&&(B+="^"),B+=L,"$"!==L.charAt(L.length-1)&&(B+="$"),H=new RegExp(B)):(B=L.toString(),H=L),le=>{if(at(le.value))return null;const st=le.value;return H.test(st)?null:{pattern:{requiredPattern:B,actualValue:st}}}}(H)}static nullValidator(H){return null}static compose(H){return nn(H)}static composeAsync(H){return On(H)}}function Gt(L){return at(L.value)?{required:!0}:null}function Ye(L){return null}function ut(L){return null!=L}function ze(L){const H=(0,_.QGY)(L)?(0,z.D)(L):L;if(Pe&&!(0,_.CqO)(H)){let B="Expected async validator to return Promise or Observable.";throw"object"==typeof L&&(B+=" Are you using a synchronous validator where an async validator is expected?"),new _.vHH(-1101,B)}return H}function mt(L){let H={};return L.forEach(B=>{H=null!=B?{...H,...B}:H}),0===Object.keys(H).length?null:H}function Ot(L,H){return H.map(B=>B(L))}function Rt(L){return L.map(H=>function Qt(L){return!L.validate}(H)?H:B=>H.validate(B))}function nn(L){if(!L)return null;const H=L.filter(ut);return 0==H.length?null:function(B){return mt(Ot(B,H))}}function Cn(L){return null!=L?nn(Rt(L)):null}function On(L){if(!L)return null;const H=L.filter(ut);return 0==H.length?null:function(B){return function we(...L){const H=(0,Ge.jO)(L),{args:B,keys:le}=(0,Se.D)(L),st=new Le.y(Nn=>{const{length:Ni}=B;if(!Ni)return void Nn.complete();const ls=new Array(Ni);let Qo=Ni,No=Ni;for(let ol=0;ol<Ni;ol++){let To=!1;(0,je.Xf)(B[ol]).subscribe((0,Ie.x)(Nn,Oo=>{To||(To=!0,No--),ls[ol]=Oo},()=>Qo--,void 0,()=>{(!Qo||!To)&&(No||Nn.next(le?(0,he.n)(le,ls):ls),Nn.complete())}))}});return H?st.pipe((0,Qe.Z)(H)):st}(Ot(B,H).map(ze)).pipe((0,Oe.U)(mt))}}function gr(L){return null!=L?On(Rt(L)):null}function Qn(L,H){return null===L?[H]:Array.isArray(L)?[...L,H]:[L,H]}function _r(L){return L._rawValidators}function Cr(L){return L._rawAsyncValidators}function Hr(L){return L?Array.isArray(L)?L:[L]:[]}function Er(L,H){return Array.isArray(L)?L.includes(H):L===H}function Gr(L,H){const B=Hr(H);return Hr(L).forEach(st=>{Er(B,st)||B.push(st)}),B}function Pn(L,H){return Hr(H).filter(B=>!Er(L,B))}class Xt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=Cn(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=gr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,B){return!!this.control&&this.control.hasError(H,B)}getError(H,B){return this.control?this.control.getError(H,B):null}}class Hn extends Xt{get formDirective(){return null}get path(){return null}}class yi extends Xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dr{constructor(H){this._cd=H}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Yn=(()=>{class L extends Dr{constructor(B){super(B)}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(yi,2))},L.\u0275dir=_.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(B,le){2&B&&_.ekj("ng-untouched",le.isUntouched)("ng-touched",le.isTouched)("ng-pristine",le.isPristine)("ng-dirty",le.isDirty)("ng-valid",le.isValid)("ng-invalid",le.isInvalid)("ng-pending",le.isPending)},features:[_.qOj]}),L})(),er=(()=>{class L extends Dr{constructor(B){super(B)}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(Hn,10))},L.\u0275dir=_.lG2({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(B,le){2&B&&_.ekj("ng-untouched",le.isUntouched)("ng-touched",le.isTouched)("ng-pristine",le.isPristine)("ng-dirty",le.isDirty)("ng-valid",le.isValid)("ng-invalid",le.isInvalid)("ng-pending",le.isPending)("ng-submitted",le.isSubmitted)},features:[_.qOj]}),L})();function Jr(L,H){return L?`with name: '${H}'`:`at index: ${H}`}const ss=!1,Pi="VALID",Vi="INVALID",Ne="PENDING",Re="DISABLED";function ce(L){return(be(L)?L.validators:L)||null}function oe(L,H){return(be(H)?H.asyncValidators:L)||null}function be(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}function De(L,H,B){const le=L.controls;if(!(H?Object.keys(le):le).length)throw new _.vHH(1e3,ss?function Di(L){return`\n    There are no form controls registered with this ${L?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(H):"");if(!le[B])throw new _.vHH(1001,ss?function Mi(L,H){return`Cannot find form control ${Jr(L,H)}`}(H,B):"")}function ve(L,H,B){L._forEachChild((le,st)=>{if(void 0===B[st])throw new _.vHH(1002,ss?function Yi(L,H){return`Must supply a value for form control ${Jr(L,H)}`}(H,st):"")})}class We{constructor(H,B){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(H),this._assignAsyncValidators(B)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===Pi}get invalid(){return this.status===Vi}get pending(){return this.status==Ne}get disabled(){return this.status===Re}get enabled(){return this.status!==Re}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._assignValidators(H)}setAsyncValidators(H){this._assignAsyncValidators(H)}addValidators(H){this.setValidators(Gr(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(Gr(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Pn(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Pn(H,this._rawAsyncValidators))}hasValidator(H){return Er(this._rawValidators,H)}hasAsyncValidator(H){return Er(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(B=>{B.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(B=>{B.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=Ne,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const B=this._parentMarkedDirty(H.onlySelf);this.status=Re,this.errors=null,this._forEachChild(le=>{le.disable({...H,onlySelf:!0})}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...H,skipPristineCheck:B}),this._onDisabledChange.forEach(le=>le(!0))}enable(H={}){const B=this._parentMarkedDirty(H.onlySelf);this.status=Pi,this._forEachChild(le=>{le.enable({...H,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors({...H,skipPristineCheck:B}),this._onDisabledChange.forEach(le=>le(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}getRawValue(){return this.value}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pi||this.status===Ne)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(B=>B._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Re:Pi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=Ne,this._hasOwnPendingAsyncValidator=!0;const B=ze(this.asyncValidator(this));this._asyncValidationSubscription=B.subscribe(le=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(le,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,B={}){this.errors=H,this._updateControlsErrors(!1!==B.emitEvent)}get(H){let B=H;return null==B||(Array.isArray(B)||(B=B.split(".")),0===B.length)?null:B.reduce((le,st)=>le&&le._find(st),this)}getError(H,B){const le=B?this.get(B):this;return le&&le.errors?le.errors[H]:null}hasError(H,B){return!!this.getError(H,B)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Re:this.errors?Vi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ne)?Ne:this._anyControlsHaveStatus(Vi)?Vi:Pi}_anyControlsHaveStatus(H){return this._anyControls(B=>B.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){be(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(H){return null}_assignValidators(H){this._rawValidators=Array.isArray(H)?H.slice():H,this._composedValidatorFn=function ye(L){return Array.isArray(L)?Cn(L):L||null}(this._rawValidators)}_assignAsyncValidators(H){this._rawAsyncValidators=Array.isArray(H)?H.slice():H,this._composedAsyncValidatorFn=function Be(L){return Array.isArray(L)?gr(L):L||null}(this._rawAsyncValidators)}}class it extends We{constructor(H,B,le){super(ce(B),oe(le,B)),this.controls=H,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,B){return this.controls[H]?this.controls[H]:(this.controls[H]=B,B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange),B)}addControl(H,B,le={}){this.registerControl(H,B),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}removeControl(H,B={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}setControl(H,B,le={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],B&&this.registerControl(H,B),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,B={}){ve(this,!0,H),Object.keys(H).forEach(le=>{De(this,!0,le),this.controls[le].setValue(H[le],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(H,B={}){null!=H&&(Object.keys(H).forEach(le=>{const st=this.controls[le];st&&st.patchValue(H[le],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(H={},B={}){this._forEachChild((le,st)=>{le.reset(H[st],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this._reduceChildren({},(H,B,le)=>(H[le]=B.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(B,le)=>!!le._syncPendingControls()||B);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){Object.keys(this.controls).forEach(B=>{const le=this.controls[B];le&&H(le,B)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const[B,le]of Object.entries(this.controls))if(this.contains(B)&&H(le))return!0;return!1}_reduceValue(){return this._reduceChildren({},(B,le,st)=>((le.enabled||this.disabled)&&(B[st]=le.value),B))}_reduceChildren(H,B){let le=H;return this._forEachChild((st,Nn)=>{le=B(le,st,Nn)}),le}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(H){return this.controls.hasOwnProperty(H)?this.controls[H]:null}}class Tn extends it{}const os=new _.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Et}),Et="always";function ot(L,H){return[...H.path,L]}function zt(L,H,B=Et){In(L,H),H.valueAccessor.writeValue(L.value),(L.disabled||"always"===B)&&H.valueAccessor.setDisabledState?.(L.disabled),function kr(L,H){H.valueAccessor.registerOnChange(B=>{L._pendingValue=B,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&ns(L,H)})}(L,H),function ea(L,H){const B=(le,st)=>{H.valueAccessor.writeValue(le),st&&H.viewToModelUpdate(le)};L.registerOnChange(B),H._registerOnDestroy(()=>{L._unregisterOnChange(B)})}(L,H),function Ui(L,H){H.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&ns(L,H),"submit"!==L.updateOn&&L.markAsTouched()})}(L,H),function hr(L,H){if(H.valueAccessor.setDisabledState){const B=le=>{H.valueAccessor.setDisabledState(le)};L.registerOnDisabledChange(B),H._registerOnDestroy(()=>{L._unregisterOnDisabledChange(B)})}}(L,H)}function yn(L,H,B=!0){const le=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(le),H.valueAccessor.registerOnTouched(le)),Ur(L,H),L&&(H._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function zn(L,H){L.forEach(B=>{B.registerOnValidatorChange&&B.registerOnValidatorChange(H)})}function In(L,H){const B=_r(L);null!==H.validator?L.setValidators(Qn(B,H.validator)):"function"==typeof B&&L.setValidators([B]);const le=Cr(L);null!==H.asyncValidator?L.setAsyncValidators(Qn(le,H.asyncValidator)):"function"==typeof le&&L.setAsyncValidators([le]);const st=()=>L.updateValueAndValidity();zn(H._rawValidators,st),zn(H._rawAsyncValidators,st)}function Ur(L,H){let B=!1;if(null!==L){if(null!==H.validator){const st=_r(L);if(Array.isArray(st)&&st.length>0){const Nn=st.filter(Ni=>Ni!==H.validator);Nn.length!==st.length&&(B=!0,L.setValidators(Nn))}}if(null!==H.asyncValidator){const st=Cr(L);if(Array.isArray(st)&&st.length>0){const Nn=st.filter(Ni=>Ni!==H.asyncValidator);Nn.length!==st.length&&(B=!0,L.setAsyncValidators(Nn))}}}const le=()=>{};return zn(H._rawValidators,le),zn(H._rawAsyncValidators,le),B}function ns(L,H){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function as(L,H){if(!L.hasOwnProperty("model"))return!1;const B=L.model;return!!B.isFirstChange()||!Object.is(H,B.currentValue)}function ei(L,H){if(!H)return null;let B,le,st;return Array.isArray(H),H.forEach(Nn=>{Nn.constructor===Ze?B=Nn:function Qi(L){return Object.getPrototypeOf(L.constructor)===ht}(Nn)?le=Nn:st=Nn}),st||le||B||null}function Kn(L,H){const B=L.indexOf(H);B>-1&&L.splice(B,1)}function Sr(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const tr=class extends We{constructor(H=null,B,le){super(ce(B),oe(le,B)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(B),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),be(B)&&(B.nonNullable||B.initialValueIsDefault)&&(this.defaultValue=Sr(H)?H.value:H)}setValue(H,B={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==B.emitModelToViewChange&&this._onChange.forEach(le=>le(this.value,!1!==B.emitViewToModelChange)),this.updateValueAndValidity(B)}patchValue(H,B={}){this.setValue(H,B)}reset(H=this.defaultValue,B={}){this._applyFormState(H),this.markAsPristine(B),this.markAsUntouched(B),this.setValue(this.value,B),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){Kn(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){Kn(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){Sr(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}},Br={provide:yi,useExisting:(0,_.Gpc)(()=>As)},vr=(()=>Promise.resolve())();let As=(()=>{class L extends yi{constructor(B,le,st,Nn,Ni,ls){super(),this._changeDetectorRef=Ni,this.callSetDisabledState=ls,this.control=new tr,this._registered=!1,this.update=new _.vpe,this._parent=B,this._setValidators(le),this._setAsyncValidators(st),this.valueAccessor=ei(0,Nn)}ngOnChanges(B){if(this._checkForErrors(),!this._registered||"name"in B){if(this._registered&&(this._checkName(),this.formDirective)){const le=B.name.previousValue;this.formDirective.removeControl({name:le,path:this._getPath(le)})}this._setUpControl()}"isDisabled"in B&&this._updateDisabled(B),as(B,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(B){vr.then(()=>{this.control.setValue(B,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(B){const le=B.isDisabled.currentValue,st=0!==le&&(0,_.D6c)(le);vr.then(()=>{st&&!this.control.disabled?this.control.disable():!st&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(B){return this._parent?ot(B,this._parent):[B]}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(Hn,9),_.Y36(gt,10),_.Y36(Y,10),_.Y36(Mt,10),_.Y36(_.sBO,8),_.Y36(os,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([Br]),_.qOj,_.TTD]}),L})(),Mr=(()=>{class L{}return L.\u0275fac=function(B){return new(B||L)},L.\u0275dir=_.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),L})(),Tr=(()=>{class L{}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})();const Bi=new _.OlP("NgModelWithFormControlWarning"),Yo={provide:Hn,useExisting:(0,_.Gpc)(()=>Pa)};let Pa=(()=>{class L extends Hn{constructor(B,le,st){super(),this.callSetDisabledState=st,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(B),this._setAsyncValidators(le)}ngOnChanges(B){this._checkFormPresent(),B.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ur(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(B){const le=this.form.get(B.path);return zt(le,B,this.callSetDisabledState),le.updateValueAndValidity({emitEvent:!1}),this.directives.push(B),le}getControl(B){return this.form.get(B.path)}removeControl(B){yn(B.control||null,B,!1),function Je(L,H){const B=L.indexOf(H);B>-1&&L.splice(B,1)}(this.directives,B)}addFormGroup(B){this._setUpFormContainer(B)}removeFormGroup(B){this._cleanUpFormContainer(B)}getFormGroup(B){return this.form.get(B.path)}addFormArray(B){this._setUpFormContainer(B)}removeFormArray(B){this._cleanUpFormContainer(B)}getFormArray(B){return this.form.get(B.path)}updateModel(B,le){this.form.get(B.path).setValue(le)}onSubmit(B){return this.submitted=!0,function qs(L,H){L._syncPendingControls(),H.forEach(B=>{const le=B.control;"submit"===le.updateOn&&le._pendingChange&&(B.viewToModelUpdate(le._pendingValue),le._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(B),"dialog"===B?.target?.method}onReset(){this.resetForm()}resetForm(B){this.form.reset(B),this.submitted=!1}_updateDomValue(){this.directives.forEach(B=>{const le=B.control,st=this.form.get(B.path);le!==st&&(yn(le||null,B),(L=>L instanceof tr)(st)&&(zt(st,B,this.callSetDisabledState),B.control=st))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(B){const le=this.form.get(B.path);(function Lr(L,H){In(L,H)})(le,B),le.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(B){if(this.form){const le=this.form.get(B.path);le&&function Ks(L,H){return Ur(L,H)}(le,B)&&le.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&Ur(this._oldForm,this)}_checkFormPresent(){}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(gt,10),_.Y36(Y,10),_.Y36(os,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","formGroup",""]],hostBindings:function(B,le){1&B&&_.NdJ("submit",function(Nn){return le.onSubmit(Nn)})("reset",function(){return le.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Yo]),_.qOj,_.TTD]}),L})();const ha={provide:yi,useExisting:(0,_.Gpc)(()=>io)};let io=(()=>{class L extends yi{set isDisabled(B){}constructor(B,le,st,Nn,Ni){super(),this._ngModelWarningConfig=Ni,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=B,this._setValidators(le),this._setAsyncValidators(st),this.valueAccessor=ei(0,Nn)}ngOnChanges(B){this._added||this._setUpControl(),as(B,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}get path(){return ot(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return L._ngModelWarningSentOnce=!1,L.\u0275fac=function(B){return new(B||L)(_.Y36(Hn,13),_.Y36(gt,10),_.Y36(Y,10),_.Y36(Mt,10),_.Y36(Bi,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([ha]),_.qOj,_.TTD]}),L})();const ta={provide:Mt,useExisting:(0,_.Gpc)(()=>X),multi:!0};function Eo(L,H){return null==L?`${H}`:(H&&"object"==typeof H&&(H="Object"),`${L}: ${H}`.slice(0,50))}let X=(()=>{class L extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){this.value=B;const st=Eo(this._getOptionId(B),B);this.setProperty("value",st)}registerOnChange(B){this.onChange=le=>{this.value=this._getOptionValue(le),B(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(B){for(const le of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(le),B))return le;return null}_getOptionValue(B){const le=function zs(L){return L.split(":")[0]}(B);return this._optionMap.has(le)?this._optionMap.get(le):B}}return L.\u0275fac=function(){let H;return function(le){return(H||(H=_.n5z(L)))(le||L)}}(),L.\u0275dir=_.lG2({type:L,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(B,le){1&B&&_.NdJ("change",function(Nn){return le.onChange(Nn.target.value)})("blur",function(){return le.onTouched()})},inputs:{compareWith:"compareWith"},features:[_._Bn([ta]),_.qOj]}),L})(),re=(()=>{class L{constructor(B,le,st){this._element=B,this._renderer=le,this._select=st,this._select&&(this.id=this._select._registerOption())}set ngValue(B){null!=this._select&&(this._select._optionMap.set(this.id,B),this._setElementValue(Eo(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._setElementValue(B),this._select&&this._select.writeValue(this._select.value)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(X,9))},L.\u0275dir=_.lG2({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),L})();const Te={provide:Mt,useExisting:(0,_.Gpc)(()=>Kt),multi:!0};function Fe(L,H){return null==L?`${H}`:("string"==typeof H&&(H=`'${H}'`),H&&"object"==typeof H&&(H="Object"),`${L}: ${H}`.slice(0,50))}let Kt=(()=>{class L extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){let le;if(this.value=B,Array.isArray(B)){const st=B.map(Nn=>this._getOptionId(Nn));le=(Nn,Ni)=>{Nn._setSelected(st.indexOf(Ni.toString())>-1)}}else le=(st,Nn)=>{st._setSelected(!1)};this._optionMap.forEach(le)}registerOnChange(B){this.onChange=le=>{const st=[],Nn=le.selectedOptions;if(void 0!==Nn){const Ni=Nn;for(let ls=0;ls<Ni.length;ls++){const No=this._getOptionValue(Ni[ls].value);st.push(No)}}else{const Ni=le.options;for(let ls=0;ls<Ni.length;ls++){const Qo=Ni[ls];if(Qo.selected){const No=this._getOptionValue(Qo.value);st.push(No)}}}this.value=st,B(st)}}_registerOption(B){const le=(this._idCounter++).toString();return this._optionMap.set(le,B),le}_getOptionId(B){for(const le of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(le)._value,B))return le;return null}_getOptionValue(B){const le=function qe(L){return L.split(":")[0]}(B);return this._optionMap.has(le)?this._optionMap.get(le)._value:B}}return L.\u0275fac=function(){let H;return function(le){return(H||(H=_.n5z(L)))(le||L)}}(),L.\u0275dir=_.lG2({type:L,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(B,le){1&B&&_.NdJ("change",function(Nn){return le.onChange(Nn.target)})("blur",function(){return le.onTouched()})},inputs:{compareWith:"compareWith"},features:[_._Bn([Te]),_.qOj]}),L})(),xn=(()=>{class L{constructor(B,le,st){this._element=B,this._renderer=le,this._select=st,this._select&&(this.id=this._select._registerOption(this))}set ngValue(B){null!=this._select&&(this._value=B,this._setElementValue(Fe(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._select?(this._value=B,this._setElementValue(Fe(this.id,B)),this._select.writeValue(this._select.value)):this._setElementValue(B)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}_setSelected(B){this._renderer.setProperty(this._element.nativeElement,"selected",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return L.\u0275fac=function(B){return new(B||L)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(Kt,9))},L.\u0275dir=_.lG2({type:L,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),L})(),Pr=(()=>{class L{constructor(){this._validator=Ye}ngOnChanges(B){if(this.inputName in B){const le=this.normalizeInput(B[this.inputName].currentValue);this._enabled=this.enabled(le),this._validator=this._enabled?this.createValidator(le):Ye,this._onChange&&this._onChange()}}validate(B){return this._validator(B)}registerOnValidatorChange(B){this._onChange=B}enabled(B){return null!=B}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275dir=_.lG2({type:L,features:[_.TTD]}),L})();const Vr={provide:gt,useExisting:(0,_.Gpc)(()=>ks),multi:!0};let ks=(()=>{class L extends Pr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_.D6c,this.createValidator=B=>Gt}enabled(B){return B}}return L.\u0275fac=function(){let H;return function(le){return(H||(H=_.n5z(L)))(le||L)}}(),L.\u0275dir=_.lG2({type:L,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(B,le){2&B&&_.uIk("required",le._enabled?"":null)},inputs:{required:"required"},features:[_._Bn([Vr]),_.qOj]}),L})(),fr=(()=>{class L{}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[Tr]}),L})();class so extends We{constructor(H,B,le){super(ce(B),oe(le,B)),this.controls=H,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[this._adjustIndex(H)]}push(H,B={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}insert(H,B,le={}){this.controls.splice(H,0,B),this._registerControl(B),this.updateValueAndValidity({emitEvent:le.emitEvent})}removeAt(H,B={}){let le=this._adjustIndex(H);le<0&&(le=0),this.controls[le]&&this.controls[le]._registerOnCollectionChange(()=>{}),this.controls.splice(le,1),this.updateValueAndValidity({emitEvent:B.emitEvent})}setControl(H,B,le={}){let st=this._adjustIndex(H);st<0&&(st=0),this.controls[st]&&this.controls[st]._registerOnCollectionChange(()=>{}),this.controls.splice(st,1),B&&(this.controls.splice(st,0,B),this._registerControl(B)),this.updateValueAndValidity({emitEvent:le.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,B={}){ve(this,!1,H),H.forEach((le,st)=>{De(this,!1,st),this.at(st).setValue(le,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(H,B={}){null!=H&&(H.forEach((le,st)=>{this.at(st)&&this.at(st).patchValue(le,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(H=[],B={}){this._forEachChild((le,st)=>{le.reset(H[st],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this.controls.map(H=>H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(B=>B._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_adjustIndex(H){return H<0?H+this.length:H}_syncPendingControls(){let H=this.controls.reduce((B,le)=>!!le._syncPendingControls()||B,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){this.controls.forEach((B,le)=>{H(B,le)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(B=>B.enabled&&H(B))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}_find(H){return this.at(H)??null}}function ji(L){return!!L&&(void 0!==L.asyncValidators||void 0!==L.validators||void 0!==L.updateOn)}let Na=(()=>{class L{constructor(){this.useNonNullable=!1}get nonNullable(){const B=new L;return B.useNonNullable=!0,B}group(B,le=null){const st=this._reduceControls(B);let Nn={};return ji(le)?Nn=le:null!==le&&(Nn.validators=le.validator,Nn.asyncValidators=le.asyncValidator),new it(st,Nn)}record(B,le=null){const st=this._reduceControls(B);return new Tn(st,le)}control(B,le,st){let Nn={};return this.useNonNullable?(ji(le)?Nn=le:(Nn.validators=le,Nn.asyncValidators=st),new tr(B,{...Nn,nonNullable:!0})):new tr(B,le,st)}array(B,le,st){const Nn=B.map(Ni=>this._createControl(Ni));return new so(Nn,le,st)}_reduceControls(B){const le={};return Object.keys(B).forEach(st=>{le[st]=this._createControl(B[st])}),le}_createControl(B){return B instanceof tr||B instanceof We?B:Array.isArray(B)?this.control(B[0],B.length>1?B[1]:null,B.length>2?B[2]:null):this.control(B)}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),na=(()=>{class L{static withConfig(B){return{ngModule:L,providers:[{provide:os,useValue:B.callSetDisabledState??Et}]}}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[fr]}),L})(),Ml=(()=>{class L{static withConfig(B){return{ngModule:L,providers:[{provide:Bi,useValue:B.warnOnNgModelWithFormControl??"always"},{provide:os,useValue:B.callSetDisabledState??Et}]}}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[fr]}),L})()},1481:(fn,lt,K)=>{K.d(lt,{Dx:()=>er,b2:()=>yi,q6:()=>Gr,se:()=>Gt});var _=K(6895),ie=K(4650);class z extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Le extends z{static makeCurrent(){(0,_.HT)(new Le)}onAndCancel(De,ve,We){return De.addEventListener(ve,We,!1),()=>{De.removeEventListener(ve,We,!1)}}dispatchEvent(De,ve){De.dispatchEvent(ve)}remove(De){De.parentNode&&De.parentNode.removeChild(De)}createElement(De,ve){return(ve=ve||this.getDefaultDocument()).createElement(De)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(De){return De.nodeType===Node.ELEMENT_NODE}isShadowRoot(De){return De instanceof DocumentFragment}getGlobalEventTarget(De,ve){return"window"===ve?window:"document"===ve?De:"body"===ve?De.body:null}getBaseHref(De){const ve=function je(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==ve?null:function Ie(be){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",be);const De=Ge.pathname;return"/"===De.charAt(0)?De:`/${De}`}(ve)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(De){return(0,_.Mx)(document.cookie,De)}}let Ge,Se=null;const Qe=new ie.OlP("TRANSITION_ID"),we=[{provide:ie.ip1,useFactory:function he(be,De,ve){return()=>{ve.get(ie.CZH).donePromise.then(()=>{const We=(0,_.q)(),it=De.querySelectorAll(`style[ng-transition="${be}"]`);for(let Pt=0;Pt<it.length;Pt++)We.remove(it[Pt])})}},deps:[Qe,_.K0,ie.zs3],multi:!0}];let dt=(()=>{class be{build(){return new XMLHttpRequest}}return be.\u0275fac=function(ve){return new(ve||be)},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();const ht=new ie.OlP("EventManagerPlugins");let Mt=(()=>{class be{constructor(ve,We){this._zone=We,this._eventNameToPlugin=new Map,ve.forEach(it=>{it.manager=this}),this._plugins=ve.slice().reverse()}addEventListener(ve,We,it){return this._findPluginFor(We).addEventListener(ve,We,it)}addGlobalEventListener(ve,We,it){return this._findPluginFor(We).addGlobalEventListener(ve,We,it)}getZone(){return this._zone}_findPluginFor(ve){const We=this._eventNameToPlugin.get(ve);if(We)return We;const it=this._plugins;for(let Pt=0;Pt<it.length;Pt++){const Dn=it[Pt];if(Dn.supports(ve))return this._eventNameToPlugin.set(ve,Dn),Dn}throw new Error(`No event manager plugin found for event ${ve}`)}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(ht),ie.LFG(ie.R0b))},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();class qt{constructor(De){this._doc=De}addGlobalEventListener(De,ve,We){const it=(0,_.q)().getGlobalEventTarget(this._doc,De);if(!it)throw new Error(`Unsupported event target ${it} for event ${ve}`);return this.addEventListener(it,ve,We)}}let ct=(()=>{class be{constructor(){this.usageCount=new Map}addStyles(ve){for(const We of ve)1===this.changeUsageCount(We,1)&&this.onStyleAdded(We)}removeStyles(ve){for(const We of ve)0===this.changeUsageCount(We,-1)&&this.onStyleRemoved(We)}onStyleRemoved(ve){}onStyleAdded(ve){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ve,We){const it=this.usageCount;let Pt=it.get(ve)??0;return Pt+=We,Pt>0?it.set(ve,Pt):it.delete(ve),Pt}ngOnDestroy(){for(const ve of this.getAllStyles())this.onStyleRemoved(ve);this.usageCount.clear()}}return be.\u0275fac=function(ve){return new(ve||be)},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})(),_t=(()=>{class be extends ct{constructor(ve){super(),this.doc=ve,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ve){for(const We of this.hostNodes)this.addStyleToHost(We,ve)}onStyleRemoved(ve){const We=this.styleRef;We.get(ve)?.forEach(Pt=>Pt.remove()),We.delete(ve)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ve){this.hostNodes.add(ve);for(const We of this.getAllStyles())this.addStyleToHost(ve,We)}removeHost(ve){this.hostNodes.delete(ve)}addStyleToHost(ve,We){const it=this.doc.createElement("style");it.textContent=We,ve.appendChild(it);const Pt=this.styleRef.get(We);Pt?Pt.push(it):this.styleRef.set(We,[it])}resetHostNodes(){const ve=this.hostNodes;ve.clear(),ve.add(this.doc.head)}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(_.K0))},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},It=/%COMP%/g,Y=new ie.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Yt(be,De){return De.flat(100).map(ve=>ve.replace(It,be))}function Zt(be){return De=>{if("__ngUnwrap__"===De)return be;!1===be(De)&&(De.preventDefault(),De.returnValue=!1)}}let Gt=(()=>{class be{constructor(ve,We,it,Pt){this.eventManager=ve,this.sharedStylesHost=We,this.appId=it,this.removeStylesOnCompDestory=Pt,this.rendererByCompId=new Map,this.defaultRenderer=new Wr(ve)}createRenderer(ve,We){if(!ve||!We)return this.defaultRenderer;const it=this.getOrCreateRenderer(ve,We);return it instanceof ut?it.applyToHost(ve):it instanceof Ye&&it.applyStyles(),it}getOrCreateRenderer(ve,We){const it=this.rendererByCompId;let Pt=it.get(We.id);if(!Pt){const Dn=this.eventManager,Tn=this.sharedStylesHost,qr=this.removeStylesOnCompDestory;switch(We.encapsulation){case ie.ifc.Emulated:Pt=new ut(Dn,Tn,We,this.appId,qr);break;case ie.ifc.ShadowDom:return new Ke(Dn,Tn,ve,We);default:Pt=new Ye(Dn,Tn,We,qr)}Pt.onDestroy=()=>it.delete(We.id),it.set(We.id,Pt)}return Pt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(Mt),ie.LFG(_t),ie.LFG(ie.AFp),ie.LFG(Y))},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();class Wr{constructor(De){this.eventManager=De,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(De,ve){return ve?document.createElementNS(At[ve]||ve,De):document.createElement(De)}createComment(De){return document.createComment(De)}createText(De){return document.createTextNode(De)}appendChild(De,ve){(Jn(De)?De.content:De).appendChild(ve)}insertBefore(De,ve,We){De&&(Jn(De)?De.content:De).insertBefore(ve,We)}removeChild(De,ve){De&&De.removeChild(ve)}selectRootElement(De,ve){let We="string"==typeof De?document.querySelector(De):De;if(!We)throw new Error(`The selector "${De}" did not match any elements`);return ve||(We.textContent=""),We}parentNode(De){return De.parentNode}nextSibling(De){return De.nextSibling}setAttribute(De,ve,We,it){if(it){ve=it+":"+ve;const Pt=At[it];Pt?De.setAttributeNS(Pt,ve,We):De.setAttribute(ve,We)}else De.setAttribute(ve,We)}removeAttribute(De,ve,We){if(We){const it=At[We];it?De.removeAttributeNS(it,ve):De.removeAttribute(`${We}:${ve}`)}else De.removeAttribute(ve)}addClass(De,ve){De.classList.add(ve)}removeClass(De,ve){De.classList.remove(ve)}setStyle(De,ve,We,it){it&(ie.JOm.DashCase|ie.JOm.Important)?De.style.setProperty(ve,We,it&ie.JOm.Important?"important":""):De.style[ve]=We}removeStyle(De,ve,We){We&ie.JOm.DashCase?De.style.removeProperty(ve):De.style[ve]=""}setProperty(De,ve,We){De[ve]=We}setValue(De,ve){De.nodeValue=ve}listen(De,ve,We){return"string"==typeof De?this.eventManager.addGlobalEventListener(De,ve,Zt(We)):this.eventManager.addEventListener(De,ve,Zt(We))}}function Jn(be){return"TEMPLATE"===be.tagName&&void 0!==be.content}class Ke extends Wr{constructor(De,ve,We,it){super(De),this.sharedStylesHost=ve,this.hostEl=We,this.shadowRoot=We.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=Yt(it.id,it.styles);for(const Dn of Pt){const Tn=document.createElement("style");Tn.textContent=Dn,this.shadowRoot.appendChild(Tn)}}nodeOrShadowRoot(De){return De===this.hostEl?this.shadowRoot:De}appendChild(De,ve){return super.appendChild(this.nodeOrShadowRoot(De),ve)}insertBefore(De,ve,We){return super.insertBefore(this.nodeOrShadowRoot(De),ve,We)}removeChild(De,ve){return super.removeChild(this.nodeOrShadowRoot(De),ve)}parentNode(De){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(De)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ye extends Wr{constructor(De,ve,We,it,Pt=We.id){super(De),this.sharedStylesHost=ve,this.removeStylesOnCompDestory=it,this.rendererUsageCount=0,this.styles=Yt(Pt,We.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ut extends Ye{constructor(De,ve,We,it,Pt){const Dn=it+"-"+We.id;super(De,ve,We,Pt,Dn),this.contentAttr=function $t(be){return"_ngcontent-%COMP%".replace(It,be)}(Dn),this.hostAttr=function on(be){return"_nghost-%COMP%".replace(It,be)}(Dn)}applyToHost(De){this.applyStyles(),this.setAttribute(De,this.hostAttr,"")}createElement(De,ve){const We=super.createElement(De,ve);return super.setAttribute(We,this.contentAttr,""),We}}let ze=(()=>{class be extends qt{constructor(ve){super(ve)}supports(ve){return!0}addEventListener(ve,We,it){return ve.addEventListener(We,it,!1),()=>this.removeEventListener(ve,We,it)}removeEventListener(ve,We,it){return ve.removeEventListener(We,it)}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(_.K0))},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();const mt=["alt","control","meta","shift"],Ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qt={alt:be=>be.altKey,control:be=>be.ctrlKey,meta:be=>be.metaKey,shift:be=>be.shiftKey};let Rt=(()=>{class be extends qt{constructor(ve){super(ve)}supports(ve){return null!=be.parseEventName(ve)}addEventListener(ve,We,it){const Pt=be.parseEventName(We),Dn=be.eventCallback(Pt.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(ve,Pt.domEventName,Dn))}static parseEventName(ve){const We=ve.toLowerCase().split("."),it=We.shift();if(0===We.length||"keydown"!==it&&"keyup"!==it)return null;const Pt=be._normalizeKey(We.pop());let Dn="",Tn=We.indexOf("code");if(Tn>-1&&(We.splice(Tn,1),Dn="code."),mt.forEach(os=>{const Et=We.indexOf(os);Et>-1&&(We.splice(Et,1),Dn+=os+".")}),Dn+=Pt,0!=We.length||0===Pt.length)return null;const qr={};return qr.domEventName=it,qr.fullKey=Dn,qr}static matchEventFullKeyCode(ve,We){let it=Ot[ve.key]||ve.key,Pt="";return We.indexOf("code.")>-1&&(it=ve.code,Pt="code."),!(null==it||!it)&&(it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),mt.forEach(Dn=>{Dn!==it&&(0,Qt[Dn])(ve)&&(Pt+=Dn+".")}),Pt+=it,Pt===We)}static eventCallback(ve,We,it){return Pt=>{be.matchEventFullKeyCode(Pt,ve)&&it.runGuarded(()=>We(Pt))}}static _normalizeKey(ve){return"esc"===ve?"escape":ve}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(_.K0))},be.\u0275prov=ie.Yz7({token:be,factory:be.\u0275fac}),be})();const Gr=(0,ie.eFA)(ie._c5,"browser",[{provide:ie.Lbi,useValue:_.bD},{provide:ie.g9A,useValue:function _r(){Le.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function Hr(){return(0,ie.RDi)(document),document},deps:[]}]),Pn=new ie.OlP(""),Xt=[{provide:ie.rWj,useClass:class Oe{addToWindow(De){ie.dqk.getAngularTestability=(We,it=!0)=>{const Pt=De.findTestabilityInTree(We,it);if(null==Pt)throw new Error("Could not find testability for element.");return Pt},ie.dqk.getAllAngularTestabilities=()=>De.getAllTestabilities(),ie.dqk.getAllAngularRootElements=()=>De.getAllRootElements(),ie.dqk.frameworkStabilizers||(ie.dqk.frameworkStabilizers=[]),ie.dqk.frameworkStabilizers.push(We=>{const it=ie.dqk.getAllAngularTestabilities();let Pt=it.length,Dn=!1;const Tn=function(qr){Dn=Dn||qr,Pt--,0==Pt&&We(Dn)};it.forEach(function(qr){qr.whenStable(Tn)})})}findTestabilityInTree(De,ve,We){return null==ve?null:De.getTestability(ve)??(We?(0,_.q)().isShadowRoot(ve)?this.findTestabilityInTree(De,ve.host,!0):this.findTestabilityInTree(De,ve.parentElement,!0):null)}},deps:[]},{provide:ie.lri,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]},{provide:ie.dDg,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]}],Hn=[{provide:ie.zSh,useValue:"root"},{provide:ie.qLn,useFactory:function Cr(){return new ie.qLn},deps:[]},{provide:ht,useClass:ze,multi:!0,deps:[_.K0,ie.R0b,ie.Lbi]},{provide:ht,useClass:Rt,multi:!0,deps:[_.K0]},{provide:Gt,useClass:Gt,deps:[Mt,_t,ie.AFp,Y]},{provide:ie.FYo,useExisting:Gt},{provide:ct,useExisting:_t},{provide:_t,useClass:_t,deps:[_.K0]},{provide:Mt,useClass:Mt,deps:[ht,ie.R0b]},{provide:_.JF,useClass:dt,deps:[]},[]];let yi=(()=>{class be{constructor(ve){}static withServerTransition(ve){return{ngModule:be,providers:[{provide:ie.AFp,useValue:ve.appId},{provide:Qe,useExisting:ie.AFp},we]}}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(Pn,12))},be.\u0275mod=ie.oAB({type:be}),be.\u0275inj=ie.cJS({providers:[...Hn,...Xt],imports:[_.ez,ie.hGG]}),be})(),er=(()=>{class be{constructor(ve){this._doc=ve}getTitle(){return this._doc.title}setTitle(ve){this._doc.title=ve||""}}return be.\u0275fac=function(ve){return new(ve||be)(ie.LFG(_.K0))},be.\u0275prov=ie.Yz7({token:be,factory:function(ve){let We=null;return We=ve?new ve:function Yn(){return new er((0,ie.LFG)(_.K0))}(),We},providedIn:"root"}),be})();typeof window<"u"&&window},3375:(fn,lt,K)=>{K.d(lt,{F0:()=>Wn,rH:()=>Zl,Od:()=>ps,Bz:()=>Ao,lC:()=>Kt});var _=K(4650),ie=K(8996),z=K(9646),Le=K(7579);class Se extends Le.x{constructor(R){super(),this._value=R}get value(){return this.getValue()}_subscribe(R){const b=super._subscribe(R);return!b.closed&&R.next(this._value),b}getValue(){const{hasError:R,thrownError:b,_value:O}=this;if(R)throw b;return this._throwIfClosed(),O}next(R){super.next(this._value=R)}}var je=K(6805),Ge=K(9841),Ie=K(7272),Qe=K(9751),he=K(8421);function we(D){return new Qe.y(R=>{(0,he.Xf)(D()).subscribe(R)})}var Oe=K(9635),dt=K(576);function ht(D,R){const b=(0,dt.m)(D)?D:()=>D,O=G=>G.error(b());return new Qe.y(R?G=>R.schedule(O,0,G):O)}var Mt=K(515),qt=K(727),ct=K(4482),_t=K(5403);function At(){return(0,ct.e)((D,R)=>{let b=null;D._refCount++;const O=(0,_t.x)(R,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(b=null);const G=D._connection,se=b;b=null,G&&(!se||G===se)&&G.unsubscribe(),R.unsubscribe()});D.subscribe(O),O.closed||(b=D.connect())})}class It extends Qe.y{constructor(R,b){super(),this.source=R,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,ct.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new qt.w0;const b=this.getSubject();R.add(this.source.subscribe((0,_t.x)(b,void 0,()=>{this._teardown(),b.complete()},O=>{this._teardown(),b.error(O)},()=>this._teardown()))),R.closed&&(this._connection=null,R=qt.w0.EMPTY)}return R}refCount(){return At()(this)}}var Ze=K(6895),Pe=K(4004),at=K(3900),Lt=K(5698),gt=K(8675),Y=K(9300),$t=K(5577),on=K(590);function Yt(D,R){return(0,dt.m)(R)?(0,$t.z)(D,R,1):(0,$t.z)(D,1)}var Zt=K(8505);function Gt(D){return(0,ct.e)((R,b)=>{let se,O=null,G=!1;O=R.subscribe((0,_t.x)(b,void 0,void 0,ge=>{se=(0,he.Xf)(D(ge,Gt(D)(R))),O?(O.unsubscribe(),O=null,se.subscribe(b)):G=!0})),G&&(O.unsubscribe(),O=null,se.subscribe(b))})}var Wr=K(2940);function br(D){return D<=0?()=>Mt.E:(0,ct.e)((R,b)=>{let O=[];R.subscribe((0,_t.x)(b,G=>{O.push(G),D<O.length&&O.shift()},()=>{for(const G of O)b.next(G);b.complete()},void 0,()=>{O=null}))})}var Vn=K(8068),Jn=K(6590),Ke=K(4671);function Ye(D,R){const b=arguments.length>=2;return O=>O.pipe(D?(0,Y.h)((G,se)=>D(G,se,O)):Ke.y,br(1),b?(0,Jn.d)(R):(0,Vn.T)(()=>new je.K))}function mt(D){return(0,ct.e)((R,b)=>{try{R.subscribe(b)}finally{b.add(D)}})}var Ot=K(8189),Qt=K(1481);const Rt="primary",nn=Symbol("RouteTitle");class Cn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b[0]:b}return null}getAll(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function On(D){return new Cn(D)}function gr(D,R,b){const O=b.path.split("/");if(O.length>D.length||"full"===b.pathMatch&&(R.hasChildren()||O.length<D.length))return null;const G={};for(let se=0;se<O.length;se++){const ge=O[se],et=D[se];if(ge.startsWith(":"))G[ge.substring(1)]=et;else if(ge!==et.path)return null}return{consumed:D.slice(0,O.length),posParams:G}}function _r(D,R){const b=D?Object.keys(D):void 0,O=R?Object.keys(R):void 0;if(!b||!O||b.length!=O.length)return!1;let G;for(let se=0;se<b.length;se++)if(G=b[se],!Cr(D[G],R[G]))return!1;return!0}function Cr(D,R){if(Array.isArray(D)&&Array.isArray(R)){if(D.length!==R.length)return!1;const b=[...D].sort(),O=[...R].sort();return b.every((G,se)=>O[se]===G)}return D===R}function Hr(D){return Array.prototype.concat.apply([],D)}function Er(D){return D.length>0?D[D.length-1]:null}function Pn(D,R){for(const b in D)D.hasOwnProperty(b)&&R(D[b],b)}function Xt(D){return(0,_.CqO)(D)?D:(0,_.QGY)(D)?(0,ie.D)(Promise.resolve(D)):(0,z.of)(D)}const Hn=!1,yi={exact:function Yn(D,R,b){if(!Xr(D.segments,R.segments)||!Yr(D.segments,R.segments,b)||D.numberOfChildren!==R.numberOfChildren)return!1;for(const O in R.children)if(!D.children[O]||!Yn(D.children[O],R.children[O],b))return!1;return!0},subset:cn},Dr={exact:function ri(D,R){return _r(D,R)},subset:function er(D,R){return Object.keys(R).length<=Object.keys(D).length&&Object.keys(R).every(b=>Cr(D[b],R[b]))},ignored:()=>!0};function jn(D,R,b){return yi[b.paths](D.root,R.root,b.matrixParams)&&Dr[b.queryParams](D.queryParams,R.queryParams)&&!("exact"===b.fragment&&D.fragment!==R.fragment)}function cn(D,R,b){return An(D,R,R.segments,b)}function An(D,R,b,O){if(D.segments.length>b.length){const G=D.segments.slice(0,b.length);return!(!Xr(G,b)||R.hasChildren()||!Yr(G,b,O))}if(D.segments.length===b.length){if(!Xr(D.segments,b)||!Yr(D.segments,b,O))return!1;for(const G in R.children)if(!D.children[G]||!cn(D.children[G],R.children[G],O))return!1;return!0}{const G=b.slice(0,D.segments.length),se=b.slice(D.segments.length);return!!(Xr(D.segments,G)&&Yr(D.segments,G,O)&&D.children[Rt])&&An(D.children[Rt],R,se,O)}}function Yr(D,R,b){return R.every((O,G)=>Dr[b](D[G].parameters,O.parameters))}class ii{constructor(R=new wn([],{}),b={},O=null){this.root=R,this.queryParams=b,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=On(this.queryParams)),this._queryParamMap}toString(){return Nr.serialize(this)}}class wn{constructor(R,b){this.segments=R,this.children=b,this.parent=null,Pn(b,(O,G)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return an(this)}}class Qr{constructor(R,b){this.path=R,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=On(this.parameters)),this._parameterMap}toString(){return Ne(this)}}function Xr(D,R){return D.length===R.length&&D.every((b,O)=>b.path===R[O].path)}let Kr=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return new $n},providedIn:"root"}),D})();class $n{parse(R){const b=new We(R);return new ii(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(R){const b=`/${Jr(R.root,!0)}`,O=function ce(D){const R=Object.keys(D).map(b=>{const O=D[b];return Array.isArray(O)?O.map(G=>`${Mi(b)}=${Mi(G)}`).join("&"):`${Mi(b)}=${Mi(O)}`}).filter(b=>!!b);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${b}${O}${"string"==typeof R.fragment?`#${function Yi(D){return encodeURI(D)}(R.fragment)}`:""}`}}const Nr=new $n;function an(D){return D.segments.map(R=>Ne(R)).join("/")}function Jr(D,R){if(!D.hasChildren())return an(D);if(R){const b=D.children[Rt]?Jr(D.children[Rt],!1):"",O=[];return Pn(D.children,(G,se)=>{se!==Rt&&O.push(`${se}:${Jr(G,!1)}`)}),O.length>0?`${b}(${O.join("//")})`:b}{const b=function cr(D,R){let b=[];return Pn(D.children,(O,G)=>{G===Rt&&(b=b.concat(R(O,G)))}),Pn(D.children,(O,G)=>{G!==Rt&&(b=b.concat(R(O,G)))}),b}(D,(O,G)=>G===Rt?[Jr(D.children[Rt],!1)]:[`${G}:${Jr(O,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Rt]?`${an(D)}/${b[0]}`:`${an(D)}/(${b.join("//")})`}}function Di(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mi(D){return Di(D).replace(/%3B/gi,";")}function ss(D){return Di(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pi(D){return decodeURIComponent(D)}function Vi(D){return Pi(D.replace(/\+/g,"%20"))}function Ne(D){return`${ss(D.path)}${function Re(D){return Object.keys(D).map(R=>`;${ss(R)}=${ss(D[R])}`).join("")}(D.parameters)}`}const ye=/^[^\/()?;=#]+/;function oe(D){const R=D.match(ye);return R?R[0]:""}const Be=/^[^=?&#]+/,De=/^[^&#]+/;class We{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(R.length>0||Object.keys(b).length>0)&&(O[Rt]=new wn(R,b)),O}parseSegment(){const R=oe(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new _.vHH(4009,Hn);return this.capture(R),new Qr(Pi(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const b=oe(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const G=oe(this.remaining);G&&(O=G,this.capture(O))}R[Pi(b)]=Pi(O)}parseQueryParam(R){const b=function be(D){const R=D.match(Be);return R?R[0]:""}(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const ge=function ve(D){const R=D.match(De);return R?R[0]:""}(this.remaining);ge&&(O=ge,this.capture(O))}const G=Vi(b),se=Vi(O);if(R.hasOwnProperty(G)){let ge=R[G];Array.isArray(ge)||(ge=[ge],R[G]=ge),ge.push(se)}else R[G]=se}parseParens(R){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=oe(this.remaining),G=this.remaining[O.length];if("/"!==G&&")"!==G&&";"!==G)throw new _.vHH(4010,Hn);let se;O.indexOf(":")>-1?(se=O.slice(0,O.indexOf(":")),this.capture(se),this.capture(":")):R&&(se=Rt);const ge=this.parseChildren();b[se]=1===Object.keys(ge).length?ge[Rt]:new wn([],ge),this.consumeOptional("//")}return b}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new _.vHH(4011,Hn)}}function it(D){return D.segments.length>0?new wn([],{[Rt]:D}):D}function Pt(D){const R={};for(const O of Object.keys(D.children)){const se=Pt(D.children[O]);(se.segments.length>0||se.hasChildren())&&(R[O]=se)}return function Dn(D){if(1===D.numberOfChildren&&D.children[Rt]){const R=D.children[Rt];return new wn(D.segments.concat(R.segments),R.children)}return D}(new wn(D.segments,R))}function Tn(D){return D instanceof ii}const qr=!1;function zt(D,R,b,O,G){if(0===b.length)return hr(R.root,R.root,R.root,O,G);const se=function kr(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Ur(!0,0,D);let R=0,b=!1;const O=D.reduce((G,se,ge)=>{if("object"==typeof se&&null!=se){if(se.outlets){const et={};return Pn(se.outlets,(Nt,Rn)=>{et[Rn]="string"==typeof Nt?Nt.split("/"):Nt}),[...G,{outlets:et}]}if(se.segmentPath)return[...G,se.segmentPath]}return"string"!=typeof se?[...G,se]:0===ge?(se.split("/").forEach((et,Nt)=>{0==Nt&&"."===et||(0==Nt&&""===et?b=!0:".."===et?R++:""!=et&&G.push(et))}),G):[...G,se]},[]);return new Ur(b,R,O)}(b);return se.toRoot()?hr(R.root,R.root,new wn([],{}),O,G):function ge(Nt){const Rn=function ea(D,R,b,O){if(D.isAbsolute)return new Ui(R.root,!0,0);if(-1===O)return new Ui(b,b===R.root,0);return function Lr(D,R,b){let O=D,G=R,se=b;for(;se>G;){if(se-=G,O=O.parent,!O)throw new _.vHH(4005,qr&&"Invalid number of '../'");G=O.segments.length}return new Ui(O,!1,G-se)}(b,O+(yn(D.commands[0])?0:1),D.numberOfDoubleDots)}(se,R,D.snapshot?._urlSegment,Nt),Sn=Rn.processChildren?en(Rn.segmentGroup,Rn.index,se.commands):Wi(Rn.segmentGroup,Rn.index,se.commands);return hr(R.root,Rn.segmentGroup,Sn,O,G)}(D.snapshot?._lastPathIndex)}function yn(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function zn(D){return"object"==typeof D&&null!=D&&D.outlets}function hr(D,R,b,O,G){let ge,se={};O&&Pn(O,(Nt,Rn)=>{se[Rn]=Array.isArray(Nt)?Nt.map(Sn=>`${Sn}`):`${Nt}`}),ge=D===R?b:In(D,R,b);const et=it(Pt(ge));return new ii(et,se,G)}function In(D,R,b){const O={};return Pn(D.children,(G,se)=>{O[se]=G===R?b:In(G,R,b)}),new wn(D.segments,O)}class Ur{constructor(R,b,O){if(this.isAbsolute=R,this.numberOfDoubleDots=b,this.commands=O,R&&O.length>0&&yn(O[0]))throw new _.vHH(4003,qr&&"Root segment cannot have matrix parameters");const G=O.find(zn);if(G&&G!==Er(O))throw new _.vHH(4004,qr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ui{constructor(R,b,O){this.segmentGroup=R,this.processChildren=b,this.index=O}}function Wi(D,R,b){if(D||(D=new wn([],{})),0===D.segments.length&&D.hasChildren())return en(D,R,b);const O=function mr(D,R,b){let O=0,G=R;const se={match:!1,pathIndex:0,commandIndex:0};for(;G<D.segments.length;){if(O>=b.length)return se;const ge=D.segments[G],et=b[O];if(zn(et))break;const Nt=`${et}`,Rn=O<b.length-1?b[O+1]:null;if(G>0&&void 0===Nt)break;if(Nt&&Rn&&"object"==typeof Rn&&void 0===Rn.outlets){if(!Qi(Nt,Rn,ge))return se;O+=2}else{if(!Qi(Nt,{},ge))return se;O++}G++}return{match:!0,pathIndex:G,commandIndex:O}}(D,R,b),G=b.slice(O.commandIndex);if(O.match&&O.pathIndex<D.segments.length){const se=new wn(D.segments.slice(0,O.pathIndex),{});return se.children[Rt]=new wn(D.segments.slice(O.pathIndex),D.children),en(se,0,G)}return O.match&&0===G.length?new wn(D.segments,{}):O.match&&!D.hasChildren()?oi(D,R,b):O.match?en(D,0,G):oi(D,R,b)}function en(D,R,b){if(0===b.length)return new wn(D.segments,{});{const O=function Ks(D){return zn(D[0])?D[0].outlets:{[Rt]:D}}(b),G={};if(!O[Rt]&&D.children[Rt]&&1===D.numberOfChildren&&0===D.children[Rt].segments.length){const se=en(D.children[Rt],R,b);return new wn(D.segments,se.children)}return Pn(O,(se,ge)=>{"string"==typeof se&&(se=[se]),null!==se&&(G[ge]=Wi(D.children[ge],R,se))}),Pn(D.children,(se,ge)=>{void 0===O[ge]&&(G[ge]=se)}),new wn(D.segments,G)}}function oi(D,R,b){const O=D.segments.slice(0,R);let G=0;for(;G<b.length;){const se=b[G];if(zn(se)){const Nt=ai(se.outlets);return new wn(O,Nt)}if(0===G&&yn(b[0])){O.push(new Qr(D.segments[R].path,as(b[0]))),G++;continue}const ge=zn(se)?se.outlets[Rt]:`${se}`,et=G<b.length-1?b[G+1]:null;ge&&et&&yn(et)?(O.push(new Qr(ge,as(et))),G+=2):(O.push(new Qr(ge,{})),G++)}return new wn(O,{})}function ai(D){const R={};return Pn(D,(b,O)=>{"string"==typeof b&&(b=[b]),null!==b&&(R[O]=oi(new wn([],{}),0,b))}),R}function as(D){const R={};return Pn(D,(b,O)=>R[O]=`${b}`),R}function Qi(D,R,b){return D==b.path&&_r(R,b.parameters)}const qs="imperative";class ei{constructor(R,b){this.id=R,this.url=b}}class Je extends ei{constructor(R,b,O="imperative",G=null){super(R,b),this.type=0,this.navigationTrigger=O,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class He extends ei{constructor(R,b,O){super(R,b),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $e extends ei{constructor(R,b,O,G){super(R,b),this.reason=O,this.code=G,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class St extends ei{constructor(R,b,O,G){super(R,b),this.reason=O,this.code=G,this.type=16}}class Ht extends ei{constructor(R,b,O,G){super(R,b),this.error=O,this.target=G,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kn extends ei{constructor(R,b,O,G){super(R,b),this.urlAfterRedirects=O,this.state=G,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends ei{constructor(R,b,O,G){super(R,b),this.urlAfterRedirects=O,this.state=G,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr extends ei{constructor(R,b,O,G,se){super(R,b),this.urlAfterRedirects=O,this.state=G,this.shouldActivate=se,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ti extends ei{constructor(R,b,O,G){super(R,b),this.urlAfterRedirects=O,this.state=G,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is extends ei{constructor(R,b,O,G){super(R,b),this.urlAfterRedirects=O,this.state=G,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Es{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ws{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ti{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zo{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Or{constructor(R,b,O){this.routerEvent=R,this.position=b,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let As=(()=>{class D{createUrlTree(b,O,G,se,ge,et){return zt(b||O.root,G,se,ge,et)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac}),D})(),da=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:function(R){return As.\u0275fac(R)},providedIn:"root"}),D})();class bs{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const b=this.pathFromRoot(R);return b.length>1?b[b.length-2]:null}children(R){const b=_i(R,this._root);return b?b.children.map(O=>O.value):[]}firstChild(R){const b=_i(R,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(R){const b=ys(R,this._root);return b.length<2?[]:b[b.length-2].children.map(G=>G.value).filter(G=>G!==R)}pathFromRoot(R){return ys(R,this._root).map(b=>b.value)}}function _i(D,R){if(D===R.value)return R;for(const b of R.children){const O=_i(D,b);if(O)return O}return null}function ys(D,R){if(D===R.value)return[R];for(const b of R.children){const O=ys(D,b);if(O.length)return O.unshift(R),O}return[]}class Tr{constructor(R,b){this.value=R,this.children=b}toString(){return`TreeNode(${this.value})`}}function lr(D){const R={};return D&&D.children.forEach(b=>R[b.value.outlet]=b),R}class vi extends bs{constructor(R,b){super(R),this.snapshot=b,to(this,R)}toString(){return this.snapshot.toString()}}function Ii(D,R){const b=function eo(D,R){const ge=new Yo([],{},{},"",{},Rt,R,null,D.root,-1,{});return new Pa("",new Tr(ge,[]))}(D,R),O=new Se([new Qr("",{})]),G=new Se({}),se=new Se({}),ge=new Se({}),et=new Se(""),Nt=new Bi(O,G,ge,et,se,Rt,R,b.root);return Nt.snapshot=b.root,new vi(new Tr(Nt,[]),b)}class Bi{constructor(R,b,O,G,se,ge,et,Nt){this.url=R,this.params=b,this.queryParams=O,this.fragment=G,this.data=se,this.outlet=ge,this.component=et,this.title=this.data?.pipe((0,Pe.U)(Rn=>Rn[nn]))??(0,z.of)(void 0),this._futureSnapshot=Nt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pe.U)(R=>On(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pe.U)(R=>On(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xs(D,R="emptyOnly"){const b=D.pathFromRoot;let O=0;if("always"!==R)for(O=b.length-1;O>=1;){const G=b[O],se=b[O-1];if(G.routeConfig&&""===G.routeConfig.path)O--;else{if(se.component)break;O--}}return function $a(D){return D.reduce((R,b)=>({params:{...R.params,...b.params},data:{...R.data,...b.data},resolve:{...b.data,...R.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(O))}class Yo{get title(){return this.data?.[nn]}constructor(R,b,O,G,se,ge,et,Nt,Rn,Sn,Li){this.url=R,this.params=b,this.queryParams=O,this.fragment=G,this.data=se,this.outlet=ge,this.component=et,this.routeConfig=Nt,this._urlSegment=Rn,this._lastPathIndex=Sn,this._resolve=Li}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=On(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=On(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pa extends bs{constructor(R,b){super(b),this.url=R,to(this,b)}toString(){return vo(this._root)}}function to(D,R){R.value._routerState=D,R.children.forEach(b=>to(D,b))}function vo(D){const R=D.children.length>0?` { ${D.children.map(vo).join(", ")} } `:"";return`${D.value}${R}`}function xo(D){if(D.snapshot){const R=D.snapshot,b=D._futureSnapshot;D.snapshot=b,_r(R.queryParams,b.queryParams)||D.queryParams.next(b.queryParams),R.fragment!==b.fragment&&D.fragment.next(b.fragment),_r(R.params,b.params)||D.params.next(b.params),function Qn(D,R){if(D.length!==R.length)return!1;for(let b=0;b<D.length;++b)if(!_r(D[b],R[b]))return!1;return!0}(R.url,b.url)||D.url.next(b.url),_r(R.data,b.data)||D.data.next(b.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function no(D,R){const b=_r(D.params,R.params)&&function si(D,R){return Xr(D,R)&&D.every((b,O)=>_r(b.parameters,R[O].parameters))}(D.url,R.url);return b&&!(!D.parent!=!R.parent)&&(!D.parent||no(D.parent,R.parent))}function ha(D,R,b){if(b&&D.shouldReuseRoute(R.value,b.value.snapshot)){const O=b.value;O._futureSnapshot=R.value;const G=function io(D,R,b){return R.children.map(O=>{for(const G of b.children)if(D.shouldReuseRoute(O.value,G.value.snapshot))return ha(D,O,G);return ha(D,O)})}(D,R,b);return new Tr(O,G)}{if(D.shouldAttach(R.value)){const se=D.retrieve(R.value);if(null!==se){const ge=se.route;return ge.value._futureSnapshot=R.value,ge.children=R.children.map(et=>ha(D,et)),ge}}const O=function ta(D){return new Bi(new Se(D.url),new Se(D.params),new Se(D.queryParams),new Se(D.fragment),new Se(D.data),D.outlet,D.component,D)}(R.value),G=R.children.map(se=>ha(D,se));return new Tr(O,G)}}const Eo="ngNavigationCancelingError";function zs(D,R){const{redirectTo:b,navigationBehaviorOptions:O}=Tn(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,G=X(!1,0,R);return G.url=b,G.navigationBehaviorOptions=O,G}function X(D,R,b){const O=new Error("NavigationCancelingError: "+(D||""));return O[Eo]=!0,O.cancellationCode=R,b&&(O.url=b),O}function re(D){return Te(D)&&Tn(D.url)}function Te(D){return D&&D[Eo]}class Fe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qe,this.attachRef=null}}let qe=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(b,O){const G=this.getOrCreateContext(b);G.outlet=O,this.contexts.set(b,G)}onChildOutletDestroyed(b){const O=this.getContext(b);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let O=this.getContext(b);return O||(O=new Fe,this.contexts.set(b,O)),O}getContext(b){return this.contexts.get(b)||null}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Tt=!1;let Kt=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=Rt,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(qe),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(b){if(b.name){const{firstChange:O,previousValue:G}=b.name;if(O)return;this.isTrackedInParentContexts(G)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(G)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){return this.parentContexts.getContext(b)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);b?.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,Tt);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,Tt);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,Tt);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,O){this.activated=b,this._activatedRoute=O,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,O){if(this.isActivated)throw new _.vHH(4013,Tt);this._activatedRoute=b;const G=this.location,ge=b.snapshot.component,et=this.parentContexts.getOrCreateContext(this.name).children,Nt=new xn(b,et,G.injector);if(O&&function dn(D){return!!D.resolveComponentFactory}(O)){const Rn=O.resolveComponentFactory(ge);this.activated=G.createComponent(Rn,G.length,Nt)}else this.activated=G.createComponent(ge,{index:G.length,injector:Nt,environmentInjector:O??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275dir=_.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),D})();class xn{constructor(R,b,O){this.route=R,this.childContexts=b,this.parent=O}get(R,b){return R===Bi?this.route:R===qe?this.childContexts:this.parent.get(R,b)}}let or=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275cmp=_.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(b,O){1&b&&_._UZ(0,"router-outlet")},dependencies:[Kt],encapsulation:2}),D})();function Pr(D,R){return D.providers&&!D._injector&&(D._injector=(0,_.MMx)(D.providers,R,`Route: ${D.path}`)),D._injector??R}function ki(D){const R=D.children&&D.children.map(ki),b=R?{...D,children:R}:{...D};return!b.component&&!b.loadComponent&&(R||b.loadChildren)&&b.outlet&&b.outlet!==Rt&&(b.component=or),b}function li(D){return D.outlet||Rt}function xr(D,R){const b=D.filter(O=>li(O)===R);return b.push(...D.filter(O=>li(O)!==R)),b}function jr(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let R=D.parent;R;R=R.parent){const b=R.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class hs{constructor(R,b,O,G){this.routeReuseStrategy=R,this.futureState=b,this.currState=O,this.forwardEvent=G}activate(R){const b=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,O,R),xo(this.futureState.root),this.activateChildRoutes(b,O,R)}deactivateChildRoutes(R,b,O){const G=lr(b);R.children.forEach(se=>{const ge=se.value.outlet;this.deactivateRoutes(se,G[ge],O),delete G[ge]}),Pn(G,(se,ge)=>{this.deactivateRouteAndItsChildren(se,O)})}deactivateRoutes(R,b,O){const G=R.value,se=b?b.value:null;if(G===se)if(G.component){const ge=O.getContext(G.outlet);ge&&this.deactivateChildRoutes(R,b,ge.children)}else this.deactivateChildRoutes(R,b,O);else se&&this.deactivateRouteAndItsChildren(b,O)}deactivateRouteAndItsChildren(R,b){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,b):this.deactivateRouteAndOutlet(R,b)}detachAndStoreRouteSubtree(R,b){const O=b.getContext(R.value.outlet),G=O&&R.value.component?O.children:b,se=lr(R);for(const ge of Object.keys(se))this.deactivateRouteAndItsChildren(se[ge],G);if(O&&O.outlet){const ge=O.outlet.detach(),et=O.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ge,route:R,contexts:et})}}deactivateRouteAndOutlet(R,b){const O=b.getContext(R.value.outlet),G=O&&R.value.component?O.children:b,se=lr(R);for(const ge of Object.keys(se))this.deactivateRouteAndItsChildren(se[ge],G);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(R,b,O){const G=lr(b);R.children.forEach(se=>{this.activateRoutes(se,G[se.value.outlet],O),this.forwardEvent(new Zo(se.value.snapshot))}),R.children.length&&this.forwardEvent(new Ti(R.value.snapshot))}activateRoutes(R,b,O){const G=R.value,se=b?b.value:null;if(xo(G),G===se)if(G.component){const ge=O.getOrCreateContext(G.outlet);this.activateChildRoutes(R,b,ge.children)}else this.activateChildRoutes(R,b,O);else if(G.component){const ge=O.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const et=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),ge.children.onOutletReAttached(et.contexts),ge.attachRef=et.componentRef,ge.route=et.route.value,ge.outlet&&ge.outlet.attach(et.componentRef,et.route.value),xo(et.route.value),this.activateChildRoutes(R,null,ge.children)}else{const et=jr(G.snapshot),Nt=et?.get(_._Vd)??null;ge.attachRef=null,ge.route=G,ge.resolver=Nt,ge.injector=et,ge.outlet&&ge.outlet.activateWith(G,ge.injector),this.activateChildRoutes(R,null,ge.children)}}else this.activateChildRoutes(R,null,O)}}class rs{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class wo{constructor(R,b){this.component=R,this.route=b}}function Io(D,R,b){const O=D._root;return fr(O,R?R._root:null,b,[O.value])}function Cs(D,R){const b=Symbol(),O=R.get(D,b);return O===b?"function"!=typeof D||(0,_.Z0I)(D)?R.get(D):D:O}function fr(D,R,b,O,G={canDeactivateChecks:[],canActivateChecks:[]}){const se=lr(R);return D.children.forEach(ge=>{(function so(D,R,b,O,G={canDeactivateChecks:[],canActivateChecks:[]}){const se=D.value,ge=R?R.value:null,et=b?b.getContext(D.value.outlet):null;if(ge&&se.routeConfig===ge.routeConfig){const Nt=function pr(D,R,b){if("function"==typeof b)return b(D,R);switch(b){case"pathParamsChange":return!Xr(D.url,R.url);case"pathParamsOrQueryParamsChange":return!Xr(D.url,R.url)||!_r(D.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!no(D,R)||!_r(D.queryParams,R.queryParams);default:return!no(D,R)}}(ge,se,se.routeConfig.runGuardsAndResolvers);Nt?G.canActivateChecks.push(new rs(O)):(se.data=ge.data,se._resolvedData=ge._resolvedData),fr(D,R,se.component?et?et.children:null:b,O,G),Nt&&et&&et.outlet&&et.outlet.isActivated&&G.canDeactivateChecks.push(new wo(et.outlet.component,ge))}else ge&&xa(R,et,G),G.canActivateChecks.push(new rs(O)),fr(D,null,se.component?et?et.children:null:b,O,G)})(ge,se[ge.value.outlet],b,O.concat([ge.value]),G),delete se[ge.value.outlet]}),Pn(se,(ge,et)=>xa(ge,b.getContext(et),G)),G}function xa(D,R,b){const O=lr(D),G=D.value;Pn(O,(se,ge)=>{xa(se,G.component?R?R.children.getContext(ge):null:R,b)}),b.canDeactivateChecks.push(new wo(G.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,G))}function ji(D){return"function"==typeof D}function B(D){return D instanceof je.K||"EmptyError"===D?.name}const le=Symbol("INITIAL_VALUE");function st(){return(0,at.w)(D=>(0,Ge.a)(D.map(R=>R.pipe((0,Lt.q)(1),(0,gt.O)(le)))).pipe((0,Pe.U)(R=>{for(const b of R)if(!0!==b){if(b===le)return le;if(!1===b||b instanceof ii)return b}return!0}),(0,Y.h)(R=>R!==le),(0,Lt.q)(1)))}function ho(D){return(0,Oe.z)((0,Zt.b)(R=>{if(Tn(R))throw zs(0,R)}),(0,Pe.U)(R=>!0===R))}const So={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ko(D,R,b,O,G){const se=Zs(D,R,b);return se.matched?function Oa(D,R,b,O){const G=R.canMatch;if(!G||0===G.length)return(0,z.of)(!0);const se=G.map(ge=>{const et=Cs(ge,D);return Xt(function Ml(D){return D&&ji(D.canMatch)}(et)?et.canMatch(R,b):D.runInContext(()=>et(R,b)))});return(0,z.of)(se).pipe(st(),ho())}(O=Pr(R,O),R,b).pipe((0,Pe.U)(ge=>!0===ge?se:{...So})):(0,z.of)(se)}function Zs(D,R,b){if(""===R.path)return"full"===R.pathMatch&&(D.hasChildren()||b.length>0)?{...So}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const G=(R.matcher||gr)(b,D,R);if(!G)return{...So};const se={};Pn(G.posParams,(et,Nt)=>{se[Nt]=et.path});const ge=G.consumed.length>0?{...se,...G.consumed[G.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:G.consumed,remainingSegments:b.slice(G.consumed.length),parameters:ge,positionalParamSegments:G.posParams??{}}}function bo(D,R,b,O){if(b.length>0&&function Vs(D,R,b){return b.some(O=>fa(D,R,O)&&li(O)!==Rt)}(D,b,O)){const se=new wn(R,function Pl(D,R,b,O){const G={};G[Rt]=O,O._sourceSegment=D,O._segmentIndexShift=R.length;for(const se of b)if(""===se.path&&li(se)!==Rt){const ge=new wn([],{});ge._sourceSegment=D,ge._segmentIndexShift=R.length,G[li(se)]=ge}return G}(D,R,O,new wn(b,D.children)));return se._sourceSegment=D,se._segmentIndexShift=R.length,{segmentGroup:se,slicedSegments:[]}}if(0===b.length&&function Lo(D,R,b){return b.some(O=>fa(D,R,O))}(D,b,O)){const se=new wn(D.segments,function ou(D,R,b,O,G){const se={};for(const ge of O)if(fa(D,b,ge)&&!G[li(ge)]){const et=new wn([],{});et._sourceSegment=D,et._segmentIndexShift=R.length,se[li(ge)]=et}return{...G,...se}}(D,R,b,O,D.children));return se._sourceSegment=D,se._segmentIndexShift=R.length,{segmentGroup:se,slicedSegments:b}}const G=new wn(D.segments,D.children);return G._sourceSegment=D,G._segmentIndexShift=R.length,{segmentGroup:G,slicedSegments:b}}function fa(D,R,b){return(!(D.hasChildren()||R.length>0)||"full"!==b.pathMatch)&&""===b.path}function Ki(D,R,b,O){return!!(li(D)===O||O!==Rt&&fa(R,b,D))&&("**"===D.path||Zs(R,D,b).matched)}function au(D,R,b){return 0===R.length&&!D.children[b]}const xl=!1;class is{constructor(R){this.segmentGroup=R||null}}class Nl{constructor(R){this.urlTree=R}}function Fo(D){return ht(new is(D))}function pa(D){return ht(new Nl(D))}class oo{constructor(R,b,O,G,se){this.injector=R,this.configLoader=b,this.urlSerializer=O,this.urlTree=G,this.config=se,this.allowRedirects=!0}apply(){const R=bo(this.urlTree.root,[],[],this.config).segmentGroup,b=new wn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,b,Rt).pipe((0,Pe.U)(se=>this.createUrlTree(Pt(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gt(se=>{if(se instanceof Nl)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof is?this.noMatchError(se):se}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Rt).pipe((0,Pe.U)(G=>this.createUrlTree(Pt(G),R.queryParams,R.fragment))).pipe(Gt(G=>{throw G instanceof is?this.noMatchError(G):G}))}noMatchError(R){return new _.vHH(4002,xl)}createUrlTree(R,b,O){const G=it(R);return new ii(G,b,O)}expandSegmentGroup(R,b,O,G){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(R,b,O).pipe((0,Pe.U)(se=>new wn([],se))):this.expandSegment(R,O,b,O.segments,G,!0)}expandChildren(R,b,O){const G=[];for(const se of Object.keys(O.children))"primary"===se?G.unshift(se):G.push(se);return(0,ie.D)(G).pipe(Yt(se=>{const ge=O.children[se],et=xr(b,se);return this.expandSegmentGroup(R,et,ge,se).pipe((0,Pe.U)(Nt=>({segment:Nt,outlet:se})))}),(0,Wr.R)((se,ge)=>(se[ge.outlet]=ge.segment,se),{}),Ye())}expandSegment(R,b,O,G,se,ge){return(0,ie.D)(O).pipe(Yt(et=>this.expandSegmentAgainstRoute(R,b,O,et,G,se,ge).pipe(Gt(Rn=>{if(Rn instanceof is)return(0,z.of)(null);throw Rn}))),(0,on.P)(et=>!!et),Gt((et,Nt)=>{if(B(et))return au(b,G,se)?(0,z.of)(new wn([],{})):Fo(b);throw et}))}expandSegmentAgainstRoute(R,b,O,G,se,ge,et){return Ki(G,b,se,ge)?void 0===G.redirectTo?this.matchSegmentAgainstRoute(R,b,G,se,ge):et&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,b,O,G,se,ge):Fo(b):Fo(b)}expandSegmentAgainstRouteUsingRedirect(R,b,O,G,se,ge){return"**"===G.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,O,G,ge):this.expandRegularSegmentAgainstRouteUsingRedirect(R,b,O,G,se,ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,b,O,G){const se=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?pa(se):this.lineralizeSegments(O,se).pipe((0,$t.z)(ge=>{const et=new wn(ge,{});return this.expandSegment(R,et,b,ge,G,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,b,O,G,se,ge){const{matched:et,consumedSegments:Nt,remainingSegments:Rn,positionalParamSegments:Sn}=Zs(b,G,se);if(!et)return Fo(b);const Li=this.applyRedirectCommands(Nt,G.redirectTo,Sn);return G.redirectTo.startsWith("/")?pa(Li):this.lineralizeSegments(G,Li).pipe((0,$t.z)(us=>this.expandSegment(R,b,O,us.concat(Rn),ge,!1)))}matchSegmentAgainstRoute(R,b,O,G,se){return"**"===O.path?(R=Pr(O,R),O.loadChildren?(O._loadedRoutes?(0,z.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(R,O)).pipe((0,Pe.U)(et=>(O._loadedRoutes=et.routes,O._loadedInjector=et.injector,new wn(G,{})))):(0,z.of)(new wn(G,{}))):ko(b,O,G,R).pipe((0,at.w)(({matched:ge,consumedSegments:et,remainingSegments:Nt})=>ge?this.getChildConfig(R=O._injector??R,O,G).pipe((0,$t.z)(Sn=>{const Li=Sn.injector??R,us=Sn.routes,{segmentGroup:jo,slicedSegments:Ea}=bo(b,et,Nt,us),ao=new wn(jo.segments,jo.children);if(0===Ea.length&&ao.hasChildren())return this.expandChildren(Li,us,ao).pipe((0,Pe.U)(Fa=>new wn(et,Fa)));if(0===us.length&&0===Ea.length)return(0,z.of)(new wn(et,{}));const Xi=li(O)===se;return this.expandSegment(Li,ao,us,Ea,Xi?Rt:se,!0).pipe((0,Pe.U)(pl=>new wn(et.concat(pl.segments),pl.children)))})):Fo(b)))}getChildConfig(R,b,O){return b.children?(0,z.of)({routes:b.children,injector:R}):b.loadChildren?void 0!==b._loadedRoutes?(0,z.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function Fs(D,R,b,O){const G=R.canLoad;if(void 0===G||0===G.length)return(0,z.of)(!0);const se=G.map(ge=>{const et=Cs(ge,D);return Xt(function Ha(D){return D&&ji(D.canLoad)}(et)?et.canLoad(R,b):D.runInContext(()=>et(R,b)))});return(0,z.of)(se).pipe(st(),ho())}(R,b,O).pipe((0,$t.z)(G=>G?this.configLoader.loadChildren(R,b).pipe((0,Zt.b)(se=>{b._loadedRoutes=se.routes,b._loadedInjector=se.injector})):function Ol(D){return ht(X(xl,3))}())):(0,z.of)({routes:[],injector:R})}lineralizeSegments(R,b){let O=[],G=b.root;for(;;){if(O=O.concat(G.segments),0===G.numberOfChildren)return(0,z.of)(O);if(G.numberOfChildren>1||!G.children[Rt])return R.redirectTo,ht(new _.vHH(4e3,xl));G=G.children[Rt]}}applyRedirectCommands(R,b,O){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),R,O)}applyRedirectCreateUrlTree(R,b,O,G){const se=this.createSegmentGroup(R,b.root,O,G);return new ii(se,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(R,b){const O={};return Pn(R,(G,se)=>{if("string"==typeof G&&G.startsWith(":")){const et=G.substring(1);O[se]=b[et]}else O[se]=G}),O}createSegmentGroup(R,b,O,G){const se=this.createSegments(R,b.segments,O,G);let ge={};return Pn(b.children,(et,Nt)=>{ge[Nt]=this.createSegmentGroup(R,et,O,G)}),new wn(se,ge)}createSegments(R,b,O,G){return b.map(se=>se.path.startsWith(":")?this.findPosParam(R,se,G):this.findOrReturn(se,O))}findPosParam(R,b,O){const G=O[b.path.substring(1)];if(!G)throw new _.vHH(4001,xl);return G}findOrReturn(R,b){let O=0;for(const G of b){if(G.path===R.path)return b.splice(O),G;O++}return R}}class fs{}class lu{constructor(R,b,O,G,se,ge,et){this.injector=R,this.rootComponentType=b,this.config=O,this.urlTree=G,this.url=se,this.paramsInheritanceStrategy=ge,this.urlSerializer=et}recognize(){const R=bo(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Rt).pipe((0,Pe.U)(b=>{if(null===b)return null;const O=new Yo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),G=new Tr(O,b),se=new Pa(this.url,G);return this.inheritParamsAndData(se._root),se}))}inheritParamsAndData(R){const b=R.value,O=xs(b,this.paramsInheritanceStrategy);b.params=Object.freeze(O.params),b.data=Object.freeze(O.data),R.children.forEach(G=>this.inheritParamsAndData(G))}processSegmentGroup(R,b,O,G){return 0===O.segments.length&&O.hasChildren()?this.processChildren(R,b,O):this.processSegment(R,b,O,O.segments,G)}processChildren(R,b,O){return(0,ie.D)(Object.keys(O.children)).pipe(Yt(G=>{const se=O.children[G],ge=xr(b,G);return this.processSegmentGroup(R,ge,se,G)}),(0,Wr.R)((G,se)=>G&&se?(G.push(...se),G):null),function ut(D,R=!1){return(0,ct.e)((b,O)=>{let G=0;b.subscribe((0,_t.x)(O,se=>{const ge=D(se,G++);(ge||R)&&O.next(se),!ge&&O.complete()}))})}(G=>null!==G),(0,Jn.d)(null),Ye(),(0,Pe.U)(G=>{if(null===G)return null;const se=ka(G);return function al(D){D.sort((R,b)=>R.value.outlet===Rt?-1:b.value.outlet===Rt?1:R.value.outlet.localeCompare(b.value.outlet))}(se),se}))}processSegment(R,b,O,G,se){return(0,ie.D)(b).pipe(Yt(ge=>this.processSegmentAgainstRoute(ge._injector??R,ge,O,G,se)),(0,on.P)(ge=>!!ge),Gt(ge=>{if(B(ge))return au(O,G,se)?(0,z.of)([]):(0,z.of)(null);throw ge}))}processSegmentAgainstRoute(R,b,O,G,se){if(b.redirectTo||!Ki(b,O,G,se))return(0,z.of)(null);let ge;if("**"===b.path){const et=G.length>0?Er(G).parameters:{},Nt=k(O)+G.length,Rn=new Yo(G,et,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$(b),li(b),b.component??b._loadedComponent??null,b,uu(O),Nt,ae(b));ge=(0,z.of)({snapshot:Rn,consumedSegments:[],remainingSegments:[]})}else ge=ko(O,b,G,R).pipe((0,Pe.U)(({matched:et,consumedSegments:Nt,remainingSegments:Rn,parameters:Sn})=>{if(!et)return null;const Li=k(O)+Nt.length;return{snapshot:new Yo(Nt,Sn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$(b),li(b),b.component??b._loadedComponent??null,b,uu(O),Li,ae(b)),consumedSegments:Nt,remainingSegments:Rn}}));return ge.pipe((0,at.w)(et=>{if(null===et)return(0,z.of)(null);const{snapshot:Nt,consumedSegments:Rn,remainingSegments:Sn}=et;R=b._injector??R;const Li=b._loadedInjector??R,us=function ql(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(b),{segmentGroup:jo,slicedSegments:Ea}=bo(O,Rn,Sn,us.filter(Xi=>void 0===Xi.redirectTo));if(0===Ea.length&&jo.hasChildren())return this.processChildren(Li,us,jo).pipe((0,Pe.U)(Xi=>null===Xi?null:[new Tr(Nt,Xi)]));if(0===us.length&&0===Ea.length)return(0,z.of)([new Tr(Nt,[])]);const ao=li(b)===se;return this.processSegment(Li,us,jo,Ea,ao?Rt:se).pipe((0,Pe.U)(Xi=>null===Xi?null:[new Tr(Nt,Xi)]))}))}}function uc(D){const R=D.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function ka(D){const R=[],b=new Set;for(const O of D){if(!uc(O)){R.push(O);continue}const G=R.find(se=>O.value.routeConfig===se.value.routeConfig);void 0!==G?(G.children.push(...O.children),b.add(G)):R.push(O)}for(const O of b){const G=ka(O.children);R.push(new Tr(O.value,G))}return R.filter(O=>!b.has(O))}function uu(D){let R=D;for(;R._sourceSegment;)R=R._sourceSegment;return R}function k(D){let R=D,b=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,b+=R._segmentIndexShift??0;return b-1}function $(D){return D.data||{}}function ae(D){return D.resolve||{}}function ui(D){return"string"==typeof D.title||null===D.title}function kn(D){return(0,at.w)(R=>{const b=D(R);return b?(0,ie.D)(b).pipe((0,Pe.U)(()=>R)):(0,z.of)(R)})}const ir=new _.OlP("ROUTES");let $i=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,z.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const O=Xt(b.loadComponent()).pipe((0,Pe.U)(pn),(0,Zt.b)(se=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=se}),mt(()=>{this.componentLoaders.delete(b)})),G=new It(O,()=>new Le.x).pipe(At());return this.componentLoaders.set(b,G),G}loadChildren(b,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,z.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const se=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,Pe.U)(et=>{this.onLoadEndListener&&this.onLoadEndListener(O);let Nt,Rn,Sn=!1;Array.isArray(et)?Rn=et:(Nt=et.create(b).injector,Rn=Hr(Nt.get(ir,[],_.XFs.Self|_.XFs.Optional)));return{routes:Rn.map(ki),injector:Nt}}),mt(()=>{this.childrenLoaders.delete(O)})),ge=new It(se,()=>new Le.x).pipe(At());return this.childrenLoaders.set(O,ge),ge}loadModuleFactoryOrRoutes(b){return Xt(b()).pipe((0,Pe.U)(pn),(0,$t.z)(O=>O instanceof _.YKP||Array.isArray(O)?(0,z.of)(O):(0,ie.D)(this.compiler.compileModuleAsync(O))))}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function pn(D){return function Uo(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Ws=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Le.x,this.configLoader=(0,_.f3M)($i),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(Kr),this.rootContexts=(0,_.f3M)(qe),this.navigationId=0,this.afterPreactivation=()=>(0,z.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=G=>this.events.next(new Ss(G)),this.configLoader.onLoadStartListener=G=>this.events.next(new Es(G))}complete(){this.transitions?.complete()}handleNavigationRequest(b){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...b,id:O})}setupNavigations(b){return this.transitions=new Se({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qs,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Y.h)(O=>0!==O.id),(0,Pe.U)(O=>({...O,extractedUrl:b.urlHandlingStrategy.extract(O.rawUrl)})),(0,at.w)(O=>{let G=!1,se=!1;return(0,z.of)(O).pipe((0,Zt.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.rawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,at.w)(ge=>{const et=b.browserUrlTree.toString(),Nt=!b.navigated||ge.extractedUrl.toString()!==et||et!==b.currentUrlTree.toString();if(!Nt&&"reload"!==(ge.extras.onSameUrlNavigation??b.onSameUrlNavigation)){const Sn="";return this.events.next(new St(ge.id,b.serializeUrl(O.rawUrl),Sn,0)),b.rawUrlTree=ge.rawUrl,ge.resolve(null),Mt.E}if(b.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return rn(ge.source)&&(b.browserUrlTree=ge.extractedUrl),(0,z.of)(ge).pipe((0,at.w)(Sn=>{const Li=this.transitions?.getValue();return this.events.next(new Je(Sn.id,this.urlSerializer.serialize(Sn.extractedUrl),Sn.source,Sn.restoredState)),Li!==this.transitions?.getValue()?Mt.E:Promise.resolve(Sn)}),function fi(D,R,b,O){return(0,at.w)(G=>function fo(D,R,b,O,G){return new oo(D,R,b,O,G).apply()}(D,R,b,G.extractedUrl,O).pipe((0,Pe.U)(se=>({...G,urlAfterRedirects:se}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,Zt.b)(Sn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Sn.urlAfterRedirects},O.urlAfterRedirects=Sn.urlAfterRedirects}),function Me(D,R,b,O,G){return(0,$t.z)(se=>function Wa(D,R,b,O,G,se,ge="emptyOnly"){return new lu(D,R,b,O,G,ge,se).recognize().pipe((0,at.w)(et=>null===et?function ga(D){return new Qe.y(R=>R.error(D))}(new fs):(0,z.of)(et)))}(D,R,b,se.urlAfterRedirects,O.serialize(se.urlAfterRedirects),O,G).pipe((0,Pe.U)(ge=>({...se,targetSnapshot:ge}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,Zt.b)(Sn=>{if(O.targetSnapshot=Sn.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!Sn.extras.skipLocationChange){const us=b.urlHandlingStrategy.merge(Sn.urlAfterRedirects,Sn.rawUrl);b.setBrowserUrl(us,Sn)}b.browserUrlTree=Sn.urlAfterRedirects}const Li=new Kn(Sn.id,this.urlSerializer.serialize(Sn.extractedUrl),this.urlSerializer.serialize(Sn.urlAfterRedirects),Sn.targetSnapshot);this.events.next(Li)}));if(Nt&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:Sn,extractedUrl:Li,source:us,restoredState:jo,extras:Ea}=ge,ao=new Je(Sn,this.urlSerializer.serialize(Li),us,jo);this.events.next(ao);const Xi=Ii(Li,this.rootComponentType).snapshot;return O={...ge,targetSnapshot:Xi,urlAfterRedirects:Li,extras:{...Ea,skipLocationChange:!1,replaceUrl:!1}},(0,z.of)(O)}{const Sn="";return this.events.next(new St(ge.id,b.serializeUrl(O.extractedUrl),Sn,1)),b.rawUrlTree=ge.rawUrl,ge.resolve(null),Mt.E}}),(0,Zt.b)(ge=>{const et=new Sr(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot);this.events.next(et)}),(0,Pe.U)(ge=>O={...ge,guards:Io(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)}),function Nn(D,R){return(0,$t.z)(b=>{const{targetSnapshot:O,currentSnapshot:G,guards:{canActivateChecks:se,canDeactivateChecks:ge}}=b;return 0===ge.length&&0===se.length?(0,z.of)({...b,guardsResult:!0}):function Ni(D,R,b,O){return(0,ie.D)(D).pipe((0,$t.z)(G=>function Oo(D,R,b,O,G){const se=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,z.of)(!0);const ge=se.map(et=>{const Nt=jr(R)??G,Rn=Cs(et,Nt);return Xt(function na(D){return D&&ji(D.canDeactivate)}(Rn)?Rn.canDeactivate(D,R,b,O):Nt.runInContext(()=>Rn(D,R,b,O))).pipe((0,on.P)())});return(0,z.of)(ge).pipe(st())}(G.component,G.route,b,R,O)),(0,on.P)(G=>!0!==G,!0))}(ge,O,G,D).pipe((0,$t.z)(et=>et&&function Na(D){return"boolean"==typeof D}(et)?function ls(D,R,b,O){return(0,ie.D)(R).pipe(Yt(G=>(0,Ie.z)(function No(D,R){return null!==D&&R&&R(new ws(D)),(0,z.of)(!0)}(G.route.parent,O),function Qo(D,R){return null!==D&&R&&R(new Hs(D)),(0,z.of)(!0)}(G.route,O),function To(D,R,b){const O=R[R.length-1],se=R.slice(0,R.length-1).reverse().map(ge=>function Do(D){const R=D.routeConfig?D.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:D,guards:R}:null}(ge)).filter(ge=>null!==ge).map(ge=>we(()=>{const et=ge.guards.map(Nt=>{const Rn=jr(ge.node)??b,Sn=Cs(Nt,Rn);return Xt(function Rl(D){return D&&ji(D.canActivateChild)}(Sn)?Sn.canActivateChild(O,D):Rn.runInContext(()=>Sn(O,D))).pipe((0,on.P)())});return(0,z.of)(et).pipe(st())}));return(0,z.of)(se).pipe(st())}(D,G.path,b),function ol(D,R,b){const O=R.routeConfig?R.routeConfig.canActivate:null;if(!O||0===O.length)return(0,z.of)(!0);const G=O.map(se=>we(()=>{const ge=jr(R)??b,et=Cs(se,ge);return Xt(function sl(D){return D&&ji(D.canActivate)}(et)?et.canActivate(R,D):ge.runInContext(()=>et(R,D))).pipe((0,on.P)())}));return(0,z.of)(G).pipe(st())}(D,G.route,b))),(0,on.P)(G=>!0!==G,!0))}(O,se,D,R):(0,z.of)(et)),(0,Pe.U)(et=>({...b,guardsResult:et})))})}(this.environmentInjector,ge=>this.events.next(ge)),(0,Zt.b)(ge=>{if(O.guardsResult=ge.guardsResult,Tn(ge.guardsResult))throw zs(0,ge.guardsResult);const et=new tr(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.events.next(et)}),(0,Y.h)(ge=>!!ge.guardsResult||(b.restoreHistory(ge),this.cancelNavigationTransition(ge,"",3),!1)),kn(ge=>{if(ge.guards.canActivateChecks.length)return(0,z.of)(ge).pipe((0,Zt.b)(et=>{const Nt=new ti(et.id,this.urlSerializer.serialize(et.extractedUrl),this.urlSerializer.serialize(et.urlAfterRedirects),et.targetSnapshot);this.events.next(Nt)}),(0,at.w)(et=>{let Nt=!1;return(0,z.of)(et).pipe(function wt(D,R){return(0,$t.z)(b=>{const{targetSnapshot:O,guards:{canActivateChecks:G}}=b;if(!G.length)return(0,z.of)(b);let se=0;return(0,ie.D)(G).pipe(Yt(ge=>function Ft(D,R,b,O){const G=D.routeConfig,se=D._resolve;return void 0!==G?.title&&!ui(G)&&(se[nn]=G.title),function sn(D,R,b,O){const G=function Si(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===G.length)return(0,z.of)({});const se={};return(0,ie.D)(G).pipe((0,$t.z)(ge=>function yr(D,R,b,O){const G=jr(R)??O,se=Cs(D,G);return Xt(se.resolve?se.resolve(R,b):G.runInContext(()=>se(R,b)))}(D[ge],R,b,O).pipe((0,on.P)(),(0,Zt.b)(et=>{se[ge]=et}))),br(1),function ze(D){return(0,Pe.U)(()=>D)}(se),Gt(ge=>B(ge)?Mt.E:ht(ge)))}(se,D,R,O).pipe((0,Pe.U)(ge=>(D._resolvedData=ge,D.data=xs(D,b).resolve,G&&ui(G)&&(D.data[nn]=G.title),null)))}(ge.route,O,D,R)),(0,Zt.b)(()=>se++),br(1),(0,$t.z)(ge=>se===G.length?(0,z.of)(b):Mt.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,Zt.b)({next:()=>Nt=!0,complete:()=>{Nt||(b.restoreHistory(et),this.cancelNavigationTransition(et,"",2))}}))}),(0,Zt.b)(et=>{const Nt=new Is(et.id,this.urlSerializer.serialize(et.extractedUrl),this.urlSerializer.serialize(et.urlAfterRedirects),et.targetSnapshot);this.events.next(Nt)}))}),kn(ge=>{const et=Nt=>{const Rn=[];Nt.routeConfig?.loadComponent&&!Nt.routeConfig._loadedComponent&&Rn.push(this.configLoader.loadComponent(Nt.routeConfig).pipe((0,Zt.b)(Sn=>{Nt.component=Sn}),(0,Pe.U)(()=>{})));for(const Sn of Nt.children)Rn.push(...et(Sn));return Rn};return(0,Ge.a)(et(ge.targetSnapshot.root)).pipe((0,Jn.d)(),(0,Lt.q)(1))}),kn(()=>this.afterPreactivation()),(0,Pe.U)(ge=>{const et=function ro(D,R,b){const O=ha(D,R._root,b?b._root:void 0);return new vi(O,R)}(b.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return O={...ge,targetRouterState:et}}),(0,Zt.b)(ge=>{b.currentUrlTree=ge.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),b.routerState=ge.targetRouterState,"deferred"===b.urlUpdateStrategy&&(ge.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,ge),b.browserUrlTree=ge.urlAfterRedirects)}),((D,R,b)=>(0,Pe.U)(O=>(new hs(R,O.targetRouterState,O.currentRouterState,b).activate(D),O)))(this.rootContexts,b.routeReuseStrategy,ge=>this.events.next(ge)),(0,Lt.q)(1),(0,Zt.b)({next:ge=>{G=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new He(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),b.titleStrategy?.updateTitle(ge.targetRouterState.snapshot),ge.resolve(!0)},complete:()=>{G=!0}}),mt(()=>{G||se||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),Gt(ge=>{if(se=!0,Te(ge)){re(ge)||(b.navigated=!0,b.restoreHistory(O,!0));const et=new $e(O.id,this.urlSerializer.serialize(O.extractedUrl),ge.message,ge.cancellationCode);if(this.events.next(et),re(ge)){const Nt=b.urlHandlingStrategy.merge(ge.url,b.rawUrlTree),Rn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||rn(O.source)};b.scheduleNavigation(Nt,qs,null,Rn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{b.restoreHistory(O,!0);const et=new Ht(O.id,this.urlSerializer.serialize(O.extractedUrl),ge,O.targetSnapshot??void 0);this.events.next(et);try{O.resolve(b.errorHandler(ge))}catch(Nt){O.reject(Nt)}}return Mt.E}))}))}cancelNavigationTransition(b,O,G){const se=new $e(b.id,this.urlSerializer.serialize(b.extractedUrl),O,G);this.events.next(se),b.resolve(!1)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function rn(D){return D!==qs}let pt=(()=>{class D{buildTitle(b){let O,G=b.root;for(;void 0!==G;)O=this.getResolvedTitleForRoute(G)??O,G=G.children.find(se=>se.outlet===Rt);return O}getResolvedTitleForRoute(b){return b.data[nn]}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(Bt)},providedIn:"root"}),D})(),Bt=(()=>{class D extends pt{constructor(b){super(),this.title=b}updateTitle(b){const O=this.buildTitle(b);void 0!==O&&this.title.setTitle(O)}}return D.\u0275fac=function(b){return new(b||D)(_.LFG(Qt.Dx))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),Us=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(Vc)},providedIn:"root"}),D})();class bu{shouldDetach(R){return!1}store(R,b){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,b){return R.routeConfig===b.routeConfig}}let Vc=(()=>{class D extends bu{}return D.\u0275fac=function(){let R;return function(O){return(R||(R=_.n5z(D)))(O||D)}}(),D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const cu=new _.OlP("",{providedIn:"root",factory:()=>({})});let cc=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(ma)},providedIn:"root"}),D})(),ma=(()=>{class D{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,O){return b}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Cu(D){throw D}function ll(D,R,b){return R.parse("/")}const Pu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wn=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(cu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Cu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ll,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(cc),this.routeReuseStrategy=(0,_.f3M)(Us),this.urlCreationStrategy=(0,_.f3M)(da),this.titleStrategy=(0,_.f3M)(pt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Hr((0,_.f3M)(ir,{optional:!0})??[]),this.navigationTransitions=(0,_.f3M)(Ws),this.urlSerializer=(0,_.f3M)(Kr),this.location=(0,_.f3M)(Ze.Ye),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ii(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(b=>{this.lastSuccessfulId=b.id,this.currentPageId=this.browserPageId??0},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qs,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const O="popstate"===b.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,O,b.state)},0)}))}navigateToSyncWithBrowser(b,O,G){const se={replaceUrl:!0},ge=G?.navigationId?G:null;if(G){const Nt={...G};delete Nt.navigationId,delete Nt.\u0275routerPageId,0!==Object.keys(Nt).length&&(se.state=Nt)}const et=this.parseUrl(b);this.scheduleNavigation(et,O,ge,se)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(ki),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,O={}){const{relativeTo:G,queryParams:se,fragment:ge,queryParamsHandling:et,preserveFragment:Nt}=O,Rn=Nt?this.currentUrlTree.fragment:ge;let Sn=null;switch(et){case"merge":Sn={...this.currentUrlTree.queryParams,...se};break;case"preserve":Sn=this.currentUrlTree.queryParams;break;default:Sn=se||null}return null!==Sn&&(Sn=this.removeEmptyProps(Sn)),this.urlCreationStrategy.createUrlTree(G,this.routerState,this.currentUrlTree,b,Sn,Rn??null)}navigateByUrl(b,O={skipLocationChange:!1}){const G=Tn(b)?b:this.parseUrl(b),se=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(se,qs,null,O)}navigate(b,O={skipLocationChange:!1}){return function ul(D){for(let R=0;R<D.length;R++){const b=D[R];if(null==b)throw new _.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,O),O)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let O;try{O=this.urlSerializer.parse(b)}catch(G){O=this.malformedUriErrorHandler(G,this.urlSerializer,b)}return O}isActive(b,O){let G;if(G=!0===O?{...Pu}:!1===O?{...Bs}:O,Tn(b))return jn(this.currentUrlTree,b,G);const se=this.parseUrl(b);return jn(this.currentUrlTree,se,G)}removeEmptyProps(b){return Object.keys(b).reduce((O,G)=>{const se=b[G];return null!=se&&(O[G]=se),O},{})}scheduleNavigation(b,O,G,se,ge){if(this.disposed)return Promise.resolve(!1);let et,Nt,Rn,Sn;return ge?(et=ge.resolve,Nt=ge.reject,Rn=ge.promise):Rn=new Promise((Li,us)=>{et=Li,Nt=us}),Sn="computed"===this.canceledNavigationResolution?G&&G.\u0275routerPageId?G.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Sn,source:O,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:se,resolve:et,reject:Nt,promise:Rn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rn.catch(Li=>Promise.reject(Li))}setBrowserUrl(b,O){const G=this.urlSerializer.serialize(b);if(this.location.isCurrentPathEqualTo(G)||O.extras.replaceUrl){const ge={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(G,"",ge)}else{const se={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.go(G,"",se)}}restoreHistory(b,O=!1){if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-(this.browserPageId??this.currentPageId);0!==se?this.location.historyGo(se):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===se&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,O){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:O}:{navigationId:b}}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),Zl=(()=>{class D{constructor(b,O,G,se,ge,et){this.router=b,this.route=O,this.tabIndexAttribute=G,this.renderer=se,this.el=ge,this.locationStrategy=et,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Le.x;const Nt=ge.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Nt||"area"===Nt,this.isAnchorElement?this.subscription=b.events.subscribe(Rn=>{Rn instanceof He&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,_.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,_.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,_.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,O,G,se,ge){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||O||G||se||ge||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const b=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(b,O){const G=this.renderer,se=this.el.nativeElement;null!==O?G.setAttribute(se,b,O):G.removeAttribute(se,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(b){return new(b||D)(_.Y36(Wn),_.Y36(Bi),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Ze.S$))},D.\u0275dir=_.lG2({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&_.NdJ("click",function(se){return O.onClick(se.button,se.ctrlKey,se.shiftKey,se.altKey,se.metaKey)}),2&b&&_.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),D})(),ps=(()=>{class D{get isActive(){return this._isActive}constructor(b,O,G,se,ge){this.router=b,this.element=O,this.renderer=G,this.cdr=se,this.link=ge,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=b.events.subscribe(et=>{et instanceof He&&this.update()})}ngAfterContentInit(){(0,z.of)(this.links.changes,(0,z.of)(null)).pipe((0,Ot.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const b=[...this.links.toArray(),this.link].filter(O=>!!O).map(O=>O.onChanges);this.linkInputChangesSubscription=(0,ie.D)(b).pipe((0,Ot.J)()).subscribe(O=>{this._isActive!==this.isLinkActive(this.router)(O)&&this.update()})}set routerLinkActive(b){const O=Array.isArray(b)?b:b.split(" ");this.classes=O.filter(G=>!!G)}ngOnChanges(b){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this._isActive!==b&&(this._isActive=b,this.cdr.markForCheck(),this.classes.forEach(O=>{b?this.renderer.addClass(this.element.nativeElement,O):this.renderer.removeClass(this.element.nativeElement,O)}),b&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(b))})}isLinkActive(b){const O=function ar(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return G=>!!G.urlTree&&b.isActive(G.urlTree,O)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.links.some(b)}}return D.\u0275fac=function(b){return new(b||D)(_.Y36(Wn),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(Zl,8))},D.\u0275dir=_.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(b,O,G){if(1&b&&_.Suo(G,Zl,5),2&b){let se;_.iGM(se=_.CRH())&&(O.links=se)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_.TTD]}),D})();class Ka{}let zr=(()=>{class D{constructor(b,O,G,se,ge){this.router=b,this.injector=G,this.preloadingStrategy=se,this.loader=ge}setUpPreloading(){this.subscription=this.router.events.pipe((0,Y.h)(b=>b instanceof He),Yt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,O){const G=[];for(const se of O){se.providers&&!se._injector&&(se._injector=(0,_.MMx)(se.providers,b,`Route: ${se.path}`));const ge=se._injector??b,et=se._loadedInjector??ge;(se.loadChildren&&!se._loadedRoutes&&void 0===se.canLoad||se.loadComponent&&!se._loadedComponent)&&G.push(this.preloadConfig(ge,se)),(se.children||se._loadedRoutes)&&G.push(this.processRoutes(et,se.children??se._loadedRoutes))}return(0,ie.D)(G).pipe((0,Ot.J)())}preloadConfig(b,O){return this.preloadingStrategy.preload(O,()=>{let G;G=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(b,O):(0,z.of)(null);const se=G.pipe((0,$t.z)(ge=>null===ge?(0,z.of)(void 0):(O._loadedRoutes=ge.routes,O._loadedInjector=ge.injector,this.processRoutes(ge.injector??b,ge.routes))));if(O.loadComponent&&!O._loadedComponent){const ge=this.loader.loadComponent(O);return(0,ie.D)([se,ge]).pipe((0,Ot.J)())}return se})}}return D.\u0275fac=function(b){return new(b||D)(_.LFG(Wn),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Ka),_.LFG($i))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const _n=new _.OlP("");let La=(()=>{class D{constructor(b,O,G,se,ge={}){this.urlSerializer=b,this.transitions=O,this.viewportScroller=G,this.zone=se,this.options=ge,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ge.scrollPositionRestoration=ge.scrollPositionRestoration||"disabled",ge.anchorScrolling=ge.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Je?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof He&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Or&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Or(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return D.\u0275fac=function(b){_.$Z()},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac}),D})();var Ys=(()=>((Ys=Ys||{})[Ys.COMPLETE=0]="COMPLETE",Ys[Ys.FAILED=1]="FAILED",Ys[Ys.REDIRECTING=2]="REDIRECTING",Ys))();const cl=!1;function ra(D,R){return{\u0275kind:D,\u0275providers:R}}const ia=new _.OlP("",{providedIn:"root",factory:()=>!1});function hl(){const D=(0,_.f3M)(_.zs3);return R=>{const b=D.get(_.z2F);if(R!==b.components[0])return;const O=D.get(Wn),G=D.get(Yl);1===D.get(Ms)&&O.initialNavigation(),D.get(ci,null,_.XFs.Optional)?.setUpPreloading(),D.get(_n,null,_.XFs.Optional)?.init(),O.resetRootComponentType(b.componentTypes[0]),G.closed||(G.next(),G.complete(),G.unsubscribe())}}const Yl=new _.OlP(cl?"bootstrap done indicator":"",{factory:()=>new Le.x}),Ms=new _.OlP(cl?"initial navigation":"",{providedIn:"root",factory:()=>1});function Du(){let D=[];return D=cl?[{provide:_.Xts,multi:!0,useFactory:()=>{const R=(0,_.f3M)(Wn);return()=>R.events.subscribe(b=>{console.group?.(`Router Event: ${b.constructor.name}`),console.log(function Br(D){if(!("type"in D))return`Unknown Router Event: ${D.constructor.name}`;switch(D.type){case 14:return`ActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state}, shouldActivate: ${D.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 2:return`NavigationCancel(id: ${D.id}, url: '${D.url}')`;case 16:return`NavigationSkipped(id: ${D.id}, url: '${D.url}')`;case 1:return`NavigationEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${D.id}, url: '${D.url}', error: ${D.error})`;case 0:return`NavigationStart(id: ${D.id}, url: '${D.url}')`;case 6:return`ResolveEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 5:return`ResolveStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 10:return`RouteConfigLoadEnd(path: ${D.route.path})`;case 9:return`RouteConfigLoadStart(path: ${D.route.path})`;case 4:return`RoutesRecognized(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 15:return`Scroll(anchor: '${D.anchor}', position: '${D.position?`${D.position[0]}, ${D.position[1]}`:null}')`}}(b)),console.log(b),console.groupEnd?.()})}}]:[],ra(1,D)}const ci=new _.OlP(cl?"router preloader":"");function fu(D){return ra(0,[{provide:ci,useExisting:zr},{provide:Ka,useExisting:D}])}const Xo=!1,dc=new _.OlP(Xo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ql=[Ze.Ye,{provide:Kr,useClass:$n},Wn,qe,{provide:Bi,useFactory:function kl(D){return D.routerState.root},deps:[Wn]},$i,Xo?{provide:ia,useValue:!0}:[]];function qu(){return new _.PXZ("Router",Wn)}let Ao=(()=>{class D{constructor(b){}static forRoot(b,O){return{ngModule:D,providers:[Ql,Xo&&O?.enableTracing?Du().\u0275providers:[],{provide:ir,multi:!0,useValue:b},{provide:dc,useFactory:Ds,deps:[[Wn,new _.FiY,new _.tp0]]},{provide:cu,useValue:O||{}},O?.useHash?{provide:Ze.S$,useClass:Ze.Do}:{provide:Ze.S$,useClass:Ze.b0},{provide:_n,useFactory:()=>{const D=(0,_.f3M)(Ze.EM),R=(0,_.f3M)(_.R0b),b=(0,_.f3M)(cu),O=(0,_.f3M)(Ws),G=(0,_.f3M)(Kr);return b.scrollOffset&&D.setOffset(b.scrollOffset),new La(G,O,D,R,b)}},O?.preloadingStrategy?fu(O.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:qu},O?.initialNavigation?Ro(O):[],[{provide:_a,useFactory:hl},{provide:_.tb,multi:!0,useExisting:_a}]]}}static forChild(b){return{ngModule:D,providers:[{provide:ir,multi:!0,useValue:b}]}}}return D.\u0275fac=function(b){return new(b||D)(_.LFG(dc,8))},D.\u0275mod=_.oAB({type:D}),D.\u0275inj=_.cJS({imports:[or]}),D})();function Ds(D){if(Xo&&D)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ro(D){return["disabled"===D.initialNavigation?ra(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const R=(0,_.f3M)(Wn);return()=>{R.setUpLocationChangeListener()}}},{provide:Ms,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?ra(2,[{provide:Ms,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:R=>{const b=R.get(Ze.V_,Promise.resolve());return()=>b.then(()=>new Promise(O=>{const G=R.get(Wn),se=R.get(Yl);(function Bo(D,R){D.events.pipe((0,Y.h)(b=>b instanceof He||b instanceof $e||b instanceof Ht||b instanceof St),(0,Pe.U)(b=>b instanceof He||b instanceof St?Ys.COMPLETE:b instanceof $e&&(0===b.code||1===b.code)?Ys.REDIRECTING:Ys.FAILED),(0,Y.h)(b=>b!==Ys.REDIRECTING),(0,Lt.q)(1)).subscribe(()=>{R()})})(G,()=>{O(!0)}),R.get(Ws).afterPreactivation=()=>(O(!0),se.closed?(0,z.of)(void 0):se),G.initialNavigation()}))}}]).\u0275providers:[]]}const _a=new _.OlP(Xo?"Router Initializer":"")},3942:(fn,lt,K)=>{K.d(lt,{Z:()=>Mt});var _=K(2090),ie=K(4859),z=K(6881),Le=K(1877);class Se{constructor(ct,_t){this._delegate=ct,this.firebase=_t,(0,z._addComponent)(ct,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this._delegate.automaticDataCollectionEnabled=ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ct=>{this._delegate.checkDestroyed(),ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(ct,_t=z._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const It=this._delegate.container.getProvider(ct);return!It.isInitialized()&&"EXPLICIT"===(null===(At=It.getComponent())||void 0===At?void 0:At.instantiationMode)&&It.initialize(),It.getImmediate({identifier:_t})}_removeServiceInstance(ct,_t=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ct).clearInstance(_t)}_addComponent(ct){(0,z._addComponent)(this._delegate,ct)}_addOrOverwriteComponent(ct){(0,z._addOrOverwriteComponent)(this._delegate,ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ge=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function Qe(){const qt=function Ie(qt){const ct={},_t={__esModule:!0,initializeApp:function Ze(gt,Y={}){const $t=z.initializeApp(gt,Y);if((0,_.r3)(ct,$t.name))return ct[$t.name];const on=new qt($t,_t);return ct[$t.name]=on,on},app:It,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function at(gt){const Y=gt.name,$t=Y.replace("-compat","");if(z._registerComponent(gt)&&"PUBLIC"===gt.type){const on=(Yt=It())=>{if("function"!=typeof Yt[$t])throw Ge.create("invalid-app-argument",{appName:Y});return Yt[$t]()};void 0!==gt.serviceProps&&(0,_.ZB)(on,gt.serviceProps),_t[$t]=on,qt.prototype[$t]=function(...Yt){return this._getService.bind(this,Y).apply(this,gt.multipleInstances?Yt:[])}}return"PUBLIC"===gt.type?_t[$t]:null},removeApp:function At(gt){delete ct[gt]},useAsService:function Lt(gt,Y){return"serverAuth"===Y?null:Y},modularAPIs:z}};function It(gt){if(!(0,_.r3)(ct,gt=gt||z._DEFAULT_ENTRY_NAME))throw Ge.create("no-app",{appName:gt});return ct[gt]}return _t.default=_t,Object.defineProperty(_t,"apps",{get:function Pe(){return Object.keys(ct).map(gt=>ct[gt])}}),It.App=qt,_t}(Se);return qt.INTERNAL=Object.assign(Object.assign({},qt.INTERNAL),{createFirebaseNamespace:Qe,extendNamespace:function ct(_t){(0,_.ZB)(qt,_t)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),qt}(),we=new Le.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qt=self.firebase.SDK_VERSION;qt&&qt.indexOf("LITE")>=0&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Mt=he;!function ht(qt){(0,z.registerVersion)("@firebase/app-compat","0.2.13",qt)}()},6881:(fn,lt,K)=>{K.r(lt),K.d(lt,{FirebaseError:()=>Le.ZR,SDK_VERSION:()=>Kr,_DEFAULT_ENTRY_NAME:()=>jn,_addComponent:()=>cn,_addOrOverwriteComponent:()=>An,_apps:()=>Yn,_clearComponents:()=>Qr,_components:()=>er,_getProvider:()=>ii,_registerComponent:()=>Yr,_removeServiceInstance:()=>wn,deleteApp:()=>Jr,getApp:()=>Nr,getApps:()=>an,initializeApp:()=>$n,onLog:()=>Yi,registerVersion:()=>Mi,setLogLevel:()=>ss});var _=K(5861),ie=K(4859),z=K(1877),Le=K(2090);const Se=(Et,ot)=>ot.some(zt=>Et instanceof zt);let je,Ge;const he=new WeakMap,we=new WeakMap,Oe=new WeakMap,dt=new WeakMap,ht=new WeakMap;let ct={get(Et,ot,zt){if(Et instanceof IDBTransaction){if("done"===ot)return we.get(Et);if("objectStoreNames"===ot)return Et.objectStoreNames||Oe.get(Et);if("store"===ot)return zt.objectStoreNames[1]?void 0:zt.objectStore(zt.objectStoreNames[0])}return Ze(Et[ot])},set:(Et,ot,zt)=>(Et[ot]=zt,!0),has:(Et,ot)=>Et instanceof IDBTransaction&&("done"===ot||"store"===ot)||ot in Et};function It(Et){return"function"==typeof Et?function At(Et){return Et!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qe(){return Ge||(Ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Et)?function(...ot){return Et.apply(Pe(this),ot),Ze(he.get(this))}:function(...ot){return Ze(Et.apply(Pe(this),ot))}:function(ot,...zt){const yn=Et.call(Pe(this),ot,...zt);return Oe.set(yn,ot.sort?ot.sort():[ot]),Ze(yn)}}(Et):(Et instanceof IDBTransaction&&function qt(Et){if(we.has(Et))return;const ot=new Promise((zt,yn)=>{const zn=()=>{Et.removeEventListener("complete",hr),Et.removeEventListener("error",In),Et.removeEventListener("abort",In)},hr=()=>{zt(),zn()},In=()=>{yn(Et.error||new DOMException("AbortError","AbortError")),zn()};Et.addEventListener("complete",hr),Et.addEventListener("error",In),Et.addEventListener("abort",In)});we.set(Et,ot)}(Et),Se(Et,function Ie(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Et,ct):Et)}function Ze(Et){if(Et instanceof IDBRequest)return function Mt(Et){const ot=new Promise((zt,yn)=>{const zn=()=>{Et.removeEventListener("success",hr),Et.removeEventListener("error",In)},hr=()=>{zt(Ze(Et.result)),zn()},In=()=>{yn(Et.error),zn()};Et.addEventListener("success",hr),Et.addEventListener("error",In)});return ot.then(zt=>{zt instanceof IDBCursor&&he.set(zt,Et)}).catch(()=>{}),ht.set(ot,Et),ot}(Et);if(dt.has(Et))return dt.get(Et);const ot=It(Et);return ot!==Et&&(dt.set(Et,ot),ht.set(ot,Et)),ot}const Pe=Et=>ht.get(Et),gt=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],$t=new Map;function on(Et,ot){if(!(Et instanceof IDBDatabase)||ot in Et||"string"!=typeof ot)return;if($t.get(ot))return $t.get(ot);const zt=ot.replace(/FromIndex$/,""),yn=ot!==zt,zn=Y.includes(zt);if(!(zt in(yn?IDBIndex:IDBObjectStore).prototype)||!zn&&!gt.includes(zt))return;const hr=function(){var In=(0,_.Z)(function*(Ur,...kr){const Ui=this.transaction(Ur,zn?"readwrite":"readonly");let ns=Ui.store;return yn&&(ns=ns.index(kr.shift())),(yield Promise.all([ns[zt](...kr),zn&&Ui.done]))[0]});return function(kr){return In.apply(this,arguments)}}();return $t.set(ot,hr),hr}!function _t(Et){ct=Et(ct)}(Et=>({...Et,get:(ot,zt,yn)=>on(ot,zt)||Et.get(ot,zt,yn),has:(ot,zt)=>!!on(ot,zt)||Et.has(ot,zt)}));class Yt{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(zt=>{if(function Zt(Et){return"VERSION"===Et.getComponent()?.type}(zt)){const yn=zt.getImmediate();return`${yn.library}/${yn.version}`}return null}).filter(zt=>zt).join(" ")}}const Gt="@firebase/app",br=new z.Yd("@firebase/app"),jn="[DEFAULT]",ri={[Gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,er=new Map;function cn(Et,ot){try{Et.container.addComponent(ot)}catch(zt){br.debug(`Component ${ot.name} failed to register with FirebaseApp ${Et.name}`,zt)}}function An(Et,ot){Et.container.addOrOverwriteComponent(ot)}function Yr(Et){const ot=Et.name;if(er.has(ot))return br.debug(`There were multiple attempts to register component ${ot}.`),!1;er.set(ot,Et);for(const zt of Yn.values())cn(zt,Et);return!0}function ii(Et,ot){const zt=Et.container.getProvider("heartbeat").getImmediate({optional:!0});return zt&&zt.triggerHeartbeat(),Et.container.getProvider(ot)}function wn(Et,ot,zt=jn){ii(Et,ot).clearInstance(zt)}function Qr(){er.clear()}const Xr=new Le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cr{constructor(ot,zt,yn){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},zt),this._name=zt.name,this._automaticDataCollectionEnabled=zt.automaticDataCollectionEnabled,this._container=yn,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}const Kr="9.23.0";function $n(Et,ot={}){let zt=Et;"object"!=typeof ot&&(ot={name:ot});const yn=Object.assign({name:jn,automaticDataCollectionEnabled:!1},ot),zn=yn.name;if("string"!=typeof zn||!zn)throw Xr.create("bad-app-name",{appName:String(zn)});if(zt||(zt=(0,Le.aH)()),!zt)throw Xr.create("no-options");const hr=Yn.get(zn);if(hr){if((0,Le.vZ)(zt,hr.options)&&(0,Le.vZ)(yn,hr.config))return hr;throw Xr.create("duplicate-app",{appName:zn})}const In=new ie.H0(zn);for(const kr of er.values())In.addComponent(kr);const Ur=new cr(zt,yn,In);return Yn.set(zn,Ur),Ur}function Nr(Et=jn){const ot=Yn.get(Et);if(!ot&&Et===jn&&(0,Le.aH)())return $n();if(!ot)throw Xr.create("no-app",{appName:Et});return ot}function an(){return Array.from(Yn.values())}function Jr(Et){return Di.apply(this,arguments)}function Di(){return(Di=(0,_.Z)(function*(Et){const ot=Et.name;Yn.has(ot)&&(Yn.delete(ot),yield Promise.all(Et.container.getProviders().map(zt=>zt.delete())),Et.isDeleted=!0)})).apply(this,arguments)}function Mi(Et,ot,zt){var yn;let zn=null!==(yn=ri[Et])&&void 0!==yn?yn:Et;zt&&(zn+=`-${zt}`);const hr=zn.match(/\s|\//),In=ot.match(/\s|\//);if(hr||In){const Ur=[`Unable to register library "${zn}" with version "${ot}":`];return hr&&Ur.push(`library name "${zn}" contains illegal characters (whitespace or "/")`),hr&&In&&Ur.push("and"),In&&Ur.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void br.warn(Ur.join(" "))}Yr(new ie.wA(`${zn}-version`,()=>({library:zn,version:ot}),"VERSION"))}function Yi(Et,ot){if(null!==Et&&"function"!=typeof Et)throw Xr.create("invalid-log-argument");(0,z.Am)(Et,ot)}function ss(Et){(0,z.Ub)(Et)}const Pi="firebase-heartbeat-database",Vi=1,Ne="firebase-heartbeat-store";let Re=null;function ce(){return Re||(Re=function at(Et,ot,{blocked:zt,upgrade:yn,blocking:zn,terminated:hr}={}){const In=indexedDB.open(Et,ot),Ur=Ze(In);return yn&&In.addEventListener("upgradeneeded",kr=>{yn(Ze(In.result),kr.oldVersion,kr.newVersion,Ze(In.transaction),kr)}),zt&&In.addEventListener("blocked",kr=>zt(kr.oldVersion,kr.newVersion,kr)),Ur.then(kr=>{hr&&kr.addEventListener("close",()=>hr()),zn&&kr.addEventListener("versionchange",Ui=>zn(Ui.oldVersion,Ui.newVersion,Ui))}).catch(()=>{}),Ur}(Pi,Vi,{upgrade:(Et,ot)=>{0===ot&&Et.createObjectStore(Ne)}}).catch(Et=>{throw Xr.create("idb-open",{originalErrorMessage:Et.message})})),Re}function oe(){return(oe=(0,_.Z)(function*(Et){try{return yield(yield ce()).transaction(Ne).objectStore(Ne).get(De(Et))}catch(ot){if(ot instanceof Le.ZR)br.warn(ot.message);else{const zt=Xr.create("idb-get",{originalErrorMessage:ot?.message});br.warn(zt.message)}}})).apply(this,arguments)}function Be(Et,ot){return be.apply(this,arguments)}function be(){return(be=(0,_.Z)(function*(Et,ot){try{const yn=(yield ce()).transaction(Ne,"readwrite");yield yn.objectStore(Ne).put(ot,De(Et)),yield yn.done}catch(zt){if(zt instanceof Le.ZR)br.warn(zt.message);else{const yn=Xr.create("idb-set",{originalErrorMessage:zt?.message});br.warn(yn.message)}}})).apply(this,arguments)}function De(Et){return`${Et.name}!${Et.options.appId}`}class it{constructor(ot){this.container=ot,this._heartbeatsCache=null;const zt=this.container.getProvider("app").getImmediate();this._storage=new Tn(zt),this._heartbeatsCachePromise=this._storage.read().then(yn=>(this._heartbeatsCache=yn,yn))}triggerHeartbeat(){var ot=this;return(0,_.Z)(function*(){const yn=ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zn=Pt();if(null===ot._heartbeatsCache&&(ot._heartbeatsCache=yield ot._heartbeatsCachePromise),ot._heartbeatsCache.lastSentHeartbeatDate!==zn&&!ot._heartbeatsCache.heartbeats.some(hr=>hr.date===zn))return ot._heartbeatsCache.heartbeats.push({date:zn,agent:yn}),ot._heartbeatsCache.heartbeats=ot._heartbeatsCache.heartbeats.filter(hr=>{const In=new Date(hr.date).valueOf();return Date.now()-In<=2592e6}),ot._storage.overwrite(ot._heartbeatsCache)})()}getHeartbeatsHeader(){var ot=this;return(0,_.Z)(function*(){if(null===ot._heartbeatsCache&&(yield ot._heartbeatsCachePromise),null===ot._heartbeatsCache||0===ot._heartbeatsCache.heartbeats.length)return"";const zt=Pt(),{heartbeatsToSend:yn,unsentEntries:zn}=function Dn(Et,ot=1024){const zt=[];let yn=Et.slice();for(const zn of Et){const hr=zt.find(In=>In.agent===zn.agent);if(hr){if(hr.dates.push(zn.date),qr(zt)>ot){hr.dates.pop();break}}else if(zt.push({agent:zn.agent,dates:[zn.date]}),qr(zt)>ot){zt.pop();break}yn=yn.slice(1)}return{heartbeatsToSend:zt,unsentEntries:yn}}(ot._heartbeatsCache.heartbeats),hr=(0,Le.L)(JSON.stringify({version:2,heartbeats:yn}));return ot._heartbeatsCache.lastSentHeartbeatDate=zt,zn.length>0?(ot._heartbeatsCache.heartbeats=zn,yield ot._storage.overwrite(ot._heartbeatsCache)):(ot._heartbeatsCache.heartbeats=[],ot._storage.overwrite(ot._heartbeatsCache)),hr})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Tn{constructor(ot){this.app=ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Le.hl)()&&(0,Le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ot=this;return(0,_.Z)(function*(){return(yield ot._canUseIndexedDBPromise)&&(yield function ye(Et){return oe.apply(this,arguments)}(ot.app))||{heartbeats:[]}})()}overwrite(ot){var zt=this;return(0,_.Z)(function*(){var yn;if(yield zt._canUseIndexedDBPromise){const hr=yield zt.read();return Be(zt.app,{lastSentHeartbeatDate:null!==(yn=ot.lastSentHeartbeatDate)&&void 0!==yn?yn:hr.lastSentHeartbeatDate,heartbeats:ot.heartbeats})}})()}add(ot){var zt=this;return(0,_.Z)(function*(){var yn;if(yield zt._canUseIndexedDBPromise){const hr=yield zt.read();return Be(zt.app,{lastSentHeartbeatDate:null!==(yn=ot.lastSentHeartbeatDate)&&void 0!==yn?yn:hr.lastSentHeartbeatDate,heartbeats:[...hr.heartbeats,...ot.heartbeats]})}})()}}function qr(Et){return(0,Le.L)(JSON.stringify({version:2,heartbeats:Et})).length}!function os(Et){Yr(new ie.wA("platform-logger",ot=>new Yt(ot),"PRIVATE")),Yr(new ie.wA("heartbeat",ot=>new it(ot),"PRIVATE")),Mi(Gt,"0.9.13",Et),Mi(Gt,"0.9.13","esm2017"),Mi("fire-js","")}("")},4859:(fn,lt,K)=>{K.d(lt,{H0:()=>Ie,wA:()=>z,zt:()=>Se});var _=K(5861),ie=K(2090);class z{constructor(he,we,Oe){this.name=he,this.instanceFactory=we,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const Le="[DEFAULT]";class Se{constructor(he,we){this.name=he,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const we=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(we)){const Oe=new ie.BH;if(this.instancesDeferred.set(we,Oe),this.isInitialized(we)||this.shouldAutoInitialize())try{const dt=this.getOrInitializeService({instanceIdentifier:we});dt&&Oe.resolve(dt)}catch{}}return this.instancesDeferred.get(we).promise}getImmediate(he){var we;const Oe=this.normalizeInstanceIdentifier(he?.identifier),dt=null!==(we=he?.optional)&&void 0!==we&&we;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(ht){if(dt)return null;throw ht}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Ge(Qe){return"EAGER"===Qe.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:Le})}catch{}for(const[we,Oe]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(we);try{const ht=this.getOrInitializeService({instanceIdentifier:dt});Oe.resolve(ht)}catch{}}}}clearInstance(he=Le){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,_.Z)(function*(){const we=Array.from(he.instances.values());yield Promise.all([...we.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...we.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=Le){return this.instances.has(he)}getOptions(he=Le){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:we={}}=he,Oe=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const dt=this.getOrInitializeService({instanceIdentifier:Oe,options:we});for(const[ht,Mt]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(ht)&&Mt.resolve(dt);return dt}onInit(he,we){var Oe;const dt=this.normalizeInstanceIdentifier(we),ht=null!==(Oe=this.onInitCallbacks.get(dt))&&void 0!==Oe?Oe:new Set;ht.add(he),this.onInitCallbacks.set(dt,ht);const Mt=this.instances.get(dt);return Mt&&he(Mt,dt),()=>{ht.delete(he)}}invokeOnInitCallbacks(he,we){const Oe=this.onInitCallbacks.get(we);if(Oe)for(const dt of Oe)try{dt(he,we)}catch{}}getOrInitializeService({instanceIdentifier:he,options:we={}}){let Oe=this.instances.get(he);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(Qe=he,Qe===Le?void 0:Qe),options:we}),this.instances.set(he,Oe),this.instancesOptions.set(he,we),this.invokeOnInitCallbacks(Oe,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Oe)}catch{}var Qe;return Oe||null}normalizeInstanceIdentifier(he=Le){return this.component?this.component.multipleInstances?he:Le:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const we=this.getProvider(he.name);if(we.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);we.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const we=new Se(he,this);return this.providers.set(he,we),we}getProviders(){return Array.from(this.providers.values())}}},1877:(fn,lt,K)=>{K.d(lt,{Am:()=>Qe,Ub:()=>Ie,Yd:()=>Ge,in:()=>ie});const _=[];var ie=(()=>{return(he=ie||(ie={}))[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",ie;var he})();const z={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},Le=ie.INFO,Se={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},je=(he,we,...Oe)=>{if(we<he.logLevel)return;const dt=(new Date).toISOString(),ht=Se[we];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${we})`);console[ht](`[${dt}]  ${he.name}:`,...Oe)};class Ge{constructor(we){this.name=we,this._logLevel=Le,this._logHandler=je,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(we){if(!(we in ie))throw new TypeError(`Invalid value "${we}" assigned to \`logLevel\``);this._logLevel=we}setLogLevel(we){this._logLevel="string"==typeof we?z[we]:we}get logHandler(){return this._logHandler}set logHandler(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we}get userLogHandler(){return this._userLogHandler}set userLogHandler(we){this._userLogHandler=we}debug(...we){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...we),this._logHandler(this,ie.DEBUG,...we)}log(...we){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...we),this._logHandler(this,ie.VERBOSE,...we)}info(...we){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...we),this._logHandler(this,ie.INFO,...we)}warn(...we){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...we),this._logHandler(this,ie.WARN,...we)}error(...we){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...we),this._logHandler(this,ie.ERROR,...we)}}function Ie(he){_.forEach(we=>{we.setLogLevel(he)})}function Qe(he,we){for(const Oe of _){let dt=null;we&&we.level&&(dt=z[we.level]),Oe.userLogHandler=null===he?null:(ht,Mt,...qt)=>{const ct=qt.map(_t=>{if(null==_t)return null;if("string"==typeof _t)return _t;if("number"==typeof _t||"boolean"==typeof _t)return _t.toString();if(_t instanceof Error)return _t.message;try{return JSON.stringify(_t)}catch{return null}}).filter(_t=>_t).join(" ");Mt>=(dt??ht.logLevel)&&he({level:ie[Mt].toLowerCase(),message:ct,args:qt,type:ht.name})}}}},259:(fn,lt,K)=>{K.d(lt,{C6:()=>_.getApps,KN:()=>_.registerVersion,Mq:()=>_.getApp,ZF:()=>_.initializeApp});var _=K(6881);(0,_.registerVersion)("firebase","9.23.0","app")},4322:(fn,lt,K)=>{K.d(lt,{hJ:()=>_.V,v0:()=>_.o,e5:()=>_.a9,rh:()=>_.c,SF:()=>_.z,s:()=>_.aj,gQ:()=>_.ak,ck:()=>_.ai});var _=K(1389);K(2090),K(6881),K(1877),K(4859)},9260:(fn,lt,K)=>{K.d(lt,{Z:()=>_.Z});var _=K(3942);_.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(fn,lt,K)=>{K.r(lt);var _=K(5861),ie=K(3942),z=K(1389),Le=K(2090),Ge=(K(6881),K(1877),K(4859));function Ie(){return window}const Qe=2e3;function we(){return we=(0,_.Z)(function*(ce,ye,oe){var Be;const{BuildInfo:be}=Ie();(0,z.as)(ye.sessionId,"AuthEvent did not contain a session ID");const De=yield function _t(ce){return At.apply(this,arguments)}(ye.sessionId),ve={};return(0,z.at)()?ve.ibi=be.packageName:(0,z.au)()?ve.apn=be.packageName:(0,z.av)(ce,"operation-not-supported-in-this-environment"),be.displayName&&(ve.appDisplayName=be.displayName),ve.sessionId=De,(0,z.aw)(ce,oe,ye.type,void 0,null!==(Be=ye.eventId)&&void 0!==Be?Be:void 0,ve)}),we.apply(this,arguments)}function dt(){return(dt=(0,_.Z)(function*(ce){const{BuildInfo:ye}=Ie(),oe={};(0,z.at)()?oe.iosBundleId=ye.packageName:(0,z.au)()?oe.androidPackageName=ye.packageName:(0,z.av)(ce,"operation-not-supported-in-this-environment"),yield(0,z.ax)(ce,oe)})).apply(this,arguments)}function qt(){return(qt=(0,_.Z)(function*(ce,ye,oe){const{cordova:Be}=Ie();let be=()=>{};try{yield new Promise((De,ve)=>{let We=null;function it(){var Tn;De();const qr=null===(Tn=Be.plugins.browsertab)||void 0===Tn?void 0:Tn.close;"function"==typeof qr&&qr(),"function"==typeof oe?.close&&oe.close()}function Pt(){We||(We=window.setTimeout(()=>{ve((0,z.az)(ce,"redirect-cancelled-by-user"))},Qe))}function Dn(){"visible"===document?.visibilityState&&Pt()}ye.addPassiveListener(it),document.addEventListener("resume",Pt,!1),(0,z.au)()&&document.addEventListener("visibilitychange",Dn,!1),be=()=>{ye.removePassiveListener(it),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",Dn,!1),We&&window.clearTimeout(We)}})}finally{be()}})).apply(this,arguments)}function At(){return(At=(0,_.Z)(function*(ce){const ye=function It(ce){if((0,z.as)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ce);const ye=new ArrayBuffer(ce.length),oe=new Uint8Array(ye);for(let Be=0;Be<ce.length;Be++)oe[Be]=ce.charCodeAt(Be);return oe}(ce),oe=yield crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(oe)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ze=20;class Pe extends z.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ye=>{this.resolveInialized=ye})}addPassiveListener(ye){this.passiveListeners.add(ye)}removePassiveListener(ye){this.passiveListeners.delete(ye)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ye){return this.resolveInialized(),this.passiveListeners.forEach(oe=>oe(ye)),super.onEvent(ye)}initialized(){var ye=this;return(0,_.Z)(function*(){yield ye.initPromise})()}}function gt(ce){return Y.apply(this,arguments)}function Y(){return(Y=(0,_.Z)(function*(ce){const ye=yield Yt()._get(Zt(ce));return ye&&(yield Yt()._remove(Zt(ce))),ye})).apply(this,arguments)}function on(){const ce=[],ye="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let oe=0;oe<Ze;oe++){const Be=Math.floor(Math.random()*ye.length);ce.push(ye.charAt(Be))}return ce.join("")}function Yt(){return(0,z.aC)(z.b)}function Zt(ce){return(0,z.aD)("authEvent",ce.config.apiKey,ce.name)}function br(ce){if(!ce?.includes("?"))return{};const[ye,...oe]=ce.split("?");return(0,Le.zd)(oe.join("?"))}const Ke=class Jn{constructor(){this._redirectPersistence=z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=z.aE,this._overrideRedirectResult=z.aF}_initialize(ye){var oe=this;return(0,_.Z)(function*(){const Be=ye._key();let be=oe.eventManagers.get(Be);return be||(be=new Pe(ye),oe.eventManagers.set(Be,be),oe.attachCallbackListeners(ye,be)),be})()}_openPopup(ye){(0,z.av)(ye,"operation-not-supported-in-this-environment")}_openRedirect(ye,oe,Be,be){var De=this;return(0,_.Z)(function*(){!function ct(ce){var ye,oe,Be,be,De,ve,We,it,Pt,Dn;const Tn=Ie();(0,z.aA)("function"==typeof(null===(ye=Tn?.universalLinks)||void 0===ye?void 0:ye.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,z.aA)(typeof(null===(oe=Tn?.BuildInfo)||void 0===oe?void 0:oe.packageName)<"u",ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,z.aA)("function"==typeof(null===(De=null===(be=null===(Be=Tn?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===be?void 0:be.browsertab)||void 0===De?void 0:De.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aA)("function"==typeof(null===(it=null===(We=null===(ve=Tn?.cordova)||void 0===ve?void 0:ve.plugins)||void 0===We?void 0:We.browsertab)||void 0===it?void 0:it.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aA)("function"==typeof(null===(Dn=null===(Pt=Tn?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===Dn?void 0:Dn.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ye);const ve=yield De._initialize(ye);yield ve.initialized(),ve.resetRedirect(),(0,z.aG)(),yield De._originValidation(ye);const We=function at(ce,ye,oe=null){return{type:ye,eventId:oe,urlResponse:null,sessionId:on(),postBody:null,tenantId:ce.tenantId,error:(0,z.az)(ce,"no-auth-event")}}(ye,Be,be);yield function Lt(ce,ye){return Yt()._set(Zt(ce),ye)}(ye,We);const it=yield function he(ce,ye,oe){return we.apply(this,arguments)}(ye,We,oe),Pt=yield function ht(ce){const{cordova:ye}=Ie();return new Promise(oe=>{ye.plugins.browsertab.isAvailable(Be=>{let be=null;Be?ye.plugins.browsertab.openUrl(ce):be=ye.InAppBrowser.open(ce,(0,z.ay)()?"_blank":"_system","location=yes"),oe(be)})})}(it);return function Mt(ce,ye,oe){return qt.apply(this,arguments)}(ye,ve,Pt)})()}_isIframeWebStorageSupported(ye,oe){throw new Error("Method not implemented.")}_originValidation(ye){const oe=ye._key();return this.originValidationPromises[oe]||(this.originValidationPromises[oe]=function Oe(ce){return dt.apply(this,arguments)}(ye)),this.originValidationPromises[oe]}attachCallbackListeners(ye,oe){const{universalLinks:Be,handleOpenURL:be,BuildInfo:De}=Ie(),ve=setTimeout((0,_.Z)(function*(){yield gt(ye),oe.onEvent(Ye())}),500),We=function(){var Dn=(0,_.Z)(function*(Tn){clearTimeout(ve);const qr=yield gt(ye);let os=null;qr&&Tn?.url&&(os=function $t(ce,ye){var oe,Be;const be=function Wr(ce){const ye=br(ce),oe=ye.link?decodeURIComponent(ye.link):void 0,Be=br(oe).link,be=ye.deep_link_id?decodeURIComponent(ye.deep_link_id):void 0;return br(be).link||be||Be||oe||ce}(ye);if(be.includes("/__/auth/callback")){const De=br(be),ve=De.firebaseError?function Gt(ce){try{return JSON.parse(ce)}catch{return null}}(decodeURIComponent(De.firebaseError)):null,We=null===(Be=null===(oe=ve?.code)||void 0===oe?void 0:oe.split("auth/"))||void 0===Be?void 0:Be[1],it=We?(0,z.az)(We):null;return it?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:it,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:be,postBody:null}}return null}(qr,Tn.url)),oe.onEvent(os||Ye())});return function(qr){return Dn.apply(this,arguments)}}();typeof Be<"u"&&"function"==typeof Be.subscribe&&Be.subscribe(null,We);const it=be,Pt=`${De.packageName.toLowerCase()}://`;Ie().handleOpenURL=function(){var Dn=(0,_.Z)(function*(Tn){if(Tn.toLowerCase().startsWith(Pt)&&We({url:Tn}),"function"==typeof it)try{it(Tn)}catch(qr){console.error(qr)}});return function(Tn){return Dn.apply(this,arguments)}}()}};function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,z.az)("no-auth-event")}}const Ot=1e3;function Qt(){var ce;return(null===(ce=self?.location)||void 0===ce?void 0:ce.protocol)||null}function nn(ce=(0,Le.z$)()){return!("file:"!==Qt()&&"ionic:"!==Qt()&&"capacitor:"!==Qt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){try{const ce=self.localStorage,ye=z.aL();if(ce)return ce.setItem(ye,"1"),ce.removeItem(ye),!function Qn(ce=(0,Le.z$)()){return function On(){return(0,Le.w1)()&&11===document?.documentMode}()||function gr(ce=(0,Le.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,Le.hl)()}catch{return Cr()&&(0,Le.hl)()}return!1}function Cr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hr(){return(function Rt(){return"http:"===Qt()||"https:"===Qt()}()||(0,Le.ru)()||nn())&&!function Cn(){return(0,Le.b$)()||(0,Le.UG)()}()&&_r()&&!Cr()}function Er(){return nn()&&typeof document<"u"}function Pn(){return(Pn=(0,_.Z)(function*(){return!!Er()&&new Promise(ce=>{const ye=setTimeout(()=>{ce(!1)},Ot);document.addEventListener("deviceready",()=>{clearTimeout(ye),ce(!0)})})})).apply(this,arguments)}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},yi=z.aA,Dr="persistence";function ri(ce){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,_.Z)(function*(ce){yield ce._initializationPromise;const ye=cn(),oe=z.aD(Dr,ce.config.apiKey,ce.name);ye&&ye.setItem(oe,ce._getPersistence())})).apply(this,arguments)}function cn(){var ce;try{return(null===(ce=function Xt(){return typeof window<"u"?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch{return null}}const An=z.aA;class Yr{constructor(){this.browserResolver=z.aC(z.k),this.cordovaResolver=z.aC(Ke),this.underlyingResolver=null,this._redirectPersistence=z.a,this._completeRedirectFn=z.aE,this._overrideRedirectResult=z.aF}_initialize(ye){var oe=this;return(0,_.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._initialize(ye)})()}_openPopup(ye,oe,Be,be){var De=this;return(0,_.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openPopup(ye,oe,Be,be)})()}_openRedirect(ye,oe,Be,be){var De=this;return(0,_.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openRedirect(ye,oe,Be,be)})()}_isIframeWebStorageSupported(ye,oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ye,oe)}_originValidation(ye){return this.assertedUnderlyingResolver._originValidation(ye)}get _shouldInitProactively(){return Er()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return An(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ye=this;return(0,_.Z)(function*(){if(ye.underlyingResolver)return;const oe=yield function Gr(){return Pn.apply(this,arguments)}();ye.underlyingResolver=oe?ye.cordovaResolver:ye.browserResolver})()}}function ii(ce){return ce.unwrap()}function Qr(ce){return Xr(ce)}function Xr(ce){const{_tokenResponse:ye}=ce instanceof Le.ZR?ce.customData:ce;if(!ye)return null;if(!(ce instanceof Le.ZR)&&"temporaryProof"in ye&&"phoneNumber"in ye)return z.P.credentialFromResult(ce);const oe=ye.providerId;if(!oe||oe===z.p.PASSWORD)return null;let Be;switch(oe){case z.p.GOOGLE:Be=z.V;break;case z.p.FACEBOOK:Be=z.U;break;case z.p.GITHUB:Be=z.W;break;case z.p.TWITTER:Be=z.Z;break;default:const{oauthIdToken:be,oauthAccessToken:De,oauthTokenSecret:ve,pendingToken:We,nonce:it}=ye;return De||ve||be||We?We?oe.startsWith("saml.")?z.aO._create(oe,We):z.L._fromParams({providerId:oe,signInMethod:oe,pendingToken:We,idToken:be,accessToken:De}):new z.X(oe).credential({idToken:be,accessToken:De,rawNonce:it}):null}return ce instanceof Le.ZR?Be.credentialFromError(ce):Be.credentialFromResult(ce)}function cr(ce,ye){return ye.catch(oe=>{throw oe instanceof Le.ZR&&function si(ce,ye){var oe;const Be=null===(oe=ye.customData)||void 0===oe?void 0:oe._tokenResponse;if("auth/multi-factor-auth-required"===ye?.code)ye.resolver=new Nr(ce,z.aq(ce,ye));else if(Be){const be=Xr(ye),De=ye;be&&(De.credential=be,De.tenantId=Be.tenantId||void 0,De.email=Be.email||void 0,De.phoneNumber=Be.phoneNumber||void 0)}}(ce,oe),oe}).then(oe=>{const be=oe.user;return{operationType:oe.operationType,credential:Qr(oe),additionalUserInfo:z.ao(oe),user:an.getOrCreate(be)}})}function Kr(ce,ye){return $n.apply(this,arguments)}function $n(){return($n=(0,_.Z)(function*(ce,ye){const oe=yield ye;return{verificationId:oe.verificationId,confirm:Be=>cr(ce,oe.confirm(Be))}})).apply(this,arguments)}class Nr{constructor(ye,oe){this.resolver=oe,this.auth=function wn(ce){return ce.wrapped()}(ye)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ye){return cr(ii(this.auth),this.resolver.resolveSignIn(ye))}}class an{constructor(ye){this._delegate=ye,this.multiFactor=z.ar(ye)}static getOrCreate(ye){return an.USER_MAP.has(ye)||an.USER_MAP.set(ye,new an(ye)),an.USER_MAP.get(ye)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ye){return this._delegate.getIdTokenResult(ye)}getIdToken(ye){return this._delegate.getIdToken(ye)}linkAndRetrieveDataWithCredential(ye){return this.linkWithCredential(ye)}linkWithCredential(ye){var oe=this;return(0,_.Z)(function*(){return cr(oe.auth,z.a0(oe._delegate,ye))})()}linkWithPhoneNumber(ye,oe){var Be=this;return(0,_.Z)(function*(){return Kr(Be.auth,z.l(Be._delegate,ye,oe))})()}linkWithPopup(ye){var oe=this;return(0,_.Z)(function*(){return cr(oe.auth,z.d(oe._delegate,ye,Yr))})()}linkWithRedirect(ye){var oe=this;return(0,_.Z)(function*(){return yield ri(z.aH(oe.auth)),z.g(oe._delegate,ye,Yr)})()}reauthenticateAndRetrieveDataWithCredential(ye){return this.reauthenticateWithCredential(ye)}reauthenticateWithCredential(ye){var oe=this;return(0,_.Z)(function*(){return cr(oe.auth,z.a1(oe._delegate,ye))})()}reauthenticateWithPhoneNumber(ye,oe){return Kr(this.auth,z.r(this._delegate,ye,oe))}reauthenticateWithPopup(ye){return cr(this.auth,z.e(this._delegate,ye,Yr))}reauthenticateWithRedirect(ye){var oe=this;return(0,_.Z)(function*(){return yield ri(z.aH(oe.auth)),z.h(oe._delegate,ye,Yr)})()}sendEmailVerification(ye){return z.ae(this._delegate,ye)}unlink(ye){var oe=this;return(0,_.Z)(function*(){return yield z.an(oe._delegate,ye),oe})()}updateEmail(ye){return z.aj(this._delegate,ye)}updatePassword(ye){return z.ak(this._delegate,ye)}updatePhoneNumber(ye){return z.u(this._delegate,ye)}updateProfile(ye){return z.ai(this._delegate,ye)}verifyBeforeUpdateEmail(ye,oe){return z.af(this._delegate,ye,oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}an.USER_MAP=new WeakMap;const Jr=z.aA;let Di=(()=>{class ce{constructor(oe,Be){if(this.app=oe,Be.isInitialized())return this._delegate=Be.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=oe.options;Jr(be,"invalid-api-key",{appName:oe.name}),Jr(be,"invalid-api-key",{appName:oe.name});const De=typeof window<"u"?Yr:void 0;this._delegate=Be.initialize({options:{persistence:Yi(be,oe.name),popupRedirectResolver:De}}),this._delegate._updateErrorMap(z.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?an.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(oe){this._delegate.languageCode=oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(oe){this._delegate.tenantId=oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(oe,Be){z.I(this._delegate,oe,Be)}applyActionCode(oe){return z.a5(this._delegate,oe)}checkActionCode(oe){return z.a6(this._delegate,oe)}confirmPasswordReset(oe,Be){return z.a4(this._delegate,oe,Be)}createUserWithEmailAndPassword(oe,Be){var be=this;return(0,_.Z)(function*(){return cr(be._delegate,z.a8(be._delegate,oe,Be))})()}fetchProvidersForEmail(oe){return this.fetchSignInMethodsForEmail(oe)}fetchSignInMethodsForEmail(oe){return z.ad(this._delegate,oe)}isSignInWithEmailLink(oe){return z.ab(this._delegate,oe)}getRedirectResult(){var oe=this;return(0,_.Z)(function*(){Jr(Hr(),oe._delegate,"operation-not-supported-in-this-environment");const Be=yield z.j(oe._delegate,Yr);return Be?cr(oe._delegate,Promise.resolve(Be)):{credential:null,user:null}})()}addFrameworkForLogging(oe){!function ut(ce,ye){(0,z.aH)(ce)._logFramework(ye)}(this._delegate,oe)}onAuthStateChanged(oe,Be,be){const{next:De,error:ve,complete:We}=Mi(oe,Be,be);return this._delegate.onAuthStateChanged(De,ve,We)}onIdTokenChanged(oe,Be,be){const{next:De,error:ve,complete:We}=Mi(oe,Be,be);return this._delegate.onIdTokenChanged(De,ve,We)}sendSignInLinkToEmail(oe,Be){return z.aa(this._delegate,oe,Be)}sendPasswordResetEmail(oe,Be){return z.a3(this._delegate,oe,Be||void 0)}setPersistence(oe){var Be=this;return(0,_.Z)(function*(){let be;switch(function jn(ce,ye){yi(Object.values(Hn).includes(ye),ce,"invalid-persistence-type"),(0,Le.b$)()?yi(ye!==Hn.SESSION,ce,"unsupported-persistence-type"):(0,Le.UG)()?yi(ye===Hn.NONE,ce,"unsupported-persistence-type"):Cr()?yi(ye===Hn.NONE||ye===Hn.LOCAL&&(0,Le.hl)(),ce,"unsupported-persistence-type"):yi(ye===Hn.NONE||_r(),ce,"unsupported-persistence-type")}(Be._delegate,oe),oe){case Hn.SESSION:be=z.a;break;case Hn.LOCAL:be=(yield z.aC(z.i)._isAvailable())?z.i:z.b;break;case Hn.NONE:be=z.N;break;default:return z.av("argument-error",{appName:Be._delegate.name})}return Be._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(oe){return this.signInWithCredential(oe)}signInAnonymously(){return cr(this._delegate,z._(this._delegate))}signInWithCredential(oe){return cr(this._delegate,z.$(this._delegate,oe))}signInWithCustomToken(oe){return cr(this._delegate,z.a2(this._delegate,oe))}signInWithEmailAndPassword(oe,Be){return cr(this._delegate,z.a9(this._delegate,oe,Be))}signInWithEmailLink(oe,Be){return cr(this._delegate,z.ac(this._delegate,oe,Be))}signInWithPhoneNumber(oe,Be){return Kr(this._delegate,z.s(this._delegate,oe,Be))}signInWithPopup(oe){var Be=this;return(0,_.Z)(function*(){return Jr(Hr(),Be._delegate,"operation-not-supported-in-this-environment"),cr(Be._delegate,z.c(Be._delegate,oe,Yr))})()}signInWithRedirect(oe){var Be=this;return(0,_.Z)(function*(){return Jr(Hr(),Be._delegate,"operation-not-supported-in-this-environment"),yield ri(Be._delegate),z.f(Be._delegate,oe,Yr)})()}updateCurrentUser(oe){return this._delegate.updateCurrentUser(oe)}verifyPasswordResetCode(oe){return z.a7(this._delegate,oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=Hn,ce})();function Mi(ce,ye,oe){let Be=ce;"function"!=typeof ce&&({next:Be,error:ye,complete:oe}=ce);const be=Be;return{next:ve=>be(ve&&an.getOrCreate(ve)),error:ye,complete:oe}}function Yi(ce,ye){const oe=function er(ce,ye){const oe=cn();if(!oe)return[];const Be=z.aD(Dr,ce,ye);switch(oe.getItem(Be)){case Hn.NONE:return[z.N];case Hn.LOCAL:return[z.i,z.a];case Hn.SESSION:return[z.a];default:return[]}}(ce,ye);if(typeof self<"u"&&!oe.includes(z.i)&&oe.push(z.i),typeof window<"u")for(const Be of[z.b,z.a])oe.includes(Be)||oe.push(Be);return oe.includes(z.N)||oe.push(z.N),oe}class ss{constructor(){this.providerId="phone",this._delegate=new z.P(ii(ie.Z.auth()))}static credential(ye,oe){return z.P.credential(ye,oe)}verifyPhoneNumber(ye,oe){return this._delegate.verifyPhoneNumber(ye,oe)}unwrap(){return this._delegate}}ss.PHONE_SIGN_IN_METHOD=z.P.PHONE_SIGN_IN_METHOD,ss.PROVIDER_ID=z.P.PROVIDER_ID;const Pi=z.aA;class Vi{constructor(ye,oe,Be=ie.Z.app()){var be;Pi(null===(be=Be.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Be.name}),this._delegate=new z.R(ye,oe,Be.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Re(ce){ce.INTERNAL.registerComponent(new Ge.wA("auth-compat",ye=>{const oe=ye.getProvider("app-compat").getImmediate(),Be=ye.getProvider("auth");return new Di(oe,Be)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:z.A.EMAIL_SIGNIN,PASSWORD_RESET:z.A.PASSWORD_RESET,RECOVER_EMAIL:z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:z.A.VERIFY_EMAIL}},EmailAuthProvider:z.Q,FacebookAuthProvider:z.U,GithubAuthProvider:z.W,GoogleAuthProvider:z.V,OAuthProvider:z.X,SAMLAuthProvider:z.Y,PhoneAuthProvider:ss,PhoneMultiFactorGenerator:z.m,RecaptchaVerifier:Vi,TwitterAuthProvider:z.Z,Auth:Di,AuthCredential:z.J,Error:Le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.4.2")}(ie.Z)},5861:(fn,lt,K)=>{function _(z,Le,Se,je,Ge,Ie,Qe){try{var he=z[Ie](Qe),we=he.value}catch(Oe){return void Se(Oe)}he.done?Le(we):Promise.resolve(we).then(je,Ge)}function ie(z){return function(){var Le=this,Se=arguments;return new Promise(function(je,Ge){var Ie=z.apply(Le,Se);function Qe(we){_(Ie,je,Ge,Qe,he,"next",we)}function he(we){_(Ie,je,Ge,Qe,he,"throw",we)}Qe(void 0)})}}K.d(lt,{Z:()=>ie})},7582:(fn,lt,K)=>{function Le(Ke,Ye){var ut={};for(var ze in Ke)Object.prototype.hasOwnProperty.call(Ke,ze)&&Ye.indexOf(ze)<0&&(ut[ze]=Ke[ze]);if(null!=Ke&&"function"==typeof Object.getOwnPropertySymbols){var mt=0;for(ze=Object.getOwnPropertySymbols(Ke);mt<ze.length;mt++)Ye.indexOf(ze[mt])<0&&Object.prototype.propertyIsEnumerable.call(Ke,ze[mt])&&(ut[ze[mt]]=Ke[ze[mt]])}return ut}function Oe(Ke,Ye,ut,ze){return new(ut||(ut=Promise))(function(Ot,Qt){function Rt(On){try{Cn(ze.next(On))}catch(gr){Qt(gr)}}function nn(On){try{Cn(ze.throw(On))}catch(gr){Qt(gr)}}function Cn(On){On.done?Ot(On.value):function mt(Ot){return Ot instanceof ut?Ot:new ut(function(Qt){Qt(Ot)})}(On.value).then(Rt,nn)}Cn((ze=ze.apply(Ke,Ye||[])).next())})}function Ze(Ke){return this instanceof Ze?(this.v=Ke,this):new Ze(Ke)}function Pe(Ke,Ye,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt,ze=ut.apply(Ke,Ye||[]),Ot=[];return mt={},Qt("next"),Qt("throw"),Qt("return"),mt[Symbol.asyncIterator]=function(){return this},mt;function Qt(Qn){ze[Qn]&&(mt[Qn]=function(_r){return new Promise(function(Cr,Hr){Ot.push([Qn,_r,Cr,Hr])>1||Rt(Qn,_r)})})}function Rt(Qn,_r){try{!function nn(Qn){Qn.value instanceof Ze?Promise.resolve(Qn.value.v).then(Cn,On):gr(Ot[0][2],Qn)}(ze[Qn](_r))}catch(Cr){gr(Ot[0][3],Cr)}}function Cn(Qn){Rt("next",Qn)}function On(Qn){Rt("throw",Qn)}function gr(Qn,_r){Qn(_r),Ot.shift(),Ot.length&&Rt(Ot[0][0],Ot[0][1])}}function Lt(Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ye=Ke[Symbol.asyncIterator];return Ye?Ye.call(Ke):(Ke=function qt(Ke){var Ye="function"==typeof Symbol&&Symbol.iterator,ut=Ye&&Ke[Ye],ze=0;if(ut)return ut.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&ze>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[ze++],done:!Ke}}};throw new TypeError(Ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ke),ut={},ze("next"),ze("throw"),ze("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function ze(Ot){ut[Ot]=Ke[Ot]&&function(Qt){return new Promise(function(Rt,nn){!function mt(Ot,Qt,Rt,nn){Promise.resolve(nn).then(function(Cn){Ot({value:Cn,done:Rt})},Qt)}(Rt,nn,(Qt=Ke[Ot](Qt)).done,Qt.value)})}}}K.d(lt,{FC:()=>Pe,KL:()=>Lt,_T:()=>Le,mG:()=>Oe,qq:()=>Ze}),"function"==typeof SuppressedError&&SuppressedError}},fn=>{fn(fn.s=9713)}]);