<!-- Component Start -->
<div class="sm:ml-64">
  <div class="flex flex-col w-full h-screen overflow-auto text-gray-700">
    <div class="px-10 mt-6">
      <h1 class="text-2xl font-bold">Quadro de Tarefas</h1>
    </div>
    <div *ngIf="listGroup | async as listaGrupo" class="flex flex-grow px-10 mt-4 space-x-6 overflow-auto" [@fadeInOnEnter]>
      <div
        class="flex flex-col flex-shrink-0 w-72 bg-gradient-to-tr from-blue-200 via-indigo-200 to-pink-200 rounded-lg p-3"
        *ngFor="let taskItem of listaGrupo"
      >
        <div class="flex items-center flex-shrink-0 h-10 px-2">
          <span class="block text-sm font-semibold">{{ taskItem[0] }}</span>
          <span
            class="flex items-center justify-center w-5 h-5 ml-2 text-sm font-semibold text-indigo-500 bg-white rounded bg-opacity-30"
            >6</span
          >
          <button
            class="flex items-center justify-center w-6 h-6 ml-auto text-indigo-500 rounded hover:bg-indigo-500 hover:text-indigo-100"
            (click)="toggleModal(taskItem[0])"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6v6m0 0v6m0-6h6m-6 0H6"
              ></path>
            </svg>
          </button>
        </div>
        <div class="flex flex-col pb-2 overflow-auto">
          <div
            class="relative flex flex-col items-start p-4 mt-3 bg-white rounded-lg cursor-pointer bg-opacity-90 group hover:bg-opacity-100"
            draggable="true"
            *ngFor="let item of taskItem[1]"
          >
            <button
              class="absolute top-0 right-0 flex items-center justify-center hidden w-5 h-5 mt-3 mr-2 text-gray-500 rounded hover:bg-gray-200 hover:text-gray-700 group-hover:flex"
              (click)="deleteTask(item.key)"
            >
              <svg
                class="w-4 h-4 fill-current"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"
                />
              </svg>
            </button>
            <span
              class="flex items-center h-6 px-3 text-xs font-semibold text-pink-500 bg-pink-100 rounded-full"
              >{{ item.tags }}</span
            >
            <h4 class="mt-3 text-sm font-medium">
              {{ item.description }}
            </h4>
            <div
              class="flex items-center w-full mt-3 text-xs font-medium text-gray-400"
            >
              <div class="flex items-center">
                <svg
                  class="w-4 h-4 text-gray-300 fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="ml-1 leading-none">Dec 12</span>
              </div>
              <div class="relative flex items-center ml-4">
                <svg
                  class="relative w-4 h-4 text-gray-300 fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="ml-1 leading-none">4</span>
              </div>
              <div class="flex items-center ml-4">
                <svg
                  class="w-4 h-4 text-gray-300 fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="ml-1 leading-none">1</span>
              </div>
              <img
                class="w-6 h-6 ml-auto rounded-full"
                src="https://randomuser.me/api/portraits/women/26.jpg"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="flex-shrink-0 w-6"></div>
    </div>
  </div>
</div>
<!-- Component End -->

<a
  role="button"
  class="fixed bottom-0 right-0 flex items-center justify-center h-8 pl-1 pr-2 mb-6 mr-4 text-blue-100 bg-blue-600 rounded-full shadow-lg hover:bg-blue-600"
  (click)="toggleModal()"
>
  <span class="ml-1 text-sm leading-none">Novo</span>
</a>

<!-- Modal Start -->
<div
  *ngIf="showModal"
  class="overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"
>
  <div class="relative w-auto my-6 mx-auto max-w-6xl">
    <!--content-->
    <div
      class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"
    >
      <!--header-->
      <div
        class="flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t"
      >
        <h3 class="text-3xl font-semibold">Nova Tarefa</h3>
        <button
          class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
          (click)="toggleModal()"
        >
          <span
            class="bg-transparent text-black opacity-5 h-6 w-6 text-2xl block outline-none focus:outline-none"
          >
            ×
          </span>
        </button>
      </div>
      <!--body-->
      <div class="relative p-6 flex-auto">
        <form [formGroup]="newTaskForm" (onSubmit)="onSubmit()">
          <div class="mb-6">
            <select
              class="block w-full p-2.5 text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
              formControlName="status"
              name="status"
              required
              (click)="listCategories()"
            >
              <option *ngFor="let category of categories" [value]="category">
                {{ category }}
              </option>
            </select>
          </div>
          <div class="mb-6">
            <label for="message" class="block mb-2 text-sm font-medium"
              >Descrição</label
            >
            <textarea
              id="message"
              rows="4"
              class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"
              placeholder="Descreva a tarefa"
              formControlName="description"
              name="description"
              required
            ></textarea>
          </div>

          <div class="mb-6 flex gap-2 flex-col">
            <label for="tags" class="block mb-2 text-sm font-medium"
              >Tags</label
            >
            <div>
              <span
                role="button"
                *ngFor="let item of listTags"
                (click)="removeTag(item)"
                class="bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300"
                >{{ item }}</span
              >
            </div>
            <input
              name="tags"
              formControlName="tags"
              (keyup.Enter)="addTag()"
              type="text"
              id="tags"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="Design"
              required
            />
          </div>
        </form>
      </div>
      <!--footer-->
      <div
        class="flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b"
      >
        <button
          class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
          type="button"
          (click)="toggleModal()"
        >
          Fechar
        </button>
        <button
          class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
          type="button"
          (click)="addTask(); toggleModal()"
        >
          Adicionar Tarefa
        </button>
      </div>
    </div>
  </div>
</div>
<div *ngIf="showModal" class="opacity-25 fixed inset-0 z-40 bg-black"></div>
